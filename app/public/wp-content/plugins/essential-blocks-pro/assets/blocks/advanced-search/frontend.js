(()=>{function e(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,n=Array(a);t<a;t++)n[t]=e[t];return n}document.addEventListener("DOMContentLoaded",function(a){var t,n=function(a,t){var n="undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(!n){if(Array.isArray(a)||(n=function(a,t){if(a){if("string"==typeof a)return e(a,t);var n={}.toString.call(a).slice(8,-1);return"Object"===n&&a.constructor&&(n=a.constructor.name),"Map"===n||"Set"===n?Array.from(a):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(a,t):void 0}}(a))||t&&a&&"number"==typeof a.length){n&&(a=n);var s=0,o=function(){};return{s:o,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,r=!0,d=!1;return{s:function(){n=n.call(a)},n:function(){var e=n.next();return r=e.done,e},e:function(e){d=!0,l=e},f:function(){try{r||null==n.return||n.return()}finally{if(d)throw l}}}}(document.getElementsByClassName("eb-adv-search-wrapper"));try{var s=function(){var e,a,n=t.value,s=n.getElementsByClassName("adv-search-field")[0],o=n.getElementsByClassName("eb-adv-search-result")[0],l=n.getElementsByClassName("eb-adv-search-content")[0],r=n.getElementsByClassName("eb-adv-search-loader")[0],d=n.getElementsByClassName("eb-adv-search-close")[0],i=n.getElementsByClassName("eb-adv-search-not-found")[0],c=n.getElementsByClassName("eb-adv-searchform")[0],p=JSON.parse(c.getAttribute("data-searchsettings")),u=p.post_type,y=p.showTotalResult,m=p.displayContentImage,v=p.showTaxonomyFilter,f=p.showLoadMore,h=p.initialValue,g=(null==p?void 0:p.selectedTaxonomy)||"",b=(null==p?void 0:p.excludedTaxonomyItems)||"",E=p.showPopularKeywords,k=p.popularKeywordslimit,w=p.popularKeywordsRank,_=p.popularKeywordsRankLength;y&&(e=n.getElementsByClassName("eb-adv-search-total-results-wrapper")[0],a=n.getElementsByClassName("eb-adv-search-total-results-count")[0]);var L=n.getElementsByClassName("eb-adv-search-cate")[0],T=n.getElementsByClassName("eb-adv-search-load-more")[0],N=n.getElementsByClassName("eb-adv-search-load-more-btn")[0],C="";if(v)if(c.classList.contains("preset-modern")){var B=c.getElementsByClassName("eb-adv-search-filter-icon")[0],x=n.getElementsByClassName("eb-adv-search-filter-area")[0];B.addEventListener("click",function(e){"none"===x.style.display?x.style.display="block":x.style.display="none"});for(var S=x.getElementsByClassName("search-filter"),A=!1,M=0;M<S.length;M++)if(S[M].checked){A=!0;break}!A&&S.length>0&&(S[0].checked=!0,C=S[0].value),x.querySelectorAll('input[type="radio"]').forEach(function(e){e.addEventListener("change",function(){var e=x.querySelector('input[name="search-filter"]:checked');C=e?e.value:null})})}else L.addEventListener("change",function(e){C=e.target.value.trim()});E&&n.querySelectorAll(".eb-popular-keyword-item").forEach(function(e){e.addEventListener("click",function(e){if("eb-popular-keyword-item"!==e.target.className)return!1;searchText=e.target.dataset.keyword,s.value=e.target.dataset.keyword,s.dispatchEvent(new Event("keyup"))})});var I=0,P=1,K="";s.addEventListener("keyup",function(t){setTimeout(function(){var n=t.target.value.trim();if(n!==K){K=n;var s=n.length;s<1&&(o.style.display="none"),r.style.display="block",d.style.display="none";var c=new FormData;c.append("action","adv_search_result_content"),c.append("adv_search_nonce",EssentialBlocksProLocalize.adv_search_nonce),c.append("searchText",n),c.append("postType",u),c.append("displayContentImage",m),c.append("catName",C),c.append("initialValue",h),c.append("selectedTaxonomy",g),c.append("excludedTaxonomyItems",b),c.append("showPopularKeywords",E),c.append("popularKeywordslimit",k),c.append("popularKeywordsRank",w),c.append("popularKeywordsRankLength",_),fetch(EssentialBlocksProLocalize.ajax_url,{method:"POST",body:c}).then(function(e){return e.text()}).then(function(t){var n=JSON.parse(t);if(n.success){var c,p;if(r.style.display="none",o.style.display="none",i.style.display="none",void 0!==T&&((null===(c=n.data)||void 0===c?void 0:c.post_count)>h?T.style.display="block":T.style.display="none"),s>0)if(o.style.display="block",l.innerHTML="",null!==(p=n.data)&&void 0!==p&&p.post_lists){var u;y&&(null!==(u=n.data)&&void 0!==u&&u.post_count?(e.style.display="block",a.innerHTML=n.data.post_count):(e.style.display="none",a.innerHTML=0)),l.style.display="block",l.insertAdjacentHTML("beforeend",n.data.post_lists),f&&(I=n.data.page_count)}else l.style.display="none",i.style.display="block",void 0!==T&&(T.style.display="none"),y&&(a.innerHTML=0);d.style.display=s>0?"block":"none"}}).catch(function(e){return console.log(e)})}},[1500])}),d.addEventListener("click",function(e){e.preventDefault(),d.style.display="none",s.value="",o.style.display="none"}),f&&N.addEventListener("click",function(e){e.preventDefault(),P++;var a=new FormData;a.append("action","adv_search_loadmore_content"),a.append("adv_search_nonce",EssentialBlocksProLocalize.adv_search_nonce),a.append("searchText",s.value),a.append("postType",u),a.append("displayContentImage",m),a.append("catName",C),a.append("initialValue",h),a.append("showLoadMore",f),a.append("currentPage",P),a.append("selectedTaxonomy",g),a.append("excludedTaxonomyItems",b),fetch(EssentialBlocksProLocalize.ajax_url,{method:"POST",body:a}).then(function(e){return e.text()}).then(function(e){var a=JSON.parse(e);a.success&&a.data.post_lists&&l.insertAdjacentHTML("beforeend",a.data.post_lists)}).catch(function(e){return console.log(e)}),P==I&&(T.style.display="none")})};for(n.s();!(t=n.n()).done;)s()}catch(e){n.e(e)}finally{n.f()}})})();