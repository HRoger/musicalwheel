(()=>{"use strict";var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.apiFetch;var o=e.n(t);function r(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,t){if(e){if("string"==typeof e)return a(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,s=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return c=e.done,e},e:function(e){s=!0,i=e},f:function(){try{c||null==o.return||o.return()}finally{if(s)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=Array(t);o<t;o++)r[o]=e[o];return r}var n=!!EssentialBlocksLocalize&&EssentialBlocksLocalize.rest_rootURL;o().use(o().createRootURLMiddleware(n));var i=function(e){e.forEach(function(e){var t=parseFloat(e.getAttribute("data-sold-count")),o=parseFloat(e.getAttribute("data-product-quantity")),r=parseFloat(e.getAttribute("data-stock-percent"));r=0==t?"0":r;var a=o?Math.ceil(t/(t+o)*100):r;e.style.width=a+"%";var n=null;requestAnimationFrame(function t(o){n||(n=o),(o-n)/1e3<1&&(e.style.width=a+"%",requestAnimationFrame(t))})})};function c(e,t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)}function s(e){var t,o=1,r=null===(t=e.closest(".ebproductgrid-pagination"))||void 0===t?void 0:t.querySelector(".ebpg-pagination-item.active");if(r){if(o=r.dataset?r.dataset.pagenumber:1,c(e,"ebpg-pagination-item-next")){for(var a=r.nextElementSibling;a&&!a.classList.contains("ebpg-pagination-item");)a=a.nextElementSibling;a.classList.add("active"),r.classList.remove("active")}else if(c(e,"ebpg-pagination-item-previous")){for(var n=r.previousElementSibling;n&&!n.classList.contains("ebpg-pagination-item");)n=n.previousElementSibling;n.classList.add("active"),r.classList.remove("active")}l(e.closest(".ebproductgrid-pagination"))}return o}function l(e){var t=e.querySelector(".ebpg-pagination-item.active");if(t){var o=parseInt(t.dataset.pagenumber),r=e.querySelectorAll(".ebpg-pagination-item"),a=r.length,n=1;r.forEach(function(e){n=parseInt(e.dataset.pagenumber),function(e){e.classList.remove("show"),e.classList.add("hide")}(e),(1===o&&n<=3||n>=o&&n<=o+2||n===a||1===n&&(o>=a-2||o>=4))&&function(e){e.classList.remove("hide"),e.classList.add("show")}(e)});var i=e.querySelectorAll(".ebpg-pagination-item-separator");i.length>0&&i.forEach(function(e){e.remove()});var c='<button class="ebpg-pagination-item-separator">...</button>';o<r.length-2&&r[r.length-1].insertAdjacentHTML("beforebegin",c),(o>=a-2||a>4&&o>=4)&&r[1].insertAdjacentHTML("afterend",c),1===o?(e.querySelector(".ebpg-pagination-item-previous").disabled=!0,e.querySelector(".ebpg-pagination-item-next").disabled=!1):o===a?(e.querySelector(".ebpg-pagination-item-previous").disabled=!1,e.querySelector(".ebpg-pagination-item-next").disabled=!0):(e.querySelector(".ebpg-pagination-item-previous").disabled=!1,e.querySelector(".ebpg-pagination-item-next").disabled=!1)}}window.addEventListener("DOMContentLoaded",function(e){var t=document.querySelectorAll(".eb-woo-products-wrapper");if(0!==t.length){var o,a=r(t);try{var n=function(){var e=o.value,t=e.querySelectorAll(".eb-woo-product-sold-bar");i(t);var r=document.querySelector(".eb-woo-products-gallery"),a=new MutationObserver(function(t,o){var r=e.querySelectorAll(".eb-woo-product-sold-bar");i(r)});a.observe(r,{childList:!0,attributes:!0,subtree:!0,characterData:!0})};for(a.s();!(o=a.n()).done;)n()}catch(e){a.e(e)}finally{a.f()}}}),window.addEventListener("DOMContentLoaded",function(e){var t,a=r(document.getElementsByClassName("ebwpg-category-filter"));try{var n=function(){var e=t.value,r=e.dataset.ebwpgtaxonomy;e.querySelectorAll(".ebwpg-category-filter-list li").forEach(function(e){"all"===e.dataset.ebpgcategory&&e.classList.add("active"),e.addEventListener("click",function(e){var t,a=this,n=e.target.getAttribute("data-ebwpgCategory");t="all"===n?"&query_type=filter":"&taxonomy=".concat(r,"&category=").concat(n);var i=this.closest(".eb-woo-products-wrapper").dataset;o()({path:"essential-blocks/v1/products?query_data=".concat(i.querydata,"&attributes=").concat(encodeURIComponent(i.attributes)).concat(t),parse:!1}).then(function(e){var r=e.headers.get("x-wp-total");if(r){var n=new FormData;n.append("action","post_grid_block_pagination"),n.append("post_grid_pagination_nonce",EssentialBlocksLocalize.post_grid_pagination_nonce),n.append("querydata",null==i?void 0:i.querydata),n.append("attributes",null==i?void 0:i.attributes),n.append("totalPosts",r),fetch(EssentialBlocksLocalize.ajax_url,{method:"POST",body:n}).then(function(e){return e.text()}).then(function(e){var r=a.closest(".eb-woo-products-wrapper").querySelector(".ebproductgrid-pagination"),n=a.closest(".eb-woo-products-wrapper");if(r)r.innerHTML=e;else{var i=document.createElement("div");i.className="ebproductgrid-pagination ebpg-pagination ",i.innerHTML=e,n.appendChild(i)}!function(e,t){var r=e.querySelector(".ebproductgrid-pagination");if(r){var a=r.querySelectorAll(".ebpg-pagination button");a.length>0&&(document.querySelectorAll(".ebproductgrid-pagination").forEach(function(e){l(e)}),a.forEach(function(e){var r=1;e.addEventListener("click",function(){var e=this,a=c(this,"ebpg-pagination-button"),n=c(this,"ebpg-pagination-item-previous"),i=c(this,"ebpg-pagination-item-next");r=a?parseInt(r)+1:n?parseInt(s(this))-1:i?parseInt(s(this))+1:parseInt(this.dataset.pagenumber);var p=this.closest(".eb-woo-products-wrapper");if(p){var u=p.dataset,d=t||"";o()({path:"essential-blocks/v1/products?query_data=".concat(u.querydata,"&attributes=").concat(encodeURIComponent(u.attributes)).concat(d,"&pageNumber=").concat(r,"&is_frontend=true")}).then(function(t){if(a)if(t)e.closest(".ebproductgrid-pagination").parentElement.querySelector(".eb-woo-products-gallery").insertAdjacentHTML("beforeend",t);else{e.closest(".ebproductgrid-pagination").insertAdjacentHTML("beforebegin",'<p class="eb-no-posts">No more products</p>'),e.closest(".ebproductgrid-pagination").remove()}else e.closest(".eb-woo-products-wrapper").querySelectorAll(".eb-woo-products-col").forEach(function(e){e.remove()}),e.closest(".ebproductgrid-pagination").parentElement.querySelector(".eb-woo-products-gallery").insertAdjacentHTML("beforeend",t),c(e,"ebpg-pagination-item")&&(e.closest(".ebproductgrid-pagination").querySelectorAll(".ebpg-pagination-item").forEach(function(e){e.classList.remove("active")}),e.classList.add("active")),l(e.closest(".ebproductgrid-pagination"))})}})}))}}(n,t)}).catch(function(e){return console.log(e)}),o()({path:"essential-blocks/v1/products?query_data=".concat(i.querydata,"&attributes=").concat(encodeURIComponent(i.attributes)).concat(t,"&is_frontend=true")}).then(function(e){a.closest(".eb-woo-products-wrapper").querySelectorAll(".eb-woo-products-col").forEach(function(e){e.remove()}),a.closest(".eb-woo-products-wrapper").querySelector("p")&&a.closest(".eb-woo-products-wrapper").querySelector("p").remove(),a.closest(".eb-woo-products-wrapper").querySelector(".eb-woo-products-gallery").insertAdjacentHTML("beforeend",e),a.closest(".ebwpg-category-filter").querySelectorAll(".ebwpg-category-filter-list-item").forEach(function(e){e.classList.remove("active")}),a.classList.add("active")})}else a.closest(".ebwpg-category-filter").querySelectorAll(".ebwpg-category-filter-list-item").forEach(function(e){e.classList.remove("active")}),a.classList.add("active"),a.closest(".eb-woo-products-wrapper").querySelectorAll(".eb-woo-products-col").forEach(function(e){e.remove()}),a.closest(".eb-woo-products-wrapper").querySelector(".ebproductgrid-pagination")&&(a.closest(".eb-woo-products-wrapper").querySelector(".ebproductgrid-pagination").innerHTML=""),a.closest(".eb-woo-products-wrapper").querySelector("p")&&a.closest(".eb-woo-products-wrapper").querySelectorAll("p").forEach(function(e){e.remove()}),a.closest(".eb-woo-products-wrapper").insertAdjacentHTML("beforeend","<p>No Posts Found</p>")},function(e){console.log("error",e)})})})};for(a.s();!(t=a.n()).done;)n()}catch(e){a.e(e)}finally{a.f()}})})();