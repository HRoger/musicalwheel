import{registerBlockType as Z}from"@wordpress/blocks";import{useBlockProps as J,InspectorControls as U}from"@wordpress/block-editor";import{__ as o}from"@wordpress/i18n";import{useState as R,useRef as M,useEffect as k,useCallback as P,useMemo as z}from"react";import q from"@wordpress/api-fetch";import"react-dom";import{F as K}from"../FormPopup-jN8spfqy.js";import"../voxelShim-DB_Ue-9R.js";import{r as ee}from"../backgroundElements-Ui-iCrLV.js";import{g as ne}from"../iconDefaults-4kDCIhgb.js";import"../MediaPopup-CdtMdouF.js";import{E as O}from"../EmptyPlaceholder-BsL18qxN.js";import{A as X,a as B,S as $,e as L,b as le,T as oe,C as w,R as N}from"../TypographyPopup-CAcEJ5NA.js";import{I as ae}from"../InspectorTabs-Bq2wAh4W.js";import{SelectControl as C,ToggleControl as E,RangeControl as F}from"@wordpress/components";import{useSelect as te}from"@wordpress/data";/* empty css                            */import"../RepeaterControl-BnF4Wtgt.js";import{A as H}from"../AdvancedIconControl-CJ_DCTeD.js";import{R as ce,g as ie,L as re}from"../RepeaterControl-Dbi7c87C.js";import{R as W}from"../RelationControl-Defl_3gr.js";import{R as D}from"../ResponsiveDimensionsControl-BXd6ZjaD.js";import{P as se}from"../PopupCustomStyleControl-CqrYAaTh.js";import{g as Y}from"../useAdvancedTabProps-BnJDQbKr.js";import"../generateAdvancedStyles-CRpLcHXt.js";import"../generateVoxelStyles-oZeaeuKH.js";const me={hamburger:{library:"line-awesome",value:"las la-bars"},close:{library:"line-awesome",value:"las la-times"}};function j(e,n){return ne(e??void 0,me[n]||{library:"",value:""})}function T(e){return!e||!e.value?null:e.library==="svg"?React.createElement("img",{src:e.value,alt:"",className:"ts-svg-icon"}):React.createElement("i",{className:e.value,"aria-hidden":"true"})}function A({item:e,depth:n,attributes:l,onSubmenuToggle:c}){const[r,a]=R(!1),m=M(null),i=M(null),p=["menu-item",`menu-item-${e.id}`,...e.classes,e.isCurrent?"current-menu-item":"",e.hasChildren&&n===0?"ts-popup-component ts-trigger-on-hover":""].filter(Boolean).join(" "),g=P(f=>{e.hasChildren&&(f.preventDefault(),a(!r),c?.(e.id,!r))},[e.hasChildren,e.id,r,c]);k(()=>{if(!r)return;const f=t=>{m.current&&!m.current.contains(t.target)&&a(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[r]);const h=React.createElement(React.Fragment,null,n===0&&React.createElement("div",{className:"ts-item-icon flexify"},e.icon?React.createElement("span",{dangerouslySetInnerHTML:{__html:e.icon}}):null),n>0&&e.icon&&React.createElement("div",{className:"ts-term-icon"},React.createElement("span",{dangerouslySetInnerHTML:{__html:e.icon}})),React.createElement("span",null,e.title),e.hasChildren&&React.createElement("div",{className:n===0?"ts-down-icon":"ts-right-icon"}));return React.createElement("li",{ref:m,className:p},React.createElement("a",{ref:i,href:e.url,target:e.target||void 0,className:n===0?"ts-item-link":"flexify",onClick:g},h),e.hasChildren&&n===0&&React.createElement(K,{isOpen:r,popupId:`navbar-submenu-${e.id}`,target:i.current,title:"",icon:"",showHeader:!1,showFooter:!1,clearButton:!1,onClose:()=>{a(!1),c?.(e.id,!1)}},React.createElement("div",{className:"ts-term-dropdown ts-md-group ts-multilevel-dropdown"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list sub-menu"},React.createElement("li",{className:"ts-parent-menu"},React.createElement("a",{href:e.url,className:"flexify"},e.icon&&React.createElement("span",{dangerouslySetInnerHTML:{__html:e.icon}}),React.createElement("span",null,e.title))),e.children.map(f=>React.createElement(A,{key:f.id,item:f,depth:n+1,attributes:l}))))))}function pe({attributes:e,menuData:n}){const[l,c]=R(!1),[r,a]=R("main"),[,m]=R("right"),i=M(null),p=M(null);k(()=>{if(!l)return;const h=f=>{i.current&&!i.current.contains(f.target)&&c(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[l]);const g=P((h,f)=>{m(f),a(h)},[]);return React.createElement("li",{ref:i,className:"ts-popup-component ts-mobile-menu"},React.createElement("button",{ref:p,type:"button",className:"ts-item-link",onClick:()=>c(!l),"aria-haspopup":"true","aria-expanded":l,"aria-label":e.hamburgerTitle||"Menu"},React.createElement("div",{className:"ts-item-icon flexify"},T(j(e.hamburgerIcon,"hamburger"))),e.showMenuLabel&&React.createElement("span",null,e.hamburgerTitle)),React.createElement(K,{isOpen:l,popupId:"navbar-mobile-menu",target:p.current,title:e.hamburgerTitle||"",icon:"",showHeader:!0,showFooter:!1,clearButton:!1,onClose:()=>c(!1)},React.createElement("div",{className:"ts-popup-head flexify hide-d"},React.createElement("div",{className:"ts-popup-name flexify"},T(j(e.hamburgerIcon,"hamburger")),React.createElement("span",null,e.hamburgerTitle)),React.createElement("ul",{className:"flexify simplify-ul"},React.createElement("li",{className:"flexify ts-popup-close"},React.createElement("button",{type:"button",onClick:()=>c(!1),className:"ts-icon-btn"},T(j(e.closeIcon,"close")))))),React.createElement("div",{className:"ts-term-dropdown ts-md-group ts-multilevel-dropdown"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list"},n?.items.map(h=>React.createElement(de,{key:h.id,item:h,attributes:e,activeScreen:r,onNavigate:g}))))))}function de({item:e,attributes:n,activeScreen:l,onNavigate:c}){const r=`submenu-${e.id}`;return React.createElement("li",{className:`menu-item ${e.isCurrent?"current-menu-item":""}`},React.createElement("a",{href:e.hasChildren?"#":e.url,className:"flexify",onClick:a=>{e.hasChildren&&(a.preventDefault(),c(r,"right"))}},e.icon&&React.createElement("div",{className:"ts-term-icon"},React.createElement("span",{dangerouslySetInnerHTML:{__html:e.icon}})),React.createElement("span",null,e.title),e.hasChildren&&React.createElement("div",{className:"ts-right-icon"})))}function ue({attributes:e,menuData:n,mobileMenuData:l,isLoading:c,error:r,context:a}){const m={source:e.source,menuLocation:e.menuLocation,mobileMenuLocation:e.mobileMenuLocation,orientation:e.orientation,justify:e.justify,collapsible:e.collapsible,collapsedWidth:e.collapsedWidth,expandedWidth:e.expandedWidth,hamburgerTitle:e.hamburgerTitle,showBurgerDesktop:e.showBurgerDesktop,showBurgerTablet:e.showBurgerTablet,showMenuLabel:e.showMenuLabel,hamburgerIcon:e.hamburgerIcon,closeIcon:e.closeIcon,manualItems:e.manualItems,showIcon:e.showIcon,iconOnTop:e.iconOnTop,customPopupEnabled:e.customPopupEnabled,multiColumnMenu:e.multiColumnMenu,menuColumns:e.menuColumns},i=["ts-nav",`ts-nav-${e.orientation}`,"flexify","simplify-ul",e.orientation==="horizontal"?"min-scroll min-scroll-h":"",e.collapsible?"ts-nav-collapsed":""].filter(Boolean).join(" ");if(c)return React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(m)}}),React.createElement(O,null));if(r)return React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(m)}}),React.createElement(O,null));if(e.source==="add_links_manually")return React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(m)}}),React.createElement("nav",{className:"ts-nav-menu ts-custom-links flexify"},React.createElement("ul",{className:i},e.manualItems.map(p=>React.createElement("li",{key:p.id,className:`menu-item ${p.isActive?"current-menu-item":""}`},React.createElement("a",{href:p.url,target:p.isExternal?"_blank":void 0,rel:p.nofollow?"nofollow noopener":void 0,className:"ts-item-link"},React.createElement("div",{className:"ts-item-icon flexify"},T(p.icon)),React.createElement("span",null,p.text)))))));if(e.source==="select_wp_menu"){const p=l||n;return React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(m)}}),React.createElement("nav",{className:`ts-nav-menu ts-wp-menu ${e.collapsible?"ts-nav-collapsed":""}`},React.createElement("ul",{className:i},(e.showBurgerDesktop||e.showBurgerTablet)&&React.createElement(pe,{attributes:e,menuData:p}),n?.items.map(g=>React.createElement(A,{key:g.id,item:g,depth:0,attributes:e})))))}return e.source==="template_tabs"?React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(m)}}),React.createElement("nav",{className:"ts-nav-menu ts-tab-triggers flexify"},React.createElement("ul",{className:i},React.createElement("li",{className:"menu-item"},React.createElement("span",{className:"ts-item-link"},React.createElement("span",null,"Template Tabs (link widget to use)")))))):e.source==="search_form"?React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(m)}}),React.createElement("nav",{className:"ts-nav-menu ts-nav-sf flexify"},React.createElement("ul",{className:i},React.createElement("li",{className:"menu-item"},React.createElement("span",{className:"ts-item-link"},React.createElement("span",null,"Search Form (link widget to use)")))))):React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(m)}}),React.createElement("nav",{className:"ts-nav-menu ts-wp-menu flexify"},React.createElement("ul",{className:i},React.createElement("li",{className:"menu-item"},React.createElement("span",{className:"ts-item-link"},React.createElement("span",null,"Select a menu source"))))))}const fe="voxel-fse/search-form",he="voxel-fse/template-tabs";function ve({attributes:e,setAttributes:n,menuLocationOptions:l}){const c=`icons-${e.source}`,r=M(null),a=P(()=>{if(!r.current)return;r.current.querySelectorAll(".components-panel__body.is-opened").forEach(s=>{s.style.maxHeight="none",s.style.height="auto",s.style.overflow="visible"}),r.current.querySelectorAll(".voxel-fse-image-upload-empty").forEach(s=>{s.style.minHeight="100px"})},[]);k(()=>{const t=setTimeout(a,50),d=new MutationObserver(s=>{s.forEach(v=>{if(v.type==="attributes"&&v.attributeName==="class"&&setTimeout(a,50),v.type==="attributes"&&v.attributeName==="style"){const y=v.target;y.classList.contains("is-opened")&&(y.style.maxHeight="none",y.style.height="auto",y.style.overflow="visible")}})});return r.current&&d.observe(r.current,{attributes:!0,subtree:!0,attributeFilter:["class","style"]}),()=>{clearTimeout(t),d.disconnect()}},[e.source,a]);const m=`
        .components-panel__body.is-opened {
            max-height: none !important;
            height: auto !important;
            overflow: visible !important;
        }
        .voxel-advanced-icon-control .voxel-fse-image-upload-empty {
            min-height: 100px !important;
        }
    `,{searchFormBlocks:i,templateTabsBlocks:p}=te(t=>{const{getBlocks:d}=t("core/block-editor"),s=d(),v=(y,I)=>{let _=[];return y.forEach(u=>{u.name===I&&_.push(u),u.innerBlocks&&u.innerBlocks.length>0&&(_=[..._,...v(u.innerBlocks,I)])}),_};return{searchFormBlocks:v(s,fe),templateTabsBlocks:v(s,he)}},[]),g=[{value:"left",label:o("Left","voxel-fse")},{value:"center",label:o("Center","voxel-fse")},{value:"right",label:o("Right","voxel-fse")},{value:"space-between",label:o("Space between","voxel-fse")},{value:"space-around",label:o("Space around","voxel-fse")}],h=[{value:"add_links_manually",label:o("Add links manually","voxel-fse")},{value:"select_wp_menu",label:o("Select existing menu","voxel-fse")},{value:"template_tabs",label:o("Link to Template Tabs widget","voxel-fse")},{value:"search_form",label:o("Link to Search Form widget","voxel-fse")}],f=[{value:"horizontal",label:o("Horizontal","voxel-fse")},{value:"vertical",label:o("Vertical","voxel-fse")}];return React.createElement("div",{ref:r},React.createElement("style",null,m),React.createElement(X,{defaultPanel:"source",attributes:e,setAttributes:n,stateAttribute:"contentTabOpenPanel"},React.createElement(B,{id:"source",title:o("Source","voxel-fse")},React.createElement(C,{label:o("Choose source","voxel-fse"),value:e.source,options:h,onChange:t=>n({source:t}),__nextHasNoMarginBottom:!0}),e.source==="select_wp_menu"&&React.createElement(React.Fragment,null,React.createElement(C,{label:o("Desktop menu","voxel-fse"),help:o("Choose the navigation menu to display","voxel-fse"),value:e.menuLocation,options:l.filter(t=>t.value!==""),onChange:t=>n({menuLocation:t}),__nextHasNoMarginBottom:!0}),React.createElement(C,{label:o("Mobile menu","voxel-fse"),help:o("Choose the menu which is displayed when hamburger icon is clicked","voxel-fse"),value:e.mobileMenuLocation,options:l.filter(t=>t.value!==""),onChange:t=>n({mobileMenuLocation:t}),__nextHasNoMarginBottom:!0})),e.source==="template_tabs"&&React.createElement(React.Fragment,null,React.createElement("p",{className:"components-base-control__help",style:{marginBottom:"12px"}},o("Navbar will be automatically populated with links to each tab added in the Template Tabs widget.","voxel-fse")),React.createElement(W,{label:o("Link to a Template Tabs widget","voxel-fse"),items:p.map(t=>({id:t.clientId,clientId:t.clientId,label:void 0})),selectedId:e.templateTabsId,onSelect:t=>n({templateTabsId:t||""}),widgetType:"TemplateTabs"})),e.source==="search_form"&&React.createElement(React.Fragment,null,React.createElement("p",{className:"components-base-control__help",style:{marginBottom:"12px"}},o("Navbar will be automatically populated with links to each post type used in the Search Form widget.","voxel-fse")),React.createElement(W,{label:o("Link to a Search Form widget","voxel-fse"),items:i.map(t=>({id:t.clientId,clientId:t.clientId,label:void 0})),selectedId:e.searchFormId,onSelect:t=>n({searchFormId:t||""}),widgetType:"SearchForm"}))),React.createElement(B,{id:"settings",title:o("Settings","voxel-fse")},React.createElement(C,{label:o("Orientation","voxel-fse"),value:e.orientation,options:f,onChange:t=>n({orientation:t}),__nextHasNoMarginBottom:!0}),e.orientation==="vertical"&&React.createElement(React.Fragment,null,React.createElement(E,{label:o("Collapsible?","voxel-fse"),checked:e.collapsible,onChange:t=>n({collapsible:t}),__nextHasNoMarginBottom:!0}),e.collapsible&&React.createElement(React.Fragment,null,React.createElement(F,{label:o("Collapsed width","voxel-fse"),value:e.collapsedWidth,onChange:t=>n({collapsedWidth:t??60}),min:0,max:500}),React.createElement(F,{label:o("Expanded width","voxel-fse"),value:e.expandedWidth,onChange:t=>n({expandedWidth:t??200}),min:0,max:500}))),e.orientation==="horizontal"&&React.createElement(C,{label:o("Justify","voxel-fse"),value:e.justify,options:g,onChange:t=>n({justify:t}),__nextHasNoMarginBottom:!0}),e.source==="select_wp_menu"&&React.createElement(React.Fragment,null,React.createElement($,{label:o("Hamburger menu","voxel-fse")}),React.createElement(L,{label:o("Menu title","voxel-fse"),value:e.hamburgerTitle,onChange:t=>n({hamburgerTitle:t}),placeholder:o("Menu","voxel-fse")}),React.createElement(E,{label:o("Show on desktop","voxel-fse"),checked:e.showBurgerDesktop,onChange:t=>n({showBurgerDesktop:t}),__nextHasNoMarginBottom:!0}),React.createElement(E,{label:o("Show on tablet and mobile","voxel-fse"),checked:e.showBurgerTablet,onChange:t=>n({showBurgerTablet:t}),__nextHasNoMarginBottom:!0}),React.createElement(E,{label:o("Show label?","voxel-fse"),checked:e.showMenuLabel,onChange:t=>n({showMenuLabel:t}),__nextHasNoMarginBottom:!0}))),React.createElement(B,{id:"icons",title:o("Icons","voxel-fse"),key:c},e.source==="select_wp_menu"&&React.createElement(H,{label:o("Hamburger","voxel-fse"),value:e.hamburgerIcon,onChange:t=>n({hamburgerIcon:t||{library:"",value:""}})}),React.createElement(H,{label:o("Close icon","voxel-fse"),value:e.closeIcon,onChange:t=>n({closeIcon:t||{library:"",value:""}})})),e.source==="add_links_manually"&&React.createElement(B,{id:"manual_items",title:o("Content","voxel-fse")},React.createElement(ce,{items:e.manualItems,onChange:t=>n({manualItems:t}),createItem:()=>({id:ie(),text:o("Navbar item","voxel-fse"),icon:null,url:"",isExternal:!1,nofollow:!1,isActive:!0,visibilityRules:[],rowVisibility:"show"}),getItemLabel:(t,d)=>t.text||`Item #${d+1}`,renderContent:({item:t,onUpdate:d})=>React.createElement(React.Fragment,null,React.createElement(L,{label:o("Title","voxel-fse"),value:t.text,onChange:s=>d({text:s})}),React.createElement(H,{label:o("Icon","voxel-fse"),value:t.icon??{library:"",value:""},onChange:s=>d({icon:s})}),React.createElement(L,{label:o("Link","voxel-fse"),value:t.url,onChange:s=>d({url:s})}),React.createElement(E,{label:o("Open in new tab","voxel-fse"),checked:t.isExternal,onChange:s=>d({isExternal:s}),__nextHasNoMarginBottom:!0}),React.createElement(E,{label:o("Active?","voxel-fse"),checked:t.isActive,onChange:s=>d({isActive:s}),__nextHasNoMarginBottom:!0}),React.createElement(re,{rowVisibility:t.rowVisibility||"show",visibilityRules:t.visibilityRules||[],onRowVisibilityChange:s=>d({rowVisibility:s}),onEditVisibilityRules:()=>console.log("Edit visibility rules",t.id),onClearVisibilityRules:()=>d({visibilityRules:[]}),showLoopSection:!0,loopSource:t.loopSource,loopProperty:t.loopProperty,loopLimit:t.loopLimit,loopOffset:t.loopOffset,onEditLoop:()=>console.log("Edit loop",t.id),onClearLoop:()=>d({loopSource:void 0,loopProperty:void 0,loopLimit:void 0,loopOffset:void 0}),onLoopLimitChange:s=>d({loopLimit:s}),onLoopOffsetChange:s=>d({loopOffset:s})}))}))))}function ge({attributes:e,setAttributes:n}){return React.createElement(X,{defaultPanel:"general",attributes:e,setAttributes:n,stateAttribute:"styleTabOpenPanel"},React.createElement(B,{id:"general",title:o("Navbar: General","voxel-fse")},React.createElement(le,{attributeName:"styleTabState",attributes:e,setAttributes:n,tabs:[{name:"normal",title:o("Normal","voxel-fse")},{name:"hover",title:o("Hover","voxel-fse")},{name:"active",title:o("Current","voxel-fse")}]},l=>React.createElement(React.Fragment,null,React.createElement($,{label:o("Menu item","voxel-fse")}),l.name==="normal"&&React.createElement(oe,{label:o("Typography","voxel-fse"),attributes:e,setAttributes:n,typographyAttributeName:"typography"}),React.createElement(w,{label:o("Color","voxel-fse"),value:l.name==="hover"?e.linkColorHover:l.name==="active"?e.linkColorActive:e.linkColor,onChange:c=>{l.name==="hover"?n({linkColorHover:c}):l.name==="active"?n({linkColorActive:c}):n({linkColor:c})}}),React.createElement(w,{label:o("Background color","voxel-fse"),value:l.name==="hover"?e.linkBgHover:l.name==="active"?e.linkBgActive:e.linkBg,onChange:c=>{l.name==="hover"?n({linkBgHover:c}):l.name==="active"?n({linkBgActive:c}):n({linkBg:c})}}),l.name==="normal"&&React.createElement(React.Fragment,null,React.createElement(D,{label:o("Margin","voxel-fse"),attributes:e,setAttributes:n,attributeBaseName:"linkMargin"}),React.createElement(D,{label:o("Padding","voxel-fse"),attributes:e,setAttributes:n,attributeBaseName:"linkPadding"}),React.createElement(C,{label:o("Border Type","voxel-fse"),value:e.linkBorderStyle,options:[{value:"default",label:o("Default","voxel-fse")},{value:"none",label:o("None","voxel-fse")},{value:"solid",label:o("Solid","voxel-fse")},{value:"double",label:o("Double","voxel-fse")},{value:"dotted",label:o("Dotted","voxel-fse")},{value:"dashed",label:o("Dashed","voxel-fse")},{value:"groove",label:o("Groove","voxel-fse")}],onChange:c=>n({linkBorderStyle:c}),__nextHasNoMarginBottom:!0}),React.createElement(N,{label:o("Border radius","voxel-fse"),attributes:e,setAttributes:n,attributeBaseName:"linkBorderRadius",min:0,max:100,units:["px","%","em"]}),React.createElement(N,{label:o("Item content gap","voxel-fse"),attributes:e,setAttributes:n,attributeBaseName:"linkGap",min:0,max:100})),React.createElement($,{label:o("Menu item icon","voxel-fse")}),l.name==="normal"&&React.createElement(React.Fragment,null,React.createElement(C,{label:o("Show icon","voxel-fse"),help:o("Desktop only","voxel-fse"),value:e.showIcon,options:[{value:"flex",label:o("Yes","voxel-fse")},{value:"none",label:o("No","voxel-fse")}],onChange:c=>n({showIcon:c}),__nextHasNoMarginBottom:!0}),React.createElement(E,{label:o("Icon on top?","voxel-fse"),checked:e.iconOnTop,onChange:c=>n({iconOnTop:c}),__nextHasNoMarginBottom:!0}),React.createElement(N,{label:o("Container size","voxel-fse"),attributes:e,setAttributes:n,attributeBaseName:"iconContainerSize",min:0,max:200}),React.createElement(N,{label:o("Container border radius","voxel-fse"),attributes:e,setAttributes:n,attributeBaseName:"iconContainerRadius",min:0,max:100})),React.createElement(w,{label:o("Container background","voxel-fse"),value:l.name==="hover"?e.iconContainerBgHover:l.name==="active"?e.iconContainerBgActive:e.iconContainerBg,onChange:c=>{l.name==="hover"?n({iconContainerBgHover:c}):l.name==="active"?n({iconContainerBgActive:c}):n({iconContainerBg:c})}}),l.name==="normal"&&React.createElement(N,{label:o("Icon size","voxel-fse"),help:o("Must be equal or smaller than icon container","voxel-fse"),attributes:e,setAttributes:n,attributeBaseName:"iconSize",min:0,max:100}),React.createElement(w,{label:o("Icon color","voxel-fse"),value:l.name==="hover"?e.iconColorHover:l.name==="active"?e.iconColorActive:e.iconColor,onChange:c=>{l.name==="hover"?n({iconColorHover:c}):l.name==="active"?n({iconColorActive:c}):n({iconColor:c})}}),l.name==="normal"&&React.createElement(React.Fragment,null,React.createElement($,{label:o("Horizontal scroll","voxel-fse")}),React.createElement(w,{label:o("Scroll background color","voxel-fse"),value:e.scrollBg,onChange:c=>n({scrollBg:c})})),l.name==="normal"&&React.createElement(React.Fragment,null,React.createElement($,{label:o("Chevron","voxel-fse")}),React.createElement(w,{label:o("Chevron color","voxel-fse"),value:e.chevronColor,onChange:c=>n({chevronColor:c})}))))),React.createElement(B,{id:"custom_popup",title:o("Popups: Custom style","voxel-fse")},React.createElement(se,{attributes:e,setAttributes:n,attributeNames:{enable:"customPopupEnabled",backdrop:"popupBackdropBackground",pointerEvents:"popupBackdropPointerEvents",shadow:"popupBoxShadow",topMargin:"popupTopBottomMargin",minWidth:"popupMinWidth",maxWidth:"popupMaxWidth",maxHeight:"popupMaxHeight"}}),React.createElement("div",{className:"voxel-fse-control-row",style:{marginTop:"20px",marginBottom:"10px"}},React.createElement($,{label:o("Columns","voxel-fse")})),React.createElement(E,{label:o("Multi column popup menu?","voxel-fse"),checked:e.multiColumnMenu,onChange:l=>n({multiColumnMenu:l}),__nextHasNoMarginBottom:!0}),e.multiColumnMenu&&React.createElement(F,{label:o("Menu columns","voxel-fse"),help:o("We recommend increasing popup min width before if you plan to display the menu in multiple columns","voxel-fse"),value:e.menuColumns,onChange:l=>n({menuColumns:l??1}),min:1,max:6})))}function S(e,n){if(!e)return"";const{unit:l="px"}=e,c=parseFloat(String(e.top))||0,r=parseFloat(String(e.right))||0,a=parseFloat(String(e.bottom))||0,m=parseFloat(String(e.left))||0;return`${n}: ${c}${l} ${r}${l} ${a}${l} ${m}${l};`}function xe(e){if(!e)return"";let n="";return e.fontFamily&&(n+=`font-family: ${e.fontFamily}; `),e.fontSize&&(n+=`font-size: ${e.fontSize}${e.fontSizeUnit||"px"}; `),e.fontWeight&&(n+=`font-weight: ${e.fontWeight}; `),e.fontStyle&&(n+=`font-style: ${e.fontStyle}; `),e.textTransform&&(n+=`text-transform: ${e.textTransform}; `),e.textDecoration&&(n+=`text-decoration: ${e.textDecoration}; `),e.lineHeight&&(n+=`line-height: ${e.lineHeight}${e.lineHeightUnit||""}; `),e.letterSpacing&&(n+=`letter-spacing: ${e.letterSpacing}${e.letterSpacingUnit||"px"}; `),n}function Q(e,n){const l=[],c=[],r=[],a=`.voxel-fse-navbar-${n}`;if(e.orientation==="horizontal"){if(e.justify){const p={left:"flex-start",center:"center",right:"flex-end","space-between":"space-between","space-around":"space-around"}[e.justify]||"flex-start";l.push(`${a} .ts-nav { justify-content: ${p}; }`)}if(e.justify_tablet){const p={left:"flex-start",center:"center",right:"flex-end","space-between":"space-between","space-around":"space-around"}[e.justify_tablet]||"flex-start";c.push(`${a} .ts-nav { justify-content: ${p}; }`)}if(e.justify_mobile){const p={left:"flex-start",center:"center",right:"flex-end","space-between":"space-between","space-around":"space-around"}[e.justify_mobile]||"flex-start";r.push(`${a} .ts-nav { justify-content: ${p}; }`)}}if(e.orientation==="vertical"&&e.collapsible&&(e.collapsedWidth!==void 0&&l.push(`${a} .ts-nav-collapsed { width: ${e.collapsedWidth}px; }`),e.expandedWidth!==void 0&&l.push(`${a} .ts-nav-collapsed:hover { width: ${e.expandedWidth}px; }`,`${a} .ts-nav-collapsed.expanded { width: ${e.expandedWidth}px; }`)),e.typography){const i=xe(e.typography);i&&l.push(`${a} .ts-item-link { ${i} }`)}if(e.linkColor&&l.push(`${a} .ts-item-link { color: ${e.linkColor}; }`),e.linkBg&&l.push(`${a} .ts-item-link { background-color: ${e.linkBg}; }`),e.linkMargin){const i=S(e.linkMargin,"margin");i&&l.push(`${a} .ts-item-link { ${i} }`)}if(e.linkMargin_tablet){const i=S(e.linkMargin_tablet,"margin");i&&c.push(`${a} .ts-item-link { ${i} }`)}if(e.linkMargin_mobile){const i=S(e.linkMargin_mobile,"margin");i&&r.push(`${a} .ts-item-link { ${i} }`)}if(e.linkPadding){const i=S(e.linkPadding,"padding");i&&l.push(`${a} .ts-item-link { ${i} }`)}if(e.linkPadding_tablet){const i=S(e.linkPadding_tablet,"padding");i&&c.push(`${a} .ts-item-link { ${i} }`)}if(e.linkPadding_mobile){const i=S(e.linkPadding_mobile,"padding");i&&r.push(`${a} .ts-item-link { ${i} }`)}e.linkBorderStyle&&e.linkBorderStyle!=="default"&&(e.linkBorderStyle==="none"?l.push(`${a} .ts-item-link { border: none; }`):l.push(`${a} .ts-item-link { border-style: ${e.linkBorderStyle}; }`)),e.linkBorderRadius!==void 0&&l.push(`${a} .ts-item-link { border-radius: ${e.linkBorderRadius}px; }`),e.linkBorderRadius_tablet!==void 0&&c.push(`${a} .ts-item-link { border-radius: ${e.linkBorderRadius_tablet}px; }`),e.linkBorderRadius_mobile!==void 0&&r.push(`${a} .ts-item-link { border-radius: ${e.linkBorderRadius_mobile}px; }`),e.linkGap!==void 0&&l.push(`${a} .ts-item-link { gap: ${e.linkGap}px; }`),e.linkGap_tablet!==void 0&&c.push(`${a} .ts-item-link { gap: ${e.linkGap_tablet}px; }`),e.linkGap_mobile!==void 0&&r.push(`${a} .ts-item-link { gap: ${e.linkGap_mobile}px; }`),e.linkColorHover&&l.push(`${a} .ts-item-link:hover { color: ${e.linkColorHover}; }`),e.linkBgHover&&l.push(`${a} .ts-item-link:hover { background-color: ${e.linkBgHover}; }`),e.linkColorActive&&l.push(`${a} .current-menu-item .ts-item-link { color: ${e.linkColorActive}; }`),e.linkBgActive&&l.push(`${a} .current-menu-item .ts-item-link { background-color: ${e.linkBgActive}; }`),e.iconContainerSize!==void 0&&l.push(`${a} .ts-item-icon { width: ${e.iconContainerSize}px; height: ${e.iconContainerSize}px; }`),e.iconContainerSize_tablet!==void 0&&c.push(`${a} .ts-item-icon { width: ${e.iconContainerSize_tablet}px; height: ${e.iconContainerSize_tablet}px; }`),e.iconContainerSize_mobile!==void 0&&r.push(`${a} .ts-item-icon { width: ${e.iconContainerSize_mobile}px; height: ${e.iconContainerSize_mobile}px; }`),e.iconContainerRadius!==void 0&&l.push(`${a} .ts-item-icon { border-radius: ${e.iconContainerRadius}%; }`),e.iconContainerRadius_tablet!==void 0&&c.push(`${a} .ts-item-icon { border-radius: ${e.iconContainerRadius_tablet}%; }`),e.iconContainerRadius_mobile!==void 0&&r.push(`${a} .ts-item-icon { border-radius: ${e.iconContainerRadius_mobile}%; }`),e.iconContainerBg&&l.push(`${a} .ts-item-icon { background-color: ${e.iconContainerBg}; }`),e.iconContainerBgHover&&l.push(`${a} .ts-item-link:hover .ts-item-icon { background-color: ${e.iconContainerBgHover}; }`),e.iconContainerBgActive&&l.push(`${a} .current-menu-item .ts-item-icon { background-color: ${e.iconContainerBgActive}; }`),e.iconSize!==void 0&&(l.push(`${a} .ts-item-icon i { font-size: ${e.iconSize}px; }`),l.push(`${a} .ts-item-icon svg { width: ${e.iconSize}px; height: ${e.iconSize}px; }`)),e.iconSize_tablet!==void 0&&(c.push(`${a} .ts-item-icon i { font-size: ${e.iconSize_tablet}px; }`),c.push(`${a} .ts-item-icon svg { width: ${e.iconSize_tablet}px; height: ${e.iconSize_tablet}px; }`)),e.iconSize_mobile!==void 0&&(r.push(`${a} .ts-item-icon i { font-size: ${e.iconSize_mobile}px; }`),r.push(`${a} .ts-item-icon svg { width: ${e.iconSize_mobile}px; height: ${e.iconSize_mobile}px; }`)),e.iconColor&&(l.push(`${a} .ts-item-icon i { color: ${e.iconColor}; }`),l.push(`${a} .ts-item-icon svg { fill: ${e.iconColor}; }`)),e.iconColorHover&&(l.push(`${a} .ts-item-link:hover .ts-item-icon i { color: ${e.iconColorHover}; }`),l.push(`${a} .ts-item-link:hover .ts-item-icon svg { fill: ${e.iconColorHover}; }`)),e.iconColorActive&&(l.push(`${a} .current-menu-item .ts-item-icon i { color: ${e.iconColorActive}; }`),l.push(`${a} .current-menu-item .ts-item-icon svg { fill: ${e.iconColorActive}; }`)),e.scrollBg&&l.push(`${a} .min-scroll { background-color: ${e.scrollBg}; }`),e.chevronColor&&(l.push(`${a} .ts-down-icon { border-top-color: ${e.chevronColor}; }`),l.push(`${a} .ts-right-icon { border-left-color: ${e.chevronColor}; }`));let m="";return l.length>0&&(m+=l.join(`
`)),c.length>0&&(m+=`
@media (max-width: 1024px) {
${c.join(`
`)}
}`),r.length>0&&(m+=`
@media (max-width: 767px) {
${r.join(`
`)}
}`),m}async function ye(){try{return(await q({path:"/voxel-fse/v1/navbar/locations"})).locations||[]}catch(e){return console.error("Failed to fetch menu locations:",e),[]}}async function V(e){if(!e)return null;try{return await q({path:`/voxel-fse/v1/navbar/menu?location=${encodeURIComponent(e)}`})}catch(n){return console.error("Failed to fetch menu items:",n),null}}function Re({attributes:e,setAttributes:n,clientId:l}){const c=e.blockId||l,[r,a]=R([]),[m,i]=R(null),[p,g]=R(null),[h,f]=R(!1),[t,d]=R(null);k(()=>{e.blockId||n({blockId:l})},[e.blockId,l,n]);const s=Y(e,{blockId:c,baseClass:"voxel-fse-navbar",selectorPrefix:"voxel-fse-navbar"}),v=z(()=>Q(e,c),[e,c]),y=z(()=>[s.responsiveCSS,v].filter(Boolean).join(`
`),[s.responsiveCSS,v]),I=J({id:s.elementId,className:s.className,style:s.styles,...s.customAttrs});k(()=>{let u=!1;async function b(){const x=await ye();u||a(x)}return b(),()=>{u=!0}},[]),k(()=>{let u=!1;async function b(){if(e.source!=="select_wp_menu"||!e.menuLocation){i(null);return}f(!0),d(null);try{const x=await V(e.menuLocation);u||i(x)}catch(x){u||d(x instanceof Error?x.message:"Failed to load menu")}finally{u||f(!1)}}return b(),()=>{u=!0}},[e.source,e.menuLocation]),k(()=>{let u=!1;async function b(){if(e.source!=="select_wp_menu"||!e.mobileMenuLocation){g(null);return}try{const x=await V(e.mobileMenuLocation);u||g(x)}catch(x){console.warn("Failed to load mobile menu:",x)}}return b(),()=>{u=!0}},[e.source,e.mobileMenuLocation]);const _=[{value:"",label:o("Select a menu","voxel-fse")},...r.map(u=>({value:u.slug,label:u.name}))];return React.createElement("div",{...I},y&&React.createElement("style",{dangerouslySetInnerHTML:{__html:y}}),React.createElement(U,null,React.createElement(ae,{tabs:[{id:"content",label:o("Content","voxel-fse"),icon:"",render:()=>React.createElement(ve,{attributes:e,setAttributes:n,menuLocationOptions:_})},{id:"style",label:o("Style","voxel-fse"),icon:"",render:()=>React.createElement(ge,{attributes:e,setAttributes:n})}],includeAdvancedTab:!0,includeVoxelTab:!0,attributes:e,setAttributes:n})),React.createElement(ue,{attributes:e,menuData:m,mobileMenuData:p,isLoading:h,error:t,context:"editor"}))}function Ee({attributes:e}){const n=e.blockId||"navbar",l=Y(e,{blockId:n,baseClass:"voxel-fse-navbar ts-nav-menu"}),c=Q(e,n),r=[l.responsiveCSS,c].filter(Boolean).join(`
`),a=J.save({id:l.elementId,className:l.className,style:l.styles,"data-source":e.source,"data-visibility-behavior":e.visibilityBehavior||void 0,"data-visibility-rules":e.visibilityRules?.length?JSON.stringify(e.visibilityRules):void 0,"data-loop-source":e.loopSource||void 0,"data-loop-limit":e.loopLimit||void 0,"data-loop-offset":e.loopOffset||void 0,...l.customAttrs}),m={source:e.source,menuLocation:e.menuLocation,mobileMenuLocation:e.mobileMenuLocation,orientation:e.orientation,justify:e.justify,collapsible:e.collapsible,collapsedWidth:e.collapsedWidth,expandedWidth:e.expandedWidth,hamburgerTitle:e.hamburgerTitle,showBurgerDesktop:e.showBurgerDesktop,showBurgerTablet:e.showBurgerTablet,showMenuLabel:e.showMenuLabel,hamburgerIcon:e.hamburgerIcon,closeIcon:e.closeIcon,manualItems:e.manualItems,showIcon:e.showIcon,iconOnTop:e.iconOnTop,customPopupEnabled:e.customPopupEnabled,multiColumnMenu:e.multiColumnMenu,menuColumns:e.menuColumns};return React.createElement("div",{...a},r&&React.createElement("style",{dangerouslySetInnerHTML:{__html:r}}),ee(e,!1,void 0,void 0,l.uniqueSelector),React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(m)}}),React.createElement("div",{className:"voxel-fse-block-placeholder",style:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#e0e0e0",padding:"16px",minHeight:"48px"}},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor",style:{opacity:.4}},React.createElement("rect",{x:"4",y:"4",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"10",y:"4",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"16",y:"4",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"4",y:"10",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"10",y:"10",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"16",y:"10",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"4",y:"16",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"10",y:"16",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"16",y:"16",width:"4",height:"4",rx:"0.5"}))))}const Ce="https://schemas.wp.org/trunk/block.json",ke=3,_e="voxel-fse/navbar",we="1.0.0",Se="Navbar (VX)",$e="voxel-fse",Be="Navigation bar with multiple source options. FSE equivalent of Voxel's Navbar widget.",be=["navbar","menu","navigation","voxel","userbar"],Ne="voxel-fse",Me={html:!1,align:["wide","full"],anchor:!0,className:!0,customClassName:!0},Ie="file:./index.js",Te="file:./frontend.js",Le="file:./render.php",He={blockId:{type:"string",default:""},source:{type:"string",default:"add_links_manually",enum:["add_links_manually","select_wp_menu","template_tabs","search_form"]},menuLocation:{type:"string",default:""},mobileMenuLocation:{type:"string",default:""},orientation:{type:"string",default:"horizontal",enum:["horizontal","vertical"]},justify:{type:"string",default:"left",enum:["left","center","right","space-between","space-around"]},justify_tablet:{type:"string",default:""},justify_mobile:{type:"string",default:""},contentTabOpenPanel:{type:"string",default:"source"},templateTabsId:{type:"string",default:""},searchFormId:{type:"string",default:""},collapsible:{type:"boolean",default:!1},collapsedWidth:{type:"number",default:60},expandedWidth:{type:"number",default:200},hamburgerTitle:{type:"string",default:"Menu"},showBurgerDesktop:{type:"boolean",default:!1},showBurgerTablet:{type:"boolean",default:!0},showMenuLabel:{type:"boolean",default:!1},hamburgerIcon:{type:"object",default:{library:"",value:""}},closeIcon:{type:"object",default:{library:"",value:""}},manualItems:{type:"array",default:[],items:{type:"object"}},showIcon:{type:"string",default:"flex",enum:["flex","none"]},iconOnTop:{type:"boolean",default:!1},customPopupEnabled:{type:"boolean",default:!1},multiColumnMenu:{type:"boolean",default:!1},menuColumns:{type:"number",default:1},styleTabOpenPanel:{type:"string",default:"general"},styleTabState:{type:"string",default:"normal"},typography:{type:"object",default:{}},linkColor:{type:"string",default:""},linkColorHover:{type:"string",default:""},linkColorActive:{type:"string",default:""},linkBg:{type:"string",default:""},linkBgHover:{type:"string",default:""},linkBgActive:{type:"string",default:""},linkMargin:{type:"object",default:{}},linkMargin_tablet:{type:"object",default:{}},linkMargin_mobile:{type:"object",default:{}},linkPadding:{type:"object",default:{}},linkPadding_tablet:{type:"object",default:{}},linkPadding_mobile:{type:"object",default:{}},linkBorderStyle:{type:"string",default:"default"},linkBorderRadius:{type:"number",default:0},linkBorderRadius_tablet:{type:"number",default:0},linkBorderRadius_mobile:{type:"number",default:0},linkGap:{type:"number",default:10},linkGap_tablet:{type:"number",default:10},linkGap_mobile:{type:"number",default:10},iconContainerSize:{type:"number",default:40},iconContainerSize_tablet:{type:"number",default:40},iconContainerSize_mobile:{type:"number",default:40},iconContainerRadius:{type:"number",default:50},iconContainerRadius_tablet:{type:"number",default:50},iconContainerRadius_mobile:{type:"number",default:50},iconContainerBg:{type:"string",default:""},iconContainerBgHover:{type:"string",default:""},iconContainerBgActive:{type:"string",default:""},iconSize:{type:"number",default:20},iconSize_tablet:{type:"number",default:20},iconSize_mobile:{type:"number",default:20},iconColor:{type:"string",default:""},iconColorHover:{type:"string",default:""},iconColorActive:{type:"string",default:""},scrollBg:{type:"string",default:""},chevronColor:{type:"string",default:""},popupBackdropBackground:{type:"string",default:""},popupBackdropPointerEvents:{type:"boolean",default:!1},popupBoxShadow:{type:"object",default:{}},popupTopBottomMargin:{type:"number",default:10},popupMinWidth:{type:"number",default:200},popupMaxWidth:{type:"number",default:400},popupMaxHeight:{type:"number",default:500},_comment_voxel_tab:"VoxelTab attributes for visibility and loop features",visibilityBehavior:{type:"string",default:"show",enum:["show","hide"]},visibilityRules:{type:"array",default:[],items:{type:"object"}},loopEnabled:{type:"boolean",default:!1},loopSource:{type:"string",default:""},loopProperty:{type:"string",default:""},loopLimit:{type:"string",default:""},loopOffset:{type:"string",default:""}},G={$schema:Ce,apiVersion:ke,name:_e,version:we,title:Se,category:$e,description:Be,keywords:be,textdomain:Ne,supports:Me,editorScript:Ie,viewScript:Te,render:Le,attributes:He},je=()=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor"},React.createElement("rect",{x:"4",y:"4",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"10",y:"4",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"16",y:"4",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"4",y:"10",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"10",y:"10",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"16",y:"10",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"4",y:"16",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"10",y:"16",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"16",y:"16",width:"4",height:"4",rx:"0.5"}));Z(G.name,{...G,icon:je,edit:Re,save:Ee});
