import{registerBlockType as Ce}from"@wordpress/blocks";import{InspectorControls as Re,useBlockProps as ae}from"@wordpress/block-editor";import{__ as n}from"@wordpress/i18n";import{useState as $,useRef as U,useEffect as F,useCallback as w,useMemo as te}from"react";import{a as Se}from"../siteUrl-7x5eJEvc.js";import"../voxelShim-DB_Ue-9R.js";import{g as pe}from"../useAdvancedTabProps-BnJDQbKr.js";import{r as Ee}from"../backgroundElements-BCKss4qj.js";import{b as le,S as I,D as Be,R as S,C as M,T as X,A as de,a as q,g as re,e as ee,E as $e,c as Z}from"../TypographyPopup-CkDwan7Z.js";import{R as ke,I as Te}from"../InspectorTabs-C-Yyx0JZ.js";import{Spinner as we,SelectControl as ne,ToggleControl as Ie,RangeControl as ce}from"@wordpress/components";import"@wordpress/data";import"@wordpress/api-fetch";/* empty css                            */import{R as h}from"../RepeaterControl-DaYyJwAm.js";import{I as G}from"../IconPickerControl-BEkvF1LS.js";import{g as _e,R as He,L as Me}from"../RepeaterControl-DrHec-XT.js";import{P as Ne}from"../PostSelectControl-n5yDhdqk.js";import{R as ie}from"../ResponsiveDimensionsControl-7cL5KQxY.js";import{P as Pe}from"../PopupCustomStyleControl-FwQwyDJ5.js";import{V as Le}from"../VoxelGridIcon-D5dF5acW.js";import"../generateAdvancedStyles-CRpLcHXt.js";import"../generateVoxelStyles-oZeaeuKH.js";import"react-dom";function Fe({attributes:e,setAttributes:t,attributeNames:o={}}){const r={stateTab:o.stateTab||"customPopupMenuState",itemPadding:o.itemPadding||"menuItemPadding",itemHeight:o.itemHeight||"menuItemHeight",itemBorderRadius:o.itemBorderRadius||"menuItemBorderRadius",titleColor:o.titleColor||"menuTitleColor",titleTypography:o.titleTypography||"menuTitleTypography",logoWidth:o.logoWidth||"menuLogoWidth",logoRadius:o.logoRadius||"menuLogoRadius",iconColor:o.iconColor||"menuIconColor",iconSize:o.iconSize||"menuIconSize",iconContainerSize:o.iconContainerSize||"menuIconContainerSize",iconContainerSpacing:o.iconContainerSpacing||"menuIconContainerSpacing",chevronColor:o.chevronColor||"menuChevronColor",itemBackgroundHover:o.itemBackgroundHover||"menuItemBackgroundHover",titleColorHover:o.titleColorHover||"menuTitleColorHover",iconColorHover:o.iconColorHover||"menuIconColorHover"};return React.createElement(le,{attributeName:r.stateTab,attributes:e,setAttributes:t,tabs:[{name:"normal",title:n("Normal","voxel-fse")},{name:"hover",title:n("Hover","voxel-fse")}]},p=>p.name==="normal"?React.createElement(React.Fragment,null,React.createElement(I,{label:n("Item","voxel-fse")}),React.createElement(Be,{label:n("Item padding","voxel-fse"),values:e[r.itemPadding]||{},onChange:l=>t({[r.itemPadding]:l})}),React.createElement(S,{label:n("Height","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:r.itemHeight,min:0,max:100}),React.createElement(S,{label:n("Border radius","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:r.itemBorderRadius,min:0,max:100}),React.createElement(I,{label:n("Title","voxel-fse")}),React.createElement(M,{label:n("Title color","voxel-fse"),value:e[r.titleColor],onChange:l=>t({[r.titleColor]:l})}),React.createElement(X,{label:n("Title typography","voxel-fse"),attributes:e,setAttributes:t,typographyAttributeName:r.titleTypography}),React.createElement(I,{label:n("Logo/Image","voxel-fse")}),React.createElement(S,{label:n("Width","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:r.logoWidth,min:0,max:40}),React.createElement(S,{label:n("Radius","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:r.logoRadius,min:0,max:100}),React.createElement(I,{label:n("Icon","voxel-fse")}),React.createElement(M,{label:n("Icon color","voxel-fse"),value:e[r.iconColor],onChange:l=>t({[r.iconColor]:l})}),React.createElement(S,{label:n("Icon size","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:r.iconSize,min:0,max:40}),React.createElement(I,{label:n("Icon container","voxel-fse")}),React.createElement(S,{label:n("Size","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:r.iconContainerSize,min:0,max:40}),React.createElement(S,{label:n("Spacing","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:r.iconContainerSpacing,min:0,max:50}),React.createElement(I,{label:n("Chevron","voxel-fse")}),React.createElement(M,{label:n("Chevron color","voxel-fse"),value:e[r.chevronColor],onChange:l=>t({[r.chevronColor]:l})})):p.name==="hover"?React.createElement(React.Fragment,null,React.createElement(I,{label:n("Term item","voxel-fse")}),React.createElement(M,{label:n("List item background","voxel-fse"),value:e[r.itemBackgroundHover],onChange:l=>t({[r.itemBackgroundHover]:l})}),React.createElement(M,{label:n("Title color","voxel-fse"),value:e[r.titleColorHover],onChange:l=>t({[r.titleColorHover]:l})}),React.createElement(M,{label:n("Icon color","voxel-fse"),value:e[r.iconColorHover],onChange:l=>t({[r.iconColorHover]:l})})):null)}function qe(e,t){let o=null;return(...r)=>{o&&clearTimeout(o),o=setTimeout(()=>e(...r),t)}}function ze(){return typeof navigator<"u"&&(navigator.platform||"").includes("Mac")?"macOS":"other"}const W=()=>React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.25 2.75C6.14154 2.75 2 6.89029 2 11.998C2 17.1056 6.14154 21.2459 11.25 21.2459C13.5335 21.2459 15.6238 20.4187 17.2373 19.0475L20.7182 22.5287C21.011 22.8216 21.4859 22.8217 21.7788 22.5288C22.0717 22.2359 22.0718 21.761 21.7789 21.4681L18.2983 17.9872C19.6714 16.3736 20.5 14.2826 20.5 11.998C20.5 6.89029 16.3585 2.75 11.25 2.75ZM3.5 11.998C3.5 7.71905 6.96962 4.25 11.25 4.25C15.5304 4.25 19 7.71905 19 11.998C19 16.2769 15.5304 19.7459 11.25 19.7459C6.96962 19.7459 3.5 16.2769 3.5 11.998Z",fill:"currentColor"})),je=()=>React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M5.9545 5.95548C6.39384 5.51614 7.10616 5.51614 7.5455 5.95548L11.999 10.409L16.4524 5.95561C16.8918 5.51627 17.6041 5.51627 18.0434 5.95561C18.4827 6.39495 18.4827 7.10726 18.0434 7.5466L13.59 12L18.0434 16.4534C18.4827 16.8927 18.4827 17.605 18.0434 18.0444C17.6041 18.4837 16.8918 18.4837 16.4524 18.0444L11.999 13.591L7.5455 18.0445C7.10616 18.4839 6.39384 18.4839 5.9545 18.0445C5.51517 17.6052 5.51516 16.8929 5.9545 16.4535L10.408 12L5.9545 7.54647C5.51516 7.10713 5.51517 6.39482 5.9545 5.95548Z",fill:"currentColor"})),se=()=>React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M10.7477 2.46516C10.6701 2.52471 10.5961 2.58957 10.5262 2.65951L5.15851 8.03055C5.08902 8.10008 5.02455 8.1737 4.96533 8.25084H10.0004C10.4148 8.25084 10.7507 7.91473 10.7504 7.5003L10.7477 2.46516Z",fill:"currentColor"}),React.createElement("path",{d:"M4.5 9.75084V19.75C4.5 20.9926 5.50736 22 6.75 22H17.25C18.4926 22 19.5 20.9926 19.5 19.75V4.25C19.5 3.00736 18.4926 2 17.25 2H12.2474L12.2504 7.49924C12.2512 8.74244 11.2436 9.75084 10.0004 9.75084H4.5ZM9 13.75H15C15.4142 13.75 15.75 14.0858 15.75 14.5C15.75 14.9142 15.4142 15.25 15 15.25H9C8.58579 15.25 8.25 14.9142 8.25 14.5C8.25 14.0858 8.58579 13.75 9 13.75ZM9 16.75H12C12.4142 16.75 12.75 17.0858 12.75 17.5C12.75 17.9142 12.4142 18.25 12 18.25H9C8.58579 18.25 8.25 17.9142 8.25 17.5C8.25 17.0858 8.58579 16.75 9 16.75Z",fill:"currentColor"})),We=()=>React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M2 12.3906C2 6.86778 6.47715 2.39062 12 2.39062C17.5228 2.39062 22 6.86778 22 12.3906C22 17.9135 17.5228 22.3906 12 22.3906C6.47715 22.3906 2 17.9135 2 12.3906ZM8.78362 10.2354L10.9388 12.3906L8.78362 14.5458C8.49073 14.8387 8.49073 15.3136 8.78362 15.6065C9.07652 15.8994 9.55139 15.8994 9.84428 15.6065L11.9995 13.4513L14.1546 15.6064C14.4475 15.8993 14.9224 15.8993 15.2153 15.6064C15.5082 15.3135 15.5082 14.8387 15.2153 14.5458L13.0602 12.3906L15.2153 10.2355C15.5082 9.94258 15.5082 9.46771 15.2153 9.17482C14.9224 8.88192 14.4475 8.88192 14.1546 9.17482L11.9995 11.33L9.84428 9.17475C9.55139 8.88186 9.07652 8.88186 8.78362 9.17475C8.49073 9.46764 8.49073 9.94251 8.78362 10.2354Z",fill:"currentColor"}));function T(e,t){return!e||!e.value||e.library===""?React.createElement(t,null):e.library==="svg"?React.createElement("img",{src:e.value,alt:""}):e.library==="icon"?React.createElement("i",{className:e.value}):React.createElement(t,null)}function Ve({attributes:e,postTypes:t,context:o,vxConfig:r}){const[p,l]=$(!1),[s,c]=$(""),[u,g]=$(t[0]||null),[C,x]=$([]),[_,N]=$(!1),[E,z]=$([]),V=U(null),A=U(null),J=U(null),j=U(""),a=r||{postTypes:{},displayMode:e.displayMode||"single",keywords:{minlength:2},singleMode:{submitTo:e.singleSubmitTo||null,filterKey:e.singleSubmitKey||"keywords"},icons:{search:e.searchIcon,close:e.closeIcon,result:e.resultIcon,clearSearches:e.clearSearchesIcon},buttonLabel:e.buttonLabel||"Quick search",hideCptTabs:e.hideCptTabs||!1};F(()=>{if(o==="frontend")try{const f=localStorage.getItem("voxel:recent_searches");if(f){const d=JSON.parse(f);Array.isArray(d)&&z(d)}}catch{}},[o]),F(()=>{t.length>0&&!u&&g(t[0])},[t,u]),F(()=>{if(o!=="frontend")return;const f=d=>{(d.ctrlKey||d.metaKey)&&d.keyCode===75&&(d.preventDefault(),l(b=>!b)),d.keyCode===27&&l(!1)};return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[o]),F(()=>{p&&V.current&&setTimeout(()=>V.current?.focus(),100)},[p]),F(()=>{if(!p||o!=="frontend")return;const f=d=>{J.current&&!J.current.contains(d.target)&&l(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[p,o]);const v=w(async()=>{const f=s.trim();if(f.length<a.keywords.minlength){x([]),j.current="";return}if(f!==j.current){if(o==="editor"){j.current=f,x([{type:"post",key:"post:1",link:"#",title:`Search result for "${s}"`,logo:null,icon:null}]);return}j.current=f,N(!0);try{const d={};if(a.displayMode==="tabbed"&&u){const k=e.postTypeSettings?.[u.key]||{};d[u.key]={filter_key:k.filter||"keywords",taxonomies:k.taxonomies||[]}}else t.forEach(k=>{const K=e.postTypeSettings?.[k.key]||{};d[k.key]={filter_key:K.filter||"keywords",taxonomies:K.taxonomies||[]}});const D=`${window.Voxel_Config?.site_url||window.location.origin}/?vx=1`,O=await(await fetch(`${D}&action=quick_search&search=${encodeURIComponent(s.trim())}&post_types=${encodeURIComponent(JSON.stringify(d))}`)).json();if(O.success)x(O.data||[]);else{const k=window.Voxel,K=window.Voxel_Config,be=O.message||K?.l10n?.ajaxError||"An error occurred";k?.alert&&k.alert(be,"error"),x([])}}catch{const d=window.Voxel,R=window.Voxel_Config?.l10n?.ajaxError||"An error occurred";d?.alert&&d.alert(R,"error"),x([])}finally{N(!1)}}},[s,a,u,t,e.postTypeSettings,o]),y=te(()=>qe(()=>v(),250),[v]);F(()=>{y()},[s,y]);const P=w(f=>{if(o!=="frontend")return;const d=E.filter(R=>R.key!==f.key);d.unshift(f);const b=d.slice(0,8);z(b),localStorage.setItem("voxel:recent_searches",JSON.stringify(b))},[o,E]),m=w(()=>{if(o!=="frontend"||!s.trim())return;const f=`keywords:${s.trim()}`;let d="";if(a.displayMode==="tabbed"&&u){const R=new URL(u.archive||window.location.origin),D=e.postTypeSettings?.[u.key]||{};R.searchParams.set(D.filter||"keywords",s.trim()),d=R.toString()}else if(a.singleMode.submitTo){const R=new URL(a.singleMode.submitTo);R.searchParams.set(a.singleMode.filterKey,s.trim()),d=R.toString()}const b={type:"keywords",key:f,title:s.trim(),logo:null,icon:null,link:d};P(b)},[o,s,a,u,e.postTypeSettings,P]),B=w(()=>{if(o!=="frontend")return;let f;if(a.displayMode==="tabbed"&&u){f=new URL(u.archive||window.location.origin);const d=e.postTypeSettings?.[u.key]||{};f.searchParams.set(d.filter||"keywords",s.trim())}else if(a.singleMode.submitTo)f=new URL(a.singleMode.submitTo),f.searchParams.set(a.singleMode.filterKey,s.trim());else return;window.location.href=f.toString()},[o,a,u,e.postTypeSettings,s]),H=w(()=>{o==="frontend"&&(z([]),localStorage.setItem("voxel:recent_searches",JSON.stringify([])))},[o]),me=w(f=>{P(f)},[P]),ge=w(f=>{const d=E.filter(b=>b.key!==f.key);d.unshift(f),z(d),localStorage.setItem("voxel:recent_searches",JSON.stringify(d))},[E]),he=ze()==="macOS"?"⌘+K":"CTRL+K",ve=()=>{const f={postTypes:Object.fromEntries(t.map(d=>{const b=e.postTypeSettings?.[d.key]||{};return[d.key,{key:d.key,label:b.label||d.label,filter:b.filter||"keywords",taxonomies:b.taxonomies||[],archive:d.archive||"",results:{query:"",items:[]}}]})),displayMode:e.displayMode||"single",keywords:{minlength:2},singleMode:{submitTo:e.singleSubmitTo||null,filterKey:e.singleSubmitKey||"keywords"},icons:{search:e.searchIcon||{library:"",value:""},close:e.closeIcon||{library:"",value:""},result:e.resultIcon||{library:"",value:""},clearSearches:e.clearSearchesIcon||{library:"",value:""}},buttonLabel:e.buttonLabel||"Quick search",hideCptTabs:e.hideCptTabs||!1};return React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(f)}})},xe=()=>{const f=a.displayMode==="tabbed"&&!a.hideCptTabs&&t.length>1,d=s.trim().length<a.keywords.minlength&&E.length>0,b=s.trim().length<a.keywords.minlength&&E.length===0,R=s.trim().length>=a.keywords.minlength,D=R&&C.length===0&&!_;return React.createElement("form",{onSubmit:i=>{i.preventDefault(),m(),B()}},React.createElement("div",{className:"ts-sticky-top qs-top uib b-bottom"},React.createElement("a",{href:"#",className:"ts-icon-btn hide-d",role:"button",onClick:i=>{i.preventDefault(),l(!1)}},T(a.icons.close,je)),React.createElement("div",{className:"ts-input-icon flexify"},T(a.icons.search,W),React.createElement("input",{ref:V,type:"text",value:s,onChange:i=>c(i.target.value),onKeyDown:i=>{i.key==="Enter"&&(i.preventDefault(),m(),B())},placeholder:a.buttonLabel,className:"autofocus",maxLength:100}))),f&&React.createElement("div",{className:"ts-form-group cpt-tabs"},React.createElement("ul",{className:"ts-generic-tabs flexify simplify-ul quick-cpt-select"},t.map(i=>{const O=e.postTypeSettings?.[i.key]||{};return React.createElement("li",{key:i.key,className:u?.key===i.key?"ts-tab-active":""},React.createElement("a",{href:"#",onClick:k=>{k.preventDefault(),g(i),x([]),v()}},O.label||i.label))}))),React.createElement("div",{className:`ts-term-dropdown ts-md-group ts-multilevel-dropdown ${_?"vx-pending":""}`},b&&React.createElement("div",{className:"ts-empty-user-tab"},T(a.icons.search,W),React.createElement("p",null,n("No recent searches.","voxel-fse"))),d&&React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list quick-search-list"},E.map(i=>React.createElement("li",{key:i.key},React.createElement("a",{rel:"nofollow",href:i.link,onClick:()=>ge(i),className:"flexify"},i.logo&&React.createElement("div",{className:"ts-term-image"},React.createElement("span",{dangerouslySetInnerHTML:{__html:i.logo}})),!i.logo&&i.icon&&React.createElement("div",{className:"ts-term-icon"},React.createElement("span",{dangerouslySetInnerHTML:{__html:i.icon}})),!i.logo&&!i.icon&&React.createElement("div",{className:"ts-term-icon"},React.createElement("span",null,T(a.icons.result,se))),React.createElement("span",null,i.title)))),React.createElement("li",null,React.createElement("a",{href:"#",className:"flexify",onClick:i=>{i.preventDefault(),H()}},React.createElement("div",{className:"ts-term-icon"},React.createElement("span",null,T(a.icons.clearSearches,We))),React.createElement("span",null,n("Clear searches","voxel-fse"))))),D&&React.createElement("div",{className:"ts-empty-user-tab"},T(a.icons.search,W),React.createElement("p",null,n("No results found","voxel-fse"))),_&&R&&C.length===0&&React.createElement("div",{className:"ts-empty-user-tab"},T(a.icons.search,W),React.createElement("p",null,n("Searching","voxel-fse"))),R&&C.length>0&&React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list quick-search-list"},C.map(i=>React.createElement("li",{key:i.key},React.createElement("a",{rel:"nofollow",href:i.link,onClick:()=>me(i),className:"flexify"},i.logo&&React.createElement("div",{className:"ts-term-image"},React.createElement("span",{dangerouslySetInnerHTML:{__html:i.logo}})),!i.logo&&i.icon&&React.createElement("div",{className:"ts-term-icon"},React.createElement("span",{dangerouslySetInnerHTML:{__html:i.icon}})),!i.logo&&!i.icon&&React.createElement("div",{className:"ts-term-icon"},React.createElement("span",null,T(a.icons.result,se))),React.createElement("span",null,i.title)))),(a.displayMode==="tabbed"||a.singleMode.submitTo)&&React.createElement("li",{className:"view-all"},React.createElement("a",{href:"#",onClick:i=>{i.preventDefault(),m(),B()},className:"flexify"},React.createElement("div",{className:"ts-term-icon"},React.createElement("span",null,T(a.icons.search,W))),React.createElement("span",null,n("Search for","voxel-fse")," ",React.createElement("strong",null,s)))))))},ye=()=>p?React.createElement("div",{className:"ts-field-popup-container"},React.createElement("div",{ref:A,className:"ts-field-popup triggers-blur"},React.createElement("div",{className:"ts-popup-content-wrapper min-scroll"},xe()))):null;return React.createElement(React.Fragment,null,ve(),React.createElement("div",{style:{display:"none"},className:"ts-form-group quick-search-keyword"}),React.createElement("div",{ref:J,className:"ts-form-group quick-search-keyword"},React.createElement("button",{type:"button",className:"ts-filter ts-popup-target",onClick:()=>l(!0),"aria-label":a.buttonLabel},T(a.icons.search,W),React.createElement("div",{className:"ts-filter-text"},a.buttonLabel),!e.suffixHide&&React.createElement("span",{className:"ts-shortcut"},he)),ye()))}function De({attributes:e,setAttributes:t,availablePostTypes:o,isLoading:r}){const[p,l]=$(!1),[s,c]=$(null),[u,g]=$(null),C=o.map(a=>({label:a.label,value:a.key})),x=(a,v)=>{const y=e.postTypeSettings||{};t({postTypeSettings:{...y,[a]:{...y[a]||{},...v}}})},_=a=>o.find(y=>y.key===a)?[{label:n("Keywords","voxel-fse"),value:"keywords"}]:[{label:n("Keywords","voxel-fse"),value:"keywords"}],N=a=>{const v=o.find(y=>y.key===a);return!v||!v.taxonomies?[]:v.taxonomies.map(y=>({label:y,value:y}))},E=(a,v)=>{x(a,{filterItems:v})},z=w(()=>({id:_e(),label:"",filter:"keywords",taxonomies:[],rowVisibility:"show",visibilityRules:[]}),[]),V=w((a,v)=>{c(a),g(v),l(!0)},[]),A=w(a=>{if(!s||!u)return;const P=((e.postTypeSettings?.[s]||{}).filterItems||[]).map(m=>m.id===u?{...m,visibilityRules:a}:m);x(s,{filterItems:P}),l(!1),c(null),g(null)},[s,u,e.postTypeSettings]),j=!s||!u?null:((e.postTypeSettings?.[s]||{}).filterItems||[]).find(y=>y.id===u)||null;return React.createElement(React.Fragment,null,React.createElement(de,{attributes:e,setAttributes:t,stateAttribute:"contentTabOpenPanel",defaultPanel:"post_types"},React.createElement(q,{id:"post_types",title:n("Post types","voxel-fse")},r?React.createElement("div",{style:{padding:"20px",textAlign:"center"}},React.createElement(we,null)):React.createElement(React.Fragment,null,React.createElement(re,{label:n("Choose post types","voxel-fse"),value:e.postTypes||[],options:C,onChange:a=>t({postTypes:a}),placeholder:n("Select post types...","voxel-fse")}),React.createElement(ee,{label:n("Button label","voxel-fse"),value:e.buttonLabel||"",onChange:a=>t({buttonLabel:a}),placeholder:n("Quick search","voxel-fse")}),React.createElement(ne,{label:n("Display mode","voxel-fse"),value:e.displayMode||"single",options:[{label:n("Single: Display results in a single list","voxel-fse"),value:"single"},{label:n("Tabbed: Separate search results by CPT","voxel-fse"),value:"tabbed"}],onChange:a=>t({displayMode:a})}),e.displayMode==="tabbed"&&React.createElement(Ie,{label:n("Hide CPT tabs","voxel-fse"),help:n("Useful if you add a single post type","voxel-fse"),checked:e.hideCptTabs||!1,onChange:a=>t({hideCptTabs:a})}),e.displayMode==="single"&&React.createElement(React.Fragment,null,React.createElement("p",{className:"description",style:{marginTop:"20px",marginBottom:"10px"}},n("View all button submits the form to page","voxel-fse")),React.createElement(Ne,{label:n("Search templates","voxel-fse"),value:e.singleSubmitTo||"",onChange:a=>t({singleSubmitTo:a}),postTypes:["page"],placeholder:n("Search templates","voxel-fse"),emptyMessage:n("No pages found","voxel-fse"),enableDynamicTags:!0}),e.singleSubmitTo&&React.createElement(ee,{label:n("Submit search query to URL parameter","voxel-fse"),value:e.singleSubmitKey||"",onChange:a=>t({singleSubmitKey:a}),placeholder:n("keywords","voxel-fse")})))),(e.postTypes||[]).map(a=>{const v=o.find(m=>m.key===a),P=(e.postTypeSettings?.[a]||{}).filterItems||[];return React.createElement(q,{key:a,id:`post_type_settings_${a}`,title:`${v?.label||a} filter`},React.createElement(He,{label:n("Filters","voxel-fse"),items:P,onChange:m=>E(a,m),getItemLabel:(m,B)=>m.label||m.filter||`Item #${B+1}`,createItem:z,addButtonText:n("Add Filter","voxel-fse"),renderContent:({item:m,onUpdate:B})=>React.createElement("div",{className:"voxel-fse-quick-search-filter-item"},React.createElement(ee,{label:n("Label","voxel-fse"),value:m.label||"",onChange:H=>B({label:H}),placeholder:v?.label||a}),React.createElement(ne,{label:n("Keywords filter","voxel-fse"),value:m.filter||"keywords",options:_(a),onChange:H=>B({filter:H})}),React.createElement(re,{label:n("Also search taxonomy terms for","voxel-fse"),value:m.taxonomies||[],options:N(a),onChange:H=>B({taxonomies:H}),placeholder:n("Select taxonomies...","voxel-fse")}),React.createElement(Me,{showLoopSection:!1,rowVisibility:m.rowVisibility||"show",visibilityRules:m.visibilityRules||[],onRowVisibilityChange:H=>B({rowVisibility:H}),onEditVisibilityRules:()=>V(a,m.id),onClearVisibilityRules:()=>B({visibilityRules:[],rowVisibility:"show"})})),attributes:e,setAttributes:t,stateAttribute:`expandedFilter_${a}`}))}),React.createElement(q,{id:"icons",title:n("Icons","voxel-fse")},React.createElement(G,{label:n("Search icon","voxel-fse"),value:e.searchIcon,onChange:a=>t({searchIcon:a})}),React.createElement(G,{label:n("Close icon","voxel-fse"),value:e.closeIcon,onChange:a=>t({closeIcon:a})}),React.createElement(G,{label:n("Result icon","voxel-fse"),value:e.resultIcon,onChange:a=>t({resultIcon:a})}),React.createElement(G,{label:n("Clear searches icon","voxel-fse"),value:e.clearSearchesIcon,onChange:a=>t({clearSearchesIcon:a})}))),React.createElement($e,{isOpen:p,onClose:()=>{l(!1),c(null),g(null)},rules:j?.visibilityRules||[],onSave:A}))}function Oe({attributes:e,setAttributes:t}){return React.createElement(de,{attributes:e,setAttributes:t,stateAttribute:"styleTabOpenPanel",defaultPanel:"search_button"},React.createElement(q,{id:"search_button",title:n("Search button","voxel-fse")},React.createElement(le,{attributeName:"searchButtonState",attributes:e,setAttributes:t,tabs:[{name:"normal",title:n("Normal","voxel-fse")},{name:"hover",title:n("Hover","voxel-fse")},{name:"filled",title:n("Filled","voxel-fse")}]},o=>o.name==="normal"?React.createElement(React.Fragment,null,React.createElement(X,{label:n("Typography","voxel-fse"),attributes:e,setAttributes:t,typographyAttributeName:"buttonTypography"}),React.createElement(ie,{label:n("Padding","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"buttonPadding"}),React.createElement(S,{label:n("Height","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"buttonHeight",min:0,max:200}),React.createElement(Z,{label:n("Box Shadow","voxel-fse"),attributes:e,setAttributes:t,shadowAttributeName:"buttonBoxShadow"}),React.createElement(h,{label:n("Background color","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"buttonBackground"}),React.createElement(h,{label:n("Text color","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"buttonTextColor"}),React.createElement("div",{className:"voxel-control-group"},React.createElement(ne,{label:n("Border Type","voxel-fse"),value:e.buttonBorderType||"none",options:[{label:n("None","voxel-fse"),value:"none"},{label:n("Solid","voxel-fse"),value:"solid"},{label:n("Double","voxel-fse"),value:"double"},{label:n("Dotted","voxel-fse"),value:"dotted"},{label:n("Dashed","voxel-fse"),value:"dashed"},{label:n("Groove","voxel-fse"),value:"groove"}],onChange:r=>t({buttonBorderType:r})}),e.buttonBorderType&&e.buttonBorderType!=="none"&&React.createElement(React.Fragment,null,React.createElement(ce,{label:n("Width","voxel-fse"),value:e.buttonBorderWidth,onChange:r=>t({buttonBorderWidth:r}),min:0,max:50}),React.createElement(M,{label:n("Color","voxel-fse"),value:e.buttonBorderColor,onChange:r=>t({buttonBorderColor:r})})),React.createElement(S,{label:n("Border radius","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"buttonBorderRadius",min:0,max:100})),React.createElement(I,{label:n("Icons","voxel-fse")}),React.createElement(h,{label:n("Icon color","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"buttonIconColor"}),React.createElement(S,{label:n("Icon size","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"buttonIconSize",min:0,max:100}),React.createElement(S,{label:n("Icon/Text spacing","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"buttonIconSpacing",min:0,max:100})):o.name==="hover"?React.createElement(React.Fragment,null,React.createElement(h,{label:n("Background color","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"buttonBackgroundHover"}),React.createElement(h,{label:n("Text color","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"buttonTextColorHover"}),React.createElement(M,{label:n("Border color","voxel-fse"),value:e.buttonBorderColorHover,onChange:r=>t({buttonBorderColorHover:r})}),React.createElement(h,{label:n("Icon color","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"buttonIconColorHover"}),React.createElement(Z,{label:n("Box Shadow","voxel-fse"),attributes:e,setAttributes:t,shadowAttributeName:"buttonBoxShadowHover"})):o.name==="filled"?React.createElement(React.Fragment,null,React.createElement(X,{label:n("Typography","voxel-fse"),attributes:e,setAttributes:t,typographyAttributeName:"buttonTypographyFilled"}),React.createElement(h,{label:n("Background color","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"buttonBackgroundFilled"}),React.createElement(h,{label:n("Text color","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"buttonTextColorFilled"}),React.createElement(h,{label:n("Icon color","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"buttonIconColorFilled"}),React.createElement(M,{label:n("Border color","voxel-fse"),value:e.buttonBorderColorFilled,onChange:r=>t({buttonBorderColorFilled:r})}),React.createElement(ce,{label:n("Border width","voxel-fse"),value:e.buttonBorderWidthFilled,onChange:r=>t({buttonBorderWidthFilled:r}),min:0,max:50}),React.createElement(Z,{label:n("Box Shadow","voxel-fse"),attributes:e,setAttributes:t,shadowAttributeName:"buttonBoxShadowFilled"})):null)),React.createElement(q,{id:"button_suffix",title:n("Button suffix","voxel-fse")},React.createElement(ke,{label:n("Hide suffix","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"suffixHide"}),React.createElement(ie,{label:n("Padding","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"suffixPadding"}),React.createElement(X,{label:n("Button typography","voxel-fse"),attributes:e,setAttributes:t,typographyAttributeName:"suffixTypography"}),React.createElement(h,{label:n("Text color","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"suffixTextColor"}),React.createElement(h,{label:n("Background color","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"suffixBackground"}),React.createElement(S,{label:n("Border radius","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"suffixBorderRadius",min:0,max:100}),React.createElement(Z,{label:n("Box Shadow","voxel-fse"),attributes:e,setAttributes:t,shadowAttributeName:"suffixBoxShadow"}),React.createElement(S,{label:n("Side margin","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"suffixMargin",min:0,max:100})),React.createElement(q,{id:"popup_tabs",title:n("Popup: Tabs","voxel-fse")},React.createElement(le,{attributeName:"popupTabsState",attributes:e,setAttributes:t,tabs:[{name:"normal",title:n("Normal","voxel-fse")},{name:"hover",title:n("Hover","voxel-fse")}]},o=>o.name==="normal"?React.createElement(React.Fragment,null,React.createElement(I,{label:n("Timeline tabs","voxel-fse")}),React.createElement(h,{label:n("Text color","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"tabsTextColor"}),React.createElement(h,{label:n("Active text color","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"tabsActiveTextColor"}),React.createElement(h,{label:n("Border color","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"tabsBorderColor"}),React.createElement(h,{label:n("Active border color","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"tabsActiveBorderColor"}),React.createElement(h,{label:n("Background","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"tabsBackground"}),React.createElement(h,{label:n("Active background","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"tabsActiveBackground"})):o.name==="hover"?React.createElement(React.Fragment,null,React.createElement(I,{label:n("Timeline tabs","voxel-fse")}),React.createElement(h,{label:n("Text color","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"tabsTextColorHover"}),React.createElement(h,{label:n("Border color","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"tabsBorderColorHover"}),React.createElement(h,{label:n("Background","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"tabsBackgroundHover"})):null)),React.createElement(q,{id:"popup_custom_style",title:n("Popups: Custom style","voxel-fse")},React.createElement(Pe,{attributes:e,setAttributes:t,attributeNames:{enable:"popupCustomEnable",backdrop:"popupBackdropBackground",pointerEvents:"popupPointerEvents",centerPosition:"popupCenterPosition",shadow:"popupBoxShadow",border:"popupBorder",topMargin:"popupTopBottomMargin",minWidth:"popupMinWidth",maxWidth:"popupMaxWidth",maxHeight:"popupMaxHeight"},exclude:["autosuggestTopMargin"]})),e.popupCustomEnable&&React.createElement(q,{id:"popup_menu",title:n("Custom popup: Menu","voxel-fse")},React.createElement(Fe,{attributes:e,setAttributes:t})))}function Qe({attributes:e,setAttributes:t,availablePostTypes:o,isLoading:r}){return React.createElement(Re,null,React.createElement(Te,{tabs:[{id:"content",label:n("Content","voxel-fse"),icon:"",render:()=>React.createElement(De,{attributes:e,setAttributes:t,availablePostTypes:o,isLoading:r})},{id:"style",label:n("Style","voxel-fse"),icon:"",render:()=>React.createElement(Oe,{attributes:e,setAttributes:t})}],includeAdvancedTab:!0,includeVoxelTab:!0,attributes:e,setAttributes:t,activeTabAttribute:"activeTab"}))}function oe(e){if(!e)return"";let t="";return e.fontFamily&&(t+=`font-family: ${e.fontFamily}; `),e.fontSize&&(t+=`font-size: ${e.fontSize}${e.fontSizeUnit||"px"}; `),e.fontWeight&&(t+=`font-weight: ${e.fontWeight}; `),e.fontStyle&&(t+=`font-style: ${e.fontStyle}; `),e.textTransform&&(t+=`text-transform: ${e.textTransform}; `),e.textDecoration&&(t+=`text-decoration: ${e.textDecoration}; `),e.lineHeight&&(t+=`line-height: ${e.lineHeight}${e.lineHeightUnit||""}; `),e.letterSpacing&&(t+=`letter-spacing: ${e.letterSpacing}${e.letterSpacingUnit||"px"}; `),t}function Q(e){if(!e||!e.enable)return"";const{horizontal:t=0,vertical:o=0,blur:r=0,spread:p=0,color:l="rgba(0,0,0,0.1)",position:s="outline"}=e;return`box-shadow: ${s==="inset"?"inset ":""}${t}px ${o}px ${r}px ${p}px ${l};`}function L(e,t){if(!e)return"";const{unit:o="px"}=e,r=parseFloat(String(e.top))||0,p=parseFloat(String(e.right))||0,l=parseFloat(String(e.bottom))||0,s=parseFloat(String(e.left))||0;return`${t}: ${r}${o} ${p}${o} ${l}${o} ${s}${o};`}function fe(e,t){const o=[],r=[],p=[],l=`.voxel-fse-quick-search-${t}`;if(e.buttonTypography){const c=oe(e.buttonTypography);c&&o.push(`${l} .ts-form .ts-filter { ${c} }`)}if(e.buttonPadding){const c=L(e.buttonPadding,"padding");c&&o.push(`${l} .ts-form .ts-filter { ${c} }`)}if(e.buttonPadding_tablet){const c=L(e.buttonPadding_tablet,"padding");c&&r.push(`${l} .ts-form .ts-filter { ${c} }`)}if(e.buttonPadding_mobile){const c=L(e.buttonPadding_mobile,"padding");c&&p.push(`${l} .ts-form .ts-filter { ${c} }`)}if(e.buttonHeight!==void 0&&o.push(`${l} .ts-filter { height: ${e.buttonHeight}px; }`),e.buttonHeight_tablet!==void 0&&r.push(`${l} .ts-filter { height: ${e.buttonHeight_tablet}px; }`),e.buttonHeight_mobile!==void 0&&p.push(`${l} .ts-filter { height: ${e.buttonHeight_mobile}px; }`),e.buttonBoxShadow){const c=Q(e.buttonBoxShadow);c&&o.push(`${l} .ts-filter { ${c} }`)}if(e.buttonBackground&&o.push(`${l} .ts-form .ts-filter { background: ${e.buttonBackground}; }`),e.buttonTextColor&&o.push(`${l} .ts-form .ts-filter-text { color: ${e.buttonTextColor}; }`),e.buttonBorderType&&e.buttonBorderType!=="none"){const c=e.buttonBorderType,u=e.buttonBorderWidth||1,g=e.buttonBorderColor||"#000000";o.push(`${l} .ts-filter { border-style: ${c}; border-width: ${u}px; border-color: ${g}; }`)}if(e.buttonBorderRadius!==void 0&&o.push(`${l} .ts-form .ts-filter { border-radius: ${e.buttonBorderRadius}px; }`),e.buttonBorderRadius_tablet!==void 0&&r.push(`${l} .ts-form .ts-filter { border-radius: ${e.buttonBorderRadius_tablet}px; }`),e.buttonBorderRadius_mobile!==void 0&&p.push(`${l} .ts-form .ts-filter { border-radius: ${e.buttonBorderRadius_mobile}px; }`),e.buttonIconColor&&(o.push(`${l} .ts-filter i { color: ${e.buttonIconColor}; }`),o.push(`${l} .ts-filter svg { fill: ${e.buttonIconColor}; }`)),e.buttonIconSize!==void 0&&(o.push(`${l} .ts-filter i { font-size: ${e.buttonIconSize}px; }`),o.push(`${l} .ts-filter svg { min-width: ${e.buttonIconSize}px; width: ${e.buttonIconSize}px; height: ${e.buttonIconSize}px; }`)),e.buttonIconSize_tablet!==void 0&&(r.push(`${l} .ts-filter i { font-size: ${e.buttonIconSize_tablet}px; }`),r.push(`${l} .ts-filter svg { min-width: ${e.buttonIconSize_tablet}px; width: ${e.buttonIconSize_tablet}px; height: ${e.buttonIconSize_tablet}px; }`)),e.buttonIconSize_mobile!==void 0&&(p.push(`${l} .ts-filter i { font-size: ${e.buttonIconSize_mobile}px; }`),p.push(`${l} .ts-filter svg { min-width: ${e.buttonIconSize_mobile}px; width: ${e.buttonIconSize_mobile}px; height: ${e.buttonIconSize_mobile}px; }`)),e.buttonIconSpacing!==void 0&&o.push(`${l} .ts-filter { grid-gap: ${e.buttonIconSpacing}px; }`),e.buttonIconSpacing_tablet!==void 0&&r.push(`${l} .ts-filter { grid-gap: ${e.buttonIconSpacing_tablet}px; }`),e.buttonIconSpacing_mobile!==void 0&&p.push(`${l} .ts-filter { grid-gap: ${e.buttonIconSpacing_mobile}px; }`),e.buttonBackgroundHover&&o.push(`${l} .ts-form .ts-filter:hover { background: ${e.buttonBackgroundHover}; }`),e.buttonTextColorHover&&o.push(`${l} .ts-form .ts-filter:hover .ts-filter-text { color: ${e.buttonTextColorHover}; }`),e.buttonBorderColorHover&&o.push(`${l} .ts-form .ts-filter:hover { border-color: ${e.buttonBorderColorHover}; }`),e.buttonIconColorHover&&(o.push(`${l} .ts-filter:hover i { color: ${e.buttonIconColorHover}; }`),o.push(`${l} .ts-filter:hover svg { fill: ${e.buttonIconColorHover}; }`)),e.buttonBoxShadowHover){const c=Q(e.buttonBoxShadowHover);c&&o.push(`${l} .ts-filter:hover { ${c} }`)}if(e.buttonTypographyFilled){const c=oe(e.buttonTypographyFilled);c&&o.push(`${l} .ts-form .ts-filter.ts-filled { ${c} }`)}if(e.buttonBackgroundFilled&&o.push(`${l} .ts-form .ts-filter.ts-filled { background: ${e.buttonBackgroundFilled}; }`),e.buttonTextColorFilled&&o.push(`${l} .ts-form .ts-filter.ts-filled .ts-filter-text { color: ${e.buttonTextColorFilled}; }`),e.buttonIconColorFilled&&(o.push(`${l} .ts-filter.ts-filled i { color: ${e.buttonIconColorFilled}; }`),o.push(`${l} .ts-filter.ts-filled svg { fill: ${e.buttonIconColorFilled}; }`)),e.buttonBorderColorFilled&&o.push(`${l} .ts-form .ts-filter.ts-filled { border-color: ${e.buttonBorderColorFilled}; }`),e.buttonBorderWidthFilled!==void 0&&o.push(`${l} .ts-form .ts-filter.ts-filled { border-width: ${e.buttonBorderWidthFilled}px; }`),e.buttonBoxShadowFilled){const c=Q(e.buttonBoxShadowFilled);c&&o.push(`${l} .ts-filter.ts-filled { ${c} }`)}if(e.suffixHide&&o.push(`${l} .ts-shortcut { display: none !important; }`),e.suffixHide_tablet&&r.push(`${l} .ts-shortcut { display: none !important; }`),e.suffixHide_mobile&&p.push(`${l} .ts-shortcut { display: none !important; }`),e.suffixPadding){const c=L(e.suffixPadding,"padding");c&&o.push(`${l} .ts-shortcut { ${c} }`)}if(e.suffixPadding_tablet){const c=L(e.suffixPadding_tablet,"padding");c&&r.push(`${l} .ts-shortcut { ${c} }`)}if(e.suffixPadding_mobile){const c=L(e.suffixPadding_mobile,"padding");c&&p.push(`${l} .ts-shortcut { ${c} }`)}if(e.suffixTypography){const c=oe(e.suffixTypography);c&&o.push(`${l} .ts-shortcut { ${c} }`)}if(e.suffixTextColor&&o.push(`${l} .ts-shortcut { color: ${e.suffixTextColor}; }`),e.suffixTextColor_tablet&&r.push(`${l} .ts-shortcut { color: ${e.suffixTextColor_tablet}; }`),e.suffixTextColor_mobile&&p.push(`${l} .ts-shortcut { color: ${e.suffixTextColor_mobile}; }`),e.suffixBackground&&o.push(`${l} .ts-shortcut { background: ${e.suffixBackground}; }`),e.suffixBackground_tablet&&r.push(`${l} .ts-shortcut { background: ${e.suffixBackground_tablet}; }`),e.suffixBackground_mobile&&p.push(`${l} .ts-shortcut { background: ${e.suffixBackground_mobile}; }`),e.suffixBorderRadius!==void 0&&o.push(`${l} .ts-shortcut { border-radius: ${e.suffixBorderRadius}px; }`),e.suffixBorderRadius_tablet!==void 0&&r.push(`${l} .ts-shortcut { border-radius: ${e.suffixBorderRadius_tablet}px; }`),e.suffixBorderRadius_mobile!==void 0&&p.push(`${l} .ts-shortcut { border-radius: ${e.suffixBorderRadius_mobile}px; }`),e.suffixBoxShadow){const c=Q(e.suffixBoxShadow);c&&o.push(`${l} .ts-shortcut { ${c} }`)}if(e.suffixMargin!==void 0&&o.push(`${l} .ts-shortcut { right: ${e.suffixMargin}px; }`),e.suffixMargin_tablet!==void 0&&r.push(`${l} .ts-shortcut { right: ${e.suffixMargin_tablet}px; }`),e.suffixMargin_mobile!==void 0&&p.push(`${l} .ts-shortcut { right: ${e.suffixMargin_mobile}px; }`),e.tabsJustify&&o.push(`${l} .ts-generic-tabs { justify-content: ${e.tabsJustify}; }`),e.tabsPadding){const c=L(e.tabsPadding,"padding");c&&o.push(`${l} .ts-generic-tabs li a { ${c} }`)}if(e.tabsMargin){const c=L(e.tabsMargin,"margin");c&&o.push(`${l} .ts-generic-tabs li { ${c} }`)}if(e.tabsTextColor&&o.push(`${l} .ts-generic-tabs li a { color: ${e.tabsTextColor}; }`),e.tabsActiveTextColor&&o.push(`${l} .ts-generic-tabs li.ts-tab-active a { color: ${e.tabsActiveTextColor}; }`),e.tabsBorderColor&&o.push(`${l} .ts-generic-tabs li a { border-color: ${e.tabsBorderColor}; }`),e.tabsActiveBorderColor&&o.push(`${l} .ts-generic-tabs li.ts-tab-active a { border-color: ${e.tabsActiveBorderColor}; }`),e.tabsBackground&&o.push(`${l} .ts-generic-tabs li a { background: ${e.tabsBackground}; }`),e.tabsActiveBackground&&o.push(`${l} .ts-generic-tabs li.ts-tab-active a { background: ${e.tabsActiveBackground}; }`),e.tabsBorderRadius!==void 0&&o.push(`${l} .ts-generic-tabs li a { border-radius: ${e.tabsBorderRadius}px; }`),e.tabsTextColorHover&&o.push(`${l} .ts-generic-tabs li a:hover { color: ${e.tabsTextColorHover}; }`),e.tabsBorderColorHover&&o.push(`${l} .ts-generic-tabs li a:hover { border-color: ${e.tabsBorderColorHover}; }`),e.tabsBackgroundHover&&o.push(`${l} .ts-generic-tabs li a:hover { background: ${e.tabsBackgroundHover}; }`),e.popupCustomEnable){if(e.popupBackdropBackground&&o.push(`${l} .ts-popup-overlay::after { content: ''; position: absolute; inset: 0; background-color: ${e.popupBackdropBackground} !important; z-index: -1; }`),e.popupPointerEvents&&o.push(`${l} .ts-popup-overlay::after { pointer-events: all; }`),e.popupCenterPosition&&o.push(`${l} .ts-popup-overlay { position: fixed !important; top: 50%; left: 50%; transform: translate(-50%, -50%); }`),e.popupBoxShadow){const c=Q(e.popupBoxShadow);c&&o.push(`${l} .ts-quicksearch-popup { ${c} }`)}if(e.popupBorder&&e.popupBorder.borderType&&e.popupBorder.borderType!=="none"){const c=e.popupBorder,u=c.borderType,g=c.borderWidth||{top:1,right:1,bottom:1,left:1},C=c.borderColor||"#000000",x=parseFloat(String(g.top))||0,_=parseFloat(String(g.right))||0,N=parseFloat(String(g.bottom))||0,E=parseFloat(String(g.left))||0;o.push(`${l} .ts-quicksearch-popup { border-style: ${u}; border-width: ${x}px ${_}px ${N}px ${E}px; border-color: ${C}; }`)}e.popupTopBottomMargin!==void 0&&o.push(`${l} .ts-quicksearch-popup { margin-top: ${e.popupTopBottomMargin}px; margin-bottom: ${e.popupTopBottomMargin}px; }`),e.popupTopBottomMargin_tablet!==void 0&&r.push(`${l} .ts-quicksearch-popup { margin-top: ${e.popupTopBottomMargin_tablet}px; margin-bottom: ${e.popupTopBottomMargin_tablet}px; }`),e.popupTopBottomMargin_mobile!==void 0&&p.push(`${l} .ts-quicksearch-popup { margin-top: ${e.popupTopBottomMargin_mobile}px; margin-bottom: ${e.popupTopBottomMargin_mobile}px; }`),e.popupMinWidth!==void 0&&o.push(`${l} .ts-quicksearch-popup { min-width: ${e.popupMinWidth}px; }`),e.popupMinWidth_tablet!==void 0&&r.push(`${l} .ts-quicksearch-popup { min-width: ${e.popupMinWidth_tablet}px; }`),e.popupMinWidth_mobile!==void 0&&p.push(`${l} .ts-quicksearch-popup { min-width: ${e.popupMinWidth_mobile}px; }`),e.popupMaxWidth!==void 0&&o.push(`${l} .ts-quicksearch-popup { max-width: ${e.popupMaxWidth}px; }`),e.popupMaxWidth_tablet!==void 0&&r.push(`${l} .ts-quicksearch-popup { max-width: ${e.popupMaxWidth_tablet}px; }`),e.popupMaxWidth_mobile!==void 0&&p.push(`${l} .ts-quicksearch-popup { max-width: ${e.popupMaxWidth_mobile}px; }`),e.popupMaxHeight!==void 0&&o.push(`${l} .ts-quicksearch-popup { max-height: ${e.popupMaxHeight}px; overflow-y: auto; }`),e.popupMaxHeight_tablet!==void 0&&r.push(`${l} .ts-quicksearch-popup { max-height: ${e.popupMaxHeight_tablet}px; }`),e.popupMaxHeight_mobile!==void 0&&p.push(`${l} .ts-quicksearch-popup { max-height: ${e.popupMaxHeight_mobile}px; }`)}let s="";return o.length>0&&(s+=o.join(`
`)),r.length>0&&(s+=`
@media (max-width: 1024px) {
${r.join(`
`)}
}`),p.length>0&&(s+=`
@media (max-width: 767px) {
${p.join(`
`)}
}`),s}async function Je(){try{const e=Se(),t=await fetch(`${e}voxel-fse/v1/quick-search/post-types`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return(await t.json()).postTypes||[]}catch(e){return console.error("Failed to fetch post types:",e),[]}}function Ke({attributes:e,setAttributes:t,clientId:o}){F(()=>{e.blockId||t({blockId:`quick-search-${o.slice(0,8)}`})},[e.blockId,o,t]);const r=pe(e,{blockId:e.blockId,baseClass:"ts-form quick-search voxel-fse-quick-search",selectorPrefix:"voxel-fse-quick-search"}),p=te(()=>fe(e,e.blockId),[e]),l=te(()=>[r.responsiveCSS,p].filter(Boolean).join(`
`),[r.responsiveCSS,p]),s=ae({id:r.elementId,className:r.className,style:{...r.styles,width:"100%"},...r.customAttrs}),[c,u]=$([]),[g,C]=$(!0);return F(()=>{let x=!1;async function _(){C(!0);const N=await Je();x||(u(N),C(!1))}return _(),()=>{x=!0}},[]),React.createElement(React.Fragment,null,React.createElement(Qe,{attributes:e,setAttributes:t,availablePostTypes:c,isLoading:g}),React.createElement("div",{...s},l&&React.createElement("style",{dangerouslySetInnerHTML:{__html:l}}),React.createElement(Ve,{attributes:e,postTypes:c.filter(x=>(e.postTypes||[]).includes(x.key)),context:"editor"})))}function ue(e){return function({attributes:o}){const r=pe(o,{blockId:o.blockId||"quick-search",baseClass:"ts-form quick-search voxel-fse-quick-search"}),p=fe(o,o.blockId||"quick-search"),l=[r.responsiveCSS,p].filter(Boolean).join(`
`),s=ae.save({id:r.elementId,className:r.className,style:r.styles,"data-visibility-behavior":o.visibilityBehavior||void 0,"data-visibility-rules":o.visibilityRules?.length?JSON.stringify(o.visibilityRules):void 0,"data-loop-source":o.loopSource||void 0,"data-loop-limit":o.loopLimit||void 0,"data-loop-offset":o.loopOffset||void 0,...r.customAttrs}),c={};(o.postTypes||[]).forEach(g=>{const C=o.postTypeSettings?.[g]||{};c[g]={key:g,label:C.label||g,filter:C.filter||"keywords",taxonomies:C.taxonomies||[],archive:"",results:{query:"",items:[]}}});const u={postTypes:c,displayMode:o.displayMode||"single",keywords:{minlength:2},singleMode:{submitTo:o.singleSubmitTo||null,filterKey:o.singleSubmitKey||"keywords"},icons:{search:o.searchIcon||{library:"",value:""},close:o.closeIcon||{library:"",value:""},result:o.resultIcon||{library:"",value:""},clearSearches:o.clearSearchesIcon||{library:"",value:""}},buttonLabel:o.buttonLabel||"Quick search",hideCptTabs:o.hideCptTabs||!1};return React.createElement("div",{...s},l&&React.createElement("style",{dangerouslySetInnerHTML:{__html:l}}),Ee(o,!1,void 0,void 0,r.uniqueSelector),React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(u)}}),e&&React.createElement("div",{className:"voxel-fse-block-placeholder",style:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#e0e0e0",padding:"16px",minHeight:"48px"}},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor",style:{opacity:.4}},React.createElement("rect",{x:"4",y:"4",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"10",y:"4",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"16",y:"4",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"4",y:"10",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"10",y:"10",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"16",y:"10",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"4",y:"16",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"10",y:"16",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"16",y:"16",width:"4",height:"4",rx:"0.5"}))))}}const Ue=ue(!1),Ze=ue(!0),Ge="https://schemas.wp.org/trunk/block.json",Xe=3,Ye="voxel-fse/quick-search",Ae="1.0.0",eo="Quick Search (VX)",oo="voxel-fse",to="A quick search widget with keyboard shortcut (Ctrl+K) support, post type tabs, and recent searches. FSE equivalent of Voxel's Quick Search widget.",lo=["search","quick","keyboard","ctrl+k","voxel"],no="voxel-fse",ao={html:!1,align:["wide","full"],anchor:!0,className:!0,customClassName:!0},ro="file:./index.js",co="file:./frontend.js",io="file:./render.php",so={blockId:{type:"string",default:""},activeTab:{type:"string",default:"content"},contentTabOpenPanel:{type:"string",default:"post_types"},styleTabOpenPanel:{type:"string",default:"search_button"},searchButtonState:{type:"string",default:"normal"},popupTabsState:{type:"string",default:"normal"},postTypes:{type:"array",default:[],items:{type:"string"}},postTypeSettings:{type:"object",default:{}},buttonLabel:{type:"string",default:"Quick search"},displayMode:{type:"string",default:"single",enum:["single","tabbed"]},hideCptTabs:{type:"boolean",default:!1},singleSubmitTo:{type:"string",default:""},singleSubmitKey:{type:"string",default:"keywords"},searchIcon:{type:"object",default:{library:"",value:""}},closeIcon:{type:"object",default:{library:"",value:""}},resultIcon:{type:"object",default:{library:"",value:""}},clearSearchesIcon:{type:"object",default:{library:"",value:""}},buttonPadding:{type:"object",default:{}},buttonPadding_tablet:{type:"object",default:{}},buttonPadding_mobile:{type:"object",default:{}},buttonHeight:{type:"number",default:50},buttonHeight_tablet:{type:"number"},buttonHeight_mobile:{type:"number"},buttonBackground:{type:"string",default:""},buttonTextColor:{type:"string",default:""},buttonBorderRadius:{type:"number",default:5},buttonIconColor:{type:"string",default:""},buttonIconSize:{type:"number",default:24},buttonIconSpacing:{type:"number",default:10},buttonTypography:{type:"object",default:{}},buttonBoxShadow:{type:"object",default:{}},buttonBorderType:{type:"string",default:"none"},buttonBorderWidth:{type:"number"},buttonBorderColor:{type:"string",default:""},buttonBorderRadius_tablet:{type:"number"},buttonBorderRadius_mobile:{type:"number"},buttonIconSize_tablet:{type:"number"},buttonIconSize_mobile:{type:"number"},buttonIconSpacing_tablet:{type:"number"},buttonIconSpacing_mobile:{type:"number"},buttonBackgroundHover:{type:"string",default:""},buttonTextColorHover:{type:"string",default:""},buttonBorderColorHover:{type:"string",default:""},buttonIconColorHover:{type:"string",default:""},buttonBoxShadowHover:{type:"object",default:{}},buttonBackgroundFilled:{type:"string",default:""},buttonTextColorFilled:{type:"string",default:""},buttonIconColorFilled:{type:"string",default:""},buttonBorderColorFilled:{type:"string",default:""},buttonBorderWidthFilled:{type:"number"},buttonTypographyFilled:{type:"object",default:{}},buttonBoxShadowFilled:{type:"object",default:{}},suffixHide:{type:"boolean",default:!1},suffixHide_tablet:{type:"boolean"},suffixHide_mobile:{type:"boolean"},suffixPadding:{type:"object"},suffixPadding_tablet:{type:"object"},suffixPadding_mobile:{type:"object"},suffixTypography:{type:"object",default:{}},suffixTextColor:{type:"string",default:""},suffixTextColor_tablet:{type:"string"},suffixTextColor_mobile:{type:"string"},suffixBackground:{type:"string",default:""},suffixBackground_tablet:{type:"string"},suffixBackground_mobile:{type:"string"},suffixBorderRadius:{type:"number"},suffixBorderRadius_tablet:{type:"number"},suffixBorderRadius_mobile:{type:"number"},suffixBoxShadow:{type:"object",default:{}},suffixMargin:{type:"number"},suffixMargin_tablet:{type:"number"},suffixMargin_mobile:{type:"number"},tabsJustify:{type:"string",default:"center"},tabsPadding:{type:"object",default:{}},tabsMargin:{type:"object",default:{top:10,right:0,bottom:10,left:0}},tabsTextColor:{type:"string",default:""},tabsActiveTextColor:{type:"string",default:""},tabsBackground:{type:"string",default:""},tabsActiveBackground:{type:"string",default:""},tabsBorderRadius:{type:"number"},tabsBorderColor:{type:"string",default:""},tabsActiveBorderColor:{type:"string",default:""},tabsTextColorHover:{type:"string"},tabsBorderColorHover:{type:"string"},tabsBackgroundHover:{type:"string"},popupCustomEnable:{type:"boolean",default:!1},popupBackdropBackground:{type:"string",default:""},popupPointerEvents:{type:"boolean",default:!1},popupCenterPosition:{type:"boolean",default:!1},popupMinWidth:{type:"number",default:538},popupMaxWidth:{type:"number"},popupMaxHeight:{type:"number"},popupTopBottomMargin:{type:"number"},popupBoxShadow:{type:"object",default:{}},popupBorder:{type:"object",default:{}},customPopupMenuState:{type:"string",default:"normal"},menuItemPadding:{type:"object",default:{}},menuItemHeight:{type:"number"},menuItemHeight_tablet:{type:"number"},menuItemHeight_mobile:{type:"number"},menuItemBorderRadius:{type:"number"},menuItemBorderRadius_tablet:{type:"number"},menuItemBorderRadius_mobile:{type:"number"},menuTitleColor:{type:"string",default:""},menuTitleTypography:{type:"object",default:{}},menuLogoWidth:{type:"number"},menuLogoWidth_tablet:{type:"number"},menuLogoWidth_mobile:{type:"number"},menuLogoRadius:{type:"number"},menuLogoRadius_tablet:{type:"number"},menuLogoRadius_mobile:{type:"number"},menuIconColor:{type:"string",default:""},menuIconSize:{type:"number"},menuIconSize_tablet:{type:"number"},menuIconSize_mobile:{type:"number"},menuIconContainerSize:{type:"number"},menuIconContainerSize_tablet:{type:"number"},menuIconContainerSize_mobile:{type:"number"},menuIconContainerSpacing:{type:"number"},menuIconContainerSpacing_tablet:{type:"number"},menuIconContainerSpacing_mobile:{type:"number"},menuChevronColor:{type:"string",default:""},menuItemBackgroundHover:{type:"string",default:""},menuTitleColorHover:{type:"string",default:""},menuIconColorHover:{type:"string",default:""},hideDesktop:{type:"boolean",default:!1},hideTablet:{type:"boolean",default:!1},hideMobile:{type:"boolean",default:!1},customClasses:{type:"string",default:""},_comment_voxel_tab:"VoxelTab attributes for visibility and loop features",visibilityBehavior:{type:"string",default:"show",enum:["show","hide"]},visibilityRules:{type:"array",default:[],items:{type:"object"}},loopEnabled:{type:"boolean",default:!1},loopSource:{type:"string",default:""},loopProperty:{type:"string",default:""},loopLimit:{type:"string",default:""},loopOffset:{type:"string",default:""}},Y={$schema:Ge,apiVersion:Xe,name:Ye,version:Ae,title:eo,category:oo,description:to,keywords:lo,textdomain:no,supports:ao,editorScript:ro,viewScript:co,render:io,attributes:so},po=[{attributes:Y.attributes,save:Ze},{attributes:Y.attributes,save({attributes:e}){const t=ae.save({className:"ts-form quick-search voxel-fse-quick-search"}),o={postTypes:{},displayMode:e.displayMode,keywords:{minlength:2},singleMode:{submitTo:e.singleSubmitTo||null,filterKey:e.singleSubmitKey||"keywords"},icons:{search:e.searchIcon,close:e.closeIcon,result:e.resultIcon,clearSearches:e.clearSearchesIcon},buttonLabel:e.buttonLabel,hideCptTabs:e.hideCptTabs};return React.createElement("div",{...t},React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(o)}}),React.createElement("div",{className:"voxel-fse-block-placeholder"},React.createElement("span",{className:"placeholder-icon"},"🔍"),React.createElement("span",{className:"placeholder-text"},"Quick Search (VX)")))}}];Ce(Y.name,{...Y,icon:Le,title:n("Quick Search (VX)","voxel-fse"),description:n("A quick search widget with keyboard shortcut support and recent searches.","voxel-fse"),edit:Ke,save:Ue,deprecated:po});
