import{registerBlockType as ve}from"@wordpress/blocks";import{__ as n}from"@wordpress/i18n";import{useBlockProps as ne,InspectorControls as xe,RichText as ye}from"@wordpress/block-editor";import{Button as K,RangeControl as ce,SelectControl as O,ToggleControl as ue,TextControl as U}from"@wordpress/components";import C,{useState as N,useRef as G,useEffect as M,useCallback as w}from"react";import{createPortal as J}from"react-dom";import{useSelect as $e,useDispatch as Se}from"@wordpress/data";import{U as Re,C as _,A as le,a as H,f as W,i as Q,S as V,j as Ce,R as j,b as F,B as X,D as z,T as Be,k as Y,E as Ee}from"../TypographyPopup-BXz72zyZ.js";import{I as Ie}from"../InspectorTabs-DmdaThza.js";import"@wordpress/api-fetch";import"../RepeaterControl-BJok1GGr.js";import{L as ke}from"../LoopElementModal-CaevVMh1.js";import{L as be,R as Te}from"../RepeaterControl-xj2PJ-Sc.js";/* empty css                            */import{I as Z}from"../IconPickerControl-DZSJ-4aK.js";import{T as we}from"../TextShadowPopup-CPxXZkC0.js";import"../voxelShim-DB_Ue-9R.js";import{g as Ne}from"../useAdvancedTabProps-BnJDQbKr.js";import{r as Pe}from"../backgroundElements-Ui-iCrLV.js";import{V as _e}from"../VoxelGridIcon-D5dF5acW.js";import"../generateAdvancedStyles-CRpLcHXt.js";import"../generateVoxelStyles-oZeaeuKH.js";const He=()=>C.createElement("span",{className:"eicon eicon-edit",style:{fontSize:"14px"}});function De({label:e,attributes:r,setAttributes:d,strokeAttributeName:a}){const[f,t]=N(!1),p=G(null),o={color:"#000000",width:1},c=r[a]||{},l=Object.keys(c).length>0,s=()=>{d({[a]:{}})},m=()=>{!f&&!l&&d({[a]:{...o}}),t(!f)},x=G(null);return M(()=>{if(!f||!p.current||!x.current)return;requestAnimationFrame(()=>{if(!p.current||!x.current)return;const u=p.current,B=u.offsetWidth,R=u.offsetHeight,P=window.innerHeight,D=x.current.closest(".interface-interface-skeleton__sidebar")?.getBoundingClientRect();let k,E;if(D){k=D.left-B-12;const b=x.current.getBoundingClientRect();E=b.top-R/2+b.height/2}else{const b=x.current.getBoundingClientRect();k=b.left-B-8,E=b.top}k<8&&(k=8),E+R>P-8&&(E=P-R-8),E<8&&(E=8),u.style.top=`${E}px`,u.style.left=`${k}px`});const v=u=>{const B=window.__voxelDeviceChangeTimestamp||0;Date.now()-B<1e3||p.current&&!p.current.contains(u.target)&&t(!1)};return document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[f]),C.createElement("div",{className:"elementor-control elementor-control-type-text-stroke",style:{position:"relative"}},C.createElement("div",{className:"elementor-control-content",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"}},C.createElement("span",{className:"elementor-control-title",style:{fontSize:"13px",fontWeight:500,textTransform:"capitalize",color:"rgb(30, 30, 30)",margin:0}},e),C.createElement("div",{style:{display:"flex",gap:"4px",alignItems:"center"}},l&&C.createElement(K,{icon:C.createElement(Re,null),label:n("Reset","voxel-fse"),onClick:s,variant:"tertiary",size:"small",style:{minWidth:"auto",padding:"4px",width:"24px",height:"24px"}}),C.createElement(K,{ref:x,icon:C.createElement(He,null),size:"small",variant:"tertiary",onClick:m,style:{minWidth:"auto",padding:"4px",width:"24px",height:"24px",backgroundColor:l?"color-mix(in srgb, var(--wp-components-color-accent, var(--wp-admin-theme-color, #3858e9)) 4%, #0000)":void 0,borderRadius:l?"2px":void 0}}))),f&&C.createElement("div",{ref:p,style:{position:"fixed",zIndex:1e6,backgroundColor:"#fff",border:"1px solid #ddd",borderRadius:"4px",padding:"16px",boxShadow:"0 2px 6px rgba(0, 0, 0, 0.15)",width:"280px"}},C.createElement("h3",{style:{margin:"0 0 16px",fontSize:"13px",fontWeight:600}},e),C.createElement(_,{label:n("Color","voxel-fse"),value:c.color||o.color,onChange:$=>{d({[a]:{...c,color:$}})}}),C.createElement(ce,{label:n("Width","voxel-fse"),value:c.width??o.width,onChange:$=>{d({[a]:{...c,width:$??1}})},min:0,max:10,step:.1})))}function je({attributes:e,setAttributes:r,itemsRepeater:d}){const a=p=>{const o=e.animationDuration.unit,c=e.animationDuration.size;let l=c;o==="ms"&&p==="s"?l=c/1e3:o==="s"&&p==="ms"&&(l=c*1e3),r({animationDuration:{size:l,unit:p}})},t=e.animationDuration.unit==="s"?{min:0,max:10,step:.1}:{min:0,max:1e4,step:50};return React.createElement(le,{attributes:e,setAttributes:r,stateAttribute:"contentTabOpenPanel",defaultPanel:"layout"},React.createElement(H,{id:"layout",title:n("Layout","voxel-fse")},d,React.createElement(W,{label:n("Item Position","voxel-fse"),value:e.itemPosition.desktop||"start",onChange:p=>r({itemPosition:{...e.itemPosition,desktop:p}}),controls:React.createElement(Q,null),options:[{value:"start",label:n("Start","voxel-fse"),icon:"eicon-align-start-h"},{value:"center",label:n("Center","voxel-fse"),icon:"eicon-h-align-center"},{value:"end",label:n("End","voxel-fse"),icon:"eicon-align-end-h"},{value:"stretch",label:n("Stretch","voxel-fse"),icon:"eicon-h-align-stretch"}]}),React.createElement(V,{label:n("Icon","voxel-fse")}),React.createElement(W,{label:n("Position","voxel-fse"),value:e.iconPosition.desktop||"end",onChange:p=>r({iconPosition:{...e.iconPosition,desktop:p}}),controls:React.createElement(Q,null),options:[{value:"start",label:n("Start","voxel-fse"),icon:"eicon-h-align-left"},{value:"end",label:n("End","voxel-fse"),icon:"eicon-h-align-right"}]}),React.createElement(Z,{label:n("Expand","voxel-fse"),value:e.expandIcon,onChange:p=>r({expandIcon:p}),showSelectedIcon:!0}),e.expandIcon?.value&&React.createElement(Z,{label:n("Collapse","voxel-fse"),value:e.collapseIcon,onChange:p=>r({collapseIcon:p}),showSelectedIcon:!0}),React.createElement(O,{label:n("Title HTML Tag","voxel-fse"),value:e.titleTag,onChange:p=>r({titleTag:p}),options:[{value:"h1",label:"H1"},{value:"h2",label:"H2"},{value:"h3",label:"H3"},{value:"h4",label:"H4"},{value:"h5",label:"H5"},{value:"h6",label:"H6"},{value:"div",label:"div"},{value:"span",label:"span"},{value:"p",label:"p"}],__nextHasNoMarginBottom:!0}),React.createElement(ue,{label:n("FAQ Schema","voxel-fse"),checked:e.faqSchema,onChange:p=>r({faqSchema:p}),__nextHasNoMarginBottom:!0})),React.createElement(H,{id:"interactions",title:n("Interactions","voxel-fse")},React.createElement(O,{label:n("Default State","voxel-fse"),value:e.defaultState,onChange:p=>r({defaultState:p}),options:[{value:"expanded",label:n("First expanded","voxel-fse")},{value:"all_collapsed",label:n("All collapsed","voxel-fse")}],__nextHasNoMarginBottom:!0}),React.createElement(O,{label:n("Max Items Expanded","voxel-fse"),value:e.maxItemsExpanded,onChange:p=>r({maxItemsExpanded:p}),options:[{value:"one",label:n("One","voxel-fse")},{value:"multiple",label:n("Multiple","voxel-fse")}],__nextHasNoMarginBottom:!0}),React.createElement("div",{className:"elementor-control",style:{marginBottom:"16px"}},React.createElement("div",{className:"elementor-control-content",style:{marginBottom:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"}},React.createElement("span",{className:"elementor-control-title",style:{fontSize:"13px",fontWeight:500,color:"rgb(30, 30, 30)",margin:0}},n("Animation Duration","voxel-fse")),React.createElement(Ce,{currentUnit:e.animationDuration.unit,onUnitChange:p=>a(p),availableUnits:["ms","s"]})),React.createElement(ce,{value:e.animationDuration.size,onChange:p=>r({animationDuration:{...e.animationDuration,size:p??0}}),min:t.min,max:t.max,step:t.step,withInputField:!0,__nextHasNoMarginBottom:!0}))))}function ze({attributes:e,setAttributes:r}){const d=a=>a.charAt(0).toUpperCase()+a.slice(1);return React.createElement(le,{attributes:e,setAttributes:r,stateAttribute:"styleTabOpenPanel",defaultPanel:"accordion-style"},React.createElement(H,{id:"accordion-style",title:n("Accordion","voxel-fse")},React.createElement(j,{label:n("Space between Items","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"itemSpacing",min:0,max:200,units:["px","em","rem"]}),React.createElement(j,{label:n("Distance from content","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"contentDistance",min:0,max:200,units:["px","em","rem"]}),React.createElement(F,{attributeName:"accordionState",attributes:e,setAttributes:r,tabs:[{name:"normal",title:n("Normal","voxel-fse")},{name:"hover",title:n("Hover","voxel-fse")},{name:"active",title:n("Active","voxel-fse")}]},a=>{const f=d(a.name),t=`accordion${f}BgType`,p=`accordion${f}Bg`,o=`accordion${f}BorderType`,c=`accordion${f}BorderWidth`,l=`accordion${f}BorderColor`;return React.createElement(React.Fragment,null,React.createElement(W,{label:n("Background Type","voxel-fse"),value:e[t]||"classic",onChange:s=>r({[t]:s}),options:[{value:"classic",icon:"eicon-paint-brush",title:n("Classic","voxel-fse")},{value:"gradient",icon:"eicon-barcode",title:n("Gradient","voxel-fse")}],variant:"inline"}),(e[t]==="classic"||!e[t])&&React.createElement(_,{label:n("Color","voxel-fse"),value:e[p]||"",onChange:s=>r({[p]:s||""})}),React.createElement(X,{label:n("Border","voxel-fse"),value:{borderType:e[o]||"",borderWidth:e[c]||{},borderColor:e[l]||""},onChange:s=>{const m={};s.borderType!==void 0&&(m[o]=s.borderType),s.borderWidth!==void 0&&(m[c]=s.borderWidth),s.borderColor!==void 0&&(m[l]=s.borderColor),r(m)},hideRadius:!0}))}),React.createElement(z,{label:n("Border Radius","voxel-fse"),values:e.accordionBorderRadius?.desktop||{},onChange:a=>r({accordionBorderRadius:{...e.accordionBorderRadius,desktop:a}})}),React.createElement(z,{label:n("Padding","voxel-fse"),values:e.accordionPadding?.desktop||{},onChange:a=>r({accordionPadding:{...e.accordionPadding,desktop:a}})})),React.createElement(H,{id:"header-style",title:n("Header","voxel-fse")},React.createElement(V,{label:n("Title","voxel-fse")}),React.createElement(Be,{label:n("Typography","voxel-fse"),value:e.titleTypography,onChange:a=>r({titleTypography:a})}),React.createElement(F,{attributeName:"titleColorState",attributes:e,setAttributes:r,tabs:[{name:"normal",title:n("Normal","voxel-fse")},{name:"hover",title:n("Hover","voxel-fse")},{name:"active",title:n("Active","voxel-fse")}]},a=>{const f=d(a.name),t=`title${f}Color`,p=`title${f}TextShadow`,o=`title${f}TextStroke`;return React.createElement(React.Fragment,null,React.createElement(_,{label:n("Color","voxel-fse"),value:e[t]||"",onChange:c=>r({[t]:c||""})}),React.createElement(we,{label:n("Text Shadow","voxel-fse"),attributes:e,setAttributes:r,shadowAttributeName:p}),React.createElement(De,{label:n("Text Stroke","voxel-fse"),attributes:e,setAttributes:r,strokeAttributeName:o}))}),React.createElement(V,{label:n("Icon","voxel-fse")}),React.createElement(j,{label:n("Size","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"iconSize",min:0,max:100,units:["px","%","em","rem","vw"]}),React.createElement(j,{label:n("Spacing","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"iconSpacing",min:0,max:100,units:["px","%","em","rem","vw"]}),React.createElement(F,{attributeName:"iconColorState",attributes:e,setAttributes:r,tabs:[{name:"normal",title:n("Normal","voxel-fse")},{name:"hover",title:n("Hover","voxel-fse")},{name:"active",title:n("Active","voxel-fse")}]},a=>{const t=`icon${d(a.name)}Color`;return React.createElement(_,{label:n("Color","voxel-fse"),value:e[t]||"",onChange:p=>r({[t]:p||""})})})),React.createElement(H,{id:"content-style",title:n("Content","voxel-fse")},React.createElement(W,{label:n("Background Type","voxel-fse"),value:e.contentBgType||"classic",onChange:a=>r({contentBgType:a}),options:[{value:"classic",icon:"eicon-paint-brush",title:n("Classic","voxel-fse")},{value:"gradient",icon:"eicon-barcode",title:n("Gradient","voxel-fse")}],variant:"inline"}),(e.contentBgType==="classic"||!e.contentBgType)&&React.createElement(_,{label:n("Color","voxel-fse"),value:e.contentBg||"",onChange:a=>r({contentBg:a||""})}),React.createElement(X,{label:n("Border","voxel-fse"),value:{borderType:e.contentBorderType||"",borderWidth:e.contentBorderWidth||{},borderColor:e.contentBorderColor||""},onChange:a=>{const f={};a.borderType!==void 0&&(f.contentBorderType=a.borderType),a.borderWidth!==void 0&&(f.contentBorderWidth=a.borderWidth),a.borderColor!==void 0&&(f.contentBorderColor=a.borderColor),r(f)},hideRadius:!0}),React.createElement(z,{label:n("Border Radius","voxel-fse"),values:e.contentBorderRadius?.desktop||{},onChange:a=>r({contentBorderRadius:{...e.contentBorderRadius,desktop:a}})}),React.createElement(z,{label:n("Padding","voxel-fse"),values:e.contentPadding?.desktop||{},onChange:a=>r({contentPadding:{...e.contentPadding,desktop:a}})})))}function ie(e,r){const d=[],a=[],f=[],t=`.vxfse-nested-accordion-${r}`;e.itemSpacing_tablet!==void 0&&a.push(`${t} { --n-accordion-item-title-space-between: ${e.itemSpacing_tablet}px; }`),e.itemSpacing_mobile!==void 0&&f.push(`${t} { --n-accordion-item-title-space-between: ${e.itemSpacing_mobile}px; }`),e.contentDistance_tablet!==void 0&&a.push(`${t} { --n-accordion-item-title-distance-from-content: ${e.contentDistance_tablet}px; }`),e.contentDistance_mobile!==void 0&&f.push(`${t} { --n-accordion-item-title-distance-from-content: ${e.contentDistance_mobile}px; }`);const p={start:"initial",center:"center",end:"flex-end",stretch:"space-between"};if(e.itemPosition?.tablet){const c=e.itemPosition.tablet;a.push(`${t} .e-n-accordion-item-title { justify-content: ${p[c]}; }`),c==="stretch"&&a.push(`${t} .e-n-accordion-item-title .e-n-accordion-item-title-text { flex-grow: 1; }`)}if(e.itemPosition?.mobile){const c=e.itemPosition.mobile;f.push(`${t} .e-n-accordion-item-title { justify-content: ${p[c]}; }`),c==="stretch"&&f.push(`${t} .e-n-accordion-item-title .e-n-accordion-item-title-text { flex-grow: 1; }`)}e.iconPosition?.tablet&&(e.iconPosition.tablet==="start"?a.push(`${t} .e-n-accordion-item-title-icon { order: -1; }`):a.push(`${t} .e-n-accordion-item-title-icon { order: initial; }`)),e.iconPosition?.mobile&&(e.iconPosition.mobile==="start"?f.push(`${t} .e-n-accordion-item-title-icon { order: -1; }`):f.push(`${t} .e-n-accordion-item-title-icon { order: initial; }`)),e.iconSize_tablet!==void 0&&a.push(`${t} .e-n-accordion-item-title-icon i { font-size: ${e.iconSize_tablet}px; }`),e.iconSize_mobile!==void 0&&f.push(`${t} .e-n-accordion-item-title-icon i { font-size: ${e.iconSize_mobile}px; }`),e.iconSpacing_tablet!==void 0&&a.push(`${t} .e-n-accordion-item-title-icon { margin: 0 ${e.iconSpacing_tablet}px; }`),e.iconSpacing_mobile!==void 0&&f.push(`${t} .e-n-accordion-item-title-icon { margin: 0 ${e.iconSpacing_mobile}px; }`);let o="";return d.length>0&&(o+=d.join(`
`)+`
`),a.length>0&&(o+=`
@media (max-width: 1024px) {
${a.join(`
`)}
}
`),f.length>0&&(o+=`
@media (max-width: 767px) {
${f.join(`
`)}
}
`),o}function ae(e,r){const d=[],a=[],f=[],t=`.vxfse-nested-accordion[data-block-id="${r}"]`;if(e.accordionNormalBg&&d.push(`${t} .e-n-accordion-item-title { background-color: ${e.accordionNormalBg}; }`),e.accordionNormalBorderType&&e.accordionNormalBorderType!=="none"){const o=e.accordionNormalBorderWidth||{},c=parseFloat(String(o.top))||0,l=parseFloat(String(o.right))||0,s=parseFloat(String(o.bottom))||0,m=parseFloat(String(o.left))||0,x=e.accordionNormalBorderColor||"#d5d8dc";d.push(`${t} .e-n-accordion-item-title { border-style: ${e.accordionNormalBorderType}; border-width: ${c}px ${l}px ${s}px ${m}px; border-color: ${x}; }`)}if(e.accordionHoverBg&&d.push(`${t} .e-n-accordion-item:not([open]):hover > .e-n-accordion-item-title { background-color: ${e.accordionHoverBg}; }`),e.accordionHoverBorderType&&e.accordionHoverBorderType!=="none"){const o=e.accordionHoverBorderWidth||{},c=parseFloat(String(o.top))||0,l=parseFloat(String(o.right))||0,s=parseFloat(String(o.bottom))||0,m=parseFloat(String(o.left))||0,x=e.accordionHoverBorderColor||"#d5d8dc";d.push(`${t} .e-n-accordion-item:not([open]):hover > .e-n-accordion-item-title { border-style: ${e.accordionHoverBorderType}; border-width: ${c}px ${l}px ${s}px ${m}px; border-color: ${x}; }`)}if(e.accordionActiveBg&&d.push(`${t} .e-n-accordion-item[open] > .e-n-accordion-item-title { background-color: ${e.accordionActiveBg}; }`),e.accordionActiveBorderType&&e.accordionActiveBorderType!=="none"){const o=e.accordionActiveBorderWidth||{},c=parseFloat(String(o.top))||0,l=parseFloat(String(o.right))||0,s=parseFloat(String(o.bottom))||0,m=parseFloat(String(o.left))||0,x=e.accordionActiveBorderColor||"#d5d8dc";d.push(`${t} .e-n-accordion-item[open] > .e-n-accordion-item-title { border-style: ${e.accordionActiveBorderType}; border-width: ${c}px ${l}px ${s}px ${m}px; border-color: ${x}; }`)}if(e.accordionBorderRadius?.desktop){const o=e.accordionBorderRadius.desktop,c=o.top||"0px",l=o.right||"0px",s=o.bottom||"0px",m=o.left||"0px";d.push(`${t} .e-n-accordion-item-title { border-radius: ${c} ${l} ${s} ${m}; }`)}if(e.accordionBorderRadius?.tablet){const o=e.accordionBorderRadius.tablet,c=o.top||"0px",l=o.right||"0px",s=o.bottom||"0px",m=o.left||"0px";a.push(`${t} .e-n-accordion-item-title { border-radius: ${c} ${l} ${s} ${m}; }`)}if(e.accordionBorderRadius?.mobile){const o=e.accordionBorderRadius.mobile,c=o.top||"0px",l=o.right||"0px",s=o.bottom||"0px",m=o.left||"0px";f.push(`${t} .e-n-accordion-item-title { border-radius: ${c} ${l} ${s} ${m}; }`)}if(e.accordionPadding?.desktop){const o=e.accordionPadding.desktop,c=o.top||"10px",l=o.right||"10px",s=o.bottom||"10px",m=o.left||"10px";d.push(`${t} .e-n-accordion-item-title { padding: ${c} ${l} ${s} ${m}; }`)}if(e.accordionPadding?.tablet){const o=e.accordionPadding.tablet,c=o.top||"10px",l=o.right||"10px",s=o.bottom||"10px",m=o.left||"10px";a.push(`${t} .e-n-accordion-item-title { padding: ${c} ${l} ${s} ${m}; }`)}if(e.accordionPadding?.mobile){const o=e.accordionPadding.mobile,c=o.top||"10px",l=o.right||"10px",s=o.bottom||"10px",m=o.left||"10px";f.push(`${t} .e-n-accordion-item-title { padding: ${c} ${l} ${s} ${m}; }`)}if(e.titleTypography){const o=e.titleTypography;let c="";o.fontFamily&&(c+=`font-family: ${o.fontFamily}; `),o.fontSize&&(c+=`font-size: ${o.fontSize}${o.fontSizeUnit||"px"}; `),o.fontWeight&&(c+=`font-weight: ${o.fontWeight}; `),o.fontStyle&&(c+=`font-style: ${o.fontStyle}; `),o.textTransform&&(c+=`text-transform: ${o.textTransform}; `),o.textDecoration&&(c+=`text-decoration: ${o.textDecoration}; `),o.lineHeight&&(c+=`line-height: ${o.lineHeight}${o.lineHeightUnit||""}; `),o.letterSpacing&&(c+=`letter-spacing: ${o.letterSpacing}${o.letterSpacingUnit||"px"}; `),c&&d.push(`${t} .e-n-accordion-item-title-text { ${c} }`)}if(["Normal","Hover","Active"].forEach(o=>{const c=`title${o}TextShadow`,l=e[c];if(l&&l.horizontal!==void 0){const s=l.horizontal||0,m=l.vertical||0,x=l.blur||0,$=l.color||"rgba(0,0,0,0.3)",v=`text-shadow: ${s}px ${m}px ${x}px ${$};`;o==="Normal"?d.push(`${t} .e-n-accordion-item-title-text { ${v} }`):o==="Hover"?d.push(`${t} .e-n-accordion-item:not([open]):hover > .e-n-accordion-item-title .e-n-accordion-item-title-text { ${v} }`):o==="Active"&&d.push(`${t} .e-n-accordion-item[open] > .e-n-accordion-item-title .e-n-accordion-item-title-text { ${v} }`)}}),["Normal","Hover","Active"].forEach(o=>{const c=`title${o}TextStroke`,l=e[c];if(l&&l.width!==void 0&&l.color){const s=l.width||0,m=l.color||"#000",x=`-webkit-text-stroke-width: ${s}px; -webkit-text-stroke-color: ${m};`;o==="Normal"?d.push(`${t} .e-n-accordion-item-title-text { ${x} }`):o==="Hover"?d.push(`${t} .e-n-accordion-item:not([open]):hover > .e-n-accordion-item-title .e-n-accordion-item-title-text { ${x} }`):o==="Active"&&d.push(`${t} .e-n-accordion-item[open] > .e-n-accordion-item-title .e-n-accordion-item-title-text { ${x} }`)}}),e.contentBg&&d.push(`${t} .e-n-accordion-item-content { background-color: ${e.contentBg}; }`),e.contentBorderType&&e.contentBorderType!=="none"){const o=e.contentBorderWidth||{},c=parseFloat(String(o.top))||0,l=parseFloat(String(o.right))||0,s=parseFloat(String(o.bottom))||0,m=parseFloat(String(o.left))||0,x=e.contentBorderColor||"#d5d8dc";d.push(`${t} .e-n-accordion-item-content { border-style: ${e.contentBorderType}; border-width: ${c}px ${l}px ${s}px ${m}px; border-color: ${x}; }`)}if(e.contentBorderRadius?.desktop){const o=e.contentBorderRadius.desktop,c=o.top||"0px",l=o.right||"0px",s=o.bottom||"0px",m=o.left||"0px";d.push(`${t} .e-n-accordion-item-content { border-radius: ${c} ${l} ${s} ${m}; }`)}if(e.contentBorderRadius?.tablet){const o=e.contentBorderRadius.tablet,c=o.top||"0px",l=o.right||"0px",s=o.bottom||"0px",m=o.left||"0px";a.push(`${t} .e-n-accordion-item-content { border-radius: ${c} ${l} ${s} ${m}; }`)}if(e.contentBorderRadius?.mobile){const o=e.contentBorderRadius.mobile,c=o.top||"0px",l=o.right||"0px",s=o.bottom||"0px",m=o.left||"0px";f.push(`${t} .e-n-accordion-item-content { border-radius: ${c} ${l} ${s} ${m}; }`)}if(e.contentPadding?.desktop){const o=e.contentPadding.desktop,c=o.top||"0",l=o.right||"0",s=o.bottom||"0",m=o.left||"0";d.push(`${t} .e-n-accordion-item-content { padding: ${c} ${l} ${s} ${m}; }`)}if(e.contentPadding?.tablet){const o=e.contentPadding.tablet,c=o.top||"0",l=o.right||"0",s=o.bottom||"0",m=o.left||"0";a.push(`${t} .e-n-accordion-item-content { padding: ${c} ${l} ${s} ${m}; }`)}if(e.contentPadding?.mobile){const o=e.contentPadding.mobile,c=o.top||"0",l=o.right||"0",s=o.bottom||"0",m=o.left||"0";f.push(`${t} .e-n-accordion-item-content { padding: ${c} ${l} ${s} ${m}; }`)}let p="";return d.length>0&&(p+=d.join(`
`)),a.length>0&&(p+=`
@media (max-width: 1024px) {
${a.join(`
`)}
}`),f.length>0&&(p+=`
@media (max-width: 767px) {
${f.join(`
`)}
}`),p}const L=window.wp?.blocks?.createBlock,ee=window.wp?.blockEditor?.BlockListBlock,oe="core/block-editor",Le=()=>"item_"+Math.random().toString(36).substr(2,9);function We({attributes:e,setAttributes:r,clientId:d}){const a=e.blockId||d,f=ne({className:`vxfse-nested-accordion vxfse-nested-accordion-${a}`}),[t,p]=N(()=>e.defaultState==="expanded"?new Set([0]):new Set),[o,c]=N(!1),[l,s]=N(null),[m,x]=N(!1),[$,v]=N(null),{innerBlocks:u,hasInnerBlocks:B}=$e(i=>{const{getBlocks:h}=i(oe),g=h(d);return{innerBlocks:g,hasInnerBlocks:g.length>0}},[d]),{replaceInnerBlocks:R,selectBlock:P}=Se(oe);M(()=>{e.blockId||r({blockId:d})},[e.blockId,d,r]),M(()=>{if(!B&&e.items.length>0){const i=e.items.map(h=>L("core/group",{className:"vxfse-accordion-content",metadata:{name:h.title}},[L("core/paragraph",{placeholder:n("Add content for this accordion item...","voxel-fse")})]));R(d,i,!1)}},[B,e.items,d,R]);const q=w((i,h)=>{const g=[...e.items];g[i]={...g[i],...h},r({items:g})},[e.items,r]),D=w(i=>{p(h=>{const g=new Set(h);return e.maxItemsExpanded==="one"?g.has(i)?g.delete(i):(g.clear(),g.add(i)):g.has(i)?g.delete(i):g.add(i),g}),u[i]&&P(u[i].clientId)},[e.maxItemsExpanded,u,P]),k=e.titleTag,E=w(i=>{const h=e.items.length,g=i.length;if(r({items:i}),g>h){const S=L("core/group",{className:"vxfse-accordion-content",metadata:{name:i[g-1].title}},[L("core/paragraph",{placeholder:n("Add content for this accordion item...","voxel-fse")})]);R(d,[...u,S],!1)}else if(g<h){const S=e.items.map(T=>T.id),y=i.map(T=>T.id),I=S.findIndex(T=>!y.includes(T));if(I!==-1){const T=u.filter((no,he)=>he!==I);R(d,T,!1)}}},[e.items,r,d,u,R]),b=w(({item:i,index:h,onUpdate:g})=>{const S=(i.visibility?.rules?.flat()||[]).map((y,I)=>({id:`rule_${I}`,filterKey:y.type||"",operator:y.operator||"equals",value:typeof y.value=="string"?y.value:""}));return React.createElement(React.Fragment,null,React.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"}},React.createElement(Y,{onClick:()=>{console.log("Enable tags for title")}}),React.createElement("span",{style:{fontWeight:500}},n("Title","voxel-fse"))),React.createElement(U,{value:i.title,onChange:y=>g({title:y}),placeholder:n("Item Title","voxel-fse"),__nextHasNoMarginBottom:!0}),React.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",marginTop:"16px"}},React.createElement(Y,{onClick:()=>{console.log("Enable tags for CSS ID")}}),React.createElement("span",{style:{fontWeight:500}},n("CSS ID","voxel-fse"))),React.createElement(U,{value:i.cssId,onChange:y=>g({cssId:y}),placeholder:n("custom-id","voxel-fse"),help:n("Add your custom id WITHOUT the # prefix","voxel-fse"),__nextHasNoMarginBottom:!0}),React.createElement(be,{showLoopSection:!0,loopSource:i.loop?.source?.split("(")[0]?.replace("@","")||"",loopProperty:i.loop?.source?.match(/\(([^)]+)\)/)?.[1]||"",loopLimit:i.loop?.limit?.toString()||"",loopOffset:i.loop?.offset?.toString()||"",onEditLoop:()=>{s(h),c(!0)},onClearLoop:()=>{g({loop:void 0})},onLoopLimitChange:y=>{const I={source:i.loop?.source||"",limit:y?parseInt(y,10):void 0,offset:i.loop?.offset};g({loop:I})},onLoopOffsetChange:y=>{const I={source:i.loop?.source||"",limit:i.loop?.limit,offset:y?parseInt(y,10):void 0};g({loop:I})},rowVisibility:i.visibility?.behavior||"show",visibilityRules:S,onRowVisibilityChange:y=>{g({visibility:{behavior:y,rules:i.visibility?.rules||[]}})},onEditVisibilityRules:()=>{v(h),x(!0)},onClearVisibilityRules:()=>{g({visibility:void 0})}}))},[s,c,v,x]),re=React.createElement(Te,{label:n("Items","voxel-fse"),items:e.items,onChange:E,getItemLabel:i=>i.title||n("Item","voxel-fse"),renderContent:b,createItem:()=>({id:Le(),title:`Item #${e.items.length+1}`,cssId:"",loop:void 0,visibility:void 0}),addButtonText:n("Add Item","voxel-fse"),showClone:!0,showDelete:!0,minItems:1}),de=w(i=>{if(l!==null){const h=[...e.items],g=i.loopProperty?`@${i.loopSource}(${i.loopProperty})`:`@${i.loopSource}`;h[l]={...h[l],loop:{source:g,limit:i.loopLimit?parseInt(i.loopLimit,10):void 0,offset:i.loopOffset?parseInt(i.loopOffset,10):void 0}},r({items:h})}c(!1),s(null)},[l,e.items,r]),se=l!==null&&e.items[l]?.loop?{loopSource:e.items[l].loop?.source?.split("(")[0]?.replace("@","")||"",loopProperty:e.items[l].loop?.source?.match(/\(([^)]+)\)/)?.[1]||"",loopLimit:e.items[l].loop?.limit?.toString()||"",loopOffset:e.items[l].loop?.offset?.toString()||""}:{loopSource:"",loopProperty:"",loopLimit:"",loopOffset:""},pe=w(i=>{if($!==null){const h=[...e.items],g=i.map(S=>[{type:S.filterKey,value:S.value,operator:S.operator}]);h[$]={...h[$],visibility:{behavior:h[$].visibility?.behavior||"show",rules:g}},r({items:h})}x(!1),v(null)},[$,e.items,r]),me=$!==null&&e.items[$]?.visibility?.rules?e.items[$].visibility.rules.flat().map((i,h)=>({id:`rule_${h}`,filterKey:i.type||"",operator:i.operator||"equals",value:typeof i.value=="string"?i.value:""})):[],fe=ie(e,a),ge=ae(e,a),A=[fe,ge].filter(Boolean).join(`
`);return React.createElement(React.Fragment,null,React.createElement("div",{...f},React.createElement(xe,null,React.createElement(Ie,{tabs:[{id:"content",label:n("Content","voxel-fse"),icon:"",render:()=>React.createElement(je,{attributes:e,setAttributes:r,itemsRepeater:re})},{id:"style",label:n("Style","voxel-fse"),icon:"",render:()=>React.createElement(ze,{attributes:e,setAttributes:r,clientId:d})}],includeAdvancedTab:!0,includeVoxelTab:!0,attributes:e,setAttributes:r})),A&&React.createElement("style",{dangerouslySetInnerHTML:{__html:A}}),React.createElement("div",{className:"e-n-accordion","aria-label":n("Accordion. Open links with Enter or Space, close with Escape, and navigate with Arrow Keys","voxel-fse"),style:{"--n-accordion-item-title-space-between":`${e.itemSpacing??0}px`,"--n-accordion-padding":e.accordionPadding?.desktop?`${e.accordionPadding.desktop.top||"10px"} ${e.accordionPadding.desktop.right||"10px"} ${e.accordionPadding.desktop.bottom||"10px"} ${e.accordionPadding.desktop.left||"10px"}`:"10px","--n-accordion-title-normal-color":e.titleNormalColor||"#1f2124","--n-accordion-icon-size":`${e.iconSize??15}px`}},e.items.map((i,h)=>{const g=t.has(h),S=i.cssId||`e-n-accordion-item-${e.blockId}-${h}`;return React.createElement("details",{key:i.id,id:S,className:"e-n-accordion-item",open:g},React.createElement("summary",{className:"e-n-accordion-item-title","data-accordion-index":h+1,tabIndex:0,"aria-expanded":g?"true":"false","aria-controls":`${S}-content`,onClick:y=>{if(y.target.closest('[contenteditable="true"]')){y.preventDefault();return}y.preventDefault(),D(h)}},React.createElement("span",{className:"e-n-accordion-item-title-header"},React.createElement(k,{className:"e-n-accordion-item-title-text"},React.createElement(ye,{tagName:"span",value:i.title,onChange:y=>q(h,{title:y}),placeholder:n("Item Title","voxel-fse"),allowedFormats:[]}))),(e.expandIcon?.value||e.collapseIcon?.value)&&React.createElement("span",{className:"e-n-accordion-item-title-icon"},React.createElement("span",{className:"e-opened"},React.createElement("i",{className:e.collapseIcon?.value||"fas fa-minus","aria-hidden":"true"})),React.createElement("span",{className:"e-closed"},React.createElement("i",{className:e.expandIcon?.value||"fas fa-plus","aria-hidden":"true"})))),React.createElement("div",{id:`${S}-content`,className:"e-n-accordion-item-content e-con",role:"region","aria-labelledby":S},u[h]&&ee&&React.createElement(ee,{key:u[h].clientId,clientId:u[h].clientId,rootClientId:d})))}))),o&&(()=>{const i=document.querySelector(".voxel-fse-tab-content");return i?J(React.createElement(ke,{isOpen:o,onClose:()=>{c(!1),s(null)},onSave:de,config:se}),i):null})(),m&&(()=>{const i=document.querySelector(".voxel-fse-tab-content");return i?J(React.createElement(Ee,{isOpen:m,onClose:()=>{x(!1),v(null)},onSave:pe,rules:me}),i):null})())}function Oe({attributes:e}){const r=e.blockId||"nested-accordion",d=Ne(e,{blockId:r,baseClass:"vxfse-nested-accordion"}),a=ne.save({id:d.elementId,className:d.className}),f={items:e.items.map(v=>({id:v.id,title:v.title,cssId:v.cssId,loop:v.loop,visibility:v.visibility})),interactions:{defaultState:e.defaultState,maxItemsExpanded:e.maxItemsExpanded,animationDuration:e.animationDuration.size*(e.animationDuration.unit==="ms"?1:1e3)},icons:{expand:e.expandIcon,collapse:e.collapseIcon,position:e.iconPosition.desktop||"end"},titleTag:e.titleTag,faqSchema:e.faqSchema},t={};if(e.itemSpacing&&(t["--n-accordion-item-title-space-between"]=`${e.itemSpacing}px`),e.contentDistance&&(t["--n-accordion-item-title-distance-from-content"]=`${e.contentDistance}px`),e.accordionPadding.desktop){const v=e.accordionPadding.desktop;t["--n-accordion-padding"]=`${v.top||"10px"} ${v.right||"10px"} ${v.bottom||"10px"} ${v.left||"10px"}`}if(e.accordionBorderRadius.desktop){const v=e.accordionBorderRadius.desktop;t["--n-accordion-border-radius"]=`${v.top||"0px"} ${v.right||"0px"} ${v.bottom||"0px"} ${v.left||"0px"}`}e.titleNormalColor&&(t["--n-accordion-title-normal-color"]=e.titleNormalColor),e.titleHoverColor&&(t["--n-accordion-title-hover-color"]=e.titleHoverColor),e.titleActiveColor&&(t["--n-accordion-title-active-color"]=e.titleActiveColor),e.iconSize&&(t["--n-accordion-icon-size"]=`${e.iconSize}px`),e.iconSpacing&&(t["--n-accordion-icon-gap"]=`0 ${e.iconSpacing}px`),e.iconNormalColor&&(t["--n-accordion-icon-normal-color"]=e.iconNormalColor),e.iconHoverColor&&(t["--n-accordion-icon-hover-color"]=e.iconHoverColor),e.iconActiveColor&&(t["--n-accordion-icon-active-color"]=e.iconActiveColor),e.iconPosition.desktop==="start"&&(t["--n-accordion-title-icon-order"]="-1");const p={start:"initial",center:"center",end:"flex-end",stretch:"space-between"},o=e.itemPosition.desktop||"start";t["--n-accordion-title-justify-content"]=p[o],o==="stretch"&&(t["--n-accordion-title-flex-grow"]="1"),e.accordionNormalBg&&(t["--n-accordion-bg-normal"]=e.accordionNormalBg),e.contentBg&&(t["--n-accordion-content-bg"]=e.contentBg);const c=e.titleTag,l=e.expandIcon?.value||e.collapseIcon?.value,s={...t,...d.styles||{}},m=ie(e,r),x=ae(e,r),$=[d.responsiveCSS,m,x].filter(Boolean).join(`
`);return React.createElement("div",{...a,"data-vxconfig":JSON.stringify(f),"data-block-id":e.blockId,style:s,"data-visibility-behavior":e.visibilityBehavior||void 0,"data-visibility-rules":e.visibilityRules?.length?JSON.stringify(e.visibilityRules):void 0,"data-loop-source":e.loopSource||void 0,"data-loop-limit":e.loopLimit||void 0,"data-loop-offset":e.loopOffset||void 0,...d.customAttrs},$&&React.createElement("style",{dangerouslySetInnerHTML:{__html:$}}),Pe(e,!1,void 0,void 0,d.uniqueSelector),React.createElement("div",{className:"e-n-accordion","aria-label":"Accordion. Open links with Enter or Space, close with Escape, and navigate with Arrow Keys"},e.items.map((v,u)=>{const B=e.defaultState==="expanded"&&u===0,R=v.cssId||`e-n-accordion-item-${e.blockId}-${u}`;return React.createElement("details",{key:v.id,id:R,className:"e-n-accordion-item",...B?{open:!0}:{}},React.createElement("summary",{className:"e-n-accordion-item-title",role:"button","data-accordion-index":u+1,tabIndex:u===0?0:-1,"aria-expanded":B?"true":"false","aria-controls":R},React.createElement("span",{className:"e-n-accordion-item-title-header"},React.createElement(c,{className:"e-n-accordion-item-title-text"},v.title)),l&&React.createElement("span",{className:"e-n-accordion-item-title-icon"},React.createElement("span",{className:"e-opened"},React.createElement("i",{className:e.collapseIcon?.value||"fas fa-minus","aria-hidden":"true"})),React.createElement("span",{className:"e-closed"},React.createElement("i",{className:e.expandIcon?.value||"fas fa-plus","aria-hidden":"true"})))),React.createElement("div",{className:"e-n-accordion-item-content e-con",role:"region","aria-labelledby":R}))})))}const Fe="https://schemas.wp.org/trunk/block.json",Me=3,Ve="voxel-fse/nested-accordion",qe="1.0.0",Ae="Accordion (VX)",Ke="voxel-fse",Ue="Collapsible accordion with nested content. FSE equivalent of Voxel's Nested Accordion widget.",Ge=["accordion","collapse","toggle","faq","nested","voxel"],Je="voxel-fse",Qe={html:!1,align:["wide","full"],anchor:!0,className:!0,customClassName:!0,color:{text:!1,background:!1}},Xe="file:./index.js",Ye="file:./editor.css",Ze="file:./frontend.js",eo="file:./render.php",oo="file:./style.css",to={blockId:{type:"string",default:""},contentTabOpenPanel:{type:"string",default:"layout"},styleTabOpenPanel:{type:"string",default:"accordion-style"},accordionState:{type:"string",default:"normal"},titleColorState:{type:"string",default:"normal"},iconColorState:{type:"string",default:"normal"},items:{type:"array",default:[{id:"item-1",title:"Item #1",cssId:""},{id:"item-2",title:"Item #2",cssId:""},{id:"item-3",title:"Item #3",cssId:""}]},itemPosition:{type:"object",default:{desktop:"start"}},titleTag:{type:"string",default:"div",enum:["h1","h2","h3","h4","h5","h6","div","span","p"]},faqSchema:{type:"boolean",default:!1},iconPosition:{type:"object",default:{desktop:"end"}},expandIcon:{type:"object",default:{library:"icon",value:"las la-plus"}},collapseIcon:{type:"object",default:{library:"icon",value:"las la-minus"}},defaultState:{type:"string",default:"expanded",enum:["expanded","all_collapsed"]},maxItemsExpanded:{type:"string",default:"one",enum:["one","multiple"]},animationDuration:{type:"object",default:{size:400,unit:"ms"}},itemSpacing:{type:"number",default:0},itemSpacing_tablet:{type:"number"},itemSpacing_mobile:{type:"number"},itemSpacingUnit:{type:"string",default:"px"},contentDistance:{type:"number",default:0},contentDistance_tablet:{type:"number"},contentDistance_mobile:{type:"number"},contentDistanceUnit:{type:"string",default:"px"},accordionBorderRadius:{type:"object",default:{}},accordionPadding:{type:"object",default:{desktop:{top:"10px",right:"10px",bottom:"10px",left:"10px"}}},accordionNormalBgType:{type:"string",default:"classic"},accordionNormalBg:{type:"string",default:""},accordionNormalBorderType:{type:"string",default:""},accordionNormalBorderWidth:{type:"object",default:{}},accordionNormalBorderColor:{type:"string",default:""},accordionHoverBgType:{type:"string",default:"classic"},accordionHoverBg:{type:"string",default:""},accordionHoverBorderType:{type:"string",default:""},accordionHoverBorderWidth:{type:"object",default:{}},accordionHoverBorderColor:{type:"string",default:""},accordionActiveBgType:{type:"string",default:"classic"},accordionActiveBg:{type:"string",default:""},accordionActiveBorderType:{type:"string",default:""},accordionActiveBorderWidth:{type:"object",default:{}},accordionActiveBorderColor:{type:"string",default:""},titleTypography:{type:"object",default:{}},titleNormalColor:{type:"string",default:"#1f2124"},titleHoverColor:{type:"string",default:""},titleActiveColor:{type:"string",default:""},titleNormalTextShadow:{type:"object",default:{}},titleHoverTextShadow:{type:"object",default:{}},titleActiveTextShadow:{type:"object",default:{}},titleNormalTextStroke:{type:"object",default:{}},titleHoverTextStroke:{type:"object",default:{}},titleActiveTextStroke:{type:"object",default:{}},iconSize:{type:"number",default:15},iconSize_tablet:{type:"number"},iconSize_mobile:{type:"number"},iconSpacing:{type:"number",default:10},iconSpacing_tablet:{type:"number"},iconSpacing_mobile:{type:"number"},iconNormalColor:{type:"string",default:""},iconHoverColor:{type:"string",default:""},iconActiveColor:{type:"string",default:""},contentBgType:{type:"string",default:"classic"},contentBg:{type:"string",default:""},contentBorderType:{type:"string",default:""},contentBorderWidth:{type:"object",default:{}},contentBorderColor:{type:"string",default:""},contentBorderRadius:{type:"object",default:{}},contentPadding:{type:"object",default:{}},hideDesktop:{type:"boolean",default:!1},hideTablet:{type:"boolean",default:!1},hideMobile:{type:"boolean",default:!1},_comment_voxel_tab:"VoxelTab attributes for visibility and loop features",visibilityBehavior:{type:"string",default:"show",enum:["show","hide"]},visibilityRules:{type:"array",default:[],items:{type:"object"}},loopEnabled:{type:"boolean",default:!1},loopSource:{type:"string",default:""},loopProperty:{type:"string",default:""},loopLimit:{type:"string",default:""},loopOffset:{type:"string",default:""}},te={$schema:Fe,apiVersion:Me,name:Ve,version:qe,title:Ae,category:Ke,description:Ue,keywords:Ge,textdomain:Je,supports:Qe,editorScript:Xe,editorStyle:Ye,viewScript:Ze,render:eo,style:oo,attributes:to};ve(te.name,{...te,icon:_e,edit:We,save:Oe,example:{attributes:{items:[{id:"example-1",title:n("What is this?","voxel-fse"),cssId:""},{id:"example-2",title:n("How does it work?","voxel-fse"),cssId:""},{id:"example-3",title:n("Learn more","voxel-fse"),cssId:""}],defaultState:"expanded",faqSchema:!0}}});
