import{registerBlockType as he}from"@wordpress/blocks";import L,{useMemo as te,useRef as N,useState as ge,useEffect as F,useCallback as ve}from"react";import{__ as a}from"@wordpress/i18n";import{useBlockProps as re,InspectorControls as fe}from"@wordpress/block-editor";import{TextControl as V,SelectControl as q,ToggleControl as oe,RangeControl as J}from"@wordpress/components";import{useSelect as xe}from"@wordpress/data";import{A as ae,a as z,R as _,C as k,c as O,T as K,S as D,B as ue,p as ke,n as Ce}from"../TypographyPopup-CAcEJ5NA.js";import{I as ye,V as _e,v as Be}from"../InspectorTabs-Bq2wAh4W.js";import"../RepeaterControl-C7JnAhZL.js";import"@wordpress/api-fetch";/* empty css                            */import{E as Me}from"../EmptyPlaceholder-BsL18qxN.js";import{R as $e}from"../RelationControl-D8hRYr3b.js";import"../voxelShim-DB_Ue-9R.js";import{g as le}from"../useAdvancedTabProps-BnJDQbKr.js";import{r as be}from"../backgroundElements-Ui-iCrLV.js";import{I as X}from"../IconPickerControl-Lep6knGI.js";import"react-dom";import"../generateAdvancedStyles-CRpLcHXt.js";import"../generateVoxelStyles-oZeaeuKH.js";const Se=({label:e,values:n,onChange:t,placeholder:r="0px"})=>{const s=(o,v)=>{t({...n,[o]:v})};return L.createElement("div",{className:"voxel-fse-box-control"},L.createElement("label",{className:"components-base-control__label"},e),L.createElement("div",{className:"voxel-fse-box-control__grid"},L.createElement(V,{label:a("Top","voxel-fse"),value:n?.top||"",onChange:o=>s("top",o),placeholder:r}),L.createElement(V,{label:a("Right","voxel-fse"),value:n?.right||"",onChange:o=>s("right",o),placeholder:r}),L.createElement(V,{label:a("Bottom","voxel-fse"),value:n?.bottom||"",onChange:o=>s("bottom",o),placeholder:r}),L.createElement(V,{label:a("Left","voxel-fse"),value:n?.left||"",onChange:o=>s("left",o),placeholder:r})))},Re="https://schemas.wp.org/trunk/block.json",we=3,Ie="voxel-fse/map",ze="1.0.0",Ee="Map (VX)",Te="voxel-fse",Pe="Interactive map displaying markers from search results or current post location.",Ae=["map","location","markers","google maps","mapbox","voxel"],Le="voxel-fse",Ne={html:!1,align:["wide","full"],anchor:!0,className:!0,customClassName:!0},He="file:./index.js",Ve="file:./frontend.js",Ze="file:./render.php",je={blockId:{type:"string",default:""},source:{type:"string",default:"search-form",enum:["search-form","current-post"]},searchFormId:{type:"string",default:""},dragSearch:{type:"boolean",default:!0},dragSearchMode:{type:"string",default:"manual",enum:["automatic","manual"]},dragSearchDefault:{type:"string",default:"unchecked",enum:["checked","unchecked"]},height:{type:"number",default:400},height_tablet:{type:"number"},height_mobile:{type:"number"},heightUnit:{type:"string",default:"px"},enableCalcHeight:{type:"boolean",default:!1},enableCalcHeight_tablet:{type:"boolean"},enableCalcHeight_mobile:{type:"boolean"},calcHeight:{type:"string",default:""},calcHeight_tablet:{type:"string"},calcHeight_mobile:{type:"string"},mapBorderRadius:{type:"number",default:0},mapBorderRadius_tablet:{type:"number"},mapBorderRadius_mobile:{type:"number"},defaultLat:{type:"number",default:51.492},defaultLng:{type:"number",default:-.13},defaultZoom:{type:"number",default:11},minZoom:{type:"number",default:2},maxZoom:{type:"number",default:18},clusterSize:{type:"number"},clusterSize_tablet:{type:"number"},clusterSize_mobile:{type:"number"},clusterBgColor:{type:"string"},clusterBgColor_tablet:{type:"string"},clusterBgColor_mobile:{type:"string"},clusterShadow:{type:"object",default:{}},clusterRadius:{type:"number"},clusterRadius_tablet:{type:"number"},clusterRadius_mobile:{type:"number"},clusterTypography:{type:"object",default:{}},clusterTextColor:{type:"string"},clusterTextColor_tablet:{type:"string"},clusterTextColor_mobile:{type:"string"},iconMarkerSize:{type:"number"},iconMarkerSize_tablet:{type:"number"},iconMarkerSize_mobile:{type:"number"},iconMarkerIconSize:{type:"number"},iconMarkerIconSize_tablet:{type:"number"},iconMarkerIconSize_mobile:{type:"number"},iconMarkerRadius:{type:"number"},iconMarkerRadius_tablet:{type:"number"},iconMarkerRadius_mobile:{type:"number"},iconMarkerShadow:{type:"object",default:{}},iconMarkerStaticBg:{type:"string"},iconMarkerStaticBg_tablet:{type:"string"},iconMarkerStaticBg_mobile:{type:"string"},iconMarkerStaticBgActive:{type:"string"},iconMarkerStaticBgActive_tablet:{type:"string"},iconMarkerStaticBgActive_mobile:{type:"string"},iconMarkerStaticIconColor:{type:"string"},iconMarkerStaticIconColor_tablet:{type:"string"},iconMarkerStaticIconColor_mobile:{type:"string"},iconMarkerStaticIconColorActive:{type:"string"},iconMarkerStaticIconColorActive_tablet:{type:"string"},iconMarkerStaticIconColorActive_mobile:{type:"string"},textMarkerBgColor:{type:"string"},textMarkerBgColor_tablet:{type:"string"},textMarkerBgColor_mobile:{type:"string"},textMarkerBgColorActive:{type:"string"},textMarkerBgColorActive_tablet:{type:"string"},textMarkerBgColorActive_mobile:{type:"string"},textMarkerTextColor:{type:"string"},textMarkerTextColor_tablet:{type:"string"},textMarkerTextColor_mobile:{type:"string"},textMarkerTextColorActive:{type:"string"},textMarkerTextColorActive_tablet:{type:"string"},textMarkerTextColorActive_mobile:{type:"string"},textMarkerRadius:{type:"number"},textMarkerRadius_tablet:{type:"number"},textMarkerRadius_mobile:{type:"number"},textMarkerTypography:{type:"object",default:{}},textMarkerPadding:{type:"object",default:{}},textMarkerPadding_tablet:{type:"object"},textMarkerPadding_mobile:{type:"object"},textMarkerShadow:{type:"object",default:{}},imageMarkerSize:{type:"number"},imageMarkerSize_tablet:{type:"number"},imageMarkerSize_mobile:{type:"number"},imageMarkerRadius:{type:"number"},imageMarkerRadius_tablet:{type:"number"},imageMarkerRadius_mobile:{type:"number"},imageMarkerShadow:{type:"object",default:{}},popupCardWidth:{type:"number",default:270},popupCardWidth_tablet:{type:"number"},popupCardWidth_mobile:{type:"number"},popupLoaderColor1:{type:"string"},popupLoaderColor2:{type:"string"},searchBtnTypography:{type:"object",default:{}},searchBtnTextColor:{type:"string"},searchBtnTextColor_tablet:{type:"string"},searchBtnTextColor_mobile:{type:"string"},searchBtnBgColor:{type:"string"},searchBtnBgColor_tablet:{type:"string"},searchBtnBgColor_mobile:{type:"string"},searchBtnIconColor:{type:"string"},searchBtnIconColor_tablet:{type:"string"},searchBtnIconColor_mobile:{type:"string"},searchBtnIconColorActive:{type:"string"},searchBtnIconColorActive_tablet:{type:"string"},searchBtnIconColorActive_mobile:{type:"string"},searchBtnRadius:{type:"number"},searchBtnRadius_tablet:{type:"number"},searchBtnRadius_mobile:{type:"number"},checkmarkIcon:{type:"object",default:{}},searchIcon:{type:"object",default:{}},geolocationIcon:{type:"object",default:{}},navBtnIconColor:{type:"string"},navBtnIconSize:{type:"number"},navBtnIconSize_tablet:{type:"number"},navBtnIconSize_mobile:{type:"number"},navBtnBgColor:{type:"string"},navBtnBorder:{type:"object",default:{borderType:"none",borderWidth:{},borderColor:""}},navBtnRadius:{type:"number",default:50},navBtnRadius_tablet:{type:"number"},navBtnRadius_mobile:{type:"number"},navBtnShadow:{type:"object",default:{}},navBtnSize:{type:"number"},navBtnSize_tablet:{type:"number"},navBtnSize_mobile:{type:"number"},navBtnIconColorHover:{type:"string"},navBtnBgColorHover:{type:"string"},navBtnBorderColorHover:{type:"string"},mapContentAccordion:{type:"string",default:"map-settings"},mapStyleAccordion:{type:"string",default:"clusters"},_comment_voxel_tab:"VoxelTab attributes for visibility and loop features",visibilityBehavior:{type:"string",default:"show",enum:["show","hide"]},visibilityRules:{type:"array",default:[],items:{type:"object"}},loopEnabled:{type:"boolean",default:!1},loopSource:{type:"string",default:""},loopProperty:{type:"string",default:""},loopLimit:{type:"string",default:""},loopOffset:{type:"string",default:""}},Q={$schema:Re,apiVersion:we,name:Ie,version:ze,title:Ee,category:Te,description:Pe,keywords:Ae,textdomain:Le,supports:Ne,editorScript:He,viewScript:Ve,render:Ze,attributes:je};function ie(e){return{blockId:e.blockId,source:e.source,searchFormId:e.searchFormId,dragSearch:e.dragSearch,dragSearchMode:e.dragSearchMode,dragSearchDefault:e.dragSearchDefault,center:{lat:e.defaultLat,lng:e.defaultLng},zoom:e.defaultZoom,minZoom:e.minZoom,maxZoom:e.maxZoom,styles:{height:{desktop:e.height,tablet:e.height_tablet,mobile:e.height_mobile},heightUnit:e.heightUnit,calcHeight:{desktop:e.calcHeight,tablet:e.calcHeight_tablet,mobile:e.calcHeight_mobile},enableCalcHeight:{desktop:e.enableCalcHeight,tablet:e.enableCalcHeight_tablet,mobile:e.enableCalcHeight_mobile},borderRadius:{desktop:e.mapBorderRadius,tablet:e.mapBorderRadius_tablet,mobile:e.mapBorderRadius_mobile},cluster:{size:{desktop:e.clusterSize,tablet:e.clusterSize_tablet,mobile:e.clusterSize_mobile},bgColor:{desktop:e.clusterBgColor,tablet:e.clusterBgColor_tablet,mobile:e.clusterBgColor_mobile},shadow:e.clusterShadow,radius:{desktop:e.clusterRadius,tablet:e.clusterRadius_tablet,mobile:e.clusterRadius_mobile},typography:e.clusterTypography,textColor:{desktop:e.clusterTextColor,tablet:e.clusterTextColor_tablet,mobile:e.clusterTextColor_mobile}},iconMarker:{size:{desktop:e.iconMarkerSize,tablet:e.iconMarkerSize_tablet,mobile:e.iconMarkerSize_mobile},iconSize:{desktop:e.iconMarkerIconSize,tablet:e.iconMarkerIconSize_tablet,mobile:e.iconMarkerSize_mobile},radius:{desktop:e.iconMarkerRadius,tablet:e.iconMarkerRadius_tablet,mobile:e.iconMarkerRadius_mobile},shadow:e.iconMarkerShadow,staticBg:{desktop:e.iconMarkerStaticBg,tablet:e.iconMarkerStaticBg_tablet,mobile:e.iconMarkerStaticBg_mobile},staticBgActive:{desktop:e.iconMarkerStaticBgActive,tablet:e.iconMarkerStaticBgActive_tablet,mobile:e.iconMarkerStaticBgActive_mobile},staticIconColor:{desktop:e.iconMarkerStaticIconColor,tablet:e.iconMarkerStaticIconColor_tablet,mobile:e.iconMarkerStaticIconColor_mobile},staticIconColorActive:{desktop:e.iconMarkerStaticIconColorActive,tablet:e.iconMarkerStaticIconColorActive_tablet,mobile:e.iconMarkerStaticIconColorActive_mobile}},textMarker:{bgColor:{desktop:e.textMarkerBgColor,tablet:e.textMarkerBgColor_tablet,mobile:e.textMarkerBgColor_mobile},bgColorActive:{desktop:e.textMarkerBgColorActive,tablet:e.textMarkerBgColorActive_tablet,mobile:e.textMarkerBgColorActive_mobile},textColor:{desktop:e.textMarkerTextColor,tablet:e.textMarkerTextColor_tablet,mobile:e.textMarkerTextColor_mobile},textColorActive:{desktop:e.textMarkerTextColorActive,tablet:e.textMarkerTextColorActive_tablet,mobile:e.textMarkerTextColorActive_mobile},radius:{desktop:e.textMarkerRadius,tablet:e.textMarkerRadius_tablet,mobile:e.textMarkerRadius_mobile},typography:e.textMarkerTypography,padding:{desktop:e.textMarkerPadding,tablet:e.textMarkerPadding_tablet,mobile:e.textMarkerPadding_mobile},shadow:e.textMarkerShadow},imageMarker:{size:{desktop:e.imageMarkerSize,tablet:e.imageMarkerSize_tablet,mobile:e.imageMarkerSize_mobile},radius:{desktop:e.imageMarkerRadius,tablet:e.imageMarkerRadius_tablet,mobile:e.imageMarkerRadius_mobile},shadow:e.imageMarkerShadow},popup:{cardWidth:{desktop:e.popupCardWidth,tablet:e.popupCardWidth_tablet,mobile:e.popupCardWidth_mobile},loaderColor1:e.popupLoaderColor1,loaderColor2:e.popupLoaderColor2},searchBtn:{typography:e.searchBtnTypography,textColor:{desktop:e.searchBtnTextColor,tablet:e.searchBtnTextColor_tablet,mobile:e.searchBtnTextColor_mobile},bgColor:{desktop:e.searchBtnBgColor,tablet:e.searchBtnBgColor_tablet,mobile:e.searchBtnBgColor_mobile},iconColor:{desktop:e.searchBtnIconColor,tablet:e.searchBtnIconColor_tablet,mobile:e.searchBtnIconColor_mobile},iconColorActive:{desktop:e.searchBtnIconColorActive,tablet:e.searchBtnIconColorActive_tablet,mobile:e.searchBtnIconColorActive_mobile},radius:{desktop:e.searchBtnRadius,tablet:e.searchBtnRadius_tablet,mobile:e.searchBtnRadius_mobile},checkmarkIcon:e.checkmarkIcon,searchIcon:e.searchIcon},navBtn:{iconColor:e.navBtnIconColor,iconColorHover:e.navBtnIconColorHover,iconSize:{desktop:e.navBtnIconSize,tablet:e.navBtnIconSize_tablet,mobile:e.navBtnIconSize_mobile},bgColor:e.navBtnBgColor,bgColorHover:e.navBtnBgColorHover,border:e.navBtnBorder,borderColorHover:e.navBtnBorderColorHover,radius:{desktop:e.navBtnRadius,tablet:e.navBtnRadius_tablet,mobile:e.navBtnRadius_mobile},shadow:e.navBtnShadow,size:{desktop:e.navBtnSize,tablet:e.navBtnSize_tablet,mobile:e.navBtnSize_mobile}},geolocationIcon:e.geolocationIcon}}}function Fe(){if(typeof window>"u")return"desktop";const e=window.innerWidth;return e<768?"mobile":e<1024?"tablet":"desktop"}function x(e,n){if(!e)return n;const t=Fe();return t==="mobile"?e.mobile!==void 0?e.mobile:e.tablet!==void 0?e.tablet:e.desktop!==void 0?e.desktop:n:t==="tablet"&&e.tablet!==void 0?e.tablet:e.desktop!==void 0?e.desktop:n}function U(e){if(!e?.enable)return"none";const{horizontal:n=0,vertical:t=0,blur:r=0,spread:s=0,color:o="rgba(0,0,0,0.1)",position:v}=e;return`${v==="inset"?"inset ":""}${n}px ${t}px ${r}px ${s}px ${o}`}function Y(e){if(!e)return{};const n={};return e.fontFamily&&(n["font-family"]=e.fontFamily),e.fontSize&&(n["font-size"]=`${e.fontSize}${e.fontSizeUnit||"px"}`),e.fontWeight&&(n["font-weight"]=e.fontWeight),e.fontStyle&&(n["font-style"]=e.fontStyle),e.textTransform&&(n["text-transform"]=e.textTransform),e.textDecoration&&(n["text-decoration"]=e.textDecoration),e.lineHeight&&(n["line-height"]=`${e.lineHeight}${e.lineHeightUnit||""}`),e.letterSpacing&&(n["letter-spacing"]=`${e.letterSpacing}${e.letterSpacingUnit||"px"}`),n}function We(e,n){e.style.width="100%";const t=n.styles;if(!t)return;const r=x(t.height,400),s=t.heightUnit||"px",o=x(t.enableCalcHeight,!1),v=x(t.calcHeight,"");o&&v?e.style.setProperty("--vx-map-height",v):e.style.setProperty("--vx-map-height",`${r}${s}`);const l=x(t.borderRadius,0);if(e.style.setProperty("--vx-map-radius",`${l}px`),t.cluster){const c=x(t.cluster.size,40);e.style.setProperty("--vx-cluster-size",`${c}px`);const p=x(t.cluster.bgColor,"");p&&e.style.setProperty("--vx-cluster-bg",p);const m=x(t.cluster.radius,50);e.style.setProperty("--vx-cluster-radius",`${m}%`);const f=x(t.cluster.textColor,"");if(f&&e.style.setProperty("--vx-cluster-text-color",f),e.style.setProperty("--vx-cluster-shadow",U(t.cluster.shadow)),t.cluster.typography){const d=Y(t.cluster.typography);d["font-family"]&&e.style.setProperty("--vx-cluster-font-family",d["font-family"]),d["font-size"]&&e.style.setProperty("--vx-cluster-font-size",d["font-size"]),d["font-weight"]&&e.style.setProperty("--vx-cluster-font-weight",d["font-weight"]),d["font-style"]&&e.style.setProperty("--vx-cluster-font-style",d["font-style"]),d["line-height"]&&e.style.setProperty("--vx-cluster-line-height",d["line-height"]),d["letter-spacing"]&&e.style.setProperty("--vx-cluster-letter-spacing",d["letter-spacing"]),d["text-transform"]&&e.style.setProperty("--vx-cluster-text-transform",d["text-transform"]),d["text-decoration"]&&e.style.setProperty("--vx-cluster-text-decoration",d["text-decoration"])}}if(t.iconMarker){const c=x(t.iconMarker.size,42);e.style.setProperty("--vx-icon-marker-size",`${c}px`);const p=x(t.iconMarker.iconSize,24);e.style.setProperty("--vx-icon-marker-icon-size",`${p}px`);const m=x(t.iconMarker.radius,50);e.style.setProperty("--vx-icon-marker-radius",`${m}%`),e.style.setProperty("--vx-icon-marker-shadow",U(t.iconMarker.shadow));const f=x(t.iconMarker.staticBg,"");f&&e.style.setProperty("--vx-icon-marker-bg",f);const d=x(t.iconMarker.staticBgActive,"");d&&e.style.setProperty("--vx-icon-marker-bg-active",d);const h=x(t.iconMarker.staticIconColor,"");h&&e.style.setProperty("--vx-icon-marker-icon-color",h);const g=x(t.iconMarker.staticIconColorActive,"");g&&e.style.setProperty("--vx-icon-marker-icon-color-active",g)}if(t.textMarker){const c=x(t.textMarker.bgColor,"");c&&e.style.setProperty("--vx-text-marker-bg",c);const p=x(t.textMarker.bgColorActive,"");p&&e.style.setProperty("--vx-text-marker-bg-active",p);const m=x(t.textMarker.textColor,"");m&&e.style.setProperty("--vx-text-marker-text-color",m);const f=x(t.textMarker.textColorActive,"");f&&e.style.setProperty("--vx-text-marker-text-color-active",f);const d=x(t.textMarker.radius,4);if(e.style.setProperty("--vx-text-marker-radius",`${d}px`),e.style.setProperty("--vx-text-marker-shadow",U(t.textMarker.shadow)),t.textMarker.typography){const g=Y(t.textMarker.typography);g["font-family"]&&e.style.setProperty("--vx-text-marker-font-family",g["font-family"]),g["font-size"]&&e.style.setProperty("--vx-text-marker-font-size",g["font-size"]),g["font-weight"]&&e.style.setProperty("--vx-text-marker-font-weight",g["font-weight"]),g["font-style"]&&e.style.setProperty("--vx-text-marker-font-style",g["font-style"]),g["line-height"]&&e.style.setProperty("--vx-text-marker-line-height",g["line-height"]),g["letter-spacing"]&&e.style.setProperty("--vx-text-marker-letter-spacing",g["letter-spacing"]),g["text-transform"]&&e.style.setProperty("--vx-text-marker-text-transform",g["text-transform"]),g["text-decoration"]&&e.style.setProperty("--vx-text-marker-text-decoration",g["text-decoration"])}const h=x(t.textMarker.padding,{});if(h){const g=h;g.top&&e.style.setProperty("--vx-text-marker-padding-top",g.top),g.right&&e.style.setProperty("--vx-text-marker-padding-right",g.right),g.bottom&&e.style.setProperty("--vx-text-marker-padding-bottom",g.bottom),g.left&&e.style.setProperty("--vx-text-marker-padding-left",g.left)}}if(t.imageMarker){const c=x(t.imageMarker.size,42);e.style.setProperty("--vx-image-marker-size",`${c}px`);const p=x(t.imageMarker.radius,50);e.style.setProperty("--vx-image-marker-radius",`${p}%`),e.style.setProperty("--vx-image-marker-shadow",U(t.imageMarker.shadow))}if(t.popup){const c=x(t.popup.cardWidth,320);e.style.setProperty("--vx-popup-card-width",`${c}px`),t.popup.loaderColor1&&e.style.setProperty("--vx-popup-loader-color1",t.popup.loaderColor1),t.popup.loaderColor2&&e.style.setProperty("--vx-popup-loader-color2",t.popup.loaderColor2)}if(t.searchBtn){const c=x(t.searchBtn.textColor,"");c&&e.style.setProperty("--vx-search-btn-text-color",c);const p=x(t.searchBtn.bgColor,"");p&&e.style.setProperty("--vx-search-btn-bg",p);const m=x(t.searchBtn.iconColor,"");m&&e.style.setProperty("--vx-search-btn-icon-color",m);const f=x(t.searchBtn.iconColorActive,"");f&&e.style.setProperty("--vx-search-btn-icon-color-active",f);const d=x(t.searchBtn.radius,4);if(e.style.setProperty("--vx-search-btn-radius",`${d}px`),t.searchBtn.typography){const h=Y(t.searchBtn.typography);h["font-family"]&&e.style.setProperty("--vx-search-btn-font-family",h["font-family"]),h["font-size"]&&e.style.setProperty("--vx-search-btn-font-size",h["font-size"]),h["font-weight"]&&e.style.setProperty("--vx-search-btn-font-weight",h["font-weight"]),h["font-style"]&&e.style.setProperty("--vx-search-btn-font-style",h["font-style"]),h["line-height"]&&e.style.setProperty("--vx-search-btn-line-height",h["line-height"]),h["letter-spacing"]&&e.style.setProperty("--vx-search-btn-letter-spacing",h["letter-spacing"]),h["text-transform"]&&e.style.setProperty("--vx-search-btn-text-transform",h["text-transform"]),h["text-decoration"]&&e.style.setProperty("--vx-search-btn-text-decoration",h["text-decoration"])}if(t.searchBtn.checkmarkIcon){const h=t.searchBtn.checkmarkIcon;e.dataset.checkmarkIcon=JSON.stringify(h)}}if(t.navBtn){t.navBtn.iconColor&&e.style.setProperty("--vx-nav-btn-icon-color",t.navBtn.iconColor),t.navBtn.iconColorHover&&e.style.setProperty("--vx-nav-btn-icon-color-hover",t.navBtn.iconColorHover);const c=x(t.navBtn.iconSize,20);e.style.setProperty("--vx-nav-btn-icon-size",`${c}px`),t.navBtn.bgColor&&e.style.setProperty("--vx-nav-btn-bg",t.navBtn.bgColor),t.navBtn.bgColorHover&&e.style.setProperty("--vx-nav-btn-bg-hover",t.navBtn.bgColorHover);const p=x(t.navBtn.radius,4);e.style.setProperty("--vx-nav-btn-radius",`${p}px`);const m=x(t.navBtn.size,36);if(e.style.setProperty("--vx-nav-btn-size",`${m}px`),e.style.setProperty("--vx-nav-btn-shadow",U(t.navBtn.shadow)),t.navBtn.borderType&&t.navBtn.borderType!=="none"){e.style.setProperty("--vx-nav-btn-border-style",t.navBtn.borderType);const f=x(t.navBtn.borderWidth,0);e.style.setProperty("--vx-nav-btn-border-width",`${f}px`),t.navBtn.borderColor&&e.style.setProperty("--vx-nav-btn-border-color",t.navBtn.borderColor),t.navBtn.borderColorHover&&e.style.setProperty("--vx-nav-btn-border-color-hover",t.navBtn.borderColorHover)}}}function Oe({attributes:e,setAttributes:n}){const t=n;return React.createElement(ae,{attributes:e,setAttributes:t,stateAttribute:"mapStyleAccordion",defaultPanel:"clusters"},React.createElement(z,{id:"clusters",title:a("Clusters","voxel-fse")},React.createElement(_,{label:a("Size","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"clusterSize",min:0,max:100,step:1}),React.createElement(k,{label:a("Background color","voxel-fse"),value:e.clusterBgColor,onChange:r=>t({clusterBgColor:r})}),React.createElement(O,{label:a("Box Shadow","voxel-fse"),attributes:e,setAttributes:t,shadowAttributeName:"clusterShadow"}),React.createElement(_,{label:a("Border radius","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"clusterRadius",min:0,max:100,step:1}),React.createElement(K,{label:a("Typography","voxel-fse"),value:e.clusterTypography,onChange:r=>t({clusterTypography:r})}),React.createElement(k,{label:a("Text color","voxel-fse"),value:e.clusterTextColor,onChange:r=>t({clusterTextColor:r})})),React.createElement(z,{id:"icon-marker",title:a("Icon marker","voxel-fse")},React.createElement(D,{label:a("General","voxel-fse")}),React.createElement(_,{label:a("Marker size","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"iconMarkerSize",min:30,max:60,step:1}),React.createElement(_,{label:a("Marker icon size","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"iconMarkerIconSize",min:10,max:60,step:1}),React.createElement(_,{label:a("Border radius","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"iconMarkerRadius",min:0,max:100,step:1}),React.createElement(O,{label:a("Box Shadow","voxel-fse"),attributes:e,setAttributes:t,shadowAttributeName:"iconMarkerShadow"}),React.createElement(D,{label:a("Static marker","voxel-fse")}),React.createElement(k,{label:a("Background color","voxel-fse"),value:e.iconMarkerStaticBg,onChange:r=>t({iconMarkerStaticBg:r})}),React.createElement(k,{label:a("Background color (Active)","voxel-fse"),value:e.iconMarkerStaticBgActive,onChange:r=>t({iconMarkerStaticBgActive:r})}),React.createElement(k,{label:a("Icon color","voxel-fse"),value:e.iconMarkerStaticIconColor,onChange:r=>t({iconMarkerStaticIconColor:r})}),React.createElement(k,{label:a("Icon color (Active)","voxel-fse"),value:e.iconMarkerStaticIconColorActive,onChange:r=>t({iconMarkerStaticIconColorActive:r})})),React.createElement(z,{id:"text-marker",title:a("Text marker","voxel-fse")},React.createElement(k,{label:a("Background color","voxel-fse"),value:e.textMarkerBgColor,onChange:r=>t({textMarkerBgColor:r})}),React.createElement(k,{label:a("Background color (Active)","voxel-fse"),value:e.textMarkerBgColorActive,onChange:r=>t({textMarkerBgColorActive:r})}),React.createElement(k,{label:a("Text color","voxel-fse"),value:e.textMarkerTextColor,onChange:r=>t({textMarkerTextColor:r})}),React.createElement(k,{label:a("Text color (Active)","voxel-fse"),value:e.textMarkerTextColorActive,onChange:r=>t({textMarkerTextColorActive:r})}),React.createElement(_,{label:a("Border radius","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"textMarkerRadius",min:0,max:100,step:1}),React.createElement(K,{label:a("Title typography","voxel-fse"),value:e.textMarkerTypography,onChange:r=>t({textMarkerTypography:r})}),React.createElement(Se,{label:a("Padding","voxel-fse"),values:e.textMarkerPadding,onChange:r=>t({textMarkerPadding:r})}),React.createElement(O,{label:a("Box Shadow","voxel-fse"),attributes:e,setAttributes:t,shadowAttributeName:"textMarkerShadow"})),React.createElement(z,{id:"image-marker",title:a("Image marker","voxel-fse")},React.createElement(_,{label:a("Marker size","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"imageMarkerSize",min:30,max:60,step:1}),React.createElement(_,{label:a("Border radius","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"imageMarkerRadius",min:0,max:100,step:1}),React.createElement(O,{label:a("Box Shadow","voxel-fse"),attributes:e,setAttributes:t,shadowAttributeName:"imageMarkerShadow"})),React.createElement(z,{id:"map-popup",title:a("Map popup","voxel-fse")},React.createElement(_,{label:a("Card width","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"popupCardWidth",min:0,max:700,step:1}),React.createElement(D,{label:a("Loader","voxel-fse")}),React.createElement(k,{label:a("Color 1","voxel-fse"),value:e.popupLoaderColor1,onChange:r=>t({popupLoaderColor1:r})}),React.createElement(k,{label:a("Color 2","voxel-fse"),value:e.popupLoaderColor2,onChange:r=>t({popupLoaderColor2:r})})),React.createElement(z,{id:"search-button",title:a("Search button","voxel-fse")},React.createElement(K,{label:a("Typography","voxel-fse"),value:e.searchBtnTypography,onChange:r=>t({searchBtnTypography:r})}),React.createElement(k,{label:a("Text color","voxel-fse"),value:e.searchBtnTextColor,onChange:r=>t({searchBtnTextColor:r})}),React.createElement(k,{label:a("Background color","voxel-fse"),value:e.searchBtnBgColor,onChange:r=>t({searchBtnBgColor:r})}),React.createElement(k,{label:a("Icon color","voxel-fse"),value:e.searchBtnIconColor,onChange:r=>t({searchBtnIconColor:r})}),React.createElement(k,{label:a("Icon color (Active)","voxel-fse"),value:e.searchBtnIconColorActive,onChange:r=>t({searchBtnIconColorActive:r})}),React.createElement(_,{label:a("Border radius","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"searchBtnRadius",min:0,max:100,step:1}),React.createElement(X,{label:a("Checkmark icon","voxel-fse"),value:e.checkmarkIcon,onChange:r=>t({checkmarkIcon:r})}),React.createElement(X,{label:a("Search icon","voxel-fse"),value:e.searchIcon,onChange:r=>t({searchIcon:r})})),React.createElement(z,{id:"nav-buttons",title:a("Next/Prev buttons","voxel-fse")},React.createElement(D,{label:a("Normal","voxel-fse")}),React.createElement(k,{label:a("Button icon color","voxel-fse"),value:e.navBtnIconColor,onChange:r=>t({navBtnIconColor:r})}),React.createElement(_,{label:a("Button icon size","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"navBtnIconSize",min:0,max:100,step:1}),React.createElement(k,{label:a("Button background","voxel-fse"),value:e.navBtnBgColor,onChange:r=>t({navBtnBgColor:r})}),React.createElement(ue,{label:a("Border","voxel-fse"),value:e.navBtnBorder||{borderType:"none",borderWidth:{},borderColor:""},onChange:r=>t({navBtnBorder:r})}),React.createElement(_,{label:a("Button border radius","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"navBtnRadius",min:0,max:100,step:1}),React.createElement(O,{label:a("Box Shadow","voxel-fse"),attributes:e,setAttributes:t,shadowAttributeName:"navBtnShadow"}),React.createElement(_,{label:a("Button size","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"navBtnSize",min:0,max:100,step:1}),React.createElement(D,{label:a("Hover","voxel-fse")}),React.createElement(k,{label:a("Button icon color","voxel-fse"),value:e.navBtnIconColorHover,onChange:r=>t({navBtnIconColorHover:r})}),React.createElement(k,{label:a("Button background color","voxel-fse"),value:e.navBtnBgColorHover,onChange:r=>t({navBtnBgColorHover:r})}),React.createElement(k,{label:a("Button border color","voxel-fse"),value:e.navBtnBorderColorHover,onChange:r=>t({navBtnBorderColorHover:r})})),React.createElement(z,{id:"geolocation-button",title:a("Geolocation button","voxel-fse")},React.createElement(X,{label:a("Geolocation icon","voxel-fse"),value:e.geolocationIcon,onChange:r=>t({geolocationIcon:r})})))}function ce(e,n){const t=[],r=[],s=[],o=`.voxel-fse-map-${n}`;if(t.push(".marker-type-text { font-size: 14px !important; color: #4a4a4a !important; }"),t.push(".marker-wrapper { position: absolute; z-index: 10; transform: translate(-50%, -50%); }"),t.push(".map-marker { display: flex; align-items: center; justify-content: center; overflow: hidden; white-space: nowrap; }"),e.clusterSize!==void 0&&t.push(`${o} .ts-marker-cluster { width: ${e.clusterSize}px; height: ${e.clusterSize}px; }`),e.clusterSize_tablet!==void 0&&r.push(`${o} .ts-marker-cluster { width: ${e.clusterSize_tablet}px; height: ${e.clusterSize_tablet}px; }`),e.clusterSize_mobile!==void 0&&s.push(`${o} .ts-marker-cluster { width: ${e.clusterSize_mobile}px; height: ${e.clusterSize_mobile}px; }`),e.clusterBgColor&&t.push(`${o} .ts-marker-cluster { background-color: ${e.clusterBgColor}; }`),e.clusterBgColor_tablet&&r.push(`${o} .ts-marker-cluster { background-color: ${e.clusterBgColor_tablet}; }`),e.clusterBgColor_mobile&&s.push(`${o} .ts-marker-cluster { background-color: ${e.clusterBgColor_mobile}; }`),e.clusterShadow?.enable){const{horizontal:l=0,vertical:c=0,blur:p=0,spread:m=0,color:f="rgba(0,0,0,0.1)",position:d="outline"}=e.clusterShadow,h=d==="inset"?"inset ":"";t.push(`${o} .ts-marker-cluster { box-shadow: ${h}${l}px ${c}px ${p}px ${m}px ${f}; }`)}if(e.clusterRadius!==void 0&&t.push(`${o} .ts-marker-cluster { border-radius: ${e.clusterRadius}px; }`),e.clusterRadius_tablet!==void 0&&r.push(`${o} .ts-marker-cluster { border-radius: ${e.clusterRadius_tablet}px; }`),e.clusterRadius_mobile!==void 0&&s.push(`${o} .ts-marker-cluster { border-radius: ${e.clusterRadius_mobile}px; }`),e.clusterTypography){const l=e.clusterTypography;if(l.fontFamily&&t.push(`${o} .ts-marker-cluster { font-family: ${l.fontFamily}; }`),l.fontSize){const c=l.fontSizeUnit||"px";t.push(`${o} .ts-marker-cluster { font-size: ${l.fontSize}${c}; }`)}if(l.fontWeight&&t.push(`${o} .ts-marker-cluster { font-weight: ${l.fontWeight}; }`),l.fontStyle&&t.push(`${o} .ts-marker-cluster { font-style: ${l.fontStyle}; }`),l.textTransform&&t.push(`${o} .ts-marker-cluster { text-transform: ${l.textTransform}; }`),l.textDecoration&&t.push(`${o} .ts-marker-cluster { text-decoration: ${l.textDecoration}; }`),l.lineHeight){const c=l.lineHeightUnit||"";t.push(`${o} .ts-marker-cluster { line-height: ${l.lineHeight}${c}; }`)}if(l.letterSpacing){const c=l.letterSpacingUnit||"px";t.push(`${o} .ts-marker-cluster { letter-spacing: ${l.letterSpacing}${c}; }`)}}if(e.clusterTextColor&&t.push(`${o} .ts-marker-cluster { color: ${e.clusterTextColor}; }`),e.clusterTextColor_tablet&&r.push(`${o} .ts-marker-cluster { color: ${e.clusterTextColor_tablet}; }`),e.clusterTextColor_mobile&&s.push(`${o} .ts-marker-cluster { color: ${e.clusterTextColor_mobile}; }`),e.iconMarkerSize!==void 0&&t.push(`${o} .marker-type-icon { width: ${e.iconMarkerSize}px; height: ${e.iconMarkerSize}px; }`),e.iconMarkerSize_tablet!==void 0&&r.push(`${o} .marker-type-icon { width: ${e.iconMarkerSize_tablet}px; height: ${e.iconMarkerSize_tablet}px; }`),e.iconMarkerSize_mobile!==void 0&&s.push(`${o} .marker-type-icon { width: ${e.iconMarkerSize_mobile}px; height: ${e.iconMarkerSize_mobile}px; }`),e.iconMarkerIconSize!==void 0&&t.push(`${o} .marker-type-icon { --ts-icon-size: ${e.iconMarkerIconSize}px; }`),e.iconMarkerIconSize_tablet!==void 0&&r.push(`${o} .marker-type-icon { --ts-icon-size: ${e.iconMarkerIconSize_tablet}px; }`),e.iconMarkerIconSize_mobile!==void 0&&s.push(`${o} .marker-type-icon { --ts-icon-size: ${e.iconMarkerIconSize_mobile}px; }`),e.iconMarkerRadius!==void 0&&t.push(`${o} .marker-type-icon { border-radius: ${e.iconMarkerRadius}px; }`),e.iconMarkerRadius_tablet!==void 0&&r.push(`${o} .marker-type-icon { border-radius: ${e.iconMarkerRadius_tablet}px; }`),e.iconMarkerRadius_mobile!==void 0&&s.push(`${o} .marker-type-icon { border-radius: ${e.iconMarkerRadius_mobile}px; }`),e.iconMarkerShadow?.enable){const{horizontal:l=0,vertical:c=0,blur:p=0,spread:m=0,color:f="rgba(0,0,0,0.1)",position:d="outline"}=e.iconMarkerShadow,h=d==="inset"?"inset ":"";t.push(`${o} .marker-type-icon { box-shadow: ${h}${l}px ${c}px ${p}px ${m}px ${f}; }`)}if(e.iconMarkerStaticBg&&t.push(`${o} .mi-static { background-color: ${e.iconMarkerStaticBg}; }`),e.iconMarkerStaticBg_tablet&&r.push(`${o} .mi-static { background-color: ${e.iconMarkerStaticBg_tablet}; }`),e.iconMarkerStaticBg_mobile&&s.push(`${o} .mi-static { background-color: ${e.iconMarkerStaticBg_mobile}; }`),e.iconMarkerStaticBgActive&&t.push(`${o} .marker-active .mi-static { background-color: ${e.iconMarkerStaticBgActive}; }`),e.iconMarkerStaticBgActive_tablet&&r.push(`${o} .marker-active .mi-static { background-color: ${e.iconMarkerStaticBgActive_tablet}; }`),e.iconMarkerStaticBgActive_mobile&&s.push(`${o} .marker-active .mi-static { background-color: ${e.iconMarkerStaticBgActive_mobile}; }`),e.iconMarkerStaticIconColor&&t.push(`${o} .mi-static { --ts-icon-color: ${e.iconMarkerStaticIconColor}; }`),e.iconMarkerStaticIconColor_tablet&&r.push(`${o} .mi-static { --ts-icon-color: ${e.iconMarkerStaticIconColor_tablet}; }`),e.iconMarkerStaticIconColor_mobile&&s.push(`${o} .mi-static { --ts-icon-color: ${e.iconMarkerStaticIconColor_mobile}; }`),e.iconMarkerStaticIconColorActive&&t.push(`${o} .marker-active .mi-static { --ts-icon-color: ${e.iconMarkerStaticIconColorActive}; }`),e.iconMarkerStaticIconColorActive_tablet&&r.push(`${o} .marker-active .mi-static { --ts-icon-color: ${e.iconMarkerStaticIconColorActive_tablet}; }`),e.iconMarkerStaticIconColorActive_mobile&&s.push(`${o} .marker-active .mi-static { --ts-icon-color: ${e.iconMarkerStaticIconColorActive_mobile}; }`),e.textMarkerBgColor&&t.push(`${o} .marker-type-text { background-color: ${e.textMarkerBgColor}; }`),e.textMarkerBgColor_tablet&&r.push(`${o} .marker-type-text { background-color: ${e.textMarkerBgColor_tablet}; }`),e.textMarkerBgColor_mobile&&s.push(`${o} .marker-type-text { background-color: ${e.textMarkerBgColor_mobile}; }`),e.textMarkerBgColorActive&&t.push(`${o} .marker-active .marker-type-text { background-color: ${e.textMarkerBgColorActive}; }`),e.textMarkerBgColorActive_tablet&&r.push(`${o} .marker-active .marker-type-text { background-color: ${e.textMarkerBgColorActive_tablet}; }`),e.textMarkerBgColorActive_mobile&&s.push(`${o} .marker-active .marker-type-text { background-color: ${e.textMarkerBgColorActive_mobile}; }`),e.textMarkerTextColor&&t.push(`${o} .marker-type-text { color: ${e.textMarkerTextColor}; }`),e.textMarkerTextColor_tablet&&r.push(`${o} .marker-type-text { color: ${e.textMarkerTextColor_tablet}; }`),e.textMarkerTextColor_mobile&&s.push(`${o} .marker-type-text { color: ${e.textMarkerTextColor_mobile}; }`),e.textMarkerTextColorActive&&t.push(`${o} .marker-active .marker-type-text { color: ${e.textMarkerTextColorActive}; }`),e.textMarkerTextColorActive_tablet&&r.push(`${o} .marker-active .marker-type-text { color: ${e.textMarkerTextColorActive_tablet}; }`),e.textMarkerTextColorActive_mobile&&s.push(`${o} .marker-active .marker-type-text { color: ${e.textMarkerTextColorActive_mobile}; }`),e.textMarkerRadius!==void 0&&t.push(`${o} .marker-type-text { border-radius: ${e.textMarkerRadius}px; }`),e.textMarkerRadius_tablet!==void 0&&r.push(`${o} .marker-type-text { border-radius: ${e.textMarkerRadius_tablet}px; }`),e.textMarkerRadius_mobile!==void 0&&s.push(`${o} .marker-type-text { border-radius: ${e.textMarkerRadius_mobile}px; }`),e.textMarkerTypography){const l=e.textMarkerTypography;if(l.fontFamily&&t.push(`${o} .marker-type-text { font-family: ${l.fontFamily}; }`),l.fontSize){const c=l.fontSizeUnit||"px";t.push(`${o} .marker-type-text { font-size: ${l.fontSize}${c}; }`)}if(l.fontWeight&&t.push(`${o} .marker-type-text { font-weight: ${l.fontWeight}; }`),l.fontStyle&&t.push(`${o} .marker-type-text { font-style: ${l.fontStyle}; }`),l.textTransform&&t.push(`${o} .marker-type-text { text-transform: ${l.textTransform}; }`),l.textDecoration&&t.push(`${o} .marker-type-text { text-decoration: ${l.textDecoration}; }`),l.lineHeight){const c=l.lineHeightUnit||"";t.push(`${o} .marker-type-text { line-height: ${l.lineHeight}${c}; }`)}if(l.letterSpacing){const c=l.letterSpacingUnit||"px";t.push(`${o} .marker-type-text { letter-spacing: ${l.letterSpacing}${c}; }`)}}if(e.textMarkerPadding){const{top:l,right:c,bottom:p,left:m}=e.textMarkerPadding;(l||c||p||m)&&t.push(`${o} .marker-type-text { padding: ${l||0}px ${c||0}px ${p||0}px ${m||0}px; }`)}if(e.textMarkerPadding_tablet){const{top:l,right:c,bottom:p,left:m}=e.textMarkerPadding_tablet;(l||c||p||m)&&r.push(`${o} .marker-type-text { padding: ${l||0}px ${c||0}px ${p||0}px ${m||0}px; }`)}if(e.textMarkerPadding_mobile){const{top:l,right:c,bottom:p,left:m}=e.textMarkerPadding_mobile;(l||c||p||m)&&s.push(`${o} .marker-type-text { padding: ${l||0}px ${c||0}px ${p||0}px ${m||0}px; }`)}if(e.textMarkerShadow?.enable){const{horizontal:l=0,vertical:c=0,blur:p=0,spread:m=0,color:f="rgba(0,0,0,0.1)",position:d="outline"}=e.textMarkerShadow,h=d==="inset"?"inset ":"";t.push(`${o} .marker-type-text { box-shadow: ${h}${l}px ${c}px ${p}px ${m}px ${f}; }`)}if(e.imageMarkerSize!==void 0&&t.push(`${o} .marker-type-image { width: ${e.imageMarkerSize}px; height: ${e.imageMarkerSize}px; }`),e.imageMarkerSize_tablet!==void 0&&r.push(`${o} .marker-type-image { width: ${e.imageMarkerSize_tablet}px; height: ${e.imageMarkerSize_tablet}px; }`),e.imageMarkerSize_mobile!==void 0&&s.push(`${o} .marker-type-image { width: ${e.imageMarkerSize_mobile}px; height: ${e.imageMarkerSize_mobile}px; }`),e.imageMarkerRadius!==void 0&&t.push(`${o} .marker-type-image { border-radius: ${e.imageMarkerRadius}px; }`),e.imageMarkerRadius_tablet!==void 0&&r.push(`${o} .marker-type-image { border-radius: ${e.imageMarkerRadius_tablet}px; }`),e.imageMarkerRadius_mobile!==void 0&&s.push(`${o} .marker-type-image { border-radius: ${e.imageMarkerRadius_mobile}px; }`),e.imageMarkerShadow?.enable){const{horizontal:l=0,vertical:c=0,blur:p=0,spread:m=0,color:f="rgba(0,0,0,0.1)",position:d="outline"}=e.imageMarkerShadow,h=d==="inset"?"inset ":"";t.push(`${o} .marker-type-image { box-shadow: ${h}${l}px ${c}px ${p}px ${m}px ${f}; }`)}if(e.popupCardWidth!==void 0&&t.push(`${o} .ts-preview-popup { width: ${e.popupCardWidth}px; }`),e.popupCardWidth_tablet!==void 0&&r.push(`${o} .ts-preview-popup { width: ${e.popupCardWidth_tablet}px; }`),e.popupCardWidth_mobile!==void 0&&s.push(`${o} .ts-preview-popup { width: ${e.popupCardWidth_mobile}px; }`),e.popupLoaderColor1&&t.push(`${o} .ts-loading-popup .ts-loader { border-color: ${e.popupLoaderColor1}; }`),e.popupLoaderColor2&&t.push(`${o} .ts-loading-popup .ts-loader { border-bottom-color: ${e.popupLoaderColor2}; }`),e.searchBtnTypography){const l=e.searchBtnTypography;if(l.fontFamily&&t.push(`${o} .ts-map-btn { font-family: ${l.fontFamily}; }`),l.fontSize){const c=l.fontSizeUnit||"px";t.push(`${o} .ts-map-btn { font-size: ${l.fontSize}${c}; }`)}if(l.fontWeight&&t.push(`${o} .ts-map-btn { font-weight: ${l.fontWeight}; }`),l.fontStyle&&t.push(`${o} .ts-map-btn { font-style: ${l.fontStyle}; }`),l.textTransform&&t.push(`${o} .ts-map-btn { text-transform: ${l.textTransform}; }`),l.textDecoration&&t.push(`${o} .ts-map-btn { text-decoration: ${l.textDecoration}; }`),l.lineHeight){const c=l.lineHeightUnit||"";t.push(`${o} .ts-map-btn { line-height: ${l.lineHeight}${c}; }`)}if(l.letterSpacing){const c=l.letterSpacingUnit||"px";t.push(`${o} .ts-map-btn { letter-spacing: ${l.letterSpacing}${c}; }`)}}if(e.searchBtnTextColor&&t.push(`${o} .ts-map-btn { color: ${e.searchBtnTextColor}; }`),e.searchBtnTextColor_tablet&&r.push(`${o} .ts-map-btn { color: ${e.searchBtnTextColor_tablet}; }`),e.searchBtnTextColor_mobile&&s.push(`${o} .ts-map-btn { color: ${e.searchBtnTextColor_mobile}; }`),e.searchBtnBgColor&&t.push(`${o} .ts-map-btn { background-color: ${e.searchBtnBgColor}; }`),e.searchBtnBgColor_tablet&&r.push(`${o} .ts-map-btn { background-color: ${e.searchBtnBgColor_tablet}; }`),e.searchBtnBgColor_mobile&&s.push(`${o} .ts-map-btn { background-color: ${e.searchBtnBgColor_mobile}; }`),e.searchBtnIconColor&&t.push(`${o} .ts-map-btn svg { fill: ${e.searchBtnIconColor}; }`),e.searchBtnIconColor_tablet&&r.push(`${o} .ts-map-btn svg { fill: ${e.searchBtnIconColor_tablet}; }`),e.searchBtnIconColor_mobile&&s.push(`${o} .ts-map-btn svg { fill: ${e.searchBtnIconColor_mobile}; }`),e.searchBtnIconColorActive&&t.push(`${o} .ts-map-btn.active svg { fill: ${e.searchBtnIconColorActive}; }`),e.searchBtnIconColorActive_tablet&&r.push(`${o} .ts-map-btn.active svg { fill: ${e.searchBtnIconColorActive_tablet}; }`),e.searchBtnIconColorActive_mobile&&s.push(`${o} .ts-map-btn.active svg { fill: ${e.searchBtnIconColorActive_mobile}; }`),e.searchBtnRadius!==void 0&&t.push(`${o} .ts-map-btn { border-radius: ${e.searchBtnRadius}px; }`),e.searchBtnRadius_tablet!==void 0&&r.push(`${o} .ts-map-btn { border-radius: ${e.searchBtnRadius_tablet}px; }`),e.searchBtnRadius_mobile!==void 0&&s.push(`${o} .ts-map-btn { border-radius: ${e.searchBtnRadius_mobile}px; }`),e.navBtnIconColor&&(t.push(`${o} .ts-map-nav .ts-icon-btn i { color: ${e.navBtnIconColor}; }`),t.push(`${o} .ts-map-nav .ts-icon-btn svg { fill: ${e.navBtnIconColor}; }`)),e.navBtnIconSize!==void 0&&(t.push(`${o} .ts-map-nav .ts-icon-btn i { font-size: ${e.navBtnIconSize}px; }`),t.push(`${o} .ts-map-nav .ts-icon-btn svg { width: ${e.navBtnIconSize}px; height: ${e.navBtnIconSize}px; }`)),e.navBtnIconSize_tablet!==void 0&&(r.push(`${o} .ts-map-nav .ts-icon-btn i { font-size: ${e.navBtnIconSize_tablet}px; }`),r.push(`${o} .ts-map-nav .ts-icon-btn svg { width: ${e.navBtnIconSize_tablet}px; height: ${e.navBtnIconSize_tablet}px; }`)),e.navBtnIconSize_mobile!==void 0&&(s.push(`${o} .ts-map-nav .ts-icon-btn i { font-size: ${e.navBtnIconSize_mobile}px; }`),s.push(`${o} .ts-map-nav .ts-icon-btn svg { width: ${e.navBtnIconSize_mobile}px; height: ${e.navBtnIconSize_mobile}px; }`)),e.navBtnBgColor&&t.push(`${o} .ts-map-nav .ts-icon-btn { background-color: ${e.navBtnBgColor}; }`),e.navBtnBorder){const{borderType:l,borderWidth:c,borderColor:p}=e.navBtnBorder;if(l&&l!=="none"){if(t.push(`${o} .ts-map-nav .ts-icon-btn { border-style: ${l}; }`),c){const{top:m,right:f,bottom:d,left:h,unit:g="px",linked:R}=c;if(R&&m!==void 0)t.push(`${o} .ts-map-nav .ts-icon-btn { border-width: ${m}${g}; }`);else{const Z=m!==void 0?`${m}${g}`:"0",P=f!==void 0?`${f}${g}`:"0",A=d!==void 0?`${d}${g}`:"0",W=h!==void 0?`${h}${g}`:"0";t.push(`${o} .ts-map-nav .ts-icon-btn { border-width: ${Z} ${P} ${A} ${W}; }`)}}p&&t.push(`${o} .ts-map-nav .ts-icon-btn { border-color: ${p}; }`)}}if(e.navBtnRadius!==void 0&&t.push(`${o} .ts-map-nav .ts-icon-btn { border-radius: ${e.navBtnRadius}px; }`),e.navBtnRadius_tablet!==void 0&&r.push(`${o} .ts-map-nav .ts-icon-btn { border-radius: ${e.navBtnRadius_tablet}px; }`),e.navBtnRadius_mobile!==void 0&&s.push(`${o} .ts-map-nav .ts-icon-btn { border-radius: ${e.navBtnRadius_mobile}px; }`),e.navBtnShadow?.enable){const{horizontal:l=0,vertical:c=0,blur:p=0,spread:m=0,color:f="rgba(0,0,0,0.1)",position:d="outline"}=e.navBtnShadow,h=d==="inset"?"inset ":"";t.push(`${o} .ts-map-nav .ts-icon-btn { box-shadow: ${h}${l}px ${c}px ${p}px ${m}px ${f}; }`)}e.navBtnSize!==void 0&&t.push(`${o} .ts-map-nav .ts-icon-btn { width: ${e.navBtnSize}px; height: ${e.navBtnSize}px; }`),e.navBtnSize_tablet!==void 0&&r.push(`${o} .ts-map-nav .ts-icon-btn { width: ${e.navBtnSize_tablet}px; height: ${e.navBtnSize_tablet}px; }`),e.navBtnSize_mobile!==void 0&&s.push(`${o} .ts-map-nav .ts-icon-btn { width: ${e.navBtnSize_mobile}px; height: ${e.navBtnSize_mobile}px; }`),e.navBtnIconColorHover&&(t.push(`${o} .ts-map-nav .ts-icon-btn:hover i { color: ${e.navBtnIconColorHover}; }`),t.push(`${o} .ts-map-nav .ts-icon-btn:hover svg { fill: ${e.navBtnIconColorHover}; }`)),e.navBtnBgColorHover&&t.push(`${o} .ts-map-nav .ts-icon-btn:hover { background-color: ${e.navBtnBgColorHover}; }`),e.navBtnBorderColorHover&&t.push(`${o} .ts-map-nav .ts-icon-btn:hover { border-color: ${e.navBtnBorderColorHover}; }`),t.push(`${o} .ts-map { height: var(--vx-map-height, 400px); }`);let v="";return t.length>0&&(v+=t.join(`
`)),r.length>0&&(v+=`
@media (max-width: 1024px) {
${r.join(`
`)}
}`),s.length>0&&(v+=`
@media (max-width: 767px) {
${s.join(`
`)}
}`),v}const E=()=>window;function se(){return new Promise((e,n)=>{const t=E().Voxel?.Maps;if(t){t.await(()=>e(t));return}const r=()=>{const s=E().Voxel?.Maps;s&&s.await(()=>e(s))};document.addEventListener("maps:loaded",r,{once:!0}),setTimeout(()=>{document.removeEventListener("maps:loaded",r);const s=E().Voxel?.Maps;s?s.await(()=>e(s)):n(new Error("Voxel.Maps not available after timeout"))},15e3)})}function ne(){return{lat:E().Voxel_Config?.maps?.default_lat??40.7128,lng:E().Voxel_Config?.maps?.default_lng??-74.006}}class S{constructor(n,t){this._native=null,this._lat=n,this._lng=t;const r=E().Voxel?.Maps;r&&(this._native=new r.LatLng(n,t))}getLatitude(){return this._native?.getLatitude()??this._lat}getLongitude(){return this._native?.getLongitude()??this._lng}getSourceObject(){return this._native?.getSourceObject()??null}toGeocoderFormat(){return this._native?.toGeocoderFormat()??null}getNative(){return this._native}static fromNative(n){const t=new S(n.getLatitude(),n.getLongitude());return t._native=n,t}}class ee{constructor(n,t){this._native=null,this._sw=n??null,this._ne=t??null;const r=E().Voxel?.Maps;r&&(this._native=new r.Bounds(n?.getNative()??void 0,t?.getNative()??void 0))}extend(n){this._native&&n.getNative()&&this._native.extend(n.getNative())}empty(){return this._native?.empty()??!0}getSourceObject(){return this._native?.getSourceObject()??null}getSouthWest(){return this._native?S.fromNative(this._native.getSouthWest()):this._sw}getNorthEast(){return this._native?S.fromNative(this._native.getNorthEast()):this._ne}getNative(){return this._native}static fromNative(n){const t=S.fromNative(n.getSouthWest()),r=S.fromNative(n.getNorthEast()),s=new ee(t,r);return s._native=n,s}}class De{constructor(n){this._native=null,this._listeners=new Map,this._el=n.el,this._options=n}async init(){console.log("[VxMap] init() called");const n=await se();console.log("[VxMap] Got Voxel.Maps:",n),console.log("[VxMap] Maps.Map constructor:",n.Map);const t=window.getComputedStyle(this._el),r=this._el.getBoundingClientRect();console.log("[VxMap] Container dimensions BEFORE map creation:",{width:r.width,height:r.height,display:t.display,visibility:t.visibility,offsetParent:this._el.offsetParent?"exists":"null",styleHeight:this._el.style.height}),r.height===0&&(console.log("[VxMap] WARNING: Container has 0 height! Setting fallback height of 400px"),this._el.style.height="400px");const s=this._options.center?new n.LatLng(this._options.center.getLatitude(),this._options.center.getLongitude()):new n.LatLng(ne().lat,ne().lng);console.log("[VxMap] centerLatLng created:",s);const o={el:this._el,zoom:this._options.zoom??10,center:s,minZoom:this._options.minZoom??2,maxZoom:this._options.maxZoom??20,draggable:this._options.draggable??!0};console.log("[VxMap] About to call new Maps.Map() with:",o);try{this._native=new n.Map(o),console.log("[VxMap] Maps.Map created successfully:",this._native),console.log("[VxMap] Native map object:",this._native?.map),console.log("[VxMap] Container after init:",this._el.innerHTML.substring(0,200)),this._el.classList.add("ts-map-loaded"),this._el.__vx_map__=this._native;const v=this._native?.getSourceObject(),l=E().Voxel_Config;if(v&&typeof google<"u"){const c=!!l?.google_maps?.mapTypeControl,p=!!l?.google_maps?.streetViewControl;console.log("[VxMap] Voxel_Config control settings:",{configMapTypeControl:c,configStreetViewControl:p}),console.log("[VxMap] Full Voxel_Config.google_maps:",l?.google_maps),console.log("[VxMap] googleMap BEFORE setOptions - mapTypeControl:",v.mapTypeControl),console.log("[VxMap] googleMap BEFORE setOptions - streetViewControl:",v.streetViewControl),v.setOptions({mapTypeControl:!1,streetViewControl:!1}),console.log("[VxMap] setOptions called with mapTypeControl: false, streetViewControl: false"),setTimeout(()=>{console.log("[VxMap] googleMap AFTER setOptions (after 100ms) - mapTypeControl:",v.mapTypeControl),console.log("[VxMap] googleMap AFTER setOptions (after 100ms) - streetViewControl:",v.streetViewControl);const m=this._el,f=m.querySelectorAll(".gm-style-mtc, .gm-style-mtc-bbw");console.log("[VxMap] Found map type control elements in DOM:",f.length),f.length>0&&(console.log("[VxMap] Hiding map type control elements from DOM..."),f.forEach(h=>{h.style.display="none"}));const d=m.querySelectorAll(".gm-svpc");d.length>0&&(console.log("[VxMap] Hiding street view control elements from DOM..."),d.forEach(h=>{h.style.display="none"}))},100)}v&&typeof google<"u"&&google.maps?.event&&(console.log("[VxMap] Triggering resize event sequence..."),this._el.offsetHeight,google.maps.event.trigger(v,"resize"),requestAnimationFrame(()=>{google.maps.event.trigger(v,"resize");const c=v.getCenter();c&&v.setCenter(c),setTimeout(()=>{google.maps.event.trigger(v,"bounds_changed"),google.maps.event.trigger(v,"idle"),console.log("[VxMap] Resize sequence completed");const p=this._el.getBoundingClientRect();console.log("[VxMap] Container dimensions AFTER resize:",{width:p.width,height:p.height})},100)}))}catch(v){throw console.error("[VxMap] Error creating Maps.Map:",v),v}}setZoom(n){this._native?.setZoom(n)}getZoom(){return this._native?.getZoom()??this._options.zoom??10}getMinZoom(){return this._native?.getMinZoom()??this._options.minZoom??2}getMaxZoom(){return this._native?.getMaxZoom()??this._options.maxZoom??20}setCenter(n){this._native&&n.getNative()&&this._native.setCenter(n.getNative())}getCenter(){return this._native?S.fromNative(this._native.getCenter()):this._options.center??null}getBounds(){return this._native?ee.fromNative(this._native.getBounds()):null}fitBounds(n){this._native&&n.getNative()&&this._native.fitBounds(n.getNative())}panTo(n){this._native&&n.getNative()&&this._native.panTo(n.getNative())}getClickPosition(n){return this._native?S.fromNative(this._native.getClickPosition(n)):null}addListener(n,t){if(this._native){const r=this._native.addListener(n,t);this._listeners.has(n)||this._listeners.set(n,[]),this._listeners.get(n).push(r)}}addListenerOnce(n,t){this._native&&this._native.addListenerOnce(n,t)}removeListeners(n){const t=this._listeners.get(n);t&&this._native&&(t.forEach(r=>this._native.removeListener(r)),this._listeners.delete(n))}trigger(n){this._native?.trigger(n)}getSourceObject(){return this._native?.getSourceObject()??null}getNative(){return this._native}getElement(){return this._el}}class Ue{constructor(n){this._native=null,this._map=null,this._options=n}init(n){const t=E().Voxel?.Maps;if(!t||!n.getNative())return;this._map=n;const r=this._options.position?new t.LatLng(this._options.position.getLatitude(),this._options.position.getLongitude()):void 0;this._native=new t.Marker({map:n.getNative(),position:r,template:this._options.template,onClick:this._options.onClick?(s,o)=>this._options.onClick(s,this):void 0,data:this._options.data})}getPosition(){return this._native?S.fromNative(this._native.getPosition()):this._options.position??null}setPosition(n){this._native&&n.getNative()&&this._native.setPosition(n.getNative())}getMap(){return this._map}setMap(n){this._native&&n.getNative()&&(this._native.setMap(n.getNative()),this._map=n)}remove(){return this._native?.remove(),this._map=null,this}addClass(n){this._native?.addClass(n)}removeClass(n){this._native?.removeClass(n)}getData(){return this._options.data}getNative(){return this._native}}class Ge{constructor(n){this._native=null,this._map=null,this._options=n}init(n){const t=E().Voxel?.Maps;if(!t||!n.getNative())return;this._map=n;const r=this._options.position?new t.LatLng(this._options.position.getLatitude(),this._options.position.getLongitude()):void 0;this._native=new t.Popup({map:n.getNative(),position:r,content:this._options.content})}setContent(n){this._native?.setContent(n)}setPosition(n){this._native&&n.getNative()&&this._native.setPosition(n.getNative())}show(){this._native?.show()}hide(){this._native?.hide()}getMap(){return this._map}getNative(){return this._native}}class qe{constructor(){this._native=null,this._map=null,this._markers=[]}async init(n){const t=await se();n.getNative()&&(this._map=n,this._native=new t.Clusterer({map:n.getNative()}),this._native&&(this._native._onClusterClick=()=>{this._onClusterClick?.()},this._native._onNonExpandableClusterClick=r=>{if(this._onNonExpandableClusterClick){const s=this._markers.filter(o=>r.some(v=>v===o.getNative()));this._onNonExpandableClusterClick(s)}}))}addMarkers(n){if(this._markers.push(...n),this._native){const t=n.map(r=>r.getNative()).filter(r=>r!==null);this._native.addMarkers(t)}}clearMarkers(){this._markers.forEach(n=>n.remove()),this._markers=[],this._native&&(this._native.markers=[])}render(){this._native?.render()}set onClusterClick(n){this._onClusterClick=n,this._native&&(this._native._onClusterClick=n)}set onNonExpandableClusterClick(n){this._onNonExpandableClusterClick=n}getMarkers(){return this._markers}getMap(){return this._map}getNative(){return this._native}}const H={};function Je(){return window.Voxel_Config?.ajax_url?window.Voxel_Config.ajax_url:`${window.location.origin}/?vx=1`}function Ke(){return`<div class="ts-map-nav">
		<a href="#" class="ts-map-prev ts-icon-btn"><svg width="80" height="80" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.746 6.00002C10.746 5.69663 10.5632 5.42312 10.2829 5.30707C10.0026 5.19101 9.67996 5.25526 9.4655 5.46986L3.51254 11.4266C3.35184 11.5642 3.25 11.7685 3.25 11.9966V11.9982C3.24959 12.1906 3.32276 12.3831 3.46949 12.53L9.46548 18.5302C9.67994 18.7448 10.0026 18.809 10.2829 18.693C10.5632 18.5769 10.746 18.3034 10.746 18L10.746 12.7466L20.0014 12.7466C20.4156 12.7466 20.7514 12.4108 20.7514 11.9966C20.7514 11.5824 20.4156 11.2466 20.0014 11.2466L10.746 11.2466V6.00002Z" fill="#343C54"/></svg></a>
		<a href="#" class="ts-map-next ts-icon-btn"><svg width="80" height="80" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.5359 5.46986C14.3214 5.25526 13.9988 5.19101 13.7185 5.30707C13.4382 5.42312 13.2554 5.69663 13.2554 6.00002V11.2466L4 11.2466C3.58579 11.2466 3.25 11.5824 3.25 11.9966C3.25 12.4108 3.58579 12.7466 4 12.7466L13.2554 12.7466V18C13.2554 18.3034 13.4382 18.5769 13.7185 18.693C13.9988 18.809 14.3214 18.7448 14.5359 18.5302L20.5319 12.53C20.6786 12.3831 20.7518 12.1905 20.7514 11.9981L20.7514 11.9966C20.7514 11.7685 20.6495 11.5642 20.4888 11.4266L14.5359 5.46986Z" fill="#343C54"/></svg></a>
	</div>`}async function Xe(e,n,t,r,s){if(!n||n.length===0)return[];const o=[],v={};for(let l=0;l<n.length;l++){const c=n[l],p=String(c.postId||""),m=c.uriencoded?decodeURIComponent(c.template):c.template,f={position:new S(c.lat,c.lng),template:m,onClick:(h,g)=>{if(!p){const i=g.getPosition();i&&(t.setPosition(i),t.setContent(m),t.show());return}o.forEach(i=>i.removeClass("marker-active")),g.addClass("marker-active"),e.addListener("click",function(){g.removeClass("marker-active"),t.hide()});const R=i=>{if(o.length>1){i.querySelector(".ts-map-nav")||i.insertAdjacentHTML("beforeend",Ke());const B=i.querySelector(".ts-map-prev"),C=i.querySelector(".ts-map-next"),M=Object.keys(v),y=M.indexOf(p);B?.addEventListener("click",b=>{if(b.preventDefault(),b.stopPropagation(),y!==-1){const G=y>0?y-1:M.length-1,w=v[M[G]];if(w){const I=w.getNative();I?.onClick&&I.onClick(new Event("click"),I)}}}),C?.addEventListener("click",b=>{if(b.preventDefault(),b.stopPropagation(),y!==-1){const G=M.length>y+1?y+1:0,w=v[M[G]];if(w){const I=w.getNative();I?.onClick&&I.onClick(new Event("click"),I)}}})}const u=g.getPosition();u&&(t.setPosition(u),t.setContent(i),t.show())};if(H[p]){const i=document.createElement("div");i.className="ts-preview-popup",i.innerHTML=H[p],R(i);return}const Z=document.querySelector(`.ts-preview[data-post-id="${p}"]`);if(Z){const i=Z.cloneNode(!0);i.classList.remove("ts-preview"),i.classList.add("ts-preview-popup"),i.removeAttribute("style"),H[p]=i.innerHTML,R(i);return}const P=document.createElement("div");P.className="ts-preview-popup ts-loading-popup",P.innerHTML='<span class="ts-loader"></span>';const A=g.getPosition();A&&(t.setPosition(A),t.setContent(P),t.show());const W=Je();fetch(`${W}&action=get_preview_card&post_id=${p}`).then(i=>i.text()).then(i=>{const u=document.createElement("div");u.className="ts-preview-popup",u.innerHTML=i,H[p]=i,R(u)}).catch(()=>{const i=document.createElement("div");i.className="ts-preview-popup",H[p]="",R(i)})},data:{lat:c.lat,lng:c.lng,postId:p}},d=new Ue(f);d.init(e),o.push(d),p&&(v[p]=d)}return r&&o.length>0&&r.addMarkers(o),o}function Qe(){Object.keys(H).forEach(e=>delete H[e])}function Ye(){return`map-${Math.random().toString(36).substring(2,11)}`}function et({attributes:e,setAttributes:n,clientId:t}){const r=e.blockId||"map",s=le(e,{blockId:r,baseClass:"voxel-fse-map-editor ts-map-widget elementor-widget-ts-map",selectorPrefix:"voxel-fse-map"}),o=te(()=>ce(e,r),[e,r]),v=te(()=>[s.responsiveCSS,o].filter(Boolean).join(`
`),[s.responsiveCSS,o]),l=re({className:s.className,style:s.styles}),c=N(null),p=N(null),m=N(null),f=N(!1),d=N([]),h=N(null),g=N(null),[R,Z]=ge(!1);F(()=>{e.blockId||n({blockId:Ye()})},[e.blockId,n]),F(()=>{const i="voxel-map-css";if(!document.getElementById(i)){const u=document.createElement("link");u.id=i,u.rel="stylesheet";const B=(window.Voxel_Config?.site_url||window.location.origin).replace(/\/$/,"");u.href=`${B}/wp-content/themes/voxel/assets/dist/map.css?ver=1.7.5.2`,document.head.appendChild(u)}},[]);const P=xe(i=>{const{getBlocks:u}=i("core/block-editor"),$=(B,C)=>{let M=[];return B.forEach(y=>{y.name===C&&y.clientId!==t&&M.push(y),y.innerBlocks&&y.innerBlocks.length>0&&(M=M.concat($(y.innerBlocks,C)))}),M};return $(u(),"voxel-fse/search-form")},[t]),A=ve(()=>{if(!p.current||f.current)return;const i=window.Voxel;if(!i?.Maps){console.warn("[Map Block] Voxel.Maps not available yet");return}f.current=!0,i.Maps.await(()=>{if(p.current)try{const u=new De({el:p.current,zoom:e.defaultZoom,center:new S(e.defaultLat,e.defaultLng),minZoom:e.minZoom,maxZoom:e.maxZoom});u.init().then(()=>{m.current=u,Z(!0),console.log("[Map Block] Interactive map initialized in editor")}).catch($=>{f.current=!1,console.error("[Map Block] Failed to initialize map:",$)})}catch(u){f.current=!1,console.error("[Map Block] Failed to initialize map:",u)}})},[e.defaultLat,e.defaultLng,e.defaultZoom,e.minZoom,e.maxZoom]);F(()=>{const i=setTimeout(()=>{A()},100);return()=>clearTimeout(i)},[A]),F(()=>{m.current&&f.current&&(m.current.setCenter(new S(e.defaultLat,e.defaultLng)),m.current.setZoom(e.defaultZoom))},[e.defaultLat,e.defaultLng,e.defaultZoom]),F(()=>{if(c.current){const i=ie(e);We(c.current,i)}},[e]),F(()=>{if(!R||!m.current)return;let i="",u=!1;if(!g.current){const C=new Ge({});C.init(m.current),g.current=C}const B=setTimeout(async()=>{if(u||!m.current)return;const C=document.querySelectorAll(".ts-preview[data-post-id]");if(C.length===0)return;const M=Array.from(C).map(b=>parseInt(b.getAttribute("data-post-id")||"0",10)).filter(b=>b>0);if(M.length===0)return;const y=M.sort().join(",");if(y!==i){u=!0;try{const b=window.wpApiSettings?.root||"/wp-json/",w=await(await fetch(`${b}voxel-fse/v1/map/markers`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.wpApiSettings?.nonce||""},body:JSON.stringify({post_ids:M})})).json();if(!w.success||!w.markers||!m.current)return;d.current.forEach(T=>T.remove()),d.current=[],h.current=null,Qe();const I=m.current,pe=g.current,me=w.markers.map(T=>({lat:T.lat,lng:T.lng,template:T.template,postId:T.postId}));let j=null;try{j=new qe,await j.init(I),h.current=j}catch(T){console.warn("[Map Block] Editor: clusterer init failed:",T)}const de=await Xe(I,me,pe,j);d.current=de,j&&j.render(),i=y,console.log("[Map Block] Editor: loaded",w.markers.length,"markers with popups")}catch(b){console.warn("[Map Block] Editor: failed to load markers:",b)}finally{u=!1}}},1500);return()=>{clearTimeout(B),d.current.forEach(C=>C.remove()),d.current=[],h.current=null}},[R]);const W=()=>React.createElement(ae,{attributes:e,setAttributes:n,stateAttribute:"mapContentAccordion",defaultPanel:"map-settings"},React.createElement(z,{id:"map-settings",title:a("Map settings","voxel-fse")},React.createElement(q,{label:a("Markers","voxel-fse"),value:e.source,options:[{label:a("Get markers from Search Form widget","voxel-fse"),value:"search-form"},{label:a("Show marker of current post","voxel-fse"),value:"current-post"}],onChange:i=>n({source:i})}),e.source==="search-form"&&React.createElement(React.Fragment,null,React.createElement($e,{label:a("Link to search form","voxel-fse"),items:P.map(i=>({id:i.attributes.blockId||i.clientId,clientId:i.clientId,label:i.attributes.blockId||i.clientId.substring(0,7)})),selectedId:e.searchFormId,onSelect:i=>n({searchFormId:i??""}),widgetType:"SearchForm",description:a("Select the search form to link this map to.","voxel-fse")}),React.createElement(oe,{label:a('Show "Search this area" button',"voxel-fse"),checked:e.dragSearch,onChange:i=>n({dragSearch:i})}),e.dragSearch&&React.createElement(React.Fragment,null,React.createElement(q,{label:a("Search mode","voxel-fse"),value:e.dragSearchMode,options:[{label:a("Automatic: Search is performed automatically as the user drags the map","voxel-fse"),value:"automatic"},{label:a("Manual: Search is performed when the button is clicked","voxel-fse"),value:"manual"}],onChange:i=>n({dragSearchMode:i})}),e.dragSearchMode==="automatic"&&React.createElement(q,{label:a("Map drag default state","voxel-fse"),help:a("If enabled, dragging the map will trigger a search for posts within the visible map bounds.","voxel-fse"),value:e.dragSearchDefault,options:[{label:a("Checked","voxel-fse"),value:"checked"},{label:a("Unchecked","voxel-fse"),value:"unchecked"}],onChange:i=>n({dragSearchDefault:i})}))),React.createElement(_,{label:a("Height","voxel-fse"),attributes:e,setAttributes:n,attributeBaseName:"height",min:100,max:1200,step:1}),React.createElement(oe,{label:a("Calculate height?","voxel-fse"),checked:e.enableCalcHeight,onChange:i=>n({enableCalcHeight:i})}),e.enableCalcHeight&&React.createElement(V,{label:a("Calculation","voxel-fse"),help:a("Use CSS calc() to calculate height e.g calc(100vh - 215px)","voxel-fse"),value:e.calcHeight,onChange:i=>n({calcHeight:i}),placeholder:"calc(100vh - 70px)"}),React.createElement(_,{label:a("Border radius","voxel-fse"),attributes:e,setAttributes:n,attributeBaseName:"mapBorderRadius",min:0,max:100,step:1})),React.createElement(z,{id:"default-location",title:a("Default map location","voxel-fse")},React.createElement("div",{style:{display:"flex",gap:"10px"}},React.createElement(V,{label:a("Default latitude","voxel-fse"),type:"number",value:String(e.defaultLat),onChange:i=>n({defaultLat:parseFloat(i)||0}),help:a("-90 to 90","voxel-fse")}),React.createElement(V,{label:a("Default longitude","voxel-fse"),type:"number",value:String(e.defaultLng),onChange:i=>n({defaultLng:parseFloat(i)||0}),help:a("-180 to 180","voxel-fse")})),React.createElement(J,{label:a("Default zoom level","voxel-fse"),value:e.defaultZoom,onChange:i=>n({defaultZoom:i}),min:0,max:30}),React.createElement("div",{style:{display:"flex",gap:"10px"}},React.createElement(J,{label:a("Minimum zoom level","voxel-fse"),value:e.minZoom,onChange:i=>n({minZoom:i}),min:0,max:30}),React.createElement(J,{label:a("Maximum zoom level","voxel-fse"),value:e.maxZoom,onChange:i=>n({maxZoom:i}),min:0,max:30}))));return React.createElement(React.Fragment,null,React.createElement(fe,null,React.createElement(ye,{tabs:[{id:"content",label:a("Content","voxel-fse"),icon:"",render:W},{id:"style",label:a("Style","voxel-fse"),icon:"",render:()=>React.createElement(Oe,{attributes:e,setAttributes:n,context:"editor"})},{id:"advanced",label:a("Advanced","voxel-fse"),icon:"",render:()=>React.createElement(ke,{attributes:e,setAttributes:n})},{id:"voxel",label:a("Voxel","voxel-fse"),icon:"/wp-content/themes/voxel/assets/images/post-types/logo.svg",render:()=>React.createElement(_e,{attributes:e,setAttributes:n})}]})),React.createElement("div",{...l,ref:c},v&&React.createElement("style",{dangerouslySetInnerHTML:{__html:v}}),e.source==="search-form"&&e.dragSearch&&React.createElement("div",{className:"ts-map-drag"},e.dragSearchMode==="automatic"?React.createElement("a",{href:"#",className:`ts-map-btn ts-drag-toggle ${e.dragSearchDefault==="checked"?"active":""}`,onClick:i=>i.preventDefault()},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor"},React.createElement("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})),a("Search as I move the map","voxel-fse")):React.createElement("a",{href:"#",className:"ts-search-area ts-map-btn",onClick:i=>i.preventDefault()},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor"},React.createElement("path",{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})),a("Search this area","voxel-fse"))),React.createElement("a",{href:"#",rel:"nofollow",role:"button",className:"vx-geolocate-me","aria-label":a("Share your location","voxel-fse"),onClick:i=>{i.preventDefault();const u=i.currentTarget;if(u.classList.add("loading"),!navigator.geolocation){u.classList.remove("loading");const $=window.Voxel_Config?.l10n?.positionFail||"Geolocation is not supported by your browser.";typeof window.Voxel?.alert=="function"?window.Voxel.alert($,"error"):console.warn("[Map Block]",$);return}navigator.geolocation.getCurrentPosition($=>{u.classList.remove("loading");const{latitude:B,longitude:C}=$.coords;m.current&&(m.current.setCenter(new S(B,C)),m.current.setZoom(15)),n({defaultLat:B,defaultLng:C,defaultZoom:15}),console.log("[Map Block] Geolocation success:",B,C)},$=>{u.classList.remove("loading");const B=window.Voxel_Config?.l10n?.positionFail||"Could not determine your location.";typeof window.Voxel?.alert=="function"?window.Voxel.alert(B,"error"):console.warn("[Map Block]",B)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})},style:{display:"flex",position:"absolute",top:"8px",left:"8px",width:"32px",height:"32px",backgroundColor:"#fff",boxShadow:"0 1px 4px -1px rgba(0,0,0,.3)",padding:"5px",borderRadius:"2px",alignItems:"center",justifyContent:"center",zIndex:5}},React.createElement("svg",{width:"22",height:"22",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{opacity:.6}},React.createElement("path",{d:"M12.4025 9.44141C10.884 9.44141 9.65283 10.6727 9.65283 12.1914C9.65283 13.7101 10.884 14.9414 12.4025 14.9414C13.921 14.9414 15.1522 13.7101 15.1522 12.1914C15.1522 10.6727 13.921 9.44141 12.4025 9.44141Z",fill:"currentColor"}),React.createElement("path",{d:"M13.1523 2.19141C13.1523 1.77719 12.8166 1.44141 12.4023 1.44141C11.9881 1.44141 11.6523 1.77719 11.6523 2.19141V3.72405C7.5566 4.0822 4.29367 7.34575 3.93549 11.4414H2.40234C1.98813 11.4414 1.65234 11.7772 1.65234 12.1914C1.65234 12.6056 1.98813 12.9414 2.40234 12.9414H3.93545C4.29344 17.0373 7.55645 20.301 11.6523 20.6592V22.1914C11.6523 22.6056 11.9881 22.9414 12.4023 22.9414C12.8166 22.9414 13.1523 22.6056 13.1523 22.1914V20.6592C17.2482 20.301 20.5113 17.0373 20.8692 12.9414H22.4023C22.8166 12.9414 23.1523 12.6056 23.1523 12.1914C23.1523 11.7772 22.8166 11.4414 22.4023 11.4414H20.8692C20.511 7.34575 17.2481 4.0822 13.1523 3.72405V2.19141ZM12.4025 7.94141C14.7496 7.94141 16.6522 9.84446 16.6522 12.1914C16.6522 14.5383 14.7496 16.4414 12.4025 16.4414C10.0554 16.4414 8.15283 14.5384 8.15283 12.1914C8.15283 9.84446 10.0554 7.94141 12.4025 7.94141ZM12.4025 9.44141C10.884 9.44141 9.65283 10.6727 9.65283 12.1914C9.65283 13.7101 10.884 14.9414 12.4025 14.9414C13.921 14.9414 15.1522 13.7101 15.1522 12.1914C15.1522 10.6727 13.921 9.44141 12.4025 9.44141Z",fill:"currentColor"}))),React.createElement("div",{style:{position:"relative"}},!R&&React.createElement(Me,{icon:"",text:a("Loading map...","voxel-fse"),style:{position:"absolute",inset:0,zIndex:10,height:e.enableCalcHeight&&e.calcHeight?e.calcHeight:`${e.height||400}${e.heightUnit||"px"}`,borderRadius:`${e.borderRadius||0}px`}}),React.createElement("div",{ref:p,className:"ts-map",style:{height:e.enableCalcHeight&&e.calcHeight?e.calcHeight:`${e.height||400}${e.heightUnit||"px"}`,borderRadius:`${e.borderRadius||0}px`},"data-config":JSON.stringify({center:{lat:e.defaultLat,lng:e.defaultLng},zoom:e.defaultZoom,minZoom:e.minZoom,maxZoom:e.maxZoom})})),React.createElement("div",{style:{display:"none"}},React.createElement("svg",{id:"ts-symbol-marker",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M3 10.9696C3 6.01585 7.02944 2 12 2C16.9706 2 21 6.01585 21 10.9696C21 16.3296 15.929 20.2049 12.7799 21.8117C12.2877 22.0628 11.7123 22.0628 11.2201 21.8117C8.07101 20.2049 3 16.3296 3 10.9696ZM12 14.6136C13.933 14.6136 15.5 13.0323 15.5 11.0818C15.5 9.13121 13.933 7.54997 12 7.54997C10.067 7.54997 8.5 9.13121 8.5 11.0818C8.5 13.0323 10.067 14.6136 12 14.6136Z"})))))}function tt({attributes:e}){const n=e.blockId||"map",t=le(e,{blockId:n,baseClass:"voxel-fse-map ts-map-widget elementor-widget-ts-map",selectorPrefix:"voxel-fse-map"}),r=ce(e,n),s=[t.responsiveCSS,r].filter(Boolean).join(`
`),o=re.save({id:t.elementId,className:t.className,style:t.styles,"data-source":e.source,"data-search-form-id":e.searchFormId||void 0,"data-visibility-behavior":e.visibilityBehavior||void 0,"data-visibility-rules":e.visibilityRules?.length?JSON.stringify(e.visibilityRules):void 0,"data-loop-source":e.loopSource||void 0,"data-loop-property":e.loopProperty||void 0,"data-loop-limit":e.loopLimit||void 0,"data-loop-offset":e.loopOffset||void 0,...t.customAttrs}),v=ie(e);return React.createElement("div",{...o},s&&React.createElement("style",{dangerouslySetInnerHTML:{__html:s}}),React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(v)}}),be(e,!1,void 0,void 0,t.uniqueSelector),React.createElement("div",{className:"voxel-fse-block-placeholder",style:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#e8e8e8",minHeight:"200px",borderRadius:"4px"}},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"48",height:"48",fill:"#999"},React.createElement("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"}))))}const ot=()=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor"},React.createElement("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"}));he(Q.name,{...Q,attributes:{...Q.attributes,...Ce,...Be},icon:ot,edit:et,save:tt});
