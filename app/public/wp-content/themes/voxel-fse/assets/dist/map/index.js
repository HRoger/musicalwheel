import{registerBlockType as Be}from"@wordpress/blocks";import V,{useMemo as le,useRef as Z,useState as Me,useEffect as O,useCallback as $e}from"react";import{__ as i}from"@wordpress/i18n";import{useBlockProps as me,InspectorControls as be}from"@wordpress/block-editor";import{TextControl as F,SelectControl as Q,ToggleControl as ce,RangeControl as Y}from"@wordpress/components";import{useSelect as se}from"@wordpress/data";import{A as de,a as E,R as S,C as y,c as G,T as ee,S as q,B as Se,p as Re,n as he}from"../TypographyPopup-CkDwan7Z.js";import{I as we,V as Ie,v as ge}from"../InspectorTabs-C-Yyx0JZ.js";import"../RepeaterControl-DaYyJwAm.js";import"@wordpress/api-fetch";/* empty css                            */import{E as ze}from"../EmptyPlaceholder-CnO9R1NI.js";import{R as Ee}from"../RelationControl-CbkPNcIm.js";import"../voxelShim-DB_Ue-9R.js";import{g as ve}from"../useAdvancedTabProps-BnJDQbKr.js";import{r as Te}from"../backgroundElements-BCKss4qj.js";import{I as te}from"../IconPickerControl-BEkvF1LS.js";import"react-dom";import"../generateAdvancedStyles-CRpLcHXt.js";import"../generateVoxelStyles-oZeaeuKH.js";const Pe=({label:e,values:n,onChange:t,placeholder:r="0px"})=>{const c=(o,u)=>{t({...n,[o]:u})};return V.createElement("div",{className:"voxel-fse-box-control"},V.createElement("label",{className:"components-base-control__label"},e),V.createElement("div",{className:"voxel-fse-box-control__grid"},V.createElement(F,{label:i("Top","voxel-fse"),value:n?.top||"",onChange:o=>c("top",o),placeholder:r}),V.createElement(F,{label:i("Right","voxel-fse"),value:n?.right||"",onChange:o=>c("right",o),placeholder:r}),V.createElement(F,{label:i("Bottom","voxel-fse"),value:n?.bottom||"",onChange:o=>c("bottom",o),placeholder:r}),V.createElement(F,{label:i("Left","voxel-fse"),value:n?.left||"",onChange:o=>c("left",o),placeholder:r})))},Ae="https://schemas.wp.org/trunk/block.json",Le=3,Ne="voxel-fse/map",He="1.0.0",Ve="Map (VX)",Ze="voxel-fse",je="Interactive map displaying markers from search results or current post location.",Fe=["map","location","markers","google maps","mapbox","voxel"],We="voxel-fse",Ue={html:!1,align:["wide","full"],anchor:!0,className:!0,customClassName:!0},De="file:./index.js",Oe="file:./frontend.js",Ge="file:./render.php",qe={blockId:{type:"string",default:""},source:{type:"string",default:"search-form",enum:["search-form","current-post"]},searchFormId:{type:"string",default:""},dragSearch:{type:"boolean",default:!0},dragSearchMode:{type:"string",default:"manual",enum:["automatic","manual"]},dragSearchDefault:{type:"string",default:"unchecked",enum:["checked","unchecked"]},height:{type:"number",default:400},height_tablet:{type:"number"},height_mobile:{type:"number"},heightUnit:{type:"string",default:"px"},enableCalcHeight:{type:"boolean",default:!1},enableCalcHeight_tablet:{type:"boolean"},enableCalcHeight_mobile:{type:"boolean"},calcHeight:{type:"string",default:""},calcHeight_tablet:{type:"string"},calcHeight_mobile:{type:"string"},mapBorderRadius:{type:"number",default:0},mapBorderRadius_tablet:{type:"number"},mapBorderRadius_mobile:{type:"number"},defaultLat:{type:"number",default:51.492},defaultLng:{type:"number",default:-.13},defaultZoom:{type:"number",default:11},minZoom:{type:"number",default:2},maxZoom:{type:"number",default:18},clusterSize:{type:"number"},clusterSize_tablet:{type:"number"},clusterSize_mobile:{type:"number"},clusterBgColor:{type:"string"},clusterBgColor_tablet:{type:"string"},clusterBgColor_mobile:{type:"string"},clusterShadow:{type:"object",default:{}},clusterRadius:{type:"number"},clusterRadius_tablet:{type:"number"},clusterRadius_mobile:{type:"number"},clusterTypography:{type:"object",default:{}},clusterTextColor:{type:"string"},clusterTextColor_tablet:{type:"string"},clusterTextColor_mobile:{type:"string"},iconMarkerSize:{type:"number"},iconMarkerSize_tablet:{type:"number"},iconMarkerSize_mobile:{type:"number"},iconMarkerIconSize:{type:"number"},iconMarkerIconSize_tablet:{type:"number"},iconMarkerIconSize_mobile:{type:"number"},iconMarkerRadius:{type:"number"},iconMarkerRadius_tablet:{type:"number"},iconMarkerRadius_mobile:{type:"number"},iconMarkerShadow:{type:"object",default:{}},iconMarkerStaticBg:{type:"string"},iconMarkerStaticBg_tablet:{type:"string"},iconMarkerStaticBg_mobile:{type:"string"},iconMarkerStaticBgActive:{type:"string"},iconMarkerStaticBgActive_tablet:{type:"string"},iconMarkerStaticBgActive_mobile:{type:"string"},iconMarkerStaticIconColor:{type:"string"},iconMarkerStaticIconColor_tablet:{type:"string"},iconMarkerStaticIconColor_mobile:{type:"string"},iconMarkerStaticIconColorActive:{type:"string"},iconMarkerStaticIconColorActive_tablet:{type:"string"},iconMarkerStaticIconColorActive_mobile:{type:"string"},textMarkerBgColor:{type:"string"},textMarkerBgColor_tablet:{type:"string"},textMarkerBgColor_mobile:{type:"string"},textMarkerBgColorActive:{type:"string"},textMarkerBgColorActive_tablet:{type:"string"},textMarkerBgColorActive_mobile:{type:"string"},textMarkerTextColor:{type:"string"},textMarkerTextColor_tablet:{type:"string"},textMarkerTextColor_mobile:{type:"string"},textMarkerTextColorActive:{type:"string"},textMarkerTextColorActive_tablet:{type:"string"},textMarkerTextColorActive_mobile:{type:"string"},textMarkerRadius:{type:"number"},textMarkerRadius_tablet:{type:"number"},textMarkerRadius_mobile:{type:"number"},textMarkerTypography:{type:"object",default:{}},textMarkerPadding:{type:"object",default:{}},textMarkerPadding_tablet:{type:"object"},textMarkerPadding_mobile:{type:"object"},textMarkerShadow:{type:"object",default:{}},imageMarkerSize:{type:"number"},imageMarkerSize_tablet:{type:"number"},imageMarkerSize_mobile:{type:"number"},imageMarkerRadius:{type:"number"},imageMarkerRadius_tablet:{type:"number"},imageMarkerRadius_mobile:{type:"number"},imageMarkerShadow:{type:"object",default:{}},popupCardWidth:{type:"number",default:270},popupCardWidth_tablet:{type:"number"},popupCardWidth_mobile:{type:"number"},popupLoaderColor1:{type:"string"},popupLoaderColor2:{type:"string"},searchBtnTypography:{type:"object",default:{}},searchBtnTextColor:{type:"string"},searchBtnTextColor_tablet:{type:"string"},searchBtnTextColor_mobile:{type:"string"},searchBtnBgColor:{type:"string"},searchBtnBgColor_tablet:{type:"string"},searchBtnBgColor_mobile:{type:"string"},searchBtnIconColor:{type:"string"},searchBtnIconColor_tablet:{type:"string"},searchBtnIconColor_mobile:{type:"string"},searchBtnIconColorActive:{type:"string"},searchBtnIconColorActive_tablet:{type:"string"},searchBtnIconColorActive_mobile:{type:"string"},searchBtnRadius:{type:"number"},searchBtnRadius_tablet:{type:"number"},searchBtnRadius_mobile:{type:"number"},checkmarkIcon:{type:"object",default:{}},searchIcon:{type:"object",default:{}},geolocationIcon:{type:"object",default:{}},navBtnIconColor:{type:"string"},navBtnIconSize:{type:"number"},navBtnIconSize_tablet:{type:"number"},navBtnIconSize_mobile:{type:"number"},navBtnBgColor:{type:"string"},navBtnBorder:{type:"object",default:{borderType:"none",borderWidth:{},borderColor:""}},navBtnRadius:{type:"number",default:50},navBtnRadius_tablet:{type:"number"},navBtnRadius_mobile:{type:"number"},navBtnShadow:{type:"object",default:{}},navBtnSize:{type:"number"},navBtnSize_tablet:{type:"number"},navBtnSize_mobile:{type:"number"},navBtnIconColorHover:{type:"string"},navBtnBgColorHover:{type:"string"},navBtnBorderColorHover:{type:"string"},mapContentAccordion:{type:"string",default:"map-settings"},mapStyleAccordion:{type:"string",default:"clusters"},_comment_voxel_tab:"VoxelTab attributes for visibility and loop features",visibilityBehavior:{type:"string",default:"show",enum:["show","hide"]},visibilityRules:{type:"array",default:[],items:{type:"object"}},loopEnabled:{type:"boolean",default:!1},loopSource:{type:"string",default:""},loopProperty:{type:"string",default:""},loopLimit:{type:"string",default:""},loopOffset:{type:"string",default:""}},X={$schema:Ae,apiVersion:Le,name:Ne,version:He,title:Ve,category:Ze,description:je,keywords:Fe,textdomain:We,supports:Ue,editorScript:De,viewScript:Oe,render:Ge,attributes:qe};function fe(e){return{blockId:e.blockId,source:e.source,searchFormId:e.searchFormId,dragSearch:e.dragSearch,dragSearchMode:e.dragSearchMode,dragSearchDefault:e.dragSearchDefault,center:{lat:e.defaultLat,lng:e.defaultLng},zoom:e.defaultZoom,minZoom:e.minZoom,maxZoom:e.maxZoom,styles:{height:{desktop:e.height,tablet:e.height_tablet,mobile:e.height_mobile},heightUnit:e.heightUnit,calcHeight:{desktop:e.calcHeight,tablet:e.calcHeight_tablet,mobile:e.calcHeight_mobile},enableCalcHeight:{desktop:e.enableCalcHeight,tablet:e.enableCalcHeight_tablet,mobile:e.enableCalcHeight_mobile},borderRadius:{desktop:e.mapBorderRadius,tablet:e.mapBorderRadius_tablet,mobile:e.mapBorderRadius_mobile},cluster:{size:{desktop:e.clusterSize,tablet:e.clusterSize_tablet,mobile:e.clusterSize_mobile},bgColor:{desktop:e.clusterBgColor,tablet:e.clusterBgColor_tablet,mobile:e.clusterBgColor_mobile},shadow:e.clusterShadow,radius:{desktop:e.clusterRadius,tablet:e.clusterRadius_tablet,mobile:e.clusterRadius_mobile},typography:e.clusterTypography,textColor:{desktop:e.clusterTextColor,tablet:e.clusterTextColor_tablet,mobile:e.clusterTextColor_mobile}},iconMarker:{size:{desktop:e.iconMarkerSize,tablet:e.iconMarkerSize_tablet,mobile:e.iconMarkerSize_mobile},iconSize:{desktop:e.iconMarkerIconSize,tablet:e.iconMarkerIconSize_tablet,mobile:e.iconMarkerSize_mobile},radius:{desktop:e.iconMarkerRadius,tablet:e.iconMarkerRadius_tablet,mobile:e.iconMarkerRadius_mobile},shadow:e.iconMarkerShadow,staticBg:{desktop:e.iconMarkerStaticBg,tablet:e.iconMarkerStaticBg_tablet,mobile:e.iconMarkerStaticBg_mobile},staticBgActive:{desktop:e.iconMarkerStaticBgActive,tablet:e.iconMarkerStaticBgActive_tablet,mobile:e.iconMarkerStaticBgActive_mobile},staticIconColor:{desktop:e.iconMarkerStaticIconColor,tablet:e.iconMarkerStaticIconColor_tablet,mobile:e.iconMarkerStaticIconColor_mobile},staticIconColorActive:{desktop:e.iconMarkerStaticIconColorActive,tablet:e.iconMarkerStaticIconColorActive_tablet,mobile:e.iconMarkerStaticIconColorActive_mobile}},textMarker:{bgColor:{desktop:e.textMarkerBgColor,tablet:e.textMarkerBgColor_tablet,mobile:e.textMarkerBgColor_mobile},bgColorActive:{desktop:e.textMarkerBgColorActive,tablet:e.textMarkerBgColorActive_tablet,mobile:e.textMarkerBgColorActive_mobile},textColor:{desktop:e.textMarkerTextColor,tablet:e.textMarkerTextColor_tablet,mobile:e.textMarkerTextColor_mobile},textColorActive:{desktop:e.textMarkerTextColorActive,tablet:e.textMarkerTextColorActive_tablet,mobile:e.textMarkerTextColorActive_mobile},radius:{desktop:e.textMarkerRadius,tablet:e.textMarkerRadius_tablet,mobile:e.textMarkerRadius_mobile},typography:e.textMarkerTypography,padding:{desktop:e.textMarkerPadding,tablet:e.textMarkerPadding_tablet,mobile:e.textMarkerPadding_mobile},shadow:e.textMarkerShadow},imageMarker:{size:{desktop:e.imageMarkerSize,tablet:e.imageMarkerSize_tablet,mobile:e.imageMarkerSize_mobile},radius:{desktop:e.imageMarkerRadius,tablet:e.imageMarkerRadius_tablet,mobile:e.imageMarkerRadius_mobile},shadow:e.imageMarkerShadow},popup:{cardWidth:{desktop:e.popupCardWidth,tablet:e.popupCardWidth_tablet,mobile:e.popupCardWidth_mobile},loaderColor1:e.popupLoaderColor1,loaderColor2:e.popupLoaderColor2},searchBtn:{typography:e.searchBtnTypography,textColor:{desktop:e.searchBtnTextColor,tablet:e.searchBtnTextColor_tablet,mobile:e.searchBtnTextColor_mobile},bgColor:{desktop:e.searchBtnBgColor,tablet:e.searchBtnBgColor_tablet,mobile:e.searchBtnBgColor_mobile},iconColor:{desktop:e.searchBtnIconColor,tablet:e.searchBtnIconColor_tablet,mobile:e.searchBtnIconColor_mobile},iconColorActive:{desktop:e.searchBtnIconColorActive,tablet:e.searchBtnIconColorActive_tablet,mobile:e.searchBtnIconColorActive_mobile},radius:{desktop:e.searchBtnRadius,tablet:e.searchBtnRadius_tablet,mobile:e.searchBtnRadius_mobile},checkmarkIcon:e.checkmarkIcon,searchIcon:e.searchIcon},navBtn:{iconColor:e.navBtnIconColor,iconColorHover:e.navBtnIconColorHover,iconSize:{desktop:e.navBtnIconSize,tablet:e.navBtnIconSize_tablet,mobile:e.navBtnIconSize_mobile},bgColor:e.navBtnBgColor,bgColorHover:e.navBtnBgColorHover,border:e.navBtnBorder,borderColorHover:e.navBtnBorderColorHover,radius:{desktop:e.navBtnRadius,tablet:e.navBtnRadius_tablet,mobile:e.navBtnRadius_mobile},shadow:e.navBtnShadow,size:{desktop:e.navBtnSize,tablet:e.navBtnSize_tablet,mobile:e.navBtnSize_mobile}},geolocationIcon:e.geolocationIcon}}}function Je(){if(typeof window>"u")return"desktop";const e=window.innerWidth;return e<768?"mobile":e<1024?"tablet":"desktop"}function f(e,n){if(!e)return n;const t=Je();return t==="mobile"?e.mobile!==void 0?e.mobile:e.tablet!==void 0?e.tablet:e.desktop!==void 0?e.desktop:n:t==="tablet"&&e.tablet!==void 0?e.tablet:e.desktop!==void 0?e.desktop:n}function J(e){if(!e?.enable)return"none";const{horizontal:n=0,vertical:t=0,blur:r=0,spread:c=0,color:o="rgba(0,0,0,0.1)",position:u}=e;return`${u==="inset"?"inset ":""}${n}px ${t}px ${r}px ${c}px ${o}`}function oe(e){if(!e)return{};const n={};return e.fontFamily&&(n["font-family"]=e.fontFamily),e.fontSize&&(n["font-size"]=`${e.fontSize}${e.fontSizeUnit||"px"}`),e.fontWeight&&(n["font-weight"]=e.fontWeight),e.fontStyle&&(n["font-style"]=e.fontStyle),e.textTransform&&(n["text-transform"]=e.textTransform),e.textDecoration&&(n["text-decoration"]=e.textDecoration),e.lineHeight&&(n["line-height"]=`${e.lineHeight}${e.lineHeightUnit||""}`),e.letterSpacing&&(n["letter-spacing"]=`${e.letterSpacing}${e.letterSpacingUnit||"px"}`),n}function Ke(e,n){e.style.width="100%";const t=n.styles;if(!t)return;const r=f(t.height,400),c=t.heightUnit||"px",o=f(t.enableCalcHeight,!1),u=f(t.calcHeight,"");o&&u?e.style.setProperty("--vx-map-height",u):e.style.setProperty("--vx-map-height",`${r}${c}`);const a=f(t.borderRadius,0);if(e.style.setProperty("--vx-map-radius",`${a}px`),t.cluster){const l=f(t.cluster.size,40);e.style.setProperty("--vx-cluster-size",`${l}px`);const p=f(t.cluster.bgColor,"");p&&e.style.setProperty("--vx-cluster-bg",p);const m=f(t.cluster.radius,50);e.style.setProperty("--vx-cluster-radius",`${m}%`);const v=f(t.cluster.textColor,"");if(v&&e.style.setProperty("--vx-cluster-text-color",v),e.style.setProperty("--vx-cluster-shadow",J(t.cluster.shadow)),t.cluster.typography){const d=oe(t.cluster.typography);d["font-family"]&&e.style.setProperty("--vx-cluster-font-family",d["font-family"]),d["font-size"]&&e.style.setProperty("--vx-cluster-font-size",d["font-size"]),d["font-weight"]&&e.style.setProperty("--vx-cluster-font-weight",d["font-weight"]),d["font-style"]&&e.style.setProperty("--vx-cluster-font-style",d["font-style"]),d["line-height"]&&e.style.setProperty("--vx-cluster-line-height",d["line-height"]),d["letter-spacing"]&&e.style.setProperty("--vx-cluster-letter-spacing",d["letter-spacing"]),d["text-transform"]&&e.style.setProperty("--vx-cluster-text-transform",d["text-transform"]),d["text-decoration"]&&e.style.setProperty("--vx-cluster-text-decoration",d["text-decoration"])}}if(t.iconMarker){const l=f(t.iconMarker.size,42);e.style.setProperty("--vx-icon-marker-size",`${l}px`);const p=f(t.iconMarker.iconSize,24);e.style.setProperty("--vx-icon-marker-icon-size",`${p}px`);const m=f(t.iconMarker.radius,50);e.style.setProperty("--vx-icon-marker-radius",`${m}%`),e.style.setProperty("--vx-icon-marker-shadow",J(t.iconMarker.shadow));const v=f(t.iconMarker.staticBg,"");v&&e.style.setProperty("--vx-icon-marker-bg",v);const d=f(t.iconMarker.staticBgActive,"");d&&e.style.setProperty("--vx-icon-marker-bg-active",d);const g=f(t.iconMarker.staticIconColor,"");g&&e.style.setProperty("--vx-icon-marker-icon-color",g);const h=f(t.iconMarker.staticIconColorActive,"");h&&e.style.setProperty("--vx-icon-marker-icon-color-active",h)}if(t.textMarker){const l=f(t.textMarker.bgColor,"");l&&e.style.setProperty("--vx-text-marker-bg",l);const p=f(t.textMarker.bgColorActive,"");p&&e.style.setProperty("--vx-text-marker-bg-active",p);const m=f(t.textMarker.textColor,"");m&&e.style.setProperty("--vx-text-marker-text-color",m);const v=f(t.textMarker.textColorActive,"");v&&e.style.setProperty("--vx-text-marker-text-color-active",v);const d=f(t.textMarker.radius,4);if(e.style.setProperty("--vx-text-marker-radius",`${d}px`),e.style.setProperty("--vx-text-marker-shadow",J(t.textMarker.shadow)),t.textMarker.typography){const h=oe(t.textMarker.typography);h["font-family"]&&e.style.setProperty("--vx-text-marker-font-family",h["font-family"]),h["font-size"]&&e.style.setProperty("--vx-text-marker-font-size",h["font-size"]),h["font-weight"]&&e.style.setProperty("--vx-text-marker-font-weight",h["font-weight"]),h["font-style"]&&e.style.setProperty("--vx-text-marker-font-style",h["font-style"]),h["line-height"]&&e.style.setProperty("--vx-text-marker-line-height",h["line-height"]),h["letter-spacing"]&&e.style.setProperty("--vx-text-marker-letter-spacing",h["letter-spacing"]),h["text-transform"]&&e.style.setProperty("--vx-text-marker-text-transform",h["text-transform"]),h["text-decoration"]&&e.style.setProperty("--vx-text-marker-text-decoration",h["text-decoration"])}const g=f(t.textMarker.padding,{});if(g){const h=g;h.top&&e.style.setProperty("--vx-text-marker-padding-top",h.top),h.right&&e.style.setProperty("--vx-text-marker-padding-right",h.right),h.bottom&&e.style.setProperty("--vx-text-marker-padding-bottom",h.bottom),h.left&&e.style.setProperty("--vx-text-marker-padding-left",h.left)}}if(t.imageMarker){const l=f(t.imageMarker.size,42);e.style.setProperty("--vx-image-marker-size",`${l}px`);const p=f(t.imageMarker.radius,50);e.style.setProperty("--vx-image-marker-radius",`${p}%`),e.style.setProperty("--vx-image-marker-shadow",J(t.imageMarker.shadow))}if(t.popup){const l=f(t.popup.cardWidth,320);e.style.setProperty("--vx-popup-card-width",`${l}px`),t.popup.loaderColor1&&e.style.setProperty("--vx-popup-loader-color1",t.popup.loaderColor1),t.popup.loaderColor2&&e.style.setProperty("--vx-popup-loader-color2",t.popup.loaderColor2)}if(t.searchBtn){const l=f(t.searchBtn.textColor,"");l&&e.style.setProperty("--vx-search-btn-text-color",l);const p=f(t.searchBtn.bgColor,"");p&&e.style.setProperty("--vx-search-btn-bg",p);const m=f(t.searchBtn.iconColor,"");m&&e.style.setProperty("--vx-search-btn-icon-color",m);const v=f(t.searchBtn.iconColorActive,"");v&&e.style.setProperty("--vx-search-btn-icon-color-active",v);const d=f(t.searchBtn.radius,4);if(e.style.setProperty("--vx-search-btn-radius",`${d}px`),t.searchBtn.typography){const g=oe(t.searchBtn.typography);g["font-family"]&&e.style.setProperty("--vx-search-btn-font-family",g["font-family"]),g["font-size"]&&e.style.setProperty("--vx-search-btn-font-size",g["font-size"]),g["font-weight"]&&e.style.setProperty("--vx-search-btn-font-weight",g["font-weight"]),g["font-style"]&&e.style.setProperty("--vx-search-btn-font-style",g["font-style"]),g["line-height"]&&e.style.setProperty("--vx-search-btn-line-height",g["line-height"]),g["letter-spacing"]&&e.style.setProperty("--vx-search-btn-letter-spacing",g["letter-spacing"]),g["text-transform"]&&e.style.setProperty("--vx-search-btn-text-transform",g["text-transform"]),g["text-decoration"]&&e.style.setProperty("--vx-search-btn-text-decoration",g["text-decoration"])}if(t.searchBtn.checkmarkIcon){const g=t.searchBtn.checkmarkIcon;e.dataset.checkmarkIcon=JSON.stringify(g)}}if(t.navBtn){t.navBtn.iconColor&&e.style.setProperty("--vx-nav-btn-icon-color",t.navBtn.iconColor),t.navBtn.iconColorHover&&e.style.setProperty("--vx-nav-btn-icon-color-hover",t.navBtn.iconColorHover);const l=f(t.navBtn.iconSize,20);e.style.setProperty("--vx-nav-btn-icon-size",`${l}px`),t.navBtn.bgColor&&e.style.setProperty("--vx-nav-btn-bg",t.navBtn.bgColor),t.navBtn.bgColorHover&&e.style.setProperty("--vx-nav-btn-bg-hover",t.navBtn.bgColorHover);const p=f(t.navBtn.radius,4);e.style.setProperty("--vx-nav-btn-radius",`${p}px`);const m=f(t.navBtn.size,36);if(e.style.setProperty("--vx-nav-btn-size",`${m}px`),e.style.setProperty("--vx-nav-btn-shadow",J(t.navBtn.shadow)),t.navBtn.borderType&&t.navBtn.borderType!=="none"){e.style.setProperty("--vx-nav-btn-border-style",t.navBtn.borderType);const v=f(t.navBtn.borderWidth,0);e.style.setProperty("--vx-nav-btn-border-width",`${v}px`),t.navBtn.borderColor&&e.style.setProperty("--vx-nav-btn-border-color",t.navBtn.borderColor),t.navBtn.borderColorHover&&e.style.setProperty("--vx-nav-btn-border-color-hover",t.navBtn.borderColorHover)}}}function Xe({attributes:e,setAttributes:n}){const t=n;return React.createElement(de,{attributes:e,setAttributes:t,stateAttribute:"mapStyleAccordion",defaultPanel:"clusters"},React.createElement(E,{id:"clusters",title:i("Clusters","voxel-fse")},React.createElement(S,{label:i("Size","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"clusterSize",min:0,max:100,step:1}),React.createElement(y,{label:i("Background color","voxel-fse"),value:e.clusterBgColor,onChange:r=>t({clusterBgColor:r})}),React.createElement(G,{label:i("Box Shadow","voxel-fse"),attributes:e,setAttributes:t,shadowAttributeName:"clusterShadow"}),React.createElement(S,{label:i("Border radius","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"clusterRadius",min:0,max:100,step:1}),React.createElement(ee,{label:i("Typography","voxel-fse"),value:e.clusterTypography,onChange:r=>t({clusterTypography:r})}),React.createElement(y,{label:i("Text color","voxel-fse"),value:e.clusterTextColor,onChange:r=>t({clusterTextColor:r})})),React.createElement(E,{id:"icon-marker",title:i("Icon marker","voxel-fse")},React.createElement(q,{label:i("General","voxel-fse")}),React.createElement(S,{label:i("Marker size","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"iconMarkerSize",min:30,max:60,step:1}),React.createElement(S,{label:i("Marker icon size","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"iconMarkerIconSize",min:10,max:60,step:1}),React.createElement(S,{label:i("Border radius","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"iconMarkerRadius",min:0,max:100,step:1}),React.createElement(G,{label:i("Box Shadow","voxel-fse"),attributes:e,setAttributes:t,shadowAttributeName:"iconMarkerShadow"}),React.createElement(q,{label:i("Static marker","voxel-fse")}),React.createElement(y,{label:i("Background color","voxel-fse"),value:e.iconMarkerStaticBg,onChange:r=>t({iconMarkerStaticBg:r})}),React.createElement(y,{label:i("Background color (Active)","voxel-fse"),value:e.iconMarkerStaticBgActive,onChange:r=>t({iconMarkerStaticBgActive:r})}),React.createElement(y,{label:i("Icon color","voxel-fse"),value:e.iconMarkerStaticIconColor,onChange:r=>t({iconMarkerStaticIconColor:r})}),React.createElement(y,{label:i("Icon color (Active)","voxel-fse"),value:e.iconMarkerStaticIconColorActive,onChange:r=>t({iconMarkerStaticIconColorActive:r})})),React.createElement(E,{id:"text-marker",title:i("Text marker","voxel-fse")},React.createElement(y,{label:i("Background color","voxel-fse"),value:e.textMarkerBgColor,onChange:r=>t({textMarkerBgColor:r})}),React.createElement(y,{label:i("Background color (Active)","voxel-fse"),value:e.textMarkerBgColorActive,onChange:r=>t({textMarkerBgColorActive:r})}),React.createElement(y,{label:i("Text color","voxel-fse"),value:e.textMarkerTextColor,onChange:r=>t({textMarkerTextColor:r})}),React.createElement(y,{label:i("Text color (Active)","voxel-fse"),value:e.textMarkerTextColorActive,onChange:r=>t({textMarkerTextColorActive:r})}),React.createElement(S,{label:i("Border radius","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"textMarkerRadius",min:0,max:100,step:1}),React.createElement(ee,{label:i("Title typography","voxel-fse"),value:e.textMarkerTypography,onChange:r=>t({textMarkerTypography:r})}),React.createElement(Pe,{label:i("Padding","voxel-fse"),values:e.textMarkerPadding,onChange:r=>t({textMarkerPadding:r})}),React.createElement(G,{label:i("Box Shadow","voxel-fse"),attributes:e,setAttributes:t,shadowAttributeName:"textMarkerShadow"})),React.createElement(E,{id:"image-marker",title:i("Image marker","voxel-fse")},React.createElement(S,{label:i("Marker size","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"imageMarkerSize",min:30,max:60,step:1}),React.createElement(S,{label:i("Border radius","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"imageMarkerRadius",min:0,max:100,step:1}),React.createElement(G,{label:i("Box Shadow","voxel-fse"),attributes:e,setAttributes:t,shadowAttributeName:"imageMarkerShadow"})),React.createElement(E,{id:"map-popup",title:i("Map popup","voxel-fse")},React.createElement(S,{label:i("Card width","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"popupCardWidth",min:0,max:700,step:1}),React.createElement(q,{label:i("Loader","voxel-fse")}),React.createElement(y,{label:i("Color 1","voxel-fse"),value:e.popupLoaderColor1,onChange:r=>t({popupLoaderColor1:r})}),React.createElement(y,{label:i("Color 2","voxel-fse"),value:e.popupLoaderColor2,onChange:r=>t({popupLoaderColor2:r})})),React.createElement(E,{id:"search-button",title:i("Search button","voxel-fse")},React.createElement(ee,{label:i("Typography","voxel-fse"),value:e.searchBtnTypography,onChange:r=>t({searchBtnTypography:r})}),React.createElement(y,{label:i("Text color","voxel-fse"),value:e.searchBtnTextColor,onChange:r=>t({searchBtnTextColor:r})}),React.createElement(y,{label:i("Background color","voxel-fse"),value:e.searchBtnBgColor,onChange:r=>t({searchBtnBgColor:r})}),React.createElement(y,{label:i("Icon color","voxel-fse"),value:e.searchBtnIconColor,onChange:r=>t({searchBtnIconColor:r})}),React.createElement(y,{label:i("Icon color (Active)","voxel-fse"),value:e.searchBtnIconColorActive,onChange:r=>t({searchBtnIconColorActive:r})}),React.createElement(S,{label:i("Border radius","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"searchBtnRadius",min:0,max:100,step:1}),React.createElement(te,{label:i("Checkmark icon","voxel-fse"),value:e.checkmarkIcon,onChange:r=>t({checkmarkIcon:r})}),React.createElement(te,{label:i("Search icon","voxel-fse"),value:e.searchIcon,onChange:r=>t({searchIcon:r})})),React.createElement(E,{id:"nav-buttons",title:i("Next/Prev buttons","voxel-fse")},React.createElement(q,{label:i("Normal","voxel-fse")}),React.createElement(y,{label:i("Button icon color","voxel-fse"),value:e.navBtnIconColor,onChange:r=>t({navBtnIconColor:r})}),React.createElement(S,{label:i("Button icon size","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"navBtnIconSize",min:0,max:100,step:1}),React.createElement(y,{label:i("Button background","voxel-fse"),value:e.navBtnBgColor,onChange:r=>t({navBtnBgColor:r})}),React.createElement(Se,{label:i("Border","voxel-fse"),value:e.navBtnBorder||{borderType:"none",borderWidth:{},borderColor:""},onChange:r=>t({navBtnBorder:r})}),React.createElement(S,{label:i("Button border radius","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"navBtnRadius",min:0,max:100,step:1}),React.createElement(G,{label:i("Box Shadow","voxel-fse"),attributes:e,setAttributes:t,shadowAttributeName:"navBtnShadow"}),React.createElement(S,{label:i("Button size","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"navBtnSize",min:0,max:100,step:1}),React.createElement(q,{label:i("Hover","voxel-fse")}),React.createElement(y,{label:i("Button icon color","voxel-fse"),value:e.navBtnIconColorHover,onChange:r=>t({navBtnIconColorHover:r})}),React.createElement(y,{label:i("Button background color","voxel-fse"),value:e.navBtnBgColorHover,onChange:r=>t({navBtnBgColorHover:r})}),React.createElement(y,{label:i("Button border color","voxel-fse"),value:e.navBtnBorderColorHover,onChange:r=>t({navBtnBorderColorHover:r})})),React.createElement(E,{id:"geolocation-button",title:i("Geolocation button","voxel-fse")},React.createElement(te,{label:i("Geolocation icon","voxel-fse"),value:e.geolocationIcon,onChange:r=>t({geolocationIcon:r})})))}function xe(e,n){const t=[],r=[],c=[],o=`.voxel-fse-map-${n}`;if(t.push(".marker-type-text { font-size: 14px !important; color: #4a4a4a !important; }"),t.push(".marker-wrapper { position: absolute; z-index: 10; transform: translate(-50%, -50%); }"),t.push(".map-marker { display: flex; align-items: center; justify-content: center; overflow: hidden; white-space: nowrap; }"),t.push(".gm-style-mtc-bbw { display: none; }"),e.clusterSize!==void 0&&t.push(`${o} .ts-marker-cluster { width: ${e.clusterSize}px; height: ${e.clusterSize}px; }`),e.clusterSize_tablet!==void 0&&r.push(`${o} .ts-marker-cluster { width: ${e.clusterSize_tablet}px; height: ${e.clusterSize_tablet}px; }`),e.clusterSize_mobile!==void 0&&c.push(`${o} .ts-marker-cluster { width: ${e.clusterSize_mobile}px; height: ${e.clusterSize_mobile}px; }`),e.clusterBgColor&&t.push(`${o} .ts-marker-cluster { background-color: ${e.clusterBgColor}; }`),e.clusterBgColor_tablet&&r.push(`${o} .ts-marker-cluster { background-color: ${e.clusterBgColor_tablet}; }`),e.clusterBgColor_mobile&&c.push(`${o} .ts-marker-cluster { background-color: ${e.clusterBgColor_mobile}; }`),e.clusterShadow?.enable){const{horizontal:a=0,vertical:l=0,blur:p=0,spread:m=0,color:v="rgba(0,0,0,0.1)",position:d="outline"}=e.clusterShadow,g=d==="inset"?"inset ":"";t.push(`${o} .ts-marker-cluster { box-shadow: ${g}${a}px ${l}px ${p}px ${m}px ${v}; }`)}if(e.clusterRadius!==void 0&&t.push(`${o} .ts-marker-cluster { border-radius: ${e.clusterRadius}px; }`),e.clusterRadius_tablet!==void 0&&r.push(`${o} .ts-marker-cluster { border-radius: ${e.clusterRadius_tablet}px; }`),e.clusterRadius_mobile!==void 0&&c.push(`${o} .ts-marker-cluster { border-radius: ${e.clusterRadius_mobile}px; }`),e.clusterTypography){const a=e.clusterTypography;if(a.fontFamily&&t.push(`${o} .ts-marker-cluster { font-family: ${a.fontFamily}; }`),a.fontSize){const l=a.fontSizeUnit||"px";t.push(`${o} .ts-marker-cluster { font-size: ${a.fontSize}${l}; }`)}if(a.fontWeight&&t.push(`${o} .ts-marker-cluster { font-weight: ${a.fontWeight}; }`),a.fontStyle&&t.push(`${o} .ts-marker-cluster { font-style: ${a.fontStyle}; }`),a.textTransform&&t.push(`${o} .ts-marker-cluster { text-transform: ${a.textTransform}; }`),a.textDecoration&&t.push(`${o} .ts-marker-cluster { text-decoration: ${a.textDecoration}; }`),a.lineHeight){const l=a.lineHeightUnit||"";t.push(`${o} .ts-marker-cluster { line-height: ${a.lineHeight}${l}; }`)}if(a.letterSpacing){const l=a.letterSpacingUnit||"px";t.push(`${o} .ts-marker-cluster { letter-spacing: ${a.letterSpacing}${l}; }`)}}if(e.clusterTextColor&&t.push(`${o} .ts-marker-cluster { color: ${e.clusterTextColor}; }`),e.clusterTextColor_tablet&&r.push(`${o} .ts-marker-cluster { color: ${e.clusterTextColor_tablet}; }`),e.clusterTextColor_mobile&&c.push(`${o} .ts-marker-cluster { color: ${e.clusterTextColor_mobile}; }`),e.iconMarkerSize!==void 0&&t.push(`${o} .marker-type-icon { width: ${e.iconMarkerSize}px; height: ${e.iconMarkerSize}px; }`),e.iconMarkerSize_tablet!==void 0&&r.push(`${o} .marker-type-icon { width: ${e.iconMarkerSize_tablet}px; height: ${e.iconMarkerSize_tablet}px; }`),e.iconMarkerSize_mobile!==void 0&&c.push(`${o} .marker-type-icon { width: ${e.iconMarkerSize_mobile}px; height: ${e.iconMarkerSize_mobile}px; }`),e.iconMarkerIconSize!==void 0&&t.push(`${o} .marker-type-icon { --ts-icon-size: ${e.iconMarkerIconSize}px; }`),e.iconMarkerIconSize_tablet!==void 0&&r.push(`${o} .marker-type-icon { --ts-icon-size: ${e.iconMarkerIconSize_tablet}px; }`),e.iconMarkerIconSize_mobile!==void 0&&c.push(`${o} .marker-type-icon { --ts-icon-size: ${e.iconMarkerIconSize_mobile}px; }`),e.iconMarkerRadius!==void 0&&t.push(`${o} .marker-type-icon { border-radius: ${e.iconMarkerRadius}px; }`),e.iconMarkerRadius_tablet!==void 0&&r.push(`${o} .marker-type-icon { border-radius: ${e.iconMarkerRadius_tablet}px; }`),e.iconMarkerRadius_mobile!==void 0&&c.push(`${o} .marker-type-icon { border-radius: ${e.iconMarkerRadius_mobile}px; }`),e.iconMarkerShadow?.enable){const{horizontal:a=0,vertical:l=0,blur:p=0,spread:m=0,color:v="rgba(0,0,0,0.1)",position:d="outline"}=e.iconMarkerShadow,g=d==="inset"?"inset ":"";t.push(`${o} .marker-type-icon { box-shadow: ${g}${a}px ${l}px ${p}px ${m}px ${v}; }`)}if(e.iconMarkerStaticBg&&t.push(`${o} .mi-static { background-color: ${e.iconMarkerStaticBg}; }`),e.iconMarkerStaticBg_tablet&&r.push(`${o} .mi-static { background-color: ${e.iconMarkerStaticBg_tablet}; }`),e.iconMarkerStaticBg_mobile&&c.push(`${o} .mi-static { background-color: ${e.iconMarkerStaticBg_mobile}; }`),e.iconMarkerStaticBgActive&&t.push(`${o} .marker-active .mi-static { background-color: ${e.iconMarkerStaticBgActive}; }`),e.iconMarkerStaticBgActive_tablet&&r.push(`${o} .marker-active .mi-static { background-color: ${e.iconMarkerStaticBgActive_tablet}; }`),e.iconMarkerStaticBgActive_mobile&&c.push(`${o} .marker-active .mi-static { background-color: ${e.iconMarkerStaticBgActive_mobile}; }`),e.iconMarkerStaticIconColor&&t.push(`${o} .mi-static { --ts-icon-color: ${e.iconMarkerStaticIconColor}; }`),e.iconMarkerStaticIconColor_tablet&&r.push(`${o} .mi-static { --ts-icon-color: ${e.iconMarkerStaticIconColor_tablet}; }`),e.iconMarkerStaticIconColor_mobile&&c.push(`${o} .mi-static { --ts-icon-color: ${e.iconMarkerStaticIconColor_mobile}; }`),e.iconMarkerStaticIconColorActive&&t.push(`${o} .marker-active .mi-static { --ts-icon-color: ${e.iconMarkerStaticIconColorActive}; }`),e.iconMarkerStaticIconColorActive_tablet&&r.push(`${o} .marker-active .mi-static { --ts-icon-color: ${e.iconMarkerStaticIconColorActive_tablet}; }`),e.iconMarkerStaticIconColorActive_mobile&&c.push(`${o} .marker-active .mi-static { --ts-icon-color: ${e.iconMarkerStaticIconColorActive_mobile}; }`),e.textMarkerBgColor&&t.push(`${o} .marker-type-text { background-color: ${e.textMarkerBgColor}; }`),e.textMarkerBgColor_tablet&&r.push(`${o} .marker-type-text { background-color: ${e.textMarkerBgColor_tablet}; }`),e.textMarkerBgColor_mobile&&c.push(`${o} .marker-type-text { background-color: ${e.textMarkerBgColor_mobile}; }`),e.textMarkerBgColorActive&&t.push(`${o} .marker-active .marker-type-text { background-color: ${e.textMarkerBgColorActive}; }`),e.textMarkerBgColorActive_tablet&&r.push(`${o} .marker-active .marker-type-text { background-color: ${e.textMarkerBgColorActive_tablet}; }`),e.textMarkerBgColorActive_mobile&&c.push(`${o} .marker-active .marker-type-text { background-color: ${e.textMarkerBgColorActive_mobile}; }`),e.textMarkerTextColor&&t.push(`${o} .marker-type-text { color: ${e.textMarkerTextColor}; }`),e.textMarkerTextColor_tablet&&r.push(`${o} .marker-type-text { color: ${e.textMarkerTextColor_tablet}; }`),e.textMarkerTextColor_mobile&&c.push(`${o} .marker-type-text { color: ${e.textMarkerTextColor_mobile}; }`),e.textMarkerTextColorActive&&t.push(`${o} .marker-active .marker-type-text { color: ${e.textMarkerTextColorActive}; }`),e.textMarkerTextColorActive_tablet&&r.push(`${o} .marker-active .marker-type-text { color: ${e.textMarkerTextColorActive_tablet}; }`),e.textMarkerTextColorActive_mobile&&c.push(`${o} .marker-active .marker-type-text { color: ${e.textMarkerTextColorActive_mobile}; }`),e.textMarkerRadius!==void 0&&t.push(`${o} .marker-type-text { border-radius: ${e.textMarkerRadius}px; }`),e.textMarkerRadius_tablet!==void 0&&r.push(`${o} .marker-type-text { border-radius: ${e.textMarkerRadius_tablet}px; }`),e.textMarkerRadius_mobile!==void 0&&c.push(`${o} .marker-type-text { border-radius: ${e.textMarkerRadius_mobile}px; }`),e.textMarkerTypography){const a=e.textMarkerTypography;if(a.fontFamily&&t.push(`${o} .marker-type-text { font-family: ${a.fontFamily}; }`),a.fontSize){const l=a.fontSizeUnit||"px";t.push(`${o} .marker-type-text { font-size: ${a.fontSize}${l}; }`)}if(a.fontWeight&&t.push(`${o} .marker-type-text { font-weight: ${a.fontWeight}; }`),a.fontStyle&&t.push(`${o} .marker-type-text { font-style: ${a.fontStyle}; }`),a.textTransform&&t.push(`${o} .marker-type-text { text-transform: ${a.textTransform}; }`),a.textDecoration&&t.push(`${o} .marker-type-text { text-decoration: ${a.textDecoration}; }`),a.lineHeight){const l=a.lineHeightUnit||"";t.push(`${o} .marker-type-text { line-height: ${a.lineHeight}${l}; }`)}if(a.letterSpacing){const l=a.letterSpacingUnit||"px";t.push(`${o} .marker-type-text { letter-spacing: ${a.letterSpacing}${l}; }`)}}if(e.textMarkerPadding){const{top:a,right:l,bottom:p,left:m}=e.textMarkerPadding;(a||l||p||m)&&t.push(`${o} .marker-type-text { padding: ${a||0}px ${l||0}px ${p||0}px ${m||0}px; }`)}if(e.textMarkerPadding_tablet){const{top:a,right:l,bottom:p,left:m}=e.textMarkerPadding_tablet;(a||l||p||m)&&r.push(`${o} .marker-type-text { padding: ${a||0}px ${l||0}px ${p||0}px ${m||0}px; }`)}if(e.textMarkerPadding_mobile){const{top:a,right:l,bottom:p,left:m}=e.textMarkerPadding_mobile;(a||l||p||m)&&c.push(`${o} .marker-type-text { padding: ${a||0}px ${l||0}px ${p||0}px ${m||0}px; }`)}if(e.textMarkerShadow?.enable){const{horizontal:a=0,vertical:l=0,blur:p=0,spread:m=0,color:v="rgba(0,0,0,0.1)",position:d="outline"}=e.textMarkerShadow,g=d==="inset"?"inset ":"";t.push(`${o} .marker-type-text { box-shadow: ${g}${a}px ${l}px ${p}px ${m}px ${v}; }`)}if(e.imageMarkerSize!==void 0&&t.push(`${o} .marker-type-image { width: ${e.imageMarkerSize}px; height: ${e.imageMarkerSize}px; }`),e.imageMarkerSize_tablet!==void 0&&r.push(`${o} .marker-type-image { width: ${e.imageMarkerSize_tablet}px; height: ${e.imageMarkerSize_tablet}px; }`),e.imageMarkerSize_mobile!==void 0&&c.push(`${o} .marker-type-image { width: ${e.imageMarkerSize_mobile}px; height: ${e.imageMarkerSize_mobile}px; }`),e.imageMarkerRadius!==void 0&&t.push(`${o} .marker-type-image { border-radius: ${e.imageMarkerRadius}px; }`),e.imageMarkerRadius_tablet!==void 0&&r.push(`${o} .marker-type-image { border-radius: ${e.imageMarkerRadius_tablet}px; }`),e.imageMarkerRadius_mobile!==void 0&&c.push(`${o} .marker-type-image { border-radius: ${e.imageMarkerRadius_mobile}px; }`),e.imageMarkerShadow?.enable){const{horizontal:a=0,vertical:l=0,blur:p=0,spread:m=0,color:v="rgba(0,0,0,0.1)",position:d="outline"}=e.imageMarkerShadow,g=d==="inset"?"inset ":"";t.push(`${o} .marker-type-image { box-shadow: ${g}${a}px ${l}px ${p}px ${m}px ${v}; }`)}if(e.popupCardWidth!==void 0&&t.push(`${o} .ts-preview-popup { width: ${e.popupCardWidth}px; }`),e.popupCardWidth_tablet!==void 0&&r.push(`${o} .ts-preview-popup { width: ${e.popupCardWidth_tablet}px; }`),e.popupCardWidth_mobile!==void 0&&c.push(`${o} .ts-preview-popup { width: ${e.popupCardWidth_mobile}px; }`),e.popupLoaderColor1&&t.push(`${o} .ts-loading-popup .ts-loader { border-color: ${e.popupLoaderColor1}; }`),e.popupLoaderColor2&&t.push(`${o} .ts-loading-popup .ts-loader { border-bottom-color: ${e.popupLoaderColor2}; }`),e.searchBtnTypography){const a=e.searchBtnTypography;if(a.fontFamily&&t.push(`${o} .ts-map-btn { font-family: ${a.fontFamily}; }`),a.fontSize){const l=a.fontSizeUnit||"px";t.push(`${o} .ts-map-btn { font-size: ${a.fontSize}${l}; }`)}if(a.fontWeight&&t.push(`${o} .ts-map-btn { font-weight: ${a.fontWeight}; }`),a.fontStyle&&t.push(`${o} .ts-map-btn { font-style: ${a.fontStyle}; }`),a.textTransform&&t.push(`${o} .ts-map-btn { text-transform: ${a.textTransform}; }`),a.textDecoration&&t.push(`${o} .ts-map-btn { text-decoration: ${a.textDecoration}; }`),a.lineHeight){const l=a.lineHeightUnit||"";t.push(`${o} .ts-map-btn { line-height: ${a.lineHeight}${l}; }`)}if(a.letterSpacing){const l=a.letterSpacingUnit||"px";t.push(`${o} .ts-map-btn { letter-spacing: ${a.letterSpacing}${l}; }`)}}if(e.searchBtnTextColor&&t.push(`${o} .ts-map-btn { color: ${e.searchBtnTextColor}; }`),e.searchBtnTextColor_tablet&&r.push(`${o} .ts-map-btn { color: ${e.searchBtnTextColor_tablet}; }`),e.searchBtnTextColor_mobile&&c.push(`${o} .ts-map-btn { color: ${e.searchBtnTextColor_mobile}; }`),e.searchBtnBgColor&&t.push(`${o} .ts-map-btn { background-color: ${e.searchBtnBgColor}; }`),e.searchBtnBgColor_tablet&&r.push(`${o} .ts-map-btn { background-color: ${e.searchBtnBgColor_tablet}; }`),e.searchBtnBgColor_mobile&&c.push(`${o} .ts-map-btn { background-color: ${e.searchBtnBgColor_mobile}; }`),e.searchBtnIconColor&&t.push(`${o} .ts-map-btn svg { fill: ${e.searchBtnIconColor}; }`),e.searchBtnIconColor_tablet&&r.push(`${o} .ts-map-btn svg { fill: ${e.searchBtnIconColor_tablet}; }`),e.searchBtnIconColor_mobile&&c.push(`${o} .ts-map-btn svg { fill: ${e.searchBtnIconColor_mobile}; }`),e.searchBtnIconColorActive&&t.push(`${o} .ts-map-btn.active svg { fill: ${e.searchBtnIconColorActive}; }`),e.searchBtnIconColorActive_tablet&&r.push(`${o} .ts-map-btn.active svg { fill: ${e.searchBtnIconColorActive_tablet}; }`),e.searchBtnIconColorActive_mobile&&c.push(`${o} .ts-map-btn.active svg { fill: ${e.searchBtnIconColorActive_mobile}; }`),e.searchBtnRadius!==void 0&&t.push(`${o} .ts-map-btn { border-radius: ${e.searchBtnRadius}px; }`),e.searchBtnRadius_tablet!==void 0&&r.push(`${o} .ts-map-btn { border-radius: ${e.searchBtnRadius_tablet}px; }`),e.searchBtnRadius_mobile!==void 0&&c.push(`${o} .ts-map-btn { border-radius: ${e.searchBtnRadius_mobile}px; }`),e.navBtnIconColor&&(t.push(`${o} .ts-map-nav .ts-icon-btn i { color: ${e.navBtnIconColor}; }`),t.push(`${o} .ts-map-nav .ts-icon-btn svg { fill: ${e.navBtnIconColor}; }`)),e.navBtnIconSize!==void 0&&(t.push(`${o} .ts-map-nav .ts-icon-btn i { font-size: ${e.navBtnIconSize}px; }`),t.push(`${o} .ts-map-nav .ts-icon-btn svg { width: ${e.navBtnIconSize}px; height: ${e.navBtnIconSize}px; }`)),e.navBtnIconSize_tablet!==void 0&&(r.push(`${o} .ts-map-nav .ts-icon-btn i { font-size: ${e.navBtnIconSize_tablet}px; }`),r.push(`${o} .ts-map-nav .ts-icon-btn svg { width: ${e.navBtnIconSize_tablet}px; height: ${e.navBtnIconSize_tablet}px; }`)),e.navBtnIconSize_mobile!==void 0&&(c.push(`${o} .ts-map-nav .ts-icon-btn i { font-size: ${e.navBtnIconSize_mobile}px; }`),c.push(`${o} .ts-map-nav .ts-icon-btn svg { width: ${e.navBtnIconSize_mobile}px; height: ${e.navBtnIconSize_mobile}px; }`)),e.navBtnBgColor&&t.push(`${o} .ts-map-nav .ts-icon-btn { background-color: ${e.navBtnBgColor}; }`),e.navBtnBorder){const{borderType:a,borderWidth:l,borderColor:p}=e.navBtnBorder;if(a&&a!=="none"){if(t.push(`${o} .ts-map-nav .ts-icon-btn { border-style: ${a}; }`),l){const{top:m,right:v,bottom:d,left:g,unit:h="px",linked:I}=l;if(I&&m!==void 0)t.push(`${o} .ts-map-nav .ts-icon-btn { border-width: ${m}${h}; }`);else{const W=m!==void 0?`${m}${h}`:"0",A=v!==void 0?`${v}${h}`:"0",L=d!==void 0?`${d}${h}`:"0",U=g!==void 0?`${g}${h}`:"0";t.push(`${o} .ts-map-nav .ts-icon-btn { border-width: ${W} ${A} ${L} ${U}; }`)}}p&&t.push(`${o} .ts-map-nav .ts-icon-btn { border-color: ${p}; }`)}}if(e.navBtnRadius!==void 0&&t.push(`${o} .ts-map-nav .ts-icon-btn { border-radius: ${e.navBtnRadius}px; }`),e.navBtnRadius_tablet!==void 0&&r.push(`${o} .ts-map-nav .ts-icon-btn { border-radius: ${e.navBtnRadius_tablet}px; }`),e.navBtnRadius_mobile!==void 0&&c.push(`${o} .ts-map-nav .ts-icon-btn { border-radius: ${e.navBtnRadius_mobile}px; }`),e.navBtnShadow?.enable){const{horizontal:a=0,vertical:l=0,blur:p=0,spread:m=0,color:v="rgba(0,0,0,0.1)",position:d="outline"}=e.navBtnShadow,g=d==="inset"?"inset ":"";t.push(`${o} .ts-map-nav .ts-icon-btn { box-shadow: ${g}${a}px ${l}px ${p}px ${m}px ${v}; }`)}e.navBtnSize!==void 0&&t.push(`${o} .ts-map-nav .ts-icon-btn { width: ${e.navBtnSize}px; height: ${e.navBtnSize}px; }`),e.navBtnSize_tablet!==void 0&&r.push(`${o} .ts-map-nav .ts-icon-btn { width: ${e.navBtnSize_tablet}px; height: ${e.navBtnSize_tablet}px; }`),e.navBtnSize_mobile!==void 0&&c.push(`${o} .ts-map-nav .ts-icon-btn { width: ${e.navBtnSize_mobile}px; height: ${e.navBtnSize_mobile}px; }`),e.navBtnIconColorHover&&(t.push(`${o} .ts-map-nav .ts-icon-btn:hover i { color: ${e.navBtnIconColorHover}; }`),t.push(`${o} .ts-map-nav .ts-icon-btn:hover svg { fill: ${e.navBtnIconColorHover}; }`)),e.navBtnBgColorHover&&t.push(`${o} .ts-map-nav .ts-icon-btn:hover { background-color: ${e.navBtnBgColorHover}; }`),e.navBtnBorderColorHover&&t.push(`${o} .ts-map-nav .ts-icon-btn:hover { border-color: ${e.navBtnBorderColorHover}; }`),t.push(`${o} .ts-map { height: var(--vx-map-height, 400px); }`);let u="";return t.length>0&&(u+=t.join(`
`)),r.length>0&&(u+=`
@media (max-width: 1024px) {
${r.join(`
`)}
}`),c.length>0&&(u+=`
@media (max-width: 767px) {
${c.join(`
`)}
}`),u}const T=()=>window;function ue(){return new Promise((e,n)=>{const t=T().Voxel?.Maps;if(t){t.await(()=>e(t));return}const r=()=>{const c=T().Voxel?.Maps;c&&c.await(()=>e(c))};document.addEventListener("maps:loaded",r,{once:!0}),setTimeout(()=>{document.removeEventListener("maps:loaded",r);const c=T().Voxel?.Maps;c?c.await(()=>e(c)):n(new Error("Voxel.Maps not available after timeout"))},15e3)})}function pe(){return{lat:T().Voxel_Config?.maps?.default_lat??40.7128,lng:T().Voxel_Config?.maps?.default_lng??-74.006}}class w{constructor(n,t){this._native=null,this._lat=n,this._lng=t;const r=T().Voxel?.Maps;r&&(this._native=new r.LatLng(n,t))}getLatitude(){return this._native?.getLatitude()??this._lat}getLongitude(){return this._native?.getLongitude()??this._lng}getSourceObject(){return this._native?.getSourceObject()??null}toGeocoderFormat(){return this._native?.toGeocoderFormat()??null}getNative(){return this._native}static fromNative(n){const t=new w(n.getLatitude(),n.getLongitude());return t._native=n,t}}class ne{constructor(n,t){this._native=null,this._sw=n??null,this._ne=t??null;const r=T().Voxel?.Maps;r&&(this._native=new r.Bounds(n?.getNative()??void 0,t?.getNative()??void 0))}extend(n){this._native&&n.getNative()&&this._native.extend(n.getNative())}empty(){return this._native?.empty()??!0}getSourceObject(){return this._native?.getSourceObject()??null}getSouthWest(){return this._native?w.fromNative(this._native.getSouthWest()):this._sw}getNorthEast(){return this._native?w.fromNative(this._native.getNorthEast()):this._ne}getNative(){return this._native}static fromNative(n){const t=w.fromNative(n.getSouthWest()),r=w.fromNative(n.getNorthEast()),c=new ne(t,r);return c._native=n,c}}class Qe{constructor(n){this._native=null,this._listeners=new Map,this._el=n.el,this._options=n}async init(){console.log("[VxMap] init() called");const n=await ue();console.log("[VxMap] Got Voxel.Maps:",n),console.log("[VxMap] Maps.Map constructor:",n.Map);const t=window.getComputedStyle(this._el),r=this._el.getBoundingClientRect();console.log("[VxMap] Container dimensions BEFORE map creation:",{width:r.width,height:r.height,display:t.display,visibility:t.visibility,offsetParent:this._el.offsetParent?"exists":"null",styleHeight:this._el.style.height}),r.height===0&&(console.log("[VxMap] WARNING: Container has 0 height! Setting fallback height of 400px"),this._el.style.height="400px");const c=this._options.center?new n.LatLng(this._options.center.getLatitude(),this._options.center.getLongitude()):new n.LatLng(pe().lat,pe().lng);console.log("[VxMap] centerLatLng created:",c);const o=T().Voxel_Config,u={el:this._el,zoom:this._options.zoom??10,center:c,minZoom:this._options.minZoom??2,maxZoom:this._options.maxZoom??20,draggable:this._options.draggable??!0,mapTypeControl:!!o?.google_maps?.mapTypeControl,streetViewControl:!!o?.google_maps?.streetViewControl};try{this._native=new n.Map(u),this._el.classList.add("ts-map-loaded"),this._el.__vx_map__=this._native;const a=this._native?.getSourceObject();a&&typeof google<"u"&&google.maps?.event&&(console.log("[VxMap] Triggering resize event sequence..."),this._el.offsetHeight,google.maps.event.trigger(a,"resize"),requestAnimationFrame(()=>{google.maps.event.trigger(a,"resize");const l=a.getCenter();l&&a.setCenter(l),setTimeout(()=>{google.maps.event.trigger(a,"bounds_changed"),google.maps.event.trigger(a,"idle"),console.log("[VxMap] Resize sequence completed");const p=this._el.getBoundingClientRect();console.log("[VxMap] Container dimensions AFTER resize:",{width:p.width,height:p.height})},100)}))}catch(a){throw console.error("[VxMap] Error creating Maps.Map:",a),a}}setZoom(n){this._native?.setZoom(n)}getZoom(){return this._native?.getZoom()??this._options.zoom??10}getMinZoom(){return this._native?.getMinZoom()??this._options.minZoom??2}getMaxZoom(){return this._native?.getMaxZoom()??this._options.maxZoom??20}setCenter(n){this._native&&n.getNative()&&this._native.setCenter(n.getNative())}getCenter(){return this._native?w.fromNative(this._native.getCenter()):this._options.center??null}getBounds(){return this._native?ne.fromNative(this._native.getBounds()):null}fitBounds(n){this._native&&n.getNative()&&this._native.fitBounds(n.getNative())}panTo(n){this._native&&n.getNative()&&this._native.panTo(n.getNative())}getClickPosition(n){return this._native?w.fromNative(this._native.getClickPosition(n)):null}addListener(n,t){if(this._native){const r=this._native.addListener(n,t);this._listeners.has(n)||this._listeners.set(n,[]),this._listeners.get(n).push(r)}}addListenerOnce(n,t){this._native&&this._native.addListenerOnce(n,t)}removeListeners(n){const t=this._listeners.get(n);t&&this._native&&(t.forEach(r=>this._native.removeListener(r)),this._listeners.delete(n))}trigger(n){this._native?.trigger(n)}getSourceObject(){return this._native?.getSourceObject()??null}getNative(){return this._native}getElement(){return this._el}}class Ye{constructor(n){this._native=null,this._map=null,this._options=n}init(n){const t=T().Voxel?.Maps;if(!t||!n.getNative())return;this._map=n;const r=this._options.position?new t.LatLng(this._options.position.getLatitude(),this._options.position.getLongitude()):void 0;this._native=new t.Marker({map:n.getNative(),position:r,template:this._options.template,onClick:this._options.onClick?(c,o)=>this._options.onClick(c,this):void 0,data:this._options.data})}getPosition(){return this._native?w.fromNative(this._native.getPosition()):this._options.position??null}setPosition(n){this._native&&n.getNative()&&this._native.setPosition(n.getNative())}getMap(){return this._map}setMap(n){this._native&&n.getNative()&&(this._native.setMap(n.getNative()),this._map=n)}remove(){return this._native?.remove(),this._map=null,this}addClass(n){this._native?.addClass(n)}removeClass(n){this._native?.removeClass(n)}getData(){return this._options.data}getNative(){return this._native}}class et{constructor(n){this._native=null,this._map=null,this._options=n}init(n){const t=T().Voxel?.Maps;if(!t||!n.getNative())return;this._map=n;const r=this._options.position?new t.LatLng(this._options.position.getLatitude(),this._options.position.getLongitude()):void 0;this._native=new t.Popup({map:n.getNative(),position:r,content:this._options.content})}setContent(n){this._native?.setContent(n)}setPosition(n){this._native&&n.getNative()&&this._native.setPosition(n.getNative())}show(){this._native?.show()}hide(){this._native?.hide()}getMap(){return this._map}getNative(){return this._native}}class tt{constructor(){this._native=null,this._map=null,this._markers=[]}async init(n){const t=await ue();n.getNative()&&(this._map=n,this._native=new t.Clusterer({map:n.getNative()}),this._native&&(this._native._onClusterClick=()=>{this._onClusterClick?.()},this._native._onNonExpandableClusterClick=r=>{if(this._onNonExpandableClusterClick){const c=this._markers.filter(o=>r.some(u=>u===o.getNative()));this._onNonExpandableClusterClick(c)}}))}addMarkers(n){if(this._markers.push(...n),this._native){const t=n.map(r=>r.getNative()).filter(r=>r!==null);this._native.addMarkers(t)}}clearMarkers(){this._markers.forEach(n=>n.remove()),this._markers=[],this._native&&(this._native.markers=[])}render(){this._native?.render()}set onClusterClick(n){this._onClusterClick=n,this._native&&(this._native._onClusterClick=n)}set onNonExpandableClusterClick(n){this._onNonExpandableClusterClick=n}getMarkers(){return this._markers}getMap(){return this._map}getNative(){return this._native}}const j={};function ot(){return window.Voxel_Config?.ajax_url?window.Voxel_Config.ajax_url:`${window.location.origin}/?vx=1`}function nt(){return`<div class="ts-map-nav">
		<a href="#" class="ts-map-prev ts-icon-btn"><svg width="80" height="80" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.746 6.00002C10.746 5.69663 10.5632 5.42312 10.2829 5.30707C10.0026 5.19101 9.67996 5.25526 9.4655 5.46986L3.51254 11.4266C3.35184 11.5642 3.25 11.7685 3.25 11.9966V11.9982C3.24959 12.1906 3.32276 12.3831 3.46949 12.53L9.46548 18.5302C9.67994 18.7448 10.0026 18.809 10.2829 18.693C10.5632 18.5769 10.746 18.3034 10.746 18L10.746 12.7466L20.0014 12.7466C20.4156 12.7466 20.7514 12.4108 20.7514 11.9966C20.7514 11.5824 20.4156 11.2466 20.0014 11.2466L10.746 11.2466V6.00002Z" fill="#343C54"/></svg></a>
		<a href="#" class="ts-map-next ts-icon-btn"><svg width="80" height="80" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.5359 5.46986C14.3214 5.25526 13.9988 5.19101 13.7185 5.30707C13.4382 5.42312 13.2554 5.69663 13.2554 6.00002V11.2466L4 11.2466C3.58579 11.2466 3.25 11.5824 3.25 11.9966C3.25 12.4108 3.58579 12.7466 4 12.7466L13.2554 12.7466V18C13.2554 18.3034 13.4382 18.5769 13.7185 18.693C13.9988 18.809 14.3214 18.7448 14.5359 18.5302L20.5319 12.53C20.6786 12.3831 20.7518 12.1905 20.7514 11.9981L20.7514 11.9966C20.7514 11.7685 20.6495 11.5642 20.4888 11.4266L14.5359 5.46986Z" fill="#343C54"/></svg></a>
	</div>`}async function rt(e,n,t,r,c){if(!n||n.length===0)return[];const o=[],u={};for(let a=0;a<n.length;a++){const l=n[a],p=String(l.postId||""),m=l.uriencoded?decodeURIComponent(l.template):l.template,v={position:new w(l.lat,l.lng),template:m,onClick:(g,h)=>{if(!p){const x=h.getPosition();x&&(t.setPosition(x),t.setContent(m),t.show());return}o.forEach(x=>x.removeClass("marker-active")),h.addClass("marker-active"),e.addListener("click",function(){h.removeClass("marker-active"),t.hide()});const I=x=>{if(o.length>1){x.querySelector(".ts-map-nav")||x.insertAdjacentHTML("beforeend",nt());const k=x.querySelector(".ts-map-prev"),B=x.querySelector(".ts-map-next"),M=Object.keys(u),b=M.indexOf(p);k?.addEventListener("click",$=>{if($.preventDefault(),$.stopPropagation(),b!==-1){const z=b>0?b-1:M.length-1,R=u[M[z]];if(R){const _=R.getNative();_?.onClick&&_.onClick(new Event("click"),_)}}}),B?.addEventListener("click",$=>{if($.preventDefault(),$.stopPropagation(),b!==-1){const z=M.length>b+1?b+1:0,R=u[M[z]];if(R){const _=R.getNative();_?.onClick&&_.onClick(new Event("click"),_)}}})}const s=h.getPosition();s&&(t.setPosition(s),t.setContent(x),t.show())};if(j[p]){const x=document.createElement("div");x.className="ts-preview-popup",x.innerHTML=j[p],I(x);return}const W=document.querySelector(`.ts-preview[data-post-id="${p}"]`);if(W){const x=W.cloneNode(!0);x.classList.remove("ts-preview"),x.classList.add("ts-preview-popup"),x.removeAttribute("style"),j[p]=x.innerHTML,I(x);return}const A=document.createElement("div");A.className="ts-preview-popup ts-loading-popup",A.innerHTML='<span class="ts-loader"></span>';const L=h.getPosition();L&&(t.setPosition(L),t.setContent(A),t.show());const U=ot();fetch(`${U}&action=get_preview_card&post_id=${p}`).then(x=>x.text()).then(x=>{const s=document.createElement("div");s.className="ts-preview-popup",s.innerHTML=x,j[p]=x,I(s)}).catch(()=>{const x=document.createElement("div");x.className="ts-preview-popup",j[p]="",I(x)})},data:{lat:l.lat,lng:l.lng,postId:p}},d=new Ye(v);d.init(e),o.push(d),p&&(u[p]=d)}return r&&o.length>0&&r.addMarkers(o),o}function at(){Object.keys(j).forEach(e=>delete j[e])}const it='<svg width="80" height="80" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg" transform="rotate(0 0 0)"><path d="M2 12.3906C2 6.86778 6.47715 2.39062 12 2.39062C17.5228 2.39062 22 6.86778 22 12.3906C22 17.9135 17.5228 22.3906 12 22.3906C6.47715 22.3906 2 17.9135 2 12.3906ZM15.5071 9.85447C15.2142 9.56158 14.7393 9.56158 14.4464 9.85447L10.9649 13.336L9.55359 11.9247C9.2607 11.6318 8.78582 11.6318 8.49293 11.9247C8.20004 12.2176 8.20004 12.6925 8.49294 12.9854L10.4346 14.927C10.7275 15.2199 11.2023 15.2199 11.4952 14.927L15.5071 10.9151C15.8 10.6222 15.8 10.1474 15.5071 9.85447Z" fill="#343C54"/></svg>',lt='<svg width="80" height="80" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg" transform="rotate(0 0 0)"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.25 2.75C6.14154 2.75 2 6.89029 2 11.998C2 17.1056 6.14154 21.2459 11.25 21.2459C13.5335 21.2459 15.6238 20.4187 17.2373 19.0475L20.7182 22.5287C21.011 22.8216 21.4859 22.8217 21.7788 22.5288C22.0717 22.2359 22.0718 21.761 21.7789 21.4681L18.2983 17.9872C19.6714 16.3736 20.5 14.2826 20.5 11.998C20.5 6.89029 16.3585 2.75 11.25 2.75ZM3.5 11.998C3.5 7.71905 6.96962 4.25 11.25 4.25C15.5304 4.25 19 7.71905 19 11.998C19 16.2769 15.5304 19.7459 11.25 19.7459C6.96962 19.7459 3.5 16.2769 3.5 11.998Z" fill="#343C54"/></svg>';function ct(){return`map-${Math.random().toString(36).substring(2,11)}`}function st({attributes:e,setAttributes:n,clientId:t}){const r=e.blockId||"map",c=ve(e,{blockId:r,baseClass:"voxel-fse-map-editor ts-map-widget elementor-widget-ts-map",selectorPrefix:"voxel-fse-map"}),o=le(()=>xe(e,r),[e,r]),u=le(()=>[c.responsiveCSS,o].filter(Boolean).join(`
`),[c.responsiveCSS,o]),a=me({className:c.className,style:c.styles}),l=Z(null),p=Z(null),m=Z(null),v=Z(!1),d=Z([]),g=Z(null),h=Z(null),[I,W]=Me(!1);O(()=>{e.blockId||n({blockId:ct()})},[e.blockId,n]),O(()=>{const s="voxel-map-css";if(!document.getElementById(s)){const C=document.createElement("link");C.id=s,C.rel="stylesheet";const B=(window.Voxel_Config?.site_url||window.location.origin).replace(/\/$/,"");C.href=`${B}/wp-content/themes/voxel/assets/dist/map.css?ver=1.7.5.2`,document.head.appendChild(C)}},[]);const A=se(s=>{const{getBlocks:C}=s("core/block-editor"),k=(B,M)=>{let b=[];return B.forEach($=>{$.name===M&&$.clientId!==t&&b.push($),$.innerBlocks&&$.innerBlocks.length>0&&(b=b.concat(k($.innerBlocks,M)))}),b};return k(C(),"voxel-fse/search-form")},[t]),L=se(s=>{if(!e.searchFormId||e.source!=="search-form")return!0;const{getBlocksByClientId:C,getBlocks:k}=s("core/block-editor"),B=z=>{for(const R of z){if(R.name==="voxel-fse/search-form"&&R.attributes.blockId===e.searchFormId)return R.clientId;if(R.innerBlocks?.length>0){const _=B(R.innerBlocks);if(_)return _}}return null},M=B(k());if(!M)return!0;const $=C([M])?.[0];return $?$.attributes.mapEnableClusters!==!1:!0},[e.searchFormId,e.source]),U=$e(()=>{if(!p.current||v.current)return;const s=window.Voxel;if(!s?.Maps){console.warn("[Map Block] Voxel.Maps not available yet");return}v.current=!0,s.Maps.await(()=>{if(p.current)try{const C=new Qe({el:p.current,zoom:e.defaultZoom,center:new w(e.defaultLat,e.defaultLng),minZoom:e.minZoom,maxZoom:e.maxZoom});C.init().then(()=>{m.current=C,W(!0),console.log("[Map Block] Interactive map initialized in editor")}).catch(k=>{v.current=!1,console.error("[Map Block] Failed to initialize map:",k)})}catch(C){v.current=!1,console.error("[Map Block] Failed to initialize map:",C)}})},[e.defaultLat,e.defaultLng,e.defaultZoom,e.minZoom,e.maxZoom]);O(()=>{const s=setTimeout(()=>{U()},100);return()=>clearTimeout(s)},[U]),O(()=>{m.current&&v.current&&(m.current.setCenter(new w(e.defaultLat,e.defaultLng)),m.current.setZoom(e.defaultZoom))},[e.defaultLat,e.defaultLng,e.defaultZoom]),O(()=>{if(l.current){const s=fe(e);Ke(l.current,s)}},[e]),O(()=>{if(!I||!m.current)return;let s="",C=!1,k=!1;if(!h.current){const _=new et({});_.init(m.current),h.current=_}const B=()=>{d.current.forEach(N=>N.remove()),d.current=[];const _=m.current?.getElement();_&&_.querySelectorAll(".marker-wrapper").forEach(N=>N.remove()),g.current&&(g.current.clearMarkers(),g.current=null)},M=async()=>{if(k||C||!m.current)return;const _=document.querySelectorAll(".ts-preview[data-post-id]");if(_.length===0)return;const N=Array.from(_).map(H=>parseInt(H.getAttribute("data-post-id")||"0",10)).filter(H=>H>0);if(N.length===0)return;const re=N.sort().join(",");if(re!==s){C=!0;try{const H=window.wpApiSettings?.root||"/wp-json/",Ce=await fetch(`${H}voxel-fse/v1/map/markers`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.wpApiSettings?.nonce||""},body:JSON.stringify({post_ids:N})});if(k)return;const K=await Ce.json();if(!K.success||!K.markers||!m.current||k)return;B(),at();const ae=m.current,ye=h.current,_e=K.markers.map(P=>({lat:P.lat,lng:P.lng,template:P.template,postId:P.postId}));let D=null;if(L)try{if(D=new tt,await D.init(ae),k)return;g.current=D}catch(P){console.warn("[Map Block] Editor: clusterer init failed:",P)}const ie=await rt(ae,_e,ye,D);if(k){ie.forEach(P=>P.remove());return}d.current=ie,D&&D.render(),s=re,console.log("[Map Block] Editor: loaded",K.markers.length,"markers with popups")}catch(H){k||console.warn("[Map Block] Editor: failed to load markers:",H)}finally{C=!1}}};let b=0;const $=15;let z=null;const R=()=>{if(k)return;document.querySelectorAll(".ts-preview[data-post-id]").length>0||s!==""?M():b<$&&(b++,z=setTimeout(R,2e3))};return z=setTimeout(R,1500),()=>{k=!0,z&&clearTimeout(z),B()}},[I,L]);const x=()=>React.createElement(de,{attributes:e,setAttributes:n,stateAttribute:"mapContentAccordion",defaultPanel:"map-settings"},React.createElement(E,{id:"map-settings",title:i("Map settings","voxel-fse")},React.createElement(Q,{label:i("Markers","voxel-fse"),value:e.source,options:[{label:i("Get markers from Search Form widget","voxel-fse"),value:"search-form"},{label:i("Show marker of current post","voxel-fse"),value:"current-post"}],onChange:s=>n({source:s})}),e.source==="search-form"&&React.createElement(React.Fragment,null,React.createElement(Ee,{label:i("Link to search form","voxel-fse"),items:A.map(s=>({id:s.attributes.blockId||s.clientId,clientId:s.clientId,label:s.attributes.blockId||s.clientId.substring(0,7)})),selectedId:e.searchFormId,onSelect:s=>n({searchFormId:s??""}),widgetType:"SearchForm",description:i("Select the search form to link this map to.","voxel-fse")}),React.createElement(ce,{label:i('Show "Search this area" button',"voxel-fse"),checked:e.dragSearch,onChange:s=>n({dragSearch:s})}),e.dragSearch&&React.createElement(React.Fragment,null,React.createElement(Q,{label:i("Search mode","voxel-fse"),value:e.dragSearchMode,options:[{label:i("Automatic: Search is performed automatically as the user drags the map","voxel-fse"),value:"automatic"},{label:i("Manual: Search is performed when the button is clicked","voxel-fse"),value:"manual"}],onChange:s=>n({dragSearchMode:s})}),e.dragSearchMode==="automatic"&&React.createElement(Q,{label:i("Map drag default state","voxel-fse"),help:i("If enabled, dragging the map will trigger a search for posts within the visible map bounds.","voxel-fse"),value:e.dragSearchDefault,options:[{label:i("Checked","voxel-fse"),value:"checked"},{label:i("Unchecked","voxel-fse"),value:"unchecked"}],onChange:s=>n({dragSearchDefault:s})}))),React.createElement(S,{label:i("Height","voxel-fse"),attributes:e,setAttributes:n,attributeBaseName:"height",min:100,max:1200,step:1,units:["px","%","vh"],unitAttributeName:"heightUnit"}),React.createElement(ce,{label:i("Calculate height?","voxel-fse"),checked:e.enableCalcHeight,onChange:s=>n({enableCalcHeight:s})}),e.enableCalcHeight&&React.createElement(F,{label:i("Calculation","voxel-fse"),help:i("Use CSS calc() to calculate height e.g calc(100vh - 215px)","voxel-fse"),value:e.calcHeight,onChange:s=>n({calcHeight:s}),placeholder:"calc(100vh - 70px)"}),React.createElement(S,{label:i("Border radius","voxel-fse"),attributes:e,setAttributes:n,attributeBaseName:"mapBorderRadius",min:0,max:100,step:1})),React.createElement(E,{id:"default-location",title:i("Default map location","voxel-fse")},React.createElement("div",{style:{display:"flex",gap:"10px"}},React.createElement(F,{label:i("Default latitude","voxel-fse"),type:"number",value:String(e.defaultLat),onChange:s=>n({defaultLat:parseFloat(s)||0}),help:i("-90 to 90","voxel-fse")}),React.createElement(F,{label:i("Default longitude","voxel-fse"),type:"number",value:String(e.defaultLng),onChange:s=>n({defaultLng:parseFloat(s)||0}),help:i("-180 to 180","voxel-fse")})),React.createElement(Y,{label:i("Default zoom level","voxel-fse"),value:e.defaultZoom,onChange:s=>n({defaultZoom:s}),min:0,max:30}),React.createElement("div",{style:{display:"flex",gap:"10px"}},React.createElement(Y,{label:i("Minimum zoom level","voxel-fse"),value:e.minZoom,onChange:s=>n({minZoom:s}),min:0,max:30}),React.createElement(Y,{label:i("Maximum zoom level","voxel-fse"),value:e.maxZoom,onChange:s=>n({maxZoom:s}),min:0,max:30}))));return React.createElement(React.Fragment,null,React.createElement(be,null,React.createElement(we,{tabs:[{id:"content",label:i("Content","voxel-fse"),icon:"",render:x},{id:"style",label:i("Style","voxel-fse"),icon:"",render:()=>React.createElement(Xe,{attributes:e,setAttributes:n,context:"editor"})},{id:"advanced",label:i("Advanced","voxel-fse"),icon:"",render:()=>React.createElement(Re,{attributes:e,setAttributes:n})},{id:"voxel",label:i("Voxel","voxel-fse"),icon:"/wp-content/themes/voxel/assets/images/post-types/logo.svg",render:()=>React.createElement(Ie,{attributes:e,setAttributes:n})}]})),React.createElement("div",{...a,ref:l},u&&React.createElement("style",{dangerouslySetInnerHTML:{__html:u}}),e.source==="search-form"&&e.dragSearch&&React.createElement("div",{className:"ts-map-drag"},e.dragSearchMode==="automatic"?React.createElement("a",{href:"#",className:`ts-map-btn ts-drag-toggle ${e.dragSearchDefault==="checked"?"active":""}`,onClick:s=>s.preventDefault()},React.createElement("span",{dangerouslySetInnerHTML:{__html:it}}),i("Search as I move the map","voxel-fse")):React.createElement("a",{href:"#",className:"ts-search-area ts-map-btn",onClick:s=>s.preventDefault()},React.createElement("span",{dangerouslySetInnerHTML:{__html:lt}}),i("Search this area","voxel-fse"))),React.createElement("a",{href:"#",rel:"nofollow",role:"button",className:"vx-geolocate-me","aria-label":i("Share your location","voxel-fse"),onClick:s=>{s.preventDefault();const C=s.currentTarget;if(C.classList.add("loading"),!navigator.geolocation){C.classList.remove("loading");const k=window.Voxel_Config?.l10n?.positionFail||"Geolocation is not supported by your browser.";typeof window.Voxel?.alert=="function"?window.Voxel.alert(k,"error"):console.warn("[Map Block]",k);return}navigator.geolocation.getCurrentPosition(k=>{C.classList.remove("loading");const{latitude:B,longitude:M}=k.coords;m.current&&(m.current.setCenter(new w(B,M)),m.current.setZoom(15)),n({defaultLat:B,defaultLng:M,defaultZoom:15}),console.log("[Map Block] Geolocation success:",B,M)},k=>{C.classList.remove("loading");const B=window.Voxel_Config?.l10n?.positionFail||"Could not determine your location.";typeof window.Voxel?.alert=="function"?window.Voxel.alert(B,"error"):console.warn("[Map Block]",B)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})},style:{display:"flex",position:"absolute",top:"8px",left:"8px",width:"32px",height:"32px",backgroundColor:"#fff",boxShadow:"0 1px 4px -1px rgba(0,0,0,.3)",padding:"5px",borderRadius:"2px",alignItems:"center",justifyContent:"center",zIndex:5}},React.createElement("svg",{width:"22",height:"22",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{opacity:.6}},React.createElement("path",{d:"M12.4025 9.44141C10.884 9.44141 9.65283 10.6727 9.65283 12.1914C9.65283 13.7101 10.884 14.9414 12.4025 14.9414C13.921 14.9414 15.1522 13.7101 15.1522 12.1914C15.1522 10.6727 13.921 9.44141 12.4025 9.44141Z",fill:"currentColor"}),React.createElement("path",{d:"M13.1523 2.19141C13.1523 1.77719 12.8166 1.44141 12.4023 1.44141C11.9881 1.44141 11.6523 1.77719 11.6523 2.19141V3.72405C7.5566 4.0822 4.29367 7.34575 3.93549 11.4414H2.40234C1.98813 11.4414 1.65234 11.7772 1.65234 12.1914C1.65234 12.6056 1.98813 12.9414 2.40234 12.9414H3.93545C4.29344 17.0373 7.55645 20.301 11.6523 20.6592V22.1914C11.6523 22.6056 11.9881 22.9414 12.4023 22.9414C12.8166 22.9414 13.1523 22.6056 13.1523 22.1914V20.6592C17.2482 20.301 20.5113 17.0373 20.8692 12.9414H22.4023C22.8166 12.9414 23.1523 12.6056 23.1523 12.1914C23.1523 11.7772 22.8166 11.4414 22.4023 11.4414H20.8692C20.511 7.34575 17.2481 4.0822 13.1523 3.72405V2.19141ZM12.4025 7.94141C14.7496 7.94141 16.6522 9.84446 16.6522 12.1914C16.6522 14.5383 14.7496 16.4414 12.4025 16.4414C10.0554 16.4414 8.15283 14.5384 8.15283 12.1914C8.15283 9.84446 10.0554 7.94141 12.4025 7.94141ZM12.4025 9.44141C10.884 9.44141 9.65283 10.6727 9.65283 12.1914C9.65283 13.7101 10.884 14.9414 12.4025 14.9414C13.921 14.9414 15.1522 13.7101 15.1522 12.1914C15.1522 10.6727 13.921 9.44141 12.4025 9.44141Z",fill:"currentColor"}))),React.createElement("div",{style:{position:"relative"}},!I&&React.createElement(ze,{icon:"",text:i("Loading map...","voxel-fse"),style:{position:"absolute",inset:0,zIndex:10,height:e.enableCalcHeight&&e.calcHeight?e.calcHeight:`${e.height||400}${e.heightUnit||"px"}`,borderRadius:`${e.borderRadius||0}px`}}),React.createElement("div",{ref:p,className:"ts-map",style:{height:e.enableCalcHeight&&e.calcHeight?e.calcHeight:`${e.height||400}${e.heightUnit||"px"}`,borderRadius:`${e.borderRadius||0}px`},"data-config":JSON.stringify({center:{lat:e.defaultLat,lng:e.defaultLng},zoom:e.defaultZoom,minZoom:e.minZoom,maxZoom:e.maxZoom})})),React.createElement("div",{style:{display:"none"}},React.createElement("svg",{id:"ts-symbol-marker",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M3 10.9696C3 6.01585 7.02944 2 12 2C16.9706 2 21 6.01585 21 10.9696C21 16.3296 15.929 20.2049 12.7799 21.8117C12.2877 22.0628 11.7123 22.0628 11.2201 21.8117C8.07101 20.2049 3 16.3296 3 10.9696ZM12 14.6136C13.933 14.6136 15.5 13.0323 15.5 11.0818C15.5 9.13121 13.933 7.54997 12 7.54997C10.067 7.54997 8.5 9.13121 8.5 11.0818C8.5 13.0323 10.067 14.6136 12 14.6136Z"})))))}function ke(e){return function({attributes:t}){const r=t.blockId||"map",c=ve(t,{blockId:r,baseClass:"voxel-fse-map ts-map-widget elementor-widget-ts-map",selectorPrefix:"voxel-fse-map"}),o=xe(t,r),u=[c.responsiveCSS,o].filter(Boolean).join(`
`),a=me.save({id:c.elementId,className:c.className,style:c.styles,"data-source":t.source,"data-search-form-id":t.searchFormId||void 0,"data-visibility-behavior":t.visibilityBehavior||void 0,"data-visibility-rules":t.visibilityRules?.length?JSON.stringify(t.visibilityRules):void 0,"data-loop-source":t.loopSource||void 0,"data-loop-property":t.loopProperty||void 0,"data-loop-limit":t.loopLimit||void 0,"data-loop-offset":t.loopOffset||void 0,...c.customAttrs}),l=fe(t);return React.createElement("div",{...a},u&&React.createElement("style",{dangerouslySetInnerHTML:{__html:u}}),React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(l)}}),Te(t,!1,void 0,void 0,c.uniqueSelector),e&&React.createElement("div",{className:"voxel-fse-block-placeholder",style:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#e8e8e8",minHeight:"200px",borderRadius:"4px"}},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"48",height:"48",fill:"#999"},React.createElement("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"}))))}}const pt=ke(!1),mt=ke(!0),dt=()=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor"},React.createElement("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})),ht=[{attributes:{...X.attributes,...he,...ge},save:mt}];Be(X.name,{...X,attributes:{...X.attributes,...he,...ge},icon:dt,edit:st,save:pt,deprecated:ht});
