import t,{useState as W,useRef as y,useEffect as H}from"react";import{Button as C,RangeControl as h}from"@wordpress/components";import{__ as d}from"@wordpress/i18n";import{U as I}from"./TypographyPopup-CkDwan7Z.js";const O=()=>t.createElement("span",{className:"eicon eicon-edit",style:{fontSize:"14px"}}),a={blur:0,brightness:100,contrast:100,saturation:100,hue:0};function j({label:R,value:k,onChange:v}){const[p,b]=W(!1),l=y(null),r=y(null),n=k||{},z=Object.keys(n).length>0,x=Object.keys(n).some(e=>{const s=e,o=n[s],c=a[s];return o!==void 0&&o!==c}),B=()=>{v({})},L=()=>{!p&&!z&&v({...a}),b(!p)};H(()=>{if(!p||!l.current||!r.current)return;const e=()=>{if(!l.current||!r.current)return;const o=l.current,c=o.offsetWidth,g=o.offsetHeight,w=window.innerHeight,E=r.current.closest(".interface-interface-skeleton__sidebar")?.getBoundingClientRect();let m,i;if(E){m=E.left-c-12;const f=r.current.getBoundingClientRect();i=f.top-g/2+f.height/2}else{const f=r.current.getBoundingClientRect();m=f.left-c-8,i=f.top}m<8&&(m=8),i+g>w-8&&(i=w-g-8),i<8&&(i=8),o.style.top=`${i}px`,o.style.left=`${m}px`};requestAnimationFrame(e);const s=o=>{const c=window.__voxelDeviceChangeTimestamp||0;Date.now()-c<1e3||l.current&&!l.current.contains(o.target)&&r.current&&!r.current.contains(o.target)&&b(!1)};return window.addEventListener("resize",e),window.addEventListener("scroll",e,!0),document.addEventListener("mousedown",s),()=>{window.removeEventListener("resize",e),window.removeEventListener("scroll",e,!0),document.removeEventListener("mousedown",s)}},[p]);const u=(e,s)=>{v({...n,[e]:s})};return t.createElement("div",{className:"elementor-control elementor-control-type-css-filters",style:{position:"relative"}},t.createElement("div",{className:"elementor-control-content",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"}},t.createElement("span",{className:"elementor-control-title",style:{fontSize:"13px",fontWeight:500,textTransform:"capitalize",color:"rgb(30, 30, 30)",margin:0}},R),t.createElement("div",{style:{display:"flex",gap:"4px",alignItems:"center"}},x&&t.createElement(C,{icon:t.createElement(I,null),label:d("Reset","voxel-fse"),onClick:B,variant:"tertiary",size:"small",style:{minWidth:"auto",padding:"4px",width:"24px",height:"24px"}}),t.createElement(C,{ref:r,icon:t.createElement(O,null),size:"small",variant:"tertiary",onClick:L,style:{minWidth:"auto",padding:"4px",width:"24px",height:"24px",backgroundColor:x?"color-mix(in srgb, var(--wp-components-color-accent, var(--wp-admin-theme-color, #3858e9)) 4%, #0000)":void 0,borderRadius:x?"2px":void 0}}))),p&&t.createElement("div",{ref:l,className:"voxel-fse-css-filters-popup",style:{position:"fixed",zIndex:999999,backgroundColor:"#fff",border:"1px solid #ddd",borderRadius:"4px",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.12)",minWidth:"280px",maxWidth:"320px",maxHeight:"80vh",overflowY:"auto",overflowX:"hidden"}},t.createElement("div",{style:{position:"absolute",right:"-8px",top:"50%",transform:"translateY(-50%)",width:0,height:0,borderTop:"8px solid transparent",borderBottom:"8px solid transparent",borderLeft:"8px solid #fff",filter:"drop-shadow(2px 0 1px rgba(0,0,0,0.1))"}}),t.createElement("div",{style:{padding:"16px"}},t.createElement(h,{label:d("Blur","voxel-fse"),value:n.blur!==void 0?n.blur:a.blur,onChange:e=>u("blur",e),min:0,max:20,step:.1}),t.createElement(h,{label:d("Brightness","voxel-fse"),value:n.brightness!==void 0?n.brightness:a.brightness,onChange:e=>u("brightness",e),min:0,max:200,step:1}),t.createElement(h,{label:d("Contrast","voxel-fse"),value:n.contrast!==void 0?n.contrast:a.contrast,onChange:e=>u("contrast",e),min:0,max:200,step:1}),t.createElement(h,{label:d("Saturation","voxel-fse"),value:n.saturation!==void 0?n.saturation:a.saturation,onChange:e=>u("saturation",e),min:0,max:200,step:1}),t.createElement(h,{label:d("Hue","voxel-fse"),value:n.hue!==void 0?n.hue:a.hue,onChange:e=>u("hue",e),min:0,max:360,step:1}))))}export{j as C};
