import{registerBlockType as te}from"@wordpress/blocks";import{__ as a}from"@wordpress/i18n";import{useState as H,useRef as j,useCallback as N,useEffect as A,useMemo as G}from"react";import{useBlockProps as Y,InspectorControls as ne}from"@wordpress/block-editor";import{A as Z,a as w,R as v,S as b,T as C,C as i,c as M,B as F,b as U,D as O}from"../TypographyPopup-CAcEJ5NA.js";import{I as le}from"../InspectorTabs-Bq2wAh4W.js";import{SelectControl as k}from"@wordpress/components";import"@wordpress/data";import"@wordpress/api-fetch";/* empty css                            */import"../RepeaterControl-DWypQkdS.js";import"../voxelShim-DB_Ue-9R.js";import{g as ee}from"../useAdvancedTabProps-BnJDQbKr.js";import{r as re}from"../backgroundElements-Ui-iCrLV.js";import{A as D}from"../AdvancedIconControl-CJ_DCTeD.js";import{B as ce}from"../BackgroundControl-DZvfeWxy.js";import{V as ie}from"../VoxelGridIcon-D5dF5acW.js";import"react-dom";import"../generateAdvancedStyles-CRpLcHXt.js";import"../generateVoxelStyles-oZeaeuKH.js";import"../GalleryUploadControl-DMafjsl2.js";function se({attributes:e,setAttributes:l}){return React.createElement(Z,{attributes:e,setAttributes:l,stateAttribute:"contentTabOpenPanel",defaultPanel:"chart"},React.createElement(w,{id:"chart",title:a("Chart","voxel-fse")},React.createElement(k,{label:a("Show stats for","voxel-fse"),value:e.source,options:[{label:a("Current post","voxel-fse"),value:"post"},{label:a("Current user","voxel-fse"),value:"user"},{label:a("Sitewide stats","voxel-fse"),value:"site"}],onChange:o=>l({source:o})}),React.createElement(k,{label:a("Default view","voxel-fse"),value:e.activeChart,options:[{label:a("24 hours","voxel-fse"),value:"24h"},{label:a("7 days","voxel-fse"),value:"7d"},{label:a("30 days","voxel-fse"),value:"30d"},{label:a("12 months","voxel-fse"),value:"12m"}],onChange:o=>l({activeChart:o})}),React.createElement(k,{label:a("Display data","voxel-fse"),value:e.viewType,options:[{label:a("Total views","voxel-fse"),value:"views"},{label:a("Unique views","voxel-fse"),value:"unique_views"}],onChange:o=>l({viewType:o})})),React.createElement(w,{id:"icons",title:a("Icons","voxel-fse")},React.createElement(D,{label:a("Icon","voxel-fse"),value:e.chartIcon,onChange:o=>l({chartIcon:o}),supportsDynamicTags:!0,dynamicTagContext:"post"}),React.createElement(D,{label:a("Right chevron","voxel-fse"),value:e.chevronRight,onChange:o=>l({chevronRight:o}),supportsDynamicTags:!0,dynamicTagContext:"post"}),React.createElement(D,{label:a("Left chevron","voxel-fse"),value:e.chevronLeft,onChange:o=>l({chevronLeft:o}),supportsDynamicTags:!0,dynamicTagContext:"post"})))}function de({attributes:e,setAttributes:l}){return React.createElement(Z,{attributes:e,setAttributes:l,stateAttribute:"styleTabOpenPanel",defaultPanel:"chart"},React.createElement(w,{id:"chart",title:a("Chart","voxel-fse")},React.createElement(v,{label:a("Content height","voxel-fse"),attributes:e,setAttributes:l,attributeBaseName:"chartHeight",min:0,max:1e3,units:["px"]}),React.createElement(b,{label:a("Axis","voxel-fse")}),React.createElement(C,{label:a("Typography","voxel-fse"),attributes:e,setAttributes:l,attributeName:"axisTypography"}),React.createElement(i,{label:a("Text color","voxel-fse"),value:e.axisTextColor||"",onChange:o=>l({axisTextColor:o})}),React.createElement(v,{label:a("Vertical axis width","voxel-fse"),attributes:e,setAttributes:l,attributeBaseName:"verticalAxisWidth",min:50,max:200,units:["px"]}),React.createElement(b,{label:a("Chart lines","voxel-fse")}),React.createElement(k,{label:a("Border Type","voxel-fse"),value:e.chartLineBorderType||"default",options:[{value:"default",label:a("Default","voxel-fse")},{value:"none",label:a("None","voxel-fse")},{value:"solid",label:a("Solid","voxel-fse")},{value:"dashed",label:a("Dashed","voxel-fse")},{value:"dotted",label:a("Dotted","voxel-fse")},{value:"double",label:a("Double","voxel-fse")}],onChange:o=>l({chartLineBorderType:o})}),React.createElement(b,{label:a("Chart Bars","voxel-fse")}),React.createElement(v,{label:a("Bar gap","voxel-fse"),attributes:e,setAttributes:l,attributeBaseName:"barGap",min:0,max:100,units:["px"]}),React.createElement(v,{label:a("Bar width","voxel-fse"),attributes:e,setAttributes:l,attributeBaseName:"barWidth",min:0,max:100,units:["px"]}),React.createElement(v,{label:a("Bar radius","voxel-fse"),attributes:e,setAttributes:l,attributeBaseName:"barRadius",min:0,max:100,units:["px"]}),React.createElement(ce,{label:a("Background color","voxel-fse"),attributes:e,setAttributes:l,attributeBaseName:"barBackground",types:["classic","gradient"]}),React.createElement(i,{label:a("Background color (Hover)","voxel-fse"),value:e.barBackgroundHover||"",onChange:o=>l({barBackgroundHover:o})}),React.createElement(M,{label:a("Box Shadow","voxel-fse"),attributes:e,setAttributes:l,shadowAttributeName:"barBoxShadow"}),React.createElement(b,{label:a("Bar popup","voxel-fse")}),React.createElement(i,{label:a("Background color","voxel-fse"),value:e.barPopupBackground||"",onChange:o=>l({barPopupBackground:o})}),React.createElement(F,{label:a("Border","voxel-fse"),value:{borderType:e.barPopupBorderType||"",borderWidth:e.barPopupBorderWidth||{},borderColor:e.barPopupBorderColor||""},onChange:o=>{const n={};o.borderType!==void 0&&(n.barPopupBorderType=o.borderType),o.borderWidth!==void 0&&(n.barPopupBorderWidth=o.borderWidth),o.borderColor!==void 0&&(n.barPopupBorderColor=o.borderColor),l(n)},hideRadius:!0}),React.createElement(v,{label:a("Bar radius","voxel-fse"),attributes:e,setAttributes:l,attributeBaseName:"barPopupRadius",min:0,max:100,units:["px"]}),React.createElement(M,{label:a("Box Shadow","voxel-fse"),attributes:e,setAttributes:l,shadowAttributeName:"barPopupBoxShadow"}),React.createElement(b,{label:a("Bar popup: Value","voxel-fse")}),React.createElement(C,{label:a("Typography","voxel-fse"),attributes:e,setAttributes:l,attributeName:"barPopupValueTypography"}),React.createElement(i,{label:a("Color","voxel-fse"),value:e.barPopupValueColor||"",onChange:o=>l({barPopupValueColor:o})}),React.createElement(b,{label:a("Bar popup: Label","voxel-fse")}),React.createElement(C,{label:a("Typography","voxel-fse"),attributes:e,setAttributes:l,attributeName:"barPopupLabelTypography"}),React.createElement(i,{label:a("Color","voxel-fse"),value:e.barPopupLabelColor||"",onChange:o=>l({barPopupLabelColor:o})})),React.createElement(w,{id:"tabs",title:a("Tabs","voxel-fse")},React.createElement(U,{attributeName:"tabsState",attributes:e,setAttributes:l,tabs:[{name:"normal",title:a("Normal","voxel-fse")},{name:"hover",title:a("Hover","voxel-fse")}]},o=>o.name==="normal"?React.createElement(React.Fragment,null,React.createElement(b,{label:a("Timeline tabs","voxel-fse")}),React.createElement(k,{label:a("Justify","voxel-fse"),value:e.tabsJustify||"left",options:[{value:"left",label:a("Left","voxel-fse")},{value:"center",label:a("Center","voxel-fse")},{value:"flex-end",label:a("Right","voxel-fse")},{value:"space-between",label:a("Space between","voxel-fse")},{value:"space-around",label:a("Space around","voxel-fse")}],onChange:n=>l({tabsJustify:n})}),React.createElement(O,{label:a("Padding","voxel-fse"),values:e.tabsPadding||{},onChange:n=>l({tabsPadding:n})}),React.createElement(O,{label:a("Margin","voxel-fse"),values:e.tabsMargin||{},onChange:n=>l({tabsMargin:n})}),React.createElement(C,{label:a("Tab typography","voxel-fse"),attributes:e,setAttributes:l,attributeName:"tabsTypography"}),React.createElement(C,{label:a("Active tab typography","voxel-fse"),attributes:e,setAttributes:l,attributeName:"tabsActiveTypography"}),React.createElement(i,{label:a("Text color","voxel-fse"),value:e.tabsTextColor||"",onChange:n=>l({tabsTextColor:n})}),React.createElement(i,{label:a("Active text color","voxel-fse"),value:e.tabsActiveTextColor||"",onChange:n=>l({tabsActiveTextColor:n})}),React.createElement(i,{label:a("Background","voxel-fse"),value:e.tabsBackground||"",onChange:n=>l({tabsBackground:n})}),React.createElement(i,{label:a("Active background","voxel-fse"),value:e.tabsActiveBackground||"",onChange:n=>l({tabsActiveBackground:n})}),React.createElement(k,{label:a("Border Type","voxel-fse"),value:e.tabsBorderType||"default",options:[{value:"default",label:a("Default","voxel-fse")},{value:"none",label:a("None","voxel-fse")},{value:"solid",label:a("Solid","voxel-fse")},{value:"dashed",label:a("Dashed","voxel-fse")},{value:"dotted",label:a("Dotted","voxel-fse")},{value:"double",label:a("Double","voxel-fse")}],onChange:n=>l({tabsBorderType:n})}),React.createElement(i,{label:a("Active border color","voxel-fse"),value:e.tabsActiveBorderColor||"",onChange:n=>l({tabsActiveBorderColor:n})}),React.createElement(v,{label:a("Border radius","voxel-fse"),attributes:e,setAttributes:l,attributeBaseName:"tabsBorderRadius",min:0,max:100,units:["px"]})):React.createElement(React.Fragment,null,React.createElement(b,{label:a("Timeline tabs","voxel-fse")}),React.createElement(i,{label:a("Text color","voxel-fse"),value:e.tabsTextColorHover||"",onChange:n=>l({tabsTextColorHover:n})}),React.createElement(i,{label:a("Active text color","voxel-fse"),value:e.tabsActiveTextColorHover||"",onChange:n=>l({tabsActiveTextColorHover:n})}),React.createElement(i,{label:a("Border color","voxel-fse"),value:e.tabsBorderColorHover||"",onChange:n=>l({tabsBorderColorHover:n})}),React.createElement(i,{label:a("Active border color","voxel-fse"),value:e.tabsActiveBorderColorHover||"",onChange:n=>l({tabsActiveBorderColorHover:n})}),React.createElement(i,{label:a("Background","voxel-fse"),value:e.tabsBackgroundHover||"",onChange:n=>l({tabsBackgroundHover:n})}),React.createElement(i,{label:a("Active background","voxel-fse"),value:e.tabsActiveBackgroundHover||"",onChange:n=>l({tabsActiveBackgroundHover:n})})))),React.createElement(w,{id:"week-buttons",title:a("Next/Prev week buttons","voxel-fse")},React.createElement(U,{attributeName:"weekButtonsState",attributes:e,setAttributes:l,tabs:[{name:"normal",title:a("Normal","voxel-fse")},{name:"hover",title:a("Hover","voxel-fse")}]},o=>o.name==="normal"?React.createElement(React.Fragment,null,React.createElement(b,{label:a("Range","voxel-fse")}),React.createElement(C,{label:a("Typography","voxel-fse"),attributes:e,setAttributes:l,attributeName:"weekRangeTypography"}),React.createElement(i,{label:a("Text color","voxel-fse"),value:e.weekRangeTextColor||"",onChange:n=>l({weekRangeTextColor:n})}),React.createElement(b,{label:a("Week buttons","voxel-fse")}),React.createElement(i,{label:a("Button icon color","voxel-fse"),value:e.weekButtonIconColor||"",onChange:n=>l({weekButtonIconColor:n})}),React.createElement(v,{label:a("Button icon size","voxel-fse"),attributes:e,setAttributes:l,attributeBaseName:"weekButtonIconSize",min:0,max:100,units:["px","%"]}),React.createElement(i,{label:a("Button background","voxel-fse"),value:e.weekButtonBackground||"",onChange:n=>l({weekButtonBackground:n})}),React.createElement(F,{label:a("Border Type","voxel-fse"),value:{borderType:e.weekButtonBorderType||"",borderWidth:e.weekButtonBorderWidth||{},borderColor:e.weekButtonBorderColor||""},onChange:n=>{const c={};n.borderType!==void 0&&(c.weekButtonBorderType=n.borderType),n.borderWidth!==void 0&&(c.weekButtonBorderWidth=n.borderWidth),n.borderColor!==void 0&&(c.weekButtonBorderColor=n.borderColor),l(c)},hideRadius:!0}),React.createElement(v,{label:a("Button border radius","voxel-fse"),attributes:e,setAttributes:l,attributeBaseName:"weekButtonBorderRadius",min:0,max:100,units:["px","%"]}),React.createElement(v,{label:a("Button size","voxel-fse"),attributes:e,setAttributes:l,attributeBaseName:"weekButtonSize",min:0,max:100,units:["px","%"]}),React.createElement(b,{label:a("Icons","voxel-fse")})):React.createElement(React.Fragment,null,React.createElement(i,{label:a("Button icon color","voxel-fse"),value:e.weekButtonIconColorHover||"",onChange:n=>l({weekButtonIconColorHover:n})}),React.createElement(i,{label:a("Button background color","voxel-fse"),value:e.weekButtonBackgroundHover||"",onChange:n=>l({weekButtonBackgroundHover:n})}),React.createElement(i,{label:a("Button border color","voxel-fse"),value:e.weekButtonBorderColorHover||"",onChange:n=>l({weekButtonBorderColorHover:n})})))),React.createElement(w,{id:"no-activity",title:a("No activity","voxel-fse")},React.createElement(v,{label:a("Content gap","voxel-fse"),attributes:e,setAttributes:l,attributeBaseName:"noActivityContentGap",min:0,max:100,units:["px"]}),React.createElement(v,{label:a("Icon size","voxel-fse"),attributes:e,setAttributes:l,attributeBaseName:"noActivityIconSize",min:0,max:100,units:["px"]}),React.createElement(i,{label:a("Icon color","voxel-fse"),value:e.noActivityIconColor||"",onChange:o=>l({noActivityIconColor:o})}),React.createElement(C,{label:a("Typography","voxel-fse"),attributes:e,setAttributes:l,attributeName:"noActivityTypography"}),React.createElement(i,{label:a("Text color","voxel-fse"),value:e.noActivityTextColor||"",onChange:o=>l({noActivityTextColor:o})})))}const z={"24h":a("24 hours","voxel-fse"),"7d":a("7 days","voxel-fse"),"30d":a("30 days","voxel-fse"),"12m":a("12 months","voxel-fse")},q=()=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"48",height:"48",fill:"currentColor"},React.createElement("rect",{x:"4",y:"12",width:"4",height:"8",rx:"0.5"}),React.createElement("rect",{x:"10",y:"8",width:"4",height:"12",rx:"0.5"}),React.createElement("rect",{x:"16",y:"4",width:"4",height:"16",rx:"0.5"})),J=e=>e?e.library&&e.value&&!e.value.includes(".")?React.createElement("i",{className:e.value,"aria-hidden":"true"}):e.value&&e.value.includes("<svg")?React.createElement("span",{dangerouslySetInnerHTML:{__html:e.value},"aria-hidden":"true"}):e.url?React.createElement("img",{src:e.url,alt:"","aria-hidden":"true",style:{width:"48px",height:"48px"}}):React.createElement(q,null):React.createElement(q,null);function pe({attributes:e,context:l,vxconfig:o}){const[n,c]=H(e.activeChart||"7d"),[t,d]=H({"24h":{loaded:!1},"7d":{loaded:!1},"30d":{loaded:!1},"12m":{loaded:!1}}),[y,g]=H(!1),[m,R]=H(null),B=j(null),E=j(null),u=j({isDown:!1,startX:0,scrollLeft:0});N(()=>typeof window<"u"&&window.wpApiSettings?.root?window.wpApiSettings.root:"/wp-json/",[]);const S=N(async r=>{if(l!=="editor"&&o){g(!0);try{const s=new URLSearchParams({source:o.source,timeframe:r,view_type:o.viewType,_wpnonce:o.nonce});o.source==="post"&&o.postId&&s.append("post_id",String(o.postId));const x=`${window.Voxel_Config?.ajax_url||"/wp-admin/admin-ajax.php?"}&action=tracking.get_chart_data&${s.toString()}`,f=await(await fetch(x)).json();if(f.success&&f.data)d(P=>({...P,[r]:{loaded:!0,steps:f.data.steps,items:f.data.items,meta:f.data.meta}}));else{const P=f.message||window.Voxel_Config?.l10n?.ajaxError||"An error occurred";window.Voxel?.alert&&window.Voxel.alert(P,"error"),d(W=>({...W,[r]:{loaded:!0,error:!0}}))}}catch{const s=window.Voxel_Config?.l10n?.ajaxError||"An error occurred";window.Voxel?.alert&&window.Voxel.alert(s,"error"),d(p=>({...p,[r]:{loaded:!0,error:!0}}))}finally{g(!1)}}},[l,o]);A(()=>{const r=t[n];r&&!r.loaded&&l==="frontend"&&S(n)},[n,t,l,S]),A(()=>{const r=B.current;if(!r)return;const s=()=>{u.current.isDown=!1},p=()=>{u.current.isDown=!1},x=f=>{u.current.isDown=!0,u.current.startX=f.pageX-r.offsetLeft,u.current.scrollLeft=r.scrollLeft},L=f=>{if(!u.current.isDown)return;f.preventDefault();const W=f.pageX-r.offsetLeft-u.current.startX;r.scrollLeft=u.current.scrollLeft-W};return r.addEventListener("mouseup",s),r.addEventListener("mouseleave",p),r.addEventListener("mousedown",x),r.addEventListener("mousemove",L),requestAnimationFrame(()=>{r.scrollLeft=r.scrollWidth}),()=>{r.removeEventListener("mouseup",s),r.removeEventListener("mouseleave",p),r.removeEventListener("mousedown",x),r.removeEventListener("mousemove",L)}},[n]);const T=N((r,s)=>{R(s);const p=E.current;if(!p)return;const x=r.currentTarget.getBoundingClientRect();p.style.top=`${x.top}px`,window.innerWidth-x.right>=p.offsetWidth+10?p.style.left=`${x.left+x.width+10}px`:p.style.left=`${x.left-p.offsetWidth-10}px`},[]),_=N(()=>{R(null)},[]),h=t[n],I=()=>l!=="frontend"||!o?null:React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(o)}});return l==="editor"?React.createElement("div",{className:"ts-visits-chart voxel-fse-editor-preview"},React.createElement("ul",{className:"ts-generic-tabs simplify-ul flexify bar-chart-tabs"},Object.keys(z).map(r=>React.createElement("li",{key:r,className:n===r?"ts-tab-active":""},React.createElement("a",{href:"#",onClick:s=>{s.preventDefault(),c(r)}},z[r])))),React.createElement("div",{className:`ts-chart chart-${n}`},React.createElement("div",{className:"chart-contain"},React.createElement("div",{className:"chart-content"},React.createElement("div",{className:"bar-item-con bar-values"},React.createElement("span",null,"100"),React.createElement("span",null,"80"),React.createElement("span",null,"60"),React.createElement("span",null,"40"),React.createElement("span",null,"20"),React.createElement("span",null,"0"))),React.createElement("div",{className:"chart-content min-scroll min-scroll-h"},["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((r,s)=>React.createElement("div",{key:r,className:"bar-item-con"},React.createElement("div",{className:"bi-hold"},React.createElement("div",{className:"bar-item bar-animate",style:{height:`${20+Math.random()*60}%`}})),React.createElement("span",null,r)))))),React.createElement("div",{className:"voxel-fse-editor-info"},React.createElement("small",null,a("Source:","voxel-fse")," ",e.source," |"," ",a("Data:","voxel-fse")," ",e.viewType==="unique_views"?a("Unique views","voxel-fse"):a("Total views","voxel-fse")))):React.createElement(React.Fragment,null,I(),React.createElement("ul",{className:"ts-generic-tabs simplify-ul flexify bar-chart-tabs"},Object.keys(z).map(r=>React.createElement("li",{key:r,className:n===r?"ts-tab-active":""},React.createElement("a",{href:"#",onClick:s=>{s.preventDefault(),c(r)}},z[r])))),h&&React.createElement("div",{className:`ts-chart chart-${n}${y?" vx-pending":""}`},!h.loaded&&React.createElement("div",{className:"chart-contain"},React.createElement("div",{className:"ts-no-posts"},J(e.chartIcon),React.createElement("p",null,a("Loading data","voxel-fse")))),h.loaded&&React.createElement(React.Fragment,null,h.meta?.has_activity&&h.items&&React.createElement("div",{className:"chart-contain"},React.createElement("div",{className:"chart-content"},React.createElement("div",{className:"bar-item-con bar-values"},h.steps?.map((r,s)=>React.createElement("span",{key:s},r)))),React.createElement("div",{className:"chart-content min-scroll min-scroll-h",ref:B},h.items.map((r,s)=>React.createElement("div",{key:s,className:"bar-item-con"},React.createElement("div",{className:"bi-hold"},React.createElement("div",{className:"bar-item bar-animate",style:{height:`${r.percent}%`},onMouseOver:p=>T(p,r),onMouseLeave:_})),React.createElement("span",null,r.label)))),React.createElement("ul",{ref:E,className:`flexify simplify-ul bar-item-data${m?" active":""}`},React.createElement("li",null,React.createElement("small",null,a("Views","voxel-fse")),m?.count||""),React.createElement("li",null,React.createElement("small",null,a("Unique views","voxel-fse")),m?.unique_count||""))),!h.meta?.has_activity&&React.createElement("div",{className:"ts-no-posts"},J(e.chartIcon),React.createElement("p",null,a("No activity","voxel-fse"))))))}function X(e,l){if(!e)return"";const{unit:o="px"}=e,n=parseFloat(String(e.top))||0,c=parseFloat(String(e.right))||0,t=parseFloat(String(e.bottom))||0,d=parseFloat(String(e.left))||0;return`${l}: ${n}${o} ${c}${o} ${t}${o} ${d}${o};`}function K(e){if(!e?.borderType||e.borderType==="none")return"";const l=e.borderWidth||{},o=parseFloat(String(l.top))||0,n=parseFloat(String(l.right))||0,c=parseFloat(String(l.bottom))||0,t=parseFloat(String(l.left))||0,d=e.borderColor||"#000000";return`border-style: ${e.borderType}; border-width: ${o}px ${n}px ${c}px ${t}px; border-color: ${d};`}function Q(e){if(!e||!e.enable)return"";const{horizontal:l=0,vertical:o=0,blur:n=0,spread:c=0,color:t="rgba(0,0,0,0.1)",position:d="outline"}=e;return`box-shadow: ${d==="inset"?"inset ":""}${l}px ${o}px ${n}px ${c}px ${t};`}function $(e){if(!e)return"";let l="";return e.fontFamily&&(l+=`font-family: ${e.fontFamily}; `),e.fontSize&&(l+=`font-size: ${e.fontSize}${e.fontSizeUnit||"px"}; `),e.fontWeight&&(l+=`font-weight: ${e.fontWeight}; `),e.fontStyle&&(l+=`font-style: ${e.fontStyle}; `),e.textTransform&&(l+=`text-transform: ${e.textTransform}; `),e.textDecoration&&(l+=`text-decoration: ${e.textDecoration}; `),e.lineHeight&&(l+=`line-height: ${e.lineHeight}${e.lineHeightUnit||""}; `),e.letterSpacing&&(l+=`letter-spacing: ${e.letterSpacing}${e.letterSpacingUnit||"px"}; `),l}function ve(e){if(!e)return"";if((e.backgroundType||"classic")==="gradient"&&e.backgroundGradient)return`background-image: ${e.backgroundGradient}; `;let o="";if(e.backgroundColor&&(o+=`background-color: ${e.backgroundColor}; `),e.backgroundImage?.url){const n=e.backgroundImage;o+=`background-image: url(${n.url}); `,n.position&&(o+=`background-position: ${n.position}; `),n.attachment&&(o+=`background-attachment: ${n.attachment}; `),n.repeat&&(o+=`background-repeat: ${n.repeat}; `),n.size&&(o+=`background-size: ${n.size}; `)}return o}function oe(e,l){const o=[],n=[],c=[],t=`.voxel-fse-visit-chart-frontend.voxel-fse-visit-chart-${l}`;e.chartHeight!==void 0&&o.push(`${t} .ts-chart .ts-no-posts, ${t} .ts-chart .chart-content { height: ${e.chartHeight}px; }`),e.chartHeight_tablet!==void 0&&n.push(`${t} .ts-chart .ts-no-posts, ${t} .ts-chart .chart-content { height: ${e.chartHeight_tablet}px; }`),e.chartHeight_mobile!==void 0&&c.push(`${t} .ts-chart .ts-no-posts, ${t} .ts-chart .chart-content { height: ${e.chartHeight_mobile}px; }`);const d=$(e.axisTypography);d&&o.push(`${t} .chart-content span { ${d} }`),e.axisTextColor&&o.push(`${t} .chart-content span { color: ${e.axisTextColor}; }`),e.verticalAxisWidth!==void 0&&o.push(`${t} .chart-content.min-scroll { margin-left: ${e.verticalAxisWidth}px; }`),e.verticalAxisWidth_tablet!==void 0&&n.push(`${t} .chart-content.min-scroll { margin-left: ${e.verticalAxisWidth_tablet}px; }`),e.verticalAxisWidth_mobile!==void 0&&c.push(`${t} .chart-content.min-scroll { margin-left: ${e.verticalAxisWidth_mobile}px; }`),e.chartLineBorderType&&e.chartLineBorderType!=="default"&&(e.chartLineBorderType==="none"?o.push(`${t} .chart-content .bar-values span { border-top-style: none; }`):o.push(`${t} .chart-content .bar-values span { border-top-style: ${e.chartLineBorderType}; }`)),e.barGap!==void 0&&o.push(`${t} .chart-content { grid-gap: ${e.barGap}px; }`),e.barGap_tablet!==void 0&&n.push(`${t} .chart-content { grid-gap: ${e.barGap_tablet}px; }`),e.barGap_mobile!==void 0&&c.push(`${t} .chart-content { grid-gap: ${e.barGap_mobile}px; }`),e.barWidth!==void 0&&o.push(`${t} .chart-content .bar-item { width: ${e.barWidth}px; }`),e.barWidth_tablet!==void 0&&n.push(`${t} .chart-content .bar-item { width: ${e.barWidth_tablet}px; }`),e.barWidth_mobile!==void 0&&c.push(`${t} .chart-content .bar-item { width: ${e.barWidth_mobile}px; }`),e.barRadius!==void 0&&o.push(`${t} .chart-content .bar-item { border-radius: ${e.barRadius}px; }`),e.barRadius_tablet!==void 0&&n.push(`${t} .chart-content .bar-item { border-radius: ${e.barRadius_tablet}px; }`),e.barRadius_mobile!==void 0&&c.push(`${t} .chart-content .bar-item { border-radius: ${e.barRadius_mobile}px; }`);const y=ve(e.barBackground);y&&o.push(`${t} .chart-content .bar-item { ${y} }`),e.barBackgroundHover&&o.push(`${t} .chart-content .bar-item:hover { background-color: ${e.barBackgroundHover}; }`);const g=Q(e.barBoxShadow);g&&o.push(`${t} .chart-content .bar-item { ${g} }`),e.barPopupBackground&&o.push(`${t} .bar-item-data { background-color: ${e.barPopupBackground}; }`);const m=K({borderType:e.barPopupBorderType,borderWidth:e.barPopupBorderWidth,borderColor:e.barPopupBorderColor});m&&o.push(`${t} .bar-item-data { ${m} }`),e.barPopupRadius!==void 0&&o.push(`${t} .bar-item-data { border-radius: ${e.barPopupRadius}px; }`),e.barPopupRadius_tablet!==void 0&&n.push(`${t} .bar-item-data { border-radius: ${e.barPopupRadius_tablet}px; }`),e.barPopupRadius_mobile!==void 0&&c.push(`${t} .bar-item-data { border-radius: ${e.barPopupRadius_mobile}px; }`);const R=Q(e.barPopupBoxShadow);R&&o.push(`${t} .bar-item-data { ${R} }`);const B=$(e.barPopupValueTypography);B&&o.push(`${t} .bar-item-data li { ${B} }`),e.barPopupValueColor&&o.push(`${t} .bar-item-data li { color: ${e.barPopupValueColor}; }`);const E=$(e.barPopupLabelTypography);E&&o.push(`${t} .bar-item-data li small { ${E} }`),e.barPopupLabelColor&&o.push(`${t} .bar-item-data li small { color: ${e.barPopupLabelColor}; }`),e.tabsJustify&&o.push(`${t} .ts-generic-tabs { justify-content: ${e.tabsJustify}; }`);const u=X(e.tabsPadding,"padding");u&&o.push(`${t} .ts-generic-tabs li a { ${u} }`);const S=X(e.tabsMargin,"margin");S&&o.push(`${t} .ts-generic-tabs li { ${S} }`);const T=$(e.tabsTypography);T&&o.push(`${t} .ts-generic-tabs li a { ${T} }`);const _=$(e.tabsActiveTypography);_&&o.push(`${t} .ts-generic-tabs li.ts-tab-active a { ${_} }`),e.tabsTextColor&&o.push(`${t} .ts-generic-tabs li a { color: ${e.tabsTextColor}; }`),e.tabsActiveTextColor&&o.push(`${t} .ts-generic-tabs li.ts-tab-active a { color: ${e.tabsActiveTextColor}; }`),e.tabsBackground&&o.push(`${t} .ts-generic-tabs li a { background-color: ${e.tabsBackground}; }`),e.tabsActiveBackground&&o.push(`${t} .ts-generic-tabs li.ts-tab-active a { background-color: ${e.tabsActiveBackground}; }`),e.tabsBorderType&&e.tabsBorderType!=="default"&&(e.tabsBorderType==="none"?o.push(`${t} .ts-generic-tabs li a { border-style: none; }`):o.push(`${t} .ts-generic-tabs li a { border-style: ${e.tabsBorderType}; }`)),e.tabsActiveBorderColor&&o.push(`${t} .ts-generic-tabs li.ts-tab-active a { border-color: ${e.tabsActiveBorderColor}; }`),e.tabsBorderRadius!==void 0&&o.push(`${t} .ts-generic-tabs li a { border-radius: ${e.tabsBorderRadius}px; }`),e.tabsBorderRadius_tablet!==void 0&&n.push(`${t} .ts-generic-tabs li a { border-radius: ${e.tabsBorderRadius_tablet}px; }`),e.tabsBorderRadius_mobile!==void 0&&c.push(`${t} .ts-generic-tabs li a { border-radius: ${e.tabsBorderRadius_mobile}px; }`),e.tabsTextColorHover&&o.push(`${t} .ts-generic-tabs li a:hover { color: ${e.tabsTextColorHover}; }`),e.tabsActiveTextColorHover&&o.push(`${t} .ts-generic-tabs li.ts-tab-active a:hover { color: ${e.tabsActiveTextColorHover}; }`),e.tabsBorderColorHover&&o.push(`${t} .ts-generic-tabs li a:hover { border-color: ${e.tabsBorderColorHover}; }`),e.tabsActiveBorderColorHover&&o.push(`${t} .ts-generic-tabs li.ts-tab-active a:hover { border-color: ${e.tabsActiveBorderColorHover}; }`),e.tabsBackgroundHover&&o.push(`${t} .ts-generic-tabs li a:hover { background-color: ${e.tabsBackgroundHover}; }`),e.tabsActiveBackgroundHover&&o.push(`${t} .ts-generic-tabs li.ts-tab-active a:hover { background-color: ${e.tabsActiveBackgroundHover}; }`);const h=$(e.weekRangeTypography);h&&o.push(`${t} .ts-chart-nav p { ${h} }`),e.weekRangeTextColor&&o.push(`${t} .ts-chart-nav p { color: ${e.weekRangeTextColor}; }`),e.weekButtonIconColor&&(o.push(`${t} .ts-chart-nav .ts-icon-btn i { color: ${e.weekButtonIconColor}; }`),o.push(`${t} .ts-chart-nav .ts-icon-btn svg { fill: ${e.weekButtonIconColor}; }`)),e.weekButtonIconSize!==void 0&&(o.push(`${t} .ts-chart-nav .ts-icon-btn i { font-size: ${e.weekButtonIconSize}px; }`),o.push(`${t} .ts-chart-nav .ts-icon-btn svg { width: ${e.weekButtonIconSize}px; height: ${e.weekButtonIconSize}px; }`)),e.weekButtonIconSize_tablet!==void 0&&(n.push(`${t} .ts-chart-nav .ts-icon-btn i { font-size: ${e.weekButtonIconSize_tablet}px; }`),n.push(`${t} .ts-chart-nav .ts-icon-btn svg { width: ${e.weekButtonIconSize_tablet}px; height: ${e.weekButtonIconSize_tablet}px; }`)),e.weekButtonIconSize_mobile!==void 0&&(c.push(`${t} .ts-chart-nav .ts-icon-btn i { font-size: ${e.weekButtonIconSize_mobile}px; }`),c.push(`${t} .ts-chart-nav .ts-icon-btn svg { width: ${e.weekButtonIconSize_mobile}px; height: ${e.weekButtonIconSize_mobile}px; }`)),e.weekButtonBackground&&o.push(`${t} .ts-chart-nav .ts-icon-btn { background-color: ${e.weekButtonBackground}; }`);const I=K({borderType:e.weekButtonBorderType,borderWidth:e.weekButtonBorderWidth,borderColor:e.weekButtonBorderColor});I&&o.push(`${t} .ts-chart-nav .ts-icon-btn { ${I} }`),e.weekButtonBorderRadius!==void 0&&o.push(`${t} .ts-chart-nav .ts-icon-btn { border-radius: ${e.weekButtonBorderRadius}px; }`),e.weekButtonBorderRadius_tablet!==void 0&&n.push(`${t} .ts-chart-nav .ts-icon-btn { border-radius: ${e.weekButtonBorderRadius_tablet}px; }`),e.weekButtonBorderRadius_mobile!==void 0&&c.push(`${t} .ts-chart-nav .ts-icon-btn { border-radius: ${e.weekButtonBorderRadius_mobile}px; }`),e.weekButtonSize!==void 0&&o.push(`${t} .ts-chart-nav .ts-icon-btn { width: ${e.weekButtonSize}px; height: ${e.weekButtonSize}px; min-width: ${e.weekButtonSize}px; }`),e.weekButtonSize_tablet!==void 0&&n.push(`${t} .ts-chart-nav .ts-icon-btn { width: ${e.weekButtonSize_tablet}px; height: ${e.weekButtonSize_tablet}px; min-width: ${e.weekButtonSize_tablet}px; }`),e.weekButtonSize_mobile!==void 0&&c.push(`${t} .ts-chart-nav .ts-icon-btn { width: ${e.weekButtonSize_mobile}px; height: ${e.weekButtonSize_mobile}px; min-width: ${e.weekButtonSize_mobile}px; }`),e.weekButtonIconColorHover&&(o.push(`${t} .ts-chart-nav .ts-icon-btn:hover i { color: ${e.weekButtonIconColorHover}; }`),o.push(`${t} .ts-chart-nav .ts-icon-btn:hover svg { fill: ${e.weekButtonIconColorHover}; }`)),e.weekButtonBackgroundHover&&o.push(`${t} .ts-chart-nav .ts-icon-btn:hover { background-color: ${e.weekButtonBackgroundHover}; }`),e.weekButtonBorderColorHover&&o.push(`${t} .ts-chart-nav .ts-icon-btn:hover { border-color: ${e.weekButtonBorderColorHover}; }`),e.noActivityContentGap!==void 0&&o.push(`${t} .ts-no-posts { grid-gap: ${e.noActivityContentGap}px; }`),e.noActivityContentGap_tablet!==void 0&&n.push(`${t} .ts-no-posts { grid-gap: ${e.noActivityContentGap_tablet}px; }`),e.noActivityContentGap_mobile!==void 0&&c.push(`${t} .ts-no-posts { grid-gap: ${e.noActivityContentGap_mobile}px; }`),e.noActivityIconSize!==void 0&&(o.push(`${t} .ts-no-posts i { font-size: ${e.noActivityIconSize}px; }`),o.push(`${t} .ts-no-posts svg { width: ${e.noActivityIconSize}px; height: ${e.noActivityIconSize}px; }`)),e.noActivityIconSize_tablet!==void 0&&(n.push(`${t} .ts-no-posts i { font-size: ${e.noActivityIconSize_tablet}px; }`),n.push(`${t} .ts-no-posts svg { width: ${e.noActivityIconSize_tablet}px; height: ${e.noActivityIconSize_tablet}px; }`)),e.noActivityIconSize_mobile!==void 0&&(c.push(`${t} .ts-no-posts i { font-size: ${e.noActivityIconSize_mobile}px; }`),c.push(`${t} .ts-no-posts svg { width: ${e.noActivityIconSize_mobile}px; height: ${e.noActivityIconSize_mobile}px; }`)),e.noActivityIconColor&&(o.push(`${t} .ts-no-posts i { color: ${e.noActivityIconColor}; }`),o.push(`${t} .ts-no-posts svg { fill: ${e.noActivityIconColor}; }`));const r=$(e.noActivityTypography);r&&o.push(`${t} .ts-no-posts p { ${r} }`),e.noActivityTextColor&&o.push(`${t} .ts-no-posts p { color: ${e.noActivityTextColor}; }`);let s="";return o.length>0&&(s+=o.join(`
`)),n.length>0&&(s+=`
@media (max-width: 1024px) {
${n.join(`
`)}
}`),c.length>0&&(s+=`
@media (max-width: 767px) {
${c.join(`
`)}
}`),s}function me({attributes:e,setAttributes:l,clientId:o}){const n=e.blockId||o;A(()=>{e.blockId||l({blockId:o})},[e.blockId,o,l]),A(()=>{const g="voxel-bar-chart-css";if(!document.getElementById(g)){const m=document.createElement("link");m.id=g,m.rel="stylesheet";const B=(window.Voxel_Config?.site_url||window.location.origin).replace(/\/$/,"");m.href=`${B}/wp-content/themes/voxel/assets/dist/bar-chart.css?ver=1.7.5.2`,document.head.appendChild(m)}},[]);const c=ee(e,{blockId:n,baseClass:"ts-visits-chart voxel-fse-visit-chart",selectorPrefix:"voxel-fse-visit-chart"}),t=G(()=>oe(e,n),[e,n]),d=G(()=>[c.responsiveCSS,t].filter(Boolean).join(`
`),[c.responsiveCSS,t]),y=Y({id:c.elementId,className:c.className,style:c.styles,...c.customAttrs});return React.createElement(React.Fragment,null,React.createElement(ne,null,React.createElement(le,{tabs:[{id:"content",label:a("Content","voxel-fse"),icon:"",render:()=>React.createElement(se,{attributes:e,setAttributes:l})},{id:"style",label:a("Style","voxel-fse"),icon:"",render:()=>React.createElement(de,{attributes:e,setAttributes:l})}],includeAdvancedTab:!0,includeVoxelTab:!0,attributes:e,setAttributes:l})),React.createElement("div",{...y},d&&React.createElement("style",{dangerouslySetInnerHTML:{__html:d}}),React.createElement(pe,{attributes:e,context:"editor"})))}function ae(e){return function({attributes:o}){const n=o.blockId||"visit-chart",c=ee(o,{blockId:n,baseClass:"ts-visits-chart voxel-fse-visit-chart-frontend"}),t=oe(o,n),d=[c.responsiveCSS,t].filter(Boolean).join(`
`),y=Y.save({id:c.elementId,className:c.className,style:c.styles,"data-source":o.source,"data-visibility-behavior":o.visibilityBehavior||void 0,"data-visibility-rules":o.visibilityRules?.length?JSON.stringify(o.visibilityRules):void 0,"data-loop-source":o.loopSource||void 0,"data-loop-limit":o.loopLimit||void 0,"data-loop-offset":o.loopOffset||void 0,...c.customAttrs}),g={source:o.source,activeChart:o.activeChart,viewType:o.viewType,nonce:"",postId:null,charts:{"24h":{loaded:!1},"7d":{loaded:!1},"30d":{loaded:!1},"12m":{loaded:!1}}};return React.createElement("div",{...y},d&&React.createElement("style",{dangerouslySetInnerHTML:{__html:d}}),re(o,!1,void 0,void 0,c.uniqueSelector),React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(g)}}),e&&React.createElement("div",{className:"voxel-fse-block-placeholder",style:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f5f5f5",padding:"40px 20px",minHeight:"300px",borderRadius:"8px"}},React.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",color:"#666"}},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"48",height:"48",fill:"currentColor",style:{opacity:.4}},React.createElement("rect",{x:"4",y:"12",width:"4",height:"8",rx:"0.5"}),React.createElement("rect",{x:"10",y:"8",width:"4",height:"12",rx:"0.5"}),React.createElement("rect",{x:"16",y:"4",width:"4",height:"16",rx:"0.5"})),React.createElement("span",{style:{fontSize:"14px",fontWeight:500}},"Visit Chart (VX)"))))}}const ue=ae(!1),he=ae(!0),fe="https://schemas.wp.org/trunk/block.json",be=3,ge="voxel-fse/visit-chart",xe="1.0.0",ye="Visit Chart (VX)",Be="voxel-fse",Ce="Displays a bar chart of Views and Unique Views for Current User, Current Post, or Sitewide stats.",$e=["chart","visits","stats","analytics","voxel","bar chart"],Re="voxel-fse",we={html:!1,align:["wide","full"],anchor:!0,className:!0,customClassName:!0},ke="file:./index.js",Ee="file:./frontend.js",Se="file:./render.php",Te={blockId:{type:"string",default:""},source:{type:"string",default:"post",enum:["post","user","site"]},activeChart:{type:"string",default:"7d",enum:["24h","7d","30d","12m"]},viewType:{type:"string",default:"views",enum:["views","unique_views"]},chartIcon:{type:"object",default:{}},chevronRight:{type:"object",default:{}},chevronLeft:{type:"object",default:{}},contentTabOpenPanel:{type:"string",default:"chart"},styleTabOpenPanel:{type:"string",default:"chart"},chartHeight:{type:"number"},chartHeight_tablet:{type:"number"},chartHeight_mobile:{type:"number"},axisTypography:{type:"object",default:{}},axisTextColor:{type:"string",default:""},verticalAxisWidth:{type:"number"},verticalAxisWidth_tablet:{type:"number"},verticalAxisWidth_mobile:{type:"number"},chartLineBorderType:{type:"string",default:"default"},barGap:{type:"number"},barGap_tablet:{type:"number"},barGap_mobile:{type:"number"},barWidth:{type:"number"},barWidth_tablet:{type:"number"},barWidth_mobile:{type:"number"},barRadius:{type:"number"},barRadius_tablet:{type:"number"},barRadius_mobile:{type:"number"},barBackground:{type:"object",default:{}},barBackgroundHover:{type:"string",default:""},barBoxShadow:{type:"object",default:{}},barPopupBackground:{type:"string",default:""},barPopupBorderType:{type:"string",default:""},barPopupBorderWidth:{type:"object",default:{}},barPopupBorderColor:{type:"string",default:""},barPopupRadius:{type:"number"},barPopupRadius_tablet:{type:"number"},barPopupRadius_mobile:{type:"number"},barPopupBoxShadow:{type:"object",default:{}},barPopupValueTypography:{type:"object",default:{}},barPopupValueColor:{type:"string",default:""},barPopupLabelTypography:{type:"object",default:{}},barPopupLabelColor:{type:"string",default:""},tabsState:{type:"string",default:"normal"},tabsJustify:{type:"string",default:"left"},tabsPadding:{type:"object",default:{}},tabsMargin:{type:"object",default:{}},tabsTypography:{type:"object",default:{}},tabsActiveTypography:{type:"object",default:{}},tabsTextColor:{type:"string",default:""},tabsActiveTextColor:{type:"string",default:""},tabsBackground:{type:"string",default:""},tabsActiveBackground:{type:"string",default:""},tabsBorderType:{type:"string",default:"default"},tabsActiveBorderColor:{type:"string",default:""},tabsBorderRadius:{type:"number"},tabsBorderRadius_tablet:{type:"number"},tabsBorderRadius_mobile:{type:"number"},tabsTextColorHover:{type:"string",default:""},tabsActiveTextColorHover:{type:"string",default:""},tabsBorderColorHover:{type:"string",default:""},tabsActiveBorderColorHover:{type:"string",default:""},tabsBackgroundHover:{type:"string",default:""},tabsActiveBackgroundHover:{type:"string",default:""},weekButtonsState:{type:"string",default:"normal"},weekRangeTypography:{type:"object",default:{}},weekRangeTextColor:{type:"string",default:""},weekButtonIconColor:{type:"string",default:""},weekButtonIconSize:{type:"number"},weekButtonIconSize_tablet:{type:"number"},weekButtonIconSize_mobile:{type:"number"},weekButtonBackground:{type:"string",default:""},weekButtonBorderType:{type:"string",default:""},weekButtonBorderWidth:{type:"object",default:{}},weekButtonBorderColor:{type:"string",default:""},weekButtonBorderRadius:{type:"number"},weekButtonBorderRadius_tablet:{type:"number"},weekButtonBorderRadius_mobile:{type:"number"},weekButtonSize:{type:"number"},weekButtonSize_tablet:{type:"number"},weekButtonSize_mobile:{type:"number"},weekButtonIconColorHover:{type:"string",default:""},weekButtonBackgroundHover:{type:"string",default:""},weekButtonBorderColorHover:{type:"string",default:""},noActivityContentGap:{type:"number"},noActivityContentGap_tablet:{type:"number"},noActivityContentGap_mobile:{type:"number"},noActivityIconSize:{type:"number"},noActivityIconSize_tablet:{type:"number"},noActivityIconSize_mobile:{type:"number"},noActivityIconColor:{type:"string",default:""},noActivityTypography:{type:"object",default:{}},noActivityTextColor:{type:"string",default:""},_comment_voxel_tab:"VoxelTab attributes for visibility and loop features",visibilityBehavior:{type:"string",default:"show",enum:["show","hide"]},visibilityRules:{type:"array",default:[],items:{type:"object"}},loopEnabled:{type:"boolean",default:!1},loopSource:{type:"string",default:""},loopProperty:{type:"string",default:""},loopLimit:{type:"string",default:""},loopOffset:{type:"string",default:""}},V={$schema:fe,apiVersion:be,name:ge,version:xe,title:ye,category:Be,description:Ce,keywords:$e,textdomain:Re,supports:we,editorScript:ke,viewScript:Ee,render:Se,attributes:Te},_e=[{attributes:V.attributes,save:he}];te(V.name,{...V,icon:ie,title:a("Visit Chart (VX)","voxel-fse"),description:a("Displays a bar chart of Views and Unique Views for stats.","voxel-fse"),edit:me,save:ue,deprecated:_e});
