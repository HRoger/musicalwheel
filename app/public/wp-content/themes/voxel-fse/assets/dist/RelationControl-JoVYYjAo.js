import{useState as b,useCallback as o,useEffect as y}from"react";import{__ as n}from"@wordpress/i18n";import{Button as R}from"@wordpress/components";import{useDispatch as N}from"@wordpress/data";import"./RepeaterControl-BJok1GGr.js";function A({label:s,items:r,selectedId:c,onSelect:i,widgetType:d,description:m}){const[u,h]=b("idle"),[I,p]=b(null),{selectBlock:f}=N("core/block-editor"),v=o(e=>{i(c===e?null:e),h("applied"),setTimeout(()=>{h("idle")},1500)},[c,i]),k=o((e,t)=>{e.stopPropagation();const a=document.querySelector(`[data-block="${t.clientId}"]`);a&&(a.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),f(t.clientId))},[f]),E=o(e=>{p(e.clientId);const t=document.querySelector(`[data-block="${e.clientId}"]`);t&&t.classList.add("voxel-highlight-element")},[]),g=o(e=>{p(null);const t=document.querySelector(`[data-block="${e.clientId}"]`);t&&t.classList.remove("voxel-highlight-element")},[]);y(()=>()=>{document.querySelectorAll(".voxel-highlight-element").forEach(e=>{e.classList.remove("voxel-highlight-element")})},[]);const x=e=>e.length>7?e.substring(0,7):e;return React.createElement("div",{className:"vxfse-relation-control"},s&&React.createElement("label",{className:"vxfse-relation-label"},s),React.createElement("div",{className:"vx-relation-list"},r.length===0?React.createElement("div",{className:"relation-item relation-item--empty"},n("No","voxel-fse")," <",d,"> ",n("widgets found.","voxel-fse")):r.map(e=>{const t=c===e.id,a=e.label||x(e.id);return React.createElement("div",{key:e.id,className:`relation-item ${t?"selected":""}`,onClick:()=>v(e.id),onMouseEnter:()=>E(e),onMouseLeave:()=>g(e),role:"button",tabIndex:0,onKeyDown:l=>{(l.key==="Enter"||l.key===" ")&&v(e.id)}},React.createElement("span",{className:"relation-item__label"},"<",d," ",React.createElement("code",null,"#",a),">"),React.createElement("span",{className:"eicon eicon-check check-icon","aria-hidden":"true"}),React.createElement("span",{className:"eicon eicon-eye view-icon","aria-hidden":"true",onClick:l=>k(l,e),onKeyDown:l=>{(l.key==="Enter"||l.key===" ")&&k(l,e)},role:"button",tabIndex:0,title:n("Scroll to widget","voxel-fse")}))})),React.createElement(R,{variant:"primary",className:"vxfse-relation-apply-btn",disabled:u==="applied"},u==="applied"?n("Applied","voxel-fse"):n("Apply changes","voxel-fse")),m&&React.createElement("p",{className:"vxfse-relation-description"},m))}export{A as R};
