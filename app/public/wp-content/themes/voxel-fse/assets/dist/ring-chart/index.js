import{registerBlockType as N}from"@wordpress/blocks";import l,{useEffect as x,useMemo as S}from"react";import{useBlockProps as E,InspectorControls as H}from"@wordpress/block-editor";import{__ as i}from"@wordpress/i18n";import{I}from"../InspectorTabs-DmdaThza.js";import{SelectControl as b,RangeControl as f}from"@wordpress/components";import{A as z,a as m,e as B,R as P,C as v,T as F}from"../TypographyPopup-BXz72zyZ.js";import"../voxelShim-DB_Ue-9R.js";import{g as $}from"../useAdvancedTabProps-BnJDQbKr.js";import{r as U}from"../backgroundElements-Ui-iCrLV.js";import{V as j}from"../VoxelGridIcon-D5dF5acW.js";import"@wordpress/data";import"@wordpress/api-fetch";/* empty css                            */import"../generateAdvancedStyles-CRpLcHXt.js";import"../generateVoxelStyles-oZeaeuKH.js";function D({attributes:e,isEditor:o=!1}){const c=(()=>{const n=100/(Math.PI*2),d=n+e.ts_chart_stroke_width/2,u=d*2;return{radius:n,cxcy:d,viewBox:`0 0 ${u} ${u}`}})(),{radius:t,cxcy:a,viewBox:_}=c,p=()=>{const n={};return e.ts_chart_animation_duration&&(n.animationDuration=`${e.ts_chart_animation_duration}s`),n},s=()=>{const n={};return e.chart_value_typography_font_family&&(n.fontFamily=e.chart_value_typography_font_family),e.chart_value_typography_font_size&&(n.fontSize=e.chart_value_typography_font_size),e.chart_value_typography_font_weight&&(n.fontWeight=e.chart_value_typography_font_weight),e.chart_value_typography_line_height&&(n.lineHeight=e.chart_value_typography_line_height),e.chart_value_typography_letter_spacing&&(n.letterSpacing=e.chart_value_typography_letter_spacing),e.chart_value_typography_text_transform&&(n.textTransform=e.chart_value_typography_text_transform),e.chart_value_typography_text_decoration&&(n.textDecoration=e.chart_value_typography_text_decoration),e.ts_chart_value_color&&(n.color=e.ts_chart_value_color),n},h={justifyContent:e.ts_chart_position},y=p(),g=s(),R=o?null:l.createElement("script",{type:"application/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(e,null,2)}});return l.createElement(l.Fragment,null,R,l.createElement("div",{className:"circle-chart-position"},l.createElement("div",{className:"circle-chart-wrapper flexify",style:h},l.createElement("div",{className:"circle-chart"},l.createElement("svg",{className:"circle-chart",viewBox:_,width:e.ts_chart_size,height:e.ts_chart_size,xmlns:"http://www.w3.org/2000/svg"},l.createElement("circle",{className:"circle-chart__background",stroke:e.ts_chart_cirle_color,strokeWidth:e.ts_chart_stroke_width,fill:"none",cx:a,cy:a,r:t}),l.createElement("circle",{className:"circle-chart__circle",stroke:e.ts_chart_fill_color,strokeWidth:e.ts_chart_stroke_width,strokeDasharray:`${e.ts_chart_value},100`,strokeLinecap:"round",fill:"none",cx:a,cy:a,r:t,style:y})),l.createElement("p",{className:"chart-value",style:g},e.ts_chart_value,e.ts_chart_value_suffix)))))}function M({attributes:e,setAttributes:o}){return React.createElement(z,{attributes:e,setAttributes:o,defaultPanel:"content"},React.createElement(m,{id:"content",title:i("Content","voxel-fse")},React.createElement(b,{label:i("Justify","voxel-fse"),value:e.ts_chart_position,options:[{label:i("Left","voxel-fse"),value:"flex-start"},{label:i("Center","voxel-fse"),value:"center"},{label:i("Right","voxel-fse"),value:"flex-end"}],onChange:r=>o({ts_chart_position:r})}),React.createElement(f,{label:i("Value","voxel-fse"),value:e.ts_chart_value,onChange:r=>o({ts_chart_value:r??0}),min:0,max:100,step:.01,__nextHasNoMarginBottom:!0}),React.createElement(B,{label:i("Suffix","voxel-fse"),value:e.ts_chart_value_suffix,onChange:r=>o({ts_chart_value_suffix:r}),help:i('Text to display after the value (e.g., "%", " items")',"voxel-fse")}),React.createElement(f,{label:i("Circle size","voxel-fse"),value:e.ts_chart_size,onChange:r=>o({ts_chart_size:r??100}),min:0,max:300,step:1,__nextHasNoMarginBottom:!0}),React.createElement(f,{label:i("Stroke width","voxel-fse"),value:e.ts_chart_stroke_width,onChange:r=>o({ts_chart_stroke_width:r??2}),min:0,max:100,step:1,__nextHasNoMarginBottom:!0}),React.createElement(P,{label:i("Animation duration","voxel-fse"),attributes:e,setAttributes:o,attributeBaseName:"ts_chart_animation_duration",min:0,max:10,step:.1,enableDynamicTags:!0})))}function V({attributes:e,setAttributes:o}){const r={fontFamily:e.chart_value_typography_font_family,fontWeight:e.chart_value_typography_font_weight,textTransform:e.chart_value_typography_text_transform,textDecoration:e.chart_value_typography_text_decoration,fontSize:parseFloat(e.chart_value_typography_font_size||"0")||void 0,fontSizeUnit:(e.chart_value_typography_font_size||"").replace(/[0-9.]/g,"")||"px",fontSize_tablet:parseFloat(e.chart_value_typography_font_size_tablet||"0")||void 0,fontSize_mobile:parseFloat(e.chart_value_typography_font_size_mobile||"0")||void 0,lineHeight:parseFloat(e.chart_value_typography_line_height||"0")||void 0,lineHeightUnit:(e.chart_value_typography_line_height||"").replace(/[0-9.]/g,"")||"px",letterSpacing:parseFloat(e.chart_value_typography_letter_spacing||"0")||void 0,letterSpacingUnit:(e.chart_value_typography_letter_spacing||"").replace(/[0-9.]/g,"")||"px",letterSpacing_tablet:parseFloat(e.chart_value_typography_letter_spacing_tablet||"0")||void 0,letterSpacing_mobile:parseFloat(e.chart_value_typography_letter_spacing_mobile||"0")||void 0},c=t=>{const a={};t.fontFamily!==void 0&&(a.chart_value_typography_font_family=t.fontFamily),t.fontWeight!==void 0&&(a.chart_value_typography_font_weight=t.fontWeight),t.textTransform!==void 0&&(a.chart_value_typography_text_transform=t.textTransform),t.textDecoration!==void 0&&(a.chart_value_typography_text_decoration=t.textDecoration),t.fontSize!==void 0?a.chart_value_typography_font_size=`${t.fontSize}${t.fontSizeUnit||"px"}`:t.fontSize===void 0&&(a.chart_value_typography_font_size=""),t.fontSize_tablet!==void 0&&(a.chart_value_typography_font_size_tablet=`${t.fontSize_tablet}${t.fontSizeUnit||"px"}`),t.fontSize_mobile!==void 0&&(a.chart_value_typography_font_size_mobile=`${t.fontSize_mobile}${t.fontSizeUnit||"px"}`),t.lineHeight!==void 0&&(a.chart_value_typography_line_height=`${t.lineHeight}${t.lineHeightUnit||""}`),t.lineHeight_tablet!==void 0&&(a.chart_value_typography_line_height_tablet=`${t.lineHeight_tablet}${t.lineHeightUnit||""}`),t.lineHeight_mobile!==void 0&&(a.chart_value_typography_line_height_mobile=`${t.lineHeight_mobile}${t.lineHeightUnit||""}`),t.letterSpacing!==void 0&&(a.chart_value_typography_letter_spacing=`${t.letterSpacing}${t.letterSpacingUnit||"px"}`),t.letterSpacing_tablet!==void 0&&(a.chart_value_typography_letter_spacing_tablet=`${t.letterSpacing_tablet}${t.letterSpacingUnit||"px"}`),t.letterSpacing_mobile!==void 0&&(a.chart_value_typography_letter_spacing_mobile=`${t.letterSpacing_mobile}${t.letterSpacingUnit||"px"}`),o(a)};return React.createElement(z,{attributes:e,setAttributes:o,defaultPanel:"circle"},React.createElement(m,{id:"circle",title:i("Circle","voxel-fse")},React.createElement(v,{label:i("Circle Color","voxel-fse"),value:e.ts_chart_cirle_color,onChange:t=>o({ts_chart_cirle_color:t||""})}),React.createElement(v,{label:i("Circle Fill Color","voxel-fse"),value:e.ts_chart_fill_color,onChange:t=>o({ts_chart_fill_color:t||""})})),React.createElement(m,{id:"value",title:i("Value","voxel-fse")},React.createElement(F,{label:i("Typography","voxel-fse"),value:r,onChange:c}),React.createElement(v,{label:i("Color","voxel-fse"),value:e.ts_chart_value_color,onChange:t=>o({ts_chart_value_color:t||""})})))}function k(e,o){const r=[],c=[],t=[],a=`.voxel-fse-ring-chart-${o}`;e.ts_chart_animation_duration_tablet!==void 0&&c.push(`${a} .circle-chart__circle { animation-duration: ${e.ts_chart_animation_duration_tablet}s; }`),e.ts_chart_animation_duration_mobile!==void 0&&t.push(`${a} .circle-chart__circle { animation-duration: ${e.ts_chart_animation_duration_mobile}s; }`),e.chart_value_typography_font_size_tablet&&c.push(`${a} .circle-chart .chart-value { font-size: ${e.chart_value_typography_font_size_tablet}; }`),e.chart_value_typography_font_size_mobile&&t.push(`${a} .circle-chart .chart-value { font-size: ${e.chart_value_typography_font_size_mobile}; }`),e.chart_value_typography_line_height_tablet&&c.push(`${a} .circle-chart .chart-value { line-height: ${e.chart_value_typography_line_height_tablet}; }`),e.chart_value_typography_line_height_mobile&&t.push(`${a} .circle-chart .chart-value { line-height: ${e.chart_value_typography_line_height_mobile}; }`),e.chart_value_typography_letter_spacing_tablet&&c.push(`${a} .circle-chart .chart-value { letter-spacing: ${e.chart_value_typography_letter_spacing_tablet}; }`),e.chart_value_typography_letter_spacing_mobile&&t.push(`${a} .circle-chart .chart-value { letter-spacing: ${e.chart_value_typography_letter_spacing_mobile}; }`);let _="";return r.length>0&&(_+=r.join(`
`)),c.length>0&&(_+=`
@media (max-width: 1024px) {
${c.join(`
`)}
}`),t.length>0&&(_+=`
@media (max-width: 767px) {
${t.join(`
`)}
}`),_}function L({attributes:e,setAttributes:o,clientId:r}){const c=e.blockId||r;x(()=>{e.blockId||o({blockId:r})},[e.blockId,r,o]),x(()=>{const s="voxel-ring-chart-css";if(!document.getElementById(s)){const h=document.createElement("link");h.id=s,h.rel="stylesheet";const g=(window.Voxel_Config?.site_url||window.location.origin).replace(/\/$/,"");h.href=`${g}/wp-content/themes/voxel/assets/dist/ring-chart.css?ver=1.7.5.2`,document.head.appendChild(h)}},[]);const t=$(e,{blockId:c,baseClass:"voxel-fse-ring-chart",selectorPrefix:"voxel-fse-ring-chart"}),a=S(()=>k(e,c),[e,c]),_=S(()=>[t.responsiveCSS,a].filter(Boolean).join(`
`),[t.responsiveCSS,a]),p=E({id:t.elementId,className:t.className,style:t.styles,...t.customAttrs});return l.createElement(l.Fragment,null,l.createElement(H,null,l.createElement(I,{tabs:[{id:"content",label:i("Content","voxel-fse"),render:()=>l.createElement(M,{attributes:e,setAttributes:o})},{id:"style",label:i("Style","voxel-fse"),render:()=>l.createElement(V,{attributes:e,setAttributes:o})}],includeAdvancedTab:!0,includeVoxelTab:!0,attributes:e,setAttributes:o,activeTabAttribute:"activeTab"})),l.createElement("div",{...p},_&&l.createElement("style",{dangerouslySetInnerHTML:{__html:_}}),l.createElement(D,{attributes:e,isEditor:!0})))}function W({attributes:e}){const o=e.blockId||"ring-chart",r=$(e,{blockId:o,baseClass:"voxel-fse-ring-chart"}),c=k(e,o),t=[r.responsiveCSS,c].filter(Boolean).join(`
`),a=E.save({id:r.elementId,className:r.className,style:r.styles,"data-visibility-behavior":e.visibilityBehavior||void 0,"data-visibility-rules":e.visibilityRules?.length?JSON.stringify(e.visibilityRules):void 0,"data-loop-source":e.loopSource||void 0,"data-loop-limit":e.loopLimit||void 0,"data-loop-offset":e.loopOffset||void 0,...r.customAttrs});return l.createElement("div",{...a},t&&l.createElement("style",{dangerouslySetInnerHTML:{__html:t}}),U(e,!1,void 0,void 0,r.uniqueSelector),l.createElement("script",{type:"application/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(e,null,2)}}),l.createElement("div",{className:"circle-chart-position"},l.createElement("div",{className:"circle-chart-wrapper flexify"},l.createElement("div",{className:"circle-chart"},l.createElement("svg",{className:"circle-chart",width:e.ts_chart_size,height:e.ts_chart_size},l.createElement("circle",{className:"circle-chart__background"}),l.createElement("circle",{className:"circle-chart__circle"})),l.createElement("p",{className:"chart-value"},e.ts_chart_value,e.ts_chart_value_suffix)))))}const O="https://schemas.wp.org/trunk/block.json",G=3,J="voxel-fse/ring-chart",w="1.0.0",q="Ring Chart (VX)",X="voxel-fse",K="Display an animated ring chart with customizable value, colors, and size",Q=["chart","ring","progress","circle","statistics"],Y="voxel-fse",Z={html:!1,anchor:!0,align:["wide","full"]},A={blockId:{type:"string"},activeTab:{type:"string",default:"content"},ts_chart_position:{type:"string",default:"flex-start"},ts_chart_value:{type:"number",default:0},ts_chart_value_suffix:{type:"string",default:""},ts_chart_size:{type:"number",default:100},ts_chart_stroke_width:{type:"number",default:2},ts_chart_animation_duration:{type:"number",default:3},ts_chart_animation_duration_tablet:{type:"number",default:3},ts_chart_animation_duration_mobile:{type:"number",default:3},ts_chart_cirle_color:{type:"string",default:"#efefef"},ts_chart_fill_color:{type:"string",default:"#00acc1"},ts_chart_value_color:{type:"string",default:""},chart_value_typography_font_family:{type:"string",default:""},chart_value_typography_font_size:{type:"string",default:""},chart_value_typography_font_size_tablet:{type:"string",default:""},chart_value_typography_font_size_mobile:{type:"string",default:""},chart_value_typography_font_weight:{type:"string",default:""},chart_value_typography_line_height:{type:"string",default:""},chart_value_typography_line_height_tablet:{type:"string",default:""},chart_value_typography_line_height_mobile:{type:"string",default:""},chart_value_typography_letter_spacing:{type:"string",default:""},chart_value_typography_letter_spacing_tablet:{type:"string",default:""},chart_value_typography_letter_spacing_mobile:{type:"string",default:""},chart_value_typography_text_transform:{type:"string",default:""},chart_value_typography_text_decoration:{type:"string",default:""},_comment_voxel_tab:"VoxelTab attributes for visibility and loop features",visibilityBehavior:{type:"string",default:"show",enum:["show","hide"]},visibilityRules:{type:"array",default:[],items:{type:"object"}},loopEnabled:{type:"boolean",default:!1},loopSource:{type:"string",default:""},loopProperty:{type:"string",default:""},loopLimit:{type:"string",default:""},loopOffset:{type:"string",default:""}},T="file:./index.tsx",ee="file:./frontend.js",te="file:./render.php",ae={$schema:O,apiVersion:G,name:J,version:w,title:q,category:X,description:K,keywords:Q,textdomain:Y,supports:Z,attributes:A,editorScript:T,viewScript:ee,render:te},C=ae;N(C.name,{...C,icon:j,edit:L,save:W});
