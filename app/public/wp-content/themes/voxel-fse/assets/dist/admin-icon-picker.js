import{createRoot as Wt}from"react-dom/client";import l,{createContext as Ct,useState as j,useEffect as Me,useRef as ot,useCallback as ke}from"react";import{__ as r}from"@wordpress/i18n";import{useSelect as zt}from"@wordpress/data";import{Button as Qe}from"@wordpress/components";import $e from"@wordpress/api-fetch";import"@wordpress/block-editor";/* empty css                           */import"react-dom";let pt=!1;function Gt(){if(pt)return;const t=window.wp?.hooks,o=window.wp?.compose;if(!t||!o){console.warn("VoxelFSE: wp.hooks or wp.compose not available");return}const{addFilter:e}=t,{createHigherOrderComponent:m}=o,I=m(d=>D=>{const{name:S,attributes:y}=D;if(!S.startsWith("voxel-fse/"))return React.createElement(d,{...D});const B={...D.wrapperProps},M={...B.style||{}};return y.stickyEnabled&&(y.stickyDesktop??"sticky")==="sticky"&&(M.position="sticky",M.zIndex="10",M.alignSelf="flex-start",y.stickyTop!==void 0&&(M.top=`${y.stickyTop}${y.stickyTopUnit||"px"}`),y.stickyLeft!==void 0&&(M.left=`${y.stickyLeft}${y.stickyLeftUnit||"px"}`),y.stickyRight!==void 0&&(M.right=`${y.stickyRight}${y.stickyRightUnit||"px"}`),y.stickyBottom!==void 0&&(M.bottom=`${y.stickyBottom}${y.stickyBottomUnit||"px"}`)),S==="voxel-fse/flex-container"&&y.contentWidthType==="full"&&(B["data-content-width"]="full"),Object.keys(M).length>0&&(B.style=M),B["data-content-width"]||Object.keys(M).length>0?React.createElement(d,{...D,wrapperProps:B}):React.createElement(d,{...D})},"withVoxelWrapperProps");e("editor.BlockListBlock","voxel-fse/editor-wrapper-props",I),pt=!0}Gt();Ct(null);typeof window<"u"&&(window.__voxelOpenPopups=window.__voxelOpenPopups||{});const Dt=({group:t,tag:o,level:e,searchQuery:m,onSelectTag:I,onLoadChildren:d,parentPath:D="",expandedPath:S,onExpandChange:y})=>{const[B,M]=j(!1),[U,N]=j(o.children||[]),[O,F]=j(""),T=o.hasChildren||o.children&&o.children.length>0,V=o.hasChildren&&!o.isLoaded&&U.length===0,z=D?`${D}.${o.key}`:o.key,Z=S===z;if(!(m===""||o.label.toLowerCase().includes(m.toLowerCase())||o.key.toLowerCase().includes(m.toLowerCase()))&&!T)return null;const ne=async()=>{if(T)if(!Z){if(y(z),V&&d){M(!0);try{const R=await d(t,`${t}.${z}`);N(R)}catch(R){console.error(`Failed to load children for ${o.key}:`,R)}finally{M(!1)}}}else y("");else I(t,z,o.type)},X=[];T&&(X.push("is-group"),Z&&X.push("is-open"));const te=X.join(" "),C=o.type==="method";return l.createElement("li",{className:te},l.createElement("span",{draggable:!T,onClick:ne},C&&l.createElement("i",{className:"las la-code"}),o.label),T&&Z&&l.createElement("ul",{style:{height:"auto"}},B?l.createElement("li",{className:"mw-tag-item__loading"},"Loading..."):U.map(_=>l.createElement(Dt,{key:_.key,group:t,tag:_,level:e+1,searchQuery:m,onSelectTag:I,onLoadChildren:d,parentPath:z,expandedPath:O,onExpandChange:F}))))},qt=({group:t,searchQuery:o,onSelectTag:e,onLoadChildren:m,expandedPath:I,onExpandChange:d})=>{const[D,S]=j(!1),[y,B]=j(t.exports||[]),[M,U]=j(""),N=I===t.type;Me(()=>{N&&t.hasChildren&&y.length===0&&m&&!D&&(async()=>{S(!0);try{const V=await m(t.type);B(V)}catch(V){console.error(`Failed to auto-load children for ${t.type}:`,V)}finally{S(!1)}})()},[N]);const O=async()=>{if(!N){if(d(t.type),t.hasChildren&&y.length===0&&m){S(!0);try{const z=await m(t.type);B(z)}catch(z){console.error(`Failed to load children for ${t.type}:`,z)}finally{S(!1)}}}else d("")},F=["is-group"];N&&F.push("is-open");const T=F.join(" ");return l.createElement("li",{className:T},l.createElement("span",{onClick:O},t.label),N&&l.createElement("ul",{style:{height:"auto"}},D?l.createElement("li",{className:"mw-tag-group__loading"},"Loading..."):y.map(V=>l.createElement(Dt,{key:V.key,group:t.type,tag:V,level:0,searchQuery:o,onSelectTag:e,onLoadChildren:m,expandedPath:M,onExpandChange:U}))))},Zt=({groups:t,searchQuery:o,onSelectTag:e,onLoadChildren:m})=>{const[I,d]=j(t&&t.length>0?t[0].type:""),D=t?.map(S=>S.type).join(",")??"";return Me(()=>{t&&t.length>0&&d(t[0].type)},[D]),!t||t.length===0?l.createElement("div",{className:"mw-tag-tree mw-tag-tree--empty"},l.createElement("p",null,"No data groups available.")):l.createElement("div",{className:"nvx-tagslist mw-tag-tree"},l.createElement("ul",null,t.map(S=>l.createElement(qt,{key:S.type,group:S,searchQuery:o,onSelectTag:e,onLoadChildren:m,expandedPath:I,onExpandChange:d}))))},Jt=({value:t,onChange:o})=>l.createElement("div",{className:"ts-form-group"},l.createElement("input",{type:"text",value:t,onChange:e=>o(e.target.value),placeholder:"Search tags",autoComplete:"off"})),Kt=({value:t,onChange:o,onTokenFocus:e,onInsertTag:m,context:I="post"})=>{const d=ot(null),D=ot(null),[S,y]=j(!1),[B,M]=j({top:0,left:0}),[U,N]=j(0),[O,F]=j([]),[T,V]=j(0),[z,Z]=j("tag"),[q,ne]=j(null),[X,te]=j(null),[C,_]=j(!1),R=ke(b=>{if(!d.current)return;const w=d.current.selectionStart,u=t.substring(0,w),v=t.substring(w),s=u+b+v;o(s),setTimeout(()=>{if(d.current){const g=w+b.length;d.current.selectionStart=g,d.current.selectionEnd=g,d.current.focus()}},0)},[t,o]);Me(()=>{m&&m(R)},[m,R]),Me(()=>{S&&d.current&&setTimeout(()=>{if(d.current){const b=ve(d.current,U);M(b)}},0)},[S,t,U]);const Y=async()=>{if(q)return q;const b=window.VoxelFSE_Dynamic_Data_Store;if(b&&b.flatTags&&Array.isArray(b.flatTags)){const w=b.flatTags.map(u=>({group:u.group,key:u.key,label:u.label,fullPath:u.fullPath||`@${u.group}(${u.key})`,breadcrumb:u.breadcrumb||u.group}));return ne(w),w}if(C)return new Promise(w=>{const u=setInterval(()=>{q&&(clearInterval(u),w(q))},100)});_(!0);try{const w=await $e({path:`/voxel-fse/v1/dynamic-data/tags-flat?context=${I}`}),u=Array.isArray(w)?w.map(v=>({group:v.group,key:v.key,label:v.label,fullPath:v.fullPath||`@${v.group}(${v.key})`,breadcrumb:v.breadcrumb||v.group})):[];return ne(u),_(!1),u}catch(w){return console.error("[CodeEditor] Failed to fetch tags:",w),_(!1),ne([]),[]}},oe=async()=>{if(X)return X;const b=window.VoxelFSE_Dynamic_Data_Store;if(b&&b.modifiers&&Array.isArray(b.modifiers))return te(b.modifiers),b.modifiers;try{const w=await $e({path:"/voxel-fse/v1/dynamic-data/modifiers"});return te(w),w}catch(w){return console.error("Failed to fetch modifiers for autocomplete:",w),[]}},ve=(b,w)=>{const u=b.closest(".dtags-content");if(!u)return console.log("[getCursorCoordinates] No container found"),{top:0,left:0};const v=u.getBoundingClientRect(),s=document.createElement("div"),g=window.getComputedStyle(b);["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent","textAlign","lineHeight","whiteSpace","wordWrap","wordBreak","overflowWrap","padding","border","boxSizing","tabSize"].forEach(ce=>{s.style[ce]=g[ce]}),s.style.position="absolute",s.style.visibility="hidden",s.style.width=`${b.clientWidth}px`,s.style.height="auto",s.style.top="0",s.style.left="0",s.style.overflow="hidden",s.style.pointerEvents="none";const f=b.value.substring(0,w),h=document.createTextNode(f);s.appendChild(h);const P=document.createElement("span");P.textContent="|",P.style.position="relative",s.appendChild(P),u.appendChild(s);const $=P.getBoundingClientRect();u.removeChild(s);const K=$.top-v.top+$.height+4,ae=$.left-v.left;return console.log("[getCursorCoordinates] Details:",{position:w,textBeforeCursor:f.substring(Math.max(0,f.length-20)),containerRect:{top:v.top,left:v.left},markerRect:{top:$.top,left:$.left,height:$.height},calculated:{top:K,left:ae},textareaScroll:{top:b.scrollTop,left:b.scrollLeft}}),{top:K,left:ae}},se=b=>{const{key:w}=b;if(S){if(w==="ArrowDown"){b.preventDefault(),V(u=>Math.min(u+1,O.length-1));return}if(w==="ArrowUp"){b.preventDefault(),V(u=>Math.max(u-1,0));return}if(w==="Enter"||w==="Tab"){b.preventDefault(),O[T]&&xe(O[T]);return}if(w==="Escape"){b.preventDefault(),y(!1);return}}},ye=async b=>{if(o(b),!d.current)return;const w=d.current.selectionStart,u=b.substring(0,w);if(u.match(/@(\w*)$/)){console.log("[CodeEditor] @ detected in onChange, triggering autocomplete"),await Se(b);return}if(u.endsWith(".")&&u.charAt(w-2)===")"&&u.match(/@\w+\(/)){console.log("[CodeEditor] . after ) detected, triggering modifier autocomplete"),await Ie(b);return}S&&_e(b,w)},Se=async b=>{const w=b!==void 0?b:t;if(console.log("[CodeEditor] showTagAutocomplete() called"),!d.current){console.log("[CodeEditor] No textarea ref, aborting");return}const u=d.current.selectionStart,s=w.substring(0,u).match(/@(\w*)$/);if(!s){console.log("[CodeEditor] No @ match found, aborting");return}const g=s[1]||"";console.log("[CodeEditor] @ match found, query:",g);const f=await Y();console.log("[CodeEditor] Total tags available:",f.length);const h=g?f.filter(P=>P.label.toLowerCase().includes(g.toLowerCase())||P.group.toLowerCase().includes(g.toLowerCase())||P.breadcrumb?.toLowerCase().includes(g.toLowerCase())):f;console.log("[CodeEditor] Filtered tags:",h.length),F(h),V(0),Z("tag"),y(h.length>0),console.log("[CodeEditor] showAutocomplete set to:",h.length>0),N(u)},Ie=async b=>{const w=b!==void 0?b:t;if(!d.current)return;const u=d.current.selectionStart,v=w.substring(0,u),s=v.lastIndexOf("@");if(s===-1)return;const g=v.substring(s),f=g.match(/\)\.(\w*)$/);if(!f)return;const h=f[1]||"",P=await oe();if(!P||P.length===0){console.log("[CodeEditor] No modifiers available");return}const $=g.match(/@(\w+)\(/),K=$?$[1]:null;console.log("[CodeEditor] Current group for modifiers:",K);const ae=Q=>Q?{post:[{key:"meta",label:"Post meta",category:"other",args:[{type:"text",label:"Meta key"}]}],author:[{key:"meta",label:"User meta",category:"other",args:[{type:"text",label:"Meta key"}]}],user:[{key:"meta",label:"User meta",category:"other",args:[{type:"text",label:"Meta key"}]}],site:[{key:"query_var",label:"Query variable",category:"other",args:[{type:"text",label:"Variable name"}]},{key:"math",label:"Math expression",category:"other",args:[{type:"text",label:"Math expression"}]}]}[Q]||[]:[],J=[...P,...ae(K)].map(Q=>{const fe=Q.args?.map(Re=>Re.label).join(", ")||"",Pe=`.${Q.key}(${fe})`;return{key:Q.key,label:Q.label,category:Q.category||"other",code:`.${Q.key}()`,fullSignature:Pe,description:Q.description}}),be=h?J.filter(Q=>Q.label.toLowerCase().includes(h.toLowerCase())||Q.key.toLowerCase().includes(h.toLowerCase())):J;F(be),V(0),Z("modifier"),y(!0),N(u)},_e=(b,w)=>{const u=b.substring(0,w);if(z==="tag"){const v=u.match(/@(\w*)$/);if(!v){y(!1);return}const s=v[1]||"";if(q&&Array.isArray(q)){const g=q.map(h=>({group:h.group,key:h.key,label:h.label,fullPath:h.fullPath||`@${h.group}(${h.key})`,breadcrumb:h.breadcrumb||h.group})),f=s?g.filter(h=>h.label.toLowerCase().includes(s.toLowerCase())||h.group.toLowerCase().includes(s.toLowerCase())||h.breadcrumb?.toLowerCase().includes(s.toLowerCase())):g.slice(0,50);F(f),V(0)}}else if(z==="modifier"){const v=u.lastIndexOf("@");if(v===-1){y(!1);return}const s=u.substring(v),g=s.match(/\)\.(\w*)$/);if(!g){y(!1);return}const f=g[1]||"";if(X&&Array.isArray(X)){const h=s.match(/@(\w+)\(/),P=h?h[1]:null,$=J=>J?{post:[{key:"meta",label:"Post meta",category:"other",args:[{type:"text",label:"Meta key"}]}],author:[{key:"meta",label:"User meta",category:"other",args:[{type:"text",label:"Meta key"}]}],user:[{key:"meta",label:"User meta",category:"other",args:[{type:"text",label:"Meta key"}]}],site:[{key:"query_var",label:"Query variable",category:"other",args:[{type:"text",label:"Variable name"}]},{key:"math",label:"Math expression",category:"other",args:[{type:"text",label:"Math expression"}]}]}[J]||[]:[],ae=[...X,...$(P)].map(J=>{const be=J.args?.map(fe=>fe.label).join(", ")||"",Q=`.${J.key}(${be})`;return{key:J.key,label:J.label,category:J.category||"other",code:`.${J.key}()`,fullSignature:Q,description:J.description}}),ce=f?ae.filter(J=>J.label.toLowerCase().includes(f.toLowerCase())||J.key.toLowerCase().includes(f.toLowerCase())):ae;F(ce),V(0)}}},xe=b=>{if(console.log("[CodeEditor] handleSelectSuggestion called, type:",z,"suggestion:",b),!d.current){console.log("[CodeEditor] No textarea ref, aborting");return}const w=d.current.selectionStart,u=t.substring(0,w),v=t.substring(w);if(console.log("[CodeEditor] Current value:",t),console.log("[CodeEditor] Text before cursor:",u),console.log("[CodeEditor] Text after cursor:",v),z==="tag"){const s=b;if(console.log("[CodeEditor] Tag suggestion:",s),u.match(/@(\w*)$/)){const f=u.lastIndexOf("@"),h=t.substring(0,f)+s.fullPath+v;console.log("[CodeEditor] New text:",h),o(h),setTimeout(()=>{if(d.current){const P=f+s.fullPath.length;d.current.selectionStart=P,d.current.selectionEnd=P,d.current.focus()}},0)}else console.log("[CodeEditor] No @ match found in textBefore")}else if(z==="modifier"){const s=b,g=u.lastIndexOf("."),h=t.substring(0,g)+s.code+v;o(h),setTimeout(()=>{if(d.current&&s.code.includes("()")){const P=g+s.code.length-1;d.current.selectionStart=P,d.current.selectionEnd=P,d.current.focus()}},0)}y(!1)},Te=b=>{const w=b.split(`
`);return w.length===0||w.length===1&&w[0]===""?'<span class="ts-line"><span class="ts-line-number">1</span></span>':w.map((u,v)=>{const g=u.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/@(\w+)\(([^)]*)\)((?:\.\w+(?:\([^)]*\))?)*)/g,(f,h,P,$)=>{const K=P==="";let ae=$;return $&&(ae=$.replace(/\.(\w+)\(([^)]*)\)/g,(ce,J,be)=>be?`.${J}(<span class="hl-group-arg">${be}</span>)`:`.${J}()`)),K?`<span class="hl-group">@${h}()${ae?`<span class="hl-group-mods">${ae}</span>`:""}</span>`:`<span class="hl-group">@${h}(<span class="hl-group-props">${P}</span>)${ae?`<span class="hl-group-mods">${ae}</span>`:""}</span>`});return`<span class="ts-line"><span class="ts-line-number">${v+1}</span>${g}</span>`}).join(`
`)},De=b=>{const w=b.currentTarget,u=w.parentElement?.querySelector("pre");u&&(u.scrollTop=w.scrollTop,u.scrollLeft=w.scrollLeft)},we=()=>{if(!d.current||!e)return;const b=d.current.selectionStart,w=/@(\w+)\(([^)]*)\)((?:\.\w+(?:\([^)]*\))?)*)/g;let u,v=0,s=!1;for(;(u=w.exec(t))!==null;){const f=u.index,h=u.index+u[0].length;if(b>=f&&b<=h){e(v),s=!0;break}v++}s||e(-1);const g=t.substring(0,b);g.endsWith(".")&&g.charAt(b-2)===")"&&g.match(/@\w+\(/)&&(console.log("[CodeEditor] Click detected after ), triggering modifier autocomplete"),Ie(t))};return Me(()=>{if(!S)return;const b=u=>{u.target.closest(".dtags-ac")||(console.log("[CodeEditor] Click outside .dtags-ac, closing autocomplete"),y(!1))},w=setTimeout(()=>{document.addEventListener("click",b),console.log("[CodeEditor] Voxel-style click-outside listener attached")},50);return()=>{clearTimeout(w),document.removeEventListener("click",b),console.log("[CodeEditor] Voxel-style click-outside listener removed")}},[S]),console.log("[CodeEditor] Render - showAutocomplete:",S,"suggestions:",O.length),l.createElement("div",{className:"dtags-wrapper"},l.createElement("div",{className:"dtags-content"},l.createElement("pre",{className:"ts-snippet nvx-scrollable",dangerouslySetInnerHTML:{__html:Te(t||"")}}),l.createElement("textarea",{ref:d,value:t,onChange:b=>ye(b.target.value),onKeyDown:se,onClick:we,onKeyUp:we,onScroll:De,rows:4,className:"nvx-scrollable",placeholder:"Press @ to quickly add a tag, or pick one from the left sidebar",spellCheck:!1}),S&&O.length>0&&l.createElement("div",{ref:D,className:"dtags-ac nvx-scrollable",style:{top:`${B.top}px`,left:`${B.left}px`}},z==="tag"?l.createElement("ul",{className:"nvx-quick-tags"},O.map((b,w)=>{const u=b;return l.createElement("li",{key:w,className:w===T?"is-active":"","data-result-index":w,title:`${u.breadcrumb} / ${u.label}`,onClick:()=>xe(b),onMouseEnter:()=>V(w)},l.createElement("span",null,u.breadcrumb),l.createElement("p",null,u.label))})):l.createElement("ul",{className:"nvx-quick-tags nvx-insert-mod"},(()=>{const b=["text","number","date","other","control"],w={text:"Text",number:"Number",date:"Date",other:"Other",control:"Conditionals"},u=O.reduce((s,g)=>{const f=g;return s[f.category]||(s[f.category]=[]),s[f.category].push(f),s},{});let v=0;return b.map(s=>{if(!u[s])return null;const g=u[s];return l.createElement(l.Fragment,{key:s},l.createElement("li",{className:"vx-inert"},l.createElement("span",null,w[s])),g.map((f,h)=>{const P=v++,K=[P===T?"is-active":"",P===0?"first-item":""].filter(Boolean).join(" ");return l.createElement("li",{key:`${s}-${h}`,className:K,"data-result-index":P,title:f.label,onClick:()=>xe(f)},l.createElement("p",null,f.label," ",l.createElement("code",null,f.fullSignature||f.code)))}))})})()))))},Qt=({modifier:t,modifierDef:o,index:e,onUpdate:m,onRemove:I,isOpen:d,onToggle:D,onDragStart:S,onDragOver:y,onDrop:B})=>{if(!o)return null;const M=(N,O)=>{const F=[...t.args];F[N]=O,m(e,{...t,args:F})},U=o.args&&o.args.length>0;return l.createElement("div",{className:`nvx-mod${d?" mod-open":""}`,"data-draggable":"true",draggable:!0,onDragStart:()=>S(e),onDragOver:N=>y(N,e),onDrop:()=>B(e)},l.createElement("div",{className:"nvx-mod-title",onClick:()=>D(e)},o.label,l.createElement("button",{type:"button",className:"ts-button ts-outline icon-only",onClick:N=>{N.stopPropagation(),I(e)},title:"Remove modifier"},l.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{d:"M9.5 2C9.08579 2 8.75 2.33579 8.75 2.75C8.75 3.16421 9.08579 3.5 9.5 3.5H14.5C14.9142 3.5 15.25 3.16421 15.25 2.75C15.25 2.33579 14.9142 2 14.5 2H9.5Z",fill:"currentColor"}),l.createElement("path",{d:"M4 5C3.74924 5 3.51506 5.12533 3.37597 5.33397C3.23687 5.54262 3.21125 5.80699 3.3077 6.03846L4.44231 8.76154C4.4804 8.85294 4.5 8.95098 4.5 9.05V19.75C4.5 20.9926 5.50736 22 6.75 22H17.25C18.4926 22 19.5 20.9926 19.5 19.75V9.04978C19.5 8.95083 19.5196 8.85286 19.5576 8.76151L20.6914 6.03827C20.7878 5.8068 20.7621 5.54249 20.623 5.33389C20.4839 5.12529 20.2498 5 19.999 5H4ZM10.75 10.5V16.5C10.75 16.9142 10.4142 17.25 10 17.25C9.58579 17.25 9.25 16.9142 9.25 16.5V10.5C9.25 10.0858 9.58579 9.75 10 9.75C10.4142 9.75 10.75 10.0858 10.75 10.5ZM14.75 10.5V16.5C14.75 16.9142 14.4142 17.25 14 17.25C13.5858 17.25 13.25 16.9142 13.25 16.5V10.5C13.25 10.0858 13.5858 9.75 14 9.75C14.4142 9.75 14.75 10.0858 14.75 10.5Z",fill:"currentColor"})))),d&&l.createElement("div",{className:"nvx-mod-content"},U?o.args.map((N,O)=>l.createElement("div",{key:O,className:"ts-form-group"},l.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"5px"}},l.createElement("label",{style:{margin:0}},N.label),N.description&&l.createElement("span",{className:"vx-info-box"},l.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},l.createElement("path",{d:"M2 12.3906C2 6.86778 6.47715 2.39062 12 2.39062C17.5228 2.39062 22 6.86778 22 12.3906C22 17.9135 17.5228 22.3906 12 22.3906C6.47715 22.3906 2 17.9135 2 12.3906ZM11.9993 9.96045C12.4964 9.96045 12.9001 9.5575 12.9001 9.06045C12.9001 8.56339 12.4971 8.16045 12.0001 8.16045C11.503 8.16045 11.0993 8.56339 11.0993 9.06045C11.0993 9.5575 11.5023 9.96045 11.9993 9.96045ZM11.2501 15.8298C11.2501 16.244 11.5859 16.5798 12.0001 16.5798C12.4143 16.5798 12.7501 16.244 12.7501 15.8298V11.6054C12.7501 11.1912 12.4143 10.8554 12.0001 10.8554C11.5858 10.8554 11.2501 11.1912 11.2501 11.6054V15.8298Z",fill:"#343C54"})),l.createElement("p",null,N.description))),N.type==="select"?l.createElement("select",{value:t.args[O]||N.default||"",onChange:F=>M(O,F.target.value)},N.options?.map(F=>l.createElement("option",{key:F.value,value:F.value},F.label))):N.type==="number"?l.createElement("input",{type:"number",value:t.args[O]?.toString()||N.default?.toString()||"",onChange:F=>M(O,parseInt(F.target.value,10)||0)}):l.createElement("input",{type:"text",value:t.args[O]||N.default||"",onChange:F=>M(O,F.target.value)}))):l.createElement("div",{className:"ts-form-group"},l.createElement("p",null,"No additional settings."))))},Xt=({modifiers:t,availableModifiers:o,onUpdate:e,currentTag:m})=>{const[I,d]=j(""),[D,S]=j(new Set),[y,B]=j(null),M=C=>{if(!C){d("");return}const _=ne.find(Y=>Y.key===C);if(!_){d("");return}const R={key:C,args:_.args?.map(Y=>Y.default||"")||[]};e([...t,R]),d("")},U=(C,_)=>{const R=[...t];R[C]=_,e(R)},N=C=>{const _=t.filter((Y,oe)=>oe!==C),R=new Set;D.forEach(Y=>{Y<C?R.add(Y):Y>C&&R.add(Y-1)}),S(R),e(_)},O=C=>{D.has(C)?S(new Set):S(new Set([C]))},F=C=>{B(C)},T=(C,_)=>{C.preventDefault()},V=C=>{if(y===null||y===C){B(null);return}const _=[...t],[R]=_.splice(y,1);_.splice(C,0,R);const Y=new Set;D.forEach(oe=>{oe===y?Y.add(C):oe>y&&oe<=C?Y.add(oe-1):oe<y&&oe>=C?Y.add(oe+1):Y.add(oe)}),S(Y),e(_),B(null)},z=["text","number","date","other","control"],Z={text:"Text",number:"Number",date:"Date",other:"Other",control:"Conditionals"};console.log("[ModifierEditor] Available modifiers:",o),console.log("[ModifierEditor] First modifier:",o[0]),console.log("[ModifierEditor] Current tag:",m);const q=C=>({post:[{key:"meta",label:"Post meta",category:"other",args:[{type:"text",label:"Meta key",default:""}]}],author:[{key:"meta",label:"User meta",category:"other",args:[{type:"text",label:"Meta key",default:""}]}],user:[{key:"meta",label:"User meta",category:"other",args:[{type:"text",label:"Meta key",default:""}]}],site:[{key:"query_var",label:"Query variable",category:"other",args:[{type:"text",label:"Variable name",default:""}]},{key:"math",label:"Math expression",category:"other",args:[{type:"text",label:"Math expression",default:""}]}]})[C]||[],ne=m?[...o,...q(m.group)]:o,X=ne.reduce((C,_)=>{if(!_||typeof _.key!="string")return console.warn("[ModifierEditor] Invalid modifier object:",_),C;if(_.key==="then"||_.key==="else")return C;const R=_.category||"other";return C[R]||(C[R]=[]),C[R].push(_),C},{});console.log("[ModifierEditor] Modifiers by category:",X);const te=()=>{if(!m?.breadcrumb)return null;const C=m.breadcrumb.split(" / "),_=[];return C.forEach((R,Y)=>{_.push(l.createElement("span",{key:`part-${Y}`},R)),Y<C.length-1&&_.push(l.createElement("span",{key:`sep-${Y}`}," / "))}),_};return l.createElement(l.Fragment,null,l.createElement("div",{className:"mod-head"},l.createElement("h3",null,m?.property?(()=>{const C=m.property.startsWith(":")?m.property.slice(1):m.property;return C.charAt(0).toUpperCase()+C.slice(1).replace(/_/g," ")})():"Select a tag"),l.createElement("div",{className:"nvx-placeholder nvx-tag-path"},te())),l.createElement("div",{className:"ts-form-group"},l.createElement("select",{value:I,onChange:C=>M(C.target.value),disabled:!m},l.createElement("option",{value:"",disabled:!0},"Add a mod"),z.map(C=>X[C]?l.createElement("optgroup",{key:C,label:Z[C]},X[C].map(_=>{const R=typeof _.key=="string"?_.key:String(_.key||"");return console.log("[ModifierEditor] Rendering modifier:",{key:_.key,keyValue:R,label:_.label}),l.createElement("option",{key:R,value:R},_.label)})):null))),t.length>0&&l.createElement("div",{className:"nvx-divider"}),t.length>0&&l.createElement("div",{className:"nvx-mod-list"},t.map((C,_)=>{const R=ne.find(Y=>Y.key===C.key);return l.createElement(Qt,{key:_,modifier:C,modifierDef:R,index:_,onUpdate:U,onRemove:N,isOpen:D.has(_),onToggle:O,onDragStart:F,onDragOver:T,onDrop:V})})))};function en(t){const o=t("core/edit-site");if(o){const m=o.getEditedPostId?.();if(typeof m=="string")return m}const e=t("core/editor");if(e){const m=e.getCurrentPost?.();if(m?.slug)return m.slug}return""}function tn(){return zt(t=>{const o=en(t);return o.includes("term_card")?"term":o.includes("user_card")?"user":"post"},[])}const nn=({value:t,onChange:o,label:e="Dynamic Content",context:m="post",onClose:I,autoOpen:d=!1})=>{const D=tn(),S=m==="post"?D:m,[y,B]=j(d),[M,U]=j(t),[N,O]=j(""),[F,T]=j([]),[V,z]=j([]),[Z,q]=j(null),[ne,X]=j([]),[te,C]=j(null),[_,R]=j(!1),[Y,oe]=j(null),[ve,se]=j({}),ye=l.useRef(null);Me(()=>{y&&Se()},[y,S]);const Se=()=>{const u=window.VoxelFSE_Dynamic_Data_Store;if(u){const s=u.groupsByContext?.[S]||u.groups||[];T(s),z(u.modifiers||[])}else Ie()},Ie=async()=>{R(!0),oe(null);try{const u=await $e({path:`/voxel-fse/v1/dynamic-data/groups?context=${S}`});T(u||[]);const v=await $e({path:"/voxel-fse/v1/dynamic-data/modifiers"});z(v||[])}catch(u){oe("Failed to load data groups. Please try again."),console.error("Failed to fetch data groups:",u)}finally{R(!1)}},_e=async(u,v)=>{const s=v?`${u}:${v}`:u;if(ve[s])return console.log(`[fetchGroupChildren] Using cached children for ${s}`),ve[s];const g=window.VoxelFSE_Dynamic_Data_Store;if(g?.groupChildren?.[s]){console.log(`[fetchGroupChildren] Loading children from global store for ${s} (instant!)`);const f=g.groupChildren[s];return se(h=>({...h,[s]:f})),v||T(h=>h.map(P=>P.type===u?{...P,exports:f||[],isLoaded:!0}:P)),f}console.log(`[fetchGroupChildren] Fetching children from API for ${s}...`);try{const f=v?`/voxel-fse/v1/dynamic-data/groups?group=${u}&parent=${v}`:`/voxel-fse/v1/dynamic-data/groups?group=${u}`,h=await $e({path:f});return console.log(`[fetchGroupChildren] Loaded ${h?.length||0} children for ${s}`),se(P=>({...P,[s]:h||[]})),T(P=>P.map($=>$.type===u&&!v?{...$,exports:h||[],isLoaded:!0}:$)),h||[]}catch(f){return console.error(`Failed to fetch children for ${u}:`,f),se(h=>({...h,[s]:[]})),[]}},xe=(u,v,s)=>{const g=s==="method"?`@${u}().${v}()`:`@${u}(${v})`;ye.current?ye.current(g):U(f=>f+(f?" ":"")+g)},Te=(u,v)=>{const s=/@(\w+)\(([^)]*)\)((?:\.\w+(?:\([^)]*\))?)*)/g;let g,f=0;for(;(g=s.exec(u))!==null;){if(f===v){const h=g[1],P=g[2],$=g[3]||"",K=[],ae=/\.(\w+)(?:\(([^)]*)\))?/g;let ce;for(;(ce=ae.exec($))!==null;){const Q=ce[1],fe=ce[2]||"",Pe=fe?fe.split(",").map(Re=>Re.trim()):[];K.push({key:Q,args:Pe})}const J=Q=>{const fe=Q.startsWith(":")?Q.slice(1):Q;return fe.charAt(0).toUpperCase()+fe.slice(1).replace(/_/g," ")},be=`${J(h)} / ${J(P)}`;return{group:h,property:P,breadcrumb:be,modifiers:K}}f++}return null},De=u=>{q(u);const v=Te(M,u);v?(C({group:v.group,property:v.property,breadcrumb:v.breadcrumb}),X(v.modifiers)):(C(null),X([]))},we=u=>{if(X(u),Z===null||Z<0||!te)return;const v=/@(\w+)\(([^)]*)\)((?:\.\w+(?:\([^)]*\))?)*)/g;let s,g=0,f=M;for(;(s=v.exec(M))!==null;){if(g===Z){const h=s[1],P=s[2];let $=`@${h}(${P})`;u.length>0&&u.forEach(K=>{$+=`.${K.key}`,K.args&&K.args.length>0?$+=`(${K.args.join(", ")})`:$+="()"}),f=M.substring(0,s.index)+$+M.substring(s.index+s[0].length),U(f);return}g++}U(f)},b=()=>{o(M),B(!1),I&&I()},w=()=>{U(t),B(!1),I&&I()};return Me(()=>{if(!y)return;const u="voxel-backend-css-dynamic";if(document.getElementById(u))return;const v=document.createElement("link");v.id=u,v.rel="stylesheet",v.href="/wp-content/themes/voxel/assets/dist/backend.css",document.head.appendChild(v)},[y]),l.createElement(l.Fragment,null,l.createElement("div",{className:"mw-dynamic-tag-builder-trigger"},l.createElement("button",{type:"button",className:"components-button is-secondary",onClick:()=>B(!0)},l.createElement("span",{className:"dashicons dashicons-tag"}),e),t&&l.createElement("div",{className:"mw-dynamic-tag-builder-trigger__preview"},l.createElement("code",null,t))),y&&l.createElement("div",{className:"nvx-editor"},l.createElement("div",{className:"nvx-topbar"},l.createElement("div",{className:"nvx-topbar__title nvx-flex nvx-v-center"},l.createElement("h2",null,"Dynamic data")),l.createElement("div",{className:"nvx-topbar__buttons nvx-flex nvx-v-center"},l.createElement("button",{type:"button",className:"ts-button ts-outline",onClick:w},"Discard"),l.createElement("button",{type:"button",className:"ts-button btn-shadow ts-save-settings",onClick:b},l.createElement("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{d:"M3.25 5.5C3.25 4.25736 4.25736 3.25 5.5 3.25H15.3809C15.977 3.25 16.5488 3.48658 16.9707 3.90779L20.0897 7.02197C20.5124 7.44403 20.7499 8.01685 20.7499 8.61418L20.7499 18.5C20.7499 19.7426 19.7425 20.75 18.4999 20.75H16.75V16.25C16.75 15.0074 15.7426 14 14.5 14L9.5 14C8.25736 14 7.25 15.0074 7.25 16.25L7.25001 20.75H5.5C4.25736 20.75 3.25 19.7426 3.25 18.5V5.5ZM8 6.25C7.58579 6.25 7.25 6.58579 7.25 7C7.25 7.41421 7.58579 7.75 8 7.75H12C12.4142 7.75 12.75 7.41421 12.75 7C12.75 6.58579 12.4142 6.25 12 6.25H8Z",fill:"currentColor"}),l.createElement("path",{d:"M8.75001 20.75L15.25 20.75V16.25C15.25 15.8358 14.9142 15.5 14.5 15.5L9.5 15.5C9.08579 15.5 8.75 15.8358 8.75 16.25L8.75001 20.75Z",fill:"currentColor"})),"Save"))),Y&&l.createElement("div",{className:"mw-dynamic-tag-builder__error"},Y),_?l.createElement("div",{className:"mw-dynamic-tag-builder__loading"},"Loading..."):l.createElement("div",{className:"nvx-editor-body"},l.createElement("div",{className:"nvx-left-sidebar nvx-scrollable"},l.createElement(Jt,{value:N,onChange:O}),l.createElement(Zt,{groups:F,searchQuery:N,onSelectTag:xe,onLoadChildren:_e})),l.createElement("div",{className:"nvx-main"},l.createElement("div",{className:"nvx-visual-editor"},l.createElement(Kt,{value:M,onChange:U,onTokenFocus:De,onInsertTag:u=>{ye.current=u}}))),l.createElement("div",{className:"nvx-right-sidebar nvx-scrollable"},Z!==null&&Z>=0&&te?l.createElement(Xt,{modifiers:ne,availableModifiers:V,onUpdate:we,currentTag:te}):l.createElement("div",{className:"nvx-placeholder placeholder-all-center"},l.createElement("svg",{width:"80",height:"80",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{d:"M11.5811 3.06348C11.5811 2.81389 11.4569 2.58066 11.2498 2.44129C11.0428 2.30193 10.78 2.27469 10.5487 2.36864C8.65206 3.13926 7.3125 5.00074 7.3125 7.17688C7.3125 9.16904 8.43512 10.8975 10.0801 11.7667V20.0655C10.0801 21.3082 11.0874 22.3155 12.3301 22.3155H12.6701C13.9128 22.3155 14.9201 21.3082 14.9201 20.0655V11.7673C16.5657 10.8983 17.6888 9.16949 17.6888 7.17688C17.6888 5.00111 16.3497 3.13989 14.4535 2.36904C14.2223 2.27503 13.9595 2.30223 13.7524 2.44159C13.5453 2.58095 13.4211 2.8142 13.4211 3.06382V6.24913C13.4211 6.66334 13.0853 6.99913 12.6711 6.99913H12.3311C11.9168 6.99913 11.5811 6.66334 11.5811 6.24913V3.06348Z",fill:"#343C54"})),l.createElement("p",null,"Click on a tag to view options"))))))};function an({onClick:t,title:o=r("Enable Voxel tags","voxel-fse")}){return React.createElement("button",{type:"button",className:"voxel-fse-enable-tags",onClick:t,title:o},React.createElement("span",{className:"voxel-fse-enable-tags__icon"}))}r("Blue","voxel-fse"),r("Purple","voxel-fse"),r("Orange","voxel-fse"),r("White","voxel-fse"),r("Black","voxel-fse"),r("Light Gray","voxel-fse"),r("Gray","voxel-fse"),r("Dark Gray","voxel-fse"),r("Navy","voxel-fse"),r("Dark Blue","voxel-fse"),r("Dark Purple","voxel-fse"),r("Cyan","voxel-fse"),r("Teal","voxel-fse"),r("Green","voxel-fse"),r("Red","voxel-fse");r("None","voxel-fse"),r("Fading","voxel-fse"),r("Fade In","voxel-fse"),r("Fade In Down","voxel-fse"),r("Fade In Left","voxel-fse"),r("Fade In Right","voxel-fse"),r("Fade In Up","voxel-fse"),r("Zooming","voxel-fse"),r("Zoom In","voxel-fse"),r("Zoom In Down","voxel-fse"),r("Zoom In Left","voxel-fse"),r("Zoom In Right","voxel-fse"),r("Zoom In Up","voxel-fse"),r("Bouncing","voxel-fse"),r("Bounce In","voxel-fse"),r("Bounce In Down","voxel-fse"),r("Bounce In Left","voxel-fse"),r("Bounce In Right","voxel-fse"),r("Bounce In Up","voxel-fse"),r("Sliding","voxel-fse"),r("Slide In Down","voxel-fse"),r("Slide In Left","voxel-fse"),r("Slide In Right","voxel-fse"),r("Slide In Up","voxel-fse"),r("Rotating","voxel-fse"),r("Rotate In","voxel-fse"),r("Rotate In Down Left","voxel-fse"),r("Rotate In Down Right","voxel-fse"),r("Rotate In Up Left","voxel-fse"),r("Rotate In Up Right","voxel-fse"),r("Attention Seekers","voxel-fse"),r("Bounce","voxel-fse"),r("Flash","voxel-fse"),r("Pulse","voxel-fse"),r("Rubber Band","voxel-fse"),r("Shake","voxel-fse"),r("Head Shake","voxel-fse"),r("Swing","voxel-fse"),r("Tada","voxel-fse"),r("Wobble","voxel-fse"),r("Jello","voxel-fse"),r("Light Speed","voxel-fse"),r("Light Speed In","voxel-fse"),r("Specials","voxel-fse"),r("Roll In","voxel-fse");r("Default","voxel-fse"),r("None","voxel-fse"),r("Solid","voxel-fse"),r("Double","voxel-fse"),r("Dotted","voxel-fse"),r("Dashed","voxel-fse"),r("Groove","voxel-fse");r("Default","voxel-fse"),r("Full Width","voxel-fse")+"",r("Inline","voxel-fse")+"",r("Custom","voxel-fse");r("Default","voxel-fse"),r("Absolute","voxel-fse"),r("Fixed","voxel-fse");r("Circle","voxel-fse"),r("Oval Vertical","voxel-fse"),r("Oval Horizontal","voxel-fse"),r("Pill Vertical","voxel-fse"),r("Pill Horizontal","voxel-fse"),r("Triangle","voxel-fse"),r("Diamond","voxel-fse"),r("Pentagon","voxel-fse"),r("Hexagon Vertical","voxel-fse"),r("Hexagon Horizontal","voxel-fse"),r("Heptagon","voxel-fse"),r("Octagon","voxel-fse"),r("Parallelogram Right","voxel-fse"),r("Parallelogram Left","voxel-fse"),r("Trapezoid Up","voxel-fse"),r("Trapezoid Down","voxel-fse"),r("Flower","voxel-fse"),r("Sketch","voxel-fse"),r("Hexagon Donut","voxel-fse"),r("Blob","voxel-fse");r("Fit","voxel-fse"),r("Fill","voxel-fse"),r("Custom","voxel-fse");r("Center Center","voxel-fse"),r("Center Left","voxel-fse"),r("Center Right","voxel-fse"),r("Top Center","voxel-fse"),r("Top Left","voxel-fse"),r("Top Right","voxel-fse"),r("Bottom Center","voxel-fse"),r("Bottom Left","voxel-fse"),r("Bottom Right","voxel-fse"),r("Custom","voxel-fse");r("No-repeat","voxel-fse"),r("Repeat","voxel-fse"),r("Repeat-x","voxel-fse"),r("Repeat-y","voxel-fse"),r("Round","voxel-fse"),r("Space","voxel-fse");r("Select condition","voxel-fse"),r("Dynamic tag","voxel-fse"),r("User is logged in","voxel-fse"),r("User is logged out","voxel-fse"),r("User membership plan is","voxel-fse"),r("User role is","voxel-fse"),r("User is author of current post","voxel-fse"),r("User can create new post","voxel-fse"),r("User can edit current post","voxel-fse"),r("User is verified","voxel-fse"),r("User is a Stripe Connect vendor","voxel-fse"),r("User has bought product","voxel-fse"),r("User has bought product type","voxel-fse"),r("User is customer of author","voxel-fse"),r("User follows post","voxel-fse"),r("User follows author","voxel-fse"),r("Author membership plan is","voxel-fse"),r("Author role is","voxel-fse"),r("Author is verified","voxel-fse"),r("Author is a Stripe Connect vendor","voxel-fse"),r("Is page","voxel-fse"),r("Is child of page","voxel-fse"),r("Is single post","voxel-fse"),r("Is post type archive","voxel-fse"),r("Is author profile","voxel-fse"),r("Is single term","voxel-fse"),r("Is homepage","voxel-fse"),r("Is 404 page","voxel-fse"),r("Post is verified","voxel-fse"),r("Product is available","voxel-fse"),r("Product type is","voxel-fse"),r("Listing plan is","voxel-fse"),r("User has bought listing plan","voxel-fse"),r("Author has bought listing plan","voxel-fse");const on=[{key:"countries",label:r("Top countries","voxel-fse"),type:"object-list"},{key:"ref_domains",label:r("Top referrers (domains)","voxel-fse"),type:"object-list"},{key:"ref_urls",label:r("Top referrers (URLs)","voxel-fse"),type:"object-list"},{key:"browsers",label:r("Top browsers","voxel-fse"),type:"object-list"},{key:"platforms",label:r("Top platforms","voxel-fse"),type:"object-list"},{key:"devices",label:r("Devices","voxel-fse"),type:"object-list"}];r("Post","voxel-fse"),r("Visit stats","voxel-fse"),r("Author","voxel-fse"),r("Role","voxel-fse"),r("User","voxel-fse"),r("Role","voxel-fse");r("Blue","voxel-fse"),r("Purple","voxel-fse"),r("Orange","voxel-fse"),r("White","voxel-fse"),r("Black","voxel-fse"),r("Light Gray","voxel-fse"),r("Gray","voxel-fse"),r("Dark Gray","voxel-fse"),r("Navy","voxel-fse"),r("Dark Blue","voxel-fse"),r("Dark Purple","voxel-fse"),r("Cyan","voxel-fse"),r("Teal","voxel-fse"),r("Green","voxel-fse"),r("Red","voxel-fse");r("Default","voxel-fse"),r("System Font","voxel-fse");const rn=({label:t,value:o,onChange:e,supportsDynamicTags:m=!0,dynamicTagContext:I="post",showSelectedIcon:d=!1})=>{const D={library:o?.library||"",value:o?.value||""},S=s=>s?!["","svg","dynamic"].includes(s):!1,[y,B]=j(!1),[M,U]=j({}),[N,O]=j({}),[F,T]=j(""),[V,z]=j(""),[Z,q]=j({}),ne=ot(null),[X,te]=j(!1),C=()=>{const s=D.value;return typeof s=="string"&&s.startsWith("@tags()")&&s.includes("@endtags()")},_=()=>{if(!C())return D.value||"";const s=D.value.match(/@tags\(\)(.*?)@endtags\(\)/s);return s?s[1]:D.value},R=s=>s?`@tags()${s}@endtags()`:"",Y=()=>{te(!0)},oe=()=>{window.confirm(r("Are you sure?","voxel-fse"))&&e({library:"",value:""})},ve=s=>{s&&e({library:"dynamic",value:R(s)}),te(!1)},se=C(),ye=typeof window<"u"&&window.wp&&window.wp.media;Me(()=>{if(y&&window.Voxel_Icon_Picker_Config&&!F){const s=window.Voxel_Icon_Picker_Config,g=Object.keys(s)[0];g&&T(g)}},[y,F]);const Se=ke(()=>{e({library:"",value:""})},[e]),Ie=ke(()=>{if(!ye||!window.wp?.media){console.warn("WordPress media library not available");return}const s=window.wp.media({title:r("Select SVG Icon","voxel-fse"),button:{text:r("Select","voxel-fse")},multiple:!1,library:{type:"image/svg+xml"}});s.on("select",()=>{const f=s.state().get("selection").first().toJSON();f&&f.url&&e({library:"svg",value:f.url})}),s.open()},[ye,e]),_e=ke(async(s,g)=>{if(!(M[s]||N[s]||!g.fetchJson)){O(f=>({...f,[s]:!0}));try{const f=await fetch(g.fetchJson);if(f.ok){const h=await f.json();let P=[];if(Array.isArray(h))P=h;else if(h&&typeof h=="object"){const $=h;P=$.icons||$.list||[]}U($=>({...$,[s]:P}))}}catch(f){console.warn(`Failed to load icon list for ${s}:`,f)}finally{O(f=>{const h={...f};return delete h[s],h})}}},[M,N]),xe=ke(s=>{if(z(s),!s.trim()){q({});return}const g=window.Voxel_Icon_Picker_Config;if(!g)return;const f={},h=s.toLowerCase();Object.entries(g).forEach(([P,$])=>{const ae=(M[P]||$.list||[]).filter(ce=>ce.toLowerCase().includes(h));ae.length>0&&(f[P]=ae)}),q(f)},[M]);Me(()=>{if(y){if(!document.getElementById("vx-backend-css-dynamic")){const s=document.querySelector('link[href*="backend.css"]');let g="";s&&s.href?g=s.href:g=`${window.location.origin}/wp-content/themes/voxel/assets/dist/backend.css`;const f=document.createElement("link");f.id="vx-backend-css-dynamic",f.rel="stylesheet",f.href=g,f.media="all",document.head.appendChild(f)}}else{const s=document.getElementById("vx-backend-css-dynamic");s&&s.remove()}},[y]);const Te=ke(()=>{if(!window.Voxel_Icon_Picker_Config){console.warn("Voxel icon picker config not available");return}B(!0),z(""),q({});const s=window.Voxel_Icon_Picker_Config;Object.entries(s).forEach(([g,f])=>{f.fetchJson&&_e(g,f)})},[_e]),De=ke(()=>{B(!1),z(""),q({}),T("")},[]),we=ke(s=>{T(s),z(""),q({})},[]),b=ke((s,g)=>{const f=window.Voxel_Icon_Picker_Config;if(!f||!f[g])return;const h=f[g],P=`${h.displayPrefix} ${h.prefix}${s}`;e({library:"icon",value:P}),De()},[e,De]),u=!window.Voxel_Icon_Picker_Config||!F?null:window.Voxel_Icon_Picker_Config[F],v=u?M[F]||u.list||[]:[];return l.createElement("div",{className:"voxel-icon-picker-control",style:{marginBottom:"16px"}},l.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"}},l.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},m&&l.createElement(an,{onClick:Y}),l.createElement("label",{style:{fontWeight:500,margin:0}},t))),se?l.createElement("div",{className:"edit-voxel-tags",style:{backgroundColor:"rgb(47, 47, 49)",borderRadius:"10px",overflow:"hidden",padding:"12px"}},l.createElement("div",{style:{marginBottom:"12px"}},l.createElement("span",{style:{color:"#fff",fontSize:"13px",fontFamily:"inherit",wordBreak:"break-all"}},_())),l.createElement("div",{style:{height:"1px",backgroundColor:"rgba(255, 255, 255, 0.15)",marginBottom:"8px"}}),l.createElement("div",{style:{display:"flex"}},l.createElement("button",{type:"button",className:"edit-tags",onClick:Y,style:{flex:1,background:"transparent",border:"none",color:"rgba(255, 255, 255, 0.8)",fontSize:"10px",fontWeight:600,letterSpacing:"0.5px",cursor:"pointer",padding:"6px 0",textAlign:"left"}},r("EDIT TAGS","voxel-fse")),l.createElement("button",{type:"button",className:"disable-tags",onClick:oe,style:{flex:1,background:"transparent",border:"none",color:"rgba(255, 255, 255, 0.5)",fontSize:"10px",fontWeight:600,letterSpacing:"0.5px",cursor:"pointer",padding:"6px 0",textAlign:"right"}},r("DISABLE TAGS","voxel-fse")))):l.createElement(l.Fragment,null,l.createElement("style",null,`
						.voxel-icon-picker-control .voxel-icon-btn-active.components-button {
							background-color: var(--wp-components-color-accent, var(--wp-admin-theme-color, #3858e9)) !important;
							color: #fff !important;
						}
						.voxel-icon-picker-control .voxel-icon-picker-btn.components-button {
							min-width: 36px !important;
							width: 36px !important;
							height: 36px !important;
							padding: 0 !important;
							display: flex !important;
							align-items: center !important;
							justify-content: center !important;
							overflow: visible !important;
						}
						.voxel-icon-picker-control .voxel-icon-picker-btn.components-button i {
							font-size: 16px !important;
							line-height: 1 !important;
							width: auto !important;
							height: auto !important;
						}
					`),l.createElement("div",{style:{display:"flex",gap:"4px",alignItems:"center"}},l.createElement(Qe,{variant:D.library===""?"primary":"secondary",onClick:Se,title:r("None","voxel-fse"),className:`voxel-icon-picker-btn ${D.library===""?"voxel-icon-btn-active":""}`},l.createElement("i",{className:"eicon-ban","aria-hidden":"true"})),l.createElement(Qe,{variant:D.library==="svg"?"primary":"secondary",onClick:Ie,title:r("Upload SVG","voxel-fse"),className:`voxel-icon-picker-btn ${D.library==="svg"?"voxel-icon-btn-active":""}`},l.createElement("i",{className:"eicon-upload","aria-hidden":"true"})),l.createElement(Qe,{variant:S(D.library)?"primary":"secondary",onClick:Te,title:r("Icon Library","voxel-fse"),className:`voxel-icon-picker-btn ${S(D.library)?"voxel-icon-btn-active":""}`},(d||S(D.library))&&D.value?l.createElement("i",{className:D.value,"aria-hidden":"true"}):D.library==="svg"&&D.value?l.createElement("img",{src:D.value,alt:"",style:{width:"16px",height:"16px"}}):l.createElement("i",{className:"eicon-circle","aria-hidden":"true"})))),y&&l.createElement("div",{className:"icon-picker-modal"},l.createElement("div",{className:"ts-modal-backdrop",onClick:De}),l.createElement("div",{className:"icons-modal ts-theme-options",ref:ne},u&&v.length>0?l.createElement("div",{className:"x-row"},l.createElement("div",{className:"inner-tab x-col-4"},l.createElement("div",{className:"x-row"},l.createElement("div",{className:"ts-form-group x-col-12"},l.createElement("label",null,"Search icons"),l.createElement("input",{type:"text",value:V,onChange:s=>xe(s.target.value),placeholder:"Search icon"})),l.createElement("div",{className:"x-col-12"},l.createElement("ul",{className:"inner-tabs vertical-tabs"},window.Voxel_Icon_Picker_Config&&Object.entries(window.Voxel_Icon_Picker_Config).map(([s,g])=>l.createElement("li",{key:s,className:F===s?"current-item":""},l.createElement("a",{href:"#",onClick:f=>{f.preventDefault(),we(s)}},l.createElement("i",{className:g.labelIcon}),l.createElement("span",null,g.label)))))))),l.createElement("div",{className:"icon-list-wrapper min-scroll x-col-8"},V?l.createElement("div",{className:"filtered-icons"},Object.entries(Z).map(([s,g])=>{const f=window.Voxel_Icon_Picker_Config?.[s];return f?l.createElement("div",{key:s},l.createElement("code",null,f.label),l.createElement("div",{className:"icon-list"},g.map(h=>l.createElement("div",{key:h,className:"single-icon",onClick:P=>{P.preventDefault(),P.stopPropagation(),b(h,s)},title:h},l.createElement("i",{className:`${f.displayPrefix} ${f.prefix}${h}`}),l.createElement("span",null,h))))):null})):l.createElement("div",{className:"icon-list"},v.map(s=>l.createElement("div",{key:s,className:"single-icon",onClick:g=>{g.preventDefault(),g.stopPropagation(),b(s,F)},title:s},l.createElement("i",{className:`${u.displayPrefix} ${u.prefix}${s}`}),l.createElement("span",null,s)))))):l.createElement("div",{className:"x-row"},l.createElement("div",{className:"x-col-12"},l.createElement("label",null,N[F]?r("Loading icons...","voxel-fse"):r("No icon packs available.","voxel-fse")))))),X&&l.createElement(nn,{value:_(),onChange:ve,label:t,context:I,onClose:()=>te(!1),autoOpen:!0}))};r("Start","voxel-fse"),r("Center","voxel-fse"),r("End","voxel-fse"),r("Space Between","voxel-fse"),r("Space Around","voxel-fse"),r("Space Evenly","voxel-fse");r("Mountains","voxel-fse"),r("Drops","voxel-fse"),r("Clouds","voxel-fse"),r("Zigzag","voxel-fse"),r("Pyramids","voxel-fse"),r("Triangle","voxel-fse"),r("Triangle Asymmetrical","voxel-fse"),r("Tilt","voxel-fse"),r("Tilt Opacity","voxel-fse"),r("Fan Opacity","voxel-fse"),r("Curve","voxel-fse"),r("Curve Asymmetrical","voxel-fse"),r("Waves","voxel-fse"),r("Waves Brush","voxel-fse"),r("Waves Pattern","voxel-fse"),r("Book","voxel-fse"),r("Split","voxel-fse"),r("Arrow","voxel-fse");var Xe=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],Fe={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(t){return typeof console<"u"&&console.warn(t)},getWeek:function(t){var o=new Date(t.getTime());o.setHours(0,0,0,0),o.setDate(o.getDate()+3-(o.getDay()+6)%7);var e=new Date(o.getFullYear(),0,4);return 1+Math.round(((o.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},Ye={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(t){var o=t%100;if(o>3&&o<21)return"th";switch(o%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},ue=function(t,o){return o===void 0&&(o=2),("000"+t).slice(o*-1)},ge=function(t){return t===!0?1:0};function mt(t,o){var e;return function(){var m=this,I=arguments;clearTimeout(e),e=setTimeout(function(){return t.apply(m,I)},o)}}var et=function(t){return t instanceof Array?t:[t]};function le(t,o,e){if(e===!0)return t.classList.add(o);t.classList.remove(o)}function W(t,o,e){var m=window.document.createElement(t);return o=o||"",e=e||"",m.className=o,e!==void 0&&(m.textContent=e),m}function Ve(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Et(t,o){if(o(t))return t;if(t.parentNode)return Et(t.parentNode,o)}function We(t,o){var e=W("div","numInputWrapper"),m=W("input","numInput "+t),I=W("span","arrowUp"),d=W("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?m.type="number":(m.type="text",m.pattern="\\d*"),o!==void 0)for(var D in o)m.setAttribute(D,o[D]);return e.appendChild(m),e.appendChild(I),e.appendChild(d),e}function pe(t){try{if(typeof t.composedPath=="function"){var o=t.composedPath();return o[0]}return t.target}catch{return t.target}}var tt=function(){},ze=function(t,o,e){return e.months[o?"shorthand":"longhand"][t]},ln={D:tt,F:function(t,o,e){t.setMonth(e.months.longhand.indexOf(o))},G:function(t,o){t.setHours((t.getHours()>=12?12:0)+parseFloat(o))},H:function(t,o){t.setHours(parseFloat(o))},J:function(t,o){t.setDate(parseFloat(o))},K:function(t,o,e){t.setHours(t.getHours()%12+12*ge(new RegExp(e.amPM[1],"i").test(o)))},M:function(t,o,e){t.setMonth(e.months.shorthand.indexOf(o))},S:function(t,o){t.setSeconds(parseFloat(o))},U:function(t,o){return new Date(parseFloat(o)*1e3)},W:function(t,o,e){var m=parseInt(o),I=new Date(t.getFullYear(),0,2+(m-1)*7,0,0,0,0);return I.setDate(I.getDate()-I.getDay()+e.firstDayOfWeek),I},Y:function(t,o){t.setFullYear(parseFloat(o))},Z:function(t,o){return new Date(o)},d:function(t,o){t.setDate(parseFloat(o))},h:function(t,o){t.setHours((t.getHours()>=12?12:0)+parseFloat(o))},i:function(t,o){t.setMinutes(parseFloat(o))},j:function(t,o){t.setDate(parseFloat(o))},l:tt,m:function(t,o){t.setMonth(parseFloat(o)-1)},n:function(t,o){t.setMonth(parseFloat(o)-1)},s:function(t,o){t.setSeconds(parseFloat(o))},u:function(t,o){return new Date(parseFloat(o))},w:tt,y:function(t,o){t.setFullYear(2e3+parseFloat(o))}},Ne={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},je={Z:function(t){return t.toISOString()},D:function(t,o,e){return o.weekdays.shorthand[je.w(t,o,e)]},F:function(t,o,e){return ze(je.n(t,o,e)-1,!1,o)},G:function(t,o,e){return ue(je.h(t,o,e))},H:function(t){return ue(t.getHours())},J:function(t,o){return o.ordinal!==void 0?t.getDate()+o.ordinal(t.getDate()):t.getDate()},K:function(t,o){return o.amPM[ge(t.getHours()>11)]},M:function(t,o){return ze(t.getMonth(),!0,o)},S:function(t){return ue(t.getSeconds())},U:function(t){return t.getTime()/1e3},W:function(t,o,e){return e.getWeek(t)},Y:function(t){return ue(t.getFullYear(),4)},d:function(t){return ue(t.getDate())},h:function(t){return t.getHours()%12?t.getHours()%12:12},i:function(t){return ue(t.getMinutes())},j:function(t){return t.getDate()},l:function(t,o){return o.weekdays.longhand[t.getDay()]},m:function(t){return ue(t.getMonth()+1)},n:function(t){return t.getMonth()+1},s:function(t){return t.getSeconds()},u:function(t){return t.getTime()},w:function(t){return t.getDay()},y:function(t){return String(t.getFullYear()).substring(2)}},kt=function(t){var o=t.config,e=o===void 0?Fe:o,m=t.l10n,I=m===void 0?Ye:m,d=t.isMobile,D=d===void 0?!1:d;return function(S,y,B){var M=B||I;return e.formatDate!==void 0&&!D?e.formatDate(S,y,M):y.split("").map(function(U,N,O){return je[U]&&O[N-1]!=="\\"?je[U](S,M,e):U!=="\\"?U:""}).join("")}},rt=function(t){var o=t.config,e=o===void 0?Fe:o,m=t.l10n,I=m===void 0?Ye:m;return function(d,D,S,y){if(!(d!==0&&!d)){var B=y||I,M,U=d;if(d instanceof Date)M=new Date(d.getTime());else if(typeof d!="string"&&d.toFixed!==void 0)M=new Date(d);else if(typeof d=="string"){var N=D||(e||Fe).dateFormat,O=String(d).trim();if(O==="today")M=new Date,S=!0;else if(e&&e.parseDate)M=e.parseDate(d,N);else if(/Z$/.test(O)||/GMT$/.test(O))M=new Date(d);else{for(var F=void 0,T=[],V=0,z=0,Z="";V<N.length;V++){var q=N[V],ne=q==="\\",X=N[V-1]==="\\"||ne;if(Ne[q]&&!X){Z+=Ne[q];var te=new RegExp(Z).exec(d);te&&(F=!0)&&T[q!=="Y"?"push":"unshift"]({fn:ln[q],val:te[++z]})}else ne||(Z+=".")}M=!e||!e.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),T.forEach(function(C){var _=C.fn,R=C.val;return M=_(M,R,B)||M}),M=F?M:void 0}}if(!(M instanceof Date&&!isNaN(M.getTime()))){e.errorHandler(new Error("Invalid date provided: "+U));return}return S===!0&&M.setHours(0,0,0,0),M}}};function me(t,o,e){return e===void 0&&(e=!0),e!==!1?new Date(t.getTime()).setHours(0,0,0,0)-new Date(o.getTime()).setHours(0,0,0,0):t.getTime()-o.getTime()}var sn=function(t,o,e){return t>Math.min(o,e)&&t<Math.max(o,e)},nt=function(t,o,e){return t*3600+o*60+e},cn=function(t){var o=Math.floor(t/3600),e=(t-o*3600)/60;return[o,e,t-o*3600-e*60]},un={DAY:864e5};function at(t){var o=t.defaultHour,e=t.defaultMinute,m=t.defaultSeconds;if(t.minDate!==void 0){var I=t.minDate.getHours(),d=t.minDate.getMinutes(),D=t.minDate.getSeconds();o<I&&(o=I),o===I&&e<d&&(e=d),o===I&&e===d&&m<D&&(m=t.minDate.getSeconds())}if(t.maxDate!==void 0){var S=t.maxDate.getHours(),y=t.maxDate.getMinutes();o=Math.min(o,S),o===S&&(e=Math.min(y,e)),o===S&&e===y&&(m=t.maxDate.getSeconds())}return{hours:o,minutes:e,seconds:m}}typeof Object.assign!="function"&&(Object.assign=function(t){for(var o=[],e=1;e<arguments.length;e++)o[e-1]=arguments[e];if(!t)throw TypeError("Cannot convert undefined or null to object");for(var m=function(S){S&&Object.keys(S).forEach(function(y){return t[y]=S[y]})},I=0,d=o;I<d.length;I++){var D=d[I];m(D)}return t});var ie=function(){return ie=Object.assign||function(t){for(var o,e=1,m=arguments.length;e<m;e++){o=arguments[e];for(var I in o)Object.prototype.hasOwnProperty.call(o,I)&&(t[I]=o[I])}return t},ie.apply(this,arguments)},gt=function(){for(var t=0,o=0,e=arguments.length;o<e;o++)t+=arguments[o].length;for(var m=Array(t),I=0,o=0;o<e;o++)for(var d=arguments[o],D=0,S=d.length;D<S;D++,I++)m[I]=d[D];return m},fn=300;function dn(t,o){var e={config:ie(ie({},Fe),re.defaultConfig),l10n:Ye};e.parseDate=rt({config:e.config,l10n:e.l10n}),e._handlers=[],e.pluginElements=[],e.loadedPlugins=[],e._bind=T,e._setHoursFromDate=N,e._positionCalendar=Pe,e.changeMonth=we,e.changeYear=g,e.clear=b,e.close=w,e.onMouseOver=K,e._createElement=W,e.createDay=te,e.destroy=u,e.isEnabled=f,e.jumpToDate=Z,e.updateValue=Ee,e.open=ce,e.redraw=st,e.set=St,e.setDate=It,e.toggle=Nt;function m(){e.utils={getDaysInMonth:function(n,a){return n===void 0&&(n=e.currentMonth),a===void 0&&(a=e.currentYear),n===1&&(a%4===0&&a%100!==0||a%400===0)?29:e.l10n.daysInMonth[n]}}}function I(){e.element=e.input=t,e.isOpen=!1,be(),fe(),Tt(),_t(),m(),e.isMobile||X(),z(),(e.selectedDates.length||e.config.noCalendar)&&(e.config.enableTime&&N(e.config.noCalendar?e.latestSelectedDateObj:void 0),Ee(!1)),S();var n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!e.isMobile&&n&&Pe(),ee("onReady")}function d(){var n;return((n=e.calendarContainer)===null||n===void 0?void 0:n.getRootNode()).activeElement||document.activeElement}function D(n){return n.bind(e)}function S(){var n=e.config;n.weekNumbers===!1&&n.showMonths===1||n.noCalendar!==!0&&window.requestAnimationFrame(function(){if(e.calendarContainer!==void 0&&(e.calendarContainer.style.visibility="hidden",e.calendarContainer.style.display="block"),e.daysContainer!==void 0){var a=(e.days.offsetWidth+1)*n.showMonths;e.daysContainer.style.width=a+"px",e.calendarContainer.style.width=a+(e.weekWrapper!==void 0?e.weekWrapper.offsetWidth:0)+"px",e.calendarContainer.style.removeProperty("visibility"),e.calendarContainer.style.removeProperty("display")}})}function y(n){if(e.selectedDates.length===0){var a=e.config.minDate===void 0||me(new Date,e.config.minDate)>=0?new Date:new Date(e.config.minDate.getTime()),i=at(e.config);a.setHours(i.hours,i.minutes,i.seconds,a.getMilliseconds()),e.selectedDates=[a],e.latestSelectedDateObj=a}n!==void 0&&n.type!=="blur"&&Ft(n);var c=e._input.value;U(),Ee(),e._input.value!==c&&e._debouncedChange()}function B(n,a){return n%12+12*ge(a===e.l10n.amPM[1])}function M(n){switch(n%24){case 0:case 12:return 12;default:return n%12}}function U(){if(!(e.hourElement===void 0||e.minuteElement===void 0)){var n=(parseInt(e.hourElement.value.slice(-2),10)||0)%24,a=(parseInt(e.minuteElement.value,10)||0)%60,i=e.secondElement!==void 0?(parseInt(e.secondElement.value,10)||0)%60:0;e.amPM!==void 0&&(n=B(n,e.amPM.textContent));var c=e.config.minTime!==void 0||e.config.minDate&&e.minDateHasTime&&e.latestSelectedDateObj&&me(e.latestSelectedDateObj,e.config.minDate,!0)===0,p=e.config.maxTime!==void 0||e.config.maxDate&&e.maxDateHasTime&&e.latestSelectedDateObj&&me(e.latestSelectedDateObj,e.config.maxDate,!0)===0;if(e.config.maxTime!==void 0&&e.config.minTime!==void 0&&e.config.minTime>e.config.maxTime){var x=nt(e.config.minTime.getHours(),e.config.minTime.getMinutes(),e.config.minTime.getSeconds()),L=nt(e.config.maxTime.getHours(),e.config.maxTime.getMinutes(),e.config.maxTime.getSeconds()),k=nt(n,a,i);if(k>L&&k<x){var H=cn(x);n=H[0],a=H[1],i=H[2]}}else{if(p){var E=e.config.maxTime!==void 0?e.config.maxTime:e.config.maxDate;n=Math.min(n,E.getHours()),n===E.getHours()&&(a=Math.min(a,E.getMinutes())),a===E.getMinutes()&&(i=Math.min(i,E.getSeconds()))}if(c){var A=e.config.minTime!==void 0?e.config.minTime:e.config.minDate;n=Math.max(n,A.getHours()),n===A.getHours()&&a<A.getMinutes()&&(a=A.getMinutes()),a===A.getMinutes()&&(i=Math.max(i,A.getSeconds()))}}O(n,a,i)}}function N(n){var a=n||e.latestSelectedDateObj;a&&a instanceof Date&&O(a.getHours(),a.getMinutes(),a.getSeconds())}function O(n,a,i){e.latestSelectedDateObj!==void 0&&e.latestSelectedDateObj.setHours(n%24,a,i||0,0),!(!e.hourElement||!e.minuteElement||e.isMobile)&&(e.hourElement.value=ue(e.config.time_24hr?n:(12+n)%12+12*ge(n%12===0)),e.minuteElement.value=ue(a),e.amPM!==void 0&&(e.amPM.textContent=e.l10n.amPM[ge(n>=12)]),e.secondElement!==void 0&&(e.secondElement.value=ue(i)))}function F(n){var a=pe(n),i=parseInt(a.value)+(n.delta||0);(i/1e3>1||n.key==="Enter"&&!/[^\d]/.test(i.toString()))&&g(i)}function T(n,a,i,c){if(a instanceof Array)return a.forEach(function(p){return T(n,p,i,c)});if(n instanceof Array)return n.forEach(function(p){return T(p,a,i,c)});n.addEventListener(a,i,c),e._handlers.push({remove:function(){return n.removeEventListener(a,i,c)}})}function V(){ee("onChange")}function z(){if(e.config.wrap&&["open","close","toggle","clear"].forEach(function(i){Array.prototype.forEach.call(e.element.querySelectorAll("[data-"+i+"]"),function(c){return T(c,"click",e[i])})}),e.isMobile){Pt();return}var n=mt(ae,50);if(e._debouncedChange=mt(V,fn),e.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&T(e.daysContainer,"mouseover",function(i){e.config.mode==="range"&&K(pe(i))}),T(e._input,"keydown",$),e.calendarContainer!==void 0&&T(e.calendarContainer,"keydown",$),!e.config.inline&&!e.config.static&&T(window,"resize",n),window.ontouchstart!==void 0?T(window.document,"touchstart",s):T(window.document,"mousedown",s),T(window.document,"focus",s,{capture:!0}),e.config.clickOpens===!0&&(T(e._input,"focus",e.open),T(e._input,"click",e.open)),e.daysContainer!==void 0&&(T(e.monthNav,"click",Lt),T(e.monthNav,["keyup","increment"],F),T(e.daysContainer,"click",ct)),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0){var a=function(i){return pe(i).select()};T(e.timeContainer,["increment"],y),T(e.timeContainer,"blur",y,{capture:!0}),T(e.timeContainer,"click",q),T([e.hourElement,e.minuteElement],["focus","click"],a),e.secondElement!==void 0&&T(e.secondElement,"focus",function(){return e.secondElement&&e.secondElement.select()}),e.amPM!==void 0&&T(e.amPM,"click",function(i){y(i)})}e.config.allowInput&&T(e._input,"blur",P)}function Z(n,a){var i=n!==void 0?e.parseDate(n):e.latestSelectedDateObj||(e.config.minDate&&e.config.minDate>e.now?e.config.minDate:e.config.maxDate&&e.config.maxDate<e.now?e.config.maxDate:e.now),c=e.currentYear,p=e.currentMonth;try{i!==void 0&&(e.currentYear=i.getFullYear(),e.currentMonth=i.getMonth())}catch(x){x.message="Invalid date supplied: "+i,e.config.errorHandler(x)}a&&e.currentYear!==c&&(ee("onYearChange"),se()),a&&(e.currentYear!==c||e.currentMonth!==p)&&ee("onMonthChange"),e.redraw()}function q(n){var a=pe(n);~a.className.indexOf("arrow")&&ne(n,a.classList.contains("arrowUp")?1:-1)}function ne(n,a,i){var c=n&&pe(n),p=i||c&&c.parentNode&&c.parentNode.firstChild,x=qe("increment");x.delta=a,p&&p.dispatchEvent(x)}function X(){var n=window.document.createDocumentFragment();if(e.calendarContainer=W("div","flatpickr-calendar"),e.calendarContainer.tabIndex=-1,!e.config.noCalendar){if(n.appendChild(Ie()),e.innerContainer=W("div","flatpickr-innerContainer"),e.config.weekNumbers){var a=De(),i=a.weekWrapper,c=a.weekNumbers;e.innerContainer.appendChild(i),e.weekNumbers=c,e.weekWrapper=i}e.rContainer=W("div","flatpickr-rContainer"),e.rContainer.appendChild(xe()),e.daysContainer||(e.daysContainer=W("div","flatpickr-days"),e.daysContainer.tabIndex=-1),ve(),e.rContainer.appendChild(e.daysContainer),e.innerContainer.appendChild(e.rContainer),n.appendChild(e.innerContainer)}e.config.enableTime&&n.appendChild(_e()),le(e.calendarContainer,"rangeMode",e.config.mode==="range"),le(e.calendarContainer,"animate",e.config.animate===!0),le(e.calendarContainer,"multiMonth",e.config.showMonths>1),e.calendarContainer.appendChild(n);var p=e.config.appendTo!==void 0&&e.config.appendTo.nodeType!==void 0;if((e.config.inline||e.config.static)&&(e.calendarContainer.classList.add(e.config.inline?"inline":"static"),e.config.inline&&(!p&&e.element.parentNode?e.element.parentNode.insertBefore(e.calendarContainer,e._input.nextSibling):e.config.appendTo!==void 0&&e.config.appendTo.appendChild(e.calendarContainer)),e.config.static)){var x=W("div","flatpickr-wrapper");e.element.parentNode&&e.element.parentNode.insertBefore(x,e.element),x.appendChild(e.element),e.altInput&&x.appendChild(e.altInput),x.appendChild(e.calendarContainer)}!e.config.static&&!e.config.inline&&(e.config.appendTo!==void 0?e.config.appendTo:window.document.body).appendChild(e.calendarContainer)}function te(n,a,i,c){var p=f(a,!0),x=W("span",n,a.getDate().toString());return x.dateObj=a,x.$i=c,x.setAttribute("aria-label",e.formatDate(a,e.config.ariaDateFormat)),n.indexOf("hidden")===-1&&me(a,e.now)===0&&(e.todayDateElem=x,x.classList.add("today"),x.setAttribute("aria-current","date")),p?(x.tabIndex=-1,Ze(a)&&(x.classList.add("selected"),e.selectedDateElem=x,e.config.mode==="range"&&(le(x,"startRange",e.selectedDates[0]&&me(a,e.selectedDates[0],!0)===0),le(x,"endRange",e.selectedDates[1]&&me(a,e.selectedDates[1],!0)===0),n==="nextMonthDay"&&x.classList.add("inRange")))):x.classList.add("flatpickr-disabled"),e.config.mode==="range"&&At(a)&&!Ze(a)&&x.classList.add("inRange"),e.weekNumbers&&e.config.showMonths===1&&n!=="prevMonthDay"&&c%7===6&&e.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+e.config.getWeek(a)+"</span>"),ee("onDayCreate",x),x}function C(n){n.focus(),e.config.mode==="range"&&K(n)}function _(n){for(var a=n>0?0:e.config.showMonths-1,i=n>0?e.config.showMonths:-1,c=a;c!=i;c+=n)for(var p=e.daysContainer.children[c],x=n>0?0:p.children.length-1,L=n>0?p.children.length:-1,k=x;k!=L;k+=n){var H=p.children[k];if(H.className.indexOf("hidden")===-1&&f(H.dateObj))return H}}function R(n,a){for(var i=n.className.indexOf("Month")===-1?n.dateObj.getMonth():e.currentMonth,c=a>0?e.config.showMonths:-1,p=a>0?1:-1,x=i-e.currentMonth;x!=c;x+=p)for(var L=e.daysContainer.children[x],k=i-e.currentMonth===x?n.$i+a:a<0?L.children.length-1:0,H=L.children.length,E=k;E>=0&&E<H&&E!=(a>0?H:-1);E+=p){var A=L.children[E];if(A.className.indexOf("hidden")===-1&&f(A.dateObj)&&Math.abs(n.$i-E)>=Math.abs(a))return C(A)}e.changeMonth(p),Y(_(p),0)}function Y(n,a){var i=d(),c=h(i||document.body),p=n!==void 0?n:c?i:e.selectedDateElem!==void 0&&h(e.selectedDateElem)?e.selectedDateElem:e.todayDateElem!==void 0&&h(e.todayDateElem)?e.todayDateElem:_(a>0?1:-1);p===void 0?e._input.focus():c?R(p,a):C(p)}function oe(n,a){for(var i=(new Date(n,a,1).getDay()-e.l10n.firstDayOfWeek+7)%7,c=e.utils.getDaysInMonth((a-1+12)%12,n),p=e.utils.getDaysInMonth(a,n),x=window.document.createDocumentFragment(),L=e.config.showMonths>1,k=L?"prevMonthDay hidden":"prevMonthDay",H=L?"nextMonthDay hidden":"nextMonthDay",E=c+1-i,A=0;E<=c;E++,A++)x.appendChild(te("flatpickr-day "+k,new Date(n,a-1,E),E,A));for(E=1;E<=p;E++,A++)x.appendChild(te("flatpickr-day",new Date(n,a,E),E,A));for(var G=p+1;G<=42-i&&(e.config.showMonths===1||A%7!==0);G++,A++)x.appendChild(te("flatpickr-day "+H,new Date(n,a+1,G%p),G,A));var Ce=W("div","dayContainer");return Ce.appendChild(x),Ce}function ve(){if(e.daysContainer!==void 0){Ve(e.daysContainer),e.weekNumbers&&Ve(e.weekNumbers);for(var n=document.createDocumentFragment(),a=0;a<e.config.showMonths;a++){var i=new Date(e.currentYear,e.currentMonth,1);i.setMonth(e.currentMonth+a),n.appendChild(oe(i.getFullYear(),i.getMonth()))}e.daysContainer.appendChild(n),e.days=e.daysContainer.firstChild,e.config.mode==="range"&&e.selectedDates.length===1&&K()}}function se(){if(!(e.config.showMonths>1||e.config.monthSelectorType!=="dropdown")){var n=function(c){return e.config.minDate!==void 0&&e.currentYear===e.config.minDate.getFullYear()&&c<e.config.minDate.getMonth()?!1:!(e.config.maxDate!==void 0&&e.currentYear===e.config.maxDate.getFullYear()&&c>e.config.maxDate.getMonth())};e.monthsDropdownContainer.tabIndex=-1,e.monthsDropdownContainer.innerHTML="";for(var a=0;a<12;a++)if(n(a)){var i=W("option","flatpickr-monthDropdown-month");i.value=new Date(e.currentYear,a).getMonth().toString(),i.textContent=ze(a,e.config.shorthandCurrentMonth,e.l10n),i.tabIndex=-1,e.currentMonth===a&&(i.selected=!0),e.monthsDropdownContainer.appendChild(i)}}}function ye(){var n=W("div","flatpickr-month"),a=window.document.createDocumentFragment(),i;e.config.showMonths>1||e.config.monthSelectorType==="static"?i=W("span","cur-month"):(e.monthsDropdownContainer=W("select","flatpickr-monthDropdown-months"),e.monthsDropdownContainer.setAttribute("aria-label",e.l10n.monthAriaLabel),T(e.monthsDropdownContainer,"change",function(L){var k=pe(L),H=parseInt(k.value,10);e.changeMonth(H-e.currentMonth),ee("onMonthChange")}),se(),i=e.monthsDropdownContainer);var c=We("cur-year",{tabindex:"-1"}),p=c.getElementsByTagName("input")[0];p.setAttribute("aria-label",e.l10n.yearAriaLabel),e.config.minDate&&p.setAttribute("min",e.config.minDate.getFullYear().toString()),e.config.maxDate&&(p.setAttribute("max",e.config.maxDate.getFullYear().toString()),p.disabled=!!e.config.minDate&&e.config.minDate.getFullYear()===e.config.maxDate.getFullYear());var x=W("div","flatpickr-current-month");return x.appendChild(i),x.appendChild(c),a.appendChild(x),n.appendChild(a),{container:n,yearElement:p,monthElement:i}}function Se(){Ve(e.monthNav),e.monthNav.appendChild(e.prevMonthNav),e.config.showMonths&&(e.yearElements=[],e.monthElements=[]);for(var n=e.config.showMonths;n--;){var a=ye();e.yearElements.push(a.yearElement),e.monthElements.push(a.monthElement),e.monthNav.appendChild(a.container)}e.monthNav.appendChild(e.nextMonthNav)}function Ie(){return e.monthNav=W("div","flatpickr-months"),e.yearElements=[],e.monthElements=[],e.prevMonthNav=W("span","flatpickr-prev-month"),e.prevMonthNav.innerHTML=e.config.prevArrow,e.nextMonthNav=W("span","flatpickr-next-month"),e.nextMonthNav.innerHTML=e.config.nextArrow,Se(),Object.defineProperty(e,"_hidePrevMonthArrow",{get:function(){return e.__hidePrevMonthArrow},set:function(n){e.__hidePrevMonthArrow!==n&&(le(e.prevMonthNav,"flatpickr-disabled",n),e.__hidePrevMonthArrow=n)}}),Object.defineProperty(e,"_hideNextMonthArrow",{get:function(){return e.__hideNextMonthArrow},set:function(n){e.__hideNextMonthArrow!==n&&(le(e.nextMonthNav,"flatpickr-disabled",n),e.__hideNextMonthArrow=n)}}),e.currentYearElement=e.yearElements[0],Ue(),e.monthNav}function _e(){e.calendarContainer.classList.add("hasTime"),e.config.noCalendar&&e.calendarContainer.classList.add("noCalendar");var n=at(e.config);e.timeContainer=W("div","flatpickr-time"),e.timeContainer.tabIndex=-1;var a=W("span","flatpickr-time-separator",":"),i=We("flatpickr-hour",{"aria-label":e.l10n.hourAriaLabel});e.hourElement=i.getElementsByTagName("input")[0];var c=We("flatpickr-minute",{"aria-label":e.l10n.minuteAriaLabel});if(e.minuteElement=c.getElementsByTagName("input")[0],e.hourElement.tabIndex=e.minuteElement.tabIndex=-1,e.hourElement.value=ue(e.latestSelectedDateObj?e.latestSelectedDateObj.getHours():e.config.time_24hr?n.hours:M(n.hours)),e.minuteElement.value=ue(e.latestSelectedDateObj?e.latestSelectedDateObj.getMinutes():n.minutes),e.hourElement.setAttribute("step",e.config.hourIncrement.toString()),e.minuteElement.setAttribute("step",e.config.minuteIncrement.toString()),e.hourElement.setAttribute("min",e.config.time_24hr?"0":"1"),e.hourElement.setAttribute("max",e.config.time_24hr?"23":"12"),e.hourElement.setAttribute("maxlength","2"),e.minuteElement.setAttribute("min","0"),e.minuteElement.setAttribute("max","59"),e.minuteElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(i),e.timeContainer.appendChild(a),e.timeContainer.appendChild(c),e.config.time_24hr&&e.timeContainer.classList.add("time24hr"),e.config.enableSeconds){e.timeContainer.classList.add("hasSeconds");var p=We("flatpickr-second");e.secondElement=p.getElementsByTagName("input")[0],e.secondElement.value=ue(e.latestSelectedDateObj?e.latestSelectedDateObj.getSeconds():n.seconds),e.secondElement.setAttribute("step",e.minuteElement.getAttribute("step")),e.secondElement.setAttribute("min","0"),e.secondElement.setAttribute("max","59"),e.secondElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(W("span","flatpickr-time-separator",":")),e.timeContainer.appendChild(p)}return e.config.time_24hr||(e.amPM=W("span","flatpickr-am-pm",e.l10n.amPM[ge((e.latestSelectedDateObj?e.hourElement.value:e.config.defaultHour)>11)]),e.amPM.title=e.l10n.toggleTitle,e.amPM.tabIndex=-1,e.timeContainer.appendChild(e.amPM)),e.timeContainer}function xe(){e.weekdayContainer?Ve(e.weekdayContainer):e.weekdayContainer=W("div","flatpickr-weekdays");for(var n=e.config.showMonths;n--;){var a=W("div","flatpickr-weekdaycontainer");e.weekdayContainer.appendChild(a)}return Te(),e.weekdayContainer}function Te(){if(e.weekdayContainer){var n=e.l10n.firstDayOfWeek,a=gt(e.l10n.weekdays.shorthand);n>0&&n<a.length&&(a=gt(a.splice(n,a.length),a.splice(0,n)));for(var i=e.config.showMonths;i--;)e.weekdayContainer.children[i].innerHTML=`
      <span class='flatpickr-weekday'>
        `+a.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function De(){e.calendarContainer.classList.add("hasWeeks");var n=W("div","flatpickr-weekwrapper");n.appendChild(W("span","flatpickr-weekday",e.l10n.weekAbbreviation));var a=W("div","flatpickr-weeks");return n.appendChild(a),{weekWrapper:n,weekNumbers:a}}function we(n,a){a===void 0&&(a=!0);var i=a?n:n-e.currentMonth;i<0&&e._hidePrevMonthArrow===!0||i>0&&e._hideNextMonthArrow===!0||(e.currentMonth+=i,(e.currentMonth<0||e.currentMonth>11)&&(e.currentYear+=e.currentMonth>11?1:-1,e.currentMonth=(e.currentMonth+12)%12,ee("onYearChange"),se()),ve(),ee("onMonthChange"),Ue())}function b(n,a){if(n===void 0&&(n=!0),a===void 0&&(a=!0),e.input.value="",e.altInput!==void 0&&(e.altInput.value=""),e.mobileInput!==void 0&&(e.mobileInput.value=""),e.selectedDates=[],e.latestSelectedDateObj=void 0,a===!0&&(e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth()),e.config.enableTime===!0){var i=at(e.config),c=i.hours,p=i.minutes,x=i.seconds;O(c,p,x)}e.redraw(),n&&ee("onChange")}function w(){e.isOpen=!1,e.isMobile||(e.calendarContainer!==void 0&&e.calendarContainer.classList.remove("open"),e._input!==void 0&&e._input.classList.remove("active")),ee("onClose")}function u(){e.config!==void 0&&ee("onDestroy");for(var n=e._handlers.length;n--;)e._handlers[n].remove();if(e._handlers=[],e.mobileInput)e.mobileInput.parentNode&&e.mobileInput.parentNode.removeChild(e.mobileInput),e.mobileInput=void 0;else if(e.calendarContainer&&e.calendarContainer.parentNode)if(e.config.static&&e.calendarContainer.parentNode){var a=e.calendarContainer.parentNode;if(a.lastChild&&a.removeChild(a.lastChild),a.parentNode){for(;a.firstChild;)a.parentNode.insertBefore(a.firstChild,a);a.parentNode.removeChild(a)}}else e.calendarContainer.parentNode.removeChild(e.calendarContainer);e.altInput&&(e.input.type="text",e.altInput.parentNode&&e.altInput.parentNode.removeChild(e.altInput),delete e.altInput),e.input&&(e.input.type=e.input._type,e.input.classList.remove("flatpickr-input"),e.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(i){try{delete e[i]}catch{}})}function v(n){return e.calendarContainer.contains(n)}function s(n){if(e.isOpen&&!e.config.inline){var a=pe(n),i=v(a),c=a===e.input||a===e.altInput||e.element.contains(a)||n.path&&n.path.indexOf&&(~n.path.indexOf(e.input)||~n.path.indexOf(e.altInput)),p=!c&&!i&&!v(n.relatedTarget),x=!e.config.ignoredFocusElements.some(function(L){return L.contains(a)});p&&x&&(e.config.allowInput&&e.setDate(e._input.value,!1,e.config.altInput?e.config.altFormat:e.config.dateFormat),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0&&e.input.value!==""&&e.input.value!==void 0&&y(),e.close(),e.config&&e.config.mode==="range"&&e.selectedDates.length===1&&e.clear(!1))}}function g(n){if(!(!n||e.config.minDate&&n<e.config.minDate.getFullYear()||e.config.maxDate&&n>e.config.maxDate.getFullYear())){var a=n,i=e.currentYear!==a;e.currentYear=a||e.currentYear,e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth=Math.min(e.config.maxDate.getMonth(),e.currentMonth):e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&(e.currentMonth=Math.max(e.config.minDate.getMonth(),e.currentMonth)),i&&(e.redraw(),ee("onYearChange"),se())}}function f(n,a){var i;a===void 0&&(a=!0);var c=e.parseDate(n,void 0,a);if(e.config.minDate&&c&&me(c,e.config.minDate,a!==void 0?a:!e.minDateHasTime)<0||e.config.maxDate&&c&&me(c,e.config.maxDate,a!==void 0?a:!e.maxDateHasTime)>0)return!1;if(!e.config.enable&&e.config.disable.length===0)return!0;if(c===void 0)return!1;for(var p=!!e.config.enable,x=(i=e.config.enable)!==null&&i!==void 0?i:e.config.disable,L=0,k=void 0;L<x.length;L++){if(k=x[L],typeof k=="function"&&k(c))return p;if(k instanceof Date&&c!==void 0&&k.getTime()===c.getTime())return p;if(typeof k=="string"){var H=e.parseDate(k,void 0,!0);return H&&H.getTime()===c.getTime()?p:!p}else if(typeof k=="object"&&c!==void 0&&k.from&&k.to&&c.getTime()>=k.from.getTime()&&c.getTime()<=k.to.getTime())return p}return!p}function h(n){return e.daysContainer!==void 0?n.className.indexOf("hidden")===-1&&n.className.indexOf("flatpickr-disabled")===-1&&e.daysContainer.contains(n):!1}function P(n){var a=n.target===e._input,i=e._input.value.trimEnd()!==Je();a&&i&&!(n.relatedTarget&&v(n.relatedTarget))&&e.setDate(e._input.value,!0,n.target===e.altInput?e.config.altFormat:e.config.dateFormat)}function $(n){var a=pe(n),i=e.config.wrap?t.contains(a):a===e._input,c=e.config.allowInput,p=e.isOpen&&(!c||!i),x=e.config.inline&&i&&!c;if(n.keyCode===13&&i){if(c)return e.setDate(e._input.value,!0,a===e.altInput?e.config.altFormat:e.config.dateFormat),e.close(),a.blur();e.open()}else if(v(a)||p||x){var L=!!e.timeContainer&&e.timeContainer.contains(a);switch(n.keyCode){case 13:L?(n.preventDefault(),y(),Ge()):ct(n);break;case 27:n.preventDefault(),Ge();break;case 8:case 46:i&&!e.config.allowInput&&(n.preventDefault(),e.clear());break;case 37:case 39:if(!L&&!i){n.preventDefault();var k=d();if(e.daysContainer!==void 0&&(c===!1||k&&h(k))){var H=n.keyCode===39?1:-1;n.ctrlKey?(n.stopPropagation(),we(H),Y(_(1),0)):Y(void 0,H)}}else e.hourElement&&e.hourElement.focus();break;case 38:case 40:n.preventDefault();var E=n.keyCode===40?1:-1;e.daysContainer&&a.$i!==void 0||a===e.input||a===e.altInput?n.ctrlKey?(n.stopPropagation(),g(e.currentYear-E),Y(_(1),0)):L||Y(void 0,E*7):a===e.currentYearElement?g(e.currentYear-E):e.config.enableTime&&(!L&&e.hourElement&&e.hourElement.focus(),y(n),e._debouncedChange());break;case 9:if(L){var A=[e.hourElement,e.minuteElement,e.secondElement,e.amPM].concat(e.pluginElements).filter(function(de){return de}),G=A.indexOf(a);if(G!==-1){var Ce=A[G+(n.shiftKey?-1:1)];n.preventDefault(),(Ce||e._input).focus()}}else!e.config.noCalendar&&e.daysContainer&&e.daysContainer.contains(a)&&n.shiftKey&&(n.preventDefault(),e._input.focus());break}}if(e.amPM!==void 0&&a===e.amPM)switch(n.key){case e.l10n.amPM[0].charAt(0):case e.l10n.amPM[0].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[0],U(),Ee();break;case e.l10n.amPM[1].charAt(0):case e.l10n.amPM[1].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[1],U(),Ee();break}(i||v(a))&&ee("onKeyDown",n)}function K(n,a){if(a===void 0&&(a="flatpickr-day"),!(e.selectedDates.length!==1||n&&(!n.classList.contains(a)||n.classList.contains("flatpickr-disabled")))){for(var i=n?n.dateObj.getTime():e.days.firstElementChild.dateObj.getTime(),c=e.parseDate(e.selectedDates[0],void 0,!0).getTime(),p=Math.min(i,e.selectedDates[0].getTime()),x=Math.max(i,e.selectedDates[0].getTime()),L=!1,k=0,H=0,E=p;E<x;E+=un.DAY)f(new Date(E),!0)||(L=L||E>p&&E<x,E<c&&(!k||E>k)?k=E:E>c&&(!H||E<H)&&(H=E));var A=Array.from(e.rContainer.querySelectorAll("*:nth-child(-n+"+e.config.showMonths+") > ."+a));A.forEach(function(G){var Ce=G.dateObj,de=Ce.getTime(),He=k>0&&de<k||H>0&&de>H;if(He){G.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(Ae){G.classList.remove(Ae)});return}else if(L&&!He)return;["startRange","inRange","endRange","notAllowed"].forEach(function(Ae){G.classList.remove(Ae)}),n!==void 0&&(n.classList.add(i<=e.selectedDates[0].getTime()?"startRange":"endRange"),c<i&&de===c?G.classList.add("startRange"):c>i&&de===c&&G.classList.add("endRange"),de>=k&&(H===0||de<=H)&&sn(de,c,i)&&G.classList.add("inRange"))})}}function ae(){e.isOpen&&!e.config.static&&!e.config.inline&&Pe()}function ce(n,a){if(a===void 0&&(a=e._positionElement),e.isMobile===!0){if(n){n.preventDefault();var i=pe(n);i&&i.blur()}e.mobileInput!==void 0&&(e.mobileInput.focus(),e.mobileInput.click()),ee("onOpen");return}else if(e._input.disabled||e.config.inline)return;var c=e.isOpen;e.isOpen=!0,c||(e.calendarContainer.classList.add("open"),e._input.classList.add("active"),ee("onOpen"),Pe(a)),e.config.enableTime===!0&&e.config.noCalendar===!0&&e.config.allowInput===!1&&(n===void 0||!e.timeContainer.contains(n.relatedTarget))&&setTimeout(function(){return e.hourElement.select()},50)}function J(n){return function(a){var i=e.config["_"+n+"Date"]=e.parseDate(a,e.config.dateFormat),c=e.config["_"+(n==="min"?"max":"min")+"Date"];i!==void 0&&(e[n==="min"?"minDateHasTime":"maxDateHasTime"]=i.getHours()>0||i.getMinutes()>0||i.getSeconds()>0),e.selectedDates&&(e.selectedDates=e.selectedDates.filter(function(p){return f(p)}),!e.selectedDates.length&&n==="min"&&N(i),Ee()),e.daysContainer&&(st(),i!==void 0?e.currentYearElement[n]=i.getFullYear().toString():e.currentYearElement.removeAttribute(n),e.currentYearElement.disabled=!!c&&i!==void 0&&c.getFullYear()===i.getFullYear())}}function be(){var n=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],a=ie(ie({},JSON.parse(JSON.stringify(t.dataset||{}))),o),i={};e.config.parseDate=a.parseDate,e.config.formatDate=a.formatDate,Object.defineProperty(e.config,"enable",{get:function(){return e.config._enable},set:function(A){e.config._enable=ft(A)}}),Object.defineProperty(e.config,"disable",{get:function(){return e.config._disable},set:function(A){e.config._disable=ft(A)}});var c=a.mode==="time";if(!a.dateFormat&&(a.enableTime||c)){var p=re.defaultConfig.dateFormat||Fe.dateFormat;i.dateFormat=a.noCalendar||c?"H:i"+(a.enableSeconds?":S":""):p+" H:i"+(a.enableSeconds?":S":"")}if(a.altInput&&(a.enableTime||c)&&!a.altFormat){var x=re.defaultConfig.altFormat||Fe.altFormat;i.altFormat=a.noCalendar||c?"h:i"+(a.enableSeconds?":S K":" K"):x+(" h:i"+(a.enableSeconds?":S":"")+" K")}Object.defineProperty(e.config,"minDate",{get:function(){return e.config._minDate},set:J("min")}),Object.defineProperty(e.config,"maxDate",{get:function(){return e.config._maxDate},set:J("max")});var L=function(A){return function(G){e.config[A==="min"?"_minTime":"_maxTime"]=e.parseDate(G,"H:i:S")}};Object.defineProperty(e.config,"minTime",{get:function(){return e.config._minTime},set:L("min")}),Object.defineProperty(e.config,"maxTime",{get:function(){return e.config._maxTime},set:L("max")}),a.mode==="time"&&(e.config.noCalendar=!0,e.config.enableTime=!0),Object.assign(e.config,i,a);for(var k=0;k<n.length;k++)e.config[n[k]]=e.config[n[k]]===!0||e.config[n[k]]==="true";Xe.filter(function(A){return e.config[A]!==void 0}).forEach(function(A){e.config[A]=et(e.config[A]||[]).map(D)}),e.isMobile=!e.config.disableMobile&&!e.config.inline&&e.config.mode==="single"&&!e.config.disable.length&&!e.config.enable&&!e.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var k=0;k<e.config.plugins.length;k++){var H=e.config.plugins[k](e)||{};for(var E in H)Xe.indexOf(E)>-1?e.config[E]=et(H[E]).map(D).concat(e.config[E]):typeof a[E]>"u"&&(e.config[E]=H[E])}a.altInputClass||(e.config.altInputClass=Q().className+" "+e.config.altInputClass),ee("onParseConfig")}function Q(){return e.config.wrap?t.querySelector("[data-input]"):t}function fe(){typeof e.config.locale!="object"&&typeof re.l10ns[e.config.locale]>"u"&&e.config.errorHandler(new Error("flatpickr: invalid locale "+e.config.locale)),e.l10n=ie(ie({},re.l10ns.default),typeof e.config.locale=="object"?e.config.locale:e.config.locale!=="default"?re.l10ns[e.config.locale]:void 0),Ne.D="("+e.l10n.weekdays.shorthand.join("|")+")",Ne.l="("+e.l10n.weekdays.longhand.join("|")+")",Ne.M="("+e.l10n.months.shorthand.join("|")+")",Ne.F="("+e.l10n.months.longhand.join("|")+")",Ne.K="("+e.l10n.amPM[0]+"|"+e.l10n.amPM[1]+"|"+e.l10n.amPM[0].toLowerCase()+"|"+e.l10n.amPM[1].toLowerCase()+")";var n=ie(ie({},o),JSON.parse(JSON.stringify(t.dataset||{})));n.time_24hr===void 0&&re.defaultConfig.time_24hr===void 0&&(e.config.time_24hr=e.l10n.time_24hr),e.formatDate=kt(e),e.parseDate=rt({config:e.config,l10n:e.l10n})}function Pe(n){if(typeof e.config.position=="function")return void e.config.position(e,n);if(e.calendarContainer!==void 0){ee("onPreCalendarPosition");var a=n||e._positionElement,i=Array.prototype.reduce.call(e.calendarContainer.children,(function(Ut,Vt){return Ut+Vt.offsetHeight}),0),c=e.calendarContainer.offsetWidth,p=e.config.position.split(" "),x=p[0],L=p.length>1?p[1]:null,k=a.getBoundingClientRect(),H=window.innerHeight-k.bottom,E=x==="above"||x!=="below"&&H<i&&k.top>i,A=window.pageYOffset+k.top+(E?-i-2:a.offsetHeight+2);if(le(e.calendarContainer,"arrowTop",!E),le(e.calendarContainer,"arrowBottom",E),!e.config.inline){var G=window.pageXOffset+k.left,Ce=!1,de=!1;L==="center"?(G-=(c-k.width)/2,Ce=!0):L==="right"&&(G-=c-k.width,de=!0),le(e.calendarContainer,"arrowLeft",!Ce&&!de),le(e.calendarContainer,"arrowCenter",Ce),le(e.calendarContainer,"arrowRight",de);var He=window.document.body.offsetWidth-(window.pageXOffset+k.right),Ae=G+c>window.document.body.offsetWidth,Ot=He+c>window.document.body.offsetWidth;if(le(e.calendarContainer,"rightMost",Ae),!e.config.static)if(e.calendarContainer.style.top=A+"px",!Ae)e.calendarContainer.style.left=G+"px",e.calendarContainer.style.right="auto";else if(!Ot)e.calendarContainer.style.left="auto",e.calendarContainer.style.right=He+"px";else{var Ke=Re();if(Ke===void 0)return;var Rt=window.document.body.offsetWidth,Ht=Math.max(0,Rt/2-c/2),$t=".flatpickr-calendar.centerMost:before",jt=".flatpickr-calendar.centerMost:after",Yt=Ke.cssRules.length,Bt="{left:"+k.left+"px;right:auto;}";le(e.calendarContainer,"rightMost",!1),le(e.calendarContainer,"centerMost",!0),Ke.insertRule($t+","+jt+Bt,Yt),e.calendarContainer.style.left=Ht+"px",e.calendarContainer.style.right="auto"}}}}function Re(){for(var n=null,a=0;a<document.styleSheets.length;a++){var i=document.styleSheets[a];if(i.cssRules){try{i.cssRules}catch{continue}n=i;break}}return n??Mt()}function Mt(){var n=document.createElement("style");return document.head.appendChild(n),n.sheet}function st(){e.config.noCalendar||e.isMobile||(se(),Ue(),ve())}function Ge(){e._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(e.close,0):e.close()}function ct(n){n.preventDefault(),n.stopPropagation();var a=function(A){return A.classList&&A.classList.contains("flatpickr-day")&&!A.classList.contains("flatpickr-disabled")&&!A.classList.contains("notAllowed")},i=Et(pe(n),a);if(i!==void 0){var c=i,p=e.latestSelectedDateObj=new Date(c.dateObj.getTime()),x=(p.getMonth()<e.currentMonth||p.getMonth()>e.currentMonth+e.config.showMonths-1)&&e.config.mode!=="range";if(e.selectedDateElem=c,e.config.mode==="single")e.selectedDates=[p];else if(e.config.mode==="multiple"){var L=Ze(p);L?e.selectedDates.splice(parseInt(L),1):e.selectedDates.push(p)}else e.config.mode==="range"&&(e.selectedDates.length===2&&e.clear(!1,!1),e.latestSelectedDateObj=p,e.selectedDates.push(p),me(p,e.selectedDates[0],!0)!==0&&e.selectedDates.sort(function(A,G){return A.getTime()-G.getTime()}));if(U(),x){var k=e.currentYear!==p.getFullYear();e.currentYear=p.getFullYear(),e.currentMonth=p.getMonth(),k&&(ee("onYearChange"),se()),ee("onMonthChange")}if(Ue(),ve(),Ee(),!x&&e.config.mode!=="range"&&e.config.showMonths===1?C(c):e.selectedDateElem!==void 0&&e.hourElement===void 0&&e.selectedDateElem&&e.selectedDateElem.focus(),e.hourElement!==void 0&&e.hourElement!==void 0&&e.hourElement.focus(),e.config.closeOnSelect){var H=e.config.mode==="single"&&!e.config.enableTime,E=e.config.mode==="range"&&e.selectedDates.length===2&&!e.config.enableTime;(H||E)&&Ge()}V()}}var Be={locale:[fe,Te],showMonths:[Se,S,xe],minDate:[Z],maxDate:[Z],positionElement:[dt],clickOpens:[function(){e.config.clickOpens===!0?(T(e._input,"focus",e.open),T(e._input,"click",e.open)):(e._input.removeEventListener("focus",e.open),e._input.removeEventListener("click",e.open))}]};function St(n,a){if(n!==null&&typeof n=="object"){Object.assign(e.config,n);for(var i in n)Be[i]!==void 0&&Be[i].forEach(function(c){return c()})}else e.config[n]=a,Be[n]!==void 0?Be[n].forEach(function(c){return c()}):Xe.indexOf(n)>-1&&(e.config[n]=et(a));e.redraw(),Ee(!0)}function ut(n,a){var i=[];if(n instanceof Array)i=n.map(function(c){return e.parseDate(c,a)});else if(n instanceof Date||typeof n=="number")i=[e.parseDate(n,a)];else if(typeof n=="string")switch(e.config.mode){case"single":case"time":i=[e.parseDate(n,a)];break;case"multiple":i=n.split(e.config.conjunction).map(function(c){return e.parseDate(c,a)});break;case"range":i=n.split(e.l10n.rangeSeparator).map(function(c){return e.parseDate(c,a)});break}else e.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(n)));e.selectedDates=e.config.allowInvalidPreload?i:i.filter(function(c){return c instanceof Date&&f(c,!1)}),e.config.mode==="range"&&e.selectedDates.sort(function(c,p){return c.getTime()-p.getTime()})}function It(n,a,i){if(a===void 0&&(a=!1),i===void 0&&(i=e.config.dateFormat),n!==0&&!n||n instanceof Array&&n.length===0)return e.clear(a);ut(n,i),e.latestSelectedDateObj=e.selectedDates[e.selectedDates.length-1],e.redraw(),Z(void 0,a),N(),e.selectedDates.length===0&&e.clear(!1),Ee(a),a&&ee("onChange")}function ft(n){return n.slice().map(function(a){return typeof a=="string"||typeof a=="number"||a instanceof Date?e.parseDate(a,void 0,!0):a&&typeof a=="object"&&a.from&&a.to?{from:e.parseDate(a.from,void 0),to:e.parseDate(a.to,void 0)}:a}).filter(function(a){return a})}function _t(){e.selectedDates=[],e.now=e.parseDate(e.config.now)||new Date;var n=e.config.defaultDate||((e.input.nodeName==="INPUT"||e.input.nodeName==="TEXTAREA")&&e.input.placeholder&&e.input.value===e.input.placeholder?null:e.input.value);n&&ut(n,e.config.dateFormat),e._initialDate=e.selectedDates.length>0?e.selectedDates[0]:e.config.minDate&&e.config.minDate.getTime()>e.now.getTime()?e.config.minDate:e.config.maxDate&&e.config.maxDate.getTime()<e.now.getTime()?e.config.maxDate:e.now,e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth(),e.selectedDates.length>0&&(e.latestSelectedDateObj=e.selectedDates[0]),e.config.minTime!==void 0&&(e.config.minTime=e.parseDate(e.config.minTime,"H:i")),e.config.maxTime!==void 0&&(e.config.maxTime=e.parseDate(e.config.maxTime,"H:i")),e.minDateHasTime=!!e.config.minDate&&(e.config.minDate.getHours()>0||e.config.minDate.getMinutes()>0||e.config.minDate.getSeconds()>0),e.maxDateHasTime=!!e.config.maxDate&&(e.config.maxDate.getHours()>0||e.config.maxDate.getMinutes()>0||e.config.maxDate.getSeconds()>0)}function Tt(){if(e.input=Q(),!e.input){e.config.errorHandler(new Error("Invalid input element specified"));return}e.input._type=e.input.type,e.input.type="text",e.input.classList.add("flatpickr-input"),e._input=e.input,e.config.altInput&&(e.altInput=W(e.input.nodeName,e.config.altInputClass),e._input=e.altInput,e.altInput.placeholder=e.input.placeholder,e.altInput.disabled=e.input.disabled,e.altInput.required=e.input.required,e.altInput.tabIndex=e.input.tabIndex,e.altInput.type="text",e.input.setAttribute("type","hidden"),!e.config.static&&e.input.parentNode&&e.input.parentNode.insertBefore(e.altInput,e.input.nextSibling)),e.config.allowInput||e._input.setAttribute("readonly","readonly"),dt()}function dt(){e._positionElement=e.config.positionElement||e._input}function Pt(){var n=e.config.enableTime?e.config.noCalendar?"time":"datetime-local":"date";e.mobileInput=W("input",e.input.className+" flatpickr-mobile"),e.mobileInput.tabIndex=1,e.mobileInput.type=n,e.mobileInput.disabled=e.input.disabled,e.mobileInput.required=e.input.required,e.mobileInput.placeholder=e.input.placeholder,e.mobileFormatStr=n==="datetime-local"?"Y-m-d\\TH:i:S":n==="date"?"Y-m-d":"H:i:S",e.selectedDates.length>0&&(e.mobileInput.defaultValue=e.mobileInput.value=e.formatDate(e.selectedDates[0],e.mobileFormatStr)),e.config.minDate&&(e.mobileInput.min=e.formatDate(e.config.minDate,"Y-m-d")),e.config.maxDate&&(e.mobileInput.max=e.formatDate(e.config.maxDate,"Y-m-d")),e.input.getAttribute("step")&&(e.mobileInput.step=String(e.input.getAttribute("step"))),e.input.type="hidden",e.altInput!==void 0&&(e.altInput.type="hidden");try{e.input.parentNode&&e.input.parentNode.insertBefore(e.mobileInput,e.input.nextSibling)}catch{}T(e.mobileInput,"change",function(a){e.setDate(pe(a).value,!1,e.mobileFormatStr),ee("onChange"),ee("onClose")})}function Nt(n){if(e.isOpen===!0)return e.close();e.open(n)}function ee(n,a){if(e.config!==void 0){var i=e.config[n];if(i!==void 0&&i.length>0)for(var c=0;i[c]&&c<i.length;c++)i[c](e.selectedDates,e.input.value,e,a);n==="onChange"&&(e.input.dispatchEvent(qe("change")),e.input.dispatchEvent(qe("input")))}}function qe(n){var a=document.createEvent("Event");return a.initEvent(n,!0,!0),a}function Ze(n){for(var a=0;a<e.selectedDates.length;a++){var i=e.selectedDates[a];if(i instanceof Date&&me(i,n)===0)return""+a}return!1}function At(n){return e.config.mode!=="range"||e.selectedDates.length<2?!1:me(n,e.selectedDates[0])>=0&&me(n,e.selectedDates[1])<=0}function Ue(){e.config.noCalendar||e.isMobile||!e.monthNav||(e.yearElements.forEach(function(n,a){var i=new Date(e.currentYear,e.currentMonth,1);i.setMonth(e.currentMonth+a),e.config.showMonths>1||e.config.monthSelectorType==="static"?e.monthElements[a].textContent=ze(i.getMonth(),e.config.shorthandCurrentMonth,e.l10n)+" ":e.monthsDropdownContainer.value=i.getMonth().toString(),n.value=i.getFullYear().toString()}),e._hidePrevMonthArrow=e.config.minDate!==void 0&&(e.currentYear===e.config.minDate.getFullYear()?e.currentMonth<=e.config.minDate.getMonth():e.currentYear<e.config.minDate.getFullYear()),e._hideNextMonthArrow=e.config.maxDate!==void 0&&(e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth+1>e.config.maxDate.getMonth():e.currentYear>e.config.maxDate.getFullYear()))}function Je(n){var a=n||(e.config.altInput?e.config.altFormat:e.config.dateFormat);return e.selectedDates.map(function(i){return e.formatDate(i,a)}).filter(function(i,c,p){return e.config.mode!=="range"||e.config.enableTime||p.indexOf(i)===c}).join(e.config.mode!=="range"?e.config.conjunction:e.l10n.rangeSeparator)}function Ee(n){n===void 0&&(n=!0),e.mobileInput!==void 0&&e.mobileFormatStr&&(e.mobileInput.value=e.latestSelectedDateObj!==void 0?e.formatDate(e.latestSelectedDateObj,e.mobileFormatStr):""),e.input.value=Je(e.config.dateFormat),e.altInput!==void 0&&(e.altInput.value=Je(e.config.altFormat)),n!==!1&&ee("onValueUpdate")}function Lt(n){var a=pe(n),i=e.prevMonthNav.contains(a),c=e.nextMonthNav.contains(a);i||c?we(i?-1:1):e.yearElements.indexOf(a)>=0?a.select():a.classList.contains("arrowUp")?e.changeYear(e.currentYear+1):a.classList.contains("arrowDown")&&e.changeYear(e.currentYear-1)}function Ft(n){n.preventDefault();var a=n.type==="keydown",i=pe(n),c=i;e.amPM!==void 0&&i===e.amPM&&(e.amPM.textContent=e.l10n.amPM[ge(e.amPM.textContent===e.l10n.amPM[0])]);var p=parseFloat(c.getAttribute("min")),x=parseFloat(c.getAttribute("max")),L=parseFloat(c.getAttribute("step")),k=parseInt(c.value,10),H=n.delta||(a?n.which===38?1:-1:0),E=k+L*H;if(typeof c.value<"u"&&c.value.length===2){var A=c===e.hourElement,G=c===e.minuteElement;E<p?(E=x+E+ge(!A)+(ge(A)&&ge(!e.amPM)),G&&ne(void 0,-1,e.hourElement)):E>x&&(E=c===e.hourElement?E-x-ge(!e.amPM):p,G&&ne(void 0,1,e.hourElement)),e.amPM&&A&&(L===1?E+k===23:Math.abs(E-k)>L)&&(e.amPM.textContent=e.l10n.amPM[ge(e.amPM.textContent===e.l10n.amPM[0])]),c.value=ue(E)}}return I(),e}function Oe(t,o){for(var e=Array.prototype.slice.call(t).filter(function(D){return D instanceof HTMLElement}),m=[],I=0;I<e.length;I++){var d=e[I];try{if(d.getAttribute("data-fp-omit")!==null)continue;d._flatpickr!==void 0&&(d._flatpickr.destroy(),d._flatpickr=void 0),d._flatpickr=dn(d,o||{}),m.push(d._flatpickr)}catch(D){console.error(D)}}return m.length===1?m[0]:m}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(t){return Oe(this,t)},HTMLElement.prototype.flatpickr=function(t){return Oe([this],t)});var re=function(t,o){return typeof t=="string"?Oe(window.document.querySelectorAll(t),o):t instanceof Node?Oe([t],o):Oe(t,o)};re.defaultConfig={};re.l10ns={en:ie({},Ye),default:ie({},Ye)};re.localize=function(t){re.l10ns.default=ie(ie({},re.l10ns.default),t)};re.setDefaults=function(t){re.defaultConfig=ie(ie({},re.defaultConfig),t)};re.parseDate=rt({});re.formatDate=kt({});re.compareDates=me;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(t){return Oe(this,t)});Date.prototype.fp_incr=function(t){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof t=="string"?parseInt(t,10):t))};typeof window<"u"&&(window.flatpickr=re);var ht;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(ht||(ht={}));const pn=Object.freeze({x:0,y:0});var Le;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Le||(Le={}));var vt;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(vt||(vt={}));var he;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(he||(he={}));he.Space,he.Enter,he.Esc,he.Space,he.Enter,he.Tab;var bt;(function(t){t[t.RightClick=2]="RightClick"})(bt||(bt={}));var yt;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(yt||(yt={}));var xt;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(xt||(xt={}));Le.Backward+"",Le.Forward+"",Le.Backward+"",Le.Forward+"";var it;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(it||(it={}));var lt;(function(t){t.Optimized="optimized"})(lt||(lt={}));it.WhileDragging,lt.Optimized;({...pn});var wt;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(wt||(wt={}));he.Down,he.Right,he.Up,he.Left;class mn{constructor(o,e){this.reactRoot=null,this.value={library:"",value:""},this.$root=o,this.onChange=e,this.mount()}mount(){const o=document.createElement("div");o.className="fse-icon-picker-wrapper",this.$root.appendChild(o),this.reactRoot=Wt(o),this.render()}render(){this.reactRoot&&this.reactRoot.render(React.createElement(rn,{label:"",value:this.value,onChange:o=>{this.value=o,this.onChange(o)}}))}preview(){}openLibrary(){const o=this.$root.querySelector('button[title="Icon Library"]');o&&o.click()}uploadSVG(){const o=this.$root.querySelector('button[title="Upload SVG"]');o&&o.click()}destroy(){this.reactRoot&&(this.reactRoot.unmount(),this.reactRoot=null)}}window.Voxel_Icon_Picker=mn;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{console.log("Voxel Icon Picker (React) loaded")}):console.log("Voxel Icon Picker (React) loaded");
