import{createRoot as Zt}from"react-dom/client";import l,{createContext as Dt,useState as U,useEffect as we,useCallback as ye,useRef as lt,useMemo as Jt}from"react";import{__ as r}from"@wordpress/i18n";import{useSelect as kt}from"@wordpress/data";import{Button as tt}from"@wordpress/components";import je from"@wordpress/api-fetch";import"@wordpress/block-editor";/* empty css                           */import"react-dom";let pt=!1;function Kt(){if(pt)return;const t=window.wp?.hooks,o=window.wp?.compose;if(!t||!o){console.warn("VoxelFSE: wp.hooks or wp.compose not available");return}const{addFilter:e}=t,{createHigherOrderComponent:m}=o,x=m(f=>y=>{const{name:_,attributes:d}=y;if(!_.startsWith("voxel-fse/"))return React.createElement(f,{...y});const $={...y.wrapperProps},T={...$.style||{}};return d.stickyEnabled&&(d.stickyDesktop??"sticky")==="sticky"&&(T.position="sticky",T.zIndex="10",T.alignSelf="flex-start",d.stickyTop!==void 0&&(T.top=`${d.stickyTop}${d.stickyTopUnit||"px"}`),d.stickyLeft!==void 0&&(T.left=`${d.stickyLeft}${d.stickyLeftUnit||"px"}`),d.stickyRight!==void 0&&(T.right=`${d.stickyRight}${d.stickyRightUnit||"px"}`),d.stickyBottom!==void 0&&(T.bottom=`${d.stickyBottom}${d.stickyBottomUnit||"px"}`)),_==="voxel-fse/flex-container"&&d.contentWidthType==="full"&&($["data-content-width"]="full"),Object.keys(T).length>0&&($.style=T),$["data-content-width"]||Object.keys(T).length>0?React.createElement(f,{...y,wrapperProps:$}):React.createElement(f,{...y})},"withVoxelWrapperProps");e("editor.BlockListBlock","voxel-fse/editor-wrapper-props",x),pt=!0}Kt();Dt(null);typeof window<"u"&&(window.__voxelOpenPopups=window.__voxelOpenPopups||{});const Et=({groupType:t,exports:o,parentPath:e,onSelectTag:m,onLoadChildren:x,isSearchMode:f,autoExpandFirst:y=!1})=>{const[_,d]=U(""),[$,T]=U({}),[q,O]=U("");we(()=>{if(f&&y&&o.length>0){const b=o[0];b&&(b.type==="object"||b.type==="object-list"||b.type==="object_list")&&(b.hasChildren||b.children&&b.children.length>0)&&d(b.key)}},[f,y,o]);const R=o.map(b=>b.key).join(",");we(()=>{f||d("")},[R,f]);const W=ye(async b=>{const ee=_===b.key?"":b.key;if(d(ee),ee&&b.hasChildren&&!$[b.key]&&!(b.children&&b.children.length>0)&&x){const ae=e?`${e}.${b.key}`:`${t}.${b.key}`;O(b.key);try{const H=await x(t,`${t}.${ae.replace(`${t}.`,"")}`);T(te=>({...te,[b.key]:H||[]}))}catch(H){console.error(`Failed to load children for ${b.key}:`,H)}finally{O("")}}},[f,_,$,x,t,e]),P=ye(b=>{const ee=e?`${e}.${b.key}`:b.key;m(t,ee,b.type)},[t,e,m]);return l.createElement("ul",{style:{height:"auto"}},o.map(b=>{if((b.type==="object"||b.type==="object-list"||b.type==="object_list")&&(b.hasChildren||b.children&&b.children.length>0)){const H=_===b.key,te=b.children&&b.children.length>0?b.children:$[b.key]||[],re=q===b.key,oe=e?`${e}.${b.key}`:b.key;return l.createElement("li",{key:b.key,className:`is-group${H?" is-open":""}`},l.createElement("span",{onClick:()=>W(b)},b.label),H&&(re?l.createElement("ul",{style:{height:"auto"}},l.createElement("li",{className:"mw-tag-item__loading"},"Loading...")):te.length>0?l.createElement(Et,{groupType:t,exports:te,parentPath:oe,onSelectTag:m,onLoadChildren:x,isSearchMode:f,autoExpandFirst:y&&H}):null))}else{const H=b.type==="method";return l.createElement("li",{key:b.key},l.createElement("span",{draggable:!0,onClick:()=>P(b)},H&&l.createElement("i",{className:"las la-code"}),b.label))}}))},Qt=({group:t,isOpen:o,onToggle:e,onSelectTag:m,onLoadChildren:x,isSearchMode:f,autoExpandFirst:y})=>{const[_,d]=U(t.exports||[]),[$,T]=U(!1);return we(()=>{t.exports&&t.exports.length>0&&d(t.exports)},[t.exports]),we(()=>{o&&!f&&t.hasChildren&&_.length===0&&x&&!$&&(async()=>{T(!0);try{const q=await x(t.type);d(q)}catch(q){console.error(`Failed to auto-load children for ${t.type}:`,q)}finally{T(!1)}})()},[o,f,t.hasChildren,t.type]),l.createElement("li",{className:`is-group${o?" is-open":""}`},l.createElement("span",{onClick:e},t.label),o&&($?l.createElement("ul",{style:{height:"auto"}},l.createElement("li",{className:"mw-tag-group__loading"},"Loading...")):_.length>0?l.createElement(Et,{groupType:t.type,exports:_,parentPath:"",onSelectTag:m,onLoadChildren:x,isSearchMode:f,autoExpandFirst:y}):null))},Xt=({groups:t,searchQuery:o,onSelectTag:e,onLoadChildren:m})=>{const[x,f]=U(""),y=o.trim()!=="";we(()=>{t&&t.length>0?f(t[0].type):f("")},[t]);const _=ye(d=>{f($=>$===d?"":d)},[]);return!t||t.length===0?y?l.createElement("div",{className:"nvx-tagslist mw-tag-tree"},l.createElement("ul",null,l.createElement("li",null,"No results"))):l.createElement("div",{className:"mw-tag-tree mw-tag-tree--empty"},l.createElement("p",null,"No data groups available.")):l.createElement("div",{className:"nvx-tagslist mw-tag-tree"},l.createElement("ul",null,t.map((d,$)=>l.createElement(Qt,{key:`${d.type}-${y?"s":"n"}`,group:d,isOpen:x===d.type,onToggle:()=>_(d.type),onSelectTag:e,onLoadChildren:m,isSearchMode:y,autoExpandFirst:y&&$===0}))))},en=({value:t,onChange:o})=>l.createElement("div",{className:"ts-form-group"},l.createElement("input",{type:"text",value:t,onChange:e=>o(e.target.value),placeholder:"Search tags",autoComplete:"off"})),tn=({value:t,onChange:o,onTokenFocus:e,onInsertTag:m,context:x="post"})=>{const f=lt(null),y=lt(null),[_,d]=U(!1),[$,T]=U({top:0,left:0}),[q,O]=U(0),[R,W]=U([]),[P,b]=U(0),[ee,ae]=U("tag"),[H,te]=U(null),[re,oe]=U(null),[E,N]=U(!1),J=ye(w=>{if(!f.current)return;const k=f.current.selectionStart,v=t.substring(0,k),L=t.substring(k),c=v+w+L;o(c),setTimeout(()=>{if(f.current){const D=k+w.length;f.current.selectionStart=D,f.current.selectionEnd=D,f.current.focus()}},0)},[t,o]);we(()=>{m&&m(J)},[m,J]),we(()=>{_&&f.current&&setTimeout(()=>{if(f.current){const w=Ce(f.current,q);T(w)}},0)},[_,t,q]);const G=async()=>{if(H)return H;const w=window.VoxelFSE_Dynamic_Data_Store;if(w&&w.flatTags&&Array.isArray(w.flatTags)){const k=w.flatTags.map(v=>({group:v.group,key:v.key,label:v.label,fullPath:v.fullPath||`@${v.group}(${v.key})`,breadcrumb:v.breadcrumb||v.group}));return te(k),k}if(E)return new Promise(k=>{const v=setInterval(()=>{H&&(clearInterval(v),k(H))},100)});N(!0);try{const k=await je({path:`/voxel-fse/v1/dynamic-data/tags-flat?context=${x}`}),v=Array.isArray(k)?k.map(L=>({group:L.group,key:L.key,label:L.label,fullPath:L.fullPath||`@${L.group}(${L.key})`,breadcrumb:L.breadcrumb||L.group})):[];return te(v),N(!1),v}catch(k){return console.error("[CodeEditor] Failed to fetch tags:",k),N(!1),te([]),[]}},ie=async()=>{if(re)return re;const w=window.VoxelFSE_Dynamic_Data_Store;if(w&&w.modifiers&&Array.isArray(w.modifiers))return oe(w.modifiers),w.modifiers;try{const k=await je({path:"/voxel-fse/v1/dynamic-data/modifiers"});return oe(k),k}catch(k){return console.error("Failed to fetch modifiers for autocomplete:",k),[]}},Ce=(w,k)=>{const v=w.closest(".dtags-content");if(!v)return console.log("[getCursorCoordinates] No container found"),{top:0,left:0};const L=v.getBoundingClientRect(),c=document.createElement("div"),D=window.getComputedStyle(w);["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent","textAlign","lineHeight","whiteSpace","wordWrap","wordBreak","overflowWrap","padding","border","boxSizing","tabSize"].forEach(B=>{c.style[B]=D[B]}),c.style.position="absolute",c.style.visibility="hidden",c.style.width=`${w.clientWidth}px`,c.style.height="auto",c.style.top="0",c.style.left="0",c.style.overflow="hidden",c.style.pointerEvents="none";const g=w.value.substring(0,k),u=document.createTextNode(g);c.appendChild(u);const h=document.createElement("span");h.textContent="|",h.style.position="relative",c.appendChild(h),v.appendChild(c);const M=h.getBoundingClientRect();v.removeChild(c);const z=M.top-L.top+M.height+4,Y=M.left-L.left;return console.log("[getCursorCoordinates] Details:",{position:k,textBeforeCursor:g.substring(Math.max(0,g.length-20)),containerRect:{top:L.top,left:L.left},markerRect:{top:M.top,left:M.left,height:M.height},calculated:{top:z,left:Y},textareaScroll:{top:w.scrollTop,left:w.scrollLeft}}),{top:z,left:Y}},se=w=>{const{key:k}=w;if(_){if(k==="ArrowDown"){w.preventDefault(),b(v=>Math.min(v+1,R.length-1));return}if(k==="ArrowUp"){w.preventDefault(),b(v=>Math.max(v-1,0));return}if(k==="Enter"||k==="Tab"){w.preventDefault(),R[P]&&Ee(R[P]);return}if(k==="Escape"){w.preventDefault(),d(!1);return}}},ve=async w=>{if(o(w),!f.current)return;const k=f.current.selectionStart,v=w.substring(0,k);if(v.match(/@(\w*)$/)){console.log("[CodeEditor] @ detected in onChange, triggering autocomplete"),await Te(w);return}if(v.endsWith(".")&&v.charAt(k-2)===")"&&v.match(/@\w+\(/)){console.log("[CodeEditor] . after ) detected, triggering modifier autocomplete"),await De(w);return}_&&ke(w,k)},Te=async w=>{const k=w!==void 0?w:t;if(console.log("[CodeEditor] showTagAutocomplete() called"),!f.current){console.log("[CodeEditor] No textarea ref, aborting");return}const v=f.current.selectionStart,c=k.substring(0,v).match(/@(\w*)$/);if(!c){console.log("[CodeEditor] No @ match found, aborting");return}const D=c[1]||"";console.log("[CodeEditor] @ match found, query:",D);const g=await G();console.log("[CodeEditor] Total tags available:",g.length);const u=D?g.filter(h=>h.label.toLowerCase().includes(D.toLowerCase())||h.group.toLowerCase().includes(D.toLowerCase())||h.breadcrumb?.toLowerCase().includes(D.toLowerCase())):g;console.log("[CodeEditor] Filtered tags:",u.length),W(u),b(0),ae("tag"),d(u.length>0),console.log("[CodeEditor] showAutocomplete set to:",u.length>0),O(v)},De=async w=>{const k=w!==void 0?w:t;if(!f.current)return;const v=f.current.selectionStart,L=k.substring(0,v),c=L.lastIndexOf("@");if(c===-1)return;const D=L.substring(c),g=D.match(/\)\.(\w*)$/);if(!g)return;const u=g[1]||"",h=await ie();if(!h||h.length===0){console.log("[CodeEditor] No modifiers available");return}const M=D.match(/@(\w+)\(/),z=M?M[1]:null;console.log("[CodeEditor] Current group for modifiers:",z);const Y=Z=>Z?{post:[{key:"meta",label:"Post meta",category:"other",args:[{type:"text",label:"Meta key"}]}],author:[{key:"meta",label:"User meta",category:"other",args:[{type:"text",label:"Meta key"}]}],user:[{key:"meta",label:"User meta",category:"other",args:[{type:"text",label:"Meta key"}]}],site:[{key:"query_var",label:"Query variable",category:"other",args:[{type:"text",label:"Variable name"}]},{key:"math",label:"Math expression",category:"other",args:[{type:"text",label:"Math expression"}]}]}[Z]||[]:[],F=[...h,...Y(z)].map(Z=>{const fe=Z.args?.map(Ne=>Ne.label).join(", ")||"",ue=`.${Z.key}(${fe})`;return{key:Z.key,label:Z.label,category:Z.category||"other",code:`.${Z.key}()`,fullSignature:ue,description:Z.description}}),K=u?F.filter(Z=>Z.label.toLowerCase().includes(u.toLowerCase())||Z.key.toLowerCase().includes(u.toLowerCase())):F;W(K),b(0),ae("modifier"),d(!0),O(v)},ke=(w,k)=>{const v=w.substring(0,k);if(ee==="tag"){const L=v.match(/@(\w*)$/);if(!L){d(!1);return}const c=L[1]||"";if(H&&Array.isArray(H)){const D=H.map(u=>({group:u.group,key:u.key,label:u.label,fullPath:u.fullPath||`@${u.group}(${u.key})`,breadcrumb:u.breadcrumb||u.group})),g=c?D.filter(u=>u.label.toLowerCase().includes(c.toLowerCase())||u.group.toLowerCase().includes(c.toLowerCase())||u.breadcrumb?.toLowerCase().includes(c.toLowerCase())):D.slice(0,50);W(g),b(0)}}else if(ee==="modifier"){const L=v.lastIndexOf("@");if(L===-1){d(!1);return}const c=v.substring(L),D=c.match(/\)\.(\w*)$/);if(!D){d(!1);return}const g=D[1]||"";if(re&&Array.isArray(re)){const u=c.match(/@(\w+)\(/),h=u?u[1]:null,M=F=>F?{post:[{key:"meta",label:"Post meta",category:"other",args:[{type:"text",label:"Meta key"}]}],author:[{key:"meta",label:"User meta",category:"other",args:[{type:"text",label:"Meta key"}]}],user:[{key:"meta",label:"User meta",category:"other",args:[{type:"text",label:"Meta key"}]}],site:[{key:"query_var",label:"Query variable",category:"other",args:[{type:"text",label:"Variable name"}]},{key:"math",label:"Math expression",category:"other",args:[{type:"text",label:"Math expression"}]}]}[F]||[]:[],Y=[...re,...M(h)].map(F=>{const K=F.args?.map(fe=>fe.label).join(", ")||"",Z=`.${F.key}(${K})`;return{key:F.key,label:F.label,category:F.category||"other",code:`.${F.key}()`,fullSignature:Z,description:F.description}}),B=g?Y.filter(F=>F.label.toLowerCase().includes(g.toLowerCase())||F.key.toLowerCase().includes(g.toLowerCase())):Y;W(B),b(0)}}},Ee=w=>{if(console.log("[CodeEditor] handleSelectSuggestion called, type:",ee,"suggestion:",w),!f.current){console.log("[CodeEditor] No textarea ref, aborting");return}const k=f.current.selectionStart,v=t.substring(0,k),L=t.substring(k);if(console.log("[CodeEditor] Current value:",t),console.log("[CodeEditor] Text before cursor:",v),console.log("[CodeEditor] Text after cursor:",L),ee==="tag"){const c=w;if(console.log("[CodeEditor] Tag suggestion:",c),v.match(/@(\w*)$/)){const g=v.lastIndexOf("@"),u=t.substring(0,g)+c.fullPath+L;console.log("[CodeEditor] New text:",u),o(u),setTimeout(()=>{if(f.current){const h=g+c.fullPath.length;f.current.selectionStart=h,f.current.selectionEnd=h,f.current.focus()}},0)}else console.log("[CodeEditor] No @ match found in textBefore")}else if(ee==="modifier"){const c=w,D=v.lastIndexOf("."),u=t.substring(0,D)+c.code+L;o(u),setTimeout(()=>{if(f.current&&c.code.includes("()")){const h=D+c.code.length-1;f.current.selectionStart=h,f.current.selectionEnd=h,f.current.focus()}},0)}d(!1)},Ae=w=>{const k=w.split(`
`);return k.length===0||k.length===1&&k[0]===""?'<span class="ts-line"><span class="ts-line-number">1</span></span>':k.map((v,L)=>{const D=v.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/@(\w+)\(([^)]*)\)((?:\.\w+(?:\([^)]*\))?)*)/g,(g,u,h,M)=>{const z=h==="";let Y=M;return M&&(Y=M.replace(/\.(\w+)\(([^)]*)\)/g,(B,F,K)=>K?`.${F}(<span class="hl-group-arg">${K}</span>)`:`.${F}()`)),z?`<span class="hl-group">@${u}()${Y?`<span class="hl-group-mods">${Y}</span>`:""}</span>`:`<span class="hl-group">@${u}(<span class="hl-group-props">${h}</span>)${Y?`<span class="hl-group-mods">${Y}</span>`:""}</span>`});return`<span class="ts-line"><span class="ts-line-number">${L+1}</span>${D}</span>`}).join(`
`)},Me=w=>{const k=w.currentTarget,v=k.parentElement?.querySelector("pre");v&&(v.scrollTop=k.scrollTop,v.scrollLeft=k.scrollLeft)},Se=()=>{if(!f.current||!e)return;const w=f.current.selectionStart,k=/@(\w+)\(([^)]*)\)((?:\.\w+(?:\([^)]*\))?)*)/g;let v,L=0,c=!1;for(;(v=k.exec(t))!==null;){const g=v.index,u=v.index+v[0].length;if(w>=g&&w<=u){e(L),c=!0;break}L++}c||e(-1);const D=t.substring(0,w);D.endsWith(".")&&D.charAt(w-2)===")"&&D.match(/@\w+\(/)&&(console.log("[CodeEditor] Click detected after ), triggering modifier autocomplete"),De(t))};return we(()=>{if(!_)return;const w=v=>{v.target.closest(".dtags-ac")||(console.log("[CodeEditor] Click outside .dtags-ac, closing autocomplete"),d(!1))},k=setTimeout(()=>{document.addEventListener("click",w),console.log("[CodeEditor] Voxel-style click-outside listener attached")},50);return()=>{clearTimeout(k),document.removeEventListener("click",w),console.log("[CodeEditor] Voxel-style click-outside listener removed")}},[_]),console.log("[CodeEditor] Render - showAutocomplete:",_,"suggestions:",R.length),l.createElement("div",{className:"dtags-wrapper"},l.createElement("div",{className:"dtags-content"},l.createElement("pre",{className:"ts-snippet nvx-scrollable",dangerouslySetInnerHTML:{__html:Ae(t||"")}}),l.createElement("textarea",{ref:f,value:t,onChange:w=>ve(w.target.value),onKeyDown:se,onClick:Se,onKeyUp:Se,onScroll:Me,rows:4,className:"nvx-scrollable",placeholder:"Press @ to quickly add a tag, or pick one from the left sidebar",spellCheck:!1}),_&&R.length>0&&l.createElement("div",{ref:y,className:"dtags-ac nvx-scrollable",style:{top:`${$.top}px`,left:`${$.left}px`}},ee==="tag"?l.createElement("ul",{className:"nvx-quick-tags"},R.map((w,k)=>{const v=w;return l.createElement("li",{key:k,className:k===P?"is-active":"","data-result-index":k,title:`${v.breadcrumb} / ${v.label}`,onClick:()=>Ee(w),onMouseEnter:()=>b(k)},l.createElement("span",null,v.breadcrumb),l.createElement("p",null,v.label))})):l.createElement("ul",{className:"nvx-quick-tags nvx-insert-mod"},(()=>{const w=["text","number","date","other","control"],k={text:"Text",number:"Number",date:"Date",other:"Other",control:"Conditionals"},v=R.reduce((c,D)=>{const g=D;return c[g.category]||(c[g.category]=[]),c[g.category].push(g),c},{});let L=0;return w.map(c=>{if(!v[c])return null;const D=v[c];return l.createElement(l.Fragment,{key:c},l.createElement("li",{className:"vx-inert"},l.createElement("span",null,k[c])),D.map((g,u)=>{const h=L++,z=[h===P?"is-active":"",h===0?"first-item":""].filter(Boolean).join(" ");return l.createElement("li",{key:`${c}-${u}`,className:z,"data-result-index":h,title:g.label,onClick:()=>Ee(g)},l.createElement("p",null,g.label," ",l.createElement("code",null,g.fullSignature||g.code)))}))})})()))))},nn=({modifier:t,modifierDef:o,index:e,onUpdate:m,onRemove:x,isOpen:f,onToggle:y,onDragStart:_,onDragOver:d,onDrop:$})=>{if(!o)return null;const T=(O,R)=>{const W=[...t.args];W[O]=R,m(e,{...t,args:W})},q=o.args&&o.args.length>0;return l.createElement("div",{className:`nvx-mod${f?" mod-open":""}`,"data-draggable":"true",draggable:!0,onDragStart:()=>_(e),onDragOver:O=>d(O,e),onDrop:()=>$(e)},l.createElement("div",{className:"nvx-mod-title",onClick:()=>y(e)},o.label,l.createElement("button",{type:"button",className:"ts-button ts-outline icon-only",onClick:O=>{O.stopPropagation(),x(e)},title:"Remove modifier"},l.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{d:"M9.5 2C9.08579 2 8.75 2.33579 8.75 2.75C8.75 3.16421 9.08579 3.5 9.5 3.5H14.5C14.9142 3.5 15.25 3.16421 15.25 2.75C15.25 2.33579 14.9142 2 14.5 2H9.5Z",fill:"currentColor"}),l.createElement("path",{d:"M4 5C3.74924 5 3.51506 5.12533 3.37597 5.33397C3.23687 5.54262 3.21125 5.80699 3.3077 6.03846L4.44231 8.76154C4.4804 8.85294 4.5 8.95098 4.5 9.05V19.75C4.5 20.9926 5.50736 22 6.75 22H17.25C18.4926 22 19.5 20.9926 19.5 19.75V9.04978C19.5 8.95083 19.5196 8.85286 19.5576 8.76151L20.6914 6.03827C20.7878 5.8068 20.7621 5.54249 20.623 5.33389C20.4839 5.12529 20.2498 5 19.999 5H4ZM10.75 10.5V16.5C10.75 16.9142 10.4142 17.25 10 17.25C9.58579 17.25 9.25 16.9142 9.25 16.5V10.5C9.25 10.0858 9.58579 9.75 10 9.75C10.4142 9.75 10.75 10.0858 10.75 10.5ZM14.75 10.5V16.5C14.75 16.9142 14.4142 17.25 14 17.25C13.5858 17.25 13.25 16.9142 13.25 16.5V10.5C13.25 10.0858 13.5858 9.75 14 9.75C14.4142 9.75 14.75 10.0858 14.75 10.5Z",fill:"currentColor"})))),f&&l.createElement("div",{className:"nvx-mod-content"},q?o.args.map((O,R)=>l.createElement("div",{key:R,className:"ts-form-group"},l.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"5px"}},l.createElement("label",{style:{margin:0}},O.label),O.description&&l.createElement("span",{className:"vx-info-box"},l.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},l.createElement("path",{d:"M2 12.3906C2 6.86778 6.47715 2.39062 12 2.39062C17.5228 2.39062 22 6.86778 22 12.3906C22 17.9135 17.5228 22.3906 12 22.3906C6.47715 22.3906 2 17.9135 2 12.3906ZM11.9993 9.96045C12.4964 9.96045 12.9001 9.5575 12.9001 9.06045C12.9001 8.56339 12.4971 8.16045 12.0001 8.16045C11.503 8.16045 11.0993 8.56339 11.0993 9.06045C11.0993 9.5575 11.5023 9.96045 11.9993 9.96045ZM11.2501 15.8298C11.2501 16.244 11.5859 16.5798 12.0001 16.5798C12.4143 16.5798 12.7501 16.244 12.7501 15.8298V11.6054C12.7501 11.1912 12.4143 10.8554 12.0001 10.8554C11.5858 10.8554 11.2501 11.1912 11.2501 11.6054V15.8298Z",fill:"#343C54"})),l.createElement("p",null,O.description))),O.type==="select"?l.createElement("select",{value:t.args[R]||O.default||"",onChange:W=>T(R,W.target.value)},O.options?.map(W=>l.createElement("option",{key:W.value,value:W.value},W.label))):O.type==="number"?l.createElement("input",{type:"number",value:t.args[R]?.toString()||O.default?.toString()||"",onChange:W=>T(R,parseInt(W.target.value,10)||0)}):l.createElement("input",{type:"text",value:t.args[R]||O.default||"",onChange:W=>T(R,W.target.value)}))):l.createElement("div",{className:"ts-form-group"},l.createElement("p",null,"No additional settings."))))},an=({modifiers:t,availableModifiers:o,onUpdate:e,currentTag:m})=>{const[x,f]=U(""),[y,_]=U(new Set),[d,$]=U(null),T=E=>{if(!E){f("");return}const N=te.find(G=>G.key===E);if(!N){f("");return}const J={key:E,args:N.args?.map(G=>G.default||"")||[]};e([...t,J]),f("")},q=(E,N)=>{const J=[...t];J[E]=N,e(J)},O=E=>{const N=t.filter((G,ie)=>ie!==E),J=new Set;y.forEach(G=>{G<E?J.add(G):G>E&&J.add(G-1)}),_(J),e(N)},R=E=>{y.has(E)?_(new Set):_(new Set([E]))},W=E=>{$(E)},P=(E,N)=>{E.preventDefault()},b=E=>{if(d===null||d===E){$(null);return}const N=[...t],[J]=N.splice(d,1);N.splice(E,0,J);const G=new Set;y.forEach(ie=>{ie===d?G.add(E):ie>d&&ie<=E?G.add(ie-1):ie<d&&ie>=E?G.add(ie+1):G.add(ie)}),_(G),e(N),$(null)},ee=["text","number","date","other","control"],ae={text:"Text",number:"Number",date:"Date",other:"Other",control:"Conditionals"};console.log("[ModifierEditor] Available modifiers:",o),console.log("[ModifierEditor] First modifier:",o[0]),console.log("[ModifierEditor] Current tag:",m);const H=E=>({post:[{key:"meta",label:"Post meta",category:"other",args:[{type:"text",label:"Meta key",default:""}]}],author:[{key:"meta",label:"User meta",category:"other",args:[{type:"text",label:"Meta key",default:""}]}],user:[{key:"meta",label:"User meta",category:"other",args:[{type:"text",label:"Meta key",default:""}]}],site:[{key:"query_var",label:"Query variable",category:"other",args:[{type:"text",label:"Variable name",default:""}]},{key:"math",label:"Math expression",category:"other",args:[{type:"text",label:"Math expression",default:""}]}]})[E]||[],te=m?[...o,...H(m.group)]:o,re=te.reduce((E,N)=>{if(!N||typeof N.key!="string")return console.warn("[ModifierEditor] Invalid modifier object:",N),E;if(N.key==="then"||N.key==="else")return E;const J=N.category||"other";return E[J]||(E[J]=[]),E[J].push(N),E},{});console.log("[ModifierEditor] Modifiers by category:",re);const oe=()=>{if(!m?.breadcrumb)return null;const E=m.breadcrumb.split(" / "),N=[];return E.forEach((J,G)=>{N.push(l.createElement("span",{key:`part-${G}`},J)),G<E.length-1&&N.push(l.createElement("span",{key:`sep-${G}`}," / "))}),N};return l.createElement(l.Fragment,null,l.createElement("div",{className:"mod-head"},l.createElement("h3",null,m?.property?(()=>{const E=m.property.startsWith(":")?m.property.slice(1):m.property;return E.charAt(0).toUpperCase()+E.slice(1).replace(/_/g," ")})():"Select a tag"),l.createElement("div",{className:"nvx-placeholder nvx-tag-path"},oe())),l.createElement("div",{className:"ts-form-group"},l.createElement("select",{value:x,onChange:E=>T(E.target.value),disabled:!m},l.createElement("option",{value:"",disabled:!0},"Add a mod"),ee.map(E=>re[E]?l.createElement("optgroup",{key:E,label:ae[E]},re[E].map(N=>{const J=typeof N.key=="string"?N.key:String(N.key||"");return console.log("[ModifierEditor] Rendering modifier:",{key:N.key,keyValue:J,label:N.label}),l.createElement("option",{key:J,value:J},N.label)})):null))),t.length>0&&l.createElement("div",{className:"nvx-divider"}),t.length>0&&l.createElement("div",{className:"nvx-mod-list"},t.map((E,N)=>{const J=te.find(G=>G.key===E.key);return l.createElement(nn,{key:N,modifier:E,modifierDef:J,index:N,onUpdate:q,onRemove:O,isOpen:y.has(N),onToggle:R,onDragStart:W,onDragOver:P,onDrop:b})})))};function Mt(t){const o=t("core/edit-site");if(o){const m=o.getEditedPostId?.();if(typeof m=="string")return m}const e=t("core/editor");if(e){const m=e.getCurrentPost?.();if(m?.slug)return m.slug}return""}function on(){return kt(t=>{const o=Mt(t);return o.includes("term_card")?"term":o.includes("user_card")?"user":"post"},[])}function rn(){return kt(t=>{const e=Mt(t).match(/voxel-([a-z0-9_-]+)-(?:single|card)/);if(e&&!e[1].includes("term_")&&!e[1].includes("user_"))return e[1]},[])}function St(t,o,e,m,x=0){return x>5?t:t.map(f=>{if(!f.hasChildren&&!(f.children&&f.children.length>0))return f;const y=e?`${e}.${f.key}`:`${o}.${f.key}`,_=`${o}:${y}`,d=m[_],$=d&&d.length>0?St(d,o,y,m,x+1):f.children||[];return{...f,children:$,isLoaded:$.length>0}})}function It(t,o,e=[]){const m=[];for(const x of t){const f=[...e,x.label];if(x.children&&x.children.length>0){const y=It(x.children,o,f);y.length>0&&m.push({...x,children:y})}else(x.label.toLowerCase().includes(o)||x.key.toLowerCase().includes(o)||f.join(" ").toLowerCase().includes(o))&&m.push(x)}return m}const ln=({value:t,onChange:o,label:e="Dynamic Content",context:m="post",onClose:x,autoOpen:f=!1})=>{const y=on(),_=m==="post"?y:m,d=rn(),[$,T]=U(f),[q,O]=U(t),[R,W]=U(""),[P,b]=U([]),[ee,ae]=U([]),[H,te]=U(null),[re,oe]=U([]),[E,N]=U(null),[J,G]=U(!1),[ie,Ce]=U(null),[se,ve]=U({}),[Te,De]=U(!1),ke=l.useRef(null),Ee=Jt(()=>{if(!R.trim())return[];if(!Te)return[];const u=R.trim().toLowerCase(),h=window.VoxelFSE_Dynamic_Data_Store,M={};h?.groupChildren&&Object.assign(M,h.groupChildren),Object.assign(M,se);const z=[];for(const Y of P){const B=M[Y.type]||Y.exports||[];if(B.length===0)continue;const F=St(B,Y.type,null,M,0),K=It(F,u,[Y.label]);K.length!==0&&z.push({...Y,exports:K,isLoaded:!0})}return z},[R,P,se,Te]);we(()=>{$&&Ae()},[$,_,d]);const Ae=()=>{ve({}),De(!1);const u=window.VoxelFSE_Dynamic_Data_Store;if(d){u?.modifiers&&ae(u.modifiers),Me();return}if(u){const M=u.groupsByContext?.[_]||u.groups||[];b(M),ae(u.modifiers||[]),De(!0)}else Me()},Me=async()=>{G(!0),Ce(null);try{const u=d?`&post_type=${d}`:"",h=await je({path:`/voxel-fse/v1/dynamic-data/groups?context=${_}${u}`});b(h||[]);const M=await je({path:"/voxel-fse/v1/dynamic-data/modifiers"});ae(M||[]),G(!1),d&&h?Se(h).then(()=>{De(!0)}):De(!0)}catch(u){Ce("Failed to load data groups. Please try again."),console.error("Failed to fetch data groups:",u),G(!1)}},Se=async u=>{const h=d?`&post_type=${d}`:"",M={},z=async(B,F,K)=>{if(K>3)return;const Z=F?`${B}:${F}`:B;if(M[Z]||se[Z])return;const fe=F?`/voxel-fse/v1/dynamic-data/groups?group=${B}&parent=${F}${h}`:`/voxel-fse/v1/dynamic-data/groups?group=${B}${h}`;try{const ue=await je({path:fe});if(!ue||ue.length===0)return;M[Z]=ue;const Ne=[];for(const Oe of ue)if(Oe.hasChildren&&Oe.key){const Ie=F?`${F}.${Oe.key}`:`${B}.${Oe.key}`;Ne.push(z(B,Ie,K+1))}await Promise.all(Ne)}catch{}},Y=u.map(B=>z(B.type,null,0));await Promise.all(Y),Object.keys(M).length>0&&ve(B=>({...B,...M}))},w=async(u,h)=>{const M=h?`${u}:${h}`:u;if(se[M])return console.log(`[fetchGroupChildren] Using cached children for ${M}`),se[M];const z=window.VoxelFSE_Dynamic_Data_Store,Y=u==="post"||h&&h.startsWith("post.");if(z?.groupChildren?.[M]&&!(d&&Y)){console.log(`[fetchGroupChildren] Loading children from global store for ${M} (instant!)`);const B=z.groupChildren[M];return ve(F=>({...F,[M]:B})),h||b(F=>F.map(K=>K.type===u?{...K,exports:B||[],isLoaded:!0}:K)),B}console.log(`[fetchGroupChildren] Fetching children from API for ${M}...`);try{const B=d?`&post_type=${d}`:"",F=h?`/voxel-fse/v1/dynamic-data/groups?group=${u}&parent=${h}${B}`:`/voxel-fse/v1/dynamic-data/groups?group=${u}${B}`,K=await je({path:F});return console.log(`[fetchGroupChildren] Loaded ${K?.length||0} children for ${M}`),ve(Z=>({...Z,[M]:K||[]})),b(Z=>Z.map(fe=>fe.type===u&&!h?{...fe,exports:K||[],isLoaded:!0}:fe)),K||[]}catch(B){return console.error(`Failed to fetch children for ${u}:`,B),ve(F=>({...F,[M]:[]})),[]}},k=(u,h,M)=>{const z=M==="method"?`@${u}().${h}()`:`@${u}(${h})`;ke.current?ke.current(z):O(Y=>Y+(Y?" ":"")+z)},v=(u,h)=>{const M=/@(\w+)\(([^)]*)\)((?:\.\w+(?:\([^)]*\))?)*)/g;let z,Y=0;for(;(z=M.exec(u))!==null;){if(Y===h){const B=z[1],F=z[2],K=z[3]||"",Z=[],fe=/\.(\w+)(?:\(([^)]*)\))?/g;let ue;for(;(ue=fe.exec(K))!==null;){const Ie=ue[1],Pe=ue[2]||"",Ge=Pe?Pe.split(",").map($e=>$e.trim()):[];Z.push({key:Ie,args:Ge})}const Ne=Ie=>{const Pe=Ie.startsWith(":")?Ie.slice(1):Ie;return Pe.charAt(0).toUpperCase()+Pe.slice(1).replace(/_/g," ")},Oe=`${Ne(B)} / ${Ne(F)}`;return{group:B,property:F,breadcrumb:Oe,modifiers:Z}}Y++}return null},L=u=>{te(u);const h=v(q,u);h?(N({group:h.group,property:h.property,breadcrumb:h.breadcrumb}),oe(h.modifiers)):(N(null),oe([]))},c=u=>{if(oe(u),H===null||H<0||!E)return;const h=/@(\w+)\(([^)]*)\)((?:\.\w+(?:\([^)]*\))?)*)/g;let M,z=0,Y=q;for(;(M=h.exec(q))!==null;){if(z===H){const B=M[1],F=M[2];let K=`@${B}(${F})`;u.length>0&&u.forEach(Z=>{K+=`.${Z.key}`,Z.args&&Z.args.length>0?K+=`(${Z.args.join(", ")})`:K+="()"}),Y=q.substring(0,M.index)+K+q.substring(M.index+M[0].length),O(Y);return}z++}O(Y)},D=()=>{o(q),T(!1),x&&x()},g=()=>{O(t),T(!1),x&&x()};return we(()=>{if(!$)return;const u="voxel-backend-css-dynamic";if(document.getElementById(u))return;const h=document.createElement("link");h.id=u,h.rel="stylesheet",h.href="/wp-content/themes/voxel/assets/dist/backend.css",document.head.appendChild(h)},[$]),l.createElement(l.Fragment,null,l.createElement("div",{className:"mw-dynamic-tag-builder-trigger"},l.createElement("button",{type:"button",className:"components-button is-secondary",onClick:()=>T(!0)},l.createElement("span",{className:"dashicons dashicons-tag"}),e),t&&l.createElement("div",{className:"mw-dynamic-tag-builder-trigger__preview"},l.createElement("code",null,t))),$&&l.createElement("div",{className:"nvx-editor"},l.createElement("div",{className:"nvx-topbar"},l.createElement("div",{className:"nvx-topbar__title nvx-flex nvx-v-center"},l.createElement("h2",null,"Dynamic data")),l.createElement("div",{className:"nvx-topbar__buttons nvx-flex nvx-v-center"},l.createElement("button",{type:"button",className:"ts-button ts-outline",onClick:g},"Discard"),l.createElement("button",{type:"button",className:"ts-button btn-shadow ts-save-settings",onClick:D},l.createElement("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{d:"M3.25 5.5C3.25 4.25736 4.25736 3.25 5.5 3.25H15.3809C15.977 3.25 16.5488 3.48658 16.9707 3.90779L20.0897 7.02197C20.5124 7.44403 20.7499 8.01685 20.7499 8.61418L20.7499 18.5C20.7499 19.7426 19.7425 20.75 18.4999 20.75H16.75V16.25C16.75 15.0074 15.7426 14 14.5 14L9.5 14C8.25736 14 7.25 15.0074 7.25 16.25L7.25001 20.75H5.5C4.25736 20.75 3.25 19.7426 3.25 18.5V5.5ZM8 6.25C7.58579 6.25 7.25 6.58579 7.25 7C7.25 7.41421 7.58579 7.75 8 7.75H12C12.4142 7.75 12.75 7.41421 12.75 7C12.75 6.58579 12.4142 6.25 12 6.25H8Z",fill:"currentColor"}),l.createElement("path",{d:"M8.75001 20.75L15.25 20.75V16.25C15.25 15.8358 14.9142 15.5 14.5 15.5L9.5 15.5C9.08579 15.5 8.75 15.8358 8.75 16.25L8.75001 20.75Z",fill:"currentColor"})),"Save"))),ie&&l.createElement("div",{className:"mw-dynamic-tag-builder__error"},ie),J?l.createElement("div",{className:"mw-dynamic-tag-builder__loading"},"Loading..."):l.createElement("div",{className:"nvx-editor-body"},l.createElement("div",{className:"nvx-left-sidebar nvx-scrollable"},l.createElement(en,{value:R,onChange:W}),l.createElement(Xt,{groups:R.trim()?Ee:P,searchQuery:R,onSelectTag:k,onLoadChildren:w})),l.createElement("div",{className:"nvx-main"},l.createElement("div",{className:"nvx-visual-editor"},l.createElement(tn,{value:q,onChange:O,onTokenFocus:L,onInsertTag:u=>{ke.current=u}}))),l.createElement("div",{className:"nvx-right-sidebar nvx-scrollable"},H!==null&&H>=0&&E?l.createElement(an,{modifiers:re,availableModifiers:ee,onUpdate:c,currentTag:E}):l.createElement("div",{className:"nvx-placeholder placeholder-all-center"},l.createElement("svg",{width:"80",height:"80",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{d:"M11.5811 3.06348C11.5811 2.81389 11.4569 2.58066 11.2498 2.44129C11.0428 2.30193 10.78 2.27469 10.5487 2.36864C8.65206 3.13926 7.3125 5.00074 7.3125 7.17688C7.3125 9.16904 8.43512 10.8975 10.0801 11.7667V20.0655C10.0801 21.3082 11.0874 22.3155 12.3301 22.3155H12.6701C13.9128 22.3155 14.9201 21.3082 14.9201 20.0655V11.7673C16.5657 10.8983 17.6888 9.16949 17.6888 7.17688C17.6888 5.00111 16.3497 3.13989 14.4535 2.36904C14.2223 2.27503 13.9595 2.30223 13.7524 2.44159C13.5453 2.58095 13.4211 2.8142 13.4211 3.06382V6.24913C13.4211 6.66334 13.0853 6.99913 12.6711 6.99913H12.3311C11.9168 6.99913 11.5811 6.66334 11.5811 6.24913V3.06348Z",fill:"#343C54"})),l.createElement("p",null,"Click on a tag to view options"))))))};function sn({onClick:t,title:o=r("Enable Voxel tags","voxel-fse")}){return React.createElement("button",{type:"button",className:"voxel-fse-enable-tags",onClick:t,title:o},React.createElement("span",{className:"voxel-fse-enable-tags__icon"}))}r("Blue","voxel-fse"),r("Purple","voxel-fse"),r("Orange","voxel-fse"),r("White","voxel-fse"),r("Black","voxel-fse"),r("Light Gray","voxel-fse"),r("Gray","voxel-fse"),r("Dark Gray","voxel-fse"),r("Navy","voxel-fse"),r("Dark Blue","voxel-fse"),r("Dark Purple","voxel-fse"),r("Cyan","voxel-fse"),r("Teal","voxel-fse"),r("Green","voxel-fse"),r("Red","voxel-fse");r("None","voxel-fse"),r("Fading","voxel-fse"),r("Fade In","voxel-fse"),r("Fade In Down","voxel-fse"),r("Fade In Left","voxel-fse"),r("Fade In Right","voxel-fse"),r("Fade In Up","voxel-fse"),r("Zooming","voxel-fse"),r("Zoom In","voxel-fse"),r("Zoom In Down","voxel-fse"),r("Zoom In Left","voxel-fse"),r("Zoom In Right","voxel-fse"),r("Zoom In Up","voxel-fse"),r("Bouncing","voxel-fse"),r("Bounce In","voxel-fse"),r("Bounce In Down","voxel-fse"),r("Bounce In Left","voxel-fse"),r("Bounce In Right","voxel-fse"),r("Bounce In Up","voxel-fse"),r("Sliding","voxel-fse"),r("Slide In Down","voxel-fse"),r("Slide In Left","voxel-fse"),r("Slide In Right","voxel-fse"),r("Slide In Up","voxel-fse"),r("Rotating","voxel-fse"),r("Rotate In","voxel-fse"),r("Rotate In Down Left","voxel-fse"),r("Rotate In Down Right","voxel-fse"),r("Rotate In Up Left","voxel-fse"),r("Rotate In Up Right","voxel-fse"),r("Attention Seekers","voxel-fse"),r("Bounce","voxel-fse"),r("Flash","voxel-fse"),r("Pulse","voxel-fse"),r("Rubber Band","voxel-fse"),r("Shake","voxel-fse"),r("Head Shake","voxel-fse"),r("Swing","voxel-fse"),r("Tada","voxel-fse"),r("Wobble","voxel-fse"),r("Jello","voxel-fse"),r("Light Speed","voxel-fse"),r("Light Speed In","voxel-fse"),r("Specials","voxel-fse"),r("Roll In","voxel-fse");r("Default","voxel-fse"),r("None","voxel-fse"),r("Solid","voxel-fse"),r("Double","voxel-fse"),r("Dotted","voxel-fse"),r("Dashed","voxel-fse"),r("Groove","voxel-fse");r("Default","voxel-fse"),r("Full Width","voxel-fse")+"",r("Inline","voxel-fse")+"",r("Custom","voxel-fse");r("Default","voxel-fse"),r("Absolute","voxel-fse"),r("Fixed","voxel-fse");r("Circle","voxel-fse"),r("Oval Vertical","voxel-fse"),r("Oval Horizontal","voxel-fse"),r("Pill Vertical","voxel-fse"),r("Pill Horizontal","voxel-fse"),r("Triangle","voxel-fse"),r("Diamond","voxel-fse"),r("Pentagon","voxel-fse"),r("Hexagon Vertical","voxel-fse"),r("Hexagon Horizontal","voxel-fse"),r("Heptagon","voxel-fse"),r("Octagon","voxel-fse"),r("Parallelogram Right","voxel-fse"),r("Parallelogram Left","voxel-fse"),r("Trapezoid Up","voxel-fse"),r("Trapezoid Down","voxel-fse"),r("Flower","voxel-fse"),r("Sketch","voxel-fse"),r("Hexagon Donut","voxel-fse"),r("Blob","voxel-fse");r("Fit","voxel-fse"),r("Fill","voxel-fse"),r("Custom","voxel-fse");r("Center Center","voxel-fse"),r("Center Left","voxel-fse"),r("Center Right","voxel-fse"),r("Top Center","voxel-fse"),r("Top Left","voxel-fse"),r("Top Right","voxel-fse"),r("Bottom Center","voxel-fse"),r("Bottom Left","voxel-fse"),r("Bottom Right","voxel-fse"),r("Custom","voxel-fse");r("No-repeat","voxel-fse"),r("Repeat","voxel-fse"),r("Repeat-x","voxel-fse"),r("Repeat-y","voxel-fse"),r("Round","voxel-fse"),r("Space","voxel-fse");r("Select an option","voxel-fse"),r("Is empty","voxel-fse"),r("Is not empty","voxel-fse"),r("Is equal to","voxel-fse"),r("Is not equal to","voxel-fse"),r("Is greater than","voxel-fse"),r("Is less than","voxel-fse"),r("Is between","voxel-fse"),r("Is checked","voxel-fse"),r("Is unchecked","voxel-fse"),r("Contains","voxel-fse"),r("Does not contain","voxel-fse");const cn=[{key:"countries",label:r("Top countries","voxel-fse"),type:"object-list"},{key:"ref_domains",label:r("Top referrers (domains)","voxel-fse"),type:"object-list"},{key:"ref_urls",label:r("Top referrers (URLs)","voxel-fse"),type:"object-list"},{key:"browsers",label:r("Top browsers","voxel-fse"),type:"object-list"},{key:"platforms",label:r("Top platforms","voxel-fse"),type:"object-list"},{key:"devices",label:r("Devices","voxel-fse"),type:"object-list"}];r("Post","voxel-fse"),r("Visit stats","voxel-fse"),r("Author","voxel-fse"),r("Role","voxel-fse"),r("User","voxel-fse"),r("Role","voxel-fse");r("Blue","voxel-fse"),r("Purple","voxel-fse"),r("Orange","voxel-fse"),r("White","voxel-fse"),r("Black","voxel-fse"),r("Light Gray","voxel-fse"),r("Gray","voxel-fse"),r("Dark Gray","voxel-fse"),r("Navy","voxel-fse"),r("Dark Blue","voxel-fse"),r("Dark Purple","voxel-fse"),r("Cyan","voxel-fse"),r("Teal","voxel-fse"),r("Green","voxel-fse"),r("Red","voxel-fse");r("Default","voxel-fse"),r("System Font","voxel-fse");const fn=({label:t,value:o,onChange:e,supportsDynamicTags:m=!0,dynamicTagContext:x="post",showSelectedIcon:f=!1})=>{const y={library:o?.library||"",value:o?.value||""},_=c=>c?!["","svg","dynamic"].includes(c):!1,[d,$]=U(!1),[T,q]=U({}),[O,R]=U({}),[W,P]=U(""),[b,ee]=U(""),[ae,H]=U({}),te=lt(null),[re,oe]=U(!1),E=()=>{const c=y.value;return typeof c=="string"&&c.startsWith("@tags()")&&c.includes("@endtags()")},N=()=>{if(!E())return y.value||"";const c=y.value.match(/@tags\(\)(.*?)@endtags\(\)/s);return c?c[1]:y.value},J=c=>c?`@tags()${c}@endtags()`:"",G=()=>{oe(!0)},ie=()=>{window.confirm(r("Are you sure?","voxel-fse"))&&e({library:"",value:""})},Ce=c=>{c&&e({library:"dynamic",value:J(c)}),oe(!1)},se=E(),ve=typeof window<"u"&&window.wp&&window.wp.media;we(()=>{if(d&&window.Voxel_Icon_Picker_Config&&!W){const c=window.Voxel_Icon_Picker_Config,D=Object.keys(c)[0];D&&P(D)}},[d,W]);const Te=ye(()=>{e({library:"",value:""})},[e]),De=ye(()=>{if(!ve||!window.wp?.media){console.warn("WordPress media library not available");return}const c=window.wp.media({title:r("Select SVG Icon","voxel-fse"),button:{text:r("Select","voxel-fse")},multiple:!1,library:{type:"image/svg+xml"}});c.on("select",()=>{const g=c.state().get("selection").first().toJSON();g&&g.url&&e({library:"svg",value:g.url})}),c.open()},[ve,e]),ke=ye(async(c,D)=>{if(!(T[c]||O[c]||!D.fetchJson)){R(g=>({...g,[c]:!0}));try{const g=await fetch(D.fetchJson);if(g.ok){const u=await g.json();let h=[];if(Array.isArray(u))h=u;else if(u&&typeof u=="object"){const M=u;h=M.icons||M.list||[]}q(M=>({...M,[c]:h}))}}catch(g){console.warn(`Failed to load icon list for ${c}:`,g)}finally{R(g=>{const u={...g};return delete u[c],u})}}},[T,O]),Ee=ye(c=>{if(ee(c),!c.trim()){H({});return}const D=window.Voxel_Icon_Picker_Config;if(!D)return;const g={},u=c.toLowerCase();Object.entries(D).forEach(([h,M])=>{const Y=(T[h]||M.list||[]).filter(B=>B.toLowerCase().includes(u));Y.length>0&&(g[h]=Y)}),H(g)},[T]);we(()=>{if(d){if(!document.getElementById("vx-backend-css-dynamic")){const c=document.querySelector('link[href*="backend.css"]');let D="";c&&c.href?D=c.href:D=`${window.location.origin}/wp-content/themes/voxel/assets/dist/backend.css`;const g=document.createElement("link");g.id="vx-backend-css-dynamic",g.rel="stylesheet",g.href=D,g.media="all",document.head.appendChild(g)}}else{const c=document.getElementById("vx-backend-css-dynamic");c&&c.remove()}},[d]);const Ae=ye(()=>{if(!window.Voxel_Icon_Picker_Config){console.warn("Voxel icon picker config not available");return}$(!0),ee(""),H({});const c=window.Voxel_Icon_Picker_Config;Object.entries(c).forEach(([D,g])=>{g.fetchJson&&ke(D,g)})},[ke]),Me=ye(()=>{$(!1),ee(""),H({}),P("")},[]),Se=ye(c=>{P(c),ee(""),H({})},[]),w=ye((c,D)=>{const g=window.Voxel_Icon_Picker_Config;if(!g||!g[D])return;const u=g[D],h=`${u.displayPrefix} ${u.prefix}${c}`;e({library:"icon",value:h}),Me()},[e,Me]),v=!window.Voxel_Icon_Picker_Config||!W?null:window.Voxel_Icon_Picker_Config[W],L=v?T[W]||v.list||[]:[];return l.createElement("div",{className:"voxel-icon-picker-control",style:{marginBottom:"16px"}},l.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"}},l.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},m&&l.createElement(sn,{onClick:G}),l.createElement("label",{style:{fontWeight:500,margin:0}},t))),se?l.createElement("div",{className:"edit-voxel-tags",style:{backgroundColor:"rgb(47, 47, 49)",borderRadius:"10px",overflow:"hidden",padding:"12px"}},l.createElement("div",{style:{marginBottom:"12px"}},l.createElement("span",{style:{color:"#fff",fontSize:"13px",fontFamily:"inherit",wordBreak:"break-all"}},N())),l.createElement("div",{style:{height:"1px",backgroundColor:"rgba(255, 255, 255, 0.15)",marginBottom:"8px"}}),l.createElement("div",{style:{display:"flex"}},l.createElement("button",{type:"button",className:"edit-tags",onClick:G,style:{flex:1,background:"transparent",border:"none",color:"rgba(255, 255, 255, 0.8)",fontSize:"10px",fontWeight:600,letterSpacing:"0.5px",cursor:"pointer",padding:"6px 0",textAlign:"left"}},r("EDIT TAGS","voxel-fse")),l.createElement("button",{type:"button",className:"disable-tags",onClick:ie,style:{flex:1,background:"transparent",border:"none",color:"rgba(255, 255, 255, 0.5)",fontSize:"10px",fontWeight:600,letterSpacing:"0.5px",cursor:"pointer",padding:"6px 0",textAlign:"right"}},r("DISABLE TAGS","voxel-fse")))):l.createElement(l.Fragment,null,l.createElement("style",null,`
						.voxel-icon-picker-control .voxel-icon-btn-active.components-button {
							background-color: var(--wp-components-color-accent, var(--wp-admin-theme-color, #3858e9)) !important;
							color: #fff !important;
						}
						.voxel-icon-picker-control .voxel-icon-picker-btn.components-button {
							min-width: 36px !important;
							width: 36px !important;
							height: 36px !important;
							padding: 0 !important;
							display: flex !important;
							align-items: center !important;
							justify-content: center !important;
							overflow: visible !important;
						}
						.voxel-icon-picker-control .voxel-icon-picker-btn.components-button i {
							font-size: 16px !important;
							line-height: 1 !important;
							width: auto !important;
							height: auto !important;
						}
					`),l.createElement("div",{style:{display:"flex",gap:"4px",alignItems:"center"}},l.createElement(tt,{variant:y.library===""?"primary":"secondary",onClick:Te,title:r("None","voxel-fse"),className:`voxel-icon-picker-btn ${y.library===""?"voxel-icon-btn-active":""}`},l.createElement("i",{className:"eicon-ban","aria-hidden":"true"})),l.createElement(tt,{variant:y.library==="svg"?"primary":"secondary",onClick:De,title:r("Upload SVG","voxel-fse"),className:`voxel-icon-picker-btn ${y.library==="svg"?"voxel-icon-btn-active":""}`},l.createElement("i",{className:"eicon-upload","aria-hidden":"true"})),l.createElement(tt,{variant:_(y.library)?"primary":"secondary",onClick:Ae,title:r("Icon Library","voxel-fse"),className:`voxel-icon-picker-btn ${_(y.library)?"voxel-icon-btn-active":""}`},(f||_(y.library))&&y.value?l.createElement("i",{className:y.value,"aria-hidden":"true"}):y.library==="svg"&&y.value?l.createElement("img",{src:y.value,alt:"",style:{width:"16px",height:"16px"}}):l.createElement("i",{className:"eicon-circle","aria-hidden":"true"})))),d&&l.createElement("div",{className:"icon-picker-modal"},l.createElement("div",{className:"ts-modal-backdrop",onClick:Me}),l.createElement("div",{className:"icons-modal ts-theme-options",ref:te},v&&L.length>0?l.createElement("div",{className:"x-row"},l.createElement("div",{className:"inner-tab x-col-4"},l.createElement("div",{className:"x-row"},l.createElement("div",{className:"ts-form-group x-col-12"},l.createElement("label",null,"Search icons"),l.createElement("input",{type:"text",value:b,onChange:c=>Ee(c.target.value),placeholder:"Search icon"})),l.createElement("div",{className:"x-col-12"},l.createElement("ul",{className:"inner-tabs vertical-tabs"},window.Voxel_Icon_Picker_Config&&Object.entries(window.Voxel_Icon_Picker_Config).map(([c,D])=>l.createElement("li",{key:c,className:W===c?"current-item":""},l.createElement("a",{href:"#",onClick:g=>{g.preventDefault(),Se(c)}},l.createElement("i",{className:D.labelIcon}),l.createElement("span",null,D.label)))))))),l.createElement("div",{className:"icon-list-wrapper min-scroll x-col-8"},b?l.createElement("div",{className:"filtered-icons"},Object.entries(ae).map(([c,D])=>{const g=window.Voxel_Icon_Picker_Config?.[c];return g?l.createElement("div",{key:c},l.createElement("code",null,g.label),l.createElement("div",{className:"icon-list"},D.map(u=>l.createElement("div",{key:u,className:"single-icon",onClick:h=>{h.preventDefault(),h.stopPropagation(),w(u,c)},title:u},l.createElement("i",{className:`${g.displayPrefix} ${g.prefix}${u}`}),l.createElement("span",null,u))))):null})):l.createElement("div",{className:"icon-list"},L.map(c=>l.createElement("div",{key:c,className:"single-icon",onClick:D=>{D.preventDefault(),D.stopPropagation(),w(c,W)},title:c},l.createElement("i",{className:`${v.displayPrefix} ${v.prefix}${c}`}),l.createElement("span",null,c)))))):l.createElement("div",{className:"x-row"},l.createElement("div",{className:"x-col-12"},l.createElement("label",null,O[W]?r("Loading icons...","voxel-fse"):r("No icon packs available.","voxel-fse")))))),re&&l.createElement(ln,{value:N(),onChange:Ce,label:t,context:x,onClose:()=>oe(!1),autoOpen:!0}))};r("Start","voxel-fse"),r("Center","voxel-fse"),r("End","voxel-fse"),r("Space Between","voxel-fse"),r("Space Around","voxel-fse"),r("Space Evenly","voxel-fse");r("Mountains","voxel-fse"),r("Drops","voxel-fse"),r("Clouds","voxel-fse"),r("Zigzag","voxel-fse"),r("Pyramids","voxel-fse"),r("Triangle","voxel-fse"),r("Triangle Asymmetrical","voxel-fse"),r("Tilt","voxel-fse"),r("Tilt Opacity","voxel-fse"),r("Fan Opacity","voxel-fse"),r("Curve","voxel-fse"),r("Curve Asymmetrical","voxel-fse"),r("Waves","voxel-fse"),r("Waves Brush","voxel-fse"),r("Waves Pattern","voxel-fse"),r("Book","voxel-fse"),r("Split","voxel-fse"),r("Arrow","voxel-fse");var nt=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],Ye={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(t){return typeof console<"u"&&console.warn(t)},getWeek:function(t){var o=new Date(t.getTime());o.setHours(0,0,0,0),o.setDate(o.getDate()+3-(o.getDay()+6)%7);var e=new Date(o.getFullYear(),0,4);return 1+Math.round(((o.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},Ue={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(t){var o=t%100;if(o>3&&o<21)return"th";switch(o%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},me=function(t,o){return o===void 0&&(o=2),("000"+t).slice(o*-1)},be=function(t){return t===!0?1:0};function gt(t,o){var e;return function(){var m=this,x=arguments;clearTimeout(e),e=setTimeout(function(){return t.apply(m,x)},o)}}var at=function(t){return t instanceof Array?t:[t]};function de(t,o,e){if(e===!0)return t.classList.add(o);t.classList.remove(o)}function Q(t,o,e){var m=window.document.createElement(t);return o=o||"",e=e||"",m.className=o,e!==void 0&&(m.textContent=e),m}function qe(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function _t(t,o){if(o(t))return t;if(t.parentNode)return _t(t.parentNode,o)}function Ze(t,o){var e=Q("div","numInputWrapper"),m=Q("input","numInput "+t),x=Q("span","arrowUp"),f=Q("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?m.type="number":(m.type="text",m.pattern="\\d*"),o!==void 0)for(var y in o)m.setAttribute(y,o[y]);return e.appendChild(m),e.appendChild(x),e.appendChild(f),e}function ge(t){try{if(typeof t.composedPath=="function"){var o=t.composedPath();return o[0]}return t.target}catch{return t.target}}var ot=function(){},Je=function(t,o,e){return e.months[o?"shorthand":"longhand"][t]},un={D:ot,F:function(t,o,e){t.setMonth(e.months.longhand.indexOf(o))},G:function(t,o){t.setHours((t.getHours()>=12?12:0)+parseFloat(o))},H:function(t,o){t.setHours(parseFloat(o))},J:function(t,o){t.setDate(parseFloat(o))},K:function(t,o,e){t.setHours(t.getHours()%12+12*be(new RegExp(e.amPM[1],"i").test(o)))},M:function(t,o,e){t.setMonth(e.months.shorthand.indexOf(o))},S:function(t,o){t.setSeconds(parseFloat(o))},U:function(t,o){return new Date(parseFloat(o)*1e3)},W:function(t,o,e){var m=parseInt(o),x=new Date(t.getFullYear(),0,2+(m-1)*7,0,0,0,0);return x.setDate(x.getDate()-x.getDay()+e.firstDayOfWeek),x},Y:function(t,o){t.setFullYear(parseFloat(o))},Z:function(t,o){return new Date(o)},d:function(t,o){t.setDate(parseFloat(o))},h:function(t,o){t.setHours((t.getHours()>=12?12:0)+parseFloat(o))},i:function(t,o){t.setMinutes(parseFloat(o))},j:function(t,o){t.setDate(parseFloat(o))},l:ot,m:function(t,o){t.setMonth(parseFloat(o)-1)},n:function(t,o){t.setMonth(parseFloat(o)-1)},s:function(t,o){t.setSeconds(parseFloat(o))},u:function(t,o){return new Date(parseFloat(o))},w:ot,y:function(t,o){t.setFullYear(2e3+parseFloat(o))}},Fe={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},We={Z:function(t){return t.toISOString()},D:function(t,o,e){return o.weekdays.shorthand[We.w(t,o,e)]},F:function(t,o,e){return Je(We.n(t,o,e)-1,!1,o)},G:function(t,o,e){return me(We.h(t,o,e))},H:function(t){return me(t.getHours())},J:function(t,o){return o.ordinal!==void 0?t.getDate()+o.ordinal(t.getDate()):t.getDate()},K:function(t,o){return o.amPM[be(t.getHours()>11)]},M:function(t,o){return Je(t.getMonth(),!0,o)},S:function(t){return me(t.getSeconds())},U:function(t){return t.getTime()/1e3},W:function(t,o,e){return e.getWeek(t)},Y:function(t){return me(t.getFullYear(),4)},d:function(t){return me(t.getDate())},h:function(t){return t.getHours()%12?t.getHours()%12:12},i:function(t){return me(t.getMinutes())},j:function(t){return t.getDate()},l:function(t,o){return o.weekdays.longhand[t.getDay()]},m:function(t){return me(t.getMonth()+1)},n:function(t){return t.getMonth()+1},s:function(t){return t.getSeconds()},u:function(t){return t.getTime()},w:function(t){return t.getDay()},y:function(t){return String(t.getFullYear()).substring(2)}},Tt=function(t){var o=t.config,e=o===void 0?Ye:o,m=t.l10n,x=m===void 0?Ue:m,f=t.isMobile,y=f===void 0?!1:f;return function(_,d,$){var T=$||x;return e.formatDate!==void 0&&!y?e.formatDate(_,d,T):d.split("").map(function(q,O,R){return We[q]&&R[O-1]!=="\\"?We[q](_,T,e):q!=="\\"?q:""}).join("")}},st=function(t){var o=t.config,e=o===void 0?Ye:o,m=t.l10n,x=m===void 0?Ue:m;return function(f,y,_,d){if(!(f!==0&&!f)){var $=d||x,T,q=f;if(f instanceof Date)T=new Date(f.getTime());else if(typeof f!="string"&&f.toFixed!==void 0)T=new Date(f);else if(typeof f=="string"){var O=y||(e||Ye).dateFormat,R=String(f).trim();if(R==="today")T=new Date,_=!0;else if(e&&e.parseDate)T=e.parseDate(f,O);else if(/Z$/.test(R)||/GMT$/.test(R))T=new Date(f);else{for(var W=void 0,P=[],b=0,ee=0,ae="";b<O.length;b++){var H=O[b],te=H==="\\",re=O[b-1]==="\\"||te;if(Fe[H]&&!re){ae+=Fe[H];var oe=new RegExp(ae).exec(f);oe&&(W=!0)&&P[H!=="Y"?"push":"unshift"]({fn:un[H],val:oe[++ee]})}else te||(ae+=".")}T=!e||!e.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),P.forEach(function(E){var N=E.fn,J=E.val;return T=N(T,J,$)||T}),T=W?T:void 0}}if(!(T instanceof Date&&!isNaN(T.getTime()))){e.errorHandler(new Error("Invalid date provided: "+q));return}return _===!0&&T.setHours(0,0,0,0),T}}};function he(t,o,e){return e===void 0&&(e=!0),e!==!1?new Date(t.getTime()).setHours(0,0,0,0)-new Date(o.getTime()).setHours(0,0,0,0):t.getTime()-o.getTime()}var dn=function(t,o,e){return t>Math.min(o,e)&&t<Math.max(o,e)},rt=function(t,o,e){return t*3600+o*60+e},mn=function(t){var o=Math.floor(t/3600),e=(t-o*3600)/60;return[o,e,t-o*3600-e*60]},pn={DAY:864e5};function it(t){var o=t.defaultHour,e=t.defaultMinute,m=t.defaultSeconds;if(t.minDate!==void 0){var x=t.minDate.getHours(),f=t.minDate.getMinutes(),y=t.minDate.getSeconds();o<x&&(o=x),o===x&&e<f&&(e=f),o===x&&e===f&&m<y&&(m=t.minDate.getSeconds())}if(t.maxDate!==void 0){var _=t.maxDate.getHours(),d=t.maxDate.getMinutes();o=Math.min(o,_),o===_&&(e=Math.min(d,e)),o===_&&e===d&&(m=t.maxDate.getSeconds())}return{hours:o,minutes:e,seconds:m}}typeof Object.assign!="function"&&(Object.assign=function(t){for(var o=[],e=1;e<arguments.length;e++)o[e-1]=arguments[e];if(!t)throw TypeError("Cannot convert undefined or null to object");for(var m=function(_){_&&Object.keys(_).forEach(function(d){return t[d]=_[d]})},x=0,f=o;x<f.length;x++){var y=f[x];m(y)}return t});var ce=function(){return ce=Object.assign||function(t){for(var o,e=1,m=arguments.length;e<m;e++){o=arguments[e];for(var x in o)Object.prototype.hasOwnProperty.call(o,x)&&(t[x]=o[x])}return t},ce.apply(this,arguments)},ht=function(){for(var t=0,o=0,e=arguments.length;o<e;o++)t+=arguments[o].length;for(var m=Array(t),x=0,o=0;o<e;o++)for(var f=arguments[o],y=0,_=f.length;y<_;y++,x++)m[x]=f[y];return m},gn=300;function hn(t,o){var e={config:ce(ce({},Ye),le.defaultConfig),l10n:Ue};e.parseDate=st({config:e.config,l10n:e.l10n}),e._handlers=[],e.pluginElements=[],e.loadedPlugins=[],e._bind=P,e._setHoursFromDate=O,e._positionCalendar=ue,e.changeMonth=Se,e.changeYear=D,e.clear=w,e.close=k,e.onMouseOver=z,e._createElement=Q,e.createDay=oe,e.destroy=v,e.isEnabled=g,e.jumpToDate=ae,e.updateValue=Le,e.open=B,e.redraw=Ie,e.set=Nt,e.setDate=Pt,e.toggle=Ft;function m(){e.utils={getDaysInMonth:function(n,a){return n===void 0&&(n=e.currentMonth),a===void 0&&(a=e.currentYear),n===1&&(a%4===0&&a%100!==0||a%400===0)?29:e.l10n.daysInMonth[n]}}}function x(){e.element=e.input=t,e.isOpen=!1,K(),fe(),At(),Lt(),m(),e.isMobile||re(),ee(),(e.selectedDates.length||e.config.noCalendar)&&(e.config.enableTime&&O(e.config.noCalendar?e.latestSelectedDateObj:void 0),Le(!1)),_();var n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!e.isMobile&&n&&ue(),ne("onReady")}function f(){var n;return((n=e.calendarContainer)===null||n===void 0?void 0:n.getRootNode()).activeElement||document.activeElement}function y(n){return n.bind(e)}function _(){var n=e.config;n.weekNumbers===!1&&n.showMonths===1||n.noCalendar!==!0&&window.requestAnimationFrame(function(){if(e.calendarContainer!==void 0&&(e.calendarContainer.style.visibility="hidden",e.calendarContainer.style.display="block"),e.daysContainer!==void 0){var a=(e.days.offsetWidth+1)*n.showMonths;e.daysContainer.style.width=a+"px",e.calendarContainer.style.width=a+(e.weekWrapper!==void 0?e.weekWrapper.offsetWidth:0)+"px",e.calendarContainer.style.removeProperty("visibility"),e.calendarContainer.style.removeProperty("display")}})}function d(n){if(e.selectedDates.length===0){var a=e.config.minDate===void 0||he(new Date,e.config.minDate)>=0?new Date:new Date(e.config.minDate.getTime()),i=it(e.config);a.setHours(i.hours,i.minutes,i.seconds,a.getMilliseconds()),e.selectedDates=[a],e.latestSelectedDateObj=a}n!==void 0&&n.type!=="blur"&&jt(n);var s=e._input.value;q(),Le(),e._input.value!==s&&e._debouncedChange()}function $(n,a){return n%12+12*be(a===e.l10n.amPM[1])}function T(n){switch(n%24){case 0:case 12:return 12;default:return n%12}}function q(){if(!(e.hourElement===void 0||e.minuteElement===void 0)){var n=(parseInt(e.hourElement.value.slice(-2),10)||0)%24,a=(parseInt(e.minuteElement.value,10)||0)%60,i=e.secondElement!==void 0?(parseInt(e.secondElement.value,10)||0)%60:0;e.amPM!==void 0&&(n=$(n,e.amPM.textContent));var s=e.config.minTime!==void 0||e.config.minDate&&e.minDateHasTime&&e.latestSelectedDateObj&&he(e.latestSelectedDateObj,e.config.minDate,!0)===0,p=e.config.maxTime!==void 0||e.config.maxDate&&e.maxDateHasTime&&e.latestSelectedDateObj&&he(e.latestSelectedDateObj,e.config.maxDate,!0)===0;if(e.config.maxTime!==void 0&&e.config.minTime!==void 0&&e.config.minTime>e.config.maxTime){var C=rt(e.config.minTime.getHours(),e.config.minTime.getMinutes(),e.config.minTime.getSeconds()),j=rt(e.config.maxTime.getHours(),e.config.maxTime.getMinutes(),e.config.maxTime.getSeconds()),I=rt(n,a,i);if(I>j&&I<C){var V=mn(C);n=V[0],a=V[1],i=V[2]}}else{if(p){var S=e.config.maxTime!==void 0?e.config.maxTime:e.config.maxDate;n=Math.min(n,S.getHours()),n===S.getHours()&&(a=Math.min(a,S.getMinutes())),a===S.getMinutes()&&(i=Math.min(i,S.getSeconds()))}if(s){var A=e.config.minTime!==void 0?e.config.minTime:e.config.minDate;n=Math.max(n,A.getHours()),n===A.getHours()&&a<A.getMinutes()&&(a=A.getMinutes()),a===A.getMinutes()&&(i=Math.max(i,A.getSeconds()))}}R(n,a,i)}}function O(n){var a=n||e.latestSelectedDateObj;a&&a instanceof Date&&R(a.getHours(),a.getMinutes(),a.getSeconds())}function R(n,a,i){e.latestSelectedDateObj!==void 0&&e.latestSelectedDateObj.setHours(n%24,a,i||0,0),!(!e.hourElement||!e.minuteElement||e.isMobile)&&(e.hourElement.value=me(e.config.time_24hr?n:(12+n)%12+12*be(n%12===0)),e.minuteElement.value=me(a),e.amPM!==void 0&&(e.amPM.textContent=e.l10n.amPM[be(n>=12)]),e.secondElement!==void 0&&(e.secondElement.value=me(i)))}function W(n){var a=ge(n),i=parseInt(a.value)+(n.delta||0);(i/1e3>1||n.key==="Enter"&&!/[^\d]/.test(i.toString()))&&D(i)}function P(n,a,i,s){if(a instanceof Array)return a.forEach(function(p){return P(n,p,i,s)});if(n instanceof Array)return n.forEach(function(p){return P(p,a,i,s)});n.addEventListener(a,i,s),e._handlers.push({remove:function(){return n.removeEventListener(a,i,s)}})}function b(){ne("onChange")}function ee(){if(e.config.wrap&&["open","close","toggle","clear"].forEach(function(i){Array.prototype.forEach.call(e.element.querySelectorAll("[data-"+i+"]"),function(s){return P(s,"click",e[i])})}),e.isMobile){Ot();return}var n=gt(Y,50);if(e._debouncedChange=gt(b,gn),e.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&P(e.daysContainer,"mouseover",function(i){e.config.mode==="range"&&z(ge(i))}),P(e._input,"keydown",M),e.calendarContainer!==void 0&&P(e.calendarContainer,"keydown",M),!e.config.inline&&!e.config.static&&P(window,"resize",n),window.ontouchstart!==void 0?P(window.document,"touchstart",c):P(window.document,"mousedown",c),P(window.document,"focus",c,{capture:!0}),e.config.clickOpens===!0&&(P(e._input,"focus",e.open),P(e._input,"click",e.open)),e.daysContainer!==void 0&&(P(e.monthNav,"click",Rt),P(e.monthNav,["keyup","increment"],W),P(e.daysContainer,"click",Ge)),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0){var a=function(i){return ge(i).select()};P(e.timeContainer,["increment"],d),P(e.timeContainer,"blur",d,{capture:!0}),P(e.timeContainer,"click",H),P([e.hourElement,e.minuteElement],["focus","click"],a),e.secondElement!==void 0&&P(e.secondElement,"focus",function(){return e.secondElement&&e.secondElement.select()}),e.amPM!==void 0&&P(e.amPM,"click",function(i){d(i)})}e.config.allowInput&&P(e._input,"blur",h)}function ae(n,a){var i=n!==void 0?e.parseDate(n):e.latestSelectedDateObj||(e.config.minDate&&e.config.minDate>e.now?e.config.minDate:e.config.maxDate&&e.config.maxDate<e.now?e.config.maxDate:e.now),s=e.currentYear,p=e.currentMonth;try{i!==void 0&&(e.currentYear=i.getFullYear(),e.currentMonth=i.getMonth())}catch(C){C.message="Invalid date supplied: "+i,e.config.errorHandler(C)}a&&e.currentYear!==s&&(ne("onYearChange"),se()),a&&(e.currentYear!==s||e.currentMonth!==p)&&ne("onMonthChange"),e.redraw()}function H(n){var a=ge(n);~a.className.indexOf("arrow")&&te(n,a.classList.contains("arrowUp")?1:-1)}function te(n,a,i){var s=n&&ge(n),p=i||s&&s.parentNode&&s.parentNode.firstChild,C=Ke("increment");C.delta=a,p&&p.dispatchEvent(C)}function re(){var n=window.document.createDocumentFragment();if(e.calendarContainer=Q("div","flatpickr-calendar"),e.calendarContainer.tabIndex=-1,!e.config.noCalendar){if(n.appendChild(De()),e.innerContainer=Q("div","flatpickr-innerContainer"),e.config.weekNumbers){var a=Me(),i=a.weekWrapper,s=a.weekNumbers;e.innerContainer.appendChild(i),e.weekNumbers=s,e.weekWrapper=i}e.rContainer=Q("div","flatpickr-rContainer"),e.rContainer.appendChild(Ee()),e.daysContainer||(e.daysContainer=Q("div","flatpickr-days"),e.daysContainer.tabIndex=-1),Ce(),e.rContainer.appendChild(e.daysContainer),e.innerContainer.appendChild(e.rContainer),n.appendChild(e.innerContainer)}e.config.enableTime&&n.appendChild(ke()),de(e.calendarContainer,"rangeMode",e.config.mode==="range"),de(e.calendarContainer,"animate",e.config.animate===!0),de(e.calendarContainer,"multiMonth",e.config.showMonths>1),e.calendarContainer.appendChild(n);var p=e.config.appendTo!==void 0&&e.config.appendTo.nodeType!==void 0;if((e.config.inline||e.config.static)&&(e.calendarContainer.classList.add(e.config.inline?"inline":"static"),e.config.inline&&(!p&&e.element.parentNode?e.element.parentNode.insertBefore(e.calendarContainer,e._input.nextSibling):e.config.appendTo!==void 0&&e.config.appendTo.appendChild(e.calendarContainer)),e.config.static)){var C=Q("div","flatpickr-wrapper");e.element.parentNode&&e.element.parentNode.insertBefore(C,e.element),C.appendChild(e.element),e.altInput&&C.appendChild(e.altInput),C.appendChild(e.calendarContainer)}!e.config.static&&!e.config.inline&&(e.config.appendTo!==void 0?e.config.appendTo:window.document.body).appendChild(e.calendarContainer)}function oe(n,a,i,s){var p=g(a,!0),C=Q("span",n,a.getDate().toString());return C.dateObj=a,C.$i=s,C.setAttribute("aria-label",e.formatDate(a,e.config.ariaDateFormat)),n.indexOf("hidden")===-1&&he(a,e.now)===0&&(e.todayDateElem=C,C.classList.add("today"),C.setAttribute("aria-current","date")),p?(C.tabIndex=-1,Qe(a)&&(C.classList.add("selected"),e.selectedDateElem=C,e.config.mode==="range"&&(de(C,"startRange",e.selectedDates[0]&&he(a,e.selectedDates[0],!0)===0),de(C,"endRange",e.selectedDates[1]&&he(a,e.selectedDates[1],!0)===0),n==="nextMonthDay"&&C.classList.add("inRange")))):C.classList.add("flatpickr-disabled"),e.config.mode==="range"&&$t(a)&&!Qe(a)&&C.classList.add("inRange"),e.weekNumbers&&e.config.showMonths===1&&n!=="prevMonthDay"&&s%7===6&&e.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+e.config.getWeek(a)+"</span>"),ne("onDayCreate",C),C}function E(n){n.focus(),e.config.mode==="range"&&z(n)}function N(n){for(var a=n>0?0:e.config.showMonths-1,i=n>0?e.config.showMonths:-1,s=a;s!=i;s+=n)for(var p=e.daysContainer.children[s],C=n>0?0:p.children.length-1,j=n>0?p.children.length:-1,I=C;I!=j;I+=n){var V=p.children[I];if(V.className.indexOf("hidden")===-1&&g(V.dateObj))return V}}function J(n,a){for(var i=n.className.indexOf("Month")===-1?n.dateObj.getMonth():e.currentMonth,s=a>0?e.config.showMonths:-1,p=a>0?1:-1,C=i-e.currentMonth;C!=s;C+=p)for(var j=e.daysContainer.children[C],I=i-e.currentMonth===C?n.$i+a:a<0?j.children.length-1:0,V=j.children.length,S=I;S>=0&&S<V&&S!=(a>0?V:-1);S+=p){var A=j.children[S];if(A.className.indexOf("hidden")===-1&&g(A.dateObj)&&Math.abs(n.$i-S)>=Math.abs(a))return E(A)}e.changeMonth(p),G(N(p),0)}function G(n,a){var i=f(),s=u(i||document.body),p=n!==void 0?n:s?i:e.selectedDateElem!==void 0&&u(e.selectedDateElem)?e.selectedDateElem:e.todayDateElem!==void 0&&u(e.todayDateElem)?e.todayDateElem:N(a>0?1:-1);p===void 0?e._input.focus():s?J(p,a):E(p)}function ie(n,a){for(var i=(new Date(n,a,1).getDay()-e.l10n.firstDayOfWeek+7)%7,s=e.utils.getDaysInMonth((a-1+12)%12,n),p=e.utils.getDaysInMonth(a,n),C=window.document.createDocumentFragment(),j=e.config.showMonths>1,I=j?"prevMonthDay hidden":"prevMonthDay",V=j?"nextMonthDay hidden":"nextMonthDay",S=s+1-i,A=0;S<=s;S++,A++)C.appendChild(oe("flatpickr-day "+I,new Date(n,a-1,S),S,A));for(S=1;S<=p;S++,A++)C.appendChild(oe("flatpickr-day",new Date(n,a,S),S,A));for(var X=p+1;X<=42-i&&(e.config.showMonths===1||A%7!==0);X++,A++)C.appendChild(oe("flatpickr-day "+V,new Date(n,a+1,X%p),X,A));var _e=Q("div","dayContainer");return _e.appendChild(C),_e}function Ce(){if(e.daysContainer!==void 0){qe(e.daysContainer),e.weekNumbers&&qe(e.weekNumbers);for(var n=document.createDocumentFragment(),a=0;a<e.config.showMonths;a++){var i=new Date(e.currentYear,e.currentMonth,1);i.setMonth(e.currentMonth+a),n.appendChild(ie(i.getFullYear(),i.getMonth()))}e.daysContainer.appendChild(n),e.days=e.daysContainer.firstChild,e.config.mode==="range"&&e.selectedDates.length===1&&z()}}function se(){if(!(e.config.showMonths>1||e.config.monthSelectorType!=="dropdown")){var n=function(s){return e.config.minDate!==void 0&&e.currentYear===e.config.minDate.getFullYear()&&s<e.config.minDate.getMonth()?!1:!(e.config.maxDate!==void 0&&e.currentYear===e.config.maxDate.getFullYear()&&s>e.config.maxDate.getMonth())};e.monthsDropdownContainer.tabIndex=-1,e.monthsDropdownContainer.innerHTML="";for(var a=0;a<12;a++)if(n(a)){var i=Q("option","flatpickr-monthDropdown-month");i.value=new Date(e.currentYear,a).getMonth().toString(),i.textContent=Je(a,e.config.shorthandCurrentMonth,e.l10n),i.tabIndex=-1,e.currentMonth===a&&(i.selected=!0),e.monthsDropdownContainer.appendChild(i)}}}function ve(){var n=Q("div","flatpickr-month"),a=window.document.createDocumentFragment(),i;e.config.showMonths>1||e.config.monthSelectorType==="static"?i=Q("span","cur-month"):(e.monthsDropdownContainer=Q("select","flatpickr-monthDropdown-months"),e.monthsDropdownContainer.setAttribute("aria-label",e.l10n.monthAriaLabel),P(e.monthsDropdownContainer,"change",function(j){var I=ge(j),V=parseInt(I.value,10);e.changeMonth(V-e.currentMonth),ne("onMonthChange")}),se(),i=e.monthsDropdownContainer);var s=Ze("cur-year",{tabindex:"-1"}),p=s.getElementsByTagName("input")[0];p.setAttribute("aria-label",e.l10n.yearAriaLabel),e.config.minDate&&p.setAttribute("min",e.config.minDate.getFullYear().toString()),e.config.maxDate&&(p.setAttribute("max",e.config.maxDate.getFullYear().toString()),p.disabled=!!e.config.minDate&&e.config.minDate.getFullYear()===e.config.maxDate.getFullYear());var C=Q("div","flatpickr-current-month");return C.appendChild(i),C.appendChild(s),a.appendChild(C),n.appendChild(a),{container:n,yearElement:p,monthElement:i}}function Te(){qe(e.monthNav),e.monthNav.appendChild(e.prevMonthNav),e.config.showMonths&&(e.yearElements=[],e.monthElements=[]);for(var n=e.config.showMonths;n--;){var a=ve();e.yearElements.push(a.yearElement),e.monthElements.push(a.monthElement),e.monthNav.appendChild(a.container)}e.monthNav.appendChild(e.nextMonthNav)}function De(){return e.monthNav=Q("div","flatpickr-months"),e.yearElements=[],e.monthElements=[],e.prevMonthNav=Q("span","flatpickr-prev-month"),e.prevMonthNav.innerHTML=e.config.prevArrow,e.nextMonthNav=Q("span","flatpickr-next-month"),e.nextMonthNav.innerHTML=e.config.nextArrow,Te(),Object.defineProperty(e,"_hidePrevMonthArrow",{get:function(){return e.__hidePrevMonthArrow},set:function(n){e.__hidePrevMonthArrow!==n&&(de(e.prevMonthNav,"flatpickr-disabled",n),e.__hidePrevMonthArrow=n)}}),Object.defineProperty(e,"_hideNextMonthArrow",{get:function(){return e.__hideNextMonthArrow},set:function(n){e.__hideNextMonthArrow!==n&&(de(e.nextMonthNav,"flatpickr-disabled",n),e.__hideNextMonthArrow=n)}}),e.currentYearElement=e.yearElements[0],ze(),e.monthNav}function ke(){e.calendarContainer.classList.add("hasTime"),e.config.noCalendar&&e.calendarContainer.classList.add("noCalendar");var n=it(e.config);e.timeContainer=Q("div","flatpickr-time"),e.timeContainer.tabIndex=-1;var a=Q("span","flatpickr-time-separator",":"),i=Ze("flatpickr-hour",{"aria-label":e.l10n.hourAriaLabel});e.hourElement=i.getElementsByTagName("input")[0];var s=Ze("flatpickr-minute",{"aria-label":e.l10n.minuteAriaLabel});if(e.minuteElement=s.getElementsByTagName("input")[0],e.hourElement.tabIndex=e.minuteElement.tabIndex=-1,e.hourElement.value=me(e.latestSelectedDateObj?e.latestSelectedDateObj.getHours():e.config.time_24hr?n.hours:T(n.hours)),e.minuteElement.value=me(e.latestSelectedDateObj?e.latestSelectedDateObj.getMinutes():n.minutes),e.hourElement.setAttribute("step",e.config.hourIncrement.toString()),e.minuteElement.setAttribute("step",e.config.minuteIncrement.toString()),e.hourElement.setAttribute("min",e.config.time_24hr?"0":"1"),e.hourElement.setAttribute("max",e.config.time_24hr?"23":"12"),e.hourElement.setAttribute("maxlength","2"),e.minuteElement.setAttribute("min","0"),e.minuteElement.setAttribute("max","59"),e.minuteElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(i),e.timeContainer.appendChild(a),e.timeContainer.appendChild(s),e.config.time_24hr&&e.timeContainer.classList.add("time24hr"),e.config.enableSeconds){e.timeContainer.classList.add("hasSeconds");var p=Ze("flatpickr-second");e.secondElement=p.getElementsByTagName("input")[0],e.secondElement.value=me(e.latestSelectedDateObj?e.latestSelectedDateObj.getSeconds():n.seconds),e.secondElement.setAttribute("step",e.minuteElement.getAttribute("step")),e.secondElement.setAttribute("min","0"),e.secondElement.setAttribute("max","59"),e.secondElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(Q("span","flatpickr-time-separator",":")),e.timeContainer.appendChild(p)}return e.config.time_24hr||(e.amPM=Q("span","flatpickr-am-pm",e.l10n.amPM[be((e.latestSelectedDateObj?e.hourElement.value:e.config.defaultHour)>11)]),e.amPM.title=e.l10n.toggleTitle,e.amPM.tabIndex=-1,e.timeContainer.appendChild(e.amPM)),e.timeContainer}function Ee(){e.weekdayContainer?qe(e.weekdayContainer):e.weekdayContainer=Q("div","flatpickr-weekdays");for(var n=e.config.showMonths;n--;){var a=Q("div","flatpickr-weekdaycontainer");e.weekdayContainer.appendChild(a)}return Ae(),e.weekdayContainer}function Ae(){if(e.weekdayContainer){var n=e.l10n.firstDayOfWeek,a=ht(e.l10n.weekdays.shorthand);n>0&&n<a.length&&(a=ht(a.splice(n,a.length),a.splice(0,n)));for(var i=e.config.showMonths;i--;)e.weekdayContainer.children[i].innerHTML=`
      <span class='flatpickr-weekday'>
        `+a.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function Me(){e.calendarContainer.classList.add("hasWeeks");var n=Q("div","flatpickr-weekwrapper");n.appendChild(Q("span","flatpickr-weekday",e.l10n.weekAbbreviation));var a=Q("div","flatpickr-weeks");return n.appendChild(a),{weekWrapper:n,weekNumbers:a}}function Se(n,a){a===void 0&&(a=!0);var i=a?n:n-e.currentMonth;i<0&&e._hidePrevMonthArrow===!0||i>0&&e._hideNextMonthArrow===!0||(e.currentMonth+=i,(e.currentMonth<0||e.currentMonth>11)&&(e.currentYear+=e.currentMonth>11?1:-1,e.currentMonth=(e.currentMonth+12)%12,ne("onYearChange"),se()),Ce(),ne("onMonthChange"),ze())}function w(n,a){if(n===void 0&&(n=!0),a===void 0&&(a=!0),e.input.value="",e.altInput!==void 0&&(e.altInput.value=""),e.mobileInput!==void 0&&(e.mobileInput.value=""),e.selectedDates=[],e.latestSelectedDateObj=void 0,a===!0&&(e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth()),e.config.enableTime===!0){var i=it(e.config),s=i.hours,p=i.minutes,C=i.seconds;R(s,p,C)}e.redraw(),n&&ne("onChange")}function k(){e.isOpen=!1,e.isMobile||(e.calendarContainer!==void 0&&e.calendarContainer.classList.remove("open"),e._input!==void 0&&e._input.classList.remove("active")),ne("onClose")}function v(){e.config!==void 0&&ne("onDestroy");for(var n=e._handlers.length;n--;)e._handlers[n].remove();if(e._handlers=[],e.mobileInput)e.mobileInput.parentNode&&e.mobileInput.parentNode.removeChild(e.mobileInput),e.mobileInput=void 0;else if(e.calendarContainer&&e.calendarContainer.parentNode)if(e.config.static&&e.calendarContainer.parentNode){var a=e.calendarContainer.parentNode;if(a.lastChild&&a.removeChild(a.lastChild),a.parentNode){for(;a.firstChild;)a.parentNode.insertBefore(a.firstChild,a);a.parentNode.removeChild(a)}}else e.calendarContainer.parentNode.removeChild(e.calendarContainer);e.altInput&&(e.input.type="text",e.altInput.parentNode&&e.altInput.parentNode.removeChild(e.altInput),delete e.altInput),e.input&&(e.input.type=e.input._type,e.input.classList.remove("flatpickr-input"),e.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(i){try{delete e[i]}catch{}})}function L(n){return e.calendarContainer.contains(n)}function c(n){if(e.isOpen&&!e.config.inline){var a=ge(n),i=L(a),s=a===e.input||a===e.altInput||e.element.contains(a)||n.path&&n.path.indexOf&&(~n.path.indexOf(e.input)||~n.path.indexOf(e.altInput)),p=!s&&!i&&!L(n.relatedTarget),C=!e.config.ignoredFocusElements.some(function(j){return j.contains(a)});p&&C&&(e.config.allowInput&&e.setDate(e._input.value,!1,e.config.altInput?e.config.altFormat:e.config.dateFormat),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0&&e.input.value!==""&&e.input.value!==void 0&&d(),e.close(),e.config&&e.config.mode==="range"&&e.selectedDates.length===1&&e.clear(!1))}}function D(n){if(!(!n||e.config.minDate&&n<e.config.minDate.getFullYear()||e.config.maxDate&&n>e.config.maxDate.getFullYear())){var a=n,i=e.currentYear!==a;e.currentYear=a||e.currentYear,e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth=Math.min(e.config.maxDate.getMonth(),e.currentMonth):e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&(e.currentMonth=Math.max(e.config.minDate.getMonth(),e.currentMonth)),i&&(e.redraw(),ne("onYearChange"),se())}}function g(n,a){var i;a===void 0&&(a=!0);var s=e.parseDate(n,void 0,a);if(e.config.minDate&&s&&he(s,e.config.minDate,a!==void 0?a:!e.minDateHasTime)<0||e.config.maxDate&&s&&he(s,e.config.maxDate,a!==void 0?a:!e.maxDateHasTime)>0)return!1;if(!e.config.enable&&e.config.disable.length===0)return!0;if(s===void 0)return!1;for(var p=!!e.config.enable,C=(i=e.config.enable)!==null&&i!==void 0?i:e.config.disable,j=0,I=void 0;j<C.length;j++){if(I=C[j],typeof I=="function"&&I(s))return p;if(I instanceof Date&&s!==void 0&&I.getTime()===s.getTime())return p;if(typeof I=="string"){var V=e.parseDate(I,void 0,!0);return V&&V.getTime()===s.getTime()?p:!p}else if(typeof I=="object"&&s!==void 0&&I.from&&I.to&&s.getTime()>=I.from.getTime()&&s.getTime()<=I.to.getTime())return p}return!p}function u(n){return e.daysContainer!==void 0?n.className.indexOf("hidden")===-1&&n.className.indexOf("flatpickr-disabled")===-1&&e.daysContainer.contains(n):!1}function h(n){var a=n.target===e._input,i=e._input.value.trimEnd()!==Xe();a&&i&&!(n.relatedTarget&&L(n.relatedTarget))&&e.setDate(e._input.value,!0,n.target===e.altInput?e.config.altFormat:e.config.dateFormat)}function M(n){var a=ge(n),i=e.config.wrap?t.contains(a):a===e._input,s=e.config.allowInput,p=e.isOpen&&(!s||!i),C=e.config.inline&&i&&!s;if(n.keyCode===13&&i){if(s)return e.setDate(e._input.value,!0,a===e.altInput?e.config.altFormat:e.config.dateFormat),e.close(),a.blur();e.open()}else if(L(a)||p||C){var j=!!e.timeContainer&&e.timeContainer.contains(a);switch(n.keyCode){case 13:j?(n.preventDefault(),d(),Pe()):Ge(n);break;case 27:n.preventDefault(),Pe();break;case 8:case 46:i&&!e.config.allowInput&&(n.preventDefault(),e.clear());break;case 37:case 39:if(!j&&!i){n.preventDefault();var I=f();if(e.daysContainer!==void 0&&(s===!1||I&&u(I))){var V=n.keyCode===39?1:-1;n.ctrlKey?(n.stopPropagation(),Se(V),G(N(1),0)):G(void 0,V)}}else e.hourElement&&e.hourElement.focus();break;case 38:case 40:n.preventDefault();var S=n.keyCode===40?1:-1;e.daysContainer&&a.$i!==void 0||a===e.input||a===e.altInput?n.ctrlKey?(n.stopPropagation(),D(e.currentYear-S),G(N(1),0)):j||G(void 0,S*7):a===e.currentYearElement?D(e.currentYear-S):e.config.enableTime&&(!j&&e.hourElement&&e.hourElement.focus(),d(n),e._debouncedChange());break;case 9:if(j){var A=[e.hourElement,e.minuteElement,e.secondElement,e.amPM].concat(e.pluginElements).filter(function(pe){return pe}),X=A.indexOf(a);if(X!==-1){var _e=A[X+(n.shiftKey?-1:1)];n.preventDefault(),(_e||e._input).focus()}}else!e.config.noCalendar&&e.daysContainer&&e.daysContainer.contains(a)&&n.shiftKey&&(n.preventDefault(),e._input.focus());break}}if(e.amPM!==void 0&&a===e.amPM)switch(n.key){case e.l10n.amPM[0].charAt(0):case e.l10n.amPM[0].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[0],q(),Le();break;case e.l10n.amPM[1].charAt(0):case e.l10n.amPM[1].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[1],q(),Le();break}(i||L(a))&&ne("onKeyDown",n)}function z(n,a){if(a===void 0&&(a="flatpickr-day"),!(e.selectedDates.length!==1||n&&(!n.classList.contains(a)||n.classList.contains("flatpickr-disabled")))){for(var i=n?n.dateObj.getTime():e.days.firstElementChild.dateObj.getTime(),s=e.parseDate(e.selectedDates[0],void 0,!0).getTime(),p=Math.min(i,e.selectedDates[0].getTime()),C=Math.max(i,e.selectedDates[0].getTime()),j=!1,I=0,V=0,S=p;S<C;S+=pn.DAY)g(new Date(S),!0)||(j=j||S>p&&S<C,S<s&&(!I||S>I)?I=S:S>s&&(!V||S<V)&&(V=S));var A=Array.from(e.rContainer.querySelectorAll("*:nth-child(-n+"+e.config.showMonths+") > ."+a));A.forEach(function(X){var _e=X.dateObj,pe=_e.getTime(),Ve=I>0&&pe<I||V>0&&pe>V;if(Ve){X.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(Re){X.classList.remove(Re)});return}else if(j&&!Ve)return;["startRange","inRange","endRange","notAllowed"].forEach(function(Re){X.classList.remove(Re)}),n!==void 0&&(n.classList.add(i<=e.selectedDates[0].getTime()?"startRange":"endRange"),s<i&&pe===s?X.classList.add("startRange"):s>i&&pe===s&&X.classList.add("endRange"),pe>=I&&(V===0||pe<=V)&&dn(pe,s,i)&&X.classList.add("inRange"))})}}function Y(){e.isOpen&&!e.config.static&&!e.config.inline&&ue()}function B(n,a){if(a===void 0&&(a=e._positionElement),e.isMobile===!0){if(n){n.preventDefault();var i=ge(n);i&&i.blur()}e.mobileInput!==void 0&&(e.mobileInput.focus(),e.mobileInput.click()),ne("onOpen");return}else if(e._input.disabled||e.config.inline)return;var s=e.isOpen;e.isOpen=!0,s||(e.calendarContainer.classList.add("open"),e._input.classList.add("active"),ne("onOpen"),ue(a)),e.config.enableTime===!0&&e.config.noCalendar===!0&&e.config.allowInput===!1&&(n===void 0||!e.timeContainer.contains(n.relatedTarget))&&setTimeout(function(){return e.hourElement.select()},50)}function F(n){return function(a){var i=e.config["_"+n+"Date"]=e.parseDate(a,e.config.dateFormat),s=e.config["_"+(n==="min"?"max":"min")+"Date"];i!==void 0&&(e[n==="min"?"minDateHasTime":"maxDateHasTime"]=i.getHours()>0||i.getMinutes()>0||i.getSeconds()>0),e.selectedDates&&(e.selectedDates=e.selectedDates.filter(function(p){return g(p)}),!e.selectedDates.length&&n==="min"&&O(i),Le()),e.daysContainer&&(Ie(),i!==void 0?e.currentYearElement[n]=i.getFullYear().toString():e.currentYearElement.removeAttribute(n),e.currentYearElement.disabled=!!s&&i!==void 0&&s.getFullYear()===i.getFullYear())}}function K(){var n=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],a=ce(ce({},JSON.parse(JSON.stringify(t.dataset||{}))),o),i={};e.config.parseDate=a.parseDate,e.config.formatDate=a.formatDate,Object.defineProperty(e.config,"enable",{get:function(){return e.config._enable},set:function(A){e.config._enable=dt(A)}}),Object.defineProperty(e.config,"disable",{get:function(){return e.config._disable},set:function(A){e.config._disable=dt(A)}});var s=a.mode==="time";if(!a.dateFormat&&(a.enableTime||s)){var p=le.defaultConfig.dateFormat||Ye.dateFormat;i.dateFormat=a.noCalendar||s?"H:i"+(a.enableSeconds?":S":""):p+" H:i"+(a.enableSeconds?":S":"")}if(a.altInput&&(a.enableTime||s)&&!a.altFormat){var C=le.defaultConfig.altFormat||Ye.altFormat;i.altFormat=a.noCalendar||s?"h:i"+(a.enableSeconds?":S K":" K"):C+(" h:i"+(a.enableSeconds?":S":"")+" K")}Object.defineProperty(e.config,"minDate",{get:function(){return e.config._minDate},set:F("min")}),Object.defineProperty(e.config,"maxDate",{get:function(){return e.config._maxDate},set:F("max")});var j=function(A){return function(X){e.config[A==="min"?"_minTime":"_maxTime"]=e.parseDate(X,"H:i:S")}};Object.defineProperty(e.config,"minTime",{get:function(){return e.config._minTime},set:j("min")}),Object.defineProperty(e.config,"maxTime",{get:function(){return e.config._maxTime},set:j("max")}),a.mode==="time"&&(e.config.noCalendar=!0,e.config.enableTime=!0),Object.assign(e.config,i,a);for(var I=0;I<n.length;I++)e.config[n[I]]=e.config[n[I]]===!0||e.config[n[I]]==="true";nt.filter(function(A){return e.config[A]!==void 0}).forEach(function(A){e.config[A]=at(e.config[A]||[]).map(y)}),e.isMobile=!e.config.disableMobile&&!e.config.inline&&e.config.mode==="single"&&!e.config.disable.length&&!e.config.enable&&!e.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var I=0;I<e.config.plugins.length;I++){var V=e.config.plugins[I](e)||{};for(var S in V)nt.indexOf(S)>-1?e.config[S]=at(V[S]).map(y).concat(e.config[S]):typeof a[S]>"u"&&(e.config[S]=V[S])}a.altInputClass||(e.config.altInputClass=Z().className+" "+e.config.altInputClass),ne("onParseConfig")}function Z(){return e.config.wrap?t.querySelector("[data-input]"):t}function fe(){typeof e.config.locale!="object"&&typeof le.l10ns[e.config.locale]>"u"&&e.config.errorHandler(new Error("flatpickr: invalid locale "+e.config.locale)),e.l10n=ce(ce({},le.l10ns.default),typeof e.config.locale=="object"?e.config.locale:e.config.locale!=="default"?le.l10ns[e.config.locale]:void 0),Fe.D="("+e.l10n.weekdays.shorthand.join("|")+")",Fe.l="("+e.l10n.weekdays.longhand.join("|")+")",Fe.M="("+e.l10n.months.shorthand.join("|")+")",Fe.F="("+e.l10n.months.longhand.join("|")+")",Fe.K="("+e.l10n.amPM[0]+"|"+e.l10n.amPM[1]+"|"+e.l10n.amPM[0].toLowerCase()+"|"+e.l10n.amPM[1].toLowerCase()+")";var n=ce(ce({},o),JSON.parse(JSON.stringify(t.dataset||{})));n.time_24hr===void 0&&le.defaultConfig.time_24hr===void 0&&(e.config.time_24hr=e.l10n.time_24hr),e.formatDate=Tt(e),e.parseDate=st({config:e.config,l10n:e.l10n})}function ue(n){if(typeof e.config.position=="function")return void e.config.position(e,n);if(e.calendarContainer!==void 0){ne("onPreCalendarPosition");var a=n||e._positionElement,i=Array.prototype.reduce.call(e.calendarContainer.children,(function(zt,qt){return zt+qt.offsetHeight}),0),s=e.calendarContainer.offsetWidth,p=e.config.position.split(" "),C=p[0],j=p.length>1?p[1]:null,I=a.getBoundingClientRect(),V=window.innerHeight-I.bottom,S=C==="above"||C!=="below"&&V<i&&I.top>i,A=window.pageYOffset+I.top+(S?-i-2:a.offsetHeight+2);if(de(e.calendarContainer,"arrowTop",!S),de(e.calendarContainer,"arrowBottom",S),!e.config.inline){var X=window.pageXOffset+I.left,_e=!1,pe=!1;j==="center"?(X-=(s-I.width)/2,_e=!0):j==="right"&&(X-=s-I.width,pe=!0),de(e.calendarContainer,"arrowLeft",!_e&&!pe),de(e.calendarContainer,"arrowCenter",_e),de(e.calendarContainer,"arrowRight",pe);var Ve=window.document.body.offsetWidth-(window.pageXOffset+I.right),Re=X+s>window.document.body.offsetWidth,Ht=Ve+s>window.document.body.offsetWidth;if(de(e.calendarContainer,"rightMost",Re),!e.config.static)if(e.calendarContainer.style.top=A+"px",!Re)e.calendarContainer.style.left=X+"px",e.calendarContainer.style.right="auto";else if(!Ht)e.calendarContainer.style.left="auto",e.calendarContainer.style.right=Ve+"px";else{var et=Ne();if(et===void 0)return;var Yt=window.document.body.offsetWidth,Bt=Math.max(0,Yt/2-s/2),Vt=".flatpickr-calendar.centerMost:before",Wt=".flatpickr-calendar.centerMost:after",Ut=et.cssRules.length,Gt="{left:"+I.left+"px;right:auto;}";de(e.calendarContainer,"rightMost",!1),de(e.calendarContainer,"centerMost",!0),et.insertRule(Vt+","+Wt+Gt,Ut),e.calendarContainer.style.left=Bt+"px",e.calendarContainer.style.right="auto"}}}}function Ne(){for(var n=null,a=0;a<document.styleSheets.length;a++){var i=document.styleSheets[a];if(i.cssRules){try{i.cssRules}catch{continue}n=i;break}}return n??Oe()}function Oe(){var n=document.createElement("style");return document.head.appendChild(n),n.sheet}function Ie(){e.config.noCalendar||e.isMobile||(se(),ze(),Ce())}function Pe(){e._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(e.close,0):e.close()}function Ge(n){n.preventDefault(),n.stopPropagation();var a=function(A){return A.classList&&A.classList.contains("flatpickr-day")&&!A.classList.contains("flatpickr-disabled")&&!A.classList.contains("notAllowed")},i=_t(ge(n),a);if(i!==void 0){var s=i,p=e.latestSelectedDateObj=new Date(s.dateObj.getTime()),C=(p.getMonth()<e.currentMonth||p.getMonth()>e.currentMonth+e.config.showMonths-1)&&e.config.mode!=="range";if(e.selectedDateElem=s,e.config.mode==="single")e.selectedDates=[p];else if(e.config.mode==="multiple"){var j=Qe(p);j?e.selectedDates.splice(parseInt(j),1):e.selectedDates.push(p)}else e.config.mode==="range"&&(e.selectedDates.length===2&&e.clear(!1,!1),e.latestSelectedDateObj=p,e.selectedDates.push(p),he(p,e.selectedDates[0],!0)!==0&&e.selectedDates.sort(function(A,X){return A.getTime()-X.getTime()}));if(q(),C){var I=e.currentYear!==p.getFullYear();e.currentYear=p.getFullYear(),e.currentMonth=p.getMonth(),I&&(ne("onYearChange"),se()),ne("onMonthChange")}if(ze(),Ce(),Le(),!C&&e.config.mode!=="range"&&e.config.showMonths===1?E(s):e.selectedDateElem!==void 0&&e.hourElement===void 0&&e.selectedDateElem&&e.selectedDateElem.focus(),e.hourElement!==void 0&&e.hourElement!==void 0&&e.hourElement.focus(),e.config.closeOnSelect){var V=e.config.mode==="single"&&!e.config.enableTime,S=e.config.mode==="range"&&e.selectedDates.length===2&&!e.config.enableTime;(V||S)&&Pe()}b()}}var $e={locale:[fe,Ae],showMonths:[Te,_,Ee],minDate:[ae],maxDate:[ae],positionElement:[mt],clickOpens:[function(){e.config.clickOpens===!0?(P(e._input,"focus",e.open),P(e._input,"click",e.open)):(e._input.removeEventListener("focus",e.open),e._input.removeEventListener("click",e.open))}]};function Nt(n,a){if(n!==null&&typeof n=="object"){Object.assign(e.config,n);for(var i in n)$e[i]!==void 0&&$e[i].forEach(function(s){return s()})}else e.config[n]=a,$e[n]!==void 0?$e[n].forEach(function(s){return s()}):nt.indexOf(n)>-1&&(e.config[n]=at(a));e.redraw(),Le(!0)}function ut(n,a){var i=[];if(n instanceof Array)i=n.map(function(s){return e.parseDate(s,a)});else if(n instanceof Date||typeof n=="number")i=[e.parseDate(n,a)];else if(typeof n=="string")switch(e.config.mode){case"single":case"time":i=[e.parseDate(n,a)];break;case"multiple":i=n.split(e.config.conjunction).map(function(s){return e.parseDate(s,a)});break;case"range":i=n.split(e.l10n.rangeSeparator).map(function(s){return e.parseDate(s,a)});break}else e.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(n)));e.selectedDates=e.config.allowInvalidPreload?i:i.filter(function(s){return s instanceof Date&&g(s,!1)}),e.config.mode==="range"&&e.selectedDates.sort(function(s,p){return s.getTime()-p.getTime()})}function Pt(n,a,i){if(a===void 0&&(a=!1),i===void 0&&(i=e.config.dateFormat),n!==0&&!n||n instanceof Array&&n.length===0)return e.clear(a);ut(n,i),e.latestSelectedDateObj=e.selectedDates[e.selectedDates.length-1],e.redraw(),ae(void 0,a),O(),e.selectedDates.length===0&&e.clear(!1),Le(a),a&&ne("onChange")}function dt(n){return n.slice().map(function(a){return typeof a=="string"||typeof a=="number"||a instanceof Date?e.parseDate(a,void 0,!0):a&&typeof a=="object"&&a.from&&a.to?{from:e.parseDate(a.from,void 0),to:e.parseDate(a.to,void 0)}:a}).filter(function(a){return a})}function Lt(){e.selectedDates=[],e.now=e.parseDate(e.config.now)||new Date;var n=e.config.defaultDate||((e.input.nodeName==="INPUT"||e.input.nodeName==="TEXTAREA")&&e.input.placeholder&&e.input.value===e.input.placeholder?null:e.input.value);n&&ut(n,e.config.dateFormat),e._initialDate=e.selectedDates.length>0?e.selectedDates[0]:e.config.minDate&&e.config.minDate.getTime()>e.now.getTime()?e.config.minDate:e.config.maxDate&&e.config.maxDate.getTime()<e.now.getTime()?e.config.maxDate:e.now,e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth(),e.selectedDates.length>0&&(e.latestSelectedDateObj=e.selectedDates[0]),e.config.minTime!==void 0&&(e.config.minTime=e.parseDate(e.config.minTime,"H:i")),e.config.maxTime!==void 0&&(e.config.maxTime=e.parseDate(e.config.maxTime,"H:i")),e.minDateHasTime=!!e.config.minDate&&(e.config.minDate.getHours()>0||e.config.minDate.getMinutes()>0||e.config.minDate.getSeconds()>0),e.maxDateHasTime=!!e.config.maxDate&&(e.config.maxDate.getHours()>0||e.config.maxDate.getMinutes()>0||e.config.maxDate.getSeconds()>0)}function At(){if(e.input=Z(),!e.input){e.config.errorHandler(new Error("Invalid input element specified"));return}e.input._type=e.input.type,e.input.type="text",e.input.classList.add("flatpickr-input"),e._input=e.input,e.config.altInput&&(e.altInput=Q(e.input.nodeName,e.config.altInputClass),e._input=e.altInput,e.altInput.placeholder=e.input.placeholder,e.altInput.disabled=e.input.disabled,e.altInput.required=e.input.required,e.altInput.tabIndex=e.input.tabIndex,e.altInput.type="text",e.input.setAttribute("type","hidden"),!e.config.static&&e.input.parentNode&&e.input.parentNode.insertBefore(e.altInput,e.input.nextSibling)),e.config.allowInput||e._input.setAttribute("readonly","readonly"),mt()}function mt(){e._positionElement=e.config.positionElement||e._input}function Ot(){var n=e.config.enableTime?e.config.noCalendar?"time":"datetime-local":"date";e.mobileInput=Q("input",e.input.className+" flatpickr-mobile"),e.mobileInput.tabIndex=1,e.mobileInput.type=n,e.mobileInput.disabled=e.input.disabled,e.mobileInput.required=e.input.required,e.mobileInput.placeholder=e.input.placeholder,e.mobileFormatStr=n==="datetime-local"?"Y-m-d\\TH:i:S":n==="date"?"Y-m-d":"H:i:S",e.selectedDates.length>0&&(e.mobileInput.defaultValue=e.mobileInput.value=e.formatDate(e.selectedDates[0],e.mobileFormatStr)),e.config.minDate&&(e.mobileInput.min=e.formatDate(e.config.minDate,"Y-m-d")),e.config.maxDate&&(e.mobileInput.max=e.formatDate(e.config.maxDate,"Y-m-d")),e.input.getAttribute("step")&&(e.mobileInput.step=String(e.input.getAttribute("step"))),e.input.type="hidden",e.altInput!==void 0&&(e.altInput.type="hidden");try{e.input.parentNode&&e.input.parentNode.insertBefore(e.mobileInput,e.input.nextSibling)}catch{}P(e.mobileInput,"change",function(a){e.setDate(ge(a).value,!1,e.mobileFormatStr),ne("onChange"),ne("onClose")})}function Ft(n){if(e.isOpen===!0)return e.close();e.open(n)}function ne(n,a){if(e.config!==void 0){var i=e.config[n];if(i!==void 0&&i.length>0)for(var s=0;i[s]&&s<i.length;s++)i[s](e.selectedDates,e.input.value,e,a);n==="onChange"&&(e.input.dispatchEvent(Ke("change")),e.input.dispatchEvent(Ke("input")))}}function Ke(n){var a=document.createEvent("Event");return a.initEvent(n,!0,!0),a}function Qe(n){for(var a=0;a<e.selectedDates.length;a++){var i=e.selectedDates[a];if(i instanceof Date&&he(i,n)===0)return""+a}return!1}function $t(n){return e.config.mode!=="range"||e.selectedDates.length<2?!1:he(n,e.selectedDates[0])>=0&&he(n,e.selectedDates[1])<=0}function ze(){e.config.noCalendar||e.isMobile||!e.monthNav||(e.yearElements.forEach(function(n,a){var i=new Date(e.currentYear,e.currentMonth,1);i.setMonth(e.currentMonth+a),e.config.showMonths>1||e.config.monthSelectorType==="static"?e.monthElements[a].textContent=Je(i.getMonth(),e.config.shorthandCurrentMonth,e.l10n)+" ":e.monthsDropdownContainer.value=i.getMonth().toString(),n.value=i.getFullYear().toString()}),e._hidePrevMonthArrow=e.config.minDate!==void 0&&(e.currentYear===e.config.minDate.getFullYear()?e.currentMonth<=e.config.minDate.getMonth():e.currentYear<e.config.minDate.getFullYear()),e._hideNextMonthArrow=e.config.maxDate!==void 0&&(e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth+1>e.config.maxDate.getMonth():e.currentYear>e.config.maxDate.getFullYear()))}function Xe(n){var a=n||(e.config.altInput?e.config.altFormat:e.config.dateFormat);return e.selectedDates.map(function(i){return e.formatDate(i,a)}).filter(function(i,s,p){return e.config.mode!=="range"||e.config.enableTime||p.indexOf(i)===s}).join(e.config.mode!=="range"?e.config.conjunction:e.l10n.rangeSeparator)}function Le(n){n===void 0&&(n=!0),e.mobileInput!==void 0&&e.mobileFormatStr&&(e.mobileInput.value=e.latestSelectedDateObj!==void 0?e.formatDate(e.latestSelectedDateObj,e.mobileFormatStr):""),e.input.value=Xe(e.config.dateFormat),e.altInput!==void 0&&(e.altInput.value=Xe(e.config.altFormat)),n!==!1&&ne("onValueUpdate")}function Rt(n){var a=ge(n),i=e.prevMonthNav.contains(a),s=e.nextMonthNav.contains(a);i||s?Se(i?-1:1):e.yearElements.indexOf(a)>=0?a.select():a.classList.contains("arrowUp")?e.changeYear(e.currentYear+1):a.classList.contains("arrowDown")&&e.changeYear(e.currentYear-1)}function jt(n){n.preventDefault();var a=n.type==="keydown",i=ge(n),s=i;e.amPM!==void 0&&i===e.amPM&&(e.amPM.textContent=e.l10n.amPM[be(e.amPM.textContent===e.l10n.amPM[0])]);var p=parseFloat(s.getAttribute("min")),C=parseFloat(s.getAttribute("max")),j=parseFloat(s.getAttribute("step")),I=parseInt(s.value,10),V=n.delta||(a?n.which===38?1:-1:0),S=I+j*V;if(typeof s.value<"u"&&s.value.length===2){var A=s===e.hourElement,X=s===e.minuteElement;S<p?(S=C+S+be(!A)+(be(A)&&be(!e.amPM)),X&&te(void 0,-1,e.hourElement)):S>C&&(S=s===e.hourElement?S-C-be(!e.amPM):p,X&&te(void 0,1,e.hourElement)),e.amPM&&A&&(j===1?S+I===23:Math.abs(S-I)>j)&&(e.amPM.textContent=e.l10n.amPM[be(e.amPM.textContent===e.l10n.amPM[0])]),s.value=me(S)}}return x(),e}function Be(t,o){for(var e=Array.prototype.slice.call(t).filter(function(y){return y instanceof HTMLElement}),m=[],x=0;x<e.length;x++){var f=e[x];try{if(f.getAttribute("data-fp-omit")!==null)continue;f._flatpickr!==void 0&&(f._flatpickr.destroy(),f._flatpickr=void 0),f._flatpickr=hn(f,o||{}),m.push(f._flatpickr)}catch(y){console.error(y)}}return m.length===1?m[0]:m}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(t){return Be(this,t)},HTMLElement.prototype.flatpickr=function(t){return Be([this],t)});var le=function(t,o){return typeof t=="string"?Be(window.document.querySelectorAll(t),o):t instanceof Node?Be([t],o):Be(t,o)};le.defaultConfig={};le.l10ns={en:ce({},Ue),default:ce({},Ue)};le.localize=function(t){le.l10ns.default=ce(ce({},le.l10ns.default),t)};le.setDefaults=function(t){le.defaultConfig=ce(ce({},le.defaultConfig),t)};le.parseDate=st({});le.formatDate=Tt({});le.compareDates=he;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(t){return Be(this,t)});Date.prototype.fp_incr=function(t){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof t=="string"?parseInt(t,10):t))};typeof window<"u"&&(window.flatpickr=le);var vt;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(vt||(vt={}));const vn=Object.freeze({x:0,y:0});var He;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(He||(He={}));var bt;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(bt||(bt={}));var xe;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(xe||(xe={}));xe.Space,xe.Enter,xe.Esc,xe.Space,xe.Enter,xe.Tab;var yt;(function(t){t[t.RightClick=2]="RightClick"})(yt||(yt={}));var xt;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(xt||(xt={}));var wt;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(wt||(wt={}));He.Backward+"",He.Forward+"",He.Backward+"",He.Forward+"";var ct;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(ct||(ct={}));var ft;(function(t){t.Optimized="optimized"})(ft||(ft={}));ct.WhileDragging,ft.Optimized;({...vn});var Ct;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Ct||(Ct={}));xe.Down,xe.Right,xe.Up,xe.Left;class bn{constructor(o,e){this.reactRoot=null,this.value={library:"",value:""},this.$root=o,this.onChange=e,this.mount()}mount(){const o=document.createElement("div");o.className="fse-icon-picker-wrapper",this.$root.appendChild(o),this.reactRoot=Zt(o),this.render()}render(){this.reactRoot&&this.reactRoot.render(React.createElement(fn,{label:"",value:this.value,onChange:o=>{this.value=o,this.onChange(o)}}))}preview(){}openLibrary(){const o=this.$root.querySelector('button[title="Icon Library"]');o&&o.click()}uploadSVG(){const o=this.$root.querySelector('button[title="Upload SVG"]');o&&o.click()}destroy(){this.reactRoot&&(this.reactRoot.unmount(),this.reactRoot=null)}}window.Voxel_Icon_Picker=bn;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{console.log("Voxel Icon Picker (React) loaded")}):console.log("Voxel Icon Picker (React) loaded");
