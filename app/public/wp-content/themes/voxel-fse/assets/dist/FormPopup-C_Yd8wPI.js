import e,{useRef as E,useState as Y,useCallback as Z,useEffect as v}from"react";import{createPortal as j}from"react-dom";const Q=({isOpen:r,popupId:W,target:f,title:C="",icon:w="",saveLabel:F="Save",clearLabel:z="Clear",clearButton:A=!0,showHeader:B=!0,showFooter:q=!0,onSave:g,onClear:y,onClose:i,children:D,popupClass:M="",minWidth:L,headerActions:P})=>{const d=E(null),o=E(null),[$,H]=Y({}),N=E(""),m=Z(()=>{if(!o.current||!f||!d.current)return;const t=f,n=d.current,l=o.current,c=document.body.clientWidth,a=t.getBoundingClientRect(),x=t.offsetWidth,u={left:a.left+window.pageXOffset,top:a.top+window.pageYOffset},h=n.getBoundingClientRect(),I=window.getComputedStyle(l),O=parseFloat(I.minWidth)||0,T=L||O,_=Math.min(1140,c-40),p=Math.max(a.width,T||_),J=u.left+x/2>c/2+1;let s;J?s=u.left-p+x:s=u.left,s<0&&(s=10),s+p>c&&(s=c-p-10);let R=u.top+a.height;const X=window.innerHeight;a.bottom+h.height>X&&a.top-h.height>=0&&(R=u.top-h.height);const k={top:`${R}px`,left:`${s}px`,width:`${p}px`,position:"absolute"},S=JSON.stringify(k);S!==N.current&&(N.current=S,H(k))},[f,L]);if(v(()=>{if(!r)return;const t=n=>{n.key==="Escape"&&i()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[r,i]),v(()=>{if(!r)return;const t=l=>{const c=l.target;o.current?.contains(c)||i()},n=requestAnimationFrame(()=>{document.addEventListener("mousedown",t)});return()=>{cancelAnimationFrame(n),document.removeEventListener("mousedown",t)}},[r,i]),v(()=>{if(!r)return;requestAnimationFrame(()=>{requestAnimationFrame(()=>{m()})});const t=()=>m();window.addEventListener("scroll",t,!0);const n=()=>m();window.addEventListener("resize",n,!0);let l=null;return o.current&&(l=new ResizeObserver(()=>{requestAnimationFrame(()=>m())}),l.observe(o.current)),()=>{window.removeEventListener("scroll",t,!0),window.removeEventListener("resize",n,!0),l?.disconnect()}},[r,m]),!r)return null;const b=()=>e.createElement("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M14 1.41L12.59 0L7 5.59L1.41 0L0 1.41L5.59 7L0 12.59L1.41 14L7 8.41L12.59 14L14 12.59L8.41 7L14 1.41Z",fill:"currentColor"}));return j(e.createElement("div",{className:`elementor vx-popup ${M}`.trim()},e.createElement("div",{className:"ts-popup-root elementor-element"},e.createElement("div",{ref:d,className:"ts-form elementor-element",style:$},e.createElement("div",{className:"ts-field-popup-container"},e.createElement("div",{id:W,ref:o,className:"ts-field-popup triggers-blur"},B&&e.createElement("div",{className:"ts-popup-head flexify ts-sticky-top"},e.createElement("div",{className:"ts-popup-name flexify"},w&&e.createElement("span",{dangerouslySetInnerHTML:{__html:w}}),e.createElement("span",null,C)),e.createElement("ul",{className:"flexify simplify-ul"},P,e.createElement("li",{className:"flexify ts-popup-close"},e.createElement("a",{href:"#",onClick:t=>{t.preventDefault(),i()},className:"ts-icon-btn","aria-label":"Close"},e.createElement(b,null))))),e.createElement("div",{className:"ts-popup-content-wrapper min-scroll"},D),q&&e.createElement("div",{className:"ts-popup-controller"},e.createElement("ul",{className:"flexify simplify-ul"},e.createElement("li",{className:"flexify ts-popup-close"},e.createElement("a",{href:"#",onClick:t=>{t.preventDefault(),i()},className:"ts-icon-btn","aria-label":"Close"},e.createElement(b,null))),A&&y&&e.createElement("li",{className:"flexify"},e.createElement("a",{href:"#",onClick:t=>{t.preventDefault(),y()},className:"ts-btn ts-btn-1"},z)),g&&e.createElement("li",{className:"flexify"},e.createElement("a",{href:"#",onClick:t=>{t.preventDefault(),g()},className:"ts-btn ts-btn-2"},F))))))))),document.body)};export{Q as F};
