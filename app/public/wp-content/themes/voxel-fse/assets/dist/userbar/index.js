import{registerBlockType as we}from"@wordpress/blocks";import{useBlockProps as xe,InspectorControls as _e}from"@wordpress/block-editor";import{__ as i}from"@wordpress/i18n";import{useState as T,useRef as U,useCallback as k,useEffect as se,useMemo as ve}from"react";import ke from"@wordpress/api-fetch";import{A as Re,a as ce,S as J,E as Se,R as P,C as L,D as ge,c as he,T as Te}from"../TypographyPopup-CAcEJ5NA.js";import{I as Me}from"../InspectorTabs-Bq2wAh4W.js";import{SelectControl as H,TextControl as ee,ToggleControl as te}from"@wordpress/components";import"@wordpress/data";/* empty css                            */import"../RepeaterControl-C7JnAhZL.js";import"../voxelShim-DB_Ue-9R.js";import{g as Ee}from"../useAdvancedTabProps-BnJDQbKr.js";import{r as Ne}from"../backgroundElements-Ui-iCrLV.js";import{A as q}from"../AdvancedIconControl-CJ_DCTeD.js";import{L as Ie}from"../LoopElementModal-CaevVMh1.js";import{R as Be,L as Ve}from"../RepeaterControl-B_ulBkEL.js";import{P as Oe}from"../PopupCustomStyleControl-XQPXOL9P.js";import{F as ie}from"../FormPopup-DDYHzYWU.js";import{E as le}from"../EmptyPlaceholder-BsL18qxN.js";import{V as je}from"../VoxelGridIcon-D5dF5acW.js";import"react-dom";import"../generateAdvancedStyles-CRpLcHXt.js";import"../generateVoxelStyles-oZeaeuKH.js";const Le={_id:"",componentType:"notifications",chooseMenu:"",icon:{library:"icon",value:"las la-bell"},componentUrl:{url:"",is_external:!0,nofollow:!0},componentTitle:"",messagesTitle:"Messages",wpMenuTitle:"Menu",notificationsTitle:"Notifications",cartTitle:"Cart",labelVisibility:!1,labelVisibilityDesktop:"none",labelVisibilityTablet:"none",labelVisibilityMobile:"none",componentVisibility:!1,userBarVisibilityDesktop:"flex",userBarVisibilityTablet:"flex",userBarVisibilityMobile:"flex",rowVisibility:"show",visibilityRules:[]},ze=[{label:i("Notifications","voxel-fse"),value:"notifications"},{label:i("Cart","voxel-fse"),value:"cart"},{label:i("Messages","voxel-fse"),value:"messages"},{label:i("User Menu","voxel-fse"),value:"user_menu"},{label:i("Menu","voxel-fse"),value:"select_wp_menu"},{label:i("Custom link","voxel-fse"),value:"link"}],ae=[{label:i("Show","voxel-fse"),value:"flex"},{label:i("Hide","voxel-fse"),value:"none"}];function Pe({attributes:e,setAttributes:t,navMenus:a}){const[u,d]=T(null),[r,g]=T(null),$=o=>{switch(o.componentType){case"notifications":return o.notificationsTitle||"Notifications";case"messages":return o.messagesTitle||"Messages";case"cart":return o.cartTitle||"Cart";case"user_menu":case"select_wp_menu":return o.wpMenuTitle||"Menu";case"link":return o.componentTitle||"Link";default:return o.componentType}},l=(o,p)=>{t({icons:{...e.icons,[o]:p}})},v=(o,p)=>{const h=[...e.items];h[o]={...h[o],...p},t({items:h})};return React.createElement(React.Fragment,null,React.createElement("div",{className:"voxel-inspector-section"},React.createElement(Re,{defaultPanel:"items"},React.createElement(ce,{id:"items",title:i("User area components","voxel-fse")},React.createElement(Be,{items:e.items,onChange:o=>t({items:o}),getItemLabel:o=>$(o),createItem:()=>({...Le,_id:`item-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,rowVisibility:"show",visibilityRules:[],userBarVisibilityDesktop:"flex",userBarVisibilityTablet:"flex",userBarVisibilityMobile:"flex"}),renderContent:({item:o,index:p,onUpdate:h})=>{const m=(c,F)=>{h({[c]:F})};return React.createElement("div",{className:"voxel-repeater-content"},React.createElement(J,{label:i("Component details","voxel-fse")}),React.createElement(H,{label:i("Component type","voxel-fse"),value:o.componentType,options:ze,onChange:c=>m("componentType",c)}),(o.componentType==="user_menu"||o.componentType==="select_wp_menu")&&React.createElement(H,{label:i("Choose menu","voxel-fse"),value:o.chooseMenu,options:a,onChange:c=>m("chooseMenu",c)}),React.createElement(q,{label:i("Icon","voxel-fse"),value:o.icon,onChange:c=>m("icon",c)}),o.componentType==="link"&&React.createElement(React.Fragment,null,React.createElement(ee,{label:i("Link URL","voxel-fse"),value:o.componentUrl.url,onChange:c=>m("componentUrl",{...o.componentUrl,url:c}),placeholder:"https://your-link.com"}),React.createElement(te,{label:i("Open in new tab","voxel-fse"),checked:o.componentUrl.is_external,onChange:c=>m("componentUrl",{...o.componentUrl,is_external:c})})),o.componentType==="link"&&React.createElement(ee,{label:i("Label","voxel-fse"),value:o.componentTitle,onChange:c=>m("componentTitle",c)}),o.componentType==="messages"&&React.createElement(ee,{label:i("Label","voxel-fse"),value:o.messagesTitle,onChange:c=>m("messagesTitle",c)}),o.componentType==="select_wp_menu"&&React.createElement(ee,{label:i("Label","voxel-fse"),value:o.wpMenuTitle,onChange:c=>m("wpMenuTitle",c)}),o.componentType==="notifications"&&React.createElement(ee,{label:i("Label","voxel-fse"),value:o.notificationsTitle,onChange:c=>m("notificationsTitle",c)}),o.componentType==="cart"&&React.createElement(ee,{label:i("Label","voxel-fse"),value:o.cartTitle,onChange:c=>m("cartTitle",c)}),React.createElement("hr",{style:{margin:"16px 0",border:"none",borderTop:"1px solid #ddd"}}),React.createElement(te,{label:i("Enable label visibility","voxel-fse"),checked:o.labelVisibility,onChange:c=>m("labelVisibility",c)}),o.labelVisibility&&React.createElement(React.Fragment,null,React.createElement(H,{label:i("Show on desktop","voxel-fse"),value:o.labelVisibilityDesktop,options:ae,onChange:c=>m("labelVisibilityDesktop",c)}),React.createElement(H,{label:i("Show on tablet","voxel-fse"),value:o.labelVisibilityTablet,options:ae,onChange:c=>m("labelVisibilityTablet",c)}),React.createElement(H,{label:i("Show on mobile","voxel-fse"),value:o.labelVisibilityMobile,options:ae,onChange:c=>m("labelVisibilityMobile",c)})),React.createElement("hr",{style:{margin:"16px 0",border:"none",borderTop:"1px solid #ddd"}}),React.createElement(te,{label:i("Component visibility","voxel-fse"),checked:o.componentVisibility,onChange:c=>m("componentVisibility",c)}),o.componentVisibility&&React.createElement(React.Fragment,null,React.createElement(H,{label:i("Show on desktop","voxel-fse"),value:o.userBarVisibilityDesktop,options:ae,onChange:c=>m("userBarVisibilityDesktop",c)}),React.createElement(H,{label:i("Show on tablet","voxel-fse"),value:o.userBarVisibilityTablet,options:ae,onChange:c=>m("userBarVisibilityTablet",c)}),React.createElement(H,{label:i("Show on mobile","voxel-fse"),value:o.userBarVisibilityMobile,options:ae,onChange:c=>m("userBarVisibilityMobile",c)})),React.createElement(Ve,{itemId:o._id,rowVisibility:o.rowVisibility||"show",onRowVisibilityChange:c=>m("rowVisibility",c),visibilityRules:o.visibilityRules||[],onEditVisibilityRules:()=>d(p),onClearVisibilityRules:()=>m("visibilityRules",[]),showLoopSection:!0,loopSource:o.loopSource,loopProperty:o.loopProperty,loopLimit:o.loopLimit,loopOffset:o.loopOffset,onEditLoop:()=>g(p),onClearLoop:()=>{m("loopSource",""),m("loopProperty","")},onLoopLimitChange:c=>m("loopLimit",c),onLoopOffsetChange:c=>m("loopOffset",c)}))}})),React.createElement(ce,{id:"icons",title:i("Icons","voxel-fse")},React.createElement(q,{label:i("Down arrow","voxel-fse"),value:e.icons.downArrow,onChange:o=>l("downArrow",o)}),React.createElement(q,{label:i("Right arrow","voxel-fse"),value:e.icons.rightArrow,onChange:o=>l("rightArrow",o)}),React.createElement(q,{label:i("Left arrow","voxel-fse"),value:e.icons.leftArrow,onChange:o=>l("leftArrow",o)}),React.createElement(q,{label:i("Close icon","voxel-fse"),value:e.icons.close,onChange:o=>l("close",o)}),React.createElement(q,{label:i("Trash icon","voxel-fse"),value:e.icons.trash,onChange:o=>l("trash",o)}),React.createElement(q,{label:i("Inbox icon","voxel-fse"),value:e.icons.inbox,onChange:o=>l("inbox",o)}),React.createElement(q,{label:i("Load more icon","voxel-fse"),value:e.icons.loadMore,onChange:o=>l("loadMore",o)})))),u!==null&&React.createElement(Se,{isOpen:!0,rules:e.items[u].visibilityRules||[],onClose:()=>d(null),onSave:o=>{v(u,{visibilityRules:o})}}),r!==null&&React.createElement(Ie,{isOpen:!0,config:{source:e.items[r].loopSource,property:e.items[r].loopProperty},onClose:()=>g(null),onSave:o=>{v(r,{loopSource:o.source,loopProperty:o.property})}}))}const He=[{label:i("Left","voxel-fse"),value:"left"},{label:i("Center","voxel-fse"),value:"center"},{label:i("Right","voxel-fse"),value:"right"},{label:i("Space between","voxel-fse"),value:"space-between"},{label:i("Space around","voxel-fse"),value:"space-around"}];function Ae({attributes:e,setAttributes:t}){return React.createElement(React.Fragment,null,React.createElement("div",{className:"voxel-inspector-section"},React.createElement(Re,{defaultPanel:"general"},React.createElement(ce,{id:"general",title:i("User area: General","voxel-fse")},React.createElement(J,{label:i("Layout","voxel-fse")}),React.createElement(H,{label:i("Align items","voxel-fse"),value:e.itemsAlign,options:He,onChange:a=>t({itemsAlign:a})}),React.createElement(te,{label:i("Vertical orientation?","voxel-fse"),checked:e.verticalOrientation,onChange:a=>t({verticalOrientation:a})}),e.verticalOrientation&&React.createElement(H,{label:i("Align item content","voxel-fse"),value:e.itemContentAlign,options:[{label:i("Left","voxel-fse"),value:"left"},{label:i("Center","voxel-fse"),value:"center"},{label:i("Right","voxel-fse"),value:"right"}],onChange:a=>t({itemContentAlign:a})}),React.createElement(J,{label:i("Item","voxel-fse")}),React.createElement(P,{label:i("Gap","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"itemGap",min:0,max:50}),React.createElement(L,{label:i("Item background","voxel-fse"),value:e.itemBackground,onChange:a=>t({itemBackground:a??""})}),React.createElement(L,{label:i("Item background (hover)","voxel-fse"),value:e.itemBackgroundHover,onChange:a=>t({itemBackgroundHover:a??"#fff"})}),React.createElement(P,{label:i("Item border radius","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"itemBorderRadius",min:0,max:100}),React.createElement(ge,{label:i("Margin","voxel-fse"),values:e.itemMargin||{top:"",right:"",bottom:"",left:""},onChange:a=>t({itemMargin:{...a,unit:"px"}}),availableUnits:["px","%","em"]}),React.createElement(ge,{label:i("Padding","voxel-fse"),values:e.itemPadding||{top:"",right:"",bottom:"",left:""},onChange:a=>t({itemPadding:{...a,unit:"px"}}),availableUnits:["px","%","em"]}),React.createElement(he,{label:i("Box shadow","voxel-fse"),attributes:e,setAttributes:t,shadowAttributeName:"itemBoxShadow"}),React.createElement(he,{label:i("Box shadow (hover)","voxel-fse"),attributes:e,setAttributes:t,shadowAttributeName:"itemBoxShadowHover"}),React.createElement(P,{label:i("Item content gap","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"itemContentGap",min:0,max:50}),React.createElement(J,{label:i("Item icon","voxel-fse")}),React.createElement(P,{label:i("Container size","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"iconContainerSize",min:30,max:80}),React.createElement(P,{label:i("Container border radius","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"iconContainerRadius",min:0,max:100}),React.createElement(L,{label:i("Container background","voxel-fse"),value:e.iconContainerBackground,onChange:a=>t({iconContainerBackground:a??""})}),React.createElement(L,{label:i("Container background (hover)","voxel-fse"),value:e.iconContainerBackgroundHover,onChange:a=>t({iconContainerBackgroundHover:a??""})}),React.createElement(P,{label:i("Icon size","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"iconSize",min:10,max:50}),React.createElement(L,{label:i("Icon color","voxel-fse"),value:e.iconColor,onChange:a=>t({iconColor:a??""})}),React.createElement(L,{label:i("Icon color (hover)","voxel-fse"),value:e.iconColorHover,onChange:a=>t({iconColorHover:a??""})}),React.createElement(J,{label:i("Unread indicator","voxel-fse")}),React.createElement(L,{label:i("Unread indicator color","voxel-fse"),value:e.unreadIndicatorColor,onChange:a=>t({unreadIndicatorColor:a??""})}),React.createElement(P,{label:i("Indicator top margin","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"unreadIndicatorMargin",min:0,max:50}),React.createElement(P,{label:i("Indicator size","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"unreadIndicatorSize",min:0,max:50}),React.createElement(J,{label:i("Avatar","voxel-fse")}),React.createElement(P,{label:i("Avatar size","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"avatarSize",min:20,max:100}),React.createElement(P,{label:i("Avatar radius","voxel-fse"),attributes:e,setAttributes:t,attributeBaseName:"avatarRadius",min:0,max:100}),React.createElement(J,{label:i("Item label","voxel-fse")}),React.createElement(Te,{label:i("Typography","voxel-fse"),value:e.labelTypography,onChange:a=>t({labelTypography:a})}),React.createElement(L,{label:i("Color","voxel-fse"),value:e.labelColor,onChange:a=>t({labelColor:a??""})}),React.createElement(L,{label:i("Color (hover)","voxel-fse"),value:e.labelColorHover,onChange:a=>t({labelColorHover:a??""})}),React.createElement(J,{label:i("Chevron","voxel-fse")}),React.createElement(L,{label:i("Chevron color","voxel-fse"),value:e.chevronColor,onChange:a=>t({chevronColor:a??""})}),React.createElement(L,{label:i("Chevron color (hover)","voxel-fse"),value:e.chevronColorHover,onChange:a=>t({chevronColorHover:a??""})}),React.createElement(te,{label:i("Hide chevron","voxel-fse"),checked:e.hideChevron,onChange:a=>t({hideChevron:a})})),React.createElement(ce,{id:"popups",title:i("Popups: Custom style","voxel-fse")},React.createElement(Oe,{attributes:e,setAttributes:t})))))}function K(){return window.VoxelFSEUserbar??null}function A(e){const t=window.Voxel_Config;return t?.ajax_url?`${t.ajax_url}&action=${e}`:`${t?.site_url||window.location.origin}/?vx=1&action=${e}`}function Y(){const e=K();return e?e.isLoggedIn:window.Voxel_Config?.is_logged_in??!1}function S(e,t="error"){const a=window.Voxel;a?.alert?a.alert(e,t):console.error(`[Userbar] ${t}: ${e}`)}function E(e,t){const a=K();if(a?.l10n){const d=a.l10n;if(d[e])return d[e]}return window.Voxel_Config?.l10n?.[e]??t}function Ce(e){return K()?.nonces?.[e]??""}function be(e,t){const a=window.Voxel;return a?.helpers?.currencyFormat?a.helpers.currencyFormat(e,t):`$${(e/100).toFixed(2)}`}function re(e){return!e||!e.value?null:e.library==="svg"&&e.value?React.createElement("img",{src:e.value,alt:"",style:{width:"1em",height:"1em"}}):e.library==="icon"&&e.value?React.createElement("i",{className:e.value,"aria-hidden":"true"}):null}function Ue({item:e,icons:t,context:a,popupScopeClass:u}){const[d,r]=T(!1),g=U(null),$=U(null),v=K()?.unread?.notifications??0,[o,p]=T(null),[h,m]=T(!1),[c,F]=T(!0),[D,_]=T(!1),[b,B]=T(1),[w,z]=T(null),V=U(0),O=k(async(s=1)=>{_(!0);try{const x=A("notifications.list"),y=await(await fetch(`${x}&pg=${s}`)).json();y.success?(p(I=>s===1?y.list:[...I||[],...y.list]),m(y.has_more)):S(y.message||E("ajaxError","An error occurred"))}catch{S(E("ajaxError","An error occurred"))}finally{F(!1),_(!1)}},[]),Q=k(()=>{a==="frontend"&&(o===null&&(p([]),$.current?.classList.add("hidden"),O(1)),r(!0))},[a,o,O]),pe=k(()=>{const s=b+1;B(s),O(s)},[b,O]),Z=k(async()=>{const s=E("confirmClear","Clear all notifications?");if(window.confirm(s))try{const x=A("notifications.clear_all"),y=await(await fetch(x)).json();y.success?p([]):S(y.message||E("ajaxError","An error occurred"))}catch{S(E("ajaxError","An error occurred"))}},[]),oe=k(()=>{z(null),requestAnimationFrame(()=>{const s=document.querySelector(".min-scroll");s&&(s.scrollTop=V.current)})},[]),G=k(async s=>{if(s.links_to==="(details)"){const x=document.querySelector(".min-scroll");x&&(V.current=x.scrollTop),s.actions===void 0?(p(R=>R?.map(y=>y.id===s.id?{...y,seen:!0}:y)||null),W(s)):(z(s),requestAnimationFrame(()=>{const R=document.querySelector(".min-scroll");R&&(R.scrollTop=0)}))}else{p(x=>x?.map(R=>R.id===s.id?{...R,_loading:!0}:R)||null);try{const x=A("notifications.open"),y=await(await fetch(`${x}&item_id=${s.id}`)).json();y.success?(p(I=>I?.map(n=>n.id===s.id?{...n,seen:!0,_loading:!1}:n)||null),y.redirect_to&&(window.location.href=y.redirect_to)):(S(y.message||E("ajaxError","An error occurred")),p(I=>I?.map(n=>n.id===s.id?{...n,_loading:!1}:n)||null))}catch{S(E("ajaxError","An error occurred")),p(x=>x?.map(R=>R.id===s.id?{...R,_loading:!1}:R)||null)}}},[]),W=k(async(s,x=1)=>{p(R=>R?.map(y=>y.id===s.id?{...y,_loading:!0,actions_page:x}:y)||null);try{const R=A("notifications.get_actions"),I=await(await fetch(`${R}&item_id=${s.id}&pg=${x}`)).json();if(I.success){const n={...s,actions:x===1?I.actions:[...s.actions||[],...I.actions],actions_page:x,_loading:!1,seen:!0};p(f=>f?.map(C=>C.id===s.id?n:C)||null),z(n),x===1&&requestAnimationFrame(()=>{const f=document.querySelector(".min-scroll");f&&(f.scrollTop=0)})}else S(I.message||E("ajaxError","An error occurred")),p(n=>n?.map(f=>f.id===s.id?{...f,_loading:!1,seen:!0}:f)||null)}catch{S(E("ajaxError","An error occurred")),p(R=>R?.map(y=>y.id===s.id?{...y,_loading:!1}:y)||null)}},[]),X=k(async(s,x,R)=>{const y=R?.key||x.key;if(!y)return;const I=n=>{w&&z({...w,actions:w.actions?.map(f=>f===x?{...f,_loading:n}:f)})};I(!0);try{const n=A("notifications.run_action"),C=await(await fetch(`${n}&item_id=${s.id}&action_key=${y}&pg=${x._page||1}`)).json();if(C.success){if(C.updated_action&&w?.actions){const j=w.actions.indexOf(x);if(j!==-1){const N=[...w.actions];N[j]=C.updated_action,z({...w,actions:N})}}C.redirect_to&&(window.location.href=C.redirect_to)}else S(C.message||E("ajaxError","An error occurred"))}catch{S(E("ajaxError","An error occurred"))}finally{I(!1)}},[w]),ne=s=>React.createElement("div",{key:s.id,className:`ts-notification-item ${s.seen?"":"ts-unread"} ${s._loading?"vx-pending":""}`,onClick:()=>G(s)},s.image_url&&React.createElement("div",{className:"ts-notification-image"},React.createElement("img",{src:s.image_url,alt:""})),React.createElement("div",{className:"ts-notification-body"},React.createElement("span",{className:"ts-notification-subject"},s.subject),React.createElement("span",{className:"ts-notification-time"},s.time))),de=(s,x)=>s.type==="list-item"?React.createElement("div",{key:s.key,className:`ts-action-item ${s._loading?"vx-pending":""}`,onClick:()=>s.links_to?window.location.href=s.links_to:X(x,s)},s.image_markup&&React.createElement("div",{className:"ts-action-image",dangerouslySetInnerHTML:{__html:s.image_markup}}),React.createElement("div",{className:"ts-action-body"},s.subject&&React.createElement("span",{className:"ts-action-subject"},s.subject),s.details&&React.createElement("span",{className:"ts-action-details"},s.details)),s.actions&&s.actions.length>0&&React.createElement("div",{className:"ts-action-buttons"},s.actions.map(R=>React.createElement("button",{key:R.key,className:"ts-btn ts-btn-1",onClick:y=>{y.stopPropagation(),X(x,s,R)}},R.label)))):s.type==="button"?React.createElement("button",{key:s.key,className:`ts-btn ts-btn-1 ${s._loading?"vx-pending":""}`,onClick:()=>X(x,s)},s.label):null;return React.createElement("li",{className:`ts-notifications-wrapper elementor-repeater-item-${e._id}`},React.createElement("a",{ref:g,href:"#",onClick:s=>{s.preventDefault(),Q()},role:"button","aria-label":e.notificationsTitle||"Notifications"},React.createElement("div",{className:"ts-comp-icon flexify"},re(e.icon),a==="frontend"&&Y()&&React.createElement("span",{ref:$,className:"unread-indicator",style:{display:v>0?void 0:"none"}})),React.createElement("span",{className:"ts_comp_label"},e.notificationsTitle||"Notifications")),a==="frontend"&&React.createElement(ie,{isOpen:d,popupId:`notifications-popup-${e._id}`,target:g.current,title:e.notificationsTitle||"Notifications",icon:e.icon?.value?`<i class="${e.icon.value}"></i>`:"",onClose:()=>{r(!1),z(null)},showFooter:!1,popupClass:`md-width ${u||""}`.trim()},React.createElement("div",{className:"ts-notifications-list min-scroll"},o&&o.length>0&&!w&&React.createElement("div",{className:"ts-notifications-header flexify"},React.createElement("button",{className:"ts-btn ts-btn-1",onClick:Z},E("clearAll","Clear all"))),c&&React.createElement(le,null),w&&React.createElement("div",{className:"ts-notification-details"},React.createElement("button",{className:"ts-btn ts-btn-1 ts-back-btn",onClick:oe},React.createElement("i",{className:"las la-arrow-left"}),E("back","Back")),React.createElement("div",{className:"ts-notification-content"},React.createElement("span",{className:"ts-notification-subject"},w.subject),React.createElement("span",{className:"ts-notification-time"},w.time)),w.actions&&React.createElement("div",{className:"ts-notification-actions"},w.actions.map(s=>de(s,w))),w._loading&&React.createElement("div",{className:"ts-loader"})),!c&&!w&&React.createElement(React.Fragment,null,o&&o.length>0?React.createElement(React.Fragment,null,o.map(ne),h&&React.createElement("button",{className:`ts-btn ts-btn-1 ts-load-more ${D?"vx-pending":""}`,onClick:pe,disabled:D},D?React.createElement("span",{className:"ts-loader"}):E("loadMore","Load more"))):React.createElement(le,null)))))}function Fe({item:e,icons:t,context:a,popupScopeClass:u,nonce:d}){const[r,g]=T(!1),$=U(null),l=U(null),v=K(),o=d||Ce("chat"),p=v?.unread?.messages??!1,[h,m]=T({list:null,hasMore:!1,loading:!0,loadingMore:!1,page:1}),c=k(async(b=1)=>{m(B=>({...B,loadingMore:!0}));try{const B=A("inbox.list_chats"),w=new FormData;w.append("pg",b.toString()),o&&w.append("_wpnonce",o);const V=await(await fetch(B,{method:"POST",body:w})).json();V.success?m(O=>({...O,list:b===1?V.list:[...O.list||[],...V.list],hasMore:V.has_more,loading:!1,loadingMore:!1})):(S(V.message||E("ajaxError","An error occurred")),m(O=>({...O,loading:!1,loadingMore:!1})))}catch{S(E("ajaxError","An error occurred")),m(B=>({...B,loading:!1,loadingMore:!1}))}},[o]),F=k(()=>{a==="frontend"&&(g(!0),h.list===null&&(m(b=>({...b,list:[]})),l.current?.classList.add("hidden"),c(1)))},[a,h.list,c]),D=k(()=>{const b=h.page+1;m(B=>({...B,page:b})),c(b)},[h.page,c]),_=b=>React.createElement("a",{key:b.id,href:b.link,className:`ts-chat-item ${b.seen?"":"ts-unread"}`},React.createElement("div",{className:"ts-chat-avatar"},React.createElement("img",{src:b.target.avatar,alt:b.target.name})),React.createElement("div",{className:"ts-chat-body"},React.createElement("span",{className:"ts-chat-name"},b.target.name),React.createElement("span",{className:"ts-chat-excerpt"},b.excerpt),React.createElement("span",{className:"ts-chat-time"},b.time)));return React.createElement("li",{className:`ts-popup-messages elementor-repeater-item-${e._id}`},React.createElement("a",{ref:$,href:"#",onClick:b=>{b.preventDefault(),F()},role:"button","aria-label":e.messagesTitle||"Messages"},React.createElement("div",{className:"ts-comp-icon flexify"},re(e.icon),a==="frontend"&&Y()&&React.createElement("span",{ref:l,className:"unread-indicator",style:{display:p?void 0:"none"}})),React.createElement("span",{className:"ts_comp_label"},e.messagesTitle||"Messages")),a==="frontend"&&React.createElement(ie,{isOpen:r,popupId:`messages-popup-${e._id}`,target:$.current,title:e.messagesTitle||"Messages",icon:e.icon?.value?`<i class="${e.icon.value}"></i>`:"",onClose:()=>g(!1),showFooter:!1,popupClass:`md-width ${u||""}`.trim()},React.createElement("div",{className:"ts-chats-list min-scroll"},h.loading&&React.createElement("div",{className:"ts-empty-user-tab"},React.createElement("div",{className:"ts-loader"})),!h.loading&&React.createElement(React.Fragment,null,h.list&&h.list.length>0?React.createElement(React.Fragment,null,h.list.map(_),h.hasMore&&React.createElement("button",{className:`ts-btn ts-btn-1 ts-load-more ${h.loadingMore?"vx-pending":""}`,onClick:D,disabled:h.loadingMore},h.loadingMore?React.createElement("span",{className:"ts-loader"}):E("loadMore","Load more"))):React.createElement(le,null)))))}function De({item:e,icons:t,context:a,popupScopeClass:u,nonce:d,isCartEmpty:r}){const[g,$]=T(!1),l=U(null),v=U(null),o=K(),p=d||Ce("cart"),h=r??o?.isCartEmpty??!0,[m,c]=T(!0),[F,D]=T(!1),[_,b]=T(null),[B,w]=T(""),[z,V]=T(!1),O=U(!1),Q=()=>!m&&_!==null&&Object.keys(_).length>0,pe=()=>F?Q():Y()?!h:!!localStorage.getItem("voxel:guest_cart"),Z=n=>n.product_mode==="regular"?n.value.stock?.quantity||0:n.product_mode==="variable"&&n.value.variations?.quantity||0,oe=()=>{if(!Q()||!_)return 0;let n=0;return Object.values(_).forEach(f=>{n+=f.pricing.total_amount}),n},G=k(()=>{if(!_||Object.keys(_).length===0){localStorage.removeItem("voxel:guest_cart");return}const n={};Object.values(_).forEach(f=>{n[f.key]=f.value}),localStorage.setItem("voxel:guest_cart",JSON.stringify(n))},[_]),W=k(async()=>{const n=Y(),f=n?"products.get_cart_items":"products.get_guest_cart_items";try{const C=A(f),j=new FormData;p&&j.append("_wpnonce",p),j.append("guest_cart",localStorage.getItem("voxel:guest_cart")||"");const M=await(await fetch(C,{method:"POST",body:j})).json();c(!1),D(!0),n&&localStorage.removeItem("voxel:guest_cart"),M.success?(b(Object.keys(M.items).length?M.items:{}),w(M.checkout_link),n||setTimeout(()=>G(),0)):S(M.message||E("ajaxError","An error occurred"))}catch{c(!1),D(!0),S(E("ajaxError","An error occurred"))}},[d,G]),X=k(()=>{if(a!=="frontend")return;const n=document.querySelector(".ts-checkout");if(n){window.Voxel?.scrollTo?.(n);return}$(!0),_===null&&(b({}),W())},[a,_,W]),ne=k(async n=>{if(Y()){b(f=>f?{...f,[n.key]:{...f[n.key],_disabled:!0}}:null);try{const f=A("products.remove_cart_item"),C=new FormData;C.append("item_key",n.key),p&&C.append("_wpnonce",p);const N=await(await fetch(f,{method:"POST",body:C})).json();N.success?b(M=>{if(!M)return null;const me={...M};return delete me[n.key],me}):(b(M=>M?{...M,[n.key]:{...M[n.key],_disabled:!1}}:null),S(N.message||E("ajaxError","An error occurred")))}catch{b(f=>f?{...f,[n.key]:{...f[n.key],_disabled:!1}}:null),S(E("ajaxError","An error occurred"))}}else b(f=>{if(!f)return null;const C={...f};return delete C[n.key],C}),setTimeout(()=>G(),0)},[d,G]),de=k(async()=>{if(Y()){V(!0);try{const n=A("products.empty_cart"),f=new FormData;p&&f.append("_wpnonce",p);const j=await(await fetch(n,{method:"POST",body:f})).json();V(!1),j.success?b({}):S(j.message||E("ajaxError","An error occurred"))}catch{V(!1),S(E("ajaxError","An error occurred"))}}else b({}),localStorage.removeItem("voxel:guest_cart")},[d]),s=k(async(n,f)=>{b(N=>N?{...N,[n.key]:{...N[n.key],_disabled:!0}}:null);const C=Y(),j=C?"products.update_cart_item_quantity":"products.update_guest_cart_item_quantity";try{const N=A(j),M=new FormData;M.append("item_key",n.key),M.append("item_quantity",f.toString()),C||M.append("guest_cart",localStorage.getItem("voxel:guest_cart")||""),p&&M.append("_wpnonce",p);const ue=await(await fetch(N,{method:"POST",body:M})).json();ue.success?(b(fe=>fe?{...fe,[n.key]:ue.item}:null),C||setTimeout(()=>G(),0)):S(ue.message||E("ajaxError","An error occurred"))}catch{S(E("ajaxError","An error occurred"))}finally{b(N=>N?{...N,[n.key]:{...N[n.key],_disabled:!1}}:null)}},[d,G]),x=k(n=>{const f=Z(n)+1;s(n,f)},[s]),R=k(n=>{const f=Z(n)-1;f<=0?ne(n):s(n,f)},[s,ne]),y=n=>{if(!_)return!1;let f=n.quantity.max;for(const C of Object.values(_))if(C.stock_id===n.stock_id&&(f-=Z(C),f<=0))return!1;return!0};se(()=>{if(a!=="frontend")return;O.current||(O.current=!0,Object.defineProperty(window,"VX_Cart",{configurable:!0,get:()=>({open:X,getItems:W,hasItems:Q,getSubtotal:oe,get loading(){return m},get loaded(){return F},get items(){return _},get checkout_link(){return B}})}));const n=()=>{W(),v.current?.classList.add("ts-cart-update"),setTimeout(()=>v.current?.classList.remove("ts-cart-update"),500)};return document.addEventListener("voxel:added_cart_item",n),()=>{document.removeEventListener("voxel:added_cart_item",n)}},[a,W,X,Q,oe,m,F,_,B]);const I=n=>React.createElement("div",{key:n.key,className:`ts-cart-item ${n._disabled?"vx-pending":""}`},React.createElement("div",{className:"ts-cart-item-image"},React.createElement("a",{href:n.link},React.createElement("img",{src:n.logo,alt:n.title}))),React.createElement("div",{className:"ts-cart-item-body"},React.createElement("a",{href:n.link,className:"ts-cart-item-title"},n.title),n.subtitle&&React.createElement("span",{className:"ts-cart-item-subtitle"},n.subtitle),React.createElement("span",{className:"ts-cart-item-price"},be(n.pricing.total_amount,n.pricing._currency))),React.createElement("div",{className:"ts-cart-item-actions"},n.quantity.enabled&&React.createElement("div",{className:"ts-quantity-control"},React.createElement("button",{className:"ts-qty-btn ts-qty-minus",onClick:()=>R(n),disabled:n._disabled},React.createElement("i",{className:"las la-minus"})),React.createElement("span",{className:"ts-qty-value"},Z(n)),React.createElement("button",{className:"ts-qty-btn ts-qty-plus",onClick:()=>x(n),disabled:n._disabled||!y(n)},React.createElement("i",{className:"las la-plus"}))),React.createElement("button",{className:"ts-remove-btn",onClick:()=>ne(n),disabled:n._disabled},React.createElement("i",{className:"las la-times"}))));return React.createElement("li",{className:`ts-popup-cart elementor-repeater-item-${e._id}`},React.createElement("a",{ref:l,href:"#",onClick:n=>{n.preventDefault(),X()},role:"button","aria-label":e.cartTitle||"Cart"},React.createElement("div",{ref:v,className:"ts-comp-icon flexify"},re(e.icon),a==="frontend"&&pe()&&React.createElement("span",{className:"unread-indicator"})),React.createElement("span",{className:"ts_comp_label"},e.cartTitle||"Cart")),a==="frontend"&&React.createElement(ie,{isOpen:g,popupId:`cart-popup-${e._id}`,target:l.current,title:e.cartTitle||"Cart",icon:e.icon?.value?`<i class="${e.icon.value}"></i>`:"",onClose:()=>$(!1),showFooter:!1,popupClass:`lg-width ts-cart-popup ${u||""}`.trim()},React.createElement("div",{className:"ts-cart-content min-scroll"},m&&React.createElement(le,null),!m&&React.createElement(React.Fragment,null,Q()&&_?React.createElement(React.Fragment,null,React.createElement("div",{className:"ts-cart-items"},Object.values(_).map(I)),React.createElement("div",{className:"ts-cart-footer"},React.createElement("div",{className:"ts-cart-subtotal"},React.createElement("span",null,E("subtotal","Subtotal")),React.createElement("span",{className:"ts-subtotal-amount"},be(oe()))),React.createElement("div",{className:"ts-cart-actions"},React.createElement("button",{className:`ts-btn ts-btn-1 ts-empty-cart ${z?"vx-pending":""}`,onClick:de,disabled:z},E("emptyCart","Empty cart")),B&&React.createElement("a",{href:B,className:"ts-btn ts-btn-2"},E("checkout","Checkout"))))):React.createElement(le,null)))))}function Ge({item:e,icons:t,context:a,popupScopeClass:u,hideChevron:d}){const[r,g]=T(!1),$=U(null),v=K()?.user??window.VoxelFSEUser,o=v?.displayName||"User",p=v?.avatarUrl||"",h=k(()=>{a==="frontend"&&g(!0)},[a]);return React.createElement("li",{className:`ts-popup-component ts-user-area-avatar elementor-repeater-item-${e._id}`},React.createElement("a",{ref:$,href:"#",onClick:m=>{m.preventDefault(),h()},role:"button","aria-label":o},React.createElement("div",{className:"ts-comp-icon flexify"},a==="editor"?React.createElement("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"#ccc",display:"flex",alignItems:"center",justifyContent:"center"}},React.createElement("i",{className:"las la-user"})):p?React.createElement("img",{src:p,alt:o,style:{width:"32px",height:"32px",borderRadius:"50%"}}):React.createElement("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"#ccc",display:"flex",alignItems:"center",justifyContent:"center"}},React.createElement("i",{className:"las la-user"}))),React.createElement("span",{className:"ts_comp_label"},o),!d&&React.createElement("div",{className:"ts-down-icon"})),a==="frontend"&&React.createElement(ie,{isOpen:r,popupId:`user-menu-popup-${e._id}`,target:$.current,title:o,icon:p?`<img src="${p}" alt="" style="width:24px;height:24px;border-radius:50%;">`:"",onClose:()=>g(!1),showFooter:!1,popupClass:u||""},React.createElement("div",{className:"ts-term-dropdown ts-md-group ts-multilevel-dropdown"},React.createElement("p",{style:{padding:"16px",textAlign:"center",color:"#666"}},"Menu not configured"))))}function qe({item:e,icons:t,context:a,popupScopeClass:u}){const[d,r]=T(!1),g=U(null),$=k(()=>{a==="frontend"&&r(!0)},[a]);return React.createElement("li",{className:`ts-popup-component elementor-repeater-item-${e._id}`},React.createElement("a",{ref:g,href:"#",onClick:l=>{l.preventDefault(),$()},role:"button","aria-label":e.wpMenuTitle||"Menu"},React.createElement("div",{className:"ts-comp-icon flexify"},re(e.icon)),React.createElement("span",{className:"ts_comp_label"},e.wpMenuTitle||"Menu")),a==="frontend"&&React.createElement(ie,{isOpen:d,popupId:`wp-menu-popup-${e._id}`,target:g.current,title:e.wpMenuTitle||"Menu",icon:e.icon?.value?`<i class="${e.icon.value}"></i>`:"",onClose:()=>r(!1),showFooter:!1,popupClass:u||""},React.createElement("div",{className:"ts-term-dropdown ts-md-group ts-multilevel-dropdown"},React.createElement("p",{style:{padding:"16px",textAlign:"center",color:"#666"}},"Menu not configured"))))}function Je({item:e,context:t}){const a={href:e.componentUrl.url||"#"};return e.componentUrl.is_external&&(a.target="_blank"),e.componentUrl.nofollow&&(a.rel="nofollow"),React.createElement("li",{className:`elementor-repeater-item-${e._id}`},React.createElement("a",{...a},React.createElement("div",{className:"ts-comp-icon flexify"},re(e.icon)),React.createElement("span",{className:"ts_comp_label"},e.componentTitle||"Link")))}function Qe(e,t,a,u,d,r,g){switch(e.componentType){case"notifications":return React.createElement(Ue,{key:e._id,item:e,icons:t,context:a,popupScopeClass:d});case"messages":return React.createElement(Fe,{key:e._id,item:e,icons:t,context:a,popupScopeClass:d,nonce:r});case"cart":return React.createElement(De,{key:e._id,item:e,icons:t,context:a,popupScopeClass:d,nonce:r,isCartEmpty:g});case"user_menu":return React.createElement(Ge,{key:e._id,item:e,icons:t,context:a,hideChevron:u,popupScopeClass:d});case"select_wp_menu":return React.createElement(qe,{key:e._id,item:e,icons:t,context:a,popupScopeClass:d});case"link":return React.createElement(Je,{key:e._id,item:e,context:a});default:return null}}function We({attributes:e,context:t,config:a}){const u=a?.items||e.items,d=a?.icons||e.icons,r=a?.settings||{itemsAlign:e.itemsAlign,verticalOrientation:e.verticalOrientation,verticalOrientationTablet:e.verticalOrientationTablet,verticalOrientationMobile:e.verticalOrientationMobile,itemContentAlign:e.itemContentAlign,hideChevron:e.hideChevron,customPopupEnable:e.customPopupEnable},g=window.VoxelFSEUserbar,$=g?.nonce,l=g?.is_cart_empty??!0,v=`voxel-popup-userbar-${e.blockId||"default"}`,o={justifyContent:r.itemsAlign};return!u||u.length===0?React.createElement("div",{className:"ts-user-area"},React.createElement("div",{className:"voxel-fse-empty-state",style:{padding:"20px",textAlign:"center",background:"#f5f5f5",borderRadius:"4px"}},React.createElement("p",{style:{margin:0,color:"#666"}},t==="editor"?"Add components using the sidebar panel":"No user bar components configured"))):React.createElement(React.Fragment,null,t==="frontend"&&a&&React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(a)}}),React.createElement("ul",{className:"flexify simplify-ul user-area-menu",style:o},u.map(p=>Qe(p,d,t,r.hideChevron,v,$,l))))}function Xe(e){if(!e)return"";let t="";return e.fontFamily&&(t+=`font-family: ${e.fontFamily}; `),e.fontSize&&(t+=`font-size: ${e.fontSize}${e.fontSizeUnit||"px"}; `),e.fontWeight&&(t+=`font-weight: ${e.fontWeight}; `),e.fontStyle&&(t+=`font-style: ${e.fontStyle}; `),e.textTransform&&(t+=`text-transform: ${e.textTransform}; `),e.textDecoration&&(t+=`text-decoration: ${e.textDecoration}; `),e.lineHeight&&(t+=`line-height: ${e.lineHeight}${e.lineHeightUnit||""}; `),e.letterSpacing&&(t+=`letter-spacing: ${e.letterSpacing}${e.letterSpacingUnit||"px"}; `),t}function $e(e,t){const a=[],u=[],d=[],r=`.voxel-fse-userbar-${t}`;if(e.itemGap!==void 0&&a.push(`${r} > ul { grid-gap: ${e.itemGap}px; }`),e.itemGapTablet!==void 0&&u.push(`${r} > ul { grid-gap: ${e.itemGapTablet}px; }`),e.itemGapMobile!==void 0&&d.push(`${r} > ul { grid-gap: ${e.itemGapMobile}px; }`),e.verticalOrientation&&(a.push(`${r} > ul > li > a { flex-direction: column; }`),e.itemContentAlign&&a.push(`${r} > ul > li > a { justify-content: ${e.itemContentAlign}; }`)),e.verticalOrientationTablet&&(u.push(`${r} > ul > li > a { flex-direction: column; }`),e.itemContentAlign&&u.push(`${r} > ul > li > a { justify-content: ${e.itemContentAlign}; }`)),e.verticalOrientationMobile&&(d.push(`${r} > ul > li > a { flex-direction: column; }`),e.itemContentAlign&&d.push(`${r} > ul > li > a { justify-content: ${e.itemContentAlign}; }`)),e.itemBackground&&a.push(`${r} > ul > li > a { background-color: ${e.itemBackground}; }`),e.itemBackgroundHover&&a.push(`${r} > ul > li > a:hover { background-color: ${e.itemBackgroundHover}; }`),e.itemMargin){const l=e.itemMargin,v=l.unit||"px";(l.top||l.right||l.bottom||l.left)&&a.push(`${r} > ul > li > a { margin: ${l.top||0}${v} ${l.right||0}${v} ${l.bottom||0}${v} ${l.left||0}${v}; }`)}if(e.itemPadding){const l=e.itemPadding,v=l.unit||"px";(l.top||l.right||l.bottom||l.left)&&a.push(`${r} > ul > li > a { padding: ${l.top||0}${v} ${l.right||0}${v} ${l.bottom||0}${v} ${l.left||0}${v}; }`)}if(e.itemBoxShadow&&Object.keys(e.itemBoxShadow).length>0){const l=e.itemBoxShadow,v=l.position==="inset"?"inset ":"",o=l.horizontal??0,p=l.vertical??0,h=l.blur??0,m=l.spread??0,c=l.color??"rgba(0,0,0,0.5)";a.push(`${r} > ul > li > a { box-shadow: ${v}${o}px ${p}px ${h}px ${m}px ${c}; }`)}if(e.itemBoxShadowHover&&Object.keys(e.itemBoxShadowHover).length>0){const l=e.itemBoxShadowHover,v=l.position==="inset"?"inset ":"",o=l.horizontal??0,p=l.vertical??0,h=l.blur??0,m=l.spread??0,c=l.color??"rgba(0,0,0,0.5)";a.push(`${r} > ul > li > a:hover { box-shadow: ${v}${o}px ${p}px ${h}px ${m}px ${c}; }`)}if(e.itemBorderRadius!==void 0&&a.push(`${r} > ul > li > a { border-radius: ${e.itemBorderRadius}px; }`),e.itemBorderRadiusTablet!==void 0&&u.push(`${r} > ul > li > a { border-radius: ${e.itemBorderRadiusTablet}px; }`),e.itemBorderRadiusMobile!==void 0&&d.push(`${r} > ul > li > a { border-radius: ${e.itemBorderRadiusMobile}px; }`),e.itemContentGap!==void 0&&a.push(`${r} > ul > li > a { grid-gap: ${e.itemContentGap}px; }`),e.itemContentGapTablet!==void 0&&u.push(`${r} > ul > li > a { grid-gap: ${e.itemContentGapTablet}px; }`),e.itemContentGapMobile!==void 0&&d.push(`${r} > ul > li > a { grid-gap: ${e.itemContentGapMobile}px; }`),e.iconContainerSize!==void 0&&a.push(`${r} .ts-comp-icon { width: ${e.iconContainerSize}px; height: ${e.iconContainerSize}px; }`),e.iconContainerSizeTablet!==void 0&&u.push(`${r} .ts-comp-icon { width: ${e.iconContainerSizeTablet}px; height: ${e.iconContainerSizeTablet}px; }`),e.iconContainerSizeMobile!==void 0&&d.push(`${r} .ts-comp-icon { width: ${e.iconContainerSizeMobile}px; height: ${e.iconContainerSizeMobile}px; }`),e.iconContainerRadius!==void 0&&a.push(`${r} .ts-comp-icon { border-radius: ${e.iconContainerRadius}px; }`),e.iconContainerRadiusTablet!==void 0&&u.push(`${r} .ts-comp-icon { border-radius: ${e.iconContainerRadiusTablet}px; }`),e.iconContainerRadiusMobile!==void 0&&d.push(`${r} .ts-comp-icon { border-radius: ${e.iconContainerRadiusMobile}px; }`),e.iconContainerBackground&&a.push(`${r} .ts-comp-icon { background-color: ${e.iconContainerBackground}; }`),e.iconContainerBackgroundHover&&a.push(`${r} > ul > li > a:hover .ts-comp-icon { background-color: ${e.iconContainerBackgroundHover}; }`),e.iconSize!==void 0&&a.push(`${r} .ts-comp-icon { --ts-icon-size: ${e.iconSize}px; }`),e.iconSizeTablet!==void 0&&u.push(`${r} .ts-comp-icon { --ts-icon-size: ${e.iconSizeTablet}px; }`),e.iconSizeMobile!==void 0&&d.push(`${r} .ts-comp-icon { --ts-icon-size: ${e.iconSizeMobile}px; }`),e.iconColor&&a.push(`${r} .ts-comp-icon { --ts-icon-color: ${e.iconColor}; }`),e.iconColorHover&&a.push(`${r} > ul > li > a:hover .ts-comp-icon { --ts-icon-color: ${e.iconColorHover}; }`),e.unreadIndicatorColor&&a.push(`${r} span.unread-indicator { background: ${e.unreadIndicatorColor}; }`),e.unreadIndicatorMargin!==void 0&&a.push(`${r} span.unread-indicator { top: ${e.unreadIndicatorMargin}px; }`),e.unreadIndicatorMarginTablet!==void 0&&u.push(`${r} span.unread-indicator { top: ${e.unreadIndicatorMarginTablet}px; }`),e.unreadIndicatorMarginMobile!==void 0&&d.push(`${r} span.unread-indicator { top: ${e.unreadIndicatorMarginMobile}px; }`),e.unreadIndicatorSize!==void 0&&a.push(`${r} span.unread-indicator { width: ${e.unreadIndicatorSize}px; height: ${e.unreadIndicatorSize}px; }`),e.unreadIndicatorSizeTablet!==void 0&&u.push(`${r} span.unread-indicator { width: ${e.unreadIndicatorSizeTablet}px; height: ${e.unreadIndicatorSizeTablet}px; }`),e.unreadIndicatorSizeMobile!==void 0&&d.push(`${r} span.unread-indicator { width: ${e.unreadIndicatorSizeMobile}px; height: ${e.unreadIndicatorSizeMobile}px; }`),e.avatarSize!==void 0&&a.push(`${r} > ul > li.ts-user-area-avatar img { width: ${e.avatarSize}px; height: ${e.avatarSize}px; }`),e.avatarSizeTablet!==void 0&&u.push(`${r} > ul > li.ts-user-area-avatar img { width: ${e.avatarSizeTablet}px; height: ${e.avatarSizeTablet}px; }`),e.avatarSizeMobile!==void 0&&d.push(`${r} > ul > li.ts-user-area-avatar img { width: ${e.avatarSizeMobile}px; height: ${e.avatarSizeMobile}px; }`),e.avatarRadius!==void 0&&a.push(`${r} > ul > li.ts-user-area-avatar img { border-radius: ${e.avatarRadius}%; }`),e.avatarRadiusTablet!==void 0&&u.push(`${r} > ul > li.ts-user-area-avatar img { border-radius: ${e.avatarRadiusTablet}%; }`),e.avatarRadiusMobile!==void 0&&d.push(`${r} > ul > li.ts-user-area-avatar img { border-radius: ${e.avatarRadiusMobile}%; }`),e.items?.forEach(l=>{if(!l._id)return;const v=`${r} .elementor-repeater-item-${l._id}`;l.labelVisibility&&(l.labelVisibilityDesktop==="none"&&a.push(`${v} .ts_comp_label { display: none; }`),l.labelVisibilityTablet==="none"?u.push(`${v} .ts_comp_label { display: none; }`):l.labelVisibilityTablet==="flex"&&l.labelVisibilityDesktop==="none"&&u.push(`${v} .ts_comp_label { display: flex; }`),l.labelVisibilityMobile==="none"?d.push(`${v} .ts_comp_label { display: none; }`):l.labelVisibilityMobile==="flex"&&(l.labelVisibilityDesktop==="none"||l.labelVisibilityTablet==="none")&&d.push(`${v} .ts_comp_label { display: flex; }`)),l.componentVisibility&&(l.userBarVisibilityDesktop==="none"&&a.push(`${v} { display: none !important; }`),l.userBarVisibilityTablet==="none"?u.push(`${v} { display: none !important; }`):l.userBarVisibilityTablet==="flex"&&l.userBarVisibilityDesktop==="none"&&u.push(`${v} { display: flex !important; }`),l.userBarVisibilityMobile==="none"?d.push(`${v} { display: none !important; }`):l.userBarVisibilityMobile==="flex"&&(l.userBarVisibilityDesktop==="none"||l.userBarVisibilityTablet==="none")&&d.push(`${v} { display: flex !important; }`))}),e.labelTypography){const l=Xe(e.labelTypography);l&&a.push(`${r} .ts_comp_label { ${l} }`)}e.labelColor&&a.push(`${r} .ts_comp_label { color: ${e.labelColor}; }`),e.labelColorHover&&a.push(`${r} > ul > li > a:hover .ts_comp_label { color: ${e.labelColorHover}; }`),e.chevronColor&&a.push(`${r} .ts-down-icon { border-color: ${e.chevronColor}; }`),e.chevronColorHover&&a.push(`${r} > ul > li > a:hover .ts-down-icon { border-color: ${e.chevronColorHover}; }`),e.hideChevron&&a.push(`${r} .ts-down-icon { display: none !important; }`);const g=`.voxel-popup-userbar-${t}`;if(e.popupBackdropColor&&a.push(`${g} .ts-popup-root > div::after { background-color: ${e.popupBackdropColor} !important; }`),e.popupPointerEvents&&a.push(`${g} .ts-popup-root > div::after { pointer-events: all; }`),e.popupBoxShadow&&Object.keys(e.popupBoxShadow).length>0){const l=e.popupBoxShadow,v=l.position==="inset"?"inset ":"",o=l.horizontal??0,p=l.vertical??0,h=l.blur??0,m=l.spread??0,c=l.color??"rgba(0,0,0,0.5)";a.push(`${g} .ts-field-popup { box-shadow: ${v}${o}px ${p}px ${h}px ${m}px ${c}; }`)}e.popupTopMargin&&a.push(`${g} .ts-field-popup-container { margin: ${e.popupTopMargin}px 0; }`),e.popupTopMargin_tablet!==void 0&&u.push(`${g} .ts-field-popup-container { margin: ${e.popupTopMargin_tablet}px 0; }`),e.popupTopMargin_mobile!==void 0&&d.push(`${g} .ts-field-popup-container { margin: ${e.popupTopMargin_mobile}px 0; }`),e.popupMaxHeight&&a.push(`${g} .ts-popup-content-wrapper { max-height: ${e.popupMaxHeight}px; }`),e.popupMaxHeight_tablet!==void 0&&u.push(`${g} .ts-popup-content-wrapper { max-height: ${e.popupMaxHeight_tablet}px; }`),e.popupMaxHeight_mobile!==void 0&&d.push(`${g} .ts-popup-content-wrapper { max-height: ${e.popupMaxHeight_mobile}px; }`);let $="";return a.length>0&&($+=a.join(`
`)),u.length>0&&($+=`
@media (max-width: 1024px) {
${u.join(`
`)}
}`),d.length>0&&($+=`
@media (max-width: 767px) {
${d.join(`
`)}
}`),$}function Ye({attributes:e,setAttributes:t,clientId:a}){const u=e.blockId||a,[d,r]=T([{value:"",label:i("Select menu","voxel-fse")}]);se(()=>{(async()=>{try{const p=await ke({path:"/voxel-fse/v1/navbar/locations"});if(p&&p.locations){const h=[{value:"",label:i("Select menu","voxel-fse")},...p.locations.map(m=>({value:m.slug,label:m.name}))];r(h)}}catch(p){console.error("Could not fetch nav menus:",p)}})()},[]),se(()=>{e.blockId||t({blockId:a}),e.items||t({items:[]})},[e.blockId,e.items,a,t]),se(()=>{const o="voxel-commons-css";if(!document.getElementById(o)){const p=document.createElement("link");p.id=o,p.rel="stylesheet";const m=(window.Voxel_Config?.site_url||window.location.origin).replace(/\/$/,"");p.href=`${m}/wp-content/themes/voxel/assets/dist/commons.css?ver=1.7.5.2`,document.head.appendChild(p)}},[]);const g=Ee(e,{blockId:u,baseClass:"voxel-fse-userbar ts-user-area",selectorPrefix:"voxel-fse-userbar"}),$=ve(()=>$e(e,u),[e,u]),l=ve(()=>[g.responsiveCSS,$].filter(Boolean).join(`
`),[g.responsiveCSS,$]),v=xe({id:g.elementId,className:g.className,style:g.styles,...g.customAttrs});return React.createElement("div",{...v},React.createElement(_e,null,React.createElement(Me,{tabs:[{id:"content",label:i("Content","voxel-fse"),render:()=>React.createElement(Pe,{attributes:e,setAttributes:t,navMenus:d})},{id:"style",label:i("Style","voxel-fse"),render:()=>React.createElement(Ae,{attributes:e,setAttributes:t})}],includeAdvancedTab:!0,includeVoxelTab:!0,attributes:e,setAttributes:t})),l&&React.createElement("style",{dangerouslySetInnerHTML:{__html:l}}),React.createElement(We,{attributes:e,context:"editor"}))}function Ke({attributes:e}){const t=e.blockId||"userbar",a=Ee(e,{blockId:t,baseClass:"voxel-fse-userbar ts-user-area"}),u=$e(e,t),d=[a.responsiveCSS,u].filter(Boolean).join(`
`),r=xe.save({id:a.elementId,className:a.className,style:a.styles,"data-visibility-behavior":e.visibilityBehavior||void 0,"data-visibility-rules":e.visibilityRules?.length?JSON.stringify(e.visibilityRules):void 0,"data-loop-source":e.loopSource||void 0,"data-loop-limit":e.loopLimit||void 0,"data-loop-offset":e.loopOffset||void 0,...a.customAttrs}),g={items:e.items,icons:e.icons,settings:{itemsAlign:e.itemsAlign,verticalOrientation:e.verticalOrientation,verticalOrientationTablet:e.verticalOrientationTablet??!1,verticalOrientationMobile:e.verticalOrientationMobile??!1,itemContentAlign:e.itemContentAlign,hideChevron:e.hideChevron,customPopupEnable:e.customPopupEnable}};return React.createElement("div",{...r},d&&React.createElement("style",{dangerouslySetInnerHTML:{__html:d}}),Ne(e,!1,void 0,void 0,a.uniqueSelector),React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(g)}}),React.createElement("div",{className:"voxel-fse-block-placeholder",style:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#e0e0e0",padding:"16px",minHeight:"48px"}},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor",style:{opacity:.4}},React.createElement("rect",{x:"4",y:"4",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"10",y:"4",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"16",y:"4",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"4",y:"10",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"10",y:"10",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"16",y:"10",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"4",y:"16",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"10",y:"16",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"16",y:"16",width:"4",height:"4",rx:"0.5"}))))}const Ze="https://schemas.wp.org/trunk/block.json",ea=3,aa="voxel-fse/userbar",oa="1.0.0",na="Userbar (VX)",ta="voxel-fse",la="User bar with notifications, messages, cart, user menu, and custom links. FSE equivalent of Voxel's User bar widget.",ia=["userbar","user","notifications","messages","cart","menu","voxel"],ra="voxel-fse",sa={html:!1,align:["wide","full"],anchor:!0,className:!0,customClassName:!0},ca="file:./index.js",pa="file:./frontend.js",da="file:./render.php",ma={blockId:{type:"string",default:""},items:{type:"array",default:[]},icons:{type:"object",default:{downArrow:{library:"",value:""},rightArrow:{library:"",value:""},leftArrow:{library:"",value:""},close:{library:"",value:""},trash:{library:"",value:""},inbox:{library:"",value:""},loadMore:{library:"",value:""}}},itemsAlign:{type:"string",default:"left"},verticalOrientation:{type:"boolean",default:!1},verticalOrientationTablet:{type:"boolean",default:!1},verticalOrientationMobile:{type:"boolean",default:!1},itemContentAlign:{type:"string",default:"left"},itemGap:{type:"number",default:0},itemGapTablet:{type:"number"},itemGapMobile:{type:"number"},itemMargin:{type:"object",default:{top:"",right:"",bottom:"",left:""}},itemPadding:{type:"object",default:{top:"",right:"",bottom:"",left:""}},itemBoxShadow:{type:"object",default:{}},itemBoxShadowHover:{type:"object",default:{}},itemBackground:{type:"string",default:""},itemBackgroundHover:{type:"string",default:"#fff"},itemBorderRadius:{type:"number",default:0},itemBorderRadiusTablet:{type:"number"},itemBorderRadiusMobile:{type:"number"},itemContentGap:{type:"number",default:0},itemContentGapTablet:{type:"number"},itemContentGapMobile:{type:"number"},iconContainerSize:{type:"number",default:40},iconContainerSizeTablet:{type:"number"},iconContainerSizeMobile:{type:"number"},iconContainerRadius:{type:"number",default:40},iconContainerRadiusTablet:{type:"number"},iconContainerRadiusMobile:{type:"number"},iconContainerBackground:{type:"string",default:""},iconContainerBackgroundHover:{type:"string",default:""},iconSize:{type:"number",default:20},iconSizeTablet:{type:"number"},iconSizeMobile:{type:"number"},iconColor:{type:"string",default:""},iconColorHover:{type:"string",default:""},unreadIndicatorColor:{type:"string",default:""},unreadIndicatorMargin:{type:"number",default:0},unreadIndicatorMarginTablet:{type:"number"},unreadIndicatorMarginMobile:{type:"number"},unreadIndicatorSize:{type:"number",default:8},unreadIndicatorSizeTablet:{type:"number"},unreadIndicatorSizeMobile:{type:"number"},avatarSize:{type:"number",default:32},avatarSizeTablet:{type:"number"},avatarSizeMobile:{type:"number"},avatarRadius:{type:"number",default:50},avatarRadiusTablet:{type:"number"},avatarRadiusMobile:{type:"number"},labelTypography:{type:"object",default:{}},labelColor:{type:"string",default:""},labelColorHover:{type:"string",default:""},chevronColor:{type:"string",default:""},chevronColorHover:{type:"string",default:""},hideChevron:{type:"boolean",default:!1},customPopupEnable:{type:"boolean",default:!1},popupBackdropColor:{type:"string",default:""},popupPointerEvents:{type:"boolean",default:!1},popupBoxShadow:{type:"object",default:{}},popupTopMargin:{type:"number",default:0},popupTopMargin_tablet:{type:"number"},popupTopMargin_mobile:{type:"number"},popupMaxHeight:{type:"number",default:0},popupMaxHeight_tablet:{type:"number"},popupMaxHeight_mobile:{type:"number"},_comment_voxel_tab:"VoxelTab attributes for visibility and loop features",visibilityBehavior:{type:"string",default:"show",enum:["show","hide"]},visibilityRules:{type:"array",default:[],items:{type:"object"}},loopEnabled:{type:"boolean",default:!1},loopSource:{type:"string",default:""},loopProperty:{type:"string",default:""},loopLimit:{type:"string",default:""},loopOffset:{type:"string",default:""}},ye={$schema:Ze,apiVersion:ea,name:aa,version:oa,title:na,category:ta,description:la,keywords:ia,textdomain:ra,supports:sa,editorScript:ca,viewScript:pa,render:da,attributes:ma};we(ye.name,{...ye,icon:je,edit:Ye,save:Ke});
