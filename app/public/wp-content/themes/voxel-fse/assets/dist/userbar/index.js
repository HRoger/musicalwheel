import{registerBlockType as $e}from"@wordpress/blocks";import{useBlockProps as ye,InspectorControls as we}from"@wordpress/block-editor";import{__ as o}from"@wordpress/i18n";import{useState as T,useRef as F,useCallback as k,useEffect as ie,useMemo as fe}from"react";import _e from"@wordpress/api-fetch";import{A as xe,a as se,S as q,E as ke,R as A,C as L,D as ve,c as ge,T as Se}from"../TypographyPopup-CAcEJ5NA.js";import{I as Te}from"../InspectorTabs-Bq2wAh4W.js";import{SelectControl as H,TextControl as Z,ToggleControl as ne}from"@wordpress/components";import"@wordpress/data";/* empty css                            */import"../RepeaterControl-C7JnAhZL.js";import"../voxelShim-DB_Ue-9R.js";import{g as Re}from"../useAdvancedTabProps-BnJDQbKr.js";import{r as Ne}from"../backgroundElements-Ui-iCrLV.js";import{A as G}from"../AdvancedIconControl-CJ_DCTeD.js";import{L as Me}from"../LoopElementModal-CaevVMh1.js";import{R as Ie,L as Be}from"../RepeaterControl-B_ulBkEL.js";import{P as Ve}from"../PopupCustomStyleControl-XQPXOL9P.js";import{F as le}from"../FormPopup-DDYHzYWU.js";import{E as oe}from"../EmptyPlaceholder-BsL18qxN.js";import{V as Oe}from"../VoxelGridIcon-D5dF5acW.js";import"react-dom";import"../generateAdvancedStyles-CRpLcHXt.js";import"../generateVoxelStyles-oZeaeuKH.js";const je={_id:"",componentType:"notifications",chooseMenu:"",icon:{library:"icon",value:"las la-bell"},componentUrl:{url:"",is_external:!0,nofollow:!0},componentTitle:"",messagesTitle:"Messages",wpMenuTitle:"Menu",notificationsTitle:"Notifications",cartTitle:"Cart",labelVisibility:!1,labelVisibilityDesktop:"none",labelVisibilityTablet:"none",labelVisibilityMobile:"none",componentVisibility:!1,userBarVisibilityDesktop:"flex",userBarVisibilityTablet:"flex",userBarVisibilityMobile:"flex",rowVisibility:"show",visibilityRules:[]},Le=[{label:o("Notifications","voxel-fse"),value:"notifications"},{label:o("Cart","voxel-fse"),value:"cart"},{label:o("Messages","voxel-fse"),value:"messages"},{label:o("User Menu","voxel-fse"),value:"user_menu"},{label:o("Menu","voxel-fse"),value:"select_wp_menu"},{label:o("Custom link","voxel-fse"),value:"link"}],ee=[{label:o("Show","voxel-fse"),value:"flex"},{label:o("Hide","voxel-fse"),value:"none"}];function ze({attributes:e,setAttributes:l,navMenus:a}){const[d,p]=T(null),[r,h]=T(null),i=t=>{switch(t.componentType){case"notifications":return t.notificationsTitle||"Notifications";case"messages":return t.messagesTitle||"Messages";case"cart":return t.cartTitle||"Cart";case"user_menu":case"select_wp_menu":return t.wpMenuTitle||"Menu";case"link":return t.componentTitle||"Link";default:return t.componentType}},m=(t,v)=>{l({icons:{...e.icons,[t]:v}})},y=(t,v)=>{const x=[...e.items];x[t]={...x[t],...v},l({items:x})};return React.createElement(React.Fragment,null,React.createElement("div",{className:"voxel-inspector-section"},React.createElement(xe,{defaultPanel:"items"},React.createElement(se,{id:"items",title:o("User area components","voxel-fse")},React.createElement(Ie,{items:e.items,onChange:t=>l({items:t}),getItemLabel:t=>i(t),createItem:()=>({...je,_id:`item-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,rowVisibility:"show",visibilityRules:[],userBarVisibilityDesktop:"flex",userBarVisibilityTablet:"flex",userBarVisibilityMobile:"flex"}),renderContent:({item:t,index:v,onUpdate:x})=>{const f=(c,z)=>{x({[c]:z})};return React.createElement("div",{className:"voxel-repeater-content"},React.createElement(q,{label:o("Component details","voxel-fse")}),React.createElement(H,{label:o("Component type","voxel-fse"),value:t.componentType,options:Le,onChange:c=>f("componentType",c)}),(t.componentType==="user_menu"||t.componentType==="select_wp_menu")&&React.createElement(H,{label:o("Choose menu","voxel-fse"),value:t.chooseMenu,options:a,onChange:c=>f("chooseMenu",c)}),React.createElement(G,{label:o("Icon","voxel-fse"),value:t.icon,onChange:c=>f("icon",c)}),t.componentType==="link"&&React.createElement(React.Fragment,null,React.createElement(Z,{label:o("Link URL","voxel-fse"),value:t.componentUrl.url,onChange:c=>f("componentUrl",{...t.componentUrl,url:c}),placeholder:"https://your-link.com"}),React.createElement(ne,{label:o("Open in new tab","voxel-fse"),checked:t.componentUrl.is_external,onChange:c=>f("componentUrl",{...t.componentUrl,is_external:c})})),t.componentType==="link"&&React.createElement(Z,{label:o("Label","voxel-fse"),value:t.componentTitle,onChange:c=>f("componentTitle",c)}),t.componentType==="messages"&&React.createElement(Z,{label:o("Label","voxel-fse"),value:t.messagesTitle,onChange:c=>f("messagesTitle",c)}),t.componentType==="select_wp_menu"&&React.createElement(Z,{label:o("Label","voxel-fse"),value:t.wpMenuTitle,onChange:c=>f("wpMenuTitle",c)}),t.componentType==="notifications"&&React.createElement(Z,{label:o("Label","voxel-fse"),value:t.notificationsTitle,onChange:c=>f("notificationsTitle",c)}),t.componentType==="cart"&&React.createElement(Z,{label:o("Label","voxel-fse"),value:t.cartTitle,onChange:c=>f("cartTitle",c)}),React.createElement("hr",{style:{margin:"16px 0",border:"none",borderTop:"1px solid #ddd"}}),React.createElement(ne,{label:o("Enable label visibility","voxel-fse"),checked:t.labelVisibility,onChange:c=>f("labelVisibility",c)}),t.labelVisibility&&React.createElement(React.Fragment,null,React.createElement(H,{label:o("Show on desktop","voxel-fse"),value:t.labelVisibilityDesktop,options:ee,onChange:c=>f("labelVisibilityDesktop",c)}),React.createElement(H,{label:o("Show on tablet","voxel-fse"),value:t.labelVisibilityTablet,options:ee,onChange:c=>f("labelVisibilityTablet",c)}),React.createElement(H,{label:o("Show on mobile","voxel-fse"),value:t.labelVisibilityMobile,options:ee,onChange:c=>f("labelVisibilityMobile",c)})),React.createElement("hr",{style:{margin:"16px 0",border:"none",borderTop:"1px solid #ddd"}}),React.createElement(ne,{label:o("Component visibility","voxel-fse"),checked:t.componentVisibility,onChange:c=>f("componentVisibility",c)}),t.componentVisibility&&React.createElement(React.Fragment,null,React.createElement(H,{label:o("Show on desktop","voxel-fse"),value:t.userBarVisibilityDesktop,options:ee,onChange:c=>f("userBarVisibilityDesktop",c)}),React.createElement(H,{label:o("Show on tablet","voxel-fse"),value:t.userBarVisibilityTablet,options:ee,onChange:c=>f("userBarVisibilityTablet",c)}),React.createElement(H,{label:o("Show on mobile","voxel-fse"),value:t.userBarVisibilityMobile,options:ee,onChange:c=>f("userBarVisibilityMobile",c)})),React.createElement(Be,{itemId:t._id,rowVisibility:t.rowVisibility||"show",onRowVisibilityChange:c=>f("rowVisibility",c),visibilityRules:t.visibilityRules||[],onEditVisibilityRules:()=>p(v),onClearVisibilityRules:()=>f("visibilityRules",[]),showLoopSection:!0,loopSource:t.loopSource,loopProperty:t.loopProperty,loopLimit:t.loopLimit,loopOffset:t.loopOffset,onEditLoop:()=>h(v),onClearLoop:()=>{f("loopSource",""),f("loopProperty","")},onLoopLimitChange:c=>f("loopLimit",c),onLoopOffsetChange:c=>f("loopOffset",c)}))}})),React.createElement(se,{id:"icons",title:o("Icons","voxel-fse")},React.createElement(G,{label:o("Down arrow","voxel-fse"),value:e.icons.downArrow,onChange:t=>m("downArrow",t)}),React.createElement(G,{label:o("Right arrow","voxel-fse"),value:e.icons.rightArrow,onChange:t=>m("rightArrow",t)}),React.createElement(G,{label:o("Left arrow","voxel-fse"),value:e.icons.leftArrow,onChange:t=>m("leftArrow",t)}),React.createElement(G,{label:o("Close icon","voxel-fse"),value:e.icons.close,onChange:t=>m("close",t)}),React.createElement(G,{label:o("Trash icon","voxel-fse"),value:e.icons.trash,onChange:t=>m("trash",t)}),React.createElement(G,{label:o("Inbox icon","voxel-fse"),value:e.icons.inbox,onChange:t=>m("inbox",t)}),React.createElement(G,{label:o("Load more icon","voxel-fse"),value:e.icons.loadMore,onChange:t=>m("loadMore",t)})))),d!==null&&React.createElement(ke,{isOpen:!0,rules:e.items[d].visibilityRules||[],onClose:()=>p(null),onSave:t=>{y(d,{visibilityRules:t})}}),r!==null&&React.createElement(Me,{isOpen:!0,config:{source:e.items[r].loopSource,property:e.items[r].loopProperty},onClose:()=>h(null),onSave:t=>{y(r,{loopSource:t.source,loopProperty:t.property})}}))}const Pe=[{label:o("Left","voxel-fse"),value:"left"},{label:o("Center","voxel-fse"),value:"center"},{label:o("Right","voxel-fse"),value:"right"},{label:o("Space between","voxel-fse"),value:"space-between"},{label:o("Space around","voxel-fse"),value:"space-around"}];function Ae({attributes:e,setAttributes:l}){return React.createElement(React.Fragment,null,React.createElement("div",{className:"voxel-inspector-section"},React.createElement(xe,{defaultPanel:"general"},React.createElement(se,{id:"general",title:o("User area: General","voxel-fse")},React.createElement(q,{label:o("Layout","voxel-fse")}),React.createElement(H,{label:o("Align items","voxel-fse"),value:e.itemsAlign,options:Pe,onChange:a=>l({itemsAlign:a})}),React.createElement(ne,{label:o("Vertical orientation?","voxel-fse"),checked:e.verticalOrientation,onChange:a=>l({verticalOrientation:a})}),e.verticalOrientation&&React.createElement(H,{label:o("Align item content","voxel-fse"),value:e.itemContentAlign,options:[{label:o("Left","voxel-fse"),value:"left"},{label:o("Center","voxel-fse"),value:"center"},{label:o("Right","voxel-fse"),value:"right"}],onChange:a=>l({itemContentAlign:a})}),React.createElement(q,{label:o("Item","voxel-fse")}),React.createElement(A,{label:o("Gap","voxel-fse"),attributes:e,setAttributes:l,attributeBaseName:"itemGap",min:0,max:50}),React.createElement(L,{label:o("Item background","voxel-fse"),value:e.itemBackground,onChange:a=>l({itemBackground:a??""})}),React.createElement(L,{label:o("Item background (hover)","voxel-fse"),value:e.itemBackgroundHover,onChange:a=>l({itemBackgroundHover:a??"#fff"})}),React.createElement(A,{label:o("Item border radius","voxel-fse"),attributes:e,setAttributes:l,attributeBaseName:"itemBorderRadius",min:0,max:100}),React.createElement(ve,{label:o("Margin","voxel-fse"),values:e.itemMargin||{top:"",right:"",bottom:"",left:""},onChange:a=>l({itemMargin:{...a,unit:"px"}}),availableUnits:["px","%","em"]}),React.createElement(ve,{label:o("Padding","voxel-fse"),values:e.itemPadding||{top:"",right:"",bottom:"",left:""},onChange:a=>l({itemPadding:{...a,unit:"px"}}),availableUnits:["px","%","em"]}),React.createElement(ge,{label:o("Box shadow","voxel-fse"),attributes:e,setAttributes:l,shadowAttributeName:"itemBoxShadow"}),React.createElement(ge,{label:o("Box shadow (hover)","voxel-fse"),attributes:e,setAttributes:l,shadowAttributeName:"itemBoxShadowHover"}),React.createElement(A,{label:o("Item content gap","voxel-fse"),attributes:e,setAttributes:l,attributeBaseName:"itemContentGap",min:0,max:50}),React.createElement(q,{label:o("Item icon","voxel-fse")}),React.createElement(A,{label:o("Container size","voxel-fse"),attributes:e,setAttributes:l,attributeBaseName:"iconContainerSize",min:30,max:80}),React.createElement(A,{label:o("Container border radius","voxel-fse"),attributes:e,setAttributes:l,attributeBaseName:"iconContainerRadius",min:0,max:100}),React.createElement(L,{label:o("Container background","voxel-fse"),value:e.iconContainerBackground,onChange:a=>l({iconContainerBackground:a??""})}),React.createElement(L,{label:o("Container background (hover)","voxel-fse"),value:e.iconContainerBackgroundHover,onChange:a=>l({iconContainerBackgroundHover:a??""})}),React.createElement(A,{label:o("Icon size","voxel-fse"),attributes:e,setAttributes:l,attributeBaseName:"iconSize",min:10,max:50}),React.createElement(L,{label:o("Icon color","voxel-fse"),value:e.iconColor,onChange:a=>l({iconColor:a??""})}),React.createElement(L,{label:o("Icon color (hover)","voxel-fse"),value:e.iconColorHover,onChange:a=>l({iconColorHover:a??""})}),React.createElement(q,{label:o("Unread indicator","voxel-fse")}),React.createElement(L,{label:o("Unread indicator color","voxel-fse"),value:e.unreadIndicatorColor,onChange:a=>l({unreadIndicatorColor:a??""})}),React.createElement(A,{label:o("Indicator top margin","voxel-fse"),attributes:e,setAttributes:l,attributeBaseName:"unreadIndicatorMargin",min:0,max:50}),React.createElement(A,{label:o("Indicator size","voxel-fse"),attributes:e,setAttributes:l,attributeBaseName:"unreadIndicatorSize",min:0,max:50}),React.createElement(q,{label:o("Avatar","voxel-fse")}),React.createElement(A,{label:o("Avatar size","voxel-fse"),attributes:e,setAttributes:l,attributeBaseName:"avatarSize",min:20,max:100}),React.createElement(A,{label:o("Avatar radius","voxel-fse"),attributes:e,setAttributes:l,attributeBaseName:"avatarRadius",min:0,max:100}),React.createElement(q,{label:o("Item label","voxel-fse")}),React.createElement(Se,{label:o("Typography","voxel-fse"),value:e.labelTypography,onChange:a=>l({labelTypography:a})}),React.createElement(L,{label:o("Color","voxel-fse"),value:e.labelColor,onChange:a=>l({labelColor:a??""})}),React.createElement(L,{label:o("Color (hover)","voxel-fse"),value:e.labelColorHover,onChange:a=>l({labelColorHover:a??""})}),React.createElement(q,{label:o("Chevron","voxel-fse")}),React.createElement(L,{label:o("Chevron color","voxel-fse"),value:e.chevronColor,onChange:a=>l({chevronColor:a??""})}),React.createElement(L,{label:o("Chevron color (hover)","voxel-fse"),value:e.chevronColorHover,onChange:a=>l({chevronColorHover:a??""})}),React.createElement(ne,{label:o("Hide chevron","voxel-fse"),checked:e.hideChevron,onChange:a=>l({hideChevron:a})})),React.createElement(se,{id:"popups",title:o("Popups: Custom style","voxel-fse")},React.createElement(Ve,{attributes:e,setAttributes:l})))))}function Y(){return window.VoxelFSEUserbar??null}function U(e){const l=window.Voxel_Config;return l?.ajax_url?`${l.ajax_url}&action=${e}`:`${l?.site_url||window.location.origin}/?vx=1&action=${e}`}function X(){const e=Y();return e?e.isLoggedIn:window.Voxel_Config?.is_logged_in??!1}function S(e,l="error"){const a=window.Voxel;a?.alert?a.alert(e,l):console.error(`[Userbar] ${l}: ${e}`)}function C(e,l){const a=Y();if(a?.l10n){const p=a.l10n;if(p[e])return p[e]}return window.Voxel_Config?.l10n?.[e]??l}function Ee(e){return Y()?.nonces?.[e]??""}function he(e,l){const a=window.Voxel;return a?.helpers?.currencyFormat?a.helpers.currencyFormat(e,l):`$${(e/100).toFixed(2)}`}function re(e){return!e||!e.value?null:e.library==="svg"&&e.value?React.createElement("img",{src:e.value,alt:"",style:{width:"1em",height:"1em"}}):e.library==="icon"&&e.value?React.createElement("i",{className:e.value,"aria-hidden":"true"}):null}function He({item:e,icons:l,context:a}){const[d,p]=T(!1),r=F(null),h=F(null),m=Y()?.unread?.notifications??0,[y,t]=T(null),[v,x]=T(!1),[f,c]=T(!0),[z,_]=T(!1),[g,B]=T(1),[w,P]=T(null),V=F(0),O=k(async(s=1)=>{_(!0);try{const R=U("notifications.list"),b=await(await fetch(`${R}&pg=${s}`)).json();b.success?(t(I=>s===1?b.list:[...I||[],...b.list]),x(b.has_more)):S(b.message||C("ajaxError","An error occurred"))}catch{S(C("ajaxError","An error occurred"))}finally{c(!1),_(!1)}},[]),J=k(()=>{a==="frontend"&&(y===null&&(t([]),h.current?.classList.add("hidden"),O(1)),p(!0))},[a,y,O]),ce=k(()=>{const s=g+1;B(s),O(s)},[g,O]),K=k(async()=>{const s=C("confirmClear","Clear all notifications?");if(window.confirm(s))try{const R=U("notifications.clear_all"),b=await(await fetch(R)).json();b.success?t([]):S(b.message||C("ajaxError","An error occurred"))}catch{S(C("ajaxError","An error occurred"))}},[]),ae=k(()=>{P(null),requestAnimationFrame(()=>{const s=document.querySelector(".min-scroll");s&&(s.scrollTop=V.current)})},[]),D=k(async s=>{if(s.links_to==="(details)"){const R=document.querySelector(".min-scroll");R&&(V.current=R.scrollTop),s.actions===void 0?(t(E=>E?.map(b=>b.id===s.id?{...b,seen:!0}:b)||null),Q(s)):(P(s),requestAnimationFrame(()=>{const E=document.querySelector(".min-scroll");E&&(E.scrollTop=0)}))}else{t(R=>R?.map(E=>E.id===s.id?{...E,_loading:!0}:E)||null);try{const R=U("notifications.open"),b=await(await fetch(`${R}&item_id=${s.id}`)).json();b.success?(t(I=>I?.map(n=>n.id===s.id?{...n,seen:!0,_loading:!1}:n)||null),b.redirect_to&&(window.location.href=b.redirect_to)):(S(b.message||C("ajaxError","An error occurred")),t(I=>I?.map(n=>n.id===s.id?{...n,_loading:!1}:n)||null))}catch{S(C("ajaxError","An error occurred")),t(R=>R?.map(E=>E.id===s.id?{...E,_loading:!1}:E)||null)}}},[]),Q=k(async(s,R=1)=>{t(E=>E?.map(b=>b.id===s.id?{...b,_loading:!0,actions_page:R}:b)||null);try{const E=U("notifications.get_actions"),I=await(await fetch(`${E}&item_id=${s.id}&pg=${R}`)).json();if(I.success){const n={...s,actions:R===1?I.actions:[...s.actions||[],...I.actions],actions_page:R,_loading:!1,seen:!0};t(u=>u?.map($=>$.id===s.id?n:$)||null),P(n),R===1&&requestAnimationFrame(()=>{const u=document.querySelector(".min-scroll");u&&(u.scrollTop=0)})}else S(I.message||C("ajaxError","An error occurred")),t(n=>n?.map(u=>u.id===s.id?{...u,_loading:!1,seen:!0}:u)||null)}catch{S(C("ajaxError","An error occurred")),t(E=>E?.map(b=>b.id===s.id?{...b,_loading:!1}:b)||null)}},[]),W=k(async(s,R,E)=>{const b=E?.key||R.key;if(!b)return;const I=n=>{w&&P({...w,actions:w.actions?.map(u=>u===R?{...u,_loading:n}:u)})};I(!0);try{const n=U("notifications.run_action"),$=await(await fetch(`${n}&item_id=${s.id}&action_key=${b}&pg=${R._page||1}`)).json();if($.success){if($.updated_action&&w?.actions){const j=w.actions.indexOf(R);if(j!==-1){const M=[...w.actions];M[j]=$.updated_action,P({...w,actions:M})}}$.redirect_to&&(window.location.href=$.redirect_to)}else S($.message||C("ajaxError","An error occurred"))}catch{S(C("ajaxError","An error occurred"))}finally{I(!1)}},[w]),te=s=>React.createElement("div",{key:s.id,className:`ts-notification-item ${s.seen?"":"ts-unread"} ${s._loading?"vx-pending":""}`,onClick:()=>D(s)},s.image_url&&React.createElement("div",{className:"ts-notification-image"},React.createElement("img",{src:s.image_url,alt:""})),React.createElement("div",{className:"ts-notification-body"},React.createElement("span",{className:"ts-notification-subject"},s.subject),React.createElement("span",{className:"ts-notification-time"},s.time))),de=(s,R)=>s.type==="list-item"?React.createElement("div",{key:s.key,className:`ts-action-item ${s._loading?"vx-pending":""}`,onClick:()=>s.links_to?window.location.href=s.links_to:W(R,s)},s.image_markup&&React.createElement("div",{className:"ts-action-image",dangerouslySetInnerHTML:{__html:s.image_markup}}),React.createElement("div",{className:"ts-action-body"},s.subject&&React.createElement("span",{className:"ts-action-subject"},s.subject),s.details&&React.createElement("span",{className:"ts-action-details"},s.details)),s.actions&&s.actions.length>0&&React.createElement("div",{className:"ts-action-buttons"},s.actions.map(E=>React.createElement("button",{key:E.key,className:"ts-btn ts-btn-1",onClick:b=>{b.stopPropagation(),W(R,s,E)}},E.label)))):s.type==="button"?React.createElement("button",{key:s.key,className:`ts-btn ts-btn-1 ${s._loading?"vx-pending":""}`,onClick:()=>W(R,s)},s.label):null;return React.createElement("li",{className:`ts-notifications-wrapper elementor-repeater-item-${e._id}`},React.createElement("a",{ref:r,href:"#",onClick:s=>{s.preventDefault(),J()},role:"button","aria-label":e.notificationsTitle||"Notifications"},React.createElement("div",{className:"ts-comp-icon flexify"},re(e.icon),a==="frontend"&&X()&&React.createElement("span",{ref:h,className:"unread-indicator",style:{display:m>0?void 0:"none"}})),React.createElement("span",{className:"ts_comp_label"},e.notificationsTitle||"Notifications")),a==="frontend"&&React.createElement(le,{isOpen:d,popupId:`notifications-popup-${e._id}`,target:r.current,title:e.notificationsTitle||"Notifications",icon:e.icon?.value?`<i class="${e.icon.value}"></i>`:"",onClose:()=>{p(!1),P(null)},showFooter:!1,popupClass:"md-width"},React.createElement("div",{className:"ts-notifications-list min-scroll"},y&&y.length>0&&!w&&React.createElement("div",{className:"ts-notifications-header flexify"},React.createElement("button",{className:"ts-btn ts-btn-1",onClick:K},C("clearAll","Clear all"))),f&&React.createElement(oe,null),w&&React.createElement("div",{className:"ts-notification-details"},React.createElement("button",{className:"ts-btn ts-btn-1 ts-back-btn",onClick:ae},React.createElement("i",{className:"las la-arrow-left"}),C("back","Back")),React.createElement("div",{className:"ts-notification-content"},React.createElement("span",{className:"ts-notification-subject"},w.subject),React.createElement("span",{className:"ts-notification-time"},w.time)),w.actions&&React.createElement("div",{className:"ts-notification-actions"},w.actions.map(s=>de(s,w))),w._loading&&React.createElement("div",{className:"ts-loader"})),!f&&!w&&React.createElement(React.Fragment,null,y&&y.length>0?React.createElement(React.Fragment,null,y.map(te),v&&React.createElement("button",{className:`ts-btn ts-btn-1 ts-load-more ${z?"vx-pending":""}`,onClick:ce,disabled:z},z?React.createElement("span",{className:"ts-loader"}):C("loadMore","Load more"))):React.createElement(oe,null)))))}function Ue({item:e,icons:l,context:a,nonce:d}){const[p,r]=T(!1),h=F(null),i=F(null),m=Y(),y=d||Ee("chat"),t=m?.unread?.messages??!1,[v,x]=T({list:null,hasMore:!1,loading:!0,loadingMore:!1,page:1}),f=k(async(g=1)=>{x(B=>({...B,loadingMore:!0}));try{const B=U("inbox.list_chats"),w=new FormData;w.append("pg",g.toString()),y&&w.append("_wpnonce",y);const V=await(await fetch(B,{method:"POST",body:w})).json();V.success?x(O=>({...O,list:g===1?V.list:[...O.list||[],...V.list],hasMore:V.has_more,loading:!1,loadingMore:!1})):(S(V.message||C("ajaxError","An error occurred")),x(O=>({...O,loading:!1,loadingMore:!1})))}catch{S(C("ajaxError","An error occurred")),x(B=>({...B,loading:!1,loadingMore:!1}))}},[y]),c=k(()=>{a==="frontend"&&(r(!0),v.list===null&&(x(g=>({...g,list:[]})),i.current?.classList.add("hidden"),f(1)))},[a,v.list,f]),z=k(()=>{const g=v.page+1;x(B=>({...B,page:g})),f(g)},[v.page,f]),_=g=>React.createElement("a",{key:g.id,href:g.link,className:`ts-chat-item ${g.seen?"":"ts-unread"}`},React.createElement("div",{className:"ts-chat-avatar"},React.createElement("img",{src:g.target.avatar,alt:g.target.name})),React.createElement("div",{className:"ts-chat-body"},React.createElement("span",{className:"ts-chat-name"},g.target.name),React.createElement("span",{className:"ts-chat-excerpt"},g.excerpt),React.createElement("span",{className:"ts-chat-time"},g.time)));return React.createElement("li",{className:`ts-popup-messages elementor-repeater-item-${e._id}`},React.createElement("a",{ref:h,href:"#",onClick:g=>{g.preventDefault(),c()},role:"button","aria-label":e.messagesTitle||"Messages"},React.createElement("div",{className:"ts-comp-icon flexify"},re(e.icon),a==="frontend"&&X()&&React.createElement("span",{ref:i,className:"unread-indicator",style:{display:t?void 0:"none"}})),React.createElement("span",{className:"ts_comp_label"},e.messagesTitle||"Messages")),a==="frontend"&&React.createElement(le,{isOpen:p,popupId:`messages-popup-${e._id}`,target:h.current,title:e.messagesTitle||"Messages",icon:e.icon?.value?`<i class="${e.icon.value}"></i>`:"",onClose:()=>r(!1),showFooter:!1,popupClass:"md-width"},React.createElement("div",{className:"ts-chats-list min-scroll"},v.loading&&React.createElement("div",{className:"ts-empty-user-tab"},React.createElement("div",{className:"ts-loader"})),!v.loading&&React.createElement(React.Fragment,null,v.list&&v.list.length>0?React.createElement(React.Fragment,null,v.list.map(_),v.hasMore&&React.createElement("button",{className:`ts-btn ts-btn-1 ts-load-more ${v.loadingMore?"vx-pending":""}`,onClick:z,disabled:v.loadingMore},v.loadingMore?React.createElement("span",{className:"ts-loader"}):C("loadMore","Load more"))):React.createElement(oe,null)))))}function Fe({item:e,icons:l,context:a,nonce:d,isCartEmpty:p}){const[r,h]=T(!1),i=F(null),m=F(null),y=Y(),t=d||Ee("cart"),v=p??y?.isCartEmpty??!0,[x,f]=T(!0),[c,z]=T(!1),[_,g]=T(null),[B,w]=T(""),[P,V]=T(!1),O=F(!1),J=()=>!x&&_!==null&&Object.keys(_).length>0,ce=()=>c?J():X()?!v:!!localStorage.getItem("voxel:guest_cart"),K=n=>n.product_mode==="regular"?n.value.stock?.quantity||0:n.product_mode==="variable"&&n.value.variations?.quantity||0,ae=()=>{if(!J()||!_)return 0;let n=0;return Object.values(_).forEach(u=>{n+=u.pricing.total_amount}),n},D=k(()=>{if(!_||Object.keys(_).length===0){localStorage.removeItem("voxel:guest_cart");return}const n={};Object.values(_).forEach(u=>{n[u.key]=u.value}),localStorage.setItem("voxel:guest_cart",JSON.stringify(n))},[_]),Q=k(async()=>{const n=X(),u=n?"products.get_cart_items":"products.get_guest_cart_items";try{const $=U(u),j=new FormData;t&&j.append("_wpnonce",t),j.append("guest_cart",localStorage.getItem("voxel:guest_cart")||"");const N=await(await fetch($,{method:"POST",body:j})).json();f(!1),z(!0),n&&localStorage.removeItem("voxel:guest_cart"),N.success?(g(Object.keys(N.items).length?N.items:{}),w(N.checkout_link),n||setTimeout(()=>D(),0)):S(N.message||C("ajaxError","An error occurred"))}catch{f(!1),z(!0),S(C("ajaxError","An error occurred"))}},[d,D]),W=k(()=>{if(a!=="frontend")return;const n=document.querySelector(".ts-checkout");if(n){window.Voxel?.scrollTo?.(n);return}h(!0),_===null&&(g({}),Q())},[a,_,Q]),te=k(async n=>{if(X()){g(u=>u?{...u,[n.key]:{...u[n.key],_disabled:!0}}:null);try{const u=U("products.remove_cart_item"),$=new FormData;$.append("item_key",n.key),t&&$.append("_wpnonce",t);const M=await(await fetch(u,{method:"POST",body:$})).json();M.success?g(N=>{if(!N)return null;const me={...N};return delete me[n.key],me}):(g(N=>N?{...N,[n.key]:{...N[n.key],_disabled:!1}}:null),S(M.message||C("ajaxError","An error occurred")))}catch{g(u=>u?{...u,[n.key]:{...u[n.key],_disabled:!1}}:null),S(C("ajaxError","An error occurred"))}}else g(u=>{if(!u)return null;const $={...u};return delete $[n.key],$}),setTimeout(()=>D(),0)},[d,D]),de=k(async()=>{if(X()){V(!0);try{const n=U("products.empty_cart"),u=new FormData;t&&u.append("_wpnonce",t);const j=await(await fetch(n,{method:"POST",body:u})).json();V(!1),j.success?g({}):S(j.message||C("ajaxError","An error occurred"))}catch{V(!1),S(C("ajaxError","An error occurred"))}}else g({}),localStorage.removeItem("voxel:guest_cart")},[d]),s=k(async(n,u)=>{g(M=>M?{...M,[n.key]:{...M[n.key],_disabled:!0}}:null);const $=X(),j=$?"products.update_cart_item_quantity":"products.update_guest_cart_item_quantity";try{const M=U(j),N=new FormData;N.append("item_key",n.key),N.append("item_quantity",u.toString()),$||N.append("guest_cart",localStorage.getItem("voxel:guest_cart")||""),t&&N.append("_wpnonce",t);const ue=await(await fetch(M,{method:"POST",body:N})).json();ue.success?(g(pe=>pe?{...pe,[n.key]:ue.item}:null),$||setTimeout(()=>D(),0)):S(ue.message||C("ajaxError","An error occurred"))}catch{S(C("ajaxError","An error occurred"))}finally{g(M=>M?{...M,[n.key]:{...M[n.key],_disabled:!1}}:null)}},[d,D]),R=k(n=>{const u=K(n)+1;s(n,u)},[s]),E=k(n=>{const u=K(n)-1;u<=0?te(n):s(n,u)},[s,te]),b=n=>{if(!_)return!1;let u=n.quantity.max;for(const $ of Object.values(_))if($.stock_id===n.stock_id&&(u-=K($),u<=0))return!1;return!0};ie(()=>{if(a!=="frontend")return;O.current||(O.current=!0,Object.defineProperty(window,"VX_Cart",{configurable:!0,get:()=>({open:W,getItems:Q,hasItems:J,getSubtotal:ae,get loading(){return x},get loaded(){return c},get items(){return _},get checkout_link(){return B}})}));const n=()=>{Q(),m.current?.classList.add("ts-cart-update"),setTimeout(()=>m.current?.classList.remove("ts-cart-update"),500)};return document.addEventListener("voxel:added_cart_item",n),()=>{document.removeEventListener("voxel:added_cart_item",n)}},[a,Q,W,J,ae,x,c,_,B]);const I=n=>React.createElement("div",{key:n.key,className:`ts-cart-item ${n._disabled?"vx-pending":""}`},React.createElement("div",{className:"ts-cart-item-image"},React.createElement("a",{href:n.link},React.createElement("img",{src:n.logo,alt:n.title}))),React.createElement("div",{className:"ts-cart-item-body"},React.createElement("a",{href:n.link,className:"ts-cart-item-title"},n.title),n.subtitle&&React.createElement("span",{className:"ts-cart-item-subtitle"},n.subtitle),React.createElement("span",{className:"ts-cart-item-price"},he(n.pricing.total_amount,n.pricing._currency))),React.createElement("div",{className:"ts-cart-item-actions"},n.quantity.enabled&&React.createElement("div",{className:"ts-quantity-control"},React.createElement("button",{className:"ts-qty-btn ts-qty-minus",onClick:()=>E(n),disabled:n._disabled},React.createElement("i",{className:"las la-minus"})),React.createElement("span",{className:"ts-qty-value"},K(n)),React.createElement("button",{className:"ts-qty-btn ts-qty-plus",onClick:()=>R(n),disabled:n._disabled||!b(n)},React.createElement("i",{className:"las la-plus"}))),React.createElement("button",{className:"ts-remove-btn",onClick:()=>te(n),disabled:n._disabled},React.createElement("i",{className:"las la-times"}))));return React.createElement("li",{className:`ts-popup-cart elementor-repeater-item-${e._id}`},React.createElement("a",{ref:i,href:"#",onClick:n=>{n.preventDefault(),W()},role:"button","aria-label":e.cartTitle||"Cart"},React.createElement("div",{ref:m,className:"ts-comp-icon flexify"},re(e.icon),a==="frontend"&&ce()&&React.createElement("span",{className:"unread-indicator"})),React.createElement("span",{className:"ts_comp_label"},e.cartTitle||"Cart")),a==="frontend"&&React.createElement(le,{isOpen:r,popupId:`cart-popup-${e._id}`,target:i.current,title:e.cartTitle||"Cart",icon:e.icon?.value?`<i class="${e.icon.value}"></i>`:"",onClose:()=>h(!1),showFooter:!1,popupClass:"lg-width ts-cart-popup"},React.createElement("div",{className:"ts-cart-content min-scroll"},x&&React.createElement(oe,null),!x&&React.createElement(React.Fragment,null,J()&&_?React.createElement(React.Fragment,null,React.createElement("div",{className:"ts-cart-items"},Object.values(_).map(I)),React.createElement("div",{className:"ts-cart-footer"},React.createElement("div",{className:"ts-cart-subtotal"},React.createElement("span",null,C("subtotal","Subtotal")),React.createElement("span",{className:"ts-subtotal-amount"},he(ae()))),React.createElement("div",{className:"ts-cart-actions"},React.createElement("button",{className:`ts-btn ts-btn-1 ts-empty-cart ${P?"vx-pending":""}`,onClick:de,disabled:P},C("emptyCart","Empty cart")),B&&React.createElement("a",{href:B,className:"ts-btn ts-btn-2"},C("checkout","Checkout"))))):React.createElement(oe,null)))))}function De({item:e,icons:l,context:a,hideChevron:d}){const[p,r]=T(!1),h=F(null),m=Y()?.user??window.VoxelFSEUser,y=m?.displayName||"User",t=m?.avatarUrl||"",v=k(()=>{a==="frontend"&&r(!0)},[a]);return React.createElement("li",{className:`ts-popup-component ts-user-area-avatar elementor-repeater-item-${e._id}`},React.createElement("a",{ref:h,href:"#",onClick:x=>{x.preventDefault(),v()},role:"button","aria-label":y},React.createElement("div",{className:"ts-comp-icon flexify"},a==="editor"?React.createElement("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"#ccc",display:"flex",alignItems:"center",justifyContent:"center"}},React.createElement("i",{className:"las la-user"})):t?React.createElement("img",{src:t,alt:y,style:{width:"32px",height:"32px",borderRadius:"50%"}}):React.createElement("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"#ccc",display:"flex",alignItems:"center",justifyContent:"center"}},React.createElement("i",{className:"las la-user"}))),React.createElement("span",{className:"ts_comp_label"},y),!d&&React.createElement("div",{className:"ts-down-icon"})),a==="frontend"&&React.createElement(le,{isOpen:p,popupId:`user-menu-popup-${e._id}`,target:h.current,title:y,icon:t?`<img src="${t}" alt="" style="width:24px;height:24px;border-radius:50%;">`:"",onClose:()=>r(!1),showFooter:!1},React.createElement("div",{className:"ts-term-dropdown ts-md-group ts-multilevel-dropdown"},React.createElement("p",{style:{padding:"16px",textAlign:"center",color:"#666"}},"Menu not configured"))))}function Ge({item:e,icons:l,context:a}){const[d,p]=T(!1),r=F(null),h=k(()=>{a==="frontend"&&p(!0)},[a]);return React.createElement("li",{className:`ts-popup-component elementor-repeater-item-${e._id}`},React.createElement("a",{ref:r,href:"#",onClick:i=>{i.preventDefault(),h()},role:"button","aria-label":e.wpMenuTitle||"Menu"},React.createElement("div",{className:"ts-comp-icon flexify"},re(e.icon)),React.createElement("span",{className:"ts_comp_label"},e.wpMenuTitle||"Menu")),a==="frontend"&&React.createElement(le,{isOpen:d,popupId:`wp-menu-popup-${e._id}`,target:r.current,title:e.wpMenuTitle||"Menu",icon:e.icon?.value?`<i class="${e.icon.value}"></i>`:"",onClose:()=>p(!1),showFooter:!1},React.createElement("div",{className:"ts-term-dropdown ts-md-group ts-multilevel-dropdown"},React.createElement("p",{style:{padding:"16px",textAlign:"center",color:"#666"}},"Menu not configured"))))}function qe({item:e,context:l}){const a={href:e.componentUrl.url||"#"};return e.componentUrl.is_external&&(a.target="_blank"),e.componentUrl.nofollow&&(a.rel="nofollow"),React.createElement("li",{className:`elementor-repeater-item-${e._id}`},React.createElement("a",{...a},React.createElement("div",{className:"ts-comp-icon flexify"},re(e.icon)),React.createElement("span",{className:"ts_comp_label"},e.componentTitle||"Link")))}function Je(e,l,a,d,p,r){switch(e.componentType){case"notifications":return React.createElement(He,{key:e._id,item:e,icons:l,context:a});case"messages":return React.createElement(Ue,{key:e._id,item:e,icons:l,context:a,nonce:p});case"cart":return React.createElement(Fe,{key:e._id,item:e,icons:l,context:a,nonce:p,isCartEmpty:r});case"user_menu":return React.createElement(De,{key:e._id,item:e,icons:l,context:a,hideChevron:d});case"select_wp_menu":return React.createElement(Ge,{key:e._id,item:e,icons:l,context:a});case"link":return React.createElement(qe,{key:e._id,item:e,context:a});default:return null}}function Qe({attributes:e,context:l,config:a}){const d=a?.items||e.items,p=a?.icons||e.icons,r=a?.settings||{itemsAlign:e.itemsAlign,verticalOrientation:e.verticalOrientation,verticalOrientationTablet:e.verticalOrientationTablet,verticalOrientationMobile:e.verticalOrientationMobile,itemContentAlign:e.itemContentAlign,hideChevron:e.hideChevron,customPopupEnable:e.customPopupEnable},h=window.VoxelFSEUserbar,i=h?.nonce,m=h?.is_cart_empty??!0,y={justifyContent:r.itemsAlign};return!d||d.length===0?React.createElement("div",{className:"ts-user-area"},React.createElement("div",{className:"voxel-fse-empty-state",style:{padding:"20px",textAlign:"center",background:"#f5f5f5",borderRadius:"4px"}},React.createElement("p",{style:{margin:0,color:"#666"}},l==="editor"?"Add components using the sidebar panel":"No user bar components configured"))):React.createElement(React.Fragment,null,l==="frontend"&&a&&React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(a)}}),React.createElement("ul",{className:"flexify simplify-ul user-area-menu",style:y},d.map(t=>Je(t,p,l,r.hideChevron,i,m))))}function We(e){if(!e)return"";let l="";return e.fontFamily&&(l+=`font-family: ${e.fontFamily}; `),e.fontSize&&(l+=`font-size: ${e.fontSize}${e.fontSizeUnit||"px"}; `),e.fontWeight&&(l+=`font-weight: ${e.fontWeight}; `),e.fontStyle&&(l+=`font-style: ${e.fontStyle}; `),e.textTransform&&(l+=`text-transform: ${e.textTransform}; `),e.textDecoration&&(l+=`text-decoration: ${e.textDecoration}; `),e.lineHeight&&(l+=`line-height: ${e.lineHeight}${e.lineHeightUnit||""}; `),e.letterSpacing&&(l+=`letter-spacing: ${e.letterSpacing}${e.letterSpacingUnit||"px"}; `),l}function Ce(e,l){const a=[],d=[],p=[],r=`.voxel-fse-userbar-${l}`;if(e.itemGap!==void 0&&a.push(`${r} .ts-user-area > ul { grid-gap: ${e.itemGap}px; }`),e.itemGapTablet!==void 0&&d.push(`${r} .ts-user-area > ul { grid-gap: ${e.itemGapTablet}px; }`),e.itemGapMobile!==void 0&&p.push(`${r} .ts-user-area > ul { grid-gap: ${e.itemGapMobile}px; }`),e.verticalOrientation&&(a.push(`${r} .ts-user-area > ul > li > a { flex-direction: column; }`),e.itemContentAlign&&a.push(`${r} .ts-user-area > ul > li > a { justify-content: ${e.itemContentAlign}; }`)),e.verticalOrientationTablet&&(d.push(`${r} .ts-user-area > ul > li > a { flex-direction: column; }`),e.itemContentAlign&&d.push(`${r} .ts-user-area > ul > li > a { justify-content: ${e.itemContentAlign}; }`)),e.verticalOrientationMobile&&(p.push(`${r} .ts-user-area > ul > li > a { flex-direction: column; }`),e.itemContentAlign&&p.push(`${r} .ts-user-area > ul > li > a { justify-content: ${e.itemContentAlign}; }`)),e.itemBackground&&a.push(`${r} .ts-user-area > ul > li > a { background-color: ${e.itemBackground}; }`),e.itemBackgroundHover&&a.push(`${r} .ts-user-area > ul > li > a:hover { background-color: ${e.itemBackgroundHover}; }`),e.itemMargin){const i=e.itemMargin,m=i.unit||"px";(i.top||i.right||i.bottom||i.left)&&a.push(`${r} .ts-user-area > ul > li > a { margin: ${i.top||0}${m} ${i.right||0}${m} ${i.bottom||0}${m} ${i.left||0}${m}; }`)}if(e.itemPadding){const i=e.itemPadding,m=i.unit||"px";(i.top||i.right||i.bottom||i.left)&&a.push(`${r} .ts-user-area > ul > li > a { padding: ${i.top||0}${m} ${i.right||0}${m} ${i.bottom||0}${m} ${i.left||0}${m}; }`)}if(e.itemBoxShadow&&Object.keys(e.itemBoxShadow).length>0){const i=e.itemBoxShadow,m=i.position==="inset"?"inset ":"",y=i.horizontal??0,t=i.vertical??0,v=i.blur??0,x=i.spread??0,f=i.color??"rgba(0,0,0,0.5)";a.push(`${r} .ts-user-area > ul > li > a { box-shadow: ${m}${y}px ${t}px ${v}px ${x}px ${f}; }`)}if(e.itemBoxShadowHover&&Object.keys(e.itemBoxShadowHover).length>0){const i=e.itemBoxShadowHover,m=i.position==="inset"?"inset ":"",y=i.horizontal??0,t=i.vertical??0,v=i.blur??0,x=i.spread??0,f=i.color??"rgba(0,0,0,0.5)";a.push(`${r} .ts-user-area > ul > li > a:hover { box-shadow: ${m}${y}px ${t}px ${v}px ${x}px ${f}; }`)}if(e.itemBorderRadius!==void 0&&a.push(`${r} .ts-user-area > ul > li > a { border-radius: ${e.itemBorderRadius}px; }`),e.itemBorderRadiusTablet!==void 0&&d.push(`${r} .ts-user-area > ul > li > a { border-radius: ${e.itemBorderRadiusTablet}px; }`),e.itemBorderRadiusMobile!==void 0&&p.push(`${r} .ts-user-area > ul > li > a { border-radius: ${e.itemBorderRadiusMobile}px; }`),e.itemContentGap!==void 0&&a.push(`${r} .ts-user-area > ul > li > a { grid-gap: ${e.itemContentGap}px; }`),e.itemContentGapTablet!==void 0&&d.push(`${r} .ts-user-area > ul > li > a { grid-gap: ${e.itemContentGapTablet}px; }`),e.itemContentGapMobile!==void 0&&p.push(`${r} .ts-user-area > ul > li > a { grid-gap: ${e.itemContentGapMobile}px; }`),e.iconContainerSize!==void 0&&a.push(`${r} .ts-user-area .ts-comp-icon { width: ${e.iconContainerSize}px; height: ${e.iconContainerSize}px; }`),e.iconContainerSizeTablet!==void 0&&d.push(`${r} .ts-user-area .ts-comp-icon { width: ${e.iconContainerSizeTablet}px; height: ${e.iconContainerSizeTablet}px; }`),e.iconContainerSizeMobile!==void 0&&p.push(`${r} .ts-user-area .ts-comp-icon { width: ${e.iconContainerSizeMobile}px; height: ${e.iconContainerSizeMobile}px; }`),e.iconContainerRadius!==void 0&&a.push(`${r} .ts-user-area .ts-comp-icon { border-radius: ${e.iconContainerRadius}px; }`),e.iconContainerRadiusTablet!==void 0&&d.push(`${r} .ts-user-area .ts-comp-icon { border-radius: ${e.iconContainerRadiusTablet}px; }`),e.iconContainerRadiusMobile!==void 0&&p.push(`${r} .ts-user-area .ts-comp-icon { border-radius: ${e.iconContainerRadiusMobile}px; }`),e.iconContainerBackground&&a.push(`${r} .ts-user-area .ts-comp-icon { background-color: ${e.iconContainerBackground}; }`),e.iconContainerBackgroundHover&&a.push(`${r} .ts-user-area > ul > li > a:hover .ts-comp-icon { background-color: ${e.iconContainerBackgroundHover}; }`),e.iconSize!==void 0&&a.push(`${r} .ts-user-area .ts-comp-icon { --ts-icon-size: ${e.iconSize}px; }`),e.iconSizeTablet!==void 0&&d.push(`${r} .ts-user-area .ts-comp-icon { --ts-icon-size: ${e.iconSizeTablet}px; }`),e.iconSizeMobile!==void 0&&p.push(`${r} .ts-user-area .ts-comp-icon { --ts-icon-size: ${e.iconSizeMobile}px; }`),e.iconColor&&a.push(`${r} .ts-user-area .ts-comp-icon { --ts-icon-color: ${e.iconColor}; }`),e.iconColorHover&&a.push(`${r} .ts-user-area > ul > li > a:hover .ts-comp-icon { --ts-icon-color: ${e.iconColorHover}; }`),e.unreadIndicatorColor&&a.push(`${r} .ts-user-area span.unread-indicator { background: ${e.unreadIndicatorColor}; }`),e.unreadIndicatorMargin!==void 0&&a.push(`${r} .ts-user-area span.unread-indicator { top: ${e.unreadIndicatorMargin}px; }`),e.unreadIndicatorMarginTablet!==void 0&&d.push(`${r} .ts-user-area span.unread-indicator { top: ${e.unreadIndicatorMarginTablet}px; }`),e.unreadIndicatorMarginMobile!==void 0&&p.push(`${r} .ts-user-area span.unread-indicator { top: ${e.unreadIndicatorMarginMobile}px; }`),e.unreadIndicatorSize!==void 0&&a.push(`${r} .ts-user-area span.unread-indicator { width: ${e.unreadIndicatorSize}px; height: ${e.unreadIndicatorSize}px; }`),e.unreadIndicatorSizeTablet!==void 0&&d.push(`${r} .ts-user-area span.unread-indicator { width: ${e.unreadIndicatorSizeTablet}px; height: ${e.unreadIndicatorSizeTablet}px; }`),e.unreadIndicatorSizeMobile!==void 0&&p.push(`${r} .ts-user-area span.unread-indicator { width: ${e.unreadIndicatorSizeMobile}px; height: ${e.unreadIndicatorSizeMobile}px; }`),e.avatarSize!==void 0&&a.push(`${r} .ts-user-area > ul > li.ts-user-area-avatar img { width: ${e.avatarSize}px; height: ${e.avatarSize}px; }`),e.avatarSizeTablet!==void 0&&d.push(`${r} .ts-user-area > ul > li.ts-user-area-avatar img { width: ${e.avatarSizeTablet}px; height: ${e.avatarSizeTablet}px; }`),e.avatarSizeMobile!==void 0&&p.push(`${r} .ts-user-area > ul > li.ts-user-area-avatar img { width: ${e.avatarSizeMobile}px; height: ${e.avatarSizeMobile}px; }`),e.avatarRadius!==void 0&&a.push(`${r} .ts-user-area > ul > li.ts-user-area-avatar img { border-radius: ${e.avatarRadius}%; }`),e.avatarRadiusTablet!==void 0&&d.push(`${r} .ts-user-area > ul > li.ts-user-area-avatar img { border-radius: ${e.avatarRadiusTablet}%; }`),e.avatarRadiusMobile!==void 0&&p.push(`${r} .ts-user-area > ul > li.ts-user-area-avatar img { border-radius: ${e.avatarRadiusMobile}%; }`),e.items?.forEach(i=>{if(!i._id)return;const m=`${r} .elementor-repeater-item-${i._id}`;i.labelVisibility&&(i.labelVisibilityDesktop==="none"&&a.push(`${m} .ts_comp_label { display: none; }`),i.labelVisibilityTablet==="none"?d.push(`${m} .ts_comp_label { display: none; }`):i.labelVisibilityTablet==="flex"&&i.labelVisibilityDesktop==="none"&&d.push(`${m} .ts_comp_label { display: flex; }`),i.labelVisibilityMobile==="none"?p.push(`${m} .ts_comp_label { display: none; }`):i.labelVisibilityMobile==="flex"&&(i.labelVisibilityDesktop==="none"||i.labelVisibilityTablet==="none")&&p.push(`${m} .ts_comp_label { display: flex; }`)),i.componentVisibility&&(i.userBarVisibilityDesktop==="none"&&a.push(`${m} { display: none !important; }`),i.userBarVisibilityTablet==="none"?d.push(`${m} { display: none !important; }`):i.userBarVisibilityTablet==="flex"&&i.userBarVisibilityDesktop==="none"&&d.push(`${m} { display: flex !important; }`),i.userBarVisibilityMobile==="none"?p.push(`${m} { display: none !important; }`):i.userBarVisibilityMobile==="flex"&&(i.userBarVisibilityDesktop==="none"||i.userBarVisibilityTablet==="none")&&p.push(`${m} { display: flex !important; }`))}),e.labelTypography){const i=We(e.labelTypography);i&&a.push(`${r} .ts-user-area .ts_comp_label { ${i} }`)}e.labelColor&&a.push(`${r} .ts-user-area .ts_comp_label { color: ${e.labelColor}; }`),e.labelColorHover&&a.push(`${r} .ts-user-area > ul > li > a:hover .ts_comp_label { color: ${e.labelColorHover}; }`),e.chevronColor&&a.push(`${r} .ts-down-icon { border-color: ${e.chevronColor}; }`),e.chevronColorHover&&a.push(`${r} .ts-user-area > ul > li > a:hover .ts-down-icon { border-color: ${e.chevronColorHover}; }`),e.hideChevron&&a.push(`${r} .ts-down-icon { display: none !important; }`);let h="";return a.length>0&&(h+=a.join(`
`)),d.length>0&&(h+=`
@media (max-width: 1024px) {
${d.join(`
`)}
}`),p.length>0&&(h+=`
@media (max-width: 767px) {
${p.join(`
`)}
}`),h}function Xe({attributes:e,setAttributes:l,clientId:a}){const d=e.blockId||a,[p,r]=T([{value:"",label:o("Select menu","voxel-fse")}]);ie(()=>{(async()=>{try{const v=await _e({path:"/voxel-fse/v1/navbar/locations"});if(v&&v.locations){const x=[{value:"",label:o("Select menu","voxel-fse")},...v.locations.map(f=>({value:f.slug,label:f.name}))];r(x)}}catch(v){console.error("Could not fetch nav menus:",v)}})()},[]),ie(()=>{e.blockId||l({blockId:a}),e.items||l({items:[]})},[e.blockId,e.items,a,l]),ie(()=>{const t="voxel-commons-css";if(!document.getElementById(t)){const v=document.createElement("link");v.id=t,v.rel="stylesheet";const f=(window.Voxel_Config?.site_url||window.location.origin).replace(/\/$/,"");v.href=`${f}/wp-content/themes/voxel/assets/dist/commons.css?ver=1.7.5.2`,document.head.appendChild(v)}},[]);const h=Re(e,{blockId:d,baseClass:"voxel-fse-userbar ts-user-area",selectorPrefix:"voxel-fse-userbar"}),i=fe(()=>Ce(e,d),[e,d]),m=fe(()=>[h.responsiveCSS,i].filter(Boolean).join(`
`),[h.responsiveCSS,i]),y=ye({id:h.elementId,className:h.className,style:h.styles,...h.customAttrs});return React.createElement("div",{...y},React.createElement(we,null,React.createElement(Te,{tabs:[{id:"content",label:o("Content","voxel-fse"),render:()=>React.createElement(ze,{attributes:e,setAttributes:l,navMenus:p})},{id:"style",label:o("Style","voxel-fse"),render:()=>React.createElement(Ae,{attributes:e,setAttributes:l})}],includeAdvancedTab:!0,includeVoxelTab:!0,attributes:e,setAttributes:l})),m&&React.createElement("style",{dangerouslySetInnerHTML:{__html:m}}),React.createElement(Qe,{attributes:e,context:"editor"}))}function Ye({attributes:e}){const l=e.blockId||"userbar",a=Re(e,{blockId:l,baseClass:"voxel-fse-userbar ts-user-area"}),d=Ce(e,l),p=[a.responsiveCSS,d].filter(Boolean).join(`
`),r=ye.save({id:a.elementId,className:a.className,style:a.styles,"data-visibility-behavior":e.visibilityBehavior||void 0,"data-visibility-rules":e.visibilityRules?.length?JSON.stringify(e.visibilityRules):void 0,"data-loop-source":e.loopSource||void 0,"data-loop-limit":e.loopLimit||void 0,"data-loop-offset":e.loopOffset||void 0,...a.customAttrs}),h={items:e.items,icons:e.icons,settings:{itemsAlign:e.itemsAlign,verticalOrientation:e.verticalOrientation,verticalOrientationTablet:e.verticalOrientationTablet??!1,verticalOrientationMobile:e.verticalOrientationMobile??!1,itemContentAlign:e.itemContentAlign,hideChevron:e.hideChevron,customPopupEnable:e.customPopupEnable}};return React.createElement("div",{...r},p&&React.createElement("style",{dangerouslySetInnerHTML:{__html:p}}),Ne(e,!1,void 0,void 0,a.uniqueSelector),React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(h)}}),React.createElement("div",{className:"voxel-fse-block-placeholder",style:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#e0e0e0",padding:"16px",minHeight:"48px"}},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor",style:{opacity:.4}},React.createElement("rect",{x:"4",y:"4",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"10",y:"4",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"16",y:"4",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"4",y:"10",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"10",y:"10",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"16",y:"10",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"4",y:"16",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"10",y:"16",width:"4",height:"4",rx:"0.5"}),React.createElement("rect",{x:"16",y:"16",width:"4",height:"4",rx:"0.5"}))))}const Ke="https://schemas.wp.org/trunk/block.json",Ze=3,ea="voxel-fse/userbar",aa="1.0.0",ta="Userbar (VX)",na="voxel-fse",oa="User bar with notifications, messages, cart, user menu, and custom links. FSE equivalent of Voxel's User bar widget.",la=["userbar","user","notifications","messages","cart","menu","voxel"],ra="voxel-fse",ia={html:!1,align:["wide","full"],anchor:!0,className:!0,customClassName:!0},sa="file:./index.js",ca="file:./frontend.js",da="file:./render.php",ma={blockId:{type:"string",default:""},items:{type:"array",default:[]},icons:{type:"object",default:{downArrow:{library:"",value:""},rightArrow:{library:"",value:""},leftArrow:{library:"",value:""},close:{library:"",value:""},trash:{library:"",value:""},inbox:{library:"",value:""},loadMore:{library:"",value:""}}},itemsAlign:{type:"string",default:"left"},verticalOrientation:{type:"boolean",default:!1},verticalOrientationTablet:{type:"boolean",default:!1},verticalOrientationMobile:{type:"boolean",default:!1},itemContentAlign:{type:"string",default:"left"},itemGap:{type:"number",default:0},itemGapTablet:{type:"number"},itemGapMobile:{type:"number"},itemMargin:{type:"object",default:{top:"",right:"",bottom:"",left:""}},itemPadding:{type:"object",default:{top:"",right:"",bottom:"",left:""}},itemBoxShadow:{type:"object",default:{}},itemBoxShadowHover:{type:"object",default:{}},itemBackground:{type:"string",default:""},itemBackgroundHover:{type:"string",default:"#fff"},itemBorderRadius:{type:"number",default:0},itemBorderRadiusTablet:{type:"number"},itemBorderRadiusMobile:{type:"number"},itemContentGap:{type:"number",default:0},itemContentGapTablet:{type:"number"},itemContentGapMobile:{type:"number"},iconContainerSize:{type:"number",default:40},iconContainerSizeTablet:{type:"number"},iconContainerSizeMobile:{type:"number"},iconContainerRadius:{type:"number",default:40},iconContainerRadiusTablet:{type:"number"},iconContainerRadiusMobile:{type:"number"},iconContainerBackground:{type:"string",default:""},iconContainerBackgroundHover:{type:"string",default:""},iconSize:{type:"number",default:20},iconSizeTablet:{type:"number"},iconSizeMobile:{type:"number"},iconColor:{type:"string",default:""},iconColorHover:{type:"string",default:""},unreadIndicatorColor:{type:"string",default:""},unreadIndicatorMargin:{type:"number",default:0},unreadIndicatorMarginTablet:{type:"number"},unreadIndicatorMarginMobile:{type:"number"},unreadIndicatorSize:{type:"number",default:8},unreadIndicatorSizeTablet:{type:"number"},unreadIndicatorSizeMobile:{type:"number"},avatarSize:{type:"number",default:32},avatarSizeTablet:{type:"number"},avatarSizeMobile:{type:"number"},avatarRadius:{type:"number",default:50},avatarRadiusTablet:{type:"number"},avatarRadiusMobile:{type:"number"},labelTypography:{type:"object",default:{}},labelColor:{type:"string",default:""},labelColorHover:{type:"string",default:""},chevronColor:{type:"string",default:""},chevronColorHover:{type:"string",default:""},hideChevron:{type:"boolean",default:!1},customPopupEnable:{type:"boolean",default:!1},popupBackdropColor:{type:"string",default:""},popupPointerEvents:{type:"boolean",default:!1},popupBoxShadow:{type:"object",default:{}},popupTopMargin:{type:"number",default:0},popupMaxHeight:{type:"number",default:0},_comment_voxel_tab:"VoxelTab attributes for visibility and loop features",visibilityBehavior:{type:"string",default:"show",enum:["show","hide"]},visibilityRules:{type:"array",default:[],items:{type:"object"}},loopEnabled:{type:"boolean",default:!1},loopSource:{type:"string",default:""},loopProperty:{type:"string",default:""},loopLimit:{type:"string",default:""},loopOffset:{type:"string",default:""}},be={$schema:Ke,apiVersion:Ze,name:ea,version:aa,title:ta,category:na,description:oa,keywords:la,textdomain:ra,supports:ia,editorScript:sa,viewScript:ca,render:da,attributes:ma};$e(be.name,{...be,icon:Oe,edit:Xe,save:Ye});
