import{registerBlockType as ko}from"@wordpress/blocks";import{forwardRef as Fo,useRef as ue,useState as ae,useCallback as ye,useEffect as oe,useMemo as zo}from"react";import{__ as i}from"@wordpress/i18n";import{useBlockProps as So,InspectorControls as Mo}from"@wordpress/block-editor";import{useSelect as je}from"@wordpress/data";import{A as Io,a as Ce,R as A,T as Ge,C as j,m as Ve,D as Ho,n as Lo}from"../TypographyPopup-CAcEJ5NA.js";import{I as bo,v as Do}from"../InspectorTabs-Bq2wAh4W.js";import{SelectControl as me,RangeControl as Pe,ToggleControl as Xe,TextControl as Ue}from"@wordpress/components";import Co from"@wordpress/api-fetch";/* empty css                            */import"../RepeaterControl-C7JnAhZL.js";import"../voxelShim-DB_Ue-9R.js";import{g as $o}from"../useAdvancedTabProps-BnJDQbKr.js";import{r as Oo}from"../backgroundElements-Ui-iCrLV.js";import{E as Ao}from"../EmptyPlaceholder-BsL18qxN.js";import{I as Ee}from"../IconPickerControl-Lep6knGI.js";import{R as Wo}from"../RelationControl-D8hRYr3b.js";import{S as mo}from"../StyleTabPanel-BnA2rBs5.js";import{V as jo}from"../VoxelGridIcon-D5dF5acW.js";import"react-dom";import"../generateAdvancedStyles-CRpLcHXt.js";import"../generateVoxelStyles-oZeaeuKH.js";function qe(e){if(!e)return"";const n=[];if(e.fontFamily&&n.push(`font-family: ${e.fontFamily};`),e.fontSize!==void 0){const o=e.fontSizeUnit||"px";n.push(`font-size: ${e.fontSize}${o};`)}if(e.fontWeight&&n.push(`font-weight: ${e.fontWeight};`),e.fontStyle&&e.fontStyle!=="default"&&n.push(`font-style: ${e.fontStyle};`),e.textDecoration&&e.textDecoration!=="none"&&n.push(`text-decoration: ${e.textDecoration};`),e.lineHeight!==void 0){const o=e.lineHeightUnit||"";n.push(`line-height: ${e.lineHeight}${o};`)}if(e.letterSpacing!==void 0){const o=e.letterSpacingUnit||"px";n.push(`letter-spacing: ${e.letterSpacing}${o};`)}if(e.wordSpacing!==void 0){const o=e.wordSpacingUnit||"px";n.push(`word-spacing: ${e.wordSpacing}${o};`)}return e.textTransform&&e.textTransform!=="none"&&n.push(`text-transform: ${e.textTransform};`),n.join(" ")}function Je(e){return e?!!(e.fontFamily||e.fontSize!==void 0||e.fontWeight||e.fontStyle&&e.fontStyle!=="default"||e.textDecoration&&e.textDecoration!=="none"||e.lineHeight!==void 0||e.letterSpacing!==void 0||e.wordSpacing!==void 0||e.textTransform&&e.textTransform!=="none"):!1}function Go(e,n){if(!e)return"";const o=e.top!==void 0&&e.top!==""?e.top:void 0,l=e.right!==void 0&&e.right!==""?e.right:void 0,r=e.bottom!==void 0&&e.bottom!==""?e.bottom:void 0,t=e.left!==void 0&&e.left!==""?e.left:void 0;if(o===void 0&&l===void 0&&r===void 0&&t===void 0)return"";const s=[];return o!==void 0&&s.push(`${n}-top: ${o};`),l!==void 0&&s.push(`${n}-right: ${l};`),r!==void 0&&s.push(`${n}-bottom: ${r};`),t!==void 0&&s.push(`${n}-left: ${t};`),s.join(" ")}function Ro(e,n){const o=[],l=[],r=[],t=`[data-block-id="${n}"]`;if(o.push(`${t} { position: relative; max-width: 100%; min-width: 0; }`),o.push(`${t} .post-feed-grid { max-width: 100%; }`),Je(e.counterTypography)){const a=qe(e.counterTypography);a&&o.push(`${t} .result-count { ${a} }`)}if(e.counterTextColor&&o.push(`${t} .result-count { color: ${e.counterTextColor}; }`),e.counterBottomSpacing!==void 0&&o.push(`${t} .post-feed-header { margin-bottom: ${e.counterBottomSpacing}px; }`),e.counterBottomSpacing_tablet!==void 0&&l.push(`${t} .post-feed-header { margin-bottom: ${e.counterBottomSpacing_tablet}px; }`),e.counterBottomSpacing_mobile!==void 0&&r.push(`${t} .post-feed-header { margin-bottom: ${e.counterBottomSpacing_mobile}px; }`),Je(e.orderByTypography)){const a=qe(e.orderByTypography);a&&o.push(`${t} .vxf-sort { ${a} }`)}if(e.orderByTextColor&&o.push(`${t} .vxf-sort { --ts-shade-3: ${e.orderByTextColor}; }`),e.orderByTextColorHover&&o.push(`${t} .vxf-sort { --ts-shade-2: ${e.orderByTextColorHover}; }`),e.noResultsContentGap!==void 0&&o.push(`${t} .ts-no-posts { gap: ${e.noResultsContentGap}px; }`),e.noResultsContentGap_tablet!==void 0&&l.push(`${t} .ts-no-posts { gap: ${e.noResultsContentGap_tablet}px; }`),e.noResultsContentGap_mobile!==void 0&&r.push(`${t} .ts-no-posts { gap: ${e.noResultsContentGap_mobile}px; }`),e.noResultsIconSize!==void 0&&o.push(`${t} .ts-no-posts > svg, ${t} .ts-no-posts > i { --ts-icon-size: ${e.noResultsIconSize}px; width: ${e.noResultsIconSize}px; height: ${e.noResultsIconSize}px; font-size: ${e.noResultsIconSize}px; }`),e.noResultsIconSize_tablet!==void 0&&l.push(`${t} .ts-no-posts > svg, ${t} .ts-no-posts > i { --ts-icon-size: ${e.noResultsIconSize_tablet}px; width: ${e.noResultsIconSize_tablet}px; height: ${e.noResultsIconSize_tablet}px; font-size: ${e.noResultsIconSize_tablet}px; }`),e.noResultsIconSize_mobile!==void 0&&r.push(`${t} .ts-no-posts > svg, ${t} .ts-no-posts > i { --ts-icon-size: ${e.noResultsIconSize_mobile}px; width: ${e.noResultsIconSize_mobile}px; height: ${e.noResultsIconSize_mobile}px; font-size: ${e.noResultsIconSize_mobile}px; }`),e.noResultsIconColor&&o.push(`${t} .ts-no-posts > svg, ${t} .ts-no-posts > i { --ts-icon-color: ${e.noResultsIconColor}; color: ${e.noResultsIconColor}; fill: ${e.noResultsIconColor}; }`),Je(e.noResultsTypography)){const a=qe(e.noResultsTypography);a&&o.push(`${t} .ts-no-posts p { ${a} }`)}if(e.noResultsTextColor&&o.push(`${t} .ts-no-posts p { color: ${e.noResultsTextColor}; }`),e.noResultsLinkColor&&o.push(`${t} .ts-no-posts a { color: ${e.noResultsLinkColor}; }`),e.paginationTopMargin!==void 0&&o.push(`${t} .feed-pagination { margin-top: ${e.paginationTopMargin}px; }`),e.paginationTopMargin_tablet!==void 0&&l.push(`${t} .feed-pagination { margin-top: ${e.paginationTopMargin_tablet}px; }`),e.paginationTopMargin_mobile!==void 0&&r.push(`${t} .feed-pagination { margin-top: ${e.paginationTopMargin_mobile}px; }`),Je(e.paginationTypography)){const a=qe(e.paginationTypography);a&&o.push(`${t} .feed-pagination .ts-btn { ${a} }`)}if(e.paginationPadding){const a=Go(e.paginationPadding,"padding");a&&o.push(`${t} .feed-pagination .ts-btn { ${a} }`)}if(e.paginationHeight!==void 0&&o.push(`${t} .feed-pagination .ts-btn { height: ${e.paginationHeight}px; }`),e.paginationHeight_tablet!==void 0&&l.push(`${t} .feed-pagination .ts-btn { height: ${e.paginationHeight_tablet}px; }`),e.paginationHeight_mobile!==void 0&&r.push(`${t} .feed-pagination .ts-btn { height: ${e.paginationHeight_mobile}px; }`),e.paginationWidth!==void 0&&e.paginationWidth>0){const a=e.paginationWidthUnit||"%";o.push(`${t} .feed-pagination .ts-btn { width: ${e.paginationWidth}${a}; }`)}else e.paginationWidth;e.paginationIconTextSpacing!==void 0&&o.push(`${t} .feed-pagination .ts-btn { gap: ${e.paginationIconTextSpacing}px; }`),e.paginationBorderType&&o.push(`${t} .feed-pagination .ts-btn { border-style: ${e.paginationBorderType}; }`),e.paginationBorderWidth!==void 0?o.push(`${t} .feed-pagination .ts-btn { border-width: ${e.paginationBorderWidth}px; }`):e.paginationBorderType&&e.paginationBorderType!=="none"&&o.push(`${t} .feed-pagination .ts-btn { border-width: 1px; }`),e.paginationBorderColor&&o.push(`${t} .feed-pagination .ts-btn { border-color: ${e.paginationBorderColor}; }`),e.paginationJustify&&o.push(`${t} .feed-pagination { justify-content: ${e.paginationJustify}; }`),e.paginationSpacing!==void 0&&o.push(`${t} .feed-pagination { gap: ${e.paginationSpacing}px; }`),e.paginationSpacing_tablet!==void 0&&l.push(`${t} .feed-pagination { gap: ${e.paginationSpacing_tablet}px; }`),e.paginationSpacing_mobile!==void 0&&r.push(`${t} .feed-pagination { gap: ${e.paginationSpacing_mobile}px; }`),e.paginationBorderRadius!==void 0&&o.push(`${t} .feed-pagination .ts-btn { border-radius: ${e.paginationBorderRadius}px; }`),e.paginationBorderRadius_tablet!==void 0&&l.push(`${t} .feed-pagination .ts-btn { border-radius: ${e.paginationBorderRadius_tablet}px; }`),e.paginationBorderRadius_mobile!==void 0&&r.push(`${t} .feed-pagination .ts-btn { border-radius: ${e.paginationBorderRadius_mobile}px; }`),e.paginationTextColor&&o.push(`${t} .feed-pagination .ts-btn { color: ${e.paginationTextColor}; }`),e.paginationBackgroundColor&&o.push(`${t} .feed-pagination .ts-btn { background-color: ${e.paginationBackgroundColor}; }`),e.paginationIconSize!==void 0&&o.push(`${t} .feed-pagination .ts-btn svg, ${t} .feed-pagination .ts-btn i { --ts-icon-size: ${e.paginationIconSize}px; width: ${e.paginationIconSize}px; height: ${e.paginationIconSize}px; font-size: ${e.paginationIconSize}px; }`),e.paginationIconSize_tablet!==void 0&&l.push(`${t} .feed-pagination .ts-btn svg, ${t} .feed-pagination .ts-btn i { --ts-icon-size: ${e.paginationIconSize_tablet}px; width: ${e.paginationIconSize_tablet}px; height: ${e.paginationIconSize_tablet}px; font-size: ${e.paginationIconSize_tablet}px; }`),e.paginationIconSize_mobile!==void 0&&r.push(`${t} .feed-pagination .ts-btn svg, ${t} .feed-pagination .ts-btn i { --ts-icon-size: ${e.paginationIconSize_mobile}px; width: ${e.paginationIconSize_mobile}px; height: ${e.paginationIconSize_mobile}px; font-size: ${e.paginationIconSize_mobile}px; }`),e.paginationIconColor&&o.push(`${t} .feed-pagination .ts-btn svg, ${t} .feed-pagination .ts-btn i { --ts-icon-color: ${e.paginationIconColor}; color: ${e.paginationIconColor}; fill: ${e.paginationIconColor}; }`),e.paginationTextColorHover&&o.push(`${t} .feed-pagination .ts-btn:hover { color: ${e.paginationTextColorHover}; }`),e.paginationBackgroundColorHover&&o.push(`${t} .feed-pagination .ts-btn:hover { background-color: ${e.paginationBackgroundColorHover}; }`),e.paginationBorderColorHover&&o.push(`${t} .feed-pagination .ts-btn:hover { border-color: ${e.paginationBorderColorHover}; }`),e.paginationIconColorHover&&o.push(`${t} .feed-pagination .ts-btn:hover svg, ${t} .feed-pagination .ts-btn:hover i { --ts-icon-color: ${e.paginationIconColorHover}; color: ${e.paginationIconColorHover}; fill: ${e.paginationIconColorHover}; }`),e.carouselNavHorizontalPosition!==void 0&&(o.push(`${t} .post-feed-nav .ts-prev-page { left: ${e.carouselNavHorizontalPosition}px; }`),o.push(`${t} .post-feed-nav .ts-next-page { right: ${e.carouselNavHorizontalPosition}px; }`)),e.carouselNavHorizontalPosition_tablet!==void 0&&(l.push(`${t} .post-feed-nav .ts-prev-page { left: ${e.carouselNavHorizontalPosition_tablet}px; }`),l.push(`${t} .post-feed-nav .ts-next-page { right: ${e.carouselNavHorizontalPosition_tablet}px; }`)),e.carouselNavHorizontalPosition_mobile!==void 0&&(r.push(`${t} .post-feed-nav .ts-prev-page { left: ${e.carouselNavHorizontalPosition_mobile}px; }`),r.push(`${t} .post-feed-nav .ts-next-page { right: ${e.carouselNavHorizontalPosition_mobile}px; }`)),e.carouselNavVerticalPosition!==void 0&&o.push(`${t} .post-feed-nav .ts-icon-btn { top: ${e.carouselNavVerticalPosition}%; transform: translateY(-50%); }`),e.carouselNavVerticalPosition_tablet!==void 0&&l.push(`${t} .post-feed-nav .ts-icon-btn { top: ${e.carouselNavVerticalPosition_tablet}%; transform: translateY(-50%); }`),e.carouselNavVerticalPosition_mobile!==void 0&&r.push(`${t} .post-feed-nav .ts-icon-btn { top: ${e.carouselNavVerticalPosition_mobile}%; transform: translateY(-50%); }`),e.carouselNavIconColor&&o.push(`${t} .post-feed-nav .ts-icon-btn svg, ${t} .post-feed-nav .ts-icon-btn i { --ts-icon-color: ${e.carouselNavIconColor}; color: ${e.carouselNavIconColor}; fill: ${e.carouselNavIconColor}; }`),e.carouselNavButtonSize!==void 0&&o.push(`${t} .post-feed-nav .ts-icon-btn { width: ${e.carouselNavButtonSize}px; height: ${e.carouselNavButtonSize}px; }`),e.carouselNavButtonSize_tablet!==void 0&&l.push(`${t} .post-feed-nav .ts-icon-btn { width: ${e.carouselNavButtonSize_tablet}px; height: ${e.carouselNavButtonSize_tablet}px; }`),e.carouselNavButtonSize_mobile!==void 0&&r.push(`${t} .post-feed-nav .ts-icon-btn { width: ${e.carouselNavButtonSize_mobile}px; height: ${e.carouselNavButtonSize_mobile}px; }`),e.carouselNavIconSize!==void 0&&o.push(`${t} .post-feed-nav .ts-icon-btn svg, ${t} .post-feed-nav .ts-icon-btn i { --ts-icon-size: ${e.carouselNavIconSize}px; width: ${e.carouselNavIconSize}px; height: ${e.carouselNavIconSize}px; font-size: ${e.carouselNavIconSize}px; }`),e.carouselNavIconSize_tablet!==void 0&&l.push(`${t} .post-feed-nav .ts-icon-btn svg, ${t} .post-feed-nav .ts-icon-btn i { --ts-icon-size: ${e.carouselNavIconSize_tablet}px; width: ${e.carouselNavIconSize_tablet}px; height: ${e.carouselNavIconSize_tablet}px; font-size: ${e.carouselNavIconSize_tablet}px; }`),e.carouselNavIconSize_mobile!==void 0&&r.push(`${t} .post-feed-nav .ts-icon-btn svg, ${t} .post-feed-nav .ts-icon-btn i { --ts-icon-size: ${e.carouselNavIconSize_mobile}px; width: ${e.carouselNavIconSize_mobile}px; height: ${e.carouselNavIconSize_mobile}px; font-size: ${e.carouselNavIconSize_mobile}px; }`),e.carouselNavBackground&&o.push(`${t} .post-feed-nav .ts-icon-btn { background-color: ${e.carouselNavBackground}; }`),e.carouselNavBackdropBlur!==void 0&&o.push(`${t} .post-feed-nav .ts-icon-btn { backdrop-filter: blur(${e.carouselNavBackdropBlur}px); -webkit-backdrop-filter: blur(${e.carouselNavBackdropBlur}px); }`),e.carouselNavBorderType&&o.push(`${t} .post-feed-nav .ts-icon-btn { border-style: ${e.carouselNavBorderType}; }`),e.carouselNavBorderWidth!==void 0?o.push(`${t} .post-feed-nav .ts-icon-btn { border-width: ${e.carouselNavBorderWidth}px; }`):e.carouselNavBorderType&&e.carouselNavBorderType!=="none"&&o.push(`${t} .post-feed-nav .ts-icon-btn { border-width: 1px; }`),e.carouselNavBorderColor&&o.push(`${t} .post-feed-nav .ts-icon-btn { border-color: ${e.carouselNavBorderColor}; }`),e.carouselNavBorderRadius!==void 0&&o.push(`${t} .post-feed-nav .ts-icon-btn { border-radius: ${e.carouselNavBorderRadius}px; }`),e.carouselNavBorderRadius_tablet!==void 0&&l.push(`${t} .post-feed-nav .ts-icon-btn { border-radius: ${e.carouselNavBorderRadius_tablet}px; }`),e.carouselNavBorderRadius_mobile!==void 0&&r.push(`${t} .post-feed-nav .ts-icon-btn { border-radius: ${e.carouselNavBorderRadius_mobile}px; }`),e.carouselNavButtonSizeHover!==void 0&&o.push(`${t} .post-feed-nav .ts-icon-btn:hover { width: ${e.carouselNavButtonSizeHover}px; height: ${e.carouselNavButtonSizeHover}px; }`),e.carouselNavButtonSizeHover_tablet!==void 0&&l.push(`${t} .post-feed-nav .ts-icon-btn:hover { width: ${e.carouselNavButtonSizeHover_tablet}px; height: ${e.carouselNavButtonSizeHover_tablet}px; }`),e.carouselNavButtonSizeHover_mobile!==void 0&&r.push(`${t} .post-feed-nav .ts-icon-btn:hover { width: ${e.carouselNavButtonSizeHover_mobile}px; height: ${e.carouselNavButtonSizeHover_mobile}px; }`),e.carouselNavIconSizeHover!==void 0&&o.push(`${t} .post-feed-nav .ts-icon-btn:hover svg, ${t} .post-feed-nav .ts-icon-btn:hover i { --ts-icon-size: ${e.carouselNavIconSizeHover}px; width: ${e.carouselNavIconSizeHover}px; height: ${e.carouselNavIconSizeHover}px; font-size: ${e.carouselNavIconSizeHover}px; }`),e.carouselNavIconSizeHover_tablet!==void 0&&l.push(`${t} .post-feed-nav .ts-icon-btn:hover svg, ${t} .post-feed-nav .ts-icon-btn:hover i { --ts-icon-size: ${e.carouselNavIconSizeHover_tablet}px; width: ${e.carouselNavIconSizeHover_tablet}px; height: ${e.carouselNavIconSizeHover_tablet}px; font-size: ${e.carouselNavIconSizeHover_tablet}px; }`),e.carouselNavIconSizeHover_mobile!==void 0&&r.push(`${t} .post-feed-nav .ts-icon-btn:hover svg, ${t} .post-feed-nav .ts-icon-btn:hover i { --ts-icon-size: ${e.carouselNavIconSizeHover_mobile}px; width: ${e.carouselNavIconSizeHover_mobile}px; height: ${e.carouselNavIconSizeHover_mobile}px; font-size: ${e.carouselNavIconSizeHover_mobile}px; }`),e.carouselNavIconColorHover&&o.push(`${t} .post-feed-nav .ts-icon-btn:hover svg, ${t} .post-feed-nav .ts-icon-btn:hover i { --ts-icon-color: ${e.carouselNavIconColorHover}; color: ${e.carouselNavIconColorHover}; fill: ${e.carouselNavIconColorHover}; }`),e.carouselNavBackgroundHover&&o.push(`${t} .post-feed-nav .ts-icon-btn:hover { background-color: ${e.carouselNavBackgroundHover}; }`),e.carouselNavBorderColorHover&&o.push(`${t} .post-feed-nav .ts-icon-btn:hover { border-color: ${e.carouselNavBorderColorHover}; }`),e.loadingStyle==="opacity"&&e.loadingOpacity!==void 0&&o.push(`${t} .post-feed-grid.vx-opacity { opacity: ${e.loadingOpacity}; }`),e.loadingStyle==="skeleton"&&e.skeletonBackgroundColor&&o.push(`${t}.vx-loading .vx-skeleton .ts-preview { background-color: ${e.skeletonBackgroundColor}; }`);let s=o.join(`
`);return l.length>0&&(s+=`
@media (max-width: 1024px) {
${l.join(`
`)}
}`),r.length>0&&(s+=`
@media (max-width: 767px) {
${r.join(`
`)}
}`),s}const No=Fo(({variant:e="inline",className:n="",ariaLabel:o="Loading",text:l},r)=>e==="inline"?React.createElement("span",{ref:r,className:`ts-loader ${n}`,role:"status","aria-label":o}):e==="centered"?React.createElement("div",{className:`ts-no-posts ${n}`},React.createElement("span",{ref:r,className:"ts-loader",role:"status","aria-label":o}),l&&React.createElement("p",null,l)):e==="fullpage"?React.createElement("div",{className:`vx-loading-screen ${n}`},React.createElement("div",{className:"ts-no-posts"},React.createElement("span",{ref:r,className:"ts-loader",role:"status","aria-label":o}))):e==="button"?React.createElement("div",{className:"ts-loader-wrapper"},React.createElement("span",{ref:r,className:"ts-loader",role:"status","aria-label":o}),l&&React.createElement("span",null,l)):React.createElement("span",{ref:r,className:`ts-loader ${n}`,role:"status","aria-label":o}));No.displayName="Loader";function Vo(e){return Object.prototype.toString.call(e)==="[object Object]"}function go(e){return Vo(e)||Array.isArray(e)}function Uo(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function to(e,n){const o=Object.keys(e),l=Object.keys(n);if(o.length!==l.length)return!1;const r=JSON.stringify(Object.keys(e.breakpoints||{})),t=JSON.stringify(Object.keys(n.breakpoints||{}));return r!==t?!1:o.every(s=>{const a=e[s],c=n[s];return typeof a=="function"?`${a}`==`${c}`:!go(a)||!go(c)?a===c:to(a,c)})}function vo(e){return e.concat().sort((n,o)=>n.name>o.name?1:-1).map(n=>n.options)}function qo(e,n){if(e.length!==n.length)return!1;const o=vo(e),l=vo(n);return o.every((r,t)=>{const s=l[t];return to(r,s)})}function lo(e){return typeof e=="number"}function oo(e){return typeof e=="string"}function Ye(e){return typeof e=="boolean"}function ho(e){return Object.prototype.toString.call(e)==="[object Object]"}function W(e){return Math.abs(e)}function ao(e){return Math.sign(e)}function ke(e,n){return W(e-n)}function Jo(e,n){if(e===0||n===0||W(e)<=W(n))return 0;const o=ke(W(e),W(n));return W(o/e)}function Xo(e){return Math.round(e*100)/100}function Fe(e){return ze(e).map(Number)}function ve(e){return e[He(e)]}function He(e){return Math.max(0,e.length-1)}function ro(e,n){return n===He(e)}function yo(e,n=0){return Array.from(Array(e),(o,l)=>n+l)}function ze(e){return Object.keys(e)}function To(e,n){return[e,n].reduce((o,l)=>(ze(l).forEach(r=>{const t=o[r],s=l[r],a=ho(t)&&ho(s);o[r]=a?To(t,s):s}),o),{})}function no(e,n){return typeof n.MouseEvent<"u"&&e instanceof n.MouseEvent}function Ko(e,n){const o={start:l,center:r,end:t};function l(){return 0}function r(c){return t(c)/2}function t(c){return n-c}function s(c,p){return oo(e)?o[e](c):e(n,c,p)}return{measure:s}}function Me(){let e=[];function n(r,t,s,a={passive:!0}){let c;if("addEventListener"in r)r.addEventListener(t,s,a),c=()=>r.removeEventListener(t,s,a);else{const p=r;p.addListener(s),c=()=>p.removeListener(s)}return e.push(c),l}function o(){e=e.filter(r=>r())}const l={add:n,clear:o};return l}function Qo(e,n,o,l){const r=Me(),t=1e3/60;let s=null,a=0,c=0;function p(){r.add(e,"visibilitychange",()=>{e.hidden&&v()})}function d(){I(),r.clear()}function g(h){if(!c)return;s||(s=h,o(),o());const f=h-s;for(s=h,a+=f;a>=t;)o(),a-=t;const x=a/t;l(x),c&&(c=n.requestAnimationFrame(g))}function y(){c||(c=n.requestAnimationFrame(g))}function I(){n.cancelAnimationFrame(c),s=null,a=0,c=0}function v(){s=null,a=0}return{init:p,destroy:d,start:y,stop:I,update:o,render:l}}function Yo(e,n){const o=n==="rtl",l=e==="y",r=l?"y":"x",t=l?"x":"y",s=!l&&o?-1:1,a=d(),c=g();function p(v){const{height:u,width:h}=v;return l?u:h}function d(){return l?"top":o?"right":"left"}function g(){return l?"bottom":o?"left":"right"}function y(v){return v*s}return{scroll:r,cross:t,startEdge:a,endEdge:c,measureSize:p,direction:y}}function _e(e=0,n=0){const o=W(e-n);function l(p){return p<e}function r(p){return p>n}function t(p){return l(p)||r(p)}function s(p){return t(p)?l(p)?e:n:p}function a(p){return o?p-o*Math.ceil((p-n)/o):p}return{length:o,max:n,min:e,constrain:s,reachedAny:t,reachedMax:r,reachedMin:l,removeOffset:a}}function Eo(e,n,o){const{constrain:l}=_e(0,e),r=e+1;let t=s(n);function s(y){return o?W((r+y)%r):l(y)}function a(){return t}function c(y){return t=s(y),g}function p(y){return d().set(a()+y)}function d(){return Eo(e,a(),o)}const g={get:a,set:c,add:p,clone:d};return g}function Zo(e,n,o,l,r,t,s,a,c,p,d,g,y,I,v,u,h,f,x){const{cross:S,direction:R}=e,N=["INPUT","SELECT","TEXTAREA"],z={passive:!1},w=Me(),B=Me(),M=_e(50,225).constrain(I.measure(20)),O={mouse:300,touch:400},H={mouse:500,touch:600},G=v?43:25;let Y=!1,k=0,V=0,b=!1,Q=!1,ne=!1,Z=!1;function re(m){if(!x)return;function C(D){(Ye(x)||x(m,D))&&T(D)}const _=n;w.add(_,"dragstart",D=>D.preventDefault(),z).add(_,"touchmove",()=>{},z).add(_,"touchend",()=>{}).add(_,"touchstart",C).add(_,"mousedown",C).add(_,"touchcancel",P).add(_,"contextmenu",P).add(_,"click",F,!0)}function U(){w.clear(),B.clear()}function se(){const m=Z?o:n;B.add(m,"touchmove",L,z).add(m,"touchend",P).add(m,"mousemove",L,z).add(m,"mouseup",P)}function ie(m){const C=m.nodeName||"";return N.includes(C)}function ce(){return(v?H:O)[Z?"mouse":"touch"]}function $e(m,C){const _=g.add(ao(m)*-1),D=d.byDistance(m,!v).distance;return v||W(m)<M?D:h&&C?D*.5:d.byIndex(_.get(),0).distance}function T(m){const C=no(m,l);Z=C,ne=v&&C&&!m.buttons&&Y,Y=ke(r.get(),s.get())>=2,!(C&&m.button!==0)&&(ie(m.target)||(b=!0,t.pointerDown(m),p.useFriction(0).useDuration(0),r.set(s),se(),k=t.readPoint(m),V=t.readPoint(m,S),y.emit("pointerDown")))}function L(m){if(!no(m,l)&&m.touches.length>=2)return P(m);const _=t.readPoint(m),D=t.readPoint(m,S),ee=ke(_,k),K=ke(D,V);if(!Q&&!Z&&(!m.cancelable||(Q=ee>K,!Q)))return P(m);const J=t.pointerMove(m);ee>u&&(ne=!0),p.useFriction(.3).useDuration(.75),a.start(),r.add(R(J)),m.preventDefault()}function P(m){const _=d.byDistance(0,!1).index!==g.get(),D=t.pointerUp(m)*ce(),ee=$e(R(D),_),K=Jo(D,ee),J=G-10*K,ge=f+K/50;Q=!1,b=!1,B.clear(),p.useDuration(J).useFriction(ge),c.distance(ee,!v),Z=!1,y.emit("pointerUp")}function F(m){ne&&(m.stopPropagation(),m.preventDefault(),ne=!1)}function E(){return b}return{init:re,destroy:U,pointerDown:E}}function en(e,n){let l,r;function t(g){return g.timeStamp}function s(g,y){const v=`client${(y||e.scroll)==="x"?"X":"Y"}`;return(no(g,n)?g:g.touches[0])[v]}function a(g){return l=g,r=g,s(g)}function c(g){const y=s(g)-s(r),I=t(g)-t(l)>170;return r=g,I&&(l=g),y}function p(g){if(!l||!r)return 0;const y=s(r)-s(l),I=t(g)-t(l),v=t(g)-t(r)>170,u=y/I;return I&&!v&&W(u)>.1?u:0}return{pointerDown:a,pointerMove:c,pointerUp:p,readPoint:s}}function on(){function e(o){const{offsetTop:l,offsetLeft:r,offsetWidth:t,offsetHeight:s}=o;return{top:l,right:r+t,bottom:l+s,left:r,width:t,height:s}}return{measure:e}}function nn(e){function n(l){return e*(l/100)}return{measure:n}}function tn(e,n,o,l,r,t,s){const a=[e].concat(l);let c,p,d=[],g=!1;function y(h){return r.measureSize(s.measure(h))}function I(h){if(!t)return;p=y(e),d=l.map(y);function f(x){for(const S of x){if(g)return;const R=S.target===e,N=l.indexOf(S.target),z=R?p:d[N],w=y(R?e:l[N]);if(W(w-z)>=.5){h.reInit(),n.emit("resize");break}}}c=new ResizeObserver(x=>{(Ye(t)||t(h,x))&&f(x)}),o.requestAnimationFrame(()=>{a.forEach(x=>c.observe(x))})}function v(){g=!0,c&&c.disconnect()}return{init:I,destroy:v}}function ln(e,n,o,l,r,t){let s=0,a=0,c=r,p=t,d=e.get(),g=0;function y(){const z=l.get()-e.get(),w=!c;let B=0;return w?(s=0,o.set(l),e.set(l),B=z):(o.set(e),s+=z/c,s*=p,d+=s,e.add(s),B=d-g),a=ao(B),g=d,N}function I(){const z=l.get()-n.get();return W(z)<.001}function v(){return c}function u(){return a}function h(){return s}function f(){return S(r)}function x(){return R(t)}function S(z){return c=z,N}function R(z){return p=z,N}const N={direction:u,duration:v,velocity:h,seek:y,settled:I,useBaseFriction:x,useBaseDuration:f,useFriction:R,useDuration:S};return N}function an(e,n,o,l,r){const t=r.measure(10),s=r.measure(50),a=_e(.1,.99);let c=!1;function p(){return!(c||!e.reachedAny(o.get())||!e.reachedAny(n.get()))}function d(I){if(!p())return;const v=e.reachedMin(n.get())?"min":"max",u=W(e[v]-n.get()),h=o.get()-n.get(),f=a.constrain(u/s);o.subtract(h*f),!I&&W(h)<t&&(o.set(e.constrain(o.get())),l.useDuration(25).useBaseFriction())}function g(I){c=!I}return{shouldConstrain:p,constrain:d,toggleActive:g}}function rn(e,n,o,l,r){const t=_e(-n+e,0),s=g(),a=d(),c=y();function p(v,u){return ke(v,u)<=1}function d(){const v=s[0],u=ve(s),h=s.lastIndexOf(v),f=s.indexOf(u)+1;return _e(h,f)}function g(){return o.map((v,u)=>{const{min:h,max:f}=t,x=t.constrain(v),S=!u,R=ro(o,u);return S?f:R||p(h,x)?h:p(f,x)?f:x}).map(v=>parseFloat(v.toFixed(3)))}function y(){if(n<=e+r)return[t.max];if(l==="keepSnaps")return s;const{min:v,max:u}=a;return s.slice(v,u)}return{snapsContained:c,scrollContainLimit:a}}function sn(e,n,o){const l=n[0],r=o?l-e:ve(n);return{limit:_e(r,l)}}function cn(e,n,o,l){const t=n.min+.1,s=n.max+.1,{reachedMin:a,reachedMax:c}=_e(t,s);function p(y){return y===1?c(o.get()):y===-1?a(o.get()):!1}function d(y){if(!p(y))return;const I=e*(y*-1);l.forEach(v=>v.add(I))}return{loop:d}}function dn(e){const{max:n,length:o}=e;function l(t){const s=t-n;return o?s/-o:0}return{get:l}}function pn(e,n,o,l,r){const{startEdge:t,endEdge:s}=e,{groupSlides:a}=r,c=g().map(n.measure),p=y(),d=I();function g(){return a(l).map(u=>ve(u)[s]-u[0][t]).map(W)}function y(){return l.map(u=>o[t]-u[t]).map(u=>-W(u))}function I(){return a(p).map(u=>u[0]).map((u,h)=>u+c[h])}return{snaps:p,snapsAligned:d}}function fn(e,n,o,l,r,t){const{groupSlides:s}=r,{min:a,max:c}=l,p=d();function d(){const y=s(t),I=!e||n==="keepSnaps";return o.length===1?[t]:I?y:y.slice(a,c).map((v,u,h)=>{const f=!u,x=ro(h,u);if(f){const S=ve(h[0])+1;return yo(S)}if(x){const S=He(t)-ve(h)[0]+1;return yo(S,ve(h)[0])}return v})}return{slideRegistry:p}}function un(e,n,o,l,r){const{reachedAny:t,removeOffset:s,constrain:a}=l;function c(v){return v.concat().sort((u,h)=>W(u)-W(h))[0]}function p(v){const u=e?s(v):a(v),h=n.map((x,S)=>({diff:d(x-u,0),index:S})).sort((x,S)=>W(x.diff)-W(S.diff)),{index:f}=h[0];return{index:f,distance:u}}function d(v,u){const h=[v,v+o,v-o];if(!e)return v;if(!u)return c(h);const f=h.filter(x=>ao(x)===u);return f.length?c(f):ve(h)-o}function g(v,u){const h=n[v]-r.get(),f=d(h,u);return{index:v,distance:f}}function y(v,u){const h=r.get()+v,{index:f,distance:x}=p(h),S=!e&&t(h);if(!u||S)return{index:f,distance:v};const R=n[f]-x,N=v+d(R,0);return{index:f,distance:N}}return{byDistance:y,byIndex:g,shortcut:d}}function mn(e,n,o,l,r,t,s){function a(g){const y=g.distance,I=g.index!==n.get();t.add(y),y&&(l.duration()?e.start():(e.update(),e.render(1),e.update())),I&&(o.set(n.get()),n.set(g.index),s.emit("select"))}function c(g,y){const I=r.byDistance(g,y);a(I)}function p(g,y){const I=n.clone().set(g),v=r.byIndex(I.get(),y);a(v)}return{distance:c,index:p}}function gn(e,n,o,l,r,t,s,a){const c={passive:!0,capture:!0};let p=0;function d(I){if(!a)return;function v(u){if(new Date().getTime()-p>10)return;s.emit("slideFocusStart"),e.scrollLeft=0;const x=o.findIndex(S=>S.includes(u));lo(x)&&(r.useDuration(0),l.index(x,0),s.emit("slideFocus"))}t.add(document,"keydown",g,!1),n.forEach((u,h)=>{t.add(u,"focus",f=>{(Ye(a)||a(I,f))&&v(h)},c)})}function g(I){I.code==="Tab"&&(p=new Date().getTime())}return{init:d}}function Be(e){let n=e;function o(){return n}function l(c){n=s(c)}function r(c){n+=s(c)}function t(c){n-=s(c)}function s(c){return lo(c)?c:c.get()}return{get:o,set:l,add:r,subtract:t}}function _o(e,n){const o=e.scroll==="x"?s:a,l=n.style;let r=null,t=!1;function s(y){return`translate3d(${y}px,0px,0px)`}function a(y){return`translate3d(0px,${y}px,0px)`}function c(y){if(t)return;const I=Xo(e.direction(y));I!==r&&(l.transform=o(I),r=I)}function p(y){t=!y}function d(){t||(l.transform="",n.getAttribute("style")||n.removeAttribute("style"))}return{clear:d,to:c,toggleActive:p}}function vn(e,n,o,l,r,t,s,a,c){const d=Fe(r),g=Fe(r).reverse(),y=f().concat(x());function I(w,B){return w.reduce((M,O)=>M-r[O],B)}function v(w,B){return w.reduce((M,O)=>I(M,B)>0?M.concat([O]):M,[])}function u(w){return t.map((B,M)=>({start:B-l[M]+.5+w,end:B+n-.5+w}))}function h(w,B,M){const O=u(B);return w.map(H=>{const G=M?0:-o,Y=M?o:0,k=M?"end":"start",V=O[H][k];return{index:H,loopPoint:V,slideLocation:Be(-1),translate:_o(e,c[H]),target:()=>a.get()>V?G:Y}})}function f(){const w=s[0],B=v(g,w);return h(B,o,!1)}function x(){const w=n-s[0]-1,B=v(d,w);return h(B,-o,!0)}function S(){return y.every(({index:w})=>{const B=d.filter(M=>M!==w);return I(B,n)<=.1})}function R(){y.forEach(w=>{const{target:B,translate:M,slideLocation:O}=w,H=B();H!==O.get()&&(M.to(H),O.set(H))})}function N(){y.forEach(w=>w.translate.clear())}return{canLoop:S,clear:N,loop:R,loopPoints:y}}function hn(e,n,o){let l,r=!1;function t(c){if(!o)return;function p(d){for(const g of d)if(g.type==="childList"){c.reInit(),n.emit("slidesChanged");break}}l=new MutationObserver(d=>{r||(Ye(o)||o(c,d))&&p(d)}),l.observe(e,{childList:!0})}function s(){l&&l.disconnect(),r=!0}return{init:t,destroy:s}}function yn(e,n,o,l){const r={};let t=null,s=null,a,c=!1;function p(){a=new IntersectionObserver(v=>{c||(v.forEach(u=>{const h=n.indexOf(u.target);r[h]=u}),t=null,s=null,o.emit("slidesInView"))},{root:e.parentElement,threshold:l}),n.forEach(v=>a.observe(v))}function d(){a&&a.disconnect(),c=!0}function g(v){return ze(r).reduce((u,h)=>{const f=parseInt(h),{isIntersecting:x}=r[f];return(v&&x||!v&&!x)&&u.push(f),u},[])}function y(v=!0){if(v&&t)return t;if(!v&&s)return s;const u=g(v);return v&&(t=u),v||(s=u),u}return{init:p,destroy:d,get:y}}function xn(e,n,o,l,r,t){const{measureSize:s,startEdge:a,endEdge:c}=e,p=o[0]&&r,d=v(),g=u(),y=o.map(s),I=h();function v(){if(!p)return 0;const x=o[0];return W(n[a]-x[a])}function u(){if(!p)return 0;const x=t.getComputedStyle(ve(l));return parseFloat(x.getPropertyValue(`margin-${c}`))}function h(){return o.map((x,S,R)=>{const N=!S,z=ro(R,S);return N?y[S]+d:z?y[S]+g:R[S+1][a]-x[a]}).map(W)}return{slideSizes:y,slideSizesWithGaps:I,startGap:d,endGap:g}}function Sn(e,n,o,l,r,t,s,a,c){const{startEdge:p,endEdge:d,direction:g}=e,y=lo(o);function I(f,x){return Fe(f).filter(S=>S%x===0).map(S=>f.slice(S,S+x))}function v(f){return f.length?Fe(f).reduce((x,S,R)=>{const N=ve(x)||0,z=N===0,w=S===He(f),B=r[p]-t[N][p],M=r[p]-t[S][d],O=!l&&z?g(s):0,H=!l&&w?g(a):0,G=W(M-H-(B+O));return R&&G>n+c&&x.push(S),w&&x.push(f.length),x},[]).map((x,S,R)=>{const N=Math.max(R[S-1]||0);return f.slice(N,x)}):[]}function u(f){return y?I(f,o):v(f)}return{groupSlides:u}}function In(e,n,o,l,r,t,s){const{align:a,axis:c,direction:p,startIndex:d,loop:g,duration:y,dragFree:I,dragThreshold:v,inViewThreshold:u,slidesToScroll:h,skipSnaps:f,containScroll:x,watchResize:S,watchSlides:R,watchDrag:N,watchFocus:z}=t,w=2,B=on(),M=B.measure(n),O=o.map(B.measure),H=Yo(c,p),G=H.measureSize(M),Y=nn(G),k=Ko(a,G),V=!g&&!!x,b=g||!!x,{slideSizes:Q,slideSizesWithGaps:ne,startGap:Z,endGap:re}=xn(H,M,O,o,b,r),U=Sn(H,G,h,g,M,O,Z,re,w),{snaps:se,snapsAligned:ie}=pn(H,k,M,O,U),ce=-ve(se)+ve(ne),{snapsContained:$e,scrollContainLimit:T}=rn(G,ce,ie,x,w),L=V?$e:ie,{limit:P}=sn(ce,L,g),F=Eo(He(L),d,g),E=F.clone(),$=Fe(o),m=({dragHandler:le,scrollBody:he,scrollBounds:we,options:{loop:Ie}})=>{Ie||we.constrain(le.pointerDown()),he.seek()},C=({scrollBody:le,translate:he,location:we,offsetLocation:Ie,previousLocation:Le,scrollLooper:be,slideLooper:De,dragHandler:Oe,animation:Ae,eventHandler:We,scrollBounds:wo,options:{loop:io}},co)=>{const po=le.settled(),Po=!wo.shouldConstrain(),fo=io?po:po&&Po,uo=fo&&!Oe.pointerDown();uo&&Ae.stop();const Bo=we.get()*co+Le.get()*(1-co);Ie.set(Bo),io&&(be.loop(le.direction()),De.loop()),he.to(Ie.get()),uo&&We.emit("settle"),fo||We.emit("scroll")},_=Qo(l,r,()=>m(q),le=>C(q,le)),D=.68,ee=L[F.get()],K=Be(ee),J=Be(ee),ge=Be(ee),de=Be(ee),te=ln(K,ge,J,de,y,D),Re=un(g,L,ce,P,de),Ne=mn(_,F,E,te,Re,de,s),xe=dn(P),Se=Me(),Ze=yn(n,o,s,u),{slideRegistry:Te}=fn(V,x,L,T,U,$),X=gn(e,o,Te,Ne,te,Se,s,z),q={ownerDocument:l,ownerWindow:r,eventHandler:s,containerRect:M,slideRects:O,animation:_,axis:H,dragHandler:Zo(H,e,l,r,de,en(H,r),K,_,Ne,te,Re,F,s,Y,I,v,f,D,N),eventStore:Se,percentOfView:Y,index:F,indexPrevious:E,limit:P,location:K,offsetLocation:ge,previousLocation:J,options:t,resizeHandler:tn(n,s,r,o,H,S,B),scrollBody:te,scrollBounds:an(P,ge,de,te,Y),scrollLooper:cn(ce,P,ge,[K,ge,J,de]),scrollProgress:xe,scrollSnapList:L.map(xe.get),scrollSnaps:L,scrollTarget:Re,scrollTo:Ne,slideLooper:vn(H,G,ce,Q,ne,se,L,ge,o),slideFocus:X,slidesHandler:hn(n,s,R),slidesInView:Ze,slideIndexes:$,slideRegistry:Te,slidesToScroll:U,target:de,translate:_o(H,n)};return q}function Cn(){let e={},n;function o(p){n=p}function l(p){return e[p]||[]}function r(p){return l(p).forEach(d=>d(n,p)),c}function t(p,d){return e[p]=l(p).concat([d]),c}function s(p,d){return e[p]=l(p).filter(g=>g!==d),c}function a(){e={}}const c={init:o,emit:r,off:s,on:t,clear:a};return c}const $n={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function Rn(e){function n(t,s){return To(t,s||{})}function o(t){const s=t.breakpoints||{},a=ze(s).filter(c=>e.matchMedia(c).matches).map(c=>s[c]).reduce((c,p)=>n(c,p),{});return n(t,a)}function l(t){return t.map(s=>ze(s.breakpoints||{})).reduce((s,a)=>s.concat(a),[]).map(e.matchMedia)}return{mergeOptions:n,optionsAtMedia:o,optionsMediaQueries:l}}function Nn(e){let n=[];function o(t,s){return n=s.filter(({options:a})=>e.optionsAtMedia(a).active!==!1),n.forEach(a=>a.init(t,e)),s.reduce((a,c)=>Object.assign(a,{[c.name]:c}),{})}function l(){n=n.filter(t=>t.destroy())}return{init:o,destroy:l}}function Ke(e,n,o){const l=e.ownerDocument,r=l.defaultView,t=Rn(r),s=Nn(t),a=Me(),c=Cn(),{mergeOptions:p,optionsAtMedia:d,optionsMediaQueries:g}=t,{on:y,off:I,emit:v}=c,u=H;let h=!1,f,x=p($n,Ke.globalOptions),S=p(x),R=[],N,z,w;function B(){const{container:$,slides:m}=S;z=(oo($)?e.querySelector($):$)||e.children[0];const _=oo(m)?z.querySelectorAll(m):m;w=[].slice.call(_||z.children)}function M($){const m=In(e,z,w,l,r,$,c);if($.loop&&!m.slideLooper.canLoop()){const C=Object.assign({},$,{loop:!1});return M(C)}return m}function O($,m){h||(x=p(x,$),S=d(x),R=m||R,B(),f=M(S),g([x,...R.map(({options:C})=>C)]).forEach(C=>a.add(C,"change",H)),S.active&&(f.translate.to(f.location.get()),f.animation.init(),f.slidesInView.init(),f.slideFocus.init(E),f.eventHandler.init(E),f.resizeHandler.init(E),f.slidesHandler.init(E),f.options.loop&&f.slideLooper.loop(),z.offsetParent&&w.length&&f.dragHandler.init(E),N=s.init(E,R)))}function H($,m){const C=U();G(),O(p({startIndex:C},$),m),c.emit("reInit")}function G(){f.dragHandler.destroy(),f.eventStore.clear(),f.translate.clear(),f.slideLooper.clear(),f.resizeHandler.destroy(),f.slidesHandler.destroy(),f.slidesInView.destroy(),f.animation.destroy(),s.destroy(),a.clear()}function Y(){h||(h=!0,a.clear(),G(),c.emit("destroy"),c.clear())}function k($,m,C){!S.active||h||(f.scrollBody.useBaseFriction().useDuration(m===!0?0:S.duration),f.scrollTo.index($,C||0))}function V($){const m=f.index.add(1).get();k(m,$,-1)}function b($){const m=f.index.add(-1).get();k(m,$,1)}function Q(){return f.index.add(1).get()!==U()}function ne(){return f.index.add(-1).get()!==U()}function Z(){return f.scrollSnapList}function re(){return f.scrollProgress.get(f.offsetLocation.get())}function U(){return f.index.get()}function se(){return f.indexPrevious.get()}function ie(){return f.slidesInView.get()}function ce(){return f.slidesInView.get(!1)}function $e(){return N}function T(){return f}function L(){return e}function P(){return z}function F(){return w}const E={canScrollNext:Q,canScrollPrev:ne,containerNode:P,internalEngine:T,destroy:Y,off:I,on:y,emit:v,plugins:$e,previousScrollSnap:se,reInit:u,rootNode:L,scrollNext:V,scrollPrev:b,scrollProgress:re,scrollSnapList:Z,scrollTo:k,selectedScrollSnap:U,slideNodes:F,slidesInView:ie,slidesNotInView:ce};return O(n,o),setTimeout(()=>c.emit("init"),0),E}Ke.globalOptions=void 0;function so(e={},n=[]){const o=ue(e),l=ue(n),[r,t]=ae(),[s,a]=ae(),c=ye(()=>{r&&r.reInit(o.current,l.current)},[r]);return oe(()=>{to(o.current,e)||(o.current=e,c())},[e,c]),oe(()=>{qo(l.current,n)||(l.current=n,c())},[n,c]),oe(()=>{if(Uo()&&s){Ke.globalOptions=so.globalOptions;const p=Ke(s,o.current,l.current);return t(p),()=>p.destroy()}else t(void 0)},[s,t]),[a,r]}so.globalOptions=void 0;const Tn={active:!0,breakpoints:{},delay:4e3,jump:!1,playOnInit:!0,stopOnFocusIn:!0,stopOnInteraction:!0,stopOnMouseEnter:!1,stopOnLastSnap:!1,rootNode:null};function En(e,n){const o=e.scrollSnapList();return typeof n=="number"?o.map(()=>n):n(o,e)}function _n(e,n){const o=e.rootNode();return n&&n(o)||o}function Qe(e={}){let n,o,l,r,t=null,s=0,a=!1,c=!1,p=!1,d=!1;function g(k,V){o=k;const{mergeOptions:b,optionsAtMedia:Q}=V,ne=b(Tn,Qe.globalOptions),Z=b(ne,e);if(n=Q(Z),o.scrollSnapList().length<=1)return;d=n.jump,l=!1,r=En(o,n.delay);const{eventStore:re,ownerDocument:U}=o.internalEngine(),se=!!o.internalEngine().options.watchDrag,ie=_n(o,n.rootNode);re.add(U,"visibilitychange",f),se&&o.on("pointerDown",S),se&&!n.stopOnInteraction&&o.on("pointerUp",R),n.stopOnMouseEnter&&re.add(ie,"mouseenter",N),n.stopOnMouseEnter&&!n.stopOnInteraction&&re.add(ie,"mouseleave",z),n.stopOnFocusIn&&o.on("slideFocusStart",h),n.stopOnFocusIn&&!n.stopOnInteraction&&re.add(o.containerNode(),"focusout",u),n.playOnInit&&u()}function y(){o.off("pointerDown",S).off("pointerUp",R).off("slideFocusStart",h),h(),l=!0,a=!1}function I(){const{ownerWindow:k}=o.internalEngine();k.clearTimeout(s),s=k.setTimeout(H,r[o.selectedScrollSnap()]),t=new Date().getTime(),o.emit("autoplay:timerset")}function v(){const{ownerWindow:k}=o.internalEngine();k.clearTimeout(s),s=0,t=null,o.emit("autoplay:timerstopped")}function u(){if(!l){if(x()){p=!0;return}a||o.emit("autoplay:play"),I(),a=!0}}function h(){l||(a&&o.emit("autoplay:stop"),v(),a=!1)}function f(){if(x())return p=a,h();p&&u()}function x(){const{ownerDocument:k}=o.internalEngine();return k.visibilityState==="hidden"}function S(){c||h()}function R(){c||u()}function N(){c=!0,h()}function z(){c=!1,u()}function w(k){typeof k<"u"&&(d=k),u()}function B(){a&&h()}function M(){a&&u()}function O(){return a}function H(){const{index:k}=o.internalEngine(),V=k.clone().add(1).get(),b=o.scrollSnapList().length-1,Q=n.stopOnLastSnap&&V===b;if(o.canScrollNext()?o.scrollNext(d):o.scrollTo(0,d),o.emit("autoplay:select"),Q)return h();u()}function G(){if(!t)return null;const k=r[o.selectedScrollSnap()],V=new Date().getTime()-t;return k-V}return{name:"autoplay",options:e,init:g,destroy:y,play:w,stop:B,reset:M,isPlaying:O,timeUntilNext:G}}Qe.globalOptions=void 0;const pe={loadMore:'<svg fill="none" viewBox="0 0 25 24" xmlns="http://www.w3.org/2000/svg"><path d="M21.6009 10.4593C22.001 10.3521 22.2384 9.94088 22.1312 9.54078C21.59 7.52089 20.3974 5.73603 18.7384 4.46302C17.0793 3.19001 15.0466 2.5 12.9555 2.5C10.8644 2.5 8.83164 3.19001 7.17262 4.46302C6.12405 5.26762 5.26179 6.2767 4.63257 7.42036L2.86504 6.92617C2.76093 6.89707 2.65423 6.89133 2.55153 6.9068C2.46222 6.91962 2.37374 6.94889 2.29039 6.99582C1.92945 7.19903 1.80158 7.65636 2.00479 8.0173L3.73942 11.0983C3.83701 11.2717 3.99946 11.3991 4.19104 11.4527C4.30333 11.4841 4.42023 11.4886 4.53266 11.4673C4.61373 11.4524 4.69254 11.4242 4.7657 11.383L7.84641 9.64831C8.11073 9.49948 8.25936 9.20608 8.22302 8.90493C8.18668 8.60378 7.9725 8.35417 7.68037 8.27249L6.1241 7.83737C6.6343 6.99996 7.29751 6.2579 8.08577 5.65305C9.48282 4.58106 11.1946 4 12.9555 4C14.7164 4 16.4282 4.58106 17.8252 5.65305C19.2223 6.72504 20.2266 8.22807 20.6823 9.92901C20.7895 10.3291 21.2008 10.5665 21.6009 10.4593Z" fill="currentColor"/><path d="M4.30739 13.5387C3.90729 13.6459 3.66985 14.0572 3.77706 14.4573C4.31829 16.4771 5.51089 18.262 7.16991 19.535C8.82892 20.808 10.8616 21.498 12.9528 21.498C15.0439 21.498 17.0766 20.808 18.7356 19.535C19.7859 18.7291 20.6493 17.7181 21.2787 16.5722L23.0083 17.0557C23.1218 17.0961 23.2447 17.1091 23.3661 17.0917C23.5554 17.0658 23.7319 16.968 23.8546 16.8116C24.0419 16.573 24.0669 16.245 23.9181 15.9807L22.1835 12.8996C22.0859 12.7263 21.9234 12.5988 21.7319 12.5453C21.64 12.5196 21.5451 12.5119 21.4521 12.5216C21.3493 12.5317 21.2488 12.5629 21.1571 12.6146L18.0764 14.3493C17.7155 14.5525 17.5876 15.0099 17.7909 15.3708C17.9016 15.5675 18.0879 15.695 18.2929 15.7373L19.7875 16.1552C19.2768 16.9949 18.6125 17.7388 17.8225 18.345C16.4255 19.417 14.7137 19.998 12.9528 19.998C11.1918 19.998 9.4801 19.417 8.08305 18.345C6.686 17.273 5.68171 15.77 5.22595 14.069C5.11874 13.6689 4.70749 13.4315 4.30739 13.5387Z" fill="currentColor"/></svg>',noResults:'<svg viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.25 2.75C6.14154 2.75 2 6.89029 2 11.998C2 17.1056 6.14154 21.2459 11.25 21.2459C13.5335 21.2459 15.6238 20.4187 17.2373 19.0475L20.7182 22.5287C21.011 22.8216 21.4859 22.8217 21.7788 22.5288C22.0717 22.2359 22.0718 21.761 21.7789 21.4681L18.2983 17.9872C19.6714 16.3736 20.5 14.2826 20.5 11.998C20.5 6.89029 16.3585 2.75 11.25 2.75ZM3.5 11.998C3.5 7.71905 6.96962 4.25 11.25 4.25C15.5304 4.25 19 7.71905 19 11.998C19 16.2769 15.5304 19.7459 11.25 19.7459C6.96962 19.7459 3.5 16.2769 3.5 11.998Z" fill="currentColor"/></svg>',leftArrow:'<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 12H5m0 0l7 7m-7-7l7-7" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/></svg>',rightArrow:'<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M5 12h14m0 0l-7-7m7 7l-7 7" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/></svg>',leftChevron:'<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M15 19l-7-7 7-7" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/></svg>',rightChevron:'<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9 5l7 7-7 7" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/></svg>'};function xo(e){let n=document.getElementById("vx-assets-cache");n||(n=document.createElement("div"),n.id="vx-assets-cache",n.style.display="none",document.body.appendChild(n));const o=[];return e.querySelectorAll('link[rel="stylesheet"]').forEach(l=>{if(l.id&&!document.querySelector(`#vx-assets-cache #${CSS.escape(l.id)}`)){const t=l.cloneNode(!0);n.appendChild(t),o.push(new Promise(s=>{t.onload=()=>s(),t.onerror=()=>s()}))}}),Promise.all(o).then(()=>{})}function wn(e){let n=document.getElementById("vx-assets-cache");n||(n=document.createElement("div"),n.id="vx-assets-cache",n.style.display="none",document.body.appendChild(n)),e.querySelectorAll('script[type="text/javascript"]').forEach(o=>{o.id&&(document.querySelectorAll(`script[id="${CSS.escape(o.id)}"]`).length>=2?o.remove():n.appendChild(o))})}function fe(e,n){return!e||!e.value?n:e.library==="svg"?e.value:`<i class="${e.value}"></i>`}function Pn(e){if(!e||!e.trim())return[];const o=new DOMParser().parseFromString(`<div class="parse-wrapper">${e}</div>`,"text/html"),l=o.querySelectorAll(".ts-preview");if(l.length>0)return Array.from(l).map(t=>({html:t.innerHTML,postId:t.getAttribute("data-post-id")}));const r=o.querySelector(".parse-wrapper");if(r){const t=new Set(["div","article","section","li"]),s=Array.from(r.children).filter(a=>{const c=a.tagName.toLowerCase();return t.has(c)});if(s.length>0)return s.map(a=>({html:a.outerHTML,postId:a.getAttribute("data-post-id")}))}return[]}function Bn(e,n){const o=[],l=`[data-block-id="${n}"]`,r=[],t=[];if(e.layoutMode==="grid"&&(e.columns&&o.push(`${l} .post-feed-grid { grid-template-columns: repeat(${e.columns}, minmax(0, 1fr)); }`),e.columns_tablet&&r.push(`${l} .post-feed-grid { grid-template-columns: repeat(${e.columns_tablet}, minmax(0, 1fr)); }`),e.columns_mobile&&t.push(`${l} .post-feed-grid { grid-template-columns: repeat(${e.columns_mobile}, minmax(0, 1fr)); }`)),e.itemGap!==void 0&&o.push(`${l} .post-feed-grid { gap: ${e.itemGap}px; }`),e.itemGap_tablet!==void 0&&r.push(`${l} .post-feed-grid { gap: ${e.itemGap_tablet}px; }`),e.itemGap_mobile!==void 0&&t.push(`${l} .post-feed-grid { gap: ${e.itemGap_mobile}px; }`),e.layoutMode==="carousel"){const a=e.carouselItemWidthUnit||"px",c=e.carouselItemWidth||300;o.push(`${l} .post-feed-grid > div, ${l} .post-feed-grid > .ts-preview { width: ${c}${a}; min-width: ${c}${a}; flex: 0 0 ${c}${a}; scroll-snap-align: start; }`),e.carouselItemWidth_tablet&&r.push(`${l} .post-feed-grid > div, ${l} .post-feed-grid > .ts-preview { width: ${e.carouselItemWidth_tablet}${a}; min-width: ${e.carouselItemWidth_tablet}${a}; flex: 0 0 ${e.carouselItemWidth_tablet}${a}; }`),e.carouselItemWidth_mobile&&t.push(`${l} .post-feed-grid > div, ${l} .post-feed-grid > .ts-preview { width: ${e.carouselItemWidth_mobile}${a}; min-width: ${e.carouselItemWidth_mobile}${a}; flex: 0 0 ${e.carouselItemWidth_mobile}${a}; }`),e.scrollPadding&&o.push(`${l} .post-feed-grid { padding: 0 ${e.scrollPadding}px; scroll-padding: ${e.scrollPadding}px; }`),e.scrollPadding_tablet&&r.push(`${l} .post-feed-grid { padding: 0 ${e.scrollPadding_tablet}px; scroll-padding: ${e.scrollPadding_tablet}px; }`),e.scrollPadding_mobile&&t.push(`${l} .post-feed-grid { padding: 0 ${e.scrollPadding_mobile}px; scroll-padding: ${e.scrollPadding_mobile}px; }`),e.itemPadding&&o.push(`${l} .post-feed-grid > .ts-preview { padding: ${e.itemPadding}px; }`),e.itemPadding_tablet&&r.push(`${l} .post-feed-grid > .ts-preview { padding: ${e.itemPadding_tablet}px; }`),e.itemPadding_mobile&&t.push(`${l} .post-feed-grid > .ts-preview { padding: ${e.itemPadding_mobile}px; }`)}let s=o.join(`
`);return r.length>0&&(s+=`
@media (max-width: 1024px) {
${r.join(`
`)}
}`),t.length>0&&(s+=`
@media (max-width: 767px) {
${t.join(`
`)}
}`),s}function kn({attributes:e,config:n,context:o,editorFilters:l,containerElement:r}){const t=ue(null),s=ue(null),a=ue(!1),c=ue(!1),p=ue(0),[d,g]=ae({loading:!0,page:1,results:"",totalCount:0,displayCount:"0",hasPrev:!1,hasNext:!1,hasResults:!1}),[y,I]=ae({}),[v,u]=ae(e.postType||"");oe(()=>{o==="editor"&&e.postType&&e.postType!==v&&u(e.postType)},[o,e.postType,v]);const h=ue(void 0);oe(()=>{if(o!=="editor"||!l)return;const T=h.current;JSON.stringify(T)!==JSON.stringify(l)&&(h.current=l,I(l),e.postType&&(async()=>{const F=new URLSearchParams({type:e.postType,pg:"1",limit:String(e.postsPerPage)});e.displayDetails&&F.set("__get_total_count","yes"),l&&typeof l=="object"&&Object.entries(l).forEach(([m,C])=>{m!=="postType"&&C!=null&&C!==""&&F.set(m,String(C))});let E=window.Voxel_Config?.home_url;if(!E){const m=window.wpApiSettings?.root;if(m)E=m.replace(/\/wp-json\/?$/,"");else{const C=window.location.pathname,_=C.indexOf("/wp-admin"),D=_>0?C.substring(0,_):"";E=window.location.origin+D}}F.set("action","search_posts");const $=`${E}/?vx=1&${F.toString()}`;try{g(Se=>({...Se,loading:!0}));const m={Accept:"text/html"},C=window.wpApiSettings?.nonce;C&&(m["X-WP-Nonce"]=C);const _=await fetch($,{method:"GET",credentials:"same-origin",headers:m});if(!_.ok)throw new Error(`HTTP error: ${_.status}`);const D=await _.text(),K=new DOMParser().parseFromString(`<div>${D}</div>`,"text/html"),J=K.querySelector("script.info"),ge=J?.getAttribute("data-has-prev")==="true",de=J?.getAttribute("data-has-next")==="true",te=J?.getAttribute("data-has-results")==="true",Re=parseInt(J?.getAttribute("data-total-count")||"0",10),Ne=J?.getAttribute("data-display-count")||"0";await xo(K);let xe=D.replace(/<script class="info"[^>]*><\/script>/g,"");xe=xe.replace(/<link[^>]*rel="stylesheet"[^>]*>/g,""),g(Se=>({...Se,loading:!1,page:1,results:xe,totalCount:Re,displayCount:Ne,hasPrev:ge,hasNext:de,hasResults:te}))}catch(m){console.error("[PostFeedComponent] Editor filter sync fetch failed:",m),g(C=>({...C,loading:!1,hasResults:!1}))}})())},[o,l,e.postType,e.postsPerPage,e.displayDetails]);const f=d.loading?`vx-${e.loadingStyle}`:"",x=`post-feed-grid ts-feed-grid-default ${f} vx-opacity ${e.source==="search-form"?"sf-post-feed vx-event-scroll":""}`.trim(),S=Bn(e,e.blockId),R=Ro(e,e.blockId),N=ye(async(T=1,L=!1,P,F)=>{console.log("[PostFeed] fetchPosts called - page:",T,"overridePostType:",F,"dynamicPostType:",v,"attributes.postType:",e.postType),console.log("[PostFeed] fetchPosts caller stack:",new Error().stack),g(E=>({...E,loading:!0}));try{const E=F||v||e.postType||"";if(console.log("[PostFeed] fetchPosts using postType:",E),o==="editor"&&e.source==="search-form"&&!E){g(X=>({...X,loading:!1,hasResults:!1}));return}const $=new URLSearchParams({type:E,pg:String(T),limit:String(e.postsPerPage)});e.displayDetails&&$.set("__get_total_count","yes"),e.source==="manual"&&e.manualPostIds.length>0&&$.set("post__in",e.manualPostIds.join(",")),e.excludePosts&&$.set("exclude",e.excludePosts),e.priorityFilter&&($.set("priority_min",String(e.priorityMin||0)),$.set("priority_max",String(e.priorityMax||0))),e.offset&&e.offset>0&&$.set("offset",String(e.offset)),e.cardTemplate&&e.cardTemplate!=="main"&&$.set("template",e.cardTemplate),console.log("[PostFeed] hasMapWidgetRef.current:",c.current),c.current&&($.set("__load_markers","yes"),console.log("[PostFeed] Added __load_markers=yes to request"),p.current>0&&$.set("__load_additional_markers",String(p.current)));const m=P||{...e.filters,...y};m&&typeof m=="object"&&Object.entries(m).forEach(([X,q])=>{X!=="postType"&&q!=null&&q!==""&&$.set(X,String(q))});let C=window.Voxel_Config?.home_url;if(!C){const X=window.wpApiSettings?.root;if(X)C=X.replace(/\/wp-json\/?$/,"");else{const q=window.location.pathname,le=q.indexOf("/wp-admin"),he=le>0?q.substring(0,le):"";C=window.location.origin+he}}$.set("action","search_posts");const _=`${C}/?vx=1&${$.toString()}`,D={Accept:"text/html"},ee=window.wpApiSettings?.nonce;ee&&(D["X-WP-Nonce"]=ee);const K=await fetch(_,{method:"GET",credentials:"same-origin",headers:D});if(!K.ok)throw new Error(`HTTP error: ${K.status} ${K.statusText}`);const J=await K.text();console.log("[PostFeed] fetchPosts response length:",J.length,"first 500 chars:",J.substring(0,500));const de=new DOMParser().parseFromString(`<div>${J}</div>`,"text/html"),te=de.querySelector("script.info"),Re=te?.getAttribute("data-has-prev")==="true",Ne=te?.getAttribute("data-has-next")==="true",xe=te?.getAttribute("data-has-results")==="true",Se=parseInt(te?.getAttribute("data-total-count")||"0",10),Ze=te?.getAttribute("data-display-count")||"0";console.log("[PostFeed] fetchPosts parsed - hasResults:",xe,"totalCount:",Se,"hasPrev:",Re,"hasNext:",Ne),await xo(de);let Te=J.replace(/<script class="info"[^>]*><\/script>/g,"");if(!Te.includes("vx:post-feed.css-css")){const X=window.Voxel_Config;X?.ajax_url&&(Te=`<link rel="stylesheet" id="vx:post-feed.css-css" href="${`${X.ajax_url.replace(/\?vx=1.*$/,"")}wp-content/themes/voxel/assets/dist/post-feed.css?ver=1.7.5.2`}" type="text/css" media="all">`+Te)}requestAnimationFrame(()=>{g(X=>({...X,loading:!1,page:T,results:L?X.results+Te:Te,totalCount:Se,displayCount:Ze,hasPrev:Re,hasNext:Ne,hasResults:xe})),setTimeout(()=>{const X=r||s.current;if(X&&wn(X),window.jQuery&&window.jQuery(document).trigger("voxel:markup-update"),o==="frontend"&&e.source==="search-form"){const q=r||s.current;if(console.log("[PostFeed] MAP INTEGRATION: feedContainer:",q),q){console.log("[PostFeed] Feed HTML (first 2000 chars):",q.innerHTML.substring(0,2e3));const le=q.querySelectorAll(".post-feed-grid .ts-marker-wrapper > .map-marker");console.log("[PostFeed] Found marker elements:",le.length),console.log("[PostFeed] All .ts-marker-wrapper elements:",q.querySelectorAll(".ts-marker-wrapper").length),console.log("[PostFeed] All .map-marker elements:",q.querySelectorAll(".map-marker").length);const he=[];le.forEach(we=>{const Ie=we,Le=Ie.dataset.position,be=Ie.dataset.postId;if(!Le||!be)return;const[De,Oe]=Le.split(",").map(parseFloat);if(isNaN(De)||isNaN(Oe))return;const Ae=Ie.parentElement,We=Ae?Ae.innerHTML:Ie.outerHTML;he.push({postId:be,lat:De,lng:Oe,template:We})}),he.length>0&&(console.log("[PostFeed] Dispatching",he.length,"markers to Map block"),window.dispatchEvent(new CustomEvent("voxel-fse:post-feed-markers",{detail:{sourceBlockId:e.blockId,markers:he},bubbles:!0})))}}},0)})}catch(E){console.error("[PostFeedComponent] Failed to fetch posts:",E),E instanceof TypeError&&(console.error("[PostFeedComponent] TypeError details - likely CORS or network issue"),console.error("[PostFeedComponent] Current location:",window.location.href),console.error("[PostFeedComponent] Target URL was:",`${window.location.origin}${window.location.pathname.includes("/wp-admin")?window.location.pathname.split("/wp-admin")[0]:""}/?vx=1`)),g($=>({...$,loading:!1,hasResults:!1}))}},[e,o,y,v]);oe(()=>{if(o!=="frontend"||e.source!=="search-form")return;const T=L=>{const P=L;if(P.detail?.targetId!==e.blockId)return;const{postType:F,filters:E}=P.detail;P.detail.hasMapWidget!==void 0&&(c.current=P.detail.hasMapWidget),P.detail.mapAdditionalMarkers!==void 0&&(p.current=P.detail.mapAdditionalMarkers),I(E),F&&u(F),N(1,!1,E,F)};return window.addEventListener("voxel-search-submit",T),()=>window.removeEventListener("voxel-search-submit",T)},[o,e.source,e.blockId,N]),oe(()=>{if(!(a.current&&o==="frontend")){if(e.source!=="search-form")a.current=!0,N(1);else if(o==="editor"&&e.postType)N(1);else if(o==="frontend"&&e.source==="search-form"){const T=document.querySelector(".voxel-fse-map");console.log("[PostFeed] Looking for .voxel-fse-map element:",T),T?(c.current=!0,console.log("[PostFeed] Map element found! hasMapWidgetRef set to true")):console.log("[PostFeed] No map element found. All elements with voxel-fse class:",document.querySelectorAll('[class*="voxel-fse"]')),a.current=!0;const L=new URL(window.location.href),P=L.searchParams.get("type")||L.searchParams.get("post_type"),F={};L.searchParams.forEach(($,m)=>{if(!(m==="type"||m==="post_type"||m==="pg"||m==="page"))if(m.startsWith("filter_")){const C=m.replace("filter_","");try{F[C]=JSON.parse($)}catch{F[C]=$}}else try{F[m]=JSON.parse($)}catch{F[m]=$}});let E=P||e.postType;if(!E&&e.searchFormId){const $=[`#${e.searchFormId}`,`[data-id="${e.searchFormId}"]`,`.voxel-fse-search-form-${e.searchFormId}`];let m=null;for(const C of $)try{if(m=document.querySelector(C),m){console.log("[PostFeed] Found Search Form with selector:",C);break}}catch{}if(m){const C=m.getAttribute("data-post-types");if(C)try{const _=JSON.parse(C);Array.isArray(_)&&_.length>0&&(E=_[0],console.log("[PostFeed] Got default postType from data-post-types:",E))}catch(_){console.error("[PostFeed] Failed to parse data-post-types:",_)}if(!E){const _=m.querySelector("script.vxconfig");if(_?.textContent)try{const D=JSON.parse(_.textContent);D.postTypes&&D.postTypes.length>0&&(E=D.postTypes[0].key,console.log("[PostFeed] Got default postType from vxconfig:",E))}catch(D){console.error("[PostFeed] Failed to parse Search Form vxconfig:",D)}}}else console.warn("[PostFeed] Could not find linked Search Form. searchFormId:",e.searchFormId,"Tried selectors:",$)}console.log("[PostFeed] Frontend initial fetch - postTypeToUse:",E,"attributes.postType:",e.postType),E?(P&&u(P),Object.keys(F).length>0&&I(F),N(1,!1,Object.keys(F).length>0?F:void 0,E)):console.warn("[PostFeed] No post type available. attributes.postType:",e.postType,"searchFormId:",e.searchFormId)}}},[o,e.source,e.postType,e.blockId,e.searchFormId]);const z=ue(e.postsPerPage),w=ue(e.pagination),B=ue(e.displayDetails),M=ue(e.cardTemplate);oe(()=>{if(o!=="editor")return;const T=z.current!==e.postsPerPage||w.current!==e.pagination||B.current!==e.displayDetails||M.current!==e.cardTemplate;z.current=e.postsPerPage,w.current=e.pagination,B.current=e.displayDetails,M.current=e.cardTemplate,T&&e.postType&&N(1)},[o,e.postsPerPage,e.pagination,e.displayDetails,e.cardTemplate,e.postType]);const O=ye(()=>{!d.loading&&d.hasNext&&N(d.page+1,!0)},[d.loading,d.hasNext,d.page,N]),H=ye(()=>{const T=r||s.current;T&&T.scrollIntoView({behavior:"smooth",block:"start"})},[r]),G=ye(()=>{!d.loading&&d.hasPrev&&(N(d.page-1),setTimeout(H,100))},[d.loading,d.hasPrev,d.page,N,H]),Y=ye(()=>{!d.loading&&d.hasNext&&(N(d.page+1),setTimeout(H,100))},[d.loading,d.hasNext,d.page,N,H]),k=zo(()=>e.layoutMode!=="carousel"||!d.results?[]:Pn(d.results),[e.layoutMode,d.results]),[V,b]=so({loop:!1,align:"start",containScroll:"trimSnaps",dragFree:!0},[Qe({delay:e.carouselAutoSlideInterval||3e3,stopOnInteraction:!0,active:!!e.carouselAutoSlide})]);oe(()=>{if(!b)return;const T=!!e.carouselAutoSlide,L=e.carouselAutoSlideInterval||3e3;b.reInit({loop:!1,align:"start",containScroll:"trimSnaps",dragFree:!0},[Qe({delay:L,stopOnInteraction:!0,active:T})])},[b,e.carouselAutoSlide,e.carouselAutoSlideInterval,e.itemGap,e.carouselItemWidth,e.carouselItemWidthUnit,e.layoutMode,k.length]);const[Q,ne]=ae(!1),[Z,re]=ae(!1),U=ye(T=>{ne(T.canScrollPrev()),re(T.canScrollNext())},[]);oe(()=>{if(b)return U(b),b.on("reInit",U),b.on("select",U),b.reInit(),()=>{b.off("reInit",U),b.off("select",U)}},[b,U,k.length]);const se=ye(T=>{T.preventDefault(),b&&b.scrollPrev()},[b]),ie=ye(T=>{T.preventDefault(),b&&b.scrollNext()},[b]),ce={blockId:e.blockId,source:e.source,searchFormId:e.searchFormId,postType:e.postType,manualPostIds:e.manualPostIds,filters:e.filters,excludePosts:e.excludePosts||"",priorityFilter:e.priorityFilter||!1,priorityMin:e.priorityMin||0,priorityMax:e.priorityMax||0,offset:e.offset||0,cardTemplate:e.cardTemplate||"main",pagination:e.pagination,postsPerPage:e.postsPerPage,displayDetails:e.displayDetails,noResultsLabel:e.noResultsLabel,layoutMode:e.layoutMode,columns:e.columns,columns_tablet:e.columns_tablet,columns_mobile:e.columns_mobile,itemGap:e.itemGap,itemGap_tablet:e.itemGap_tablet,itemGap_mobile:e.itemGap_mobile,carouselItemWidth:e.carouselItemWidth,carouselItemWidth_tablet:e.carouselItemWidth_tablet,carouselItemWidth_mobile:e.carouselItemWidth_mobile,carouselItemWidthUnit:e.carouselItemWidthUnit,carouselAutoSlide:e.carouselAutoSlide,scrollPadding:e.scrollPadding,scrollPadding_tablet:e.scrollPadding_tablet,scrollPadding_mobile:e.scrollPadding_mobile,itemPadding:e.itemPadding,itemPadding_tablet:e.itemPadding_tablet,itemPadding_mobile:e.itemPadding_mobile,loadingStyle:e.loadingStyle,loadingOpacity:e.loadingOpacity,icons:{loadMore:e.loadMoreIcon,noResults:e.noResultsIcon,rightArrow:e.rightArrowIcon,leftArrow:e.leftArrowIcon,rightChevron:e.rightChevronIcon,leftChevron:e.leftChevronIcon,reset:e.resetIcon}},$e=`post-feed-grid ts-feed-nowrap min-scroll min-scroll-h vx-opacity vx-event-autoslide vx-event-scroll ${d.loading?`vx-${e.loadingStyle}`:""}`.trim();if(o==="editor"){const T=!e.postType&&!d.loading&&!d.results,L=d.loading&&e.postType;return React.createElement("div",{ref:s,className:`ts-post-feed ${f}`,"data-block-id":e.blockId},React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(ce)}}),S&&React.createElement("style",{dangerouslySetInnerHTML:{__html:S}}),R&&React.createElement("style",{dangerouslySetInnerHTML:{__html:R}}),e.displayDetails&&React.createElement("div",{className:"post-feed-header flexify"},React.createElement("span",{className:`result-count ${!d.hasResults||d.totalCount===0,""}`},d.hasResults?d.displayCount:i("Showing results","voxel-fse"))),!T&&!L&&d.results?e.layoutMode==="carousel"&&k.length>0?React.createElement("div",{className:`ts-post-feed-carousel-view ${d.loading?`vx-${e.loadingStyle}`:""}`,ref:V,style:{overflow:"hidden"}},React.createElement("div",{className:$e,"data-auto-slide":e.carouselAutoSlide?String(e.carouselAutoSlide):"0",style:{gap:`${e.itemGap||20}px`,scrollPadding:`${e.scrollPadding||0}px`,padding:`0 ${e.scrollPadding||0}px`,backfaceVisibility:"hidden",display:"flex",touchAction:"pan-y",overflowX:"visible",scrollSnapType:"none"}},k.map((P,F)=>{const E=e.itemGap||20,$=e.columns||3,m=Number(e.carouselItemWidth),_=m&&(m!==300||!e.columns)?`${e.carouselItemWidth}${e.carouselItemWidthUnit||"px"}`:`calc((100% - ${($-1)*E}px) / ${$})`;return React.createElement("div",{key:F,className:"ts-preview","data-post-id":P.postId||void 0,style:{width:_,minWidth:_,maxWidth:_,flex:`0 0 ${_}`,boxSizing:"border-box",position:"relative",scrollSnapAlign:"none"},dangerouslySetInnerHTML:{__html:P.html}})}))):React.createElement("div",{ref:t,className:x,dangerouslySetInnerHTML:{__html:d.results}}):T?React.createElement("div",{ref:t,className:x},React.createElement(Ao,null)):null,L&&React.createElement("div",{className:"ts-no-posts"},React.createElement(No,{variant:"inline",ariaLabel:"Loading posts..."})),React.createElement("div",{className:`ts-no-posts ${T||L||d.hasResults?"hidden":""}`,dangerouslySetInnerHTML:{__html:`${fe(e.noResultsIcon,pe.noResults)}<p>${e.noResultsLabel}</p>`}}),e.pagination!=="none"&&React.createElement("div",{className:"feed-pagination flexify"},e.pagination==="prev_next"&&React.createElement(React.Fragment,null,React.createElement("a",{href:"#",className:`ts-btn ts-btn-1 ts-btn-large ts-load-prev ${d.hasPrev?"":"disabled"}`,onClick:P=>{P.preventDefault(),G()}},React.createElement("span",{dangerouslySetInnerHTML:{__html:fe(e.leftArrowIcon,pe.leftArrow)}}),React.createElement("span",null,i("Previous","voxel-fse"))),React.createElement("a",{href:"#",className:`ts-btn ts-btn-1 ts-btn-large btn-icon-right ts-load-next ${d.hasNext?"":"disabled"}`,onClick:P=>{P.preventDefault(),Y()}},React.createElement("span",null,i("Next","voxel-fse")),React.createElement("span",{dangerouslySetInnerHTML:{__html:fe(e.rightArrowIcon,pe.rightArrow)}}))),e.pagination==="load_more"&&d.hasNext&&React.createElement("a",{href:"#",className:"ts-btn ts-btn-1 ts-btn-large ts-load-more",onClick:P=>{P.preventDefault(),O()}},React.createElement("span",{dangerouslySetInnerHTML:{__html:fe(e.loadMoreIcon,pe.loadMore)}}),React.createElement("span",null,i("Load more","voxel-fse")))),e.layoutMode==="carousel"&&k.length>0&&React.createElement("ul",{className:"simplify-ul flexify post-feed-nav"},React.createElement("li",null,React.createElement("a",{href:"#",className:`ts-icon-btn ts-prev-page${Q?"":" disabled"}`,"aria-label":i("Previous","voxel-fse"),onClick:se},React.createElement("span",{dangerouslySetInnerHTML:{__html:fe(e.leftChevronIcon,pe.leftChevron)}}))),React.createElement("li",null,React.createElement("a",{href:"#",className:`ts-icon-btn ts-next-page${Z?"":" disabled"}`,"aria-label":i("Next","voxel-fse"),onClick:ie},React.createElement("span",{dangerouslySetInnerHTML:{__html:fe(e.rightChevronIcon,pe.rightChevron)}})))))}return React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(ce)}}),S&&React.createElement("style",{dangerouslySetInnerHTML:{__html:S}}),R&&React.createElement("style",{dangerouslySetInnerHTML:{__html:R}}),e.displayDetails&&React.createElement("div",{className:"post-feed-header"},React.createElement("span",{className:`result-count ${!d.hasResults||d.totalCount===0?"hidden":""}`},d.displayCount)),e.layoutMode==="carousel"&&k.length>0?React.createElement("div",{className:`ts-post-feed-carousel-view ${d.loading?`vx-${e.loadingStyle}`:""}`,ref:V,style:{overflow:"hidden"}},React.createElement("div",{className:$e,"data-auto-slide":e.carouselAutoSlide?String(e.carouselAutoSlide):"0",style:{gap:`${e.itemGap||20}px`,scrollPadding:`${e.scrollPadding||0}px`,padding:`0 ${e.scrollPadding||0}px`,backfaceVisibility:"hidden",display:"flex",touchAction:"pan-y",overflowX:"visible",scrollSnapType:"none"}},k.map((T,L)=>{const P=e.itemGap||20,F=e.columns||3,E=Number(e.carouselItemWidth),m=E&&(E!==300||!e.columns)?`${e.carouselItemWidth}${e.carouselItemWidthUnit||"px"}`:`calc((100% - ${(F-1)*P}px) / ${F})`;return React.createElement("div",{key:L,className:"ts-preview","data-post-id":T.postId||void 0,style:{width:m,minWidth:m,maxWidth:m,flex:`0 0 ${m}`,boxSizing:"border-box",position:"relative",scrollSnapAlign:"none"},dangerouslySetInnerHTML:{__html:T.html}})}))):React.createElement("div",{ref:t,className:x,dangerouslySetInnerHTML:{__html:d.results}}),React.createElement("div",{className:`ts-no-posts ${d.hasResults||d.loading?"hidden":""}`},React.createElement("span",{dangerouslySetInnerHTML:{__html:fe(e.noResultsIcon,pe.noResults)}}),React.createElement("p",null,e.noResultsLabel,e.source==="search-form"&&React.createElement(React.Fragment,null," ",React.createElement("a",{href:"#",className:"ts-feed-reset",onClick:T=>{T.preventDefault();const L=new CustomEvent("voxel-search-clear",{detail:{postType:v||e.postType,searchFormId:e.searchFormId},bubbles:!0});window.dispatchEvent(L)}},i("Reset filters?","voxel-fse"))))),e.pagination!=="none"&&React.createElement("div",{className:`feed-pagination flexify ${!d.hasPrev&&!d.hasNext?"hidden":""}`},e.pagination==="prev_next"&&React.createElement(React.Fragment,null,React.createElement("a",{href:"#",className:`ts-btn ts-btn-1 ts-btn-large ts-load-prev ${d.hasPrev?"":"disabled"}`,onClick:T=>{T.preventDefault(),d.hasPrev&&!d.loading&&G()}},React.createElement("span",{dangerouslySetInnerHTML:{__html:fe(e.leftArrowIcon,pe.leftArrow)}}),React.createElement("span",null,i("Previous","voxel-fse"))),React.createElement("a",{href:"#",className:`ts-btn ts-btn-1 ts-btn-large btn-icon-right ts-load-next ${d.hasNext?"":"disabled"}`,onClick:T=>{T.preventDefault(),d.hasNext&&!d.loading&&Y()}},React.createElement("span",null,i("Next","voxel-fse")),React.createElement("span",{dangerouslySetInnerHTML:{__html:fe(e.rightArrowIcon,pe.rightArrow)}}))),e.pagination==="load_more"&&React.createElement("a",{href:"#",className:`ts-btn ts-btn-1 ts-btn-large ts-load-more ${d.hasNext?"":"hidden"}`,onClick:T=>{T.preventDefault(),d.hasNext&&!d.loading&&O()}},React.createElement("span",{dangerouslySetInnerHTML:{__html:fe(e.loadMoreIcon,pe.loadMore)}}),React.createElement("span",null,i("Load more","voxel-fse")))),e.layoutMode==="carousel"&&k.length>0&&React.createElement("ul",{className:"simplify-ul flexify post-feed-nav"},React.createElement("li",null,React.createElement("a",{href:"#",className:`ts-icon-btn ts-prev-page${Q?"":" disabled"}`,"aria-label":i("Previous","voxel-fse"),onClick:se},React.createElement("span",{dangerouslySetInnerHTML:{__html:fe(e.leftChevronIcon,pe.leftChevron)}}))),React.createElement("li",null,React.createElement("a",{href:"#",className:`ts-icon-btn ts-next-page${Z?"":" disabled"}`,"aria-label":i("Next","voxel-fse"),onClick:ie},React.createElement("span",{dangerouslySetInnerHTML:{__html:fe(e.rightChevronIcon,pe.rightChevron)}})))))}function Fn(){const[e,n]=ae(null),[o,l]=ae(!0),[r,t]=ae(null);return oe(()=>{let s=!0;async function a(){try{const c=await Co({path:"/voxel-fse/v1/post-feed/config"});s&&(n(c),l(!1))}catch(c){if(s){const p=c instanceof Error?c.message:"Failed to fetch configuration";t(p),l(!1)}}}return a(),()=>{s=!1}},[]),{config:e,isLoading:o,error:r}}function zn(e){const[n,o]=ae([{id:"main",label:"Main template"}]),[l,r]=ae(!1),[t,s]=ae(null),a=ye(async()=>{if(!e){o([{id:"main",label:"Main template"}]);return}r(!0),s(null);try{const c=await Co({path:`/voxel-fse/v1/post-feed/card-templates?post_type=${encodeURIComponent(e)}`});c.error&&s(c.error),o(c.templates||[{id:"main",label:"Main template"}])}catch(c){const p=c instanceof Error?c.message:"Failed to fetch templates";s(p),o([{id:"main",label:"Main template"}])}finally{r(!1)}},[e]);return oe(()=>{a()},[a]),{templates:n,isLoading:l,error:t,refetch:a}}function Mn({attributes:e,setAttributes:n,config:o,searchFormItems:l,cardTemplates:r,isLoadingTemplates:t}){const s=[{label:i("Select post type...","voxel-fse"),value:""},...(o?.postTypes||[]).map(a=>({label:a.label,value:a.key}))];return React.createElement(Io,{attributes:e,setAttributes:n,stateAttribute:"postFeedSettingsAccordion",defaultPanel:"settings"},React.createElement(Ce,{id:"settings",title:i("Post Feed Settings","voxel-fse")},React.createElement(me,{label:i("Data source","voxel-fse"),value:e.source,options:[{label:i("Search Form widget","voxel-fse"),value:"search-form"},{label:i("Filters","voxel-fse"),value:"search-filters"},{label:i("Manual selection","voxel-fse"),value:"manual"},{label:i("WP default archive","voxel-fse"),value:"archive"}],onChange:a=>n({source:a})}),e.source==="search-form"&&React.createElement(React.Fragment,null,React.createElement(Wo,{label:i("Link to search form","voxel-fse"),items:l,selectedId:e.searchFormId,onSelect:a=>n({searchFormId:a??""}),widgetType:"SearchForm",description:i("Select a Search Form block on this page to link with.","voxel-fse")}),React.createElement(me,{label:i("Pagination","voxel-fse"),value:e.pagination,options:[{label:i("Load more button","voxel-fse"),value:"load_more"},{label:i("Prev/Next buttons","voxel-fse"),value:"prev_next"},{label:i("None","voxel-fse"),value:"none"}],onChange:a=>n({pagination:a})}),React.createElement(Pe,{label:i("Posts per page","voxel-fse"),value:e.postsPerPage,onChange:a=>n({postsPerPage:a??10}),min:1,max:100}),React.createElement(Xe,{label:i("Display details","voxel-fse"),help:i("Display results count and order by (if enabled) on top","voxel-fse"),checked:e.displayDetails,onChange:a=>n({displayDetails:a})})),e.source==="search-filters"&&React.createElement(React.Fragment,null,React.createElement(me,{label:i("Choose post type","voxel-fse"),value:e.postType,options:s,onChange:a=>n({postType:a})}),React.createElement(Pe,{label:i("Number of posts to load","voxel-fse"),value:e.postsPerPage,onChange:a=>n({postsPerPage:a??10}),min:0,max:500}),React.createElement(me,{label:i("Pagination","voxel-fse"),value:e.pagination,options:[{label:i("Load more button","voxel-fse"),value:"load_more"},{label:i("Prev/Next buttons","voxel-fse"),value:"prev_next"},{label:i("None","voxel-fse"),value:"none"}],onChange:a=>n({pagination:a})}),React.createElement(Ue,{label:i("Exclude posts","voxel-fse"),value:e.excludePosts,onChange:a=>n({excludePosts:a}),help:i("Comma-separated post IDs to exclude","voxel-fse")}),React.createElement(Xe,{label:i("Filter posts by priority","voxel-fse"),checked:e.priorityFilter,onChange:a=>n({priorityFilter:a})}),e.priorityFilter&&React.createElement("div",{className:"voxel-fse-half-width-controls"},React.createElement(Pe,{label:i("Priority min","voxel-fse"),value:e.priorityMin,onChange:a=>n({priorityMin:a??0}),min:0,max:100}),React.createElement(Pe,{label:i("Priority max","voxel-fse"),value:e.priorityMax,onChange:a=>n({priorityMax:a??0}),min:0,max:100})),React.createElement(Pe,{label:i("Offset","voxel-fse"),value:e.offset,onChange:a=>n({offset:a??0}),min:0,max:100}),React.createElement(me,{label:i("Preview card template","voxel-fse"),value:e.cardTemplate,options:r.map(a=>({label:a.label,value:a.id})),onChange:a=>n({cardTemplate:a}),disabled:t||!e.postType,help:t?i("Loading templates...","voxel-fse"):i("Select post type first to see available templates","voxel-fse")})),(e.source==="manual"||e.source==="archive")&&React.createElement(Ue,{label:i("No results label","voxel-fse"),value:e.noResultsLabel,onChange:a=>n({noResultsLabel:a})}),(e.source==="manual"||e.source==="archive")&&React.createElement(me,{label:i("Choose post type","voxel-fse"),value:e.postType,options:s,onChange:a=>n({postType:a})}),e.source==="manual"&&React.createElement(Ue,{label:i("Choose posts","voxel-fse"),value:e.manualPostIds.join(", "),onChange:a=>{const c=a.split(",").map(p=>parseInt(p.trim(),10)).filter(p=>!isNaN(p)&&p>0);n({manualPostIds:c})},help:i("Enter post IDs separated by commas. A proper post selector will be added in future updates.","voxel-fse")}),(e.source==="manual"||e.source==="archive")&&e.postType&&React.createElement(me,{label:i("Preview card template","voxel-fse"),value:e.cardTemplate,options:r.map(a=>({label:a.label,value:a.id})),onChange:a=>n({cardTemplate:a}),disabled:t}),(e.source==="search-form"||e.source==="search-filters")&&React.createElement(Ue,{label:i("No results label","voxel-fse"),value:e.noResultsLabel,onChange:a=>n({noResultsLabel:a})})),React.createElement(Ce,{id:"layout",title:i("Layout","voxel-fse")},React.createElement(me,{label:i("Mode","voxel-fse"),value:e.layoutMode,options:[{label:i("Grid","voxel-fse"),value:"grid"},{label:i("Carousel","voxel-fse"),value:"carousel"}],onChange:a=>n({layoutMode:a})}),e.layoutMode==="grid"&&React.createElement(React.Fragment,null,React.createElement(A,{label:i("Number of columns","voxel-fse"),attributes:e,setAttributes:n,attributeBaseName:"columns",min:1,max:6})),e.layoutMode==="carousel"&&React.createElement(React.Fragment,null,React.createElement(A,{label:i("Item width","voxel-fse"),attributes:e,setAttributes:n,attributeBaseName:"carouselItemWidth",min:100,max:800}),React.createElement(Xe,{label:i("Auto slide?","voxel-fse"),checked:e.carouselAutoSlide,onChange:a=>n({carouselAutoSlide:a})}),e.carouselAutoSlide&&React.createElement(A,{label:i("Auto slide interval (ms)","voxel-fse"),attributes:e,setAttributes:n,attributeBaseName:"carouselAutoSlideInterval",min:1e3,max:1e4,help:i("Time between slides in milliseconds","voxel-fse")})),React.createElement(A,{label:i("Item gap","voxel-fse"),attributes:e,setAttributes:n,attributeBaseName:"itemGap",min:0,max:100,help:i("Adds gap between the items","voxel-fse")}),e.layoutMode==="carousel"&&React.createElement(React.Fragment,null,React.createElement(A,{label:i("Scroll padding","voxel-fse"),attributes:e,setAttributes:n,attributeBaseName:"scrollPadding",min:0,max:100,help:i("Adds padding to the scrollable area, useful in full width layouts or in responsive mode","voxel-fse")}),React.createElement(A,{label:i("Item padding","voxel-fse"),attributes:e,setAttributes:n,attributeBaseName:"itemPadding",min:0,max:100,help:i("Adds padding to an individual item","voxel-fse")}))),React.createElement(Ce,{id:"icons",title:i("Icons","voxel-fse")},React.createElement(Ee,{label:i("Load more icon","voxel-fse"),value:e.loadMoreIcon,onChange:a=>n({loadMoreIcon:a})}),React.createElement(Ee,{label:i("No results icon","voxel-fse"),value:e.noResultsIcon,onChange:a=>n({noResultsIcon:a})}),React.createElement(Ee,{label:i("Right arrow","voxel-fse"),value:e.rightArrowIcon,onChange:a=>n({rightArrowIcon:a})}),React.createElement(Ee,{label:i("Left arrow","voxel-fse"),value:e.leftArrowIcon,onChange:a=>n({leftArrowIcon:a})}),React.createElement(Ee,{label:i("Right chevron","voxel-fse"),value:e.rightChevronIcon,onChange:a=>n({rightChevronIcon:a})}),React.createElement(Ee,{label:i("Left chevron","voxel-fse"),value:e.leftChevronIcon,onChange:a=>n({leftChevronIcon:a})}),React.createElement(Ee,{label:i("Reset icon","voxel-fse"),value:e.resetIcon,onChange:a=>n({resetIcon:a})})))}function Hn({attributes:e,setAttributes:n}){return React.createElement(Io,{attributes:e,setAttributes:n,stateAttribute:"postFeedStylesAccordion",defaultPanel:"counter"},React.createElement(Ce,{id:"counter",title:i("Counter","voxel-fse")},React.createElement(Ge,{label:i("Typography","voxel-fse"),value:e.counterTypography,onChange:o=>n({counterTypography:o})}),React.createElement(j,{label:i("Text color","voxel-fse"),value:e.counterTextColor,onChange:o=>n({counterTextColor:o})}),React.createElement(A,{label:i("Bottom spacing","voxel-fse"),attributes:e,setAttributes:n,attributeBaseName:"counterBottomSpacing",min:0,max:100})),React.createElement(Ce,{id:"order-by",title:i("Order by","voxel-fse")},React.createElement(Ge,{label:i("Typography","voxel-fse"),value:e.orderByTypography,onChange:o=>n({orderByTypography:o})}),React.createElement(j,{label:i("Text color","voxel-fse"),value:e.orderByTextColor,onChange:o=>n({orderByTextColor:o})}),React.createElement(j,{label:i("Text color (Hover)","voxel-fse"),value:e.orderByTextColorHover,onChange:o=>n({orderByTextColorHover:o})})),React.createElement(Ce,{id:"loading-results",title:i("Loading results","voxel-fse")},React.createElement(me,{label:i("Loading style","voxel-fse"),value:e.loadingStyle,options:[{label:i("Opacity","voxel-fse"),value:"opacity"},{label:i("Skeleton","voxel-fse"),value:"skeleton"},{label:i("None","voxel-fse"),value:"none"}],onChange:o=>n({loadingStyle:o})}),e.loadingStyle==="opacity"&&React.createElement(Ve,{label:i("Opacity","voxel-fse"),value:e.loadingOpacity,onChange:o=>n({loadingOpacity:o}),min:0,max:1,step:.1}),e.loadingStyle==="skeleton"&&React.createElement(j,{label:i("Skeleton background","voxel-fse"),value:e.skeletonBackgroundColor,onChange:o=>n({skeletonBackgroundColor:o})})),React.createElement(Ce,{id:"no-results",title:i("No results","voxel-fse")},React.createElement(Xe,{label:i("Hide screen","voxel-fse"),checked:e.noResultsHideScreen,onChange:o=>n({noResultsHideScreen:o})}),React.createElement(A,{label:i("Content gap","voxel-fse"),attributes:e,setAttributes:n,attributeBaseName:"noResultsContentGap",min:0,max:100}),React.createElement(A,{label:i("Icon size","voxel-fse"),attributes:e,setAttributes:n,attributeBaseName:"noResultsIconSize",min:16,max:128}),React.createElement(j,{label:i("Icon color","voxel-fse"),value:e.noResultsIconColor,onChange:o=>n({noResultsIconColor:o})}),React.createElement(Ge,{label:i("Typography","voxel-fse"),value:e.noResultsTypography,onChange:o=>n({noResultsTypography:o})}),React.createElement(j,{label:i("Text color","voxel-fse"),value:e.noResultsTextColor,onChange:o=>n({noResultsTextColor:o})}),React.createElement(j,{label:i("Link color","voxel-fse"),value:e.noResultsLinkColor,onChange:o=>n({noResultsLinkColor:o})})),React.createElement(Ce,{id:"pagination",title:i("Load more / Next / Prev","voxel-fse")},React.createElement(mo,{tabs:[{name:"normal",title:i("Normal","voxel-fse")},{name:"hover",title:i("Hover","voxel-fse")}]},o=>o.name==="normal"?React.createElement(React.Fragment,null,React.createElement(A,{label:i("Top margin","voxel-fse"),attributes:e,setAttributes:n,attributeBaseName:"paginationTopMargin",min:0,max:100}),React.createElement(Ge,{label:i("Button typography","voxel-fse"),value:e.paginationTypography,onChange:l=>n({paginationTypography:l})}),React.createElement(me,{label:i("Justify","voxel-fse"),value:e.paginationJustify,options:[{label:i("Start","voxel-fse"),value:"flex-start"},{label:i("Center","voxel-fse"),value:"center"},{label:i("End","voxel-fse"),value:"flex-end"},{label:i("Space between","voxel-fse"),value:"space-between"},{label:i("Space around","voxel-fse"),value:"space-around"}],onChange:l=>n({paginationJustify:l})}),React.createElement(A,{label:i("Spacing between buttons","voxel-fse"),attributes:e,setAttributes:n,attributeBaseName:"paginationSpacing",min:0,max:50}),React.createElement(A,{label:i("Border radius","voxel-fse"),attributes:e,setAttributes:n,attributeBaseName:"paginationBorderRadius",min:0,max:50}),React.createElement(j,{label:i("Text color","voxel-fse"),value:e.paginationTextColor,onChange:l=>n({paginationTextColor:l})}),React.createElement(j,{label:i("Background color","voxel-fse"),value:e.paginationBackgroundColor,onChange:l=>n({paginationBackgroundColor:l})}),React.createElement(A,{label:i("Icon size","voxel-fse"),attributes:e,setAttributes:n,attributeBaseName:"paginationIconSize",min:12,max:48}),React.createElement(j,{label:i("Icon color","voxel-fse"),value:e.paginationIconColor,onChange:l=>n({paginationIconColor:l})})):React.createElement(React.Fragment,null,React.createElement(j,{label:i("Text color","voxel-fse"),value:e.paginationTextColorHover,onChange:l=>n({paginationTextColorHover:l})}),React.createElement(j,{label:i("Background color","voxel-fse"),value:e.paginationBackgroundColorHover,onChange:l=>n({paginationBackgroundColorHover:l})}),React.createElement(j,{label:i("Border color","voxel-fse"),value:e.paginationBorderColorHover,onChange:l=>n({paginationBorderColorHover:l})}),React.createElement(j,{label:i("Icon color","voxel-fse"),value:e.paginationIconColorHover,onChange:l=>n({paginationIconColorHover:l})}))),React.createElement(Ho,{label:i("Padding","voxel-fse"),values:e.paginationPadding||{},onChange:o=>n({paginationPadding:o}),availableUnits:["px","em","%"]}),React.createElement(A,{label:i("Height","voxel-fse"),attributes:e,setAttributes:n,attributeBaseName:"paginationHeight",min:0,max:100}),React.createElement(A,{label:i("Width","voxel-fse"),attributes:e,setAttributes:n,attributeBaseName:"paginationWidth",unitAttributeName:"paginationWidthUnit",availableUnits:["px","%"],min:0,max:100}),React.createElement(A,{label:i("Icon text spacing","voxel-fse"),attributes:e,setAttributes:n,attributeBaseName:"paginationIconTextSpacing",min:0,max:50}),React.createElement(me,{label:i("Border type","voxel-fse"),value:e.paginationBorderType,options:[{label:i("None","voxel-fse"),value:""},{label:i("Solid","voxel-fse"),value:"solid"},{label:i("Double","voxel-fse"),value:"double"},{label:i("Dotted","voxel-fse"),value:"dotted"},{label:i("Dashed","voxel-fse"),value:"dashed"},{label:i("Groove","voxel-fse"),value:"groove"}],onChange:o=>n({paginationBorderType:o})}),e.paginationBorderType&&React.createElement(React.Fragment,null,React.createElement(Ve,{label:i("Border width","voxel-fse"),value:e.paginationBorderWidth,onChange:o=>n({paginationBorderWidth:o}),min:0,max:10}),React.createElement(j,{label:i("Border color","voxel-fse"),value:e.paginationBorderColor,onChange:o=>n({paginationBorderColor:o})}))),React.createElement(Ce,{id:"carousel-navigation",title:i("Carousel navigation","voxel-fse")},React.createElement(mo,{tabs:[{name:"normal",title:i("Normal","voxel-fse")},{name:"hover",title:i("Hover","voxel-fse")}]},o=>o.name==="normal"?React.createElement(React.Fragment,null,React.createElement(A,{label:i("Horizontal position","voxel-fse"),attributes:e,setAttributes:n,attributeBaseName:"carouselNavHorizontalPosition",min:-100,max:100}),React.createElement(A,{label:i("Vertical position","voxel-fse"),attributes:e,setAttributes:n,attributeBaseName:"carouselNavVerticalPosition",min:-100,max:100}),React.createElement(j,{label:i("Button icon color","voxel-fse"),value:e.carouselNavIconColor,onChange:l=>n({carouselNavIconColor:l})}),React.createElement(A,{label:i("Button size","voxel-fse"),attributes:e,setAttributes:n,attributeBaseName:"carouselNavButtonSize",min:20,max:80}),React.createElement(A,{label:i("Button icon size","voxel-fse"),attributes:e,setAttributes:n,attributeBaseName:"carouselNavIconSize",min:12,max:48}),React.createElement(j,{label:i("Button background","voxel-fse"),value:e.carouselNavBackground,onChange:l=>n({carouselNavBackground:l})}),React.createElement(Ve,{label:i("Backdrop blur","voxel-fse"),value:e.carouselNavBackdropBlur,onChange:l=>n({carouselNavBackdropBlur:l}),min:0,max:20}),React.createElement(A,{label:i("Button border radius","voxel-fse"),attributes:e,setAttributes:n,attributeBaseName:"carouselNavBorderRadius",min:0,max:50})):React.createElement(React.Fragment,null,React.createElement(A,{label:i("Button size","voxel-fse"),attributes:e,setAttributes:n,attributeBaseName:"carouselNavButtonSizeHover",min:20,max:80}),React.createElement(A,{label:i("Button icon size","voxel-fse"),attributes:e,setAttributes:n,attributeBaseName:"carouselNavIconSizeHover",min:12,max:48}),React.createElement(j,{label:i("Button icon color","voxel-fse"),value:e.carouselNavIconColorHover,onChange:l=>n({carouselNavIconColorHover:l})}),React.createElement(j,{label:i("Button background color","voxel-fse"),value:e.carouselNavBackgroundHover,onChange:l=>n({carouselNavBackgroundHover:l})}),React.createElement(j,{label:i("Button border color","voxel-fse"),value:e.carouselNavBorderColorHover,onChange:l=>n({carouselNavBorderColorHover:l})}))),React.createElement(me,{label:i("Border type","voxel-fse"),value:e.carouselNavBorderType,options:[{label:i("None","voxel-fse"),value:""},{label:i("Solid","voxel-fse"),value:"solid"},{label:i("Double","voxel-fse"),value:"double"},{label:i("Dotted","voxel-fse"),value:"dotted"},{label:i("Dashed","voxel-fse"),value:"dashed"},{label:i("Groove","voxel-fse"),value:"groove"}],onChange:o=>n({carouselNavBorderType:o})}),e.carouselNavBorderType&&React.createElement(React.Fragment,null,React.createElement(Ve,{label:i("Border width","voxel-fse"),value:e.carouselNavBorderWidth,onChange:o=>n({carouselNavBorderWidth:o}),min:0,max:10}),React.createElement(j,{label:i("Border color","voxel-fse"),value:e.carouselNavBorderColor,onChange:o=>n({carouselNavBorderColor:o})}))))}function Ln(){return Math.random().toString(36).substring(2,10)}function bn({attributes:e,setAttributes:n,clientId:o}){const l=e.blockId||"post-feed",r=$o(e,{blockId:l,baseClass:"voxel-fse-post-feed-editor",selectorPrefix:"voxel-fse-post-feed"}),t=So({className:r.className,style:r.styles}),{config:s,error:a}=Fn(),{templates:c,isLoading:p}=zn(e.postType);oe(()=>{e.blockId||n({blockId:Ln()})},[e.blockId,n]),oe(()=>{const u="voxel-post-feed-css";if(!document.getElementById(u)){const h=document.createElement("link");h.id=u,h.rel="stylesheet";const x=(window.Voxel_Config?.site_url||window.location.origin).replace(/\/$/,"");h.href=`${x}/wp-content/themes/voxel/assets/dist/post-feed.css?ver=1.7.5.2`,document.head.appendChild(h)}},[]);const d=je(u=>{const{getBlocks:h}=u("core/block-editor"),f=(x,S)=>{let R=[];return x.forEach(N=>{N.name===S&&N.clientId!==o&&R.push(N),N.innerBlocks&&N.innerBlocks.length>0&&(R=R.concat(f(N.innerBlocks,S)))}),R};return f(h(),"voxel-fse/search-form")},[o]),g=je(u=>{if(e.source!=="search-form"||!e.searchFormId)return null;const{getBlocks:h}=u("core/block-editor"),f=(x,S)=>{for(const R of x){if(R.name==="voxel-fse/search-form"&&(R.attributes.blockId===S||R.clientId===S))return R.clientId;if(R.innerBlocks&&R.innerBlocks.length>0){const N=f(R.innerBlocks,S);if(N)return N}}return null};return f(h(),e.searchFormId)},[e.source,e.searchFormId]),y=je(u=>{if(!g)return"";const{getBlock:h}=u("core/block-editor"),f=h(g);return f&&(f.attributes.selectedPostType||f.attributes.postTypes?.[0])||""}),I=je(u=>{if(!g)return{};const{getBlock:h}=u("core/block-editor"),f=h(g);return f?f.attributes.editorFilterValues||{}:{}}),v=d.map(u=>({id:u.attributes.blockId||u.clientId,clientId:u.clientId,label:u.attributes.blockId||u.clientId.substring(0,7)}));return React.createElement(React.Fragment,null,React.createElement(Mo,null,React.createElement(bo,{tabs:[{id:"content",label:i("Content","voxel-fse"),icon:"",render:()=>React.createElement(Mn,{attributes:e,setAttributes:n,config:s,searchFormItems:v,cardTemplates:c,isLoadingTemplates:p})},{id:"style",label:i("Style","voxel-fse"),icon:"",render:()=>React.createElement(Hn,{attributes:e,setAttributes:n})}],includeAdvancedTab:!0,includeVoxelTab:!0,attributes:e,setAttributes:n,activeTabAttribute:"postFeedActiveTab"})),React.createElement("div",{...t},a?React.createElement("div",{className:"voxel-fse-error"},React.createElement("span",null,a)):React.createElement(kn,{attributes:{...e,postType:e.source==="search-form"&&y||e.postType},config:s,context:"editor",editorFilters:e.source==="search-form"?I:void 0})))}function Dn({attributes:e}){const n=e.blockId||"post-feed",o=$o(e,{blockId:n,baseClass:"voxel-fse-post-feed-frontend ts-post-feed",selectorPrefix:"voxel-fse-post-feed"}),l=So.save({id:o.elementId,className:o.className,style:o.styles,...o.customAttrs,"data-block-type":"post-feed","data-visibility-behavior":e.visibilityBehavior||void 0,"data-visibility-rules":e.visibilityRules?.length?JSON.stringify(e.visibilityRules):void 0,"data-loop-source":e.loopSource||void 0,"data-loop-property":e.loopProperty||void 0,"data-loop-limit":e.loopLimit||void 0,"data-loop-offset":e.loopOffset||void 0}),r={blockId:e.blockId,source:e.source,searchFormId:e.searchFormId,postType:e.postType,manualPostIds:e.manualPostIds,filters:e.filters,excludePosts:e.excludePosts,priorityFilter:e.priorityFilter,priorityMin:e.priorityMin,priorityMax:e.priorityMax,offset:e.offset,cardTemplate:e.cardTemplate,pagination:e.pagination,postsPerPage:e.postsPerPage,displayDetails:e.displayDetails,noResultsLabel:e.noResultsLabel,layoutMode:e.layoutMode,columns:e.columns,columns_tablet:e.columns_tablet,columns_mobile:e.columns_mobile,itemGap:e.itemGap,itemGap_tablet:e.itemGap_tablet,itemGap_mobile:e.itemGap_mobile,carouselItemWidth:e.carouselItemWidth,carouselItemWidth_tablet:e.carouselItemWidth_tablet,carouselItemWidth_mobile:e.carouselItemWidth_mobile,carouselItemWidthUnit:e.carouselItemWidthUnit,carouselAutoSlide:e.carouselAutoSlide,scrollPadding:e.scrollPadding,scrollPadding_tablet:e.scrollPadding_tablet,scrollPadding_mobile:e.scrollPadding_mobile,itemPadding:e.itemPadding,itemPadding_tablet:e.itemPadding_tablet,itemPadding_mobile:e.itemPadding_mobile,loadingStyle:e.loadingStyle,loadingOpacity:e.loadingOpacity,icons:{loadMore:e.loadMoreIcon,noResults:e.noResultsIcon,rightArrow:e.rightArrowIcon,leftArrow:e.leftArrowIcon,rightChevron:e.rightChevronIcon,leftChevron:e.leftChevronIcon,reset:e.resetIcon}},t=Ro(e,e.blockId);return React.createElement("div",{...l,"data-block-id":e.blockId,"data-source":e.source,"data-search-form":e.searchFormId||""},o.responsiveCSS&&React.createElement("style",{dangerouslySetInnerHTML:{__html:o.responsiveCSS}}),t&&React.createElement("style",{dangerouslySetInnerHTML:{__html:t}}),Oo(e,!1,void 0,void 0,o.uniqueSelector),React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(r)}}),React.createElement("div",{className:"voxel-fse-block-placeholder"},React.createElement("span",{className:"placeholder-icon"},""),React.createElement("span",{className:"placeholder-text"},"Post Feed (VX)")),e.customCSS&&React.createElement("style",{dangerouslySetInnerHTML:{__html:e.customCSS.replace(/selector/g,o.uniqueSelector)}}))}const On="https://schemas.wp.org/trunk/block.json",An=3,Wn="voxel-fse/post-feed",jn="1.0.0",Gn="Post Feed (VX)",Vn="voxel-fse",Un="Display posts from any Voxel post type with search form integration, filtering, and pagination.",qn=["post","feed","search","results","voxel","grid","carousel"],Jn="voxel-fse",Xn={html:!1,align:["wide","full"],anchor:!0,className:!0,customClassName:!0},Kn="file:./index.js",Qn="file:./frontend.js",Yn="file:./render.php",Zn={blockId:{type:"string",default:""},source:{type:"string",default:"search-form",enum:["search-form","search-filters","manual","archive"]},searchFormId:{type:"string",default:""},postType:{type:"string",default:""},manualPostIds:{type:"array",default:[],items:{type:"number"}},filters:{type:"object",default:{}},excludePosts:{type:"string",default:""},priorityFilter:{type:"boolean",default:!1},priorityMin:{type:"number",default:0},priorityMax:{type:"number",default:0},offset:{type:"number",default:0},cardTemplate:{type:"string",default:"main"},pagination:{type:"string",default:"load_more",enum:["load_more","prev_next","none"]},postsPerPage:{type:"number",default:10},displayDetails:{type:"boolean",default:!0},noResultsLabel:{type:"string",default:"There are no results matching your search"},layoutMode:{type:"string",default:"grid",enum:["grid","carousel"]},columns:{type:"number",default:3},columns_tablet:{type:"number"},columns_mobile:{type:"number"},itemGap:{type:"number",default:20},itemGap_tablet:{type:"number"},itemGap_mobile:{type:"number"},carouselItemWidth:{type:"number"},carouselItemWidth_tablet:{type:"number"},carouselItemWidth_mobile:{type:"number"},carouselItemWidthUnit:{type:"string",default:"px"},carouselAutoSlide:{type:"boolean",default:!1},carouselAutoSlideInterval:{type:"number",default:3e3},scrollPadding:{type:"number"},scrollPadding_tablet:{type:"number"},scrollPadding_mobile:{type:"number"},itemPadding:{type:"number"},itemPadding_tablet:{type:"number"},itemPadding_mobile:{type:"number"},loadMoreIcon:{type:"object",default:{}},noResultsIcon:{type:"object",default:{}},rightArrowIcon:{type:"object",default:{}},leftArrowIcon:{type:"object",default:{}},rightChevronIcon:{type:"object",default:{}},leftChevronIcon:{type:"object",default:{}},resetIcon:{type:"object",default:{}},counterTypography:{type:"object",default:{}},counterTextColor:{type:"string",default:""},counterBottomSpacing:{type:"number"},counterBottomSpacing_tablet:{type:"number"},counterBottomSpacing_mobile:{type:"number"},orderByTypography:{type:"object",default:{}},orderByTextColor:{type:"string",default:""},orderByTextColorHover:{type:"string",default:""},loadingStyle:{type:"string",default:"opacity",enum:["opacity","skeleton","none"]},loadingOpacity:{type:"number",default:.5},skeletonBackgroundColor:{type:"string",default:""},noResultsHideScreen:{type:"boolean",default:!1},noResultsContentGap:{type:"number"},noResultsContentGap_tablet:{type:"number"},noResultsContentGap_mobile:{type:"number"},noResultsIconSize:{type:"number"},noResultsIconSize_tablet:{type:"number"},noResultsIconSize_mobile:{type:"number"},noResultsIconColor:{type:"string",default:""},noResultsTypography:{type:"object",default:{}},noResultsTextColor:{type:"string",default:""},noResultsLinkColor:{type:"string",default:""},paginationTopMargin:{type:"number"},paginationTopMargin_tablet:{type:"number"},paginationTopMargin_mobile:{type:"number"},paginationTypography:{type:"object",default:{}},paginationPadding:{type:"object",default:{}},paginationHeight:{type:"number"},paginationHeight_tablet:{type:"number"},paginationHeight_mobile:{type:"number"},paginationWidth:{type:"number",default:100},paginationWidthUnit:{type:"string",default:"%"},paginationJustify:{type:"string",default:"center"},paginationSpacing:{type:"number"},paginationSpacing_tablet:{type:"number"},paginationSpacing_mobile:{type:"number"},paginationBorderType:{type:"string",default:""},paginationBorderWidth:{type:"number"},paginationBorderColor:{type:"string",default:""},paginationBorderRadius:{type:"number"},paginationBorderRadius_tablet:{type:"number"},paginationBorderRadius_mobile:{type:"number"},paginationTextColor:{type:"string",default:""},paginationBackgroundColor:{type:"string",default:""},paginationIconSize:{type:"number"},paginationIconColor:{type:"string",default:""},paginationIconTextSpacing:{type:"number"},paginationTextColorHover:{type:"string",default:""},paginationBackgroundColorHover:{type:"string",default:""},paginationBorderColorHover:{type:"string",default:""},paginationIconColorHover:{type:"string",default:""},carouselNavHorizontalPosition:{type:"number"},carouselNavHorizontalPosition_tablet:{type:"number"},carouselNavHorizontalPosition_mobile:{type:"number"},carouselNavVerticalPosition:{type:"number"},carouselNavVerticalPosition_tablet:{type:"number"},carouselNavVerticalPosition_mobile:{type:"number"},carouselNavIconColor:{type:"string",default:""},carouselNavButtonSize:{type:"number"},carouselNavButtonSize_tablet:{type:"number"},carouselNavButtonSize_mobile:{type:"number"},carouselNavIconSize:{type:"number"},carouselNavIconSize_tablet:{type:"number"},carouselNavIconSize_mobile:{type:"number"},carouselNavBackground:{type:"string",default:""},carouselNavBackdropBlur:{type:"number"},carouselNavBorderType:{type:"string",default:""},carouselNavBorderWidth:{type:"number"},carouselNavBorderColor:{type:"string",default:""},carouselNavBorderRadius:{type:"number"},carouselNavBorderRadius_tablet:{type:"number"},carouselNavBorderRadius_mobile:{type:"number"},carouselNavButtonSizeHover:{type:"number"},carouselNavButtonSizeHover_tablet:{type:"number"},carouselNavButtonSizeHover_mobile:{type:"number"},carouselNavIconSizeHover:{type:"number"},carouselNavIconSizeHover_tablet:{type:"number"},carouselNavIconSizeHover_mobile:{type:"number"},carouselNavIconColorHover:{type:"string",default:""},carouselNavBackgroundHover:{type:"string",default:""},carouselNavBorderColorHover:{type:"string",default:""},blockMargin:{type:"object",default:{}},blockMargin_tablet:{type:"object",default:{}},blockMargin_mobile:{type:"object",default:{}},blockPadding:{type:"object",default:{}},blockPadding_tablet:{type:"object",default:{}},blockPadding_mobile:{type:"object",default:{}},zIndex:{type:"number"},elementId:{type:"string",default:""},hideDesktop:{type:"boolean",default:!1},hideTablet:{type:"boolean",default:!1},hideMobile:{type:"boolean",default:!1},customClasses:{type:"string",default:""},customCSS:{type:"string",default:""},postFeedSettingsAccordion:{type:"string"},postFeedIconsAccordion:{type:"string"},postFeedStylesAccordion:{type:"string"},postFeedActiveTab:{type:"string",default:"content"},_comment_voxel_tab:"VoxelTab attributes for visibility and loop features",visibilityBehavior:{type:"string",default:"show",enum:["show","hide"]},visibilityRules:{type:"array",default:[],items:{type:"object"}},loopEnabled:{type:"boolean",default:!1},loopSource:{type:"string",default:""},loopProperty:{type:"string",default:""},loopLimit:{type:"number"},loopOffset:{type:"number"}},eo={$schema:On,apiVersion:An,name:Wn,version:jn,title:Gn,category:Vn,description:Un,keywords:qn,textdomain:Jn,supports:Xn,editorScript:Kn,viewScript:Qn,render:Yn,attributes:Zn};ko(eo.name,{...eo,attributes:{...eo.attributes,...Lo,...Do},icon:jo,edit:bn,save:Dn});
