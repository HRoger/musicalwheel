import{useState as p}from"react";import{BaseControl as W}from"@wordpress/components";import{MediaUploadCheck as E,MediaUpload as R}from"@wordpress/block-editor";import{__ as o}from"@wordpress/i18n";import{k as H,o as O}from"./TypographyPopup-CAcEJ5NA.js";function U({label:s,value:a=[],onChange:f,help:h,enableDynamicTags:i=!1,dynamicTagValue:r,onDynamicTagChange:g,dynamicTagContext:v="post"}){const[k,m]=p(!1),[C,u]=p(!1),[S,l]=p(!1),I=a&&a.length>0,x=()=>typeof r=="string"&&r.startsWith("@tags()")&&r.includes("@endtags()"),y=()=>{if(!x())return r||"";const e=r?.match(/@tags\(\)(.*?)@endtags\(\)/s);return e?e[1]:r||""},w=e=>e?`@tags()${e}@endtags()`:"",B=()=>{l(!0)},z=()=>{l(!0)},A=()=>{window.confirm(o("Are you sure?","voxel-fse"))&&g?.(void 0)},T=e=>{e&&g?.(w(e)),l(!1)},M=i&&x(),b=e=>{const t=e.map(n=>{const c={};return n.sizes&&Object.entries(n.sizes).forEach(([N,d])=>{c[N]={url:d.url,width:d.width||0,height:d.height||0}}),{id:n.id,url:n.url,alt:n.alt||"",sizes:Object.keys(c).length>0?c:void 0}});f(t)},j=()=>{f([])};return React.createElement(W,{help:h,__nextHasNoMarginBottom:!0},M?React.createElement("div",{className:"edit-voxel-tags",style:{backgroundColor:"rgb(47, 47, 49)",borderRadius:"10px",overflow:"hidden",padding:"12px",marginBottom:"16px"}},React.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"}},React.createElement("span",{style:{color:"rgba(255, 255, 255, 0.6)",fontWeight:500,fontSize:"13px"}},s)),React.createElement("div",{style:{marginBottom:"12px"}},React.createElement("span",{style:{color:"#fff",fontSize:"13px",fontFamily:"inherit",wordBreak:"break-all"}},y())),React.createElement("div",{style:{height:"1px",backgroundColor:"rgba(255, 255, 255, 0.15)",marginBottom:"8px"}}),React.createElement("div",{style:{display:"flex"}},React.createElement("button",{type:"button",onClick:z,style:{flex:1,fontSize:"11px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.3px",color:"#fff",background:"transparent",border:"none",cursor:"pointer",padding:"4px 0",textAlign:"center"}},o("EDIT TAGS","voxel-fse")),React.createElement("button",{type:"button",onClick:A,style:{flex:1,fontSize:"11px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.3px",color:"#fff",background:"transparent",border:"none",cursor:"pointer",padding:"4px 0",textAlign:"center"}},o("DISABLE TAGS","voxel-fse")))):React.createElement(React.Fragment,null,React.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"}},React.createElement("span",{style:{fontWeight:500,fontSize:"13px"}},s),i&&React.createElement(H,{onClick:B})),React.createElement("div",{className:"voxel-fse-gallery-control"},I?React.createElement(React.Fragment,null,React.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",backgroundColor:"#f0f0f0",borderRadius:"4px 4px 0 0",borderBottom:"1px solid #ddd"}},React.createElement("span",{style:{fontSize:"13px",fontWeight:500,color:"#1e1e1e"}},a.length," ",a.length===1?o("Image Selected","voxel-fse"):o("Images Selected","voxel-fse")),React.createElement("button",{type:"button",onClick:j,style:{background:"none",border:"none",padding:"4px",cursor:"pointer",color:"#757575",display:"flex",alignItems:"center",justifyContent:"center"},title:o("Clear all images","voxel-fse"),"aria-label":o("Clear all images","voxel-fse")},React.createElement("i",{className:"eicon eicon-trash-o",style:{fontSize:"16px"}}))),React.createElement(E,null,React.createElement(R,{onSelect:b,allowedTypes:["image"],multiple:!0,gallery:!0,value:a.map(e=>e.id).filter(Boolean),render:({open:e})=>React.createElement("div",{style:{position:"relative",backgroundColor:"#f0f0f0",padding:"12px",borderRadius:"0 0 4px 4px",cursor:"pointer"},onClick:e,onKeyDown:t=>{(t.key==="Enter"||t.key===" ")&&e()},onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),role:"button",tabIndex:0},React.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(50px, 1fr))",gap:"6px"}},a.map((t,n)=>React.createElement("div",{key:t.id||n,style:{aspectRatio:"1",borderRadius:"3px",overflow:"hidden",backgroundColor:"#e0e0e0"}},React.createElement("img",{src:t.url,alt:t.alt||"",style:{width:"100%",height:"100%",objectFit:"cover"}})))),React.createElement("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",borderRadius:"0 0 4px 4px",display:"flex",alignItems:"center",justifyContent:"center",opacity:k?1:0,transition:"opacity 0.2s ease",pointerEvents:"none"}},React.createElement("div",{style:{width:"36px",height:"36px",borderRadius:"50%",backgroundColor:"rgba(255, 255, 255, 0.9)",display:"flex",alignItems:"center",justifyContent:"center"}},React.createElement("i",{className:"eicon eicon-pencil",style:{fontSize:"16px",color:"#1e1e1e"}}))))}))):React.createElement(E,null,React.createElement(R,{onSelect:b,allowedTypes:["image"],multiple:!0,gallery:!0,value:[],render:({open:e})=>React.createElement("div",{style:{backgroundColor:"#f0f0f0",borderRadius:"4px",overflow:"hidden"}},React.createElement("div",{style:{padding:"8px 12px",borderBottom:"1px solid #ddd"}},React.createElement("span",{style:{color:"#757575",fontSize:"13px"}},o("No Images Selected","voxel-fse"))),React.createElement("div",{style:{padding:"12px"}},React.createElement("div",{style:{width:"48px",height:"48px",backgroundColor:C?"#3a4046":"#515962",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"background-color 0.2s ease"},onClick:e,onKeyDown:t=>{(t.key==="Enter"||t.key===" ")&&e()},onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),role:"button",tabIndex:0,"aria-label":o("Add images","voxel-fse")},React.createElement("i",{className:"eicon eicon-plus-circle",style:{fontSize:"14px",color:"#ffffff"}}))))})))),i&&S&&React.createElement(O,{value:y(),onChange:T,label:s||"",context:v,onClose:()=>l(!1),autoOpen:!0}))}export{U as G};
