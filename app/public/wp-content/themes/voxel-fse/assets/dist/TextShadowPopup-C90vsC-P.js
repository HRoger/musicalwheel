import{useState as S,useRef as w,useEffect as T}from"react";import{Button as g,RangeControl as v}from"@wordpress/components";import{__ as c}from"@wordpress/i18n";import{U as B,C as I}from"./TypographyPopup-CAcEJ5NA.js";const W=()=>React.createElement("span",{className:"eicon eicon-edit",style:{fontSize:"14px"}});function j({label:h,attributes:z,setAttributes:l,shadowAttributeName:n}){const[s,R]=S(!1),r=w(null),p={horizontal:0,vertical:0,blur:10,color:"rgba(0, 0, 0, 0.5)"},e=z[n]||{},f=Object.keys(e).length>0,y=()=>{l({[n]:{}})},k=()=>{!s&&!f&&l({[n]:{...p}}),R(!s)},a=w(null);return T(()=>{if(!s||!r.current||!a.current)return;requestAnimationFrame(()=>{if(!r.current||!a.current)return;const i=r.current,u=i.offsetWidth,x=i.offsetHeight,E=window.innerHeight,b=a.current.closest(".interface-interface-skeleton__sidebar")?.getBoundingClientRect();let d,o;if(b){d=b.left-u-12;const m=a.current.getBoundingClientRect();o=m.top-x/2+m.height/2}else{const m=a.current.getBoundingClientRect();d=m.left-u-8,o=m.top}d<8&&(d=8),o+x>E-8&&(o=E-x-8),o<8&&(o=8),i.style.top=`${o}px`,i.style.left=`${d}px`});const C=i=>{const u=window.__voxelDeviceChangeTimestamp||0;Date.now()-u<1e3||r.current&&!r.current.contains(i.target)&&R(!1)};return document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[s]),React.createElement("div",{className:"elementor-control elementor-control-type-text-shadow",style:{position:"relative"}},React.createElement("div",{className:"elementor-control-content",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"}},React.createElement("span",{className:"elementor-control-title",style:{fontSize:"13px",fontWeight:500,textTransform:"capitalize",color:"rgb(30, 30, 30)",margin:0}},h),React.createElement("div",{style:{display:"flex",gap:"4px",alignItems:"center"}},f&&React.createElement(g,{icon:React.createElement(B,null),label:c("Reset","voxel-fse"),onClick:y,variant:"tertiary",size:"small",style:{minWidth:"auto",padding:"4px",width:"24px",height:"24px"}}),React.createElement(g,{ref:a,icon:React.createElement(W,null),size:"small",variant:"tertiary",onClick:k,style:{minWidth:"auto",padding:"4px",width:"24px",height:"24px",backgroundColor:f?"color-mix(in srgb, var(--wp-components-color-accent, var(--wp-admin-theme-color, #3858e9)) 4%, #0000)":void 0,borderRadius:f?"2px":void 0}}))),s&&React.createElement("div",{ref:r,style:{position:"fixed",zIndex:1e6,backgroundColor:"#fff",border:"1px solid #ddd",borderRadius:"4px",padding:"16px",boxShadow:"0 2px 6px rgba(0, 0, 0, 0.15)",width:"280px"}},React.createElement("h3",{style:{margin:"0 0 16px",fontSize:"13px",fontWeight:600}},h),React.createElement(I,{label:c("Color","voxel-fse"),value:e.color||p.color,onChange:t=>{l({[n]:{...e,color:t}})}}),React.createElement(v,{label:c("Horizontal","voxel-fse"),value:e.horizontal??p.horizontal,onChange:t=>{l({[n]:{...e,horizontal:t??0}})},min:-100,max:100,step:1}),React.createElement(v,{label:c("Vertical","voxel-fse"),value:e.vertical??p.vertical,onChange:t=>{l({[n]:{...e,vertical:t??0}})},min:-100,max:100,step:1}),React.createElement(v,{label:c("Blur","voxel-fse"),value:e.blur??p.blur,onChange:t=>{l({[n]:{...e,blur:t??0}})},min:0,max:100,step:1}),React.createElement("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid #eee",display:"flex",justifyContent:"flex-end"}},React.createElement(g,{variant:"link",isDestructive:!0,onClick:y,style:{textDecoration:"none",fontSize:"12px"}},c("Reset Text Shadow","voxel-fse")))))}export{j as T};
