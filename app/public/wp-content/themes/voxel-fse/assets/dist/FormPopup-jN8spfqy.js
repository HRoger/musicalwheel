import e,{useRef as E,useState as X,useCallback as Y,useEffect as v}from"react";import{createPortal as Z}from"react-dom";const K=({isOpen:r,popupId:W,target:f,title:C="",icon:w="",saveLabel:F="Save",clearLabel:z="Clear",clearButton:A=!0,showHeader:B=!0,showFooter:q=!0,onSave:g,onClear:y,onClose:i,children:D,popupClass:M="",minWidth:L})=>{const d=E(null),o=E(null),[P,_]=X({}),N=E(""),m=Y(()=>{if(!o.current||!f||!d.current)return;const t=f,n=d.current,l=o.current,a=document.body.clientWidth,c=t.getBoundingClientRect(),x=t.offsetWidth,u={left:c.left+window.pageXOffset,top:c.top+window.pageYOffset},h=n.getBoundingClientRect(),$=window.getComputedStyle(l),H=parseFloat($.minWidth)||0,I=L||H,O=Math.min(1140,a-40),p=Math.max(c.width,I||O),T=u.left+x/2>a/2+1;let s;T?s=u.left-p+x:s=u.left,s<0&&(s=10),s+p>a&&(s=a-p-10);let R=u.top+c.height;const J=window.innerHeight;c.bottom+h.height>J&&c.top-h.height>=0&&(R=u.top-h.height);const k={top:`${R}px`,left:`${s}px`,width:`${p}px`,position:"absolute"},S=JSON.stringify(k);S!==N.current&&(N.current=S,_(k))},[f,L]);if(v(()=>{if(!r)return;const t=n=>{n.key==="Escape"&&i()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[r,i]),v(()=>{if(!r)return;const t=l=>{const a=l.target;o.current?.contains(a)||i()},n=requestAnimationFrame(()=>{document.addEventListener("mousedown",t)});return()=>{cancelAnimationFrame(n),document.removeEventListener("mousedown",t)}},[r,i]),v(()=>{if(!r)return;requestAnimationFrame(()=>{requestAnimationFrame(()=>{m()})});const t=()=>m();window.addEventListener("scroll",t,!0);const n=()=>m();window.addEventListener("resize",n,!0);let l=null;return o.current&&(l=new ResizeObserver(()=>{requestAnimationFrame(()=>m())}),l.observe(o.current)),()=>{window.removeEventListener("scroll",t,!0),window.removeEventListener("resize",n,!0),l?.disconnect()}},[r,m]),!r)return null;const b=()=>e.createElement("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M14 1.41L12.59 0L7 5.59L1.41 0L0 1.41L5.59 7L0 12.59L1.41 14L7 8.41L12.59 14L14 12.59L8.41 7L14 1.41Z",fill:"currentColor"}));return Z(e.createElement("div",{className:`elementor vx-popup ${M}`.trim()},e.createElement("div",{className:"ts-popup-root elementor-element"},e.createElement("div",{ref:d,className:"ts-form elementor-element",style:P},e.createElement("div",{className:"ts-field-popup-container"},e.createElement("div",{id:W,ref:o,className:"ts-field-popup triggers-blur"},B&&e.createElement("div",{className:"ts-popup-head flexify ts-sticky-top"},e.createElement("div",{className:"ts-popup-name flexify"},w&&e.createElement("span",{dangerouslySetInnerHTML:{__html:w}}),e.createElement("span",null,C)),e.createElement("ul",{className:"flexify simplify-ul"},e.createElement("li",{className:"flexify ts-popup-close"},e.createElement("a",{href:"#",onClick:t=>{t.preventDefault(),i()},className:"ts-icon-btn","aria-label":"Close"},e.createElement(b,null))))),e.createElement("div",{className:"ts-popup-content-wrapper min-scroll"},D),q&&e.createElement("div",{className:"ts-popup-controller"},e.createElement("ul",{className:"flexify simplify-ul"},e.createElement("li",{className:"flexify ts-popup-close"},e.createElement("a",{href:"#",onClick:t=>{t.preventDefault(),i()},className:"ts-icon-btn","aria-label":"Close"},e.createElement(b,null))),A&&y&&e.createElement("li",{className:"flexify"},e.createElement("a",{href:"#",onClick:t=>{t.preventDefault(),y()},className:"ts-btn ts-btn-1"},z)),g&&e.createElement("li",{className:"flexify"},e.createElement("a",{href:"#",onClick:t=>{t.preventDefault(),g()},className:"ts-btn ts-btn-2"},F))))))))),document.body)};export{K as F};
