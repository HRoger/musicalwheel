import{registerBlockType as ye}from"@wordpress/blocks";import t,{useState as I,useRef as Y,useEffect as z,useCallback as q,useMemo as le}from"react";import{useBlockProps as he,InspectorControls as xe}from"@wordpress/block-editor";import{__ as l}from"@wordpress/i18n";import $e from"@wordpress/api-fetch";import{A as de,a as P,R as g,S as x,T as L,C as c,B as O,c as re,b as ne,D as se}from"../TypographyPopup-CAcEJ5NA.js";import{I as Ee}from"../InspectorTabs-Bq2wAh4W.js";import{SelectControl as me}from"@wordpress/components";import"@wordpress/data";/* empty css                            */import"../RepeaterControl-DWypQkdS.js";import{A as K}from"../AdvancedIconControl-CJ_DCTeD.js";import{B as we}from"../BackgroundControl-DZvfeWxy.js";import"../voxelShim-DB_Ue-9R.js";import{g as ve}from"../useAdvancedTabProps-BnJDQbKr.js";import{r as ue}from"../backgroundElements-Ui-iCrLV.js";import{g as j,a as F,b as ke,c as ce,d as _e}from"../css-generators-C6r5Gcv6.js";import{V as Ce}from"../VoxelGridIcon-D5dF5acW.js";import"react-dom";import"../GalleryUploadControl-DMafjsl2.js";import"../generateAdvancedStyles-CRpLcHXt.js";import"../generateVoxelStyles-oZeaeuKH.js";const G=()=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor"},t.createElement("path",{d:"M3 12H5V21H3V12ZM19 8H21V21H19V8ZM11 2H13V21H11V2Z"})),be=()=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},t.createElement("path",{d:"M10.8284 12.0007L15.7782 16.9504L14.364 18.3646L8 12.0007L14.364 5.63672L15.7782 7.05093L10.8284 12.0007Z"})),fe=()=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},t.createElement("path",{d:"M13.1714 12.0007L8.22168 7.05093L9.63589 5.63672L15.9999 12.0007L9.63589 18.3646L8.22168 16.9504L13.1714 12.0007Z"}));function M(e){return!e||!e.value?null:e.library==="icon"?t.createElement("i",{className:e.value}):e.library==="svg"?t.createElement("img",{src:e.value,alt:"",className:"voxel-fse-icon-svg",style:{width:"1em",height:"1em"}}):null}function ie(e,r="error"){const a=window,o=a.Voxel_Config?.l10n?.ajaxError||"An error occurred",n=e||o;a.Voxel?.alert?a.Voxel.alert(n,r):r==="error"?console.error("[SalesChart]",n):console.log("[SalesChart]",n)}function Se({attributes:e,config:r,isLoading:a,error:o}){const[n,_]=I(e.ts_active_chart),[d,b]=I(r?.charts??null),[$,k]=I(null),[m,C]=I(!1),E=Y(null),f=Y(null),y=Y({isDown:!1,startX:0,scrollLeft:0});z(()=>{r?.charts&&b(r.charts)},[r]),z(()=>{_(e.ts_active_chart)},[e.ts_active_chart]),z(()=>{o&&ie(o,"error")},[o]);const i=d?d[n]:null,N=q((s,p)=>{if(k(p),E.current){const h=s.currentTarget.getBoundingClientRect();E.current.style.left=`${h.left+h.width+10}px`,E.current.style.top=`${h.top}px`}},[]),w=q(()=>{k(null)},[]),T=q(async s=>{if(!(!i||m)){C(!0);try{const p=window.wpApiSettings?.root||"/wp-json/",h=new URLSearchParams({chart:n,date:i.meta.state.date??"",direction:s}),v=await fetch(`${p}voxel-fse/v1/sales-chart/load-more?${h.toString()}`);if(!v.ok)throw new Error(`HTTP ${v.status}`);const B=await v.json();B&&d&&b({...d,[n]:B})}catch(p){const h=p instanceof Error?p.message:void 0;ie(h,"error")}finally{C(!1)}}},[n,i,m,d]);if(z(()=>{const s=f.current;if(!s)return;const p=y.current,h=R=>{p.isDown=!0,p.startX=R.pageX-s.offsetLeft,p.scrollLeft=s.scrollLeft},v=()=>{p.isDown=!1},B=()=>{p.isDown=!1},W=R=>{if(!p.isDown)return;R.preventDefault();const V=R.pageX-s.offsetLeft-p.startX;s.scrollLeft=p.scrollLeft-V};return s.addEventListener("mousedown",h),s.addEventListener("mouseup",v),s.addEventListener("mouseleave",B),s.addEventListener("mousemove",W),()=>{s.removeEventListener("mousedown",h),s.removeEventListener("mouseup",v),s.removeEventListener("mouseleave",B),s.removeEventListener("mousemove",W)}},[n]),a)return React.createElement("div",{className:"ts-vendor-stats"},React.createElement("div",{className:"ts-no-posts"},React.createElement(G,null),React.createElement("p",null,"Loading chart data...")));const S={activeChart:e.ts_active_chart,chartIcon:e.chart_icon,chevronRight:e.ts_chevron_right,chevronLeft:e.ts_chevron_left};return React.createElement(React.Fragment,null,React.createElement("script",{type:"application/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(S)}}),React.createElement("div",{className:"ts-vendor-stats"},React.createElement("ul",{className:"ts-generic-tabs simplify-ul flexify bar-chart-tabs"},React.createElement("li",{className:n==="this-week"?"ts-tab-active":""},React.createElement("a",{href:"#",onClick:s=>{s.preventDefault(),_("this-week")}},"Week")),React.createElement("li",{className:n==="this-month"?"ts-tab-active":""},React.createElement("a",{href:"#",onClick:s=>{s.preventDefault(),_("this-month")}},"Month")),React.createElement("li",{className:n==="this-year"?"ts-tab-active":""},React.createElement("a",{href:"#",onClick:s=>{s.preventDefault(),_("this-year")}},"Year")),React.createElement("li",{className:n==="all-time"?"ts-tab-active":""},React.createElement("a",{href:"#",onClick:s=>{s.preventDefault(),_("all-time")}},"All time"))),i&&React.createElement("div",{className:`ts-chart chart-${n}${m?" vx-pending":""}`,key:n},i.meta.state.has_activity?React.createElement("div",{className:"chart-contain"},React.createElement("div",{className:"chart-content"},React.createElement("div",{className:"bar-item-con bar-values"},i.steps.map((s,p)=>React.createElement("span",{key:p},s)))),React.createElement("div",{className:"chart-content min-scroll min-scroll-h",ref:f},i.items.map((s,p)=>React.createElement("div",{key:p,className:"bar-item-con"},React.createElement("div",{className:"bi-hold"},React.createElement("div",{className:"bar-item bar-animate",style:{height:`${s.percent}%`},onMouseOver:h=>N(h,{label:s.label,earnings:s.earnings,orders:s.orders}),onMouseLeave:w})),React.createElement("span",null,s.label)))),React.createElement("ul",{ref:E,className:`flexify simplify-ul bar-item-data${$?" active":""}`},React.createElement("li",null,React.createElement("small",null,"Value"),$?.earnings??""),React.createElement("li",null,React.createElement("small",null,"Orders"),$?.orders??""))):React.createElement("div",{className:"ts-no-posts"},M(e.chart_icon)||React.createElement(G,null),React.createElement("p",null,"No activity")),React.createElement("div",{className:"ts-chart-nav"},React.createElement("p",null,i.meta.label),React.createElement("a",{href:"#",onClick:s=>{s.preventDefault(),i.meta.state.has_prev&&T("prev")},className:`ts-icon-btn${i.meta.state.has_prev?"":" vx-disabled"}`},M(e.ts_chevron_left)||React.createElement(be,null)),React.createElement("a",{href:"#",onClick:s=>{s.preventDefault(),i.meta.state.has_next&&T("next")},className:`ts-icon-btn${i.meta.state.has_next?"":" vx-disabled"}`},M(e.ts_chevron_right)||React.createElement(fe,null)))),!i&&React.createElement("div",{className:"ts-chart"},React.createElement("div",{className:"ts-no-posts"},M(e.chart_icon)||React.createElement(G,null),React.createElement("p",null,"No chart data available")))))}function Be({attributes:e,setAttributes:r}){return t.createElement(de,{attributes:e,setAttributes:r,stateAttribute:"contentTabOpenPanel",defaultPanel:"chart"},t.createElement(P,{id:"chart",title:l("Chart","voxel-fse")},t.createElement(me,{label:l("Default view","voxel-fse"),value:e.ts_active_chart,options:[{label:l("Week","voxel-fse"),value:"this-week"},{label:l("Month","voxel-fse"),value:"this-month"},{label:l("Year","voxel-fse"),value:"this-year"},{label:l("All time","voxel-fse"),value:"all-time"}],onChange:a=>r({ts_active_chart:a})})),t.createElement(P,{id:"icons",title:l("Icons","voxel-fse")},t.createElement(K,{label:l("Icon","voxel-fse"),value:e.chart_icon,onChange:a=>r({chart_icon:a}),supportsDynamicTags:!0}),t.createElement(K,{label:l("Right chevron","voxel-fse"),value:e.ts_chevron_right,onChange:a=>r({ts_chevron_right:a}),supportsDynamicTags:!0}),t.createElement(K,{label:l("Left chevron","voxel-fse"),value:e.ts_chevron_left,onChange:a=>r({ts_chevron_left:a}),supportsDynamicTags:!0})))}function Ne({attributes:e,setAttributes:r}){return t.createElement(de,{attributes:e,setAttributes:r,stateAttribute:"styleTabOpenPanel",defaultPanel:"chart"},t.createElement(P,{id:"chart",title:l("Chart","voxel-fse")},t.createElement(g,{label:l("Content height","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_chart_height",min:0,max:1e3,availableUnits:["px"]}),t.createElement(x,{label:l("Axis","voxel-fse")}),t.createElement(L,{label:l("Typography","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"axis_typo"}),t.createElement(c,{label:l("Text color","voxel-fse"),value:e.ts_axis_typo_col,onChange:a=>r({ts_axis_typo_col:a})}),t.createElement(g,{label:l("Vertical axis width","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"vertical_axis_width",min:50,max:200,availableUnits:["px"]}),t.createElement(x,{label:l("Chart lines","voxel-fse")}),t.createElement(O,{label:l("Border","voxel-fse"),value:{borderType:e.chart_line_borderType||"",borderWidth:e.chart_line_borderWidth||{},borderColor:e.chart_line_borderColor||""},onChange:a=>{const o={};a.borderType!==void 0&&(o.chart_line_borderType=a.borderType),a.borderWidth!==void 0&&(o.chart_line_borderWidth=a.borderWidth),a.borderColor!==void 0&&(o.chart_line_borderColor=a.borderColor),r(o)},hideRadius:!0}),t.createElement(x,{label:l("Chart Bars","voxel-fse")}),t.createElement(g,{label:l("Bar gap","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"chart_col_gap",min:0,max:100,availableUnits:["px"]}),t.createElement(g,{label:l("Bar width","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"bar_width",min:0,max:100,availableUnits:["px"]}),t.createElement(g,{label:l("Bar radius","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"bar_radius",min:0,max:100,availableUnits:["px"]}),t.createElement(we,{attributes:e,setAttributes:r,showHoverState:!1,showImageControls:!1,showGradientMode:!0}),t.createElement(c,{label:l("Background color (Hover)","voxel-fse"),value:e.bar_bg_hover,onChange:a=>r({bar_bg_hover:a})}),t.createElement(re,{label:l("Box Shadow","voxel-fse"),attributes:e,setAttributes:r,shadowAttributeName:"bar_sh_shadow"}),t.createElement(x,{label:l("Bar popup","voxel-fse")}),t.createElement(c,{label:l("Background color","voxel-fse"),value:e.bar_pop_bg,onChange:a=>r({bar_pop_bg:a})}),t.createElement(O,{label:l("Border","voxel-fse"),value:{borderType:e.bar_pop_borderType||"",borderWidth:e.bar_pop_borderWidth||{},borderColor:e.bar_pop_borderColor||""},onChange:a=>{const o={};a.borderType!==void 0&&(o.bar_pop_borderType=a.borderType),a.borderWidth!==void 0&&(o.bar_pop_borderWidth=a.borderWidth),a.borderColor!==void 0&&(o.bar_pop_borderColor=a.borderColor),r(o)},hideRadius:!0}),t.createElement(g,{label:l("Bar radius","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"bar_pop_radius",min:0,max:100,availableUnits:["px"]}),t.createElement(re,{label:l("Box Shadow","voxel-fse"),attributes:e,setAttributes:r,shadowAttributeName:"bar_pop_shadow"}),t.createElement(x,{label:l("Bar popup: Value","voxel-fse")}),t.createElement(L,{label:l("Typography","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_primary_typo"}),t.createElement(c,{label:l("Color","voxel-fse"),value:e.ts_primary_color,onChange:a=>r({ts_primary_color:a})}),t.createElement(x,{label:l("Bar popup: Label","voxel-fse")}),t.createElement(L,{label:l("Typography","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_secondary_typo"}),t.createElement(c,{label:l("Color","voxel-fse"),value:e.ts_secondary_color,onChange:a=>r({ts_secondary_color:a})})),t.createElement(P,{id:"tabs",title:l("Tabs","voxel-fse")},t.createElement(ne,{attributeName:"tabsState",attributes:e,setAttributes:r,tabs:[{name:"normal",title:l("Normal","voxel-fse")},{name:"hover",title:l("Hover","voxel-fse")}]},a=>t.createElement(t.Fragment,null,a.name==="normal"&&t.createElement(t.Fragment,null,t.createElement(x,{label:l("Timeline tabs","voxel-fse")}),t.createElement(me,{label:l("Justify","voxel-fse"),value:e.ts_tabs_justify||"left",options:[{label:l("Left","voxel-fse"),value:"left"},{label:l("Center","voxel-fse"),value:"center"},{label:l("Right","voxel-fse"),value:"flex-end"},{label:l("Space between","voxel-fse"),value:"space-between"},{label:l("Space around","voxel-fse"),value:"space-around"}],onChange:o=>r({ts_tabs_justify:o}),__nextHasNoMarginBottom:!0}),t.createElement(se,{label:l("Padding","voxel-fse"),values:e.ts_tabs_padding||{},onChange:o=>r({ts_tabs_padding:o})}),t.createElement(se,{label:l("Margin","voxel-fse"),values:e.ts_tabs_margin||{},onChange:o=>r({ts_tabs_margin:o})}),t.createElement(L,{label:l("Tab typography","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_tabs_text"}),t.createElement(L,{label:l("Active tab typography","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_tabs_text_active"}),t.createElement(c,{label:l("Text color","voxel-fse"),value:e.ts_tabs_text_color,onChange:o=>r({ts_tabs_text_color:o})}),t.createElement(c,{label:l("Active text color","voxel-fse"),value:e.ts_active_text_color,onChange:o=>r({ts_active_text_color:o})}),t.createElement(c,{label:l("Background","voxel-fse"),value:e.ts_tabs_bg_color,onChange:o=>r({ts_tabs_bg_color:o})}),t.createElement(c,{label:l("Active background","voxel-fse"),value:e.ts_tabs_bg_active_color,onChange:o=>r({ts_tabs_bg_active_color:o})}),t.createElement(O,{label:l("Border","voxel-fse"),value:{borderType:e.ts_tabs_borderType||"",borderWidth:e.ts_tabs_borderWidth||{},borderColor:e.ts_tabs_borderColor||""},onChange:o=>{const n={};o.borderType!==void 0&&(n.ts_tabs_borderType=o.borderType),o.borderWidth!==void 0&&(n.ts_tabs_borderWidth=o.borderWidth),o.borderColor!==void 0&&(n.ts_tabs_borderColor=o.borderColor),r(n)},hideRadius:!0}),t.createElement(c,{label:l("Active border color","voxel-fse"),value:e.ts_tabs_border_active,onChange:o=>r({ts_tabs_border_active:o})}),t.createElement(g,{label:l("Border radius","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_tabs_radius",min:0,max:100,availableUnits:["px"]})),a.name==="hover"&&t.createElement(t.Fragment,null,t.createElement(x,{label:l("Timeline tabs","voxel-fse")}),t.createElement(c,{label:l("Text color","voxel-fse"),value:e.ts_tabs_text_color_h,onChange:o=>r({ts_tabs_text_color_h:o})}),t.createElement(c,{label:l("Active text color","voxel-fse"),value:e.ts_tabs_active_text_color_h,onChange:o=>r({ts_tabs_active_text_color_h:o})}),t.createElement(c,{label:l("Border color","voxel-fse"),value:e.ts_tabs_border_color_h,onChange:o=>r({ts_tabs_border_color_h:o})}),t.createElement(c,{label:l("Active border color","voxel-fse"),value:e.ts_tabs_border_h_active,onChange:o=>r({ts_tabs_border_h_active:o})}),t.createElement(c,{label:l("Background","voxel-fse"),value:e.ts_tabs_bg_color_h,onChange:o=>r({ts_tabs_bg_color_h:o})}),t.createElement(c,{label:l("Active background","voxel-fse"),value:e.ts_bg_active_color_h,onChange:o=>r({ts_bg_active_color_h:o})}))))),t.createElement(P,{id:"week-buttons",title:l("Next/Prev week buttons","voxel-fse")},t.createElement(ne,{attributeName:"weekButtonsState",attributes:e,setAttributes:r,tabs:[{name:"normal",title:l("Normal","voxel-fse")},{name:"hover",title:l("Hover","voxel-fse")}]},a=>t.createElement(t.Fragment,null,a.name==="normal"&&t.createElement(t.Fragment,null,t.createElement(x,{label:l("Range","voxel-fse")}),t.createElement(L,{label:l("Typography","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"week_range_typo"}),t.createElement(c,{label:l("Text color","voxel-fse"),value:e.week_range_col,onChange:o=>r({week_range_col:o})}),t.createElement(x,{label:l("Week buttons","voxel-fse")}),t.createElement(c,{label:l("Button icon color","voxel-fse"),value:e.ts_week_btn_color,onChange:o=>r({ts_week_btn_color:o})}),t.createElement(g,{label:l("Button icon size","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_week_btn_icon_size",min:0,max:100,availableUnits:["px","%"]}),t.createElement(c,{label:l("Button background","voxel-fse"),value:e.ts_week_btn_bg,onChange:o=>r({ts_week_btn_bg:o})}),t.createElement(O,{label:l("Button border","voxel-fse"),value:{borderType:e.ts_week_btn_borderType||"",borderWidth:e.ts_week_btn_borderWidth||{},borderColor:e.ts_week_btn_borderColor||""},onChange:o=>{const n={};o.borderType!==void 0&&(n.ts_week_btn_borderType=o.borderType),o.borderWidth!==void 0&&(n.ts_week_btn_borderWidth=o.borderWidth),o.borderColor!==void 0&&(n.ts_week_btn_borderColor=o.borderColor),r(n)},hideRadius:!0}),t.createElement(g,{label:l("Button border radius","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_week_btn_radius",min:0,max:100,availableUnits:["px","%"]}),t.createElement(g,{label:l("Button size","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_week_btn_size",min:0,max:100,availableUnits:["px","%"]}),t.createElement(x,{label:l("Icons","voxel-fse")})),a.name==="hover"&&t.createElement(t.Fragment,null,t.createElement(c,{label:l("Button icon color","voxel-fse"),value:e.ts_week_btn_h,onChange:o=>r({ts_week_btn_h:o})}),t.createElement(c,{label:l("Button background color","voxel-fse"),value:e.ts_week_btn_bg_h,onChange:o=>r({ts_week_btn_bg_h:o})}),t.createElement(c,{label:l("Button border color","voxel-fse"),value:e.ts_week_border_c_h,onChange:o=>r({ts_week_border_c_h:o})}))))),t.createElement(P,{id:"no-activity",title:l("No activity","voxel-fse")},t.createElement(g,{label:l("Content gap","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_nopost_content_Gap",min:0,max:100,availableUnits:["px"]}),t.createElement(g,{label:l("Icon size","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_nopost_ico_size",min:0,max:100,availableUnits:["px"]}),t.createElement(c,{label:l("Icon color","voxel-fse"),value:e.ts_nopost_ico_col,onChange:a=>r({ts_nopost_ico_col:a})}),t.createElement(L,{label:l("Typography","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_nopost_typo"}),t.createElement(c,{label:l("Text color","voxel-fse"),value:e.ts_nopost_typo_col,onChange:a=>r({ts_nopost_typo_col:a})})))}function ge(e,r){const a=`.voxel-fse-sales-chart-${r}`,o=[],n=[],_=[];e.ts_chart_height!==void 0&&o.push(`${a} .ts-chart .ts-no-posts, ${a} .ts-chart .chart-content { height: ${e.ts_chart_height}px; }`),e.ts_chart_height_tablet!==void 0&&n.push(`${a} .ts-chart .ts-no-posts, ${a} .ts-chart .chart-content { height: ${e.ts_chart_height_tablet}px; }`),e.ts_chart_height_mobile!==void 0&&_.push(`${a} .ts-chart .ts-no-posts, ${a} .ts-chart .chart-content { height: ${e.ts_chart_height_mobile}px; }`);const d=`${a} .chart-content span`,b=j(e.axis_typo);b.desktop&&o.push(`${d} { ${b.desktop} }`),b.tablet&&n.push(`${d} { ${b.tablet} }`),b.mobile&&_.push(`${d} { ${b.mobile} }`),e.ts_axis_typo_col&&o.push(`${d} { color: ${e.ts_axis_typo_col}; }`),e.vertical_axis_width!==void 0&&o.push(`${a} .chart-content.min-scroll { margin-left: ${e.vertical_axis_width}px; }`),e.vertical_axis_width_tablet!==void 0&&n.push(`${a} .chart-content.min-scroll { margin-left: ${e.vertical_axis_width_tablet}px; }`),e.vertical_axis_width_mobile!==void 0&&_.push(`${a} .chart-content.min-scroll { margin-left: ${e.vertical_axis_width_mobile}px; }`);const $=`${a} .chart-content .bar-values span`,k=F(e,"chart_line_border");k.desktop&&o.push(`${$} { ${k.desktop} }`),e.chart_col_gap!==void 0&&o.push(`${a} .chart-content { grid-gap: ${e.chart_col_gap}px; }`),e.chart_col_gap_tablet!==void 0&&n.push(`${a} .chart-content { grid-gap: ${e.chart_col_gap_tablet}px; }`),e.chart_col_gap_mobile!==void 0&&_.push(`${a} .chart-content { grid-gap: ${e.chart_col_gap_mobile}px; }`),e.bar_width!==void 0&&o.push(`${a} .chart-content .bar-item { width: ${e.bar_width}px; }`),e.bar_width_tablet!==void 0&&n.push(`${a} .chart-content .bar-item { width: ${e.bar_width_tablet}px; }`),e.bar_width_mobile!==void 0&&_.push(`${a} .chart-content .bar-item { width: ${e.bar_width_mobile}px; }`),e.bar_radius!==void 0&&o.push(`${a} .chart-content .bar-item { border-radius: ${e.bar_radius}px; }`),e.bar_radius_tablet!==void 0&&n.push(`${a} .chart-content .bar-item { border-radius: ${e.bar_radius_tablet}px; }`),e.bar_radius_mobile!==void 0&&_.push(`${a} .chart-content .bar-item { border-radius: ${e.bar_radius_mobile}px; }`);const m=`${a} .chart-content .bar-item`,C=ke(e.bar_bg);C&&o.push(`${m} { ${C} }`),e.bar_bg_hover&&o.push(`${m}:hover { background-color: ${e.bar_bg_hover}; }`);const E=ce(e.bar_sh_shadow);E&&o.push(`${m} { box-shadow: ${E}; }`);const f=`${a} .bar-item-data`;e.bar_pop_bg&&o.push(`${f} { background-color: ${e.bar_pop_bg}; }`);const y=F(e,"bar_pop_border");y.desktop&&o.push(`${f} { ${y.desktop} }`),e.bar_pop_radius!==void 0&&o.push(`${f} { border-radius: ${e.bar_pop_radius}px; }`),e.bar_pop_radius_tablet!==void 0&&n.push(`${f} { border-radius: ${e.bar_pop_radius_tablet}px; }`),e.bar_pop_radius_mobile!==void 0&&_.push(`${f} { border-radius: ${e.bar_pop_radius_mobile}px; }`);const i=ce(e.bar_pop_shadow);i&&o.push(`${f} { box-shadow: ${i}; }`);const N=`${f} li`,w=j(e.ts_primary_typo);w.desktop&&o.push(`${N} { ${w.desktop} }`),w.tablet&&n.push(`${N} { ${w.tablet} }`),w.mobile&&_.push(`${N} { ${w.mobile} }`),e.ts_primary_color&&o.push(`${N} { color: ${e.ts_primary_color}; }`);const T=`${f} li small`,S=j(e.ts_secondary_typo);S.desktop&&o.push(`${T} { ${S.desktop} }`),S.tablet&&n.push(`${T} { ${S.tablet} }`),S.mobile&&_.push(`${T} { ${S.mobile} }`),e.ts_secondary_color&&o.push(`${T} { color: ${e.ts_secondary_color}; }`);const s=`${a} .ts-generic-tabs`;e.ts_tabs_justify&&o.push(`${s} { justify-content: ${e.ts_tabs_justify}; }`);const p=`${a} .ts-generic-tabs li`,h=_e(e,"ts_tabs_margin","margin");h.desktop&&o.push(`${p} { ${h.desktop} }`);const v=`${a} .ts-generic-tabs li a`,B=_e(e,"ts_tabs_padding");B.desktop&&o.push(`${v} { ${B.desktop} }`);const W=j(e.ts_tabs_text);W.desktop&&o.push(`${v} { ${W.desktop} }`),e.ts_tabs_text_color&&o.push(`${v} { color: ${e.ts_tabs_text_color}; }`),e.ts_tabs_bg_color&&o.push(`${v} { background-color: ${e.ts_tabs_bg_color}; }`);const R=F(e,"ts_tabs_border");R.desktop&&o.push(`${v} { ${R.desktop} }`),e.ts_tabs_radius!==void 0&&o.push(`${v} { border-radius: ${e.ts_tabs_radius}px; }`);const D=`${a} .ts-generic-tabs li.ts-tab-active a`,V=j(e.ts_tabs_text_active);V.desktop&&o.push(`${D} { ${V.desktop} }`),e.ts_active_text_color&&o.push(`${D} { color: ${e.ts_active_text_color}; }`),e.ts_tabs_bg_active_color&&o.push(`${D} { background-color: ${e.ts_tabs_bg_active_color}; }`),e.ts_tabs_border_active&&o.push(`${D} { border-color: ${e.ts_tabs_border_active}; }`);const X=`${v}:hover`;e.ts_tabs_text_color_h&&o.push(`${X} { color: ${e.ts_tabs_text_color_h}; }`),e.ts_tabs_border_color_h&&o.push(`${X} { border-color: ${e.ts_tabs_border_color_h}; }`),e.ts_tabs_bg_color_h&&o.push(`${X} { background-color: ${e.ts_tabs_bg_color_h}; }`);const Z=`${a} .ts-generic-tabs li.ts-tab-active a:hover`;e.ts_tabs_active_text_color_h&&o.push(`${Z} { color: ${e.ts_tabs_active_text_color_h}; }`),e.ts_tabs_border_h_active&&o.push(`${Z} { border-color: ${e.ts_tabs_border_h_active}; }`),e.ts_bg_active_color_h&&o.push(`${Z} { background-color: ${e.ts_bg_active_color_h}; }`);const Q=`${a} .ts-chart-nav p`,A=j(e.week_range_typo);A.desktop&&o.push(`${Q} { ${A.desktop} }`),e.week_range_col&&o.push(`${Q} { color: ${e.week_range_col}; }`);const u=`${a} .ts-chart-nav .ts-icon-btn`;e.ts_week_btn_color&&(o.push(`${u} i { color: ${e.ts_week_btn_color}; }`),o.push(`${u} svg { fill: ${e.ts_week_btn_color}; }`)),e.ts_week_btn_icon_size!==void 0&&(o.push(`${u} i { font-size: ${e.ts_week_btn_icon_size}px; }`),o.push(`${u} svg { width: ${e.ts_week_btn_icon_size}px; height: ${e.ts_week_btn_icon_size}px; }`)),e.ts_week_btn_size!==void 0&&o.push(`${u} { width: ${e.ts_week_btn_size}px; height: ${e.ts_week_btn_size}px; min-width: ${e.ts_week_btn_size}px; }`),e.ts_week_btn_bg&&o.push(`${u} { background-color: ${e.ts_week_btn_bg}; }`);const ee=F(e,"ts_week_btn_border");ee.desktop&&o.push(`${u} { ${ee.desktop} }`),e.ts_week_btn_radius!==void 0&&o.push(`${u} { border-radius: ${e.ts_week_btn_radius}px; }`);const H=`${u}:hover`;e.ts_week_btn_h&&(o.push(`${H} i { color: ${e.ts_week_btn_h}; }`),o.push(`${H} svg { fill: ${e.ts_week_btn_h}; }`)),e.ts_week_btn_bg_h&&o.push(`${H} { background-color: ${e.ts_week_btn_bg_h}; }`),e.ts_week_border_c_h&&o.push(`${H} { border-color: ${e.ts_week_border_c_h}; }`);const U=`${a} .ts-no-posts`;e.ts_nopost_content_Gap!==void 0&&o.push(`${U} { grid-gap: ${e.ts_nopost_content_Gap}px; }`);const oe=`${U} i, ${U} svg`;e.ts_nopost_ico_size!==void 0&&o.push(`${oe} { font-size: ${e.ts_nopost_ico_size}px; width: ${e.ts_nopost_ico_size}px; height: ${e.ts_nopost_ico_size}px; }`),e.ts_nopost_ico_col&&o.push(`${oe} { color: ${e.ts_nopost_ico_col}; fill: ${e.ts_nopost_ico_col}; }`);const te=`${U} p`,ae=j(e.ts_nopost_typo);ae.desktop&&o.push(`${te} { ${ae.desktop} }`),e.ts_nopost_typo_col&&o.push(`${te} { color: ${e.ts_nopost_typo_col}; }`);let J=o.join(`
`);return n.length>0&&(J+=`
@media (max-width: 1024px) {
${n.join(`
`)}
}`),_.length>0&&(J+=`
@media (max-width: 767px) {
${_.join(`
`)}
}`),J}function Te({attributes:e,setAttributes:r,clientId:a}){const o=e.blockId||a;z(()=>{e.blockId||r({blockId:a})},[e.blockId,a,r]),z(()=>{const y="voxel-bar-chart-css";if(!document.getElementById(y)){const i=document.createElement("link");i.id=y,i.rel="stylesheet";const w=(window.Voxel_Config?.site_url||window.location.origin).replace(/\/$/,"");i.href=`${w}/wp-content/themes/voxel/assets/dist/bar-chart.css?ver=1.7.5.2`,document.head.appendChild(i)}},[]);const[n,_]=I(null),[d,b]=I(!0),[$,k]=I(null),m=ve(e,{blockId:o,baseClass:"voxel-fse-sales-chart",selectorPrefix:"voxel-fse-sales-chart"}),C=le(()=>ge(e,o),[e,o]),E=le(()=>[m.responsiveCSS,C].filter(Boolean).join(`
`),[m.responsiveCSS,C]),f=he({id:m.elementId,className:m.className,style:m.styles,...m.customAttrs});return z(()=>{b(!0),k(null),$e({path:"/voxel-fse/v1/sales-chart"}).then(y=>{_(y),b(!1)}).catch(y=>{k(y.message||l("Failed to load chart data","voxel-fse")),b(!1)})},[]),t.createElement(t.Fragment,null,t.createElement(xe,null,t.createElement(Ee,{tabs:[{id:"content",label:l("Content","voxel-fse"),icon:"",render:()=>t.createElement(Be,{attributes:e,setAttributes:r})},{id:"style",label:l("Style","voxel-fse"),icon:"",render:()=>t.createElement(Ne,{attributes:e,setAttributes:r})}],includeAdvancedTab:!0,includeVoxelTab:!0,attributes:e,setAttributes:r,defaultTab:"content"})),t.createElement("div",{...f},E&&t.createElement("style",{dangerouslySetInnerHTML:{__html:E}}),$&&t.createElement("div",{className:"voxel-fse-error"},t.createElement("p",null,$)),!$&&t.createElement(Se,{attributes:e,config:n,isLoading:d,error:$})))}function Re({attributes:e}){const r=e.blockId||"sales-chart",a=ve(e,{blockId:r,baseClass:"voxel-fse-sales-chart",selectorPrefix:"voxel-fse-sales-chart"}),o=ge(e,r),n=[a.responsiveCSS,o].filter(Boolean).join(`
`),_=he.save({id:a.elementId,className:a.className,style:a.styles,"data-visibility-behavior":e.visibilityBehavior||void 0,"data-visibility-rules":e.visibilityRules?.length?JSON.stringify(e.visibilityRules):void 0,"data-loop-source":e.loopSource||void 0,"data-loop-limit":e.loopLimit||void 0,"data-loop-offset":e.loopOffset||void 0,...a.customAttrs}),d={activeChart:e.ts_active_chart,chartIcon:e.chart_icon,chevronRight:e.ts_chevron_right,chevronLeft:e.ts_chevron_left};return t.createElement("div",{..._},n&&t.createElement("style",{dangerouslySetInnerHTML:{__html:n}}),ue(e,!1,void 0,void 0,a.uniqueSelector),t.createElement("script",{type:"application/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(d)}}),t.createElement("div",{className:"ts-vendor-stats"},t.createElement("ul",{className:"ts-generic-tabs simplify-ul flexify bar-chart-tabs"},t.createElement("li",{className:e.ts_active_chart==="this-week"?"ts-tab-active":""},t.createElement("a",{href:"#"},"Week")),t.createElement("li",{className:e.ts_active_chart==="this-month"?"ts-tab-active":""},t.createElement("a",{href:"#"},"Month")),t.createElement("li",{className:e.ts_active_chart==="this-year"?"ts-tab-active":""},t.createElement("a",{href:"#"},"Year")),t.createElement("li",{className:e.ts_active_chart==="all-time"?"ts-tab-active":""},t.createElement("a",{href:"#"},"All time"))),t.createElement("div",{className:`ts-chart chart-${e.ts_active_chart}`},t.createElement("div",{className:"ts-no-posts"},M(e.chart_icon)||t.createElement(G,null),t.createElement("p",null,"Loading chart...")),t.createElement("div",{className:"ts-chart-nav"},t.createElement("p",null,"Loading..."),t.createElement("a",{href:"#",className:"ts-icon-btn vx-disabled"},M(e.ts_chevron_left)||t.createElement(be,null)),t.createElement("a",{href:"#",className:"ts-icon-btn vx-disabled"},M(e.ts_chevron_right)||t.createElement(fe,null))))))}const Le="https://schemas.wp.org/trunk/block.json",je=3,Ie="voxel-fse/sales-chart",ze="1.0.0",Me="Sales Chart (VX)",Pe="voxel-fse",We="Display vendor sales statistics with bar chart visualization. Requires Stripe Connect.",De=["chart","sales","bar","statistics","stripe","vendor"],Ve="voxel-fse",He={html:!1,anchor:!0,align:["wide","full"],className:!0,customClassName:!0},Ue={blockId:{type:"string",default:""},contentTabOpenPanel:{type:"string",default:"chart"},styleTabOpenPanel:{type:"string",default:"chart"},ts_active_chart:{type:"string",default:"this-week"},chart_icon:{type:"object",default:{library:"",value:""}},ts_chevron_right:{type:"object",default:{library:"",value:""}},ts_chevron_left:{type:"object",default:{library:"",value:""}},ts_chart_height:{type:"number"},ts_chart_height_tablet:{type:"number"},ts_chart_height_mobile:{type:"number"},ts_axis_typo_col:{type:"string"},vertical_axis_width:{type:"number"},vertical_axis_width_tablet:{type:"number"},vertical_axis_width_mobile:{type:"number"},chart_col_gap:{type:"number"},chart_col_gap_tablet:{type:"number"},chart_col_gap_mobile:{type:"number"},bar_width:{type:"number"},bar_width_tablet:{type:"number"},bar_width_mobile:{type:"number"},bar_radius:{type:"number"},bar_radius_tablet:{type:"number"},bar_radius_mobile:{type:"number"},bar_bg_hover:{type:"string"},bar_pop_bg:{type:"string"},bar_pop_radius:{type:"number"},bar_pop_radius_tablet:{type:"number"},bar_pop_radius_mobile:{type:"number"},ts_primary_color:{type:"string"},ts_secondary_color:{type:"string"},chart_line_borderType:{type:"string"},chart_line_borderWidth:{type:"object"},chart_line_borderColor:{type:"string"},bar_pop_borderType:{type:"string"},bar_pop_borderWidth:{type:"object"},bar_pop_borderColor:{type:"string"},axis_typo:{type:"object"},ts_primary_typo:{type:"object"},ts_secondary_typo:{type:"object"},bar_sh_shadow:{type:"object"},bar_pop_shadow:{type:"object"},bar_bg:{type:"object"},tabsState:{type:"string",default:"normal"},ts_tabs_justify:{type:"string",default:"left"},ts_tabs_padding:{type:"object"},ts_tabs_margin:{type:"object"},ts_tabs_text_color:{type:"string"},ts_active_text_color:{type:"string"},ts_tabs_bg_color:{type:"string"},ts_tabs_bg_active_color:{type:"string"},ts_tabs_border_active:{type:"string"},ts_tabs_radius:{type:"number"},ts_tabs_text_color_h:{type:"string"},ts_tabs_active_text_color_h:{type:"string"},ts_tabs_border_color_h:{type:"string"},ts_tabs_border_h_active:{type:"string"},ts_tabs_bg_color_h:{type:"string"},ts_bg_active_color_h:{type:"string"},ts_tabs_borderType:{type:"string"},ts_tabs_borderWidth:{type:"object"},ts_tabs_borderColor:{type:"string"},ts_tabs_text:{type:"object"},ts_tabs_text_active:{type:"object"},weekButtonsState:{type:"string",default:"normal"},week_range_col:{type:"string"},ts_week_btn_color:{type:"string"},ts_week_btn_icon_size:{type:"number"},ts_week_btn_icon_size_tablet:{type:"number"},ts_week_btn_icon_size_mobile:{type:"number"},ts_week_btn_bg:{type:"string"},ts_week_btn_radius:{type:"number"},ts_week_btn_radius_tablet:{type:"number"},ts_week_btn_radius_mobile:{type:"number"},ts_week_btn_size:{type:"number"},ts_week_btn_size_tablet:{type:"number"},ts_week_btn_size_mobile:{type:"number"},ts_week_btn_h:{type:"string"},ts_week_btn_bg_h:{type:"string"},ts_week_border_c_h:{type:"string"},ts_week_btn_borderType:{type:"string"},ts_week_btn_borderWidth:{type:"object"},ts_week_btn_borderColor:{type:"string"},week_range_typo:{type:"object"},ts_nopost_content_Gap:{type:"number"},ts_nopost_content_Gap_tablet:{type:"number"},ts_nopost_content_Gap_mobile:{type:"number"},ts_nopost_ico_size:{type:"number"},ts_nopost_ico_size_tablet:{type:"number"},ts_nopost_ico_size_mobile:{type:"number"},ts_nopost_ico_col:{type:"string"},ts_nopost_typo_col:{type:"string"},ts_nopost_typo:{type:"object"},_comment_voxel_tab:"VoxelTab attributes for visibility and loop features",visibilityBehavior:{type:"string",default:"show",enum:["show","hide"]},visibilityRules:{type:"array",default:[],items:{type:"object"}},loopEnabled:{type:"boolean",default:!1},loopSource:{type:"string",default:""},loopProperty:{type:"string",default:""},loopLimit:{type:"string",default:""},loopOffset:{type:"string",default:""}},Oe="file:./index.js",Fe="file:./frontend.js",Ge="file:./render.php",pe={$schema:Le,apiVersion:je,name:Ie,version:ze,title:Me,category:Pe,description:We,keywords:De,textdomain:Ve,supports:He,attributes:Ue,editorScript:Oe,viewScript:Fe,render:Ge};ye(pe.name,{...pe,icon:Ce,edit:Te,save:Re});
