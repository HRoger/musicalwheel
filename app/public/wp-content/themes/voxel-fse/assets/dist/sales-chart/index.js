import{registerBlockType as ye}from"@wordpress/blocks";import o,{useState as j,useRef as Y,useEffect as M,useCallback as q,useMemo as le}from"react";import{useBlockProps as he,InspectorControls as xe}from"@wordpress/block-editor";import{SelectControl as de,Spinner as $e}from"@wordpress/components";import{__ as a}from"@wordpress/i18n";import Ee from"@wordpress/api-fetch";import{A as me,a as P,R as g,S as y,T as R,C as c,B as O,c as re,b as ne,D as se}from"../TypographyPopup-BXz72zyZ.js";import{I as we}from"../InspectorTabs-DmdaThza.js";import"@wordpress/data";/* empty css                            */import"../RepeaterControl-BJok1GGr.js";import{A as K}from"../AdvancedIconControl-BPdxcRLY.js";import{B as ue}from"../BackgroundControl-CJYnO3jL.js";import"../voxelShim-DB_Ue-9R.js";import{g as ve}from"../useAdvancedTabProps-BnJDQbKr.js";import{r as ke}from"../backgroundElements-Ui-iCrLV.js";import{g as L,a as F,b as Ce,c as ce,d as _e}from"../css-generators-C6r5Gcv6.js";import{V as Se}from"../VoxelGridIcon-D5dF5acW.js";import"react-dom";import"../GalleryUploadControl-BiHnGe6_.js";import"../generateAdvancedStyles-CRpLcHXt.js";import"../generateVoxelStyles-oZeaeuKH.js";const G=()=>o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor"},o.createElement("path",{d:"M3 12H5V21H3V12ZM19 8H21V21H19V8ZM11 2H13V21H11V2Z"})),be=()=>o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},o.createElement("path",{d:"M10.8284 12.0007L15.7782 16.9504L14.364 18.3646L8 12.0007L14.364 5.63672L15.7782 7.05093L10.8284 12.0007Z"})),fe=()=>o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},o.createElement("path",{d:"M13.1714 12.0007L8.22168 7.05093L9.63589 5.63672L15.9999 12.0007L9.63589 18.3646L8.22168 16.9504L13.1714 12.0007Z"}));function I(e){return!e||!e.value?null:e.library==="icon"?o.createElement("i",{className:e.value}):e.library==="svg"?o.createElement("img",{src:e.value,alt:"",className:"voxel-fse-icon-svg",style:{width:"1em",height:"1em"}}):null}function ie(e,r="error"){const l=window,t=l.Voxel_Config?.l10n?.ajaxError||"An error occurred",n=e||t;l.Voxel?.alert?l.Voxel.alert(n,r):r==="error"?console.error("[SalesChart]",n):console.log("[SalesChart]",n)}function Ne({attributes:e,config:r,isLoading:l,error:t}){const[n,_]=j(e.ts_active_chart),[p,b]=j(r?.charts??null),[x,w]=j(null),[m,u]=j(!1),$=Y(null),f=Y(null),k=Y({isDown:!1,startX:0,scrollLeft:0});M(()=>{r?.charts&&b(r.charts)},[r]),M(()=>{_(e.ts_active_chart)},[e.ts_active_chart]),M(()=>{t&&ie(t,"error")},[t]);const h=p?p[n]:null,z=q((s,i)=>{if(w(i),$.current){const d=s.currentTarget.getBoundingClientRect();$.current.style.left=`${d.left+d.width+10}px`,$.current.style.top=`${d.top}px`}},[]),C=q(()=>{w(null)},[]),B=q(async s=>{if(!(!h||m)){u(!0);try{const i=window.wpApiSettings?.root||"/wp-json/",d=new URLSearchParams({chart:n,date:h.meta.state.date??"",direction:s}),v=await fetch(`${i}voxel-fse/v1/sales-chart/load-more?${d.toString()}`);if(!v.ok)throw new Error(`HTTP ${v.status}`);const N=await v.json();N&&p&&b({...p,[n]:N})}catch(i){const d=i instanceof Error?i.message:void 0;ie(d,"error")}finally{u(!1)}}},[n,h,m,p]);if(M(()=>{const s=f.current;if(!s)return;const i=k.current,d=T=>{i.isDown=!0,i.startX=T.pageX-s.offsetLeft,i.scrollLeft=s.scrollLeft},v=()=>{i.isDown=!1},N=()=>{i.isDown=!1},W=T=>{if(!i.isDown)return;T.preventDefault();const V=T.pageX-s.offsetLeft-i.startX;s.scrollLeft=i.scrollLeft-V};return s.addEventListener("mousedown",d),s.addEventListener("mouseup",v),s.addEventListener("mouseleave",N),s.addEventListener("mousemove",W),()=>{s.removeEventListener("mousedown",d),s.removeEventListener("mouseup",v),s.removeEventListener("mouseleave",N),s.removeEventListener("mousemove",W)}},[n]),l)return React.createElement("div",{className:"ts-vendor-stats"},React.createElement("div",{className:"ts-no-posts"},React.createElement(G,null),React.createElement("p",null,"Loading chart data...")));const S={activeChart:e.ts_active_chart,chartIcon:e.chart_icon,chevronRight:e.ts_chevron_right,chevronLeft:e.ts_chevron_left};return React.createElement(React.Fragment,null,React.createElement("script",{type:"application/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(S)}}),React.createElement("div",{className:"ts-vendor-stats"},React.createElement("ul",{className:"ts-generic-tabs simplify-ul flexify bar-chart-tabs"},React.createElement("li",{className:n==="this-week"?"ts-tab-active":""},React.createElement("a",{href:"#",onClick:s=>{s.preventDefault(),_("this-week")}},"Week")),React.createElement("li",{className:n==="this-month"?"ts-tab-active":""},React.createElement("a",{href:"#",onClick:s=>{s.preventDefault(),_("this-month")}},"Month")),React.createElement("li",{className:n==="this-year"?"ts-tab-active":""},React.createElement("a",{href:"#",onClick:s=>{s.preventDefault(),_("this-year")}},"Year")),React.createElement("li",{className:n==="all-time"?"ts-tab-active":""},React.createElement("a",{href:"#",onClick:s=>{s.preventDefault(),_("all-time")}},"All time"))),h&&React.createElement("div",{className:`ts-chart chart-${n}${m?" vx-pending":""}`,key:n},h.meta.state.has_activity?React.createElement("div",{className:"chart-contain"},React.createElement("div",{className:"chart-content"},React.createElement("div",{className:"bar-item-con bar-values"},h.steps.map((s,i)=>React.createElement("span",{key:i},s)))),React.createElement("div",{className:"chart-content min-scroll min-scroll-h",ref:f},h.items.map((s,i)=>React.createElement("div",{key:i,className:"bar-item-con"},React.createElement("div",{className:"bi-hold"},React.createElement("div",{className:"bar-item bar-animate",style:{height:`${s.percent}%`},onMouseOver:d=>z(d,{label:s.label,earnings:s.earnings,orders:s.orders}),onMouseLeave:C})),React.createElement("span",null,s.label)))),React.createElement("ul",{ref:$,className:`flexify simplify-ul bar-item-data${x?" active":""}`},React.createElement("li",null,React.createElement("small",null,"Value"),x?.earnings??""),React.createElement("li",null,React.createElement("small",null,"Orders"),x?.orders??""))):React.createElement("div",{className:"ts-no-posts"},I(e.chart_icon)||React.createElement(G,null),React.createElement("p",null,"No activity")),React.createElement("div",{className:"ts-chart-nav"},React.createElement("p",null,h.meta.label),React.createElement("a",{href:"#",onClick:s=>{s.preventDefault(),h.meta.state.has_prev&&B("prev")},className:`ts-icon-btn${h.meta.state.has_prev?"":" vx-disabled"}`},I(e.ts_chevron_left)||React.createElement(be,null)),React.createElement("a",{href:"#",onClick:s=>{s.preventDefault(),h.meta.state.has_next&&B("next")},className:`ts-icon-btn${h.meta.state.has_next?"":" vx-disabled"}`},I(e.ts_chevron_right)||React.createElement(fe,null)))),!h&&React.createElement("div",{className:"ts-chart"},React.createElement("div",{className:"ts-no-posts"},I(e.chart_icon)||React.createElement(G,null),React.createElement("p",null,"No chart data available")))))}function Be({attributes:e,setAttributes:r}){return o.createElement(me,{attributes:e,setAttributes:r,stateAttribute:"contentTabOpenPanel",defaultPanel:"chart"},o.createElement(P,{id:"chart",title:a("Chart","voxel-fse")},o.createElement(de,{label:a("Default view","voxel-fse"),value:e.ts_active_chart,options:[{label:a("Week","voxel-fse"),value:"this-week"},{label:a("Month","voxel-fse"),value:"this-month"},{label:a("Year","voxel-fse"),value:"this-year"},{label:a("All time","voxel-fse"),value:"all-time"}],onChange:l=>r({ts_active_chart:l})})),o.createElement(P,{id:"icons",title:a("Icons","voxel-fse")},o.createElement(K,{label:a("Icon","voxel-fse"),value:e.chart_icon,onChange:l=>r({chart_icon:l}),supportsDynamicTags:!0}),o.createElement(K,{label:a("Right chevron","voxel-fse"),value:e.ts_chevron_right,onChange:l=>r({ts_chevron_right:l}),supportsDynamicTags:!0}),o.createElement(K,{label:a("Left chevron","voxel-fse"),value:e.ts_chevron_left,onChange:l=>r({ts_chevron_left:l}),supportsDynamicTags:!0})))}function Te({attributes:e,setAttributes:r}){return o.createElement(me,{attributes:e,setAttributes:r,stateAttribute:"styleTabOpenPanel",defaultPanel:"chart"},o.createElement(P,{id:"chart",title:a("Chart","voxel-fse")},o.createElement(g,{label:a("Content height","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_chart_height",min:0,max:1e3,availableUnits:["px"]}),o.createElement(y,{label:a("Axis","voxel-fse")}),o.createElement(R,{label:a("Typography","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"axis_typo"}),o.createElement(c,{label:a("Text color","voxel-fse"),value:e.ts_axis_typo_col,onChange:l=>r({ts_axis_typo_col:l})}),o.createElement(g,{label:a("Vertical axis width","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"vertical_axis_width",min:50,max:200,availableUnits:["px"]}),o.createElement(y,{label:a("Chart lines","voxel-fse")}),o.createElement(O,{label:a("Border","voxel-fse"),value:{borderType:e.chart_line_borderType||"",borderWidth:e.chart_line_borderWidth||{},borderColor:e.chart_line_borderColor||""},onChange:l=>{const t={};l.borderType!==void 0&&(t.chart_line_borderType=l.borderType),l.borderWidth!==void 0&&(t.chart_line_borderWidth=l.borderWidth),l.borderColor!==void 0&&(t.chart_line_borderColor=l.borderColor),r(t)},hideRadius:!0}),o.createElement(y,{label:a("Chart Bars","voxel-fse")}),o.createElement(g,{label:a("Bar gap","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"chart_col_gap",min:0,max:100,availableUnits:["px"]}),o.createElement(g,{label:a("Bar width","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"bar_width",min:0,max:100,availableUnits:["px"]}),o.createElement(g,{label:a("Bar radius","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"bar_radius",min:0,max:100,availableUnits:["px"]}),o.createElement(ue,{attributes:e,setAttributes:r,showHoverState:!1,showImageControls:!1,showGradientMode:!0}),o.createElement(c,{label:a("Background color (Hover)","voxel-fse"),value:e.bar_bg_hover,onChange:l=>r({bar_bg_hover:l})}),o.createElement(re,{label:a("Box Shadow","voxel-fse"),attributes:e,setAttributes:r,shadowAttributeName:"bar_sh_shadow"}),o.createElement(y,{label:a("Bar popup","voxel-fse")}),o.createElement(c,{label:a("Background color","voxel-fse"),value:e.bar_pop_bg,onChange:l=>r({bar_pop_bg:l})}),o.createElement(O,{label:a("Border","voxel-fse"),value:{borderType:e.bar_pop_borderType||"",borderWidth:e.bar_pop_borderWidth||{},borderColor:e.bar_pop_borderColor||""},onChange:l=>{const t={};l.borderType!==void 0&&(t.bar_pop_borderType=l.borderType),l.borderWidth!==void 0&&(t.bar_pop_borderWidth=l.borderWidth),l.borderColor!==void 0&&(t.bar_pop_borderColor=l.borderColor),r(t)},hideRadius:!0}),o.createElement(g,{label:a("Bar radius","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"bar_pop_radius",min:0,max:100,availableUnits:["px"]}),o.createElement(re,{label:a("Box Shadow","voxel-fse"),attributes:e,setAttributes:r,shadowAttributeName:"bar_pop_shadow"}),o.createElement(y,{label:a("Bar popup: Value","voxel-fse")}),o.createElement(R,{label:a("Typography","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_primary_typo"}),o.createElement(c,{label:a("Color","voxel-fse"),value:e.ts_primary_color,onChange:l=>r({ts_primary_color:l})}),o.createElement(y,{label:a("Bar popup: Label","voxel-fse")}),o.createElement(R,{label:a("Typography","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_secondary_typo"}),o.createElement(c,{label:a("Color","voxel-fse"),value:e.ts_secondary_color,onChange:l=>r({ts_secondary_color:l})})),o.createElement(P,{id:"tabs",title:a("Tabs","voxel-fse")},o.createElement(ne,{attributeName:"tabsState",attributes:e,setAttributes:r,tabs:[{name:"normal",title:a("Normal","voxel-fse")},{name:"hover",title:a("Hover","voxel-fse")}]},l=>o.createElement(o.Fragment,null,l.name==="normal"&&o.createElement(o.Fragment,null,o.createElement(y,{label:a("Timeline tabs","voxel-fse")}),o.createElement(de,{label:a("Justify","voxel-fse"),value:e.ts_tabs_justify||"left",options:[{label:a("Left","voxel-fse"),value:"left"},{label:a("Center","voxel-fse"),value:"center"},{label:a("Right","voxel-fse"),value:"flex-end"},{label:a("Space between","voxel-fse"),value:"space-between"},{label:a("Space around","voxel-fse"),value:"space-around"}],onChange:t=>r({ts_tabs_justify:t}),__nextHasNoMarginBottom:!0}),o.createElement(se,{label:a("Padding","voxel-fse"),values:e.ts_tabs_padding||{},onChange:t=>r({ts_tabs_padding:t})}),o.createElement(se,{label:a("Margin","voxel-fse"),values:e.ts_tabs_margin||{},onChange:t=>r({ts_tabs_margin:t})}),o.createElement(R,{label:a("Tab typography","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_tabs_text"}),o.createElement(R,{label:a("Active tab typography","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_tabs_text_active"}),o.createElement(c,{label:a("Text color","voxel-fse"),value:e.ts_tabs_text_color,onChange:t=>r({ts_tabs_text_color:t})}),o.createElement(c,{label:a("Active text color","voxel-fse"),value:e.ts_active_text_color,onChange:t=>r({ts_active_text_color:t})}),o.createElement(c,{label:a("Background","voxel-fse"),value:e.ts_tabs_bg_color,onChange:t=>r({ts_tabs_bg_color:t})}),o.createElement(c,{label:a("Active background","voxel-fse"),value:e.ts_tabs_bg_active_color,onChange:t=>r({ts_tabs_bg_active_color:t})}),o.createElement(O,{label:a("Border","voxel-fse"),value:{borderType:e.ts_tabs_borderType||"",borderWidth:e.ts_tabs_borderWidth||{},borderColor:e.ts_tabs_borderColor||""},onChange:t=>{const n={};t.borderType!==void 0&&(n.ts_tabs_borderType=t.borderType),t.borderWidth!==void 0&&(n.ts_tabs_borderWidth=t.borderWidth),t.borderColor!==void 0&&(n.ts_tabs_borderColor=t.borderColor),r(n)},hideRadius:!0}),o.createElement(c,{label:a("Active border color","voxel-fse"),value:e.ts_tabs_border_active,onChange:t=>r({ts_tabs_border_active:t})}),o.createElement(g,{label:a("Border radius","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_tabs_radius",min:0,max:100,availableUnits:["px"]})),l.name==="hover"&&o.createElement(o.Fragment,null,o.createElement(y,{label:a("Timeline tabs","voxel-fse")}),o.createElement(c,{label:a("Text color","voxel-fse"),value:e.ts_tabs_text_color_h,onChange:t=>r({ts_tabs_text_color_h:t})}),o.createElement(c,{label:a("Active text color","voxel-fse"),value:e.ts_tabs_active_text_color_h,onChange:t=>r({ts_tabs_active_text_color_h:t})}),o.createElement(c,{label:a("Border color","voxel-fse"),value:e.ts_tabs_border_color_h,onChange:t=>r({ts_tabs_border_color_h:t})}),o.createElement(c,{label:a("Active border color","voxel-fse"),value:e.ts_tabs_border_h_active,onChange:t=>r({ts_tabs_border_h_active:t})}),o.createElement(c,{label:a("Background","voxel-fse"),value:e.ts_tabs_bg_color_h,onChange:t=>r({ts_tabs_bg_color_h:t})}),o.createElement(c,{label:a("Active background","voxel-fse"),value:e.ts_bg_active_color_h,onChange:t=>r({ts_bg_active_color_h:t})}))))),o.createElement(P,{id:"week-buttons",title:a("Next/Prev week buttons","voxel-fse")},o.createElement(ne,{attributeName:"weekButtonsState",attributes:e,setAttributes:r,tabs:[{name:"normal",title:a("Normal","voxel-fse")},{name:"hover",title:a("Hover","voxel-fse")}]},l=>o.createElement(o.Fragment,null,l.name==="normal"&&o.createElement(o.Fragment,null,o.createElement(y,{label:a("Range","voxel-fse")}),o.createElement(R,{label:a("Typography","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"week_range_typo"}),o.createElement(c,{label:a("Text color","voxel-fse"),value:e.week_range_col,onChange:t=>r({week_range_col:t})}),o.createElement(y,{label:a("Week buttons","voxel-fse")}),o.createElement(c,{label:a("Button icon color","voxel-fse"),value:e.ts_week_btn_color,onChange:t=>r({ts_week_btn_color:t})}),o.createElement(g,{label:a("Button icon size","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_week_btn_icon_size",min:0,max:100,availableUnits:["px","%"]}),o.createElement(c,{label:a("Button background","voxel-fse"),value:e.ts_week_btn_bg,onChange:t=>r({ts_week_btn_bg:t})}),o.createElement(O,{label:a("Button border","voxel-fse"),value:{borderType:e.ts_week_btn_borderType||"",borderWidth:e.ts_week_btn_borderWidth||{},borderColor:e.ts_week_btn_borderColor||""},onChange:t=>{const n={};t.borderType!==void 0&&(n.ts_week_btn_borderType=t.borderType),t.borderWidth!==void 0&&(n.ts_week_btn_borderWidth=t.borderWidth),t.borderColor!==void 0&&(n.ts_week_btn_borderColor=t.borderColor),r(n)},hideRadius:!0}),o.createElement(g,{label:a("Button border radius","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_week_btn_radius",min:0,max:100,availableUnits:["px","%"]}),o.createElement(g,{label:a("Button size","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_week_btn_size",min:0,max:100,availableUnits:["px","%"]}),o.createElement(y,{label:a("Icons","voxel-fse")})),l.name==="hover"&&o.createElement(o.Fragment,null,o.createElement(c,{label:a("Button icon color","voxel-fse"),value:e.ts_week_btn_h,onChange:t=>r({ts_week_btn_h:t})}),o.createElement(c,{label:a("Button background color","voxel-fse"),value:e.ts_week_btn_bg_h,onChange:t=>r({ts_week_btn_bg_h:t})}),o.createElement(c,{label:a("Button border color","voxel-fse"),value:e.ts_week_border_c_h,onChange:t=>r({ts_week_border_c_h:t})}))))),o.createElement(P,{id:"no-activity",title:a("No activity","voxel-fse")},o.createElement(g,{label:a("Content gap","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_nopost_content_Gap",min:0,max:100,availableUnits:["px"]}),o.createElement(g,{label:a("Icon size","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_nopost_ico_size",min:0,max:100,availableUnits:["px"]}),o.createElement(c,{label:a("Icon color","voxel-fse"),value:e.ts_nopost_ico_col,onChange:l=>r({ts_nopost_ico_col:l})}),o.createElement(R,{label:a("Typography","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_nopost_typo"}),o.createElement(c,{label:a("Text color","voxel-fse"),value:e.ts_nopost_typo_col,onChange:l=>r({ts_nopost_typo_col:l})})))}function ge(e,r){const l=`.voxel-fse-sales-chart-${r}`,t=[],n=[],_=[];e.ts_chart_height!==void 0&&t.push(`${l} .ts-chart .ts-no-posts, ${l} .ts-chart .chart-content { height: ${e.ts_chart_height}px; }`),e.ts_chart_height_tablet!==void 0&&n.push(`${l} .ts-chart .ts-no-posts, ${l} .ts-chart .chart-content { height: ${e.ts_chart_height_tablet}px; }`),e.ts_chart_height_mobile!==void 0&&_.push(`${l} .ts-chart .ts-no-posts, ${l} .ts-chart .chart-content { height: ${e.ts_chart_height_mobile}px; }`);const p=`${l} .chart-content span`,b=L(e.axis_typo);b.desktop&&t.push(`${p} { ${b.desktop} }`),b.tablet&&n.push(`${p} { ${b.tablet} }`),b.mobile&&_.push(`${p} { ${b.mobile} }`),e.ts_axis_typo_col&&t.push(`${p} { color: ${e.ts_axis_typo_col}; }`),e.vertical_axis_width!==void 0&&t.push(`${l} .chart-content.min-scroll { margin-left: ${e.vertical_axis_width}px; }`),e.vertical_axis_width_tablet!==void 0&&n.push(`${l} .chart-content.min-scroll { margin-left: ${e.vertical_axis_width_tablet}px; }`),e.vertical_axis_width_mobile!==void 0&&_.push(`${l} .chart-content.min-scroll { margin-left: ${e.vertical_axis_width_mobile}px; }`);const x=`${l} .chart-content .bar-values span`,w=F(e,"chart_line_border");w.desktop&&t.push(`${x} { ${w.desktop} }`),e.chart_col_gap!==void 0&&t.push(`${l} .chart-content { grid-gap: ${e.chart_col_gap}px; }`),e.chart_col_gap_tablet!==void 0&&n.push(`${l} .chart-content { grid-gap: ${e.chart_col_gap_tablet}px; }`),e.chart_col_gap_mobile!==void 0&&_.push(`${l} .chart-content { grid-gap: ${e.chart_col_gap_mobile}px; }`),e.bar_width!==void 0&&t.push(`${l} .chart-content .bar-item { width: ${e.bar_width}px; }`),e.bar_width_tablet!==void 0&&n.push(`${l} .chart-content .bar-item { width: ${e.bar_width_tablet}px; }`),e.bar_width_mobile!==void 0&&_.push(`${l} .chart-content .bar-item { width: ${e.bar_width_mobile}px; }`),e.bar_radius!==void 0&&t.push(`${l} .chart-content .bar-item { border-radius: ${e.bar_radius}px; }`),e.bar_radius_tablet!==void 0&&n.push(`${l} .chart-content .bar-item { border-radius: ${e.bar_radius_tablet}px; }`),e.bar_radius_mobile!==void 0&&_.push(`${l} .chart-content .bar-item { border-radius: ${e.bar_radius_mobile}px; }`);const m=`${l} .chart-content .bar-item`,u=Ce(e.bar_bg);u&&t.push(`${m} { ${u} }`),e.bar_bg_hover&&t.push(`${m}:hover { background-color: ${e.bar_bg_hover}; }`);const $=ce(e.bar_sh_shadow);$&&t.push(`${m} { box-shadow: ${$}; }`);const f=`${l} .bar-item-data`;e.bar_pop_bg&&t.push(`${f} { background-color: ${e.bar_pop_bg}; }`);const k=F(e,"bar_pop_border");k.desktop&&t.push(`${f} { ${k.desktop} }`),e.bar_pop_radius!==void 0&&t.push(`${f} { border-radius: ${e.bar_pop_radius}px; }`),e.bar_pop_radius_tablet!==void 0&&n.push(`${f} { border-radius: ${e.bar_pop_radius_tablet}px; }`),e.bar_pop_radius_mobile!==void 0&&_.push(`${f} { border-radius: ${e.bar_pop_radius_mobile}px; }`);const h=ce(e.bar_pop_shadow);h&&t.push(`${f} { box-shadow: ${h}; }`);const z=`${f} li`,C=L(e.ts_primary_typo);C.desktop&&t.push(`${z} { ${C.desktop} }`),C.tablet&&n.push(`${z} { ${C.tablet} }`),C.mobile&&_.push(`${z} { ${C.mobile} }`),e.ts_primary_color&&t.push(`${z} { color: ${e.ts_primary_color}; }`);const B=`${f} li small`,S=L(e.ts_secondary_typo);S.desktop&&t.push(`${B} { ${S.desktop} }`),S.tablet&&n.push(`${B} { ${S.tablet} }`),S.mobile&&_.push(`${B} { ${S.mobile} }`),e.ts_secondary_color&&t.push(`${B} { color: ${e.ts_secondary_color}; }`);const s=`${l} .ts-generic-tabs`;e.ts_tabs_justify&&t.push(`${s} { justify-content: ${e.ts_tabs_justify}; }`);const i=`${l} .ts-generic-tabs li`,d=_e(e,"ts_tabs_margin","margin");d.desktop&&t.push(`${i} { ${d.desktop} }`);const v=`${l} .ts-generic-tabs li a`,N=_e(e,"ts_tabs_padding");N.desktop&&t.push(`${v} { ${N.desktop} }`);const W=L(e.ts_tabs_text);W.desktop&&t.push(`${v} { ${W.desktop} }`),e.ts_tabs_text_color&&t.push(`${v} { color: ${e.ts_tabs_text_color}; }`),e.ts_tabs_bg_color&&t.push(`${v} { background-color: ${e.ts_tabs_bg_color}; }`);const T=F(e,"ts_tabs_border");T.desktop&&t.push(`${v} { ${T.desktop} }`),e.ts_tabs_radius!==void 0&&t.push(`${v} { border-radius: ${e.ts_tabs_radius}px; }`);const D=`${l} .ts-generic-tabs li.ts-tab-active a`,V=L(e.ts_tabs_text_active);V.desktop&&t.push(`${D} { ${V.desktop} }`),e.ts_active_text_color&&t.push(`${D} { color: ${e.ts_active_text_color}; }`),e.ts_tabs_bg_active_color&&t.push(`${D} { background-color: ${e.ts_tabs_bg_active_color}; }`),e.ts_tabs_border_active&&t.push(`${D} { border-color: ${e.ts_tabs_border_active}; }`);const X=`${v}:hover`;e.ts_tabs_text_color_h&&t.push(`${X} { color: ${e.ts_tabs_text_color_h}; }`),e.ts_tabs_border_color_h&&t.push(`${X} { border-color: ${e.ts_tabs_border_color_h}; }`),e.ts_tabs_bg_color_h&&t.push(`${X} { background-color: ${e.ts_tabs_bg_color_h}; }`);const Z=`${l} .ts-generic-tabs li.ts-tab-active a:hover`;e.ts_tabs_active_text_color_h&&t.push(`${Z} { color: ${e.ts_tabs_active_text_color_h}; }`),e.ts_tabs_border_h_active&&t.push(`${Z} { border-color: ${e.ts_tabs_border_h_active}; }`),e.ts_bg_active_color_h&&t.push(`${Z} { background-color: ${e.ts_bg_active_color_h}; }`);const Q=`${l} .ts-chart-nav p`,A=L(e.week_range_typo);A.desktop&&t.push(`${Q} { ${A.desktop} }`),e.week_range_col&&t.push(`${Q} { color: ${e.week_range_col}; }`);const E=`${l} .ts-chart-nav .ts-icon-btn`;e.ts_week_btn_color&&(t.push(`${E} i { color: ${e.ts_week_btn_color}; }`),t.push(`${E} svg { fill: ${e.ts_week_btn_color}; }`)),e.ts_week_btn_icon_size!==void 0&&(t.push(`${E} i { font-size: ${e.ts_week_btn_icon_size}px; }`),t.push(`${E} svg { width: ${e.ts_week_btn_icon_size}px; height: ${e.ts_week_btn_icon_size}px; }`)),e.ts_week_btn_size!==void 0&&t.push(`${E} { width: ${e.ts_week_btn_size}px; height: ${e.ts_week_btn_size}px; min-width: ${e.ts_week_btn_size}px; }`),e.ts_week_btn_bg&&t.push(`${E} { background-color: ${e.ts_week_btn_bg}; }`);const ee=F(e,"ts_week_btn_border");ee.desktop&&t.push(`${E} { ${ee.desktop} }`),e.ts_week_btn_radius!==void 0&&t.push(`${E} { border-radius: ${e.ts_week_btn_radius}px; }`);const H=`${E}:hover`;e.ts_week_btn_h&&(t.push(`${H} i { color: ${e.ts_week_btn_h}; }`),t.push(`${H} svg { fill: ${e.ts_week_btn_h}; }`)),e.ts_week_btn_bg_h&&t.push(`${H} { background-color: ${e.ts_week_btn_bg_h}; }`),e.ts_week_border_c_h&&t.push(`${H} { border-color: ${e.ts_week_border_c_h}; }`);const U=`${l} .ts-no-posts`;e.ts_nopost_content_Gap!==void 0&&t.push(`${U} { grid-gap: ${e.ts_nopost_content_Gap}px; }`);const oe=`${U} i, ${U} svg`;e.ts_nopost_ico_size!==void 0&&t.push(`${oe} { font-size: ${e.ts_nopost_ico_size}px; width: ${e.ts_nopost_ico_size}px; height: ${e.ts_nopost_ico_size}px; }`),e.ts_nopost_ico_col&&t.push(`${oe} { color: ${e.ts_nopost_ico_col}; fill: ${e.ts_nopost_ico_col}; }`);const te=`${U} p`,ae=L(e.ts_nopost_typo);ae.desktop&&t.push(`${te} { ${ae.desktop} }`),e.ts_nopost_typo_col&&t.push(`${te} { color: ${e.ts_nopost_typo_col}; }`);let J=t.join(`
`);return n.length>0&&(J+=`
@media (max-width: 1024px) {
${n.join(`
`)}
}`),_.length>0&&(J+=`
@media (max-width: 767px) {
${_.join(`
`)}
}`),J}function Re({attributes:e,setAttributes:r,clientId:l}){const t=e.blockId||l;M(()=>{e.blockId||r({blockId:l})},[e.blockId,l,r]);const[n,_]=j(null),[p,b]=j(!0),[x,w]=j(null),m=ve(e,{blockId:t,baseClass:"voxel-fse-sales-chart",selectorPrefix:"voxel-fse-sales-chart"}),u=le(()=>ge(e,t),[e,t]),$=le(()=>[m.responsiveCSS,u].filter(Boolean).join(`
`),[m.responsiveCSS,u]),f=he({id:m.elementId,className:m.className,style:m.styles,...m.customAttrs});return M(()=>{b(!0),w(null),Ee({path:"/voxel-fse/v1/sales-chart"}).then(k=>{_(k),b(!1)}).catch(k=>{w(k.message||a("Failed to load chart data","voxel-fse")),b(!1)})},[]),o.createElement(o.Fragment,null,o.createElement(xe,null,o.createElement(we,{tabs:[{id:"content",label:a("Content","voxel-fse"),icon:"",render:()=>o.createElement(Be,{attributes:e,setAttributes:r})},{id:"style",label:a("Style","voxel-fse"),icon:"",render:()=>o.createElement(Te,{attributes:e,setAttributes:r})}],includeAdvancedTab:!0,includeVoxelTab:!0,attributes:e,setAttributes:r,defaultTab:"content"})),o.createElement("div",{...f},$&&o.createElement("style",{dangerouslySetInnerHTML:{__html:$}}),p&&o.createElement("div",{className:"voxel-fse-loading"},o.createElement($e,null),o.createElement("p",null,a("Loading chart data...","voxel-fse"))),x&&o.createElement("div",{className:"voxel-fse-error"},o.createElement("p",null,x)),!p&&!x&&o.createElement(Ne,{attributes:e,config:n,isLoading:p,error:x})))}function Le({attributes:e}){const r=e.blockId||"sales-chart",l=ve(e,{blockId:r,baseClass:"voxel-fse-sales-chart",selectorPrefix:"voxel-fse-sales-chart"}),t=ge(e,r),n=[l.responsiveCSS,t].filter(Boolean).join(`
`),_=he.save({id:l.elementId,className:l.className,style:l.styles,"data-visibility-behavior":e.visibilityBehavior||void 0,"data-visibility-rules":e.visibilityRules?.length?JSON.stringify(e.visibilityRules):void 0,"data-loop-source":e.loopSource||void 0,"data-loop-limit":e.loopLimit||void 0,"data-loop-offset":e.loopOffset||void 0,...l.customAttrs}),p={activeChart:e.ts_active_chart,chartIcon:e.chart_icon,chevronRight:e.ts_chevron_right,chevronLeft:e.ts_chevron_left};return o.createElement("div",{..._},n&&o.createElement("style",{dangerouslySetInnerHTML:{__html:n}}),ke(e,!1,void 0,void 0,l.uniqueSelector),o.createElement("script",{type:"application/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(p)}}),o.createElement("div",{className:"ts-vendor-stats"},o.createElement("ul",{className:"ts-generic-tabs simplify-ul flexify bar-chart-tabs"},o.createElement("li",{className:e.ts_active_chart==="this-week"?"ts-tab-active":""},o.createElement("a",{href:"#"},"Week")),o.createElement("li",{className:e.ts_active_chart==="this-month"?"ts-tab-active":""},o.createElement("a",{href:"#"},"Month")),o.createElement("li",{className:e.ts_active_chart==="this-year"?"ts-tab-active":""},o.createElement("a",{href:"#"},"Year")),o.createElement("li",{className:e.ts_active_chart==="all-time"?"ts-tab-active":""},o.createElement("a",{href:"#"},"All time"))),o.createElement("div",{className:`ts-chart chart-${e.ts_active_chart}`},o.createElement("div",{className:"ts-no-posts"},I(e.chart_icon)||o.createElement(G,null),o.createElement("p",null,"Loading chart...")),o.createElement("div",{className:"ts-chart-nav"},o.createElement("p",null,"Loading..."),o.createElement("a",{href:"#",className:"ts-icon-btn vx-disabled"},I(e.ts_chevron_left)||o.createElement(be,null)),o.createElement("a",{href:"#",className:"ts-icon-btn vx-disabled"},I(e.ts_chevron_right)||o.createElement(fe,null))))))}const je="https://schemas.wp.org/trunk/block.json",Ie=3,ze="voxel-fse/sales-chart",Me="1.0.0",Pe="Sales Chart (VX)",We="voxel-fse",De="Display vendor sales statistics with bar chart visualization. Requires Stripe Connect.",Ve=["chart","sales","bar","statistics","stripe","vendor"],He="voxel-fse",Ue={html:!1,anchor:!0,align:["wide","full"],className:!0,customClassName:!0},Oe={blockId:{type:"string",default:""},contentTabOpenPanel:{type:"string",default:"chart"},styleTabOpenPanel:{type:"string",default:"chart"},ts_active_chart:{type:"string",default:"this-week"},chart_icon:{type:"object",default:{library:"",value:""}},ts_chevron_right:{type:"object",default:{library:"",value:""}},ts_chevron_left:{type:"object",default:{library:"",value:""}},ts_chart_height:{type:"number"},ts_chart_height_tablet:{type:"number"},ts_chart_height_mobile:{type:"number"},ts_axis_typo_col:{type:"string"},vertical_axis_width:{type:"number"},vertical_axis_width_tablet:{type:"number"},vertical_axis_width_mobile:{type:"number"},chart_col_gap:{type:"number"},chart_col_gap_tablet:{type:"number"},chart_col_gap_mobile:{type:"number"},bar_width:{type:"number"},bar_width_tablet:{type:"number"},bar_width_mobile:{type:"number"},bar_radius:{type:"number"},bar_radius_tablet:{type:"number"},bar_radius_mobile:{type:"number"},bar_bg_hover:{type:"string"},bar_pop_bg:{type:"string"},bar_pop_radius:{type:"number"},bar_pop_radius_tablet:{type:"number"},bar_pop_radius_mobile:{type:"number"},ts_primary_color:{type:"string"},ts_secondary_color:{type:"string"},chart_line_borderType:{type:"string"},chart_line_borderWidth:{type:"object"},chart_line_borderColor:{type:"string"},bar_pop_borderType:{type:"string"},bar_pop_borderWidth:{type:"object"},bar_pop_borderColor:{type:"string"},axis_typo:{type:"object"},ts_primary_typo:{type:"object"},ts_secondary_typo:{type:"object"},bar_sh_shadow:{type:"object"},bar_pop_shadow:{type:"object"},bar_bg:{type:"object"},tabsState:{type:"string",default:"normal"},ts_tabs_justify:{type:"string",default:"left"},ts_tabs_padding:{type:"object"},ts_tabs_margin:{type:"object"},ts_tabs_text_color:{type:"string"},ts_active_text_color:{type:"string"},ts_tabs_bg_color:{type:"string"},ts_tabs_bg_active_color:{type:"string"},ts_tabs_border_active:{type:"string"},ts_tabs_radius:{type:"number"},ts_tabs_text_color_h:{type:"string"},ts_tabs_active_text_color_h:{type:"string"},ts_tabs_border_color_h:{type:"string"},ts_tabs_border_h_active:{type:"string"},ts_tabs_bg_color_h:{type:"string"},ts_bg_active_color_h:{type:"string"},ts_tabs_borderType:{type:"string"},ts_tabs_borderWidth:{type:"object"},ts_tabs_borderColor:{type:"string"},ts_tabs_text:{type:"object"},ts_tabs_text_active:{type:"object"},weekButtonsState:{type:"string",default:"normal"},week_range_col:{type:"string"},ts_week_btn_color:{type:"string"},ts_week_btn_icon_size:{type:"number"},ts_week_btn_icon_size_tablet:{type:"number"},ts_week_btn_icon_size_mobile:{type:"number"},ts_week_btn_bg:{type:"string"},ts_week_btn_radius:{type:"number"},ts_week_btn_radius_tablet:{type:"number"},ts_week_btn_radius_mobile:{type:"number"},ts_week_btn_size:{type:"number"},ts_week_btn_size_tablet:{type:"number"},ts_week_btn_size_mobile:{type:"number"},ts_week_btn_h:{type:"string"},ts_week_btn_bg_h:{type:"string"},ts_week_border_c_h:{type:"string"},ts_week_btn_borderType:{type:"string"},ts_week_btn_borderWidth:{type:"object"},ts_week_btn_borderColor:{type:"string"},week_range_typo:{type:"object"},ts_nopost_content_Gap:{type:"number"},ts_nopost_content_Gap_tablet:{type:"number"},ts_nopost_content_Gap_mobile:{type:"number"},ts_nopost_ico_size:{type:"number"},ts_nopost_ico_size_tablet:{type:"number"},ts_nopost_ico_size_mobile:{type:"number"},ts_nopost_ico_col:{type:"string"},ts_nopost_typo_col:{type:"string"},ts_nopost_typo:{type:"object"},_comment_voxel_tab:"VoxelTab attributes for visibility and loop features",visibilityBehavior:{type:"string",default:"show",enum:["show","hide"]},visibilityRules:{type:"array",default:[],items:{type:"object"}},loopEnabled:{type:"boolean",default:!1},loopSource:{type:"string",default:""},loopProperty:{type:"string",default:""},loopLimit:{type:"string",default:""},loopOffset:{type:"string",default:""}},Fe="file:./index.js",Ge="file:./editor.css",Xe="file:./frontend.js",Ze="file:./render.php",pe={$schema:je,apiVersion:Ie,name:ze,version:Me,title:Pe,category:We,description:De,keywords:Ve,textdomain:He,supports:Ue,attributes:Oe,editorScript:Fe,editorStyle:Ge,viewScript:Xe,render:Ze};ye(pe.name,{...pe,icon:Se,edit:Re,save:Le});
