import{registerBlockType as ye}from"@wordpress/blocks";import o,{useState as I,useRef as Y,useEffect as z,useCallback as q,useMemo as le}from"react";import{useBlockProps as he,InspectorControls as xe}from"@wordpress/block-editor";import{__ as l}from"@wordpress/i18n";import $e from"@wordpress/api-fetch";import{A as de,a as M,R as y,S as $,T as L,C as c,B as O,c as re,b as ne,D as se}from"../TypographyPopup-CkDwan7Z.js";import{I as Ee}from"../InspectorTabs-C-Yyx0JZ.js";import{SelectControl as me}from"@wordpress/components";import"@wordpress/data";/* empty css                            */import"../RepeaterControl-DaYyJwAm.js";import{A as K}from"../AdvancedIconControl-CqVKxCWa.js";import{B as we}from"../BackgroundControl-DWPsj44N.js";import"../voxelShim-DB_Ue-9R.js";import{g as ve}from"../useAdvancedTabProps-BnJDQbKr.js";import{r as ue}from"../backgroundElements-BCKss4qj.js";import{g as j,a as F,b as Ce,c as ce,d as _e}from"../css-generators-C6r5Gcv6.js";import{V as ke}from"../VoxelGridIcon-D5dF5acW.js";import"react-dom";import"../GalleryUploadControl-CQqiqsZe.js";import"../generateAdvancedStyles-CRpLcHXt.js";import"../generateVoxelStyles-oZeaeuKH.js";const G=()=>o.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},o.createElement("path",{d:"M11.833 3.75C10.5904 3.75 9.58301 4.75736 9.58301 6V18.9991C9.58301 20.2417 10.5904 21.2491 11.833 21.2491H12.1663C13.409 21.2491 14.4163 20.2417 14.4163 18.9991V6C14.4163 4.75736 13.409 3.75 12.1663 3.75H11.833Z",fill:"#343C54"}),o.createElement("path",{d:"M5.5 12.5625C4.25736 12.5625 3.25 13.5699 3.25 14.8125V19C3.25 20.2426 4.25736 21.25 5.5 21.25H5.83333C7.07597 21.25 8.08333 20.2426 8.08333 19V14.8125C8.08333 13.5699 7.07598 12.5625 5.83333 12.5625H5.5Z",fill:"#343C54"}),o.createElement("path",{d:"M18.166 8.66016C16.9234 8.66016 15.916 9.66752 15.916 10.9102V19.0001C15.916 20.2427 16.9234 21.2501 18.166 21.2501H18.4993C19.742 21.2501 20.7493 20.2427 20.7493 19.0001V10.9102C20.7493 9.66752 19.742 8.66016 18.4993 8.66016H18.166Z",fill:"#343C54"})),be=()=>o.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},o.createElement("path",{d:"M10.746 6.00002C10.746 5.69663 10.5632 5.42312 10.2829 5.30707C10.0026 5.19101 9.67996 5.25526 9.4655 5.46986L3.51254 11.4266C3.35184 11.5642 3.25 11.7685 3.25 11.9966V11.9982C3.24959 12.1906 3.32276 12.3831 3.46949 12.53L9.46548 18.5302C9.67994 18.7448 10.0026 18.809 10.2829 18.693C10.5632 18.5769 10.746 18.3034 10.746 18L10.746 12.7466L20.0014 12.7466C20.4156 12.7466 20.7514 12.4108 20.7514 11.9966C20.7514 11.5824 20.4156 11.2466 20.0014 11.2466L10.746 11.2466V6.00002Z",fill:"#343C54"})),fe=()=>o.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},o.createElement("path",{d:"M14.5359 5.46986C14.3214 5.25526 13.9988 5.19101 13.7185 5.30707C13.4382 5.42312 13.2554 5.69663 13.2554 6.00002V11.2466L4 11.2466C3.58579 11.2466 3.25 11.5824 3.25 11.9966C3.25 12.4108 3.58579 12.7466 4 12.7466L13.2554 12.7466V18C13.2554 18.3034 13.4382 18.5769 13.7185 18.693C13.9988 18.809 14.3214 18.7448 14.5359 18.5302L20.5319 12.53C20.6786 12.3831 20.7518 12.1905 20.7514 11.9981L20.7514 11.9966C20.7514 11.7685 20.6495 11.5642 20.4888 11.4266L14.5359 5.46986Z",fill:"#343C54"}));function W(e){return!e||!e.value?null:e.library==="icon"?o.createElement("i",{className:e.value}):e.library==="svg"?o.createElement("img",{src:e.value,alt:"",className:"voxel-fse-icon-svg",style:{width:"1em",height:"1em"}}):null}function ie(e,r="error"){const a=window,t=a.Voxel_Config?.l10n?.ajaxError||"An error occurred",n=e||t;a.Voxel?.alert?a.Voxel.alert(n,r):r==="error"?console.error("[SalesChart]",n):console.log("[SalesChart]",n)}function Se({attributes:e,config:r,isLoading:a,error:t}){const[n,_]=I(e.ts_active_chart),[m,b]=I(r?.charts??null),[E,C]=I(null),[v,k]=I(!1),f=Y(null),g=Y(null),x=Y({isDown:!1,startX:0,scrollLeft:0});z(()=>{r?.charts&&b(r.charts)},[r]),z(()=>{_(e.ts_active_chart)},[e.ts_active_chart]),z(()=>{t&&ie(t,"error")},[t]);const i=m?m[n]:null,N=q((s,p)=>{if(C(p),f.current){const h=s.currentTarget.getBoundingClientRect();document.documentElement.dir==="rtl"?(f.current.style.right=`${window.innerWidth-h.left+10}px`,f.current.style.left="auto"):(f.current.style.left=`${h.left+h.width+10}px`,f.current.style.right="auto"),f.current.style.top=`${h.top}px`}},[]),w=q(()=>{C(null)},[]),R=q(async s=>{if(!(!i||v)){k(!0);try{const p=window.wpApiSettings?.root||"/wp-json/",h=new URLSearchParams({chart:n,date:i.meta.state.date??"",direction:s}),d=await fetch(`${p}voxel-fse/v1/sales-chart/load-more?${h.toString()}`);if(!d.ok)throw new Error(`HTTP ${d.status}`);const B=await d.json();B&&m&&b({...m,[n]:B})}catch(p){const h=p instanceof Error?p.message:void 0;ie(h,"error")}finally{k(!1)}}},[n,i,v,m]);if(z(()=>{const s=g.current;if(!s)return;const p=x.current,h=T=>{p.isDown=!0,p.startX=T.pageX-s.offsetLeft,p.scrollLeft=s.scrollLeft},d=()=>{p.isDown=!1},B=()=>{p.isDown=!1},P=T=>{if(!p.isDown)return;T.preventDefault();const D=T.pageX-s.offsetLeft-p.startX;s.scrollLeft=p.scrollLeft-D};return s.addEventListener("mousedown",h),s.addEventListener("mouseup",d),s.addEventListener("mouseleave",B),s.addEventListener("mousemove",P),()=>{s.removeEventListener("mousedown",h),s.removeEventListener("mouseup",d),s.removeEventListener("mouseleave",B),s.removeEventListener("mousemove",P)}},[n]),a)return React.createElement("div",{className:"ts-vendor-stats"},React.createElement("div",{className:"ts-no-posts"},React.createElement(G,null),React.createElement("p",null,"Loading chart data...")));const S={activeChart:e.ts_active_chart,chartIcon:e.chart_icon,chevronRight:e.ts_chevron_right,chevronLeft:e.ts_chevron_left};return React.createElement(React.Fragment,null,React.createElement("script",{type:"application/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(S)}}),React.createElement("div",{className:"ts-vendor-stats"},React.createElement("ul",{className:"ts-generic-tabs simplify-ul flexify bar-chart-tabs"},React.createElement("li",{className:n==="this-week"?"ts-tab-active":""},React.createElement("a",{href:"#",onClick:s=>{s.preventDefault(),_("this-week")}},"Week")),React.createElement("li",{className:n==="this-month"?"ts-tab-active":""},React.createElement("a",{href:"#",onClick:s=>{s.preventDefault(),_("this-month")}},"Month")),React.createElement("li",{className:n==="this-year"?"ts-tab-active":""},React.createElement("a",{href:"#",onClick:s=>{s.preventDefault(),_("this-year")}},"Year")),React.createElement("li",{className:n==="all-time"?"ts-tab-active":""},React.createElement("a",{href:"#",onClick:s=>{s.preventDefault(),_("all-time")}},"All time"))),i&&React.createElement("div",{className:`ts-chart chart-${n}${v?" vx-pending":""}`,key:n},i.meta.state.has_activity?React.createElement("div",{className:"chart-contain"},React.createElement("div",{className:"chart-content"},React.createElement("div",{className:"bar-item-con bar-values"},i.steps.map((s,p)=>React.createElement("span",{key:p},s)))),React.createElement("div",{className:"chart-content min-scroll min-scroll-h",ref:g},i.items.map((s,p)=>React.createElement("div",{key:p,className:"bar-item-con"},React.createElement("div",{className:"bi-hold"},React.createElement("div",{className:"bar-item bar-animate",style:{height:`${s.percent}%`},onMouseOver:h=>N(h,{label:s.label,earnings:s.earnings,orders:s.orders}),onMouseLeave:w})),React.createElement("span",null,s.label)))),React.createElement("ul",{ref:f,className:`flexify simplify-ul bar-item-data${E?" active":""}`},React.createElement("li",null,React.createElement("small",null,"Value"),E?.earnings??""),React.createElement("li",null,React.createElement("small",null,"Orders"),E?.orders??""))):React.createElement("div",{className:"ts-no-posts"},W(e.chart_icon)||React.createElement(G,null),React.createElement("p",null,"No activity")),React.createElement("div",{className:"ts-chart-nav"},React.createElement("p",null,i.meta.label),React.createElement("a",{href:"#",onClick:s=>{s.preventDefault(),i.meta.state.has_prev&&R("prev")},className:`ts-icon-btn${i.meta.state.has_prev?"":" vx-disabled"}`},W(e.ts_chevron_left)||React.createElement(be,null)),React.createElement("a",{href:"#",onClick:s=>{s.preventDefault(),i.meta.state.has_next&&R("next")},className:`ts-icon-btn${i.meta.state.has_next?"":" vx-disabled"}`},W(e.ts_chevron_right)||React.createElement(fe,null)))),!i&&React.createElement("div",{className:"ts-chart"},React.createElement("div",{className:"ts-no-posts"},W(e.chart_icon)||React.createElement(G,null),React.createElement("p",null,"No chart data available")))))}function Be({attributes:e,setAttributes:r}){return o.createElement(de,{attributes:e,setAttributes:r,stateAttribute:"contentTabOpenPanel",defaultPanel:"chart"},o.createElement(M,{id:"chart",title:l("Chart","voxel-fse")},o.createElement(me,{label:l("Default view","voxel-fse"),value:e.ts_active_chart,options:[{label:l("Week","voxel-fse"),value:"this-week"},{label:l("Month","voxel-fse"),value:"this-month"},{label:l("Year","voxel-fse"),value:"this-year"},{label:l("All time","voxel-fse"),value:"all-time"}],onChange:a=>r({ts_active_chart:a})})),o.createElement(M,{id:"icons",title:l("Icons","voxel-fse")},o.createElement(K,{label:l("Icon","voxel-fse"),value:e.chart_icon,onChange:a=>r({chart_icon:a}),supportsDynamicTags:!0}),o.createElement(K,{label:l("Right chevron","voxel-fse"),value:e.ts_chevron_right,onChange:a=>r({ts_chevron_right:a}),supportsDynamicTags:!0}),o.createElement(K,{label:l("Left chevron","voxel-fse"),value:e.ts_chevron_left,onChange:a=>r({ts_chevron_left:a}),supportsDynamicTags:!0})))}function Ne({attributes:e,setAttributes:r}){return o.createElement(de,{attributes:e,setAttributes:r,stateAttribute:"styleTabOpenPanel",defaultPanel:"chart"},o.createElement(M,{id:"chart",title:l("Chart","voxel-fse")},o.createElement(y,{label:l("Content height","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_chart_height",min:0,max:1e3,availableUnits:["px"]}),o.createElement($,{label:l("Axis","voxel-fse")}),o.createElement(L,{label:l("Typography","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"axis_typo"}),o.createElement(c,{label:l("Text color","voxel-fse"),value:e.ts_axis_typo_col,onChange:a=>r({ts_axis_typo_col:a})}),o.createElement(y,{label:l("Vertical axis width","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"vertical_axis_width",min:50,max:200,availableUnits:["px"]}),o.createElement($,{label:l("Chart lines","voxel-fse")}),o.createElement(O,{label:l("Border","voxel-fse"),value:{borderType:e.chart_line_borderType||"",borderWidth:e.chart_line_borderWidth||{},borderColor:e.chart_line_borderColor||""},onChange:a=>{const t={};a.borderType!==void 0&&(t.chart_line_borderType=a.borderType),a.borderWidth!==void 0&&(t.chart_line_borderWidth=a.borderWidth),a.borderColor!==void 0&&(t.chart_line_borderColor=a.borderColor),r(t)},hideRadius:!0}),o.createElement($,{label:l("Chart Bars","voxel-fse")}),o.createElement(y,{label:l("Bar gap","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"chart_col_gap",min:0,max:100,availableUnits:["px"]}),o.createElement(y,{label:l("Bar width","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"bar_width",min:0,max:100,availableUnits:["px"]}),o.createElement(y,{label:l("Bar radius","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"bar_radius",min:0,max:100,availableUnits:["px"]}),o.createElement(we,{attributes:e,setAttributes:r,showHoverState:!1,showImageControls:!1,showGradientMode:!0}),o.createElement(c,{label:l("Background color (Hover)","voxel-fse"),value:e.bar_bg_hover,onChange:a=>r({bar_bg_hover:a})}),o.createElement(re,{label:l("Box Shadow","voxel-fse"),attributes:e,setAttributes:r,shadowAttributeName:"bar_sh_shadow"}),o.createElement($,{label:l("Bar popup","voxel-fse")}),o.createElement(c,{label:l("Background color","voxel-fse"),value:e.bar_pop_bg,onChange:a=>r({bar_pop_bg:a})}),o.createElement(O,{label:l("Border","voxel-fse"),value:{borderType:e.bar_pop_borderType||"",borderWidth:e.bar_pop_borderWidth||{},borderColor:e.bar_pop_borderColor||""},onChange:a=>{const t={};a.borderType!==void 0&&(t.bar_pop_borderType=a.borderType),a.borderWidth!==void 0&&(t.bar_pop_borderWidth=a.borderWidth),a.borderColor!==void 0&&(t.bar_pop_borderColor=a.borderColor),r(t)},hideRadius:!0}),o.createElement(y,{label:l("Bar radius","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"bar_pop_radius",min:0,max:100,availableUnits:["px"]}),o.createElement(re,{label:l("Box Shadow","voxel-fse"),attributes:e,setAttributes:r,shadowAttributeName:"bar_pop_shadow"}),o.createElement($,{label:l("Bar popup: Value","voxel-fse")}),o.createElement(L,{label:l("Typography","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_primary_typo"}),o.createElement(c,{label:l("Color","voxel-fse"),value:e.ts_primary_color,onChange:a=>r({ts_primary_color:a})}),o.createElement($,{label:l("Bar popup: Label","voxel-fse")}),o.createElement(L,{label:l("Typography","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_secondary_typo"}),o.createElement(c,{label:l("Color","voxel-fse"),value:e.ts_secondary_color,onChange:a=>r({ts_secondary_color:a})})),o.createElement(M,{id:"tabs",title:l("Tabs","voxel-fse")},o.createElement(ne,{attributeName:"tabsState",attributes:e,setAttributes:r,tabs:[{name:"normal",title:l("Normal","voxel-fse")},{name:"hover",title:l("Hover","voxel-fse")}]},a=>o.createElement(o.Fragment,null,a.name==="normal"&&o.createElement(o.Fragment,null,o.createElement($,{label:l("Timeline tabs","voxel-fse")}),o.createElement(me,{label:l("Justify","voxel-fse"),value:e.ts_tabs_justify||"left",options:[{label:l("Left","voxel-fse"),value:"left"},{label:l("Center","voxel-fse"),value:"center"},{label:l("Right","voxel-fse"),value:"flex-end"},{label:l("Space between","voxel-fse"),value:"space-between"},{label:l("Space around","voxel-fse"),value:"space-around"}],onChange:t=>r({ts_tabs_justify:t}),__nextHasNoMarginBottom:!0}),o.createElement(se,{label:l("Padding","voxel-fse"),values:e.ts_tabs_padding||{},onChange:t=>r({ts_tabs_padding:t})}),o.createElement(se,{label:l("Margin","voxel-fse"),values:e.ts_tabs_margin||{},onChange:t=>r({ts_tabs_margin:t})}),o.createElement(L,{label:l("Tab typography","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_tabs_text"}),o.createElement(L,{label:l("Active tab typography","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_tabs_text_active"}),o.createElement(c,{label:l("Text color","voxel-fse"),value:e.ts_tabs_text_color,onChange:t=>r({ts_tabs_text_color:t})}),o.createElement(c,{label:l("Active text color","voxel-fse"),value:e.ts_active_text_color,onChange:t=>r({ts_active_text_color:t})}),o.createElement(c,{label:l("Background","voxel-fse"),value:e.ts_tabs_bg_color,onChange:t=>r({ts_tabs_bg_color:t})}),o.createElement(c,{label:l("Active background","voxel-fse"),value:e.ts_tabs_bg_active_color,onChange:t=>r({ts_tabs_bg_active_color:t})}),o.createElement(O,{label:l("Border","voxel-fse"),value:{borderType:e.ts_tabs_borderType||"",borderWidth:e.ts_tabs_borderWidth||{},borderColor:e.ts_tabs_borderColor||""},onChange:t=>{const n={};t.borderType!==void 0&&(n.ts_tabs_borderType=t.borderType),t.borderWidth!==void 0&&(n.ts_tabs_borderWidth=t.borderWidth),t.borderColor!==void 0&&(n.ts_tabs_borderColor=t.borderColor),r(n)},hideRadius:!0}),o.createElement(c,{label:l("Active border color","voxel-fse"),value:e.ts_tabs_border_active,onChange:t=>r({ts_tabs_border_active:t})}),o.createElement(y,{label:l("Border radius","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_tabs_radius",min:0,max:100,availableUnits:["px"]})),a.name==="hover"&&o.createElement(o.Fragment,null,o.createElement($,{label:l("Timeline tabs","voxel-fse")}),o.createElement(c,{label:l("Text color","voxel-fse"),value:e.ts_tabs_text_color_h,onChange:t=>r({ts_tabs_text_color_h:t})}),o.createElement(c,{label:l("Active text color","voxel-fse"),value:e.ts_tabs_active_text_color_h,onChange:t=>r({ts_tabs_active_text_color_h:t})}),o.createElement(c,{label:l("Border color","voxel-fse"),value:e.ts_tabs_border_color_h,onChange:t=>r({ts_tabs_border_color_h:t})}),o.createElement(c,{label:l("Active border color","voxel-fse"),value:e.ts_tabs_border_h_active,onChange:t=>r({ts_tabs_border_h_active:t})}),o.createElement(c,{label:l("Background","voxel-fse"),value:e.ts_tabs_bg_color_h,onChange:t=>r({ts_tabs_bg_color_h:t})}),o.createElement(c,{label:l("Active background","voxel-fse"),value:e.ts_bg_active_color_h,onChange:t=>r({ts_bg_active_color_h:t})}))))),o.createElement(M,{id:"week-buttons",title:l("Next/Prev week buttons","voxel-fse")},o.createElement(ne,{attributeName:"weekButtonsState",attributes:e,setAttributes:r,tabs:[{name:"normal",title:l("Normal","voxel-fse")},{name:"hover",title:l("Hover","voxel-fse")}]},a=>o.createElement(o.Fragment,null,a.name==="normal"&&o.createElement(o.Fragment,null,o.createElement($,{label:l("Range","voxel-fse")}),o.createElement(L,{label:l("Typography","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"week_range_typo"}),o.createElement(c,{label:l("Text color","voxel-fse"),value:e.week_range_col,onChange:t=>r({week_range_col:t})}),o.createElement($,{label:l("Week buttons","voxel-fse")}),o.createElement(c,{label:l("Button icon color","voxel-fse"),value:e.ts_week_btn_color,onChange:t=>r({ts_week_btn_color:t})}),o.createElement(y,{label:l("Button icon size","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_week_btn_icon_size",min:0,max:100,availableUnits:["px","%"]}),o.createElement(c,{label:l("Button background","voxel-fse"),value:e.ts_week_btn_bg,onChange:t=>r({ts_week_btn_bg:t})}),o.createElement(O,{label:l("Button border","voxel-fse"),value:{borderType:e.ts_week_btn_borderType||"",borderWidth:e.ts_week_btn_borderWidth||{},borderColor:e.ts_week_btn_borderColor||""},onChange:t=>{const n={};t.borderType!==void 0&&(n.ts_week_btn_borderType=t.borderType),t.borderWidth!==void 0&&(n.ts_week_btn_borderWidth=t.borderWidth),t.borderColor!==void 0&&(n.ts_week_btn_borderColor=t.borderColor),r(n)},hideRadius:!0}),o.createElement(y,{label:l("Button border radius","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_week_btn_radius",min:0,max:100,availableUnits:["px","%"]}),o.createElement(y,{label:l("Button size","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_week_btn_size",min:0,max:100,availableUnits:["px","%"]}),o.createElement($,{label:l("Icons","voxel-fse")})),a.name==="hover"&&o.createElement(o.Fragment,null,o.createElement(c,{label:l("Button icon color","voxel-fse"),value:e.ts_week_btn_h,onChange:t=>r({ts_week_btn_h:t})}),o.createElement(c,{label:l("Button background color","voxel-fse"),value:e.ts_week_btn_bg_h,onChange:t=>r({ts_week_btn_bg_h:t})}),o.createElement(c,{label:l("Button border color","voxel-fse"),value:e.ts_week_border_c_h,onChange:t=>r({ts_week_border_c_h:t})}))))),o.createElement(M,{id:"no-activity",title:l("No activity","voxel-fse")},o.createElement(y,{label:l("Content gap","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_nopost_content_Gap",min:0,max:100,availableUnits:["px"]}),o.createElement(y,{label:l("Icon size","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_nopost_ico_size",min:0,max:100,availableUnits:["px"]}),o.createElement(c,{label:l("Icon color","voxel-fse"),value:e.ts_nopost_ico_col,onChange:a=>r({ts_nopost_ico_col:a})}),o.createElement(L,{label:l("Typography","voxel-fse"),attributes:e,setAttributes:r,attributeBaseName:"ts_nopost_typo"}),o.createElement(c,{label:l("Text color","voxel-fse"),value:e.ts_nopost_typo_col,onChange:a=>r({ts_nopost_typo_col:a})})))}function ge(e,r){const a=`.voxel-fse-sales-chart-${r}`,t=[],n=[],_=[];e.ts_chart_height!==void 0&&t.push(`${a} .ts-chart .ts-no-posts, ${a} .ts-chart .chart-content { height: ${e.ts_chart_height}px; }`),e.ts_chart_height_tablet!==void 0&&n.push(`${a} .ts-chart .ts-no-posts, ${a} .ts-chart .chart-content { height: ${e.ts_chart_height_tablet}px; }`),e.ts_chart_height_mobile!==void 0&&_.push(`${a} .ts-chart .ts-no-posts, ${a} .ts-chart .chart-content { height: ${e.ts_chart_height_mobile}px; }`);const m=`${a} .chart-content span`,b=j(e.axis_typo);b.desktop&&t.push(`${m} { ${b.desktop} }`),b.tablet&&n.push(`${m} { ${b.tablet} }`),b.mobile&&_.push(`${m} { ${b.mobile} }`),e.ts_axis_typo_col&&t.push(`${m} { color: ${e.ts_axis_typo_col}; }`),e.vertical_axis_width!==void 0&&t.push(`${a} .chart-content.min-scroll { margin-inline-start: ${e.vertical_axis_width}px; }`),e.vertical_axis_width_tablet!==void 0&&n.push(`${a} .chart-content.min-scroll { margin-inline-start: ${e.vertical_axis_width_tablet}px; }`),e.vertical_axis_width_mobile!==void 0&&_.push(`${a} .chart-content.min-scroll { margin-inline-start: ${e.vertical_axis_width_mobile}px; }`);const E=`${a} .chart-content .bar-values span`,C=F(e,"chart_line_border");C.desktop&&t.push(`${E} { ${C.desktop} }`),e.chart_col_gap!==void 0&&t.push(`${a} .chart-content { grid-gap: ${e.chart_col_gap}px; }`),e.chart_col_gap_tablet!==void 0&&n.push(`${a} .chart-content { grid-gap: ${e.chart_col_gap_tablet}px; }`),e.chart_col_gap_mobile!==void 0&&_.push(`${a} .chart-content { grid-gap: ${e.chart_col_gap_mobile}px; }`),e.bar_width!==void 0&&t.push(`${a} .chart-content .bar-item { width: ${e.bar_width}px; }`),e.bar_width_tablet!==void 0&&n.push(`${a} .chart-content .bar-item { width: ${e.bar_width_tablet}px; }`),e.bar_width_mobile!==void 0&&_.push(`${a} .chart-content .bar-item { width: ${e.bar_width_mobile}px; }`),e.bar_radius!==void 0&&t.push(`${a} .chart-content .bar-item { border-radius: ${e.bar_radius}px; }`),e.bar_radius_tablet!==void 0&&n.push(`${a} .chart-content .bar-item { border-radius: ${e.bar_radius_tablet}px; }`),e.bar_radius_mobile!==void 0&&_.push(`${a} .chart-content .bar-item { border-radius: ${e.bar_radius_mobile}px; }`);const v=`${a} .chart-content .bar-item`,k=Ce(e.bar_bg);k&&t.push(`${v} { ${k} }`),e.bar_bg_hover&&t.push(`${v}:hover { background-color: ${e.bar_bg_hover}; }`);const f=ce(e.bar_sh_shadow);f&&t.push(`${v} { box-shadow: ${f}; }`);const g=`${a} .bar-item-data`;e.bar_pop_bg&&t.push(`${g} { background-color: ${e.bar_pop_bg}; }`);const x=F(e,"bar_pop_border");x.desktop&&t.push(`${g} { ${x.desktop} }`),e.bar_pop_radius!==void 0&&t.push(`${g} { border-radius: ${e.bar_pop_radius}px; }`),e.bar_pop_radius_tablet!==void 0&&n.push(`${g} { border-radius: ${e.bar_pop_radius_tablet}px; }`),e.bar_pop_radius_mobile!==void 0&&_.push(`${g} { border-radius: ${e.bar_pop_radius_mobile}px; }`);const i=ce(e.bar_pop_shadow);i&&t.push(`${g} { box-shadow: ${i}; }`);const N=`${g} li`,w=j(e.ts_primary_typo);w.desktop&&t.push(`${N} { ${w.desktop} }`),w.tablet&&n.push(`${N} { ${w.tablet} }`),w.mobile&&_.push(`${N} { ${w.mobile} }`),e.ts_primary_color&&t.push(`${N} { color: ${e.ts_primary_color}; }`);const R=`${g} li small`,S=j(e.ts_secondary_typo);S.desktop&&t.push(`${R} { ${S.desktop} }`),S.tablet&&n.push(`${R} { ${S.tablet} }`),S.mobile&&_.push(`${R} { ${S.mobile} }`),e.ts_secondary_color&&t.push(`${R} { color: ${e.ts_secondary_color}; }`);const s=`${a} .ts-generic-tabs`;e.ts_tabs_justify&&t.push(`${s} { justify-content: ${e.ts_tabs_justify}; }`);const p=`${a} .ts-generic-tabs li`,h=_e(e,"ts_tabs_margin","margin");h.desktop&&t.push(`${p} { ${h.desktop} }`);const d=`${a} .ts-generic-tabs li a`,B=_e(e,"ts_tabs_padding");B.desktop&&t.push(`${d} { ${B.desktop} }`);const P=j(e.ts_tabs_text);P.desktop&&t.push(`${d} { ${P.desktop} }`),e.ts_tabs_text_color&&t.push(`${d} { color: ${e.ts_tabs_text_color}; }`),e.ts_tabs_bg_color&&t.push(`${d} { background-color: ${e.ts_tabs_bg_color}; }`);const T=F(e,"ts_tabs_border");T.desktop&&t.push(`${d} { ${T.desktop} }`),e.ts_tabs_radius!==void 0&&t.push(`${d} { border-radius: ${e.ts_tabs_radius}px; }`);const V=`${a} .ts-generic-tabs li.ts-tab-active a`,D=j(e.ts_tabs_text_active);D.desktop&&t.push(`${V} { ${D.desktop} }`),e.ts_active_text_color&&t.push(`${V} { color: ${e.ts_active_text_color}; }`),e.ts_tabs_bg_active_color&&t.push(`${V} { background-color: ${e.ts_tabs_bg_active_color}; }`),e.ts_tabs_border_active&&t.push(`${V} { border-color: ${e.ts_tabs_border_active}; }`);const X=`${d}:hover`;e.ts_tabs_text_color_h&&t.push(`${X} { color: ${e.ts_tabs_text_color_h}; }`),e.ts_tabs_border_color_h&&t.push(`${X} { border-color: ${e.ts_tabs_border_color_h}; }`),e.ts_tabs_bg_color_h&&t.push(`${X} { background-color: ${e.ts_tabs_bg_color_h}; }`);const Z=`${a} .ts-generic-tabs li.ts-tab-active a:hover`;e.ts_tabs_active_text_color_h&&t.push(`${Z} { color: ${e.ts_tabs_active_text_color_h}; }`),e.ts_tabs_border_h_active&&t.push(`${Z} { border-color: ${e.ts_tabs_border_h_active}; }`),e.ts_bg_active_color_h&&t.push(`${Z} { background-color: ${e.ts_bg_active_color_h}; }`);const Q=`${a} .ts-chart-nav p`,A=j(e.week_range_typo);A.desktop&&t.push(`${Q} { ${A.desktop} }`),e.week_range_col&&t.push(`${Q} { color: ${e.week_range_col}; }`);const u=`${a} .ts-chart-nav .ts-icon-btn`;e.ts_week_btn_color&&(t.push(`${u} i { color: ${e.ts_week_btn_color}; }`),t.push(`${u} svg { fill: ${e.ts_week_btn_color}; }`)),e.ts_week_btn_icon_size!==void 0&&(t.push(`${u} i { font-size: ${e.ts_week_btn_icon_size}px; }`),t.push(`${u} svg { width: ${e.ts_week_btn_icon_size}px; height: ${e.ts_week_btn_icon_size}px; }`)),e.ts_week_btn_size!==void 0&&t.push(`${u} { width: ${e.ts_week_btn_size}px; height: ${e.ts_week_btn_size}px; min-width: ${e.ts_week_btn_size}px; }`),e.ts_week_btn_bg&&t.push(`${u} { background-color: ${e.ts_week_btn_bg}; }`);const ee=F(e,"ts_week_btn_border");ee.desktop&&t.push(`${u} { ${ee.desktop} }`),e.ts_week_btn_radius!==void 0&&t.push(`${u} { border-radius: ${e.ts_week_btn_radius}px; }`);const H=`${u}:hover`;e.ts_week_btn_h&&(t.push(`${H} i { color: ${e.ts_week_btn_h}; }`),t.push(`${H} svg { fill: ${e.ts_week_btn_h}; }`)),e.ts_week_btn_bg_h&&t.push(`${H} { background-color: ${e.ts_week_btn_bg_h}; }`),e.ts_week_border_c_h&&t.push(`${H} { border-color: ${e.ts_week_border_c_h}; }`);const U=`${a} .ts-no-posts`;e.ts_nopost_content_Gap!==void 0&&t.push(`${U} { grid-gap: ${e.ts_nopost_content_Gap}px; }`);const oe=`${U} i, ${U} svg`;e.ts_nopost_ico_size!==void 0&&t.push(`${oe} { font-size: ${e.ts_nopost_ico_size}px; width: ${e.ts_nopost_ico_size}px; height: ${e.ts_nopost_ico_size}px; }`),e.ts_nopost_ico_col&&t.push(`${oe} { color: ${e.ts_nopost_ico_col}; fill: ${e.ts_nopost_ico_col}; }`);const te=`${U} p`,ae=j(e.ts_nopost_typo);ae.desktop&&t.push(`${te} { ${ae.desktop} }`),e.ts_nopost_typo_col&&t.push(`${te} { color: ${e.ts_nopost_typo_col}; }`);let J=t.join(`
`);return n.length>0&&(J+=`
@media (max-width: 1024px) {
${n.join(`
`)}
}`),_.length>0&&(J+=`
@media (max-width: 767px) {
${_.join(`
`)}
}`),J}function Re({attributes:e,setAttributes:r,clientId:a}){const t=e.blockId||a;z(()=>{e.blockId||r({blockId:a})},[e.blockId,a,r]),z(()=>{const x="voxel-bar-chart-css";if(!document.getElementById(x)){const i=document.createElement("link");i.id=x,i.rel="stylesheet";const w=(window.Voxel_Config?.site_url||window.location.origin).replace(/\/$/,"");i.href=`${w}/wp-content/themes/voxel/assets/dist/bar-chart.css?ver=1.7.5.2`,document.head.appendChild(i)}},[]);const[n,_]=I(null),[m,b]=I(!0),[E,C]=I(null),v=ve(e,{blockId:t,baseClass:"voxel-fse-sales-chart",selectorPrefix:"voxel-fse-sales-chart"}),k=le(()=>ge(e,t),[e,t]),f=le(()=>[v.responsiveCSS,k].filter(Boolean).join(`
`),[v.responsiveCSS,k]),g=he({id:v.elementId,className:v.className,style:v.styles,...v.customAttrs});return z(()=>{b(!0),C(null),$e({path:"/voxel-fse/v1/sales-chart"}).then(x=>{_(x),b(!1)}).catch(x=>{C(x.message||l("Failed to load chart data","voxel-fse")),b(!1)})},[]),o.createElement(o.Fragment,null,o.createElement(xe,null,o.createElement(Ee,{tabs:[{id:"content",label:l("Content","voxel-fse"),icon:"",render:()=>o.createElement(Be,{attributes:e,setAttributes:r})},{id:"style",label:l("Style","voxel-fse"),icon:"",render:()=>o.createElement(Ne,{attributes:e,setAttributes:r})}],includeAdvancedTab:!0,includeVoxelTab:!0,attributes:e,setAttributes:r,defaultTab:"content"})),o.createElement("div",{...g},f&&o.createElement("style",{dangerouslySetInnerHTML:{__html:f}}),E&&o.createElement("div",{className:"voxel-fse-error"},o.createElement("p",null,E)),!E&&o.createElement(Se,{attributes:e,config:n,isLoading:m,error:E})))}function Te({attributes:e}){const r=e.blockId||"sales-chart",a=ve(e,{blockId:r,baseClass:"voxel-fse-sales-chart",selectorPrefix:"voxel-fse-sales-chart"}),t=ge(e,r),n=[a.responsiveCSS,t].filter(Boolean).join(`
`),_=he.save({id:a.elementId,className:a.className,style:a.styles,"data-visibility-behavior":e.visibilityBehavior||void 0,"data-visibility-rules":e.visibilityRules?.length?JSON.stringify(e.visibilityRules):void 0,"data-loop-source":e.loopSource||void 0,"data-loop-limit":e.loopLimit||void 0,"data-loop-offset":e.loopOffset||void 0,...a.customAttrs}),m={activeChart:e.ts_active_chart,chartIcon:e.chart_icon,chevronRight:e.ts_chevron_right,chevronLeft:e.ts_chevron_left};return o.createElement("div",{..._},n&&o.createElement("style",{dangerouslySetInnerHTML:{__html:n}}),ue(e,!1,void 0,void 0,a.uniqueSelector),o.createElement("script",{type:"application/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(m)}}),o.createElement("div",{className:"ts-vendor-stats"},o.createElement("ul",{className:"ts-generic-tabs simplify-ul flexify bar-chart-tabs"},o.createElement("li",{className:e.ts_active_chart==="this-week"?"ts-tab-active":""},o.createElement("a",{href:"#"},"Week")),o.createElement("li",{className:e.ts_active_chart==="this-month"?"ts-tab-active":""},o.createElement("a",{href:"#"},"Month")),o.createElement("li",{className:e.ts_active_chart==="this-year"?"ts-tab-active":""},o.createElement("a",{href:"#"},"Year")),o.createElement("li",{className:e.ts_active_chart==="all-time"?"ts-tab-active":""},o.createElement("a",{href:"#"},"All time"))),o.createElement("div",{className:`ts-chart chart-${e.ts_active_chart}`},o.createElement("div",{className:"ts-no-posts"},W(e.chart_icon)||o.createElement(G,null),o.createElement("p",null,"Loading chart...")),o.createElement("div",{className:"ts-chart-nav"},o.createElement("p",null,"Loading..."),o.createElement("a",{href:"#",className:"ts-icon-btn vx-disabled"},W(e.ts_chevron_left)||o.createElement(be,null)),o.createElement("a",{href:"#",className:"ts-icon-btn vx-disabled"},W(e.ts_chevron_right)||o.createElement(fe,null))))))}const Le="https://schemas.wp.org/trunk/block.json",je=3,Ie="voxel-fse/sales-chart",ze="1.0.0",We="Sales Chart (VX)",Me="voxel-fse",Pe="Display vendor sales statistics with bar chart visualization. Requires Stripe Connect.",Ve=["chart","sales","bar","statistics","stripe","vendor"],De="voxel-fse",He={html:!1,anchor:!0,align:["wide","full"],className:!0,customClassName:!0},Ue={blockId:{type:"string",default:""},contentTabOpenPanel:{type:"string",default:"chart"},styleTabOpenPanel:{type:"string",default:"chart"},ts_active_chart:{type:"string",default:"this-week"},chart_icon:{type:"object",default:{library:"",value:""}},ts_chevron_right:{type:"object",default:{library:"",value:""}},ts_chevron_left:{type:"object",default:{library:"",value:""}},ts_chart_height:{type:"number"},ts_chart_height_tablet:{type:"number"},ts_chart_height_mobile:{type:"number"},ts_axis_typo_col:{type:"string"},vertical_axis_width:{type:"number"},vertical_axis_width_tablet:{type:"number"},vertical_axis_width_mobile:{type:"number"},chart_col_gap:{type:"number"},chart_col_gap_tablet:{type:"number"},chart_col_gap_mobile:{type:"number"},bar_width:{type:"number"},bar_width_tablet:{type:"number"},bar_width_mobile:{type:"number"},bar_radius:{type:"number"},bar_radius_tablet:{type:"number"},bar_radius_mobile:{type:"number"},bar_bg_hover:{type:"string"},bar_pop_bg:{type:"string"},bar_pop_radius:{type:"number"},bar_pop_radius_tablet:{type:"number"},bar_pop_radius_mobile:{type:"number"},ts_primary_color:{type:"string"},ts_secondary_color:{type:"string"},chart_line_borderType:{type:"string"},chart_line_borderWidth:{type:"object"},chart_line_borderColor:{type:"string"},bar_pop_borderType:{type:"string"},bar_pop_borderWidth:{type:"object"},bar_pop_borderColor:{type:"string"},axis_typo:{type:"object"},ts_primary_typo:{type:"object"},ts_secondary_typo:{type:"object"},bar_sh_shadow:{type:"object"},bar_pop_shadow:{type:"object"},bar_bg:{type:"object"},tabsState:{type:"string",default:"normal"},ts_tabs_justify:{type:"string",default:"left"},ts_tabs_padding:{type:"object"},ts_tabs_margin:{type:"object"},ts_tabs_text_color:{type:"string"},ts_active_text_color:{type:"string"},ts_tabs_bg_color:{type:"string"},ts_tabs_bg_active_color:{type:"string"},ts_tabs_border_active:{type:"string"},ts_tabs_radius:{type:"number"},ts_tabs_text_color_h:{type:"string"},ts_tabs_active_text_color_h:{type:"string"},ts_tabs_border_color_h:{type:"string"},ts_tabs_border_h_active:{type:"string"},ts_tabs_bg_color_h:{type:"string"},ts_bg_active_color_h:{type:"string"},ts_tabs_borderType:{type:"string"},ts_tabs_borderWidth:{type:"object"},ts_tabs_borderColor:{type:"string"},ts_tabs_text:{type:"object"},ts_tabs_text_active:{type:"object"},weekButtonsState:{type:"string",default:"normal"},week_range_col:{type:"string"},ts_week_btn_color:{type:"string"},ts_week_btn_icon_size:{type:"number"},ts_week_btn_icon_size_tablet:{type:"number"},ts_week_btn_icon_size_mobile:{type:"number"},ts_week_btn_bg:{type:"string"},ts_week_btn_radius:{type:"number"},ts_week_btn_radius_tablet:{type:"number"},ts_week_btn_radius_mobile:{type:"number"},ts_week_btn_size:{type:"number"},ts_week_btn_size_tablet:{type:"number"},ts_week_btn_size_mobile:{type:"number"},ts_week_btn_h:{type:"string"},ts_week_btn_bg_h:{type:"string"},ts_week_border_c_h:{type:"string"},ts_week_btn_borderType:{type:"string"},ts_week_btn_borderWidth:{type:"object"},ts_week_btn_borderColor:{type:"string"},week_range_typo:{type:"object"},ts_nopost_content_Gap:{type:"number"},ts_nopost_content_Gap_tablet:{type:"number"},ts_nopost_content_Gap_mobile:{type:"number"},ts_nopost_ico_size:{type:"number"},ts_nopost_ico_size_tablet:{type:"number"},ts_nopost_ico_size_mobile:{type:"number"},ts_nopost_ico_col:{type:"string"},ts_nopost_typo_col:{type:"string"},ts_nopost_typo:{type:"object"},_comment_voxel_tab:"VoxelTab attributes for visibility and loop features",visibilityBehavior:{type:"string",default:"show",enum:["show","hide"]},visibilityRules:{type:"array",default:[],items:{type:"object"}},loopEnabled:{type:"boolean",default:!1},loopSource:{type:"string",default:""},loopProperty:{type:"string",default:""},loopLimit:{type:"string",default:""},loopOffset:{type:"string",default:""}},Oe="file:./index.js",Fe="file:./frontend.js",Ge="file:./render.php",pe={$schema:Le,apiVersion:je,name:Ie,version:ze,title:We,category:Me,description:Pe,keywords:Ve,textdomain:De,supports:He,attributes:Ue,editorScript:Oe,viewScript:Fe,render:Ge};ye(pe.name,{...pe,icon:ke,edit:Re,save:Te});
