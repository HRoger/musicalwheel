(function(L,i,I){"use strict";function w(e,o){return!e||!e.value?null:e.library==="icon"?React.createElement("i",{className:e.value}):e.library==="svg"&&e.value?e.value.startsWith("<svg")||e.value.startsWith("<?xml")?React.createElement("span",{className:"ts-icon-svg",dangerouslySetInnerHTML:{__html:e.value}}):React.createElement("img",{src:e.value,alt:"",className:"ts-icon-svg"}):null}const j={deleteIcon:{library:"line-awesome",value:"las la-trash-alt"},noProductsIcon:{library:"line-awesome",value:"las la-box"},loginIcon:{library:"line-awesome",value:"las la-sign-in-alt"},emailIcon:{library:"line-awesome",value:"las la-envelope"},userIcon:{library:"line-awesome",value:"las la-user"},uploadIcon:{library:"line-awesome",value:"las la-cloud-upload-alt"},shippingIcon:{library:"line-awesome",value:"las la-shipping-fast"},minusIcon:{library:"line-awesome",value:"las la-minus"},plusIcon:{library:"line-awesome",value:"las la-plus"},checkoutIcon:{library:"line-awesome",value:"las la-arrow-right"},continueIcon:{library:"line-awesome",value:"las la-arrow-right"}};function n(e,o){return e&&typeof e=="object"&&"library"in e?e:j[o]||{library:"line-awesome",value:"las la-question"}}function F(e,o){try{return new Intl.NumberFormat(void 0,{style:"currency",currency:o||"USD"}).format(e/100)}catch{return`${(e/100).toFixed(2)} ${o}`}}function O({item:e,attributes:o,onUpdateQuantity:r,onRemoveItem:t,context:a}){const d=e.product_mode==="regular"?e.value.stock?.quantity:e.value.variations?.quantity,h=()=>{d!==void 0&&d>1&&r?r(e.key,d-1):t&&t(e.key)},B=()=>{d!==void 0&&r&&r(e.key,d+1)},m=()=>{t&&t(e.key)};return React.createElement("li",{className:`${e._disabled?"vx-disabled":""} ${e.custom_class||""}`},React.createElement("div",{className:"cart-image",dangerouslySetInnerHTML:{__html:e.logo}}),React.createElement("div",{className:"cart-item-details"},React.createElement("a",{href:e.link},e.title),e.subtitle&&React.createElement("span",null,e.subtitle),e.pricing.total_amount===0?React.createElement("span",null,I.__("Free","voxel-fse")):React.createElement("span",null,F(e.pricing.total_amount,e.currency))),e.quantity.enabled?React.createElement("div",{className:"cart-stepper"},React.createElement("a",{href:"#",className:"ts-icon-btn ts-smaller",onClick:s=>{s.preventDefault(),a==="frontend"&&h()}},w(n(o.minusIcon,"minusIcon"))),React.createElement("span",null,d),React.createElement("a",{href:"#",className:"ts-icon-btn ts-smaller",onClick:s=>{s.preventDefault(),a==="frontend"&&B()}},w(n(o.plusIcon,"plusIcon")))):React.createElement("div",{className:"cart-stepper"},React.createElement("a",{href:"#",className:"ts-icon-btn ts-smaller",onClick:s=>{s.preventDefault(),a==="frontend"&&m()}},w(n(o.deleteIcon,"deleteIcon")))))}function M({attributes:e,config:o,items:r,context:t,isLoading:a,error:d,onUpdateQuantity:h,onRemoveItem:B,onCheckout:m}){const s=i.useMemo(()=>({icons:{deleteIcon:n(e.deleteIcon,"deleteIcon"),noProductsIcon:n(e.noProductsIcon,"noProductsIcon"),loginIcon:n(e.loginIcon,"loginIcon"),emailIcon:n(e.emailIcon,"emailIcon"),userIcon:n(e.userIcon,"userIcon"),uploadIcon:n(e.uploadIcon,"uploadIcon"),shippingIcon:n(e.shippingIcon,"shippingIcon"),minusIcon:n(e.minusIcon,"minusIcon"),plusIcon:n(e.plusIcon,"plusIcon"),checkoutIcon:n(e.checkoutIcon,"checkoutIcon"),continueIcon:n(e.continueIcon,"continueIcon")},sectionSpacing:e.sectionSpacing||void 0,titleColor:e.titleColor||void 0}),[e]),T=i.useMemo(()=>{if(!r)return 0;let _=0;return Object.values(r).forEach(v=>{_+=v.pricing.total_amount}),_},[r]),b=r&&Object.keys(r).length>0,H=o?.currency||"USD";return a?React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(s)}}),React.createElement("div",{className:"vx-loading-screen ts-checkout-loading"},React.createElement("div",{className:"ts-no-posts"},React.createElement("span",{className:"ts-loader"})))):d?React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(s)}}),React.createElement("div",{className:"ts-no-posts"},React.createElement("p",null,d))):t==="editor"?React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(s)}}),React.createElement("div",{className:"ts-form ts-checkout ts-checkout-regular"},React.createElement("div",{className:"ts-cart-head"},React.createElement("h3",null,I.__("Your Cart","voxel-fse"))),React.createElement("div",{className:"checkout-section form-field-grid"},React.createElement("ul",{className:"simplify-ul ts-cart-list"},React.createElement("li",null,React.createElement("div",{className:"cart-image",style:{width:"60px",height:"60px",backgroundColor:"#e0e0e0",borderRadius:"8px"}}),React.createElement("div",{className:"cart-item-details"},React.createElement("a",{href:"#"},I.__("Sample Product","voxel-fse")),React.createElement("span",null,I.__("Product description","voxel-fse")),React.createElement("span",null,"$99.00")),React.createElement("div",{className:"cart-stepper"},React.createElement("a",{href:"#",className:"ts-icon-btn ts-smaller"},w(n(e.minusIcon,"minusIcon"))),React.createElement("span",null,"1"),React.createElement("a",{href:"#",className:"ts-icon-btn ts-smaller"},w(n(e.plusIcon,"plusIcon"))))))),React.createElement("div",{className:"ts-cost-calculator"},React.createElement("ul",{className:"simplify-ul flexify"},React.createElement("li",{className:"cost-total"},React.createElement("span",null,I.__("Total","voxel-fse")),React.createElement("span",null,"$99.00")))),React.createElement("button",{type:"button",className:"ts-btn ts-btn-2 form-btn"},w(n(e.checkoutIcon,"checkoutIcon")),I.__("Proceed to checkout","voxel-fse")))):b?React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(s)}}),React.createElement("div",{className:"ts-form ts-checkout ts-checkout-regular"},React.createElement("div",{className:"ts-cart-head"},React.createElement("h3",null,I.__("Your Cart","voxel-fse"))),React.createElement("div",{className:"checkout-section form-field-grid"},React.createElement("ul",{className:"simplify-ul ts-cart-list"},Object.values(r).map(_=>React.createElement(O,{key:_.key,item:_,attributes:e,onUpdateQuantity:h,onRemoveItem:B,context:t})))),React.createElement("div",{className:"ts-cost-calculator"},React.createElement("ul",{className:"simplify-ul flexify"},React.createElement("li",{className:"cost-total"},React.createElement("span",null,I.__("Total","voxel-fse")),React.createElement("span",null,F(T,H))))),React.createElement("button",{type:"button",className:"ts-btn ts-btn-2 form-btn",onClick:()=>{m&&m()}},w(n(e.checkoutIcon,"checkoutIcon")),I.__("Proceed to checkout","voxel-fse")))):React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(s)}}),React.createElement("div",{className:"ts-form ts-checkout ts-checkout-regular"},React.createElement("div",{className:"ts-no-posts"},w(n(e.noProductsIcon,"noProductsIcon")),React.createElement("p",null,I.__("Your cart is empty","voxel-fse")))))}function P(){if(typeof window<"u"&&window.wpApiSettings?.root)return window.wpApiSettings.root.replace(/\/wp-json\/?$/,"")+"?vx=1";if(typeof document<"u"){const e=document.querySelector('link[rel="https://api.w.org/"]');if(e){const o=e.getAttribute("href");if(o)return o.replace(/\/wp-json\/?$/,"")+"?vx=1"}}return typeof window<"u"?window.location.origin+"?vx=1":"/?vx=1"}function $(){const e=P();try{return new URL(e).pathname.replace(/\/$/,"")}catch{return""}}function A(){if(typeof window<"u"&&window.wpApiSettings?.root)return window.wpApiSettings.root;if(typeof document<"u"){const o=document.querySelector('link[rel="https://api.w.org/"]');if(o){const r=o.getAttribute("href");if(r)return r}}const e=$();return typeof window<"u"?window.location.origin+e+"/wp-json/":"/wp-json/"}function D(){return A()}function k(){const e=window;return typeof window<"u"&&e.Voxel_Config?.ajax_url?e.Voxel_Config.ajax_url:P().replace("?vx=1","")}function U(e){const o=e.querySelector("script.vxconfig");if(o&&o.textContent)try{return JSON.parse(o.textContent)}catch(r){console.error("Failed to parse vxconfig:",r)}return null}const p={deleteIcon:{library:"icon",value:"las la-trash-alt"},noProductsIcon:{library:"icon",value:"las la-box"},loginIcon:{library:"icon",value:"las la-sign-in-alt"},emailIcon:{library:"icon",value:"las la-envelope"},userIcon:{library:"icon",value:"las la-user"},uploadIcon:{library:"icon",value:"las la-cloud-upload-alt"},shippingIcon:{library:"icon",value:"las la-shipping-fast"},minusIcon:{library:"icon",value:"las la-minus"},plusIcon:{library:"icon",value:"las la-plus"},checkoutIcon:{library:"icon",value:"las la-arrow-right"},continueIcon:{library:"icon",value:"las la-arrow-right"}};function q(e){return{blockId:"",deleteIcon:e.icons?.deleteIcon||p.deleteIcon,noProductsIcon:e.icons?.noProductsIcon||p.noProductsIcon,loginIcon:e.icons?.loginIcon||p.loginIcon,emailIcon:e.icons?.emailIcon||p.emailIcon,userIcon:e.icons?.userIcon||p.userIcon,uploadIcon:e.icons?.uploadIcon||p.uploadIcon,shippingIcon:e.icons?.shippingIcon||p.shippingIcon,minusIcon:e.icons?.minusIcon||p.minusIcon,plusIcon:e.icons?.plusIcon||p.plusIcon,checkoutIcon:e.icons?.checkoutIcon||p.checkoutIcon,continueIcon:e.icons?.continueIcon||p.continueIcon,sectionSpacing:e.sectionSpacing||40,sectionSpacing_tablet:null,sectionSpacing_mobile:null,titleTypography:{},titleColor:e.titleColor||"",emptyCartGap:e.emptyCartGap??null,emptyCartGap_tablet:null,emptyCartGap_mobile:null,emptyCartIconSize:e.emptyCartIconSize??null,emptyCartIconSize_tablet:null,emptyCartIconSize_mobile:null,emptyCartIconColor:e.emptyCartIconColor||"",emptyCartTypography:{},emptyCartTextColor:e.emptyCartTextColor||"",primaryBtnTypography:{},primaryBtnBorderType:"",primaryBtnBorderWidth:{},primaryBtnBorderColor:e.primaryBtnBorderColor||"",primaryBtnRadius:e.primaryBtnRadius??null,primaryBtnRadius_tablet:null,primaryBtnRadius_mobile:null,primaryBtnBoxShadow:{},primaryBtnTextColor:e.primaryBtnTextColor||"",primaryBtnBgColor:e.primaryBtnBgColor||"",primaryBtnIconSize:e.primaryBtnIconSize??null,primaryBtnIconSize_tablet:null,primaryBtnIconSize_mobile:null,primaryBtnIconColor:e.primaryBtnIconColor||"",primaryBtnIconSpacing:e.primaryBtnIconSpacing??null,primaryBtnIconSpacing_tablet:null,primaryBtnIconSpacing_mobile:null,primaryBtnTextColorHover:e.primaryBtnTextColorHover||"",primaryBtnBgColorHover:e.primaryBtnBgColorHover||"",primaryBtnBorderColorHover:e.primaryBtnBorderColorHover||"",primaryBtnBoxShadowHover:{},primaryBtnIconColorHover:e.primaryBtnIconColorHover||"",secondaryBtnTypography:{},secondaryBtnRadius:e.secondaryBtnRadius??null,secondaryBtnRadius_tablet:null,secondaryBtnRadius_mobile:null,secondaryBtnTextColor:e.secondaryBtnTextColor||"",secondaryBtnPadding:{},secondaryBtnPadding_tablet:{},secondaryBtnPadding_mobile:{},secondaryBtnBgColor:e.secondaryBtnBgColor||"",secondaryBtnBorderType:"",secondaryBtnBorderWidth:{},secondaryBtnBorderColor:e.secondaryBtnBorderColor||"",secondaryBtnIconSize:e.secondaryBtnIconSize??null,secondaryBtnIconSize_tablet:null,secondaryBtnIconSize_mobile:null,secondaryBtnIconSpacing:e.secondaryBtnIconSpacing??null,secondaryBtnIconSpacing_tablet:null,secondaryBtnIconSpacing_mobile:null,secondaryBtnIconColor:e.secondaryBtnIconColor||"",secondaryBtnTextColorHover:e.secondaryBtnTextColorHover||"",secondaryBtnBgColorHover:e.secondaryBtnBgColorHover||"",secondaryBtnBorderColorHover:e.secondaryBtnBorderColorHover||"",secondaryBtnIconColorHover:e.secondaryBtnIconColorHover||"",loaderColor1:e.loaderColor1||"",loaderColor2:e.loaderColor2||"",checkboxBorderColor:e.checkboxBorderColor||"",checkboxSelectedBgColor:e.checkboxSelectedBgColor||"",checkboxSelectedBoxShadow:{},cartItemSpacing:e.cartItemSpacing??null,cartItemSpacing_tablet:null,cartItemSpacing_mobile:null,cartItemContentSpacing:e.cartItemContentSpacing??null,cartItemContentSpacing_tablet:null,cartItemContentSpacing_mobile:null,cartPictureSize:e.cartPictureSize??null,cartPictureSize_tablet:null,cartPictureSize_mobile:null,cartPictureRadius:e.cartPictureRadius??null,cartPictureRadius_tablet:null,cartPictureRadius_mobile:null,cartTitleTypography:{},cartTitleColor:e.cartTitleColor||"",cartSubtitleTypography:{},cartSubtitleColor:e.cartSubtitleColor||"",iconBtnColor:e.iconBtnColor||"",iconBtnBgColor:e.iconBtnBgColor||"",iconBtnBorderType:"",iconBtnBorderWidth:{},iconBtnBorderColor:e.iconBtnBorderColor||"",iconBtnRadius:e.iconBtnRadius??null,iconBtnRadius_tablet:null,iconBtnRadius_mobile:null,iconBtnValueSize:e.iconBtnValueSize??null,iconBtnValueColor:e.iconBtnValueColor||"",iconBtnColorHover:e.iconBtnColorHover||"",iconBtnBgColorHover:e.iconBtnBgColorHover||"",iconBtnBorderColorHover:e.iconBtnBorderColorHover||"",dropdownTypography:{},dropdownBoxShadow:{},dropdownBgColor:e.dropdownBgColor||"",dropdownTextColor:e.dropdownTextColor||"",dropdownBorderType:"",dropdownBorderWidth:{},dropdownBorderColor:e.dropdownBorderColor||"",dropdownRadius:e.dropdownRadius??null,dropdownRadius_tablet:null,dropdownRadius_mobile:null,dropdownHeight:e.dropdownHeight??null,dropdownHeight_tablet:null,dropdownHeight_mobile:null,dropdownIconColor:e.dropdownIconColor||"",dropdownIconSize:e.dropdownIconSize??24,dropdownIconSize_tablet:null,dropdownIconSize_mobile:null,dropdownIconSpacing:e.dropdownIconSpacing??10,dropdownIconSpacing_tablet:null,dropdownIconSpacing_mobile:null,dropdownHideChevron:e.dropdownHideChevron||!1,dropdownChevronColor:e.dropdownChevronColor||"",dropdownBgColorHover:e.dropdownBgColorHover||"",dropdownTextColorHover:e.dropdownTextColorHover||"",dropdownBorderColorHover:e.dropdownBorderColorHover||"",dropdownIconColorHover:e.dropdownIconColorHover||"",dropdownBoxShadowHover:{},dropdownTypographyFilled:{},dropdownBgColorFilled:e.dropdownBgColorFilled||"",dropdownTextColorFilled:e.dropdownTextColorFilled||"",dropdownIconColorFilled:e.dropdownIconColorFilled||"",dropdownBorderColorFilled:e.dropdownBorderColorFilled||"",dropdownBorderWidthFilled:null,dropdownBoxShadowFilled:{},shipToTypography:{},shipToTextColor:e.shipToTextColor||"",shipToLinkColor:e.shipToLinkColor||"",dividerTypography:{},dividerTextColor:e.dividerTextColor||"",dividerLineColor:e.dividerLineColor||"",dividerLineHeight:e.dividerLineHeight??null,subtotalTypography:{},subtotalTextColor:e.subtotalTextColor||"",fieldLabelTypography:{},fieldLabelColor:e.fieldLabelColor||"",fieldLabelLinkColor:e.fieldLabelLinkColor||"",inputPlaceholderColor:e.inputPlaceholderColor||"",inputPlaceholderTypography:{},inputValueColor:e.inputValueColor||"",inputValueTypography:{},inputBgColor:e.inputBgColor||"",inputBorderType:"",inputBorderWidth:{},inputBorderColor:e.inputBorderColor||"",inputPadding:{},inputPadding_tablet:{},inputPadding_mobile:{},inputHeight:e.inputHeight??null,inputHeight_tablet:null,inputHeight_mobile:null,inputRadius:e.inputRadius??null,inputRadius_tablet:null,inputRadius_mobile:null,inputWithIconPadding:{},inputWithIconPadding_tablet:{},inputWithIconPadding_mobile:{},inputIconColor:e.inputIconColor||"",inputIconSize:e.inputIconSize??null,inputIconSize_tablet:null,inputIconSize_mobile:null,inputIconMargin:e.inputIconMargin??null,inputIconMargin_tablet:null,inputIconMargin_mobile:null,textareaPadding:{},textareaPadding_tablet:{},textareaPadding_mobile:{},textareaRadius:e.textareaRadius??null,textareaRadius_tablet:null,textareaRadius_mobile:null,inputBgColorHover:e.inputBgColorHover||"",inputBorderColorHover:e.inputBorderColorHover||"",inputPlaceholderColorHover:e.inputPlaceholderColorHover||"",inputValueColorHover:e.inputValueColorHover||"",inputIconColorHover:e.inputIconColorHover||"",inputBgColorActive:e.inputBgColorActive||"",inputBorderColorActive:e.inputBorderColorActive||"",inputPlaceholderColorActive:e.inputPlaceholderColorActive||"",inputValueColorActive:e.inputValueColorActive||"",cardsGap:e.cardsGap??null,cardsGap_tablet:null,cardsGap_mobile:null,cardsBgColor:e.cardsBgColor||"",cardsBorderType:"",cardsBorderWidth:{},cardsBorderColor:e.cardsBorderColor||"",cardsRadius:e.cardsRadius??null,cardsRadius_tablet:null,cardsRadius_mobile:null,cardsPrimaryTypography:{},cardsPrimaryColor:e.cardsPrimaryColor||"",cardsSecondaryTypography:{},cardsSecondaryColor:e.cardsSecondaryColor||"",cardsPriceTypography:{},cardsPriceColor:e.cardsPriceColor||"",cardsImageRadius:e.cardsImageRadius??null,cardsImageRadius_tablet:null,cardsImageRadius_mobile:null,cardsImageSize:e.cardsImageSize??null,cardsImageSize_tablet:null,cardsImageSize_mobile:null,cardsSelectedBgColor:e.cardsSelectedBgColor||"",cardsSelectedBorderColor:e.cardsSelectedBorderColor||"",cardsSelectedBoxShadow:{},cardsSelectedPrimaryTypography:{},fileFieldGap:e.fileFieldGap??null,fileFieldGap_tablet:null,fileFieldGap_mobile:null,fileSelectIconColor:e.fileSelectIconColor||"",fileSelectIconSize:e.fileSelectIconSize??null,fileSelectIconSize_tablet:null,fileSelectIconSize_mobile:null,fileSelectBgColor:e.fileSelectBgColor||"",fileSelectBorderType:"",fileSelectBorderWidth:{},fileSelectBorderColor:e.fileSelectBorderColor||"",fileSelectRadius:e.fileSelectRadius??null,fileSelectRadius_tablet:null,fileSelectRadius_mobile:null,fileSelectTypography:{},fileSelectTextColor:e.fileSelectTextColor||"",addedFileRadius:e.addedFileRadius??null,addedFileRadius_tablet:null,addedFileRadius_mobile:null,addedFileBgColor:e.addedFileBgColor||"",addedFileIconColor:e.addedFileIconColor||"",addedFileIconSize:e.addedFileIconSize??null,addedFileIconSize_tablet:null,addedFileIconSize_mobile:null,addedFileTypography:{},addedFileTextColor:e.addedFileTextColor||"",removeFileBgColor:e.removeFileBgColor||"",removeFileBgColorHover:e.removeFileBgColorHover||"",removeFileColor:e.removeFileColor||"",removeFileColorHover:e.removeFileColorHover||"",removeFileRadius:e.removeFileRadius??null,removeFileRadius_tablet:null,removeFileRadius_mobile:null,removeFileSize:e.removeFileSize??null,removeFileIconSize:e.removeFileIconSize??null,fileSelectIconColorHover:e.fileSelectIconColorHover||"",fileSelectBgColorHover:e.fileSelectBgColorHover||"",fileSelectBorderColorHover:e.fileSelectBorderColorHover||"",fileSelectTextColorHover:e.fileSelectTextColorHover||"",blockMargin:{},blockMargin_tablet:{},blockMargin_mobile:{},blockPadding:{},blockPadding_tablet:{},blockPadding_mobile:{},hideDesktop:!1,hideTablet:!1,hideMobile:!1,customClasses:"",customCSS:""}}async function W(){const e=D();try{const o=await fetch(`${e}voxel-fse/v1/cart/config`,{credentials:"same-origin"});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return await o.json()}catch(o){return console.error("Failed to fetch cart config:",o),null}}async function G(e,o){const r=k();try{const t=localStorage.getItem("voxel:guest_cart"),a=o?"products.get_cart_items":"products.get_guest_cart_items",d=new FormData;d.append("_wpnonce",e.nonce.cart),t&&d.append("guest_cart",t);const h=await fetch(`${r}?vx=1&action=${a}`,{method:"POST",credentials:"same-origin",body:d});if(!h.ok)throw new Error(`HTTP error! status: ${h.status}`);const B=await h.text();if(!B||B.trim()==="")return console.warn("Empty response from cart items endpoint"),{};let m;try{m=JSON.parse(B)}catch{throw console.error("Failed to parse cart items response:",B),new Error("Invalid JSON response from server")}return m.success?(o&&t&&localStorage.removeItem("voxel:guest_cart"),m.items||{}):(console.error("Failed to fetch cart items:",m.message),null)}catch(t){return console.error("Failed to fetch cart items:",t),null}}function V({attributes:e}){const[o,r]=i.useState(null),[t,a]=i.useState(null),[d,h]=i.useState(!0),[B,m]=i.useState(null),[s,T]=i.useState({first_name:"",last_name:"",country:null,state:"",address:"",zip:"",zone:null,rate:null,status:"pending_setup",vendors:{}}),[b,H]=i.useState({email:"",sending_code:!1,sent_code:!1,code:"",registered:!1,terms_agreed:!1}),[_,v]=i.useState({enabled:!1,content:""});i.useEffect(()=>{let l=!1;async function u(){const c=await W();if(l)return;if(!c){m("Failed to load cart configuration"),h(!1);return}r(c);const g=await G(c,c.is_logged_in);l||(a(g!==null?g:{}),h(!1))}return u(),()=>{l=!0}},[]);const J=i.useCallback(async(l,u)=>{if(!o||!t)return;const c=t[l];if(!c)return;const g={...t};g[l]={...c,_disabled:!0},a(g);try{const E=k(),y=o.is_logged_in||b.registered,z=y?"products.update_cart_item_quantity":"products.update_guest_cart_item_quantity",R=new FormData;if(R.append("item_key",l),R.append("item_quantity",String(u)),R.append("_wpnonce",o.nonce.cart),!y){const S=localStorage.getItem("voxel:guest_cart");S&&R.append("guest_cart",S)}const f=await(await fetch(`${E}?vx=1&action=${z}`,{method:"POST",credentials:"same-origin",body:R})).json();f.success&&f.item?(a(S=>S&&{...S,[l]:f.item}),y||N({...t,[l]:f.item})):(a(S=>S&&{...S,[l]:{...c,_disabled:!1}}),alert(f.message||"Failed to update quantity"))}catch(E){a(y=>y&&{...y,[l]:{...c,_disabled:!1}}),console.error("Failed to update quantity:",E)}},[o,t,b.registered]),Y=i.useCallback(async l=>{if(!o||!t||!t[l])return;const c={...t};delete c[l];try{const g=k();if(o.is_logged_in||b.registered){const y=new FormData;y.append("item_key",l),y.append("_wpnonce",o.nonce.cart);const R=await(await fetch(`${g}?vx=1&action=products.remove_cart_item`,{method:"POST",credentials:"same-origin",body:y})).json();R.success?a(c):alert(R.message||"Failed to remove item")}else a(c),N(c)}catch(g){console.error("Failed to remove item:",g)}},[o,t,b.registered]),N=l=>{if(Object.keys(l).length){const u={};Object.values(l).forEach(c=>{u[c.key]=c.value}),localStorage.setItem("voxel:guest_cart",JSON.stringify(u))}else localStorage.removeItem("voxel:guest_cart")},Q=i.useCallback(async()=>{!o||!t||console.log("Checkout triggered",{config:o,items:t,shipping:s,quickRegister:b,orderNotes:_})},[o,t,s,b,_]),X=i.useCallback(l=>{T(u=>({...u,...l}))},[]),Z=i.useCallback(l=>{H(u=>({...u,...l}))},[]),K=i.useCallback(l=>{v(u=>({...u,...l}))},[]);return React.createElement(M,{attributes:e,config:o,items:t,context:"frontend",isLoading:d,error:B,onUpdateQuantity:J,onRemoveItem:Y,onCheckout:Q,shipping:s,onShippingChange:X,quickRegister:b,onQuickRegisterChange:Z,orderNotes:_,onOrderNotesChange:K})}function C(){document.querySelectorAll(".voxel-fse-cart-summary-frontend, .vx-cart-summary-widget").forEach(o=>{if(o.dataset.reactMounted==="true")return;const r=U(o);if(!r){console.warn("Cart Summary block: No vxconfig found");return}const t=q(r);o.innerHTML="",o.dataset.reactMounted="true",L.createRoot(o).render(React.createElement(V,{attributes:t}))})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",C):C(),window.addEventListener("turbo:load",C),window.addEventListener("pjax:complete",C),document.addEventListener("voxel:markup-update",C)})(ReactDOM,React,wp.i18n);
