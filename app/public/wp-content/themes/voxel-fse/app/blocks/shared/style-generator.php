<?php
/**
 * Style Generator - Server-Side CSS Generation
 *
 * PHP equivalent of generateVoxelStyles.ts and generateAdvancedStyles.ts
 * Centralizes CSS generation for Voxel Tab and Advanced Tab attributes.
 *
 * This enables automatic style injection for all voxel-fse blocks via
 * the global render_block filter in Block_Loader.php.
 *
 * @package VoxelFSE
 */

namespace VoxelFSE\Blocks;

/**
 * Style Generator Class
 *
 * Generates CSS from block attributes for:
 * - Sticky position (VoxelTab)
 * - Layout, spacing, border, background, transform (AdvancedTab)
 * - Responsive breakpoints (tablet/mobile)
 * - Hover states
 */
class Style_Generator {

    /**
     * Tablet breakpoint (max-width)
     */
    const TABLET_BREAKPOINT = 1024;

    /**
     * Mobile breakpoint (max-width)
     */
    const MOBILE_BREAKPOINT = 767;

    /**
     * Generate all styles for a block
     *
     * ARCHITECTURE: Desktop styles are now generated as CSS (not inline attributes)
     * to prevent specificity conflicts with block-specific styles.
     *
     * @param array  $attributes Block attributes.
     * @param string $block_id   Block unique ID.
     * @return array {
     *     @type string $desktop_css    Desktop CSS rules for the block wrapper.
     *     @type string $responsive_css CSS with media queries (tablet/mobile).
     *     @type array  $classes        Additional CSS classes.
     *     @type array  $custom_attrs   Custom HTML attributes.
     *     @type string $element_id     Element ID (HTML id attribute).
     * }
     */
    public static function generate_all( $attributes, $block_id ) {
        $selector = '.voxel-fse-block-' . $block_id;

        // Generate desktop styles as CSS (no longer inline)
        $desktop_styles = array_merge(
            self::generate_voxel_inline_styles( $attributes ),
            self::generate_advanced_inline_styles( $attributes )
        );

        // Convert desktop styles array to CSS rules
        $desktop_css = '';
        if ( ! empty( $desktop_styles ) ) {
            $css_props = [];
            foreach ( $desktop_styles as $prop => $value ) {
                $css_props[] = "{$prop}: {$value}";
            }
            if ( ! empty( $css_props ) ) {
                $desktop_css = "{$selector} { " . implode( '; ', $css_props ) . "; }";
            }
        }

        // Generate responsive CSS (tablet/mobile)
        $responsive_css = self::generate_voxel_responsive_css( $attributes, $selector );
        $responsive_css .= self::generate_advanced_responsive_css( $attributes, $selector );

        // Get visibility classes
        $classes = self::get_visibility_classes( $attributes );

        // Get custom classes
        if ( ! empty( $attributes['customClasses'] ) ) {
            $classes[] = trim( $attributes['customClasses'] );
        }

        // Parse custom attributes
        $custom_attrs = self::parse_custom_attributes( $attributes['customAttributes'] ?? '' );

        // Get element ID
        $element_id = ! empty( $attributes['elementId'] ) ? $attributes['elementId'] : null;

        return [
            'desktop_css'    => $desktop_css,
            'responsive_css' => $responsive_css,
            'classes'        => $classes,
            'custom_attrs'   => $custom_attrs,
            'element_id'     => $element_id,
        ];
    }

    /**
     * Generate Voxel Tab inline styles (Sticky - Desktop only)
     *
     * @param array $attributes Block attributes.
     * @return array CSS properties as key => value.
     */
    public static function generate_voxel_inline_styles( $attributes ) {
        $styles = [];

        // Sticky Position - Desktop
        // Note: stickyDesktop defaults to 'sticky' in block.json, but WordPress may not serialize default values
        if ( ! empty( $attributes['stickyEnabled'] ) && ( $attributes['stickyDesktop'] ?? 'sticky' ) === 'sticky' ) {
            $styles['position'] = 'sticky';

            if ( isset( $attributes['stickyTop'] ) ) {
                $unit = $attributes['stickyTopUnit'] ?? 'px';
                $styles['top'] = $attributes['stickyTop'] . $unit;
            }
            if ( isset( $attributes['stickyLeft'] ) ) {
                $unit = $attributes['stickyLeftUnit'] ?? 'px';
                $styles['left'] = $attributes['stickyLeft'] . $unit;
            }
            if ( isset( $attributes['stickyRight'] ) ) {
                $unit = $attributes['stickyRightUnit'] ?? 'px';
                $styles['right'] = $attributes['stickyRight'] . $unit;
            }
            if ( isset( $attributes['stickyBottom'] ) ) {
                $unit = $attributes['stickyBottomUnit'] ?? 'px';
                $styles['bottom'] = $attributes['stickyBottom'] . $unit;
            }
        }

        // Container Options - Inline Flex (desktop)
        if ( ! empty( $attributes['enableInlineFlex'] ) ) {
            $styles['display'] = 'inline-flex';
        }

        // Container Options - Calc Min Height (desktop)
        if ( ! empty( $attributes['enableCalcMinHeight'] ) && ! empty( $attributes['calcMinHeight'] ) ) {
            $styles['min-height'] = 'calc(' . $attributes['calcMinHeight'] . ')';
        }

        // Container Options - Calc Max Height (desktop)
        if ( ! empty( $attributes['enableCalcMaxHeight'] ) && ! empty( $attributes['calcMaxHeight'] ) ) {
            $styles['max-height'] = 'calc(' . $attributes['calcMaxHeight'] . ')';
        }

        // Container Options - Scrollbar Color
        if ( ! empty( $attributes['scrollbarColor'] ) ) {
            $styles['scrollbar-color'] = $attributes['scrollbarColor'] . ' transparent';
        }

        // Container Options - Backdrop Blur (desktop)
        if ( ! empty( $attributes['enableBackdropBlur'] ) && ! empty( $attributes['backdropBlurStrength'] ) ) {
            $styles['backdrop-filter']         = 'blur(' . $attributes['backdropBlurStrength'] . 'px)';
            $styles['-webkit-backdrop-filter'] = 'blur(' . $attributes['backdropBlurStrength'] . 'px)';
        }

        return $styles;
    }

    /**
     * Generate Advanced Tab inline styles (Desktop only)
     *
     * @param array $attributes Block attributes.
     * @return array CSS properties as key => value.
     */
    public static function generate_advanced_inline_styles( $attributes ) {
        $styles = [];

        // Margin
        if ( ! empty( $attributes['blockMargin'] ) ) {
            $m    = $attributes['blockMargin'];
            $unit = $m['unit'] ?? 'px';
            if ( isset( $m['top'] ) && $m['top'] !== '' )    $styles['margin-top']    = $m['top'] . $unit;
            if ( isset( $m['right'] ) && $m['right'] !== '' )  $styles['margin-right']  = $m['right'] . $unit;
            if ( isset( $m['bottom'] ) && $m['bottom'] !== '' ) $styles['margin-bottom'] = $m['bottom'] . $unit;
            if ( isset( $m['left'] ) && $m['left'] !== '' )   $styles['margin-left']   = $m['left'] . $unit;
        }

        // Padding
        if ( ! empty( $attributes['blockPadding'] ) ) {
            $p    = $attributes['blockPadding'];
            $unit = $p['unit'] ?? 'px';
            if ( isset( $p['top'] ) && $p['top'] !== '' )    $styles['padding-top']    = $p['top'] . $unit;
            if ( isset( $p['right'] ) && $p['right'] !== '' )  $styles['padding-right']  = $p['right'] . $unit;
            if ( isset( $p['bottom'] ) && $p['bottom'] !== '' ) $styles['padding-bottom'] = $p['bottom'] . $unit;
            if ( isset( $p['left'] ) && $p['left'] !== '' )   $styles['padding-left']   = $p['left'] . $unit;
        }

        // Position
        if ( ! empty( $attributes['position'] ) && $attributes['position'] !== 'default' ) {
            $styles['position'] = $attributes['position'];

            // Horizontal offset
            $h_orient = $attributes['offsetOrientationH'] ?? 'start';
            if ( $h_orient === 'end' || $h_orient === 'right' ) {
                if ( isset( $attributes['offsetXEnd'] ) ) {
                    $unit = $attributes['offsetXEndUnit'] ?? 'px';
                    $styles['right'] = $attributes['offsetXEnd'] . $unit;
                }
            } else {
                if ( isset( $attributes['offsetX'] ) ) {
                    $unit = $attributes['offsetXUnit'] ?? 'px';
                    $styles['left'] = $attributes['offsetX'] . $unit;
                }
            }

            // Vertical offset
            $v_orient = $attributes['offsetOrientationV'] ?? 'start';
            if ( $v_orient === 'end' || $v_orient === 'bottom' ) {
                if ( isset( $attributes['offsetYEnd'] ) ) {
                    $unit = $attributes['offsetYEndUnit'] ?? 'px';
                    $styles['bottom'] = $attributes['offsetYEnd'] . $unit;
                }
            } else {
                if ( isset( $attributes['offsetY'] ) ) {
                    $unit = $attributes['offsetYUnit'] ?? 'px';
                    $styles['top'] = $attributes['offsetY'] . $unit;
                }
            }
        }

        // Z-Index
        if ( isset( $attributes['zIndex'] ) && $attributes['zIndex'] !== '' ) {
            $styles['z-index'] = $attributes['zIndex'];
        }

        // Layout Width
        $width = $attributes['elementWidth'] ?? '';
        if ( $width === 'custom' && isset( $attributes['elementCustomWidth'] ) ) {
            $unit = $attributes['elementCustomWidthUnit'] ?? 'px';
            $styles['width'] = $attributes['elementCustomWidth'] . $unit;
        } elseif ( $width === 'full' ) {
            $styles['width'] = '100%';
        } elseif ( $width === 'inline' ) {
            $styles['display'] = 'inline-block';
            $styles['width']   = 'auto';
        }

        // Flexbox Item - Align Self
        if ( ! empty( $attributes['flexAlignSelf'] ) ) {
            $styles['align-self'] = $attributes['flexAlignSelf'];
        }

        // Flexbox Item - Order
        $flex_order = $attributes['flexOrder'] ?? '';
        if ( $flex_order === 'custom' && isset( $attributes['flexOrderCustom'] ) ) {
            $styles['order'] = $attributes['flexOrderCustom'];
        } elseif ( $flex_order === 'start' ) {
            $styles['order'] = -9999;
        } elseif ( $flex_order === 'end' ) {
            $styles['order'] = 9999;
        }

        // Flexbox Item - Flex Grow/Shrink
        $flex_size = $attributes['flexSize'] ?? '';
        if ( $flex_size === 'none' ) {
            $styles['flex-grow']   = 0;
            $styles['flex-shrink'] = 0;
        } elseif ( $flex_size === 'grow' ) {
            $styles['flex-grow']   = 1;
            $styles['flex-shrink'] = 0;
        } elseif ( $flex_size === 'shrink' ) {
            $styles['flex-grow']   = 0;
            $styles['flex-shrink'] = 1;
        } elseif ( $flex_size === 'custom' ) {
            if ( isset( $attributes['flexGrow'] ) )   $styles['flex-grow']   = $attributes['flexGrow'];
            if ( isset( $attributes['flexShrink'] ) ) $styles['flex-shrink'] = $attributes['flexShrink'];
        }

        // Overflow
        if ( ! empty( $attributes['overflow'] ) ) {
            $styles['overflow'] = $attributes['overflow'];
        }

        // Opacity
        if ( isset( $attributes['opacity'] ) && $attributes['opacity'] !== '' ) {
            $styles['opacity'] = $attributes['opacity'];
        }

        // Border
        if ( ! empty( $attributes['borderType'] ) && $attributes['borderType'] !== 'none' ) {
            $styles['border-style'] = $attributes['borderType'];
        }
        if ( ! empty( $attributes['borderColor'] ) ) {
            $styles['border-color'] = $attributes['borderColor'];
        }
        if ( ! empty( $attributes['borderWidth'] ) ) {
            $bw   = $attributes['borderWidth'];
            $unit = $bw['unit'] ?? 'px';
            if ( isset( $bw['top'] ) && $bw['top'] !== '' )    $styles['border-top-width']    = $bw['top'] . $unit;
            if ( isset( $bw['right'] ) && $bw['right'] !== '' )  $styles['border-right-width']  = $bw['right'] . $unit;
            if ( isset( $bw['bottom'] ) && $bw['bottom'] !== '' ) $styles['border-bottom-width'] = $bw['bottom'] . $unit;
            if ( isset( $bw['left'] ) && $bw['left'] !== '' )   $styles['border-left-width']   = $bw['left'] . $unit;
        }

        // Border Radius
        $border_radius = $attributes['borderRadius'] ?? $attributes['borderRadiusDimensions'] ?? null;
        if ( ! empty( $border_radius ) ) {
            $br   = $border_radius;
            $unit = $br['unit'] ?? 'px';
            // Helper to add unit only if not already present
            $format_radius = function($val, $u) {
                if (preg_match('/^[\d.]+(?:px|%|em|rem)$/', $val)) return $val;
                return is_numeric($val) ? $val . $u : $val;
            };
            if ( isset( $br['top'] ) && $br['top'] !== '' )    $styles['border-top-left-radius']     = $format_radius($br['top'], $unit);
            if ( isset( $br['right'] ) && $br['right'] !== '' )  $styles['border-top-right-radius']    = $format_radius($br['right'], $unit);
            if ( isset( $br['bottom'] ) && $br['bottom'] !== '' ) $styles['border-bottom-right-radius'] = $format_radius($br['bottom'], $unit);
            if ( isset( $br['left'] ) && $br['left'] !== '' )   $styles['border-bottom-left-radius']  = $format_radius($br['left'], $unit);
        }

        // Box Shadow
        if ( ! empty( $attributes['boxShadow'] ) && is_array( $attributes['boxShadow'] ) ) {
            $bs     = $attributes['boxShadow'];
            $h      = $bs['horizontal'] ?? 0;
            $v      = $bs['vertical'] ?? 0;
            $blur   = $bs['blur'] ?? 10;
            $spread = $bs['spread'] ?? 0;
            $color  = $bs['color'] ?? 'rgba(0,0,0,0.5)';
            $inset  = ( $bs['position'] ?? '' ) === 'inset' ? 'inset ' : '';
            $styles['box-shadow'] = "{$inset}{$h}px {$v}px {$blur}px {$spread}px {$color}";
        }

        // Background
        $bg_type = $attributes['backgroundType'] ?? 'classic';
        if ( $bg_type === 'classic' ) {
            if ( ! empty( $attributes['backgroundColor'] ) ) {
                $styles['background-color'] = $attributes['backgroundColor'];
            }
            if ( ! empty( $attributes['backgroundImage']['url'] ) ) {
                $styles['background-image'] = 'url(' . esc_url( $attributes['backgroundImage']['url'] ) . ')';
                if ( ! empty( $attributes['bgImagePosition'] ) )   $styles['background-position']   = $attributes['bgImagePosition'];
                if ( ! empty( $attributes['bgImageAttachment'] ) ) $styles['background-attachment'] = $attributes['bgImageAttachment'];
                if ( ! empty( $attributes['bgImageRepeat'] ) )     $styles['background-repeat']     = $attributes['bgImageRepeat'];

                $size = $attributes['bgImageSize'] ?? '';
                if ( $size === 'custom' && isset( $attributes['bgImageCustomWidth'] ) ) {
                    $unit = $attributes['bgImageCustomWidthUnit'] ?? 'px';
                    $styles['background-size'] = $attributes['bgImageCustomWidth'] . $unit;
                } elseif ( $size ) {
                    $styles['background-size'] = $size;
                }
            }
        } elseif ( $bg_type === 'gradient' ) {
            $color1 = $attributes['gradientColor'] ?? '#000000';
            $loc1   = $attributes['gradientLocation'] ?? 0;
            $color2 = $attributes['gradientSecondColor'] ?? '#ffffff';
            $loc2   = $attributes['gradientSecondLocation'] ?? 100;

            if ( ( $attributes['gradientType'] ?? 'linear' ) === 'radial' ) {
                $position = $attributes['gradientPosition'] ?? 'center center';
                $styles['background-image'] = "radial-gradient(at {$position}, {$color1} {$loc1}%, {$color2} {$loc2}%)";
            } else {
                $angle = $attributes['gradientAngle'] ?? 180;
                $styles['background-image'] = "linear-gradient({$angle}deg, {$color1} {$loc1}%, {$color2} {$loc2}%)";
            }
        }

        // Transform
        $transforms = self::build_transform_array( $attributes, '' );
        if ( ! empty( $transforms ) ) {
            $styles['transform'] = implode( ' ', $transforms );
        }

        // Mask
        if ( ! empty( $attributes['maskSwitch'] ) ) {
            $has_mask_image = ! empty( $attributes['maskImage']['url'] );
            $has_mask_shape = ! empty( $attributes['maskShape'] );

            if ( $has_mask_image || $has_mask_shape ) {
                $mask_url = '';
                if ( $has_mask_image ) {
                    $mask_url = 'url(' . esc_url( $attributes['maskImage']['url'] ) . ')';
                } elseif ( $has_mask_shape ) {
                    $mask_url = 'url(' . self::get_mask_shape_url( $attributes['maskShape'] ) . ')';
                }

                if ( $mask_url ) {
                    $styles['-webkit-mask-image'] = $mask_url;
                    $styles['mask-image']         = $mask_url;

                    // Mask size
                    $mask_size = $attributes['maskSize'] ?? '';
                    if ( $mask_size === 'custom' ) {
                        $scale = $attributes['maskSizeScale'] ?? 100;
                        $unit  = $attributes['maskSizeScaleUnit'] ?? '%';
                        $styles['-webkit-mask-size'] = $scale . $unit;
                        $styles['mask-size']         = $scale . $unit;
                    } elseif ( $mask_size ) {
                        $styles['-webkit-mask-size'] = $mask_size;
                        $styles['mask-size']         = $mask_size;
                    }

                    // Mask position
                    $mask_pos = $attributes['maskPosition'] ?? '';
                    if ( $mask_pos === 'custom' ) {
                        $x     = $attributes['maskPositionX'] ?? 0;
                        $x_u   = $attributes['maskPositionXUnit'] ?? '%';
                        $y     = $attributes['maskPositionY'] ?? 0;
                        $y_u   = $attributes['maskPositionYUnit'] ?? '%';
                        $pos   = "{$x}{$x_u} {$y}{$y_u}";
                        $styles['-webkit-mask-position'] = $pos;
                        $styles['mask-position']         = $pos;
                    } elseif ( $mask_pos ) {
                        $styles['-webkit-mask-position'] = $mask_pos;
                        $styles['mask-position']         = $mask_pos;
                    }

                    // Mask repeat
                    if ( ! empty( $attributes['maskRepeat'] ) ) {
                        $styles['-webkit-mask-repeat'] = $attributes['maskRepeat'];
                        $styles['mask-repeat']         = $attributes['maskRepeat'];
                    }
                }
            }
        }

        // Transition
        $transition_parts = [];
        $transition_dur   = $attributes['transitionDuration'] ?? 0;
        $bg_transition    = $attributes['bgTransitionDuration'] ?? 0;
        if ( $transition_dur > 0 ) {
            $transition_parts[] = "all {$transition_dur}s ease";
        }
        if ( $bg_transition > 0 && $bg_transition !== $transition_dur ) {
            $transition_parts[] = "background {$bg_transition}s ease";
        }
        if ( ! empty( $transition_parts ) ) {
            $styles['transition'] = implode( ', ', $transition_parts );
        }

        return $styles;
    }

    /**
     * Generate Voxel Tab responsive CSS (Sticky - Tablet/Mobile)
     *
     * @param array  $attributes Block attributes.
     * @param string $selector   CSS selector.
     * @return string CSS with media queries.
     */
    public static function generate_voxel_responsive_css( $attributes, $selector ) {
        if ( empty( $attributes['stickyEnabled'] ) ) {
            return '';
        }

        $css_rules = [];

        // Tablet (max-width: 1024px)
        $tablet_rules = [];
        $sticky_tablet = $attributes['stickyTablet'] ?? '';
        if ( $sticky_tablet === 'sticky' ) {
            $tablet_rules[] = 'position: sticky';
            $top = $attributes['stickyTop_tablet'] ?? $attributes['stickyTop'] ?? null;
            if ( $top !== null ) {
                $unit = $attributes['stickyTopUnit'] ?? 'px';
                $tablet_rules[] = "top: {$top}{$unit}";
            }
            if ( isset( $attributes['stickyLeft_tablet'] ) ) {
                $unit = $attributes['stickyLeftUnit'] ?? 'px';
                $tablet_rules[] = "left: {$attributes['stickyLeft_tablet']}{$unit}";
            }
            if ( isset( $attributes['stickyRight_tablet'] ) ) {
                $unit = $attributes['stickyRightUnit'] ?? 'px';
                $tablet_rules[] = "right: {$attributes['stickyRight_tablet']}{$unit}";
            }
            if ( isset( $attributes['stickyBottom_tablet'] ) ) {
                $unit = $attributes['stickyBottomUnit'] ?? 'px';
                $tablet_rules[] = "bottom: {$attributes['stickyBottom_tablet']}{$unit}";
            }
        } elseif ( $sticky_tablet === 'initial' ) {
            $tablet_rules[] = 'position: relative';
        }

        // Container Options - Tablet
        if ( isset( $attributes['enableInlineFlex_tablet'] ) ) {
            $tablet_rules[] = $attributes['enableInlineFlex_tablet'] ? 'display: inline-flex' : 'display: flex';
        }
        if ( ! empty( $attributes['enableCalcMinHeight'] ) && ! empty( $attributes['calcMinHeight_tablet'] ) ) {
            $tablet_rules[] = "min-height: calc({$attributes['calcMinHeight_tablet']})";
        }
        if ( ! empty( $attributes['enableCalcMaxHeight'] ) && ! empty( $attributes['calcMaxHeight_tablet'] ) ) {
            $tablet_rules[] = "max-height: calc({$attributes['calcMaxHeight_tablet']})";
        }
        if ( ! empty( $attributes['enableBackdropBlur'] ) && isset( $attributes['backdropBlurStrength_tablet'] ) ) {
            $tablet_rules[] = "backdrop-filter: blur({$attributes['backdropBlurStrength_tablet']}px)";
            $tablet_rules[] = "-webkit-backdrop-filter: blur({$attributes['backdropBlurStrength_tablet']}px)";
        }

        if ( ! empty( $tablet_rules ) ) {
            $rules = implode( '; ', $tablet_rules );
            $css_rules[] = "@media (max-width: " . self::TABLET_BREAKPOINT . "px) { {$selector} { {$rules}; } }";
        }

        // Mobile (max-width: 767px)
        $mobile_rules = [];
        $sticky_mobile = $attributes['stickyMobile'] ?? '';
        if ( $sticky_mobile === 'sticky' ) {
            $mobile_rules[] = 'position: sticky';
            $top = $attributes['stickyTop_mobile'] ?? $attributes['stickyTop_tablet'] ?? $attributes['stickyTop'] ?? null;
            if ( $top !== null ) {
                $unit = $attributes['stickyTopUnit'] ?? 'px';
                $mobile_rules[] = "top: {$top}{$unit}";
            }
            if ( isset( $attributes['stickyLeft_mobile'] ) ) {
                $unit = $attributes['stickyLeftUnit'] ?? 'px';
                $mobile_rules[] = "left: {$attributes['stickyLeft_mobile']}{$unit}";
            }
            if ( isset( $attributes['stickyRight_mobile'] ) ) {
                $unit = $attributes['stickyRightUnit'] ?? 'px';
                $mobile_rules[] = "right: {$attributes['stickyRight_mobile']}{$unit}";
            }
            if ( isset( $attributes['stickyBottom_mobile'] ) ) {
                $unit = $attributes['stickyBottomUnit'] ?? 'px';
                $mobile_rules[] = "bottom: {$attributes['stickyBottom_mobile']}{$unit}";
            }
        } elseif ( $sticky_mobile === 'initial' ) {
            $mobile_rules[] = 'position: relative';
        }

        // Container Options - Mobile
        if ( isset( $attributes['enableInlineFlex_mobile'] ) ) {
            $mobile_rules[] = $attributes['enableInlineFlex_mobile'] ? 'display: inline-flex' : 'display: flex';
        }
        if ( ! empty( $attributes['enableCalcMinHeight'] ) && ! empty( $attributes['calcMinHeight_mobile'] ) ) {
            $mobile_rules[] = "min-height: calc({$attributes['calcMinHeight_mobile']})";
        }
        if ( ! empty( $attributes['enableCalcMaxHeight'] ) && ! empty( $attributes['calcMaxHeight_mobile'] ) ) {
            $mobile_rules[] = "max-height: calc({$attributes['calcMaxHeight_mobile']})";
        }
        if ( ! empty( $attributes['enableBackdropBlur'] ) && isset( $attributes['backdropBlurStrength_mobile'] ) ) {
            $mobile_rules[] = "backdrop-filter: blur({$attributes['backdropBlurStrength_mobile']}px)";
            $mobile_rules[] = "-webkit-backdrop-filter: blur({$attributes['backdropBlurStrength_mobile']}px)";
        }

        if ( ! empty( $mobile_rules ) ) {
            $rules = implode( '; ', $mobile_rules );
            $css_rules[] = "@media (max-width: " . self::MOBILE_BREAKPOINT . "px) { {$selector} { {$rules}; } }";
        }

        return implode( "\n", $css_rules );
    }

    /**
     * Generate Advanced Tab responsive CSS (Tablet/Mobile/Hover)
     *
     * @param array  $attributes Block attributes.
     * @param string $selector   CSS selector.
     * @return string CSS with media queries.
     */
    public static function generate_advanced_responsive_css( $attributes, $selector ) {
        $css_rules = [];

        // Tablet CSS
        $tablet_styles = [];

        // Margin tablet
        if ( ! empty( $attributes['blockMargin_tablet'] ) ) {
            $m    = $attributes['blockMargin_tablet'];
            $unit = $m['unit'] ?? 'px';
            if ( isset( $m['top'] ) && $m['top'] !== '' )    $tablet_styles[] = "margin-top: {$m['top']}{$unit}";
            if ( isset( $m['right'] ) && $m['right'] !== '' )  $tablet_styles[] = "margin-right: {$m['right']}{$unit}";
            if ( isset( $m['bottom'] ) && $m['bottom'] !== '' ) $tablet_styles[] = "margin-bottom: {$m['bottom']}{$unit}";
            if ( isset( $m['left'] ) && $m['left'] !== '' )   $tablet_styles[] = "margin-left: {$m['left']}{$unit}";
        }

        // Padding tablet
        if ( ! empty( $attributes['blockPadding_tablet'] ) ) {
            $p    = $attributes['blockPadding_tablet'];
            $unit = $p['unit'] ?? 'px';
            if ( isset( $p['top'] ) && $p['top'] !== '' )    $tablet_styles[] = "padding-top: {$p['top']}{$unit}";
            if ( isset( $p['right'] ) && $p['right'] !== '' )  $tablet_styles[] = "padding-right: {$p['right']}{$unit}";
            if ( isset( $p['bottom'] ) && $p['bottom'] !== '' ) $tablet_styles[] = "padding-bottom: {$p['bottom']}{$unit}";
            if ( isset( $p['left'] ) && $p['left'] !== '' )   $tablet_styles[] = "padding-left: {$p['left']}{$unit}";
        }

        // Width tablet
        $width_tablet = $attributes['elementWidth_tablet'] ?? '';
        if ( $width_tablet === 'custom' && isset( $attributes['elementCustomWidth_tablet'] ) ) {
            $unit = $attributes['elementCustomWidthUnit'] ?? 'px';
            $tablet_styles[] = "width: {$attributes['elementCustomWidth_tablet']}{$unit}";
        } elseif ( $width_tablet === 'full' ) {
            $tablet_styles[] = 'width: 100%';
        } elseif ( $width_tablet === 'inline' ) {
            $tablet_styles[] = 'display: inline-block; width: auto';
        }

        // Border radius tablet
        if ( ! empty( $attributes['borderRadius_tablet'] ) ) {
            $br   = $attributes['borderRadius_tablet'];
            $unit = $br['unit'] ?? 'px';
            $format_radius = function($val, $u) {
                if (preg_match('/^[\d.]+(?:px|%|em|rem)$/', $val)) return $val;
                return is_numeric($val) ? $val . $u : $val;
            };
            if ( isset( $br['top'] ) && $br['top'] !== '' )    $tablet_styles[] = "border-top-left-radius: {$format_radius($br['top'], $unit)}";
            if ( isset( $br['right'] ) && $br['right'] !== '' )  $tablet_styles[] = "border-top-right-radius: {$format_radius($br['right'], $unit)}";
            if ( isset( $br['bottom'] ) && $br['bottom'] !== '' ) $tablet_styles[] = "border-bottom-right-radius: {$format_radius($br['bottom'], $unit)}";
            if ( isset( $br['left'] ) && $br['left'] !== '' )   $tablet_styles[] = "border-bottom-left-radius: {$format_radius($br['left'], $unit)}";
        }

        // Z-Index tablet
        if ( isset( $attributes['zIndex_tablet'] ) && $attributes['zIndex_tablet'] !== '' ) {
            $tablet_styles[] = "z-index: {$attributes['zIndex_tablet']}";
        }

        // Flexbox Item tablet
        if ( ! empty( $attributes['flexAlignSelf_tablet'] ) ) {
            $tablet_styles[] = "align-self: {$attributes['flexAlignSelf_tablet']}";
        }
        $flex_order_tablet = $attributes['flexOrder_tablet'] ?? '';
        if ( $flex_order_tablet === 'custom' && isset( $attributes['flexOrderCustom_tablet'] ) ) {
            $tablet_styles[] = "order: {$attributes['flexOrderCustom_tablet']}";
        } elseif ( $flex_order_tablet === 'start' ) {
            $tablet_styles[] = 'order: -9999';
        } elseif ( $flex_order_tablet === 'end' ) {
            $tablet_styles[] = 'order: 9999';
        }
        $flex_size_tablet = $attributes['flexSize_tablet'] ?? '';
        if ( $flex_size_tablet === 'none' ) {
            $tablet_styles[] = 'flex-grow: 0; flex-shrink: 0';
        } elseif ( $flex_size_tablet === 'grow' ) {
            $tablet_styles[] = 'flex-grow: 1; flex-shrink: 0';
        } elseif ( $flex_size_tablet === 'shrink' ) {
            $tablet_styles[] = 'flex-grow: 0; flex-shrink: 1';
        } elseif ( $flex_size_tablet === 'custom' ) {
            if ( isset( $attributes['flexGrow_tablet'] ) )   $tablet_styles[] = "flex-grow: {$attributes['flexGrow_tablet']}";
            if ( isset( $attributes['flexShrink_tablet'] ) ) $tablet_styles[] = "flex-shrink: {$attributes['flexShrink_tablet']}";
        }

        // Transform tablet
        $transforms_tablet = self::build_transform_array( $attributes, '_tablet' );
        if ( ! empty( $transforms_tablet ) ) {
            $tablet_styles[] = 'transform: ' . implode( ' ', $transforms_tablet );
        }

        // Background image tablet
        if ( ! empty( $attributes['backgroundImage_tablet']['url'] ) ) {
            $url = esc_url( $attributes['backgroundImage_tablet']['url'] );
            $tablet_styles[] = "background-image: url({$url})";
        }
        if ( ! empty( $attributes['bgImagePosition_tablet'] ) ) {
            $tablet_styles[] = "background-position: {$attributes['bgImagePosition_tablet']}";
        }
        if ( ! empty( $attributes['bgImageRepeat_tablet'] ) ) {
            $tablet_styles[] = "background-repeat: {$attributes['bgImageRepeat_tablet']}";
        }
        $size_tablet = $attributes['bgImageSize_tablet'] ?? '';
        if ( $size_tablet === 'custom' && isset( $attributes['bgImageCustomWidth_tablet'] ) ) {
            $unit = $attributes['bgImageCustomWidthUnit'] ?? 'px';
            $tablet_styles[] = "background-size: {$attributes['bgImageCustomWidth_tablet']}{$unit}";
        } elseif ( $size_tablet ) {
            $tablet_styles[] = "background-size: {$size_tablet}";
        }

        if ( ! empty( $tablet_styles ) ) {
            $rules = implode( '; ', $tablet_styles );
            $css_rules[] = "@media (max-width: " . self::TABLET_BREAKPOINT . "px) { {$selector} { {$rules}; } }";
        }

        // Mobile CSS
        $mobile_styles = [];

        // Margin mobile
        if ( ! empty( $attributes['blockMargin_mobile'] ) ) {
            $m    = $attributes['blockMargin_mobile'];
            $unit = $m['unit'] ?? 'px';
            if ( isset( $m['top'] ) && $m['top'] !== '' )    $mobile_styles[] = "margin-top: {$m['top']}{$unit}";
            if ( isset( $m['right'] ) && $m['right'] !== '' )  $mobile_styles[] = "margin-right: {$m['right']}{$unit}";
            if ( isset( $m['bottom'] ) && $m['bottom'] !== '' ) $mobile_styles[] = "margin-bottom: {$m['bottom']}{$unit}";
            if ( isset( $m['left'] ) && $m['left'] !== '' )   $mobile_styles[] = "margin-left: {$m['left']}{$unit}";
        }

        // Padding mobile
        if ( ! empty( $attributes['blockPadding_mobile'] ) ) {
            $p    = $attributes['blockPadding_mobile'];
            $unit = $p['unit'] ?? 'px';
            if ( isset( $p['top'] ) && $p['top'] !== '' )    $mobile_styles[] = "padding-top: {$p['top']}{$unit}";
            if ( isset( $p['right'] ) && $p['right'] !== '' )  $mobile_styles[] = "padding-right: {$p['right']}{$unit}";
            if ( isset( $p['bottom'] ) && $p['bottom'] !== '' ) $mobile_styles[] = "padding-bottom: {$p['bottom']}{$unit}";
            if ( isset( $p['left'] ) && $p['left'] !== '' )   $mobile_styles[] = "padding-left: {$p['left']}{$unit}";
        }

        // Width mobile
        $width_mobile = $attributes['elementWidth_mobile'] ?? '';
        if ( $width_mobile === 'custom' && isset( $attributes['elementCustomWidth_mobile'] ) ) {
            $unit = $attributes['elementCustomWidthUnit'] ?? 'px';
            $mobile_styles[] = "width: {$attributes['elementCustomWidth_mobile']}{$unit}";
        } elseif ( $width_mobile === 'full' ) {
            $mobile_styles[] = 'width: 100%';
        } elseif ( $width_mobile === 'inline' ) {
            $mobile_styles[] = 'display: inline-block; width: auto';
        }

        // Border radius mobile
        if ( ! empty( $attributes['borderRadius_mobile'] ) ) {
            $br   = $attributes['borderRadius_mobile'];
            $unit = $br['unit'] ?? 'px';
            $format_radius = function($val, $u) {
                if (preg_match('/^[\d.]+(?:px|%|em|rem)$/', $val)) return $val;
                return is_numeric($val) ? $val . $u : $val;
            };
            if ( isset( $br['top'] ) && $br['top'] !== '' )    $mobile_styles[] = "border-top-left-radius: {$format_radius($br['top'], $unit)}";
            if ( isset( $br['right'] ) && $br['right'] !== '' )  $mobile_styles[] = "border-top-right-radius: {$format_radius($br['right'], $unit)}";
            if ( isset( $br['bottom'] ) && $br['bottom'] !== '' ) $mobile_styles[] = "border-bottom-right-radius: {$format_radius($br['bottom'], $unit)}";
            if ( isset( $br['left'] ) && $br['left'] !== '' )   $mobile_styles[] = "border-bottom-left-radius: {$format_radius($br['left'], $unit)}";
        }

        // Z-Index mobile
        if ( isset( $attributes['zIndex_mobile'] ) && $attributes['zIndex_mobile'] !== '' ) {
            $mobile_styles[] = "z-index: {$attributes['zIndex_mobile']}";
        }

        // Flexbox Item mobile
        if ( ! empty( $attributes['flexAlignSelf_mobile'] ) ) {
            $mobile_styles[] = "align-self: {$attributes['flexAlignSelf_mobile']}";
        }
        $flex_order_mobile = $attributes['flexOrder_mobile'] ?? '';
        if ( $flex_order_mobile === 'custom' && isset( $attributes['flexOrderCustom_mobile'] ) ) {
            $mobile_styles[] = "order: {$attributes['flexOrderCustom_mobile']}";
        } elseif ( $flex_order_mobile === 'start' ) {
            $mobile_styles[] = 'order: -9999';
        } elseif ( $flex_order_mobile === 'end' ) {
            $mobile_styles[] = 'order: 9999';
        }
        $flex_size_mobile = $attributes['flexSize_mobile'] ?? '';
        if ( $flex_size_mobile === 'none' ) {
            $mobile_styles[] = 'flex-grow: 0; flex-shrink: 0';
        } elseif ( $flex_size_mobile === 'grow' ) {
            $mobile_styles[] = 'flex-grow: 1; flex-shrink: 0';
        } elseif ( $flex_size_mobile === 'shrink' ) {
            $mobile_styles[] = 'flex-grow: 0; flex-shrink: 1';
        } elseif ( $flex_size_mobile === 'custom' ) {
            if ( isset( $attributes['flexGrow_mobile'] ) )   $mobile_styles[] = "flex-grow: {$attributes['flexGrow_mobile']}";
            if ( isset( $attributes['flexShrink_mobile'] ) ) $mobile_styles[] = "flex-shrink: {$attributes['flexShrink_mobile']}";
        }

        // Transform mobile
        $transforms_mobile = self::build_transform_array( $attributes, '_mobile' );
        if ( ! empty( $transforms_mobile ) ) {
            $mobile_styles[] = 'transform: ' . implode( ' ', $transforms_mobile );
        }

        // Background image mobile
        if ( ! empty( $attributes['backgroundImage_mobile']['url'] ) ) {
            $url = esc_url( $attributes['backgroundImage_mobile']['url'] );
            $mobile_styles[] = "background-image: url({$url})";
        }
        if ( ! empty( $attributes['bgImagePosition_mobile'] ) ) {
            $mobile_styles[] = "background-position: {$attributes['bgImagePosition_mobile']}";
        }
        if ( ! empty( $attributes['bgImageRepeat_mobile'] ) ) {
            $mobile_styles[] = "background-repeat: {$attributes['bgImageRepeat_mobile']}";
        }
        $size_mobile = $attributes['bgImageSize_mobile'] ?? '';
        if ( $size_mobile === 'custom' && isset( $attributes['bgImageCustomWidth_mobile'] ) ) {
            $unit = $attributes['bgImageCustomWidthUnit'] ?? 'px';
            $mobile_styles[] = "background-size: {$attributes['bgImageCustomWidth_mobile']}{$unit}";
        } elseif ( $size_mobile ) {
            $mobile_styles[] = "background-size: {$size_mobile}";
        }

        if ( ! empty( $mobile_styles ) ) {
            $rules = implode( '; ', $mobile_styles );
            $css_rules[] = "@media (max-width: " . self::MOBILE_BREAKPOINT . "px) { {$selector} { {$rules}; } }";
        }

        // Hover state CSS
        $hover_styles = [];

        if ( ! empty( $attributes['borderTypeHover'] ) && $attributes['borderTypeHover'] !== 'none' ) {
            $hover_styles[] = "border-style: {$attributes['borderTypeHover']}";
        }
        if ( ! empty( $attributes['borderColorHover'] ) ) {
            $hover_styles[] = "border-color: {$attributes['borderColorHover']}";
        }
        if ( ! empty( $attributes['borderWidthHover'] ) ) {
            $bw   = $attributes['borderWidthHover'];
            $unit = $bw['unit'] ?? 'px';
            if ( isset( $bw['top'] ) && $bw['top'] !== '' )    $hover_styles[] = "border-top-width: {$bw['top']}{$unit}";
            if ( isset( $bw['right'] ) && $bw['right'] !== '' )  $hover_styles[] = "border-right-width: {$bw['right']}{$unit}";
            if ( isset( $bw['bottom'] ) && $bw['bottom'] !== '' ) $hover_styles[] = "border-bottom-width: {$bw['bottom']}{$unit}";
            if ( isset( $bw['left'] ) && $bw['left'] !== '' )   $hover_styles[] = "border-left-width: {$bw['left']}{$unit}";
        }
        if ( ! empty( $attributes['borderRadiusHover'] ) ) {
            $br   = $attributes['borderRadiusHover'];
            $unit = $br['unit'] ?? 'px';
            $format_radius = function($val, $u) {
                if (preg_match('/^[\d.]+(?:px|%|em|rem)$/', $val)) return $val;
                return is_numeric($val) ? $val . $u : $val;
            };
            if ( isset( $br['top'] ) && $br['top'] !== '' )    $hover_styles[] = "border-top-left-radius: {$format_radius($br['top'], $unit)}";
            if ( isset( $br['right'] ) && $br['right'] !== '' )  $hover_styles[] = "border-top-right-radius: {$format_radius($br['right'], $unit)}";
            if ( isset( $br['bottom'] ) && $br['bottom'] !== '' ) $hover_styles[] = "border-bottom-right-radius: {$format_radius($br['bottom'], $unit)}";
            if ( isset( $br['left'] ) && $br['left'] !== '' )   $hover_styles[] = "border-bottom-left-radius: {$format_radius($br['left'], $unit)}";
        }
        if ( ! empty( $attributes['boxShadowHover'] ) && is_array( $attributes['boxShadowHover'] ) ) {
            $bs     = $attributes['boxShadowHover'];
            $h      = $bs['horizontal'] ?? 0;
            $v      = $bs['vertical'] ?? 0;
            $blur   = $bs['blur'] ?? 0;
            $spread = $bs['spread'] ?? 0;
            $color  = $bs['color'] ?? 'rgba(0,0,0,0.5)';
            $inset  = ( $bs['position'] ?? '' ) === 'inset' ? 'inset ' : '';
            if ( $h || $v || $blur || $spread ) {
                $hover_styles[] = "box-shadow: {$inset}{$h}px {$v}px {$blur}px {$spread}px {$color}";
            }
        }

        // Background hover
        $bg_type_hover = $attributes['backgroundTypeHover'] ?? 'classic';
        if ( $bg_type_hover === 'classic' ) {
            if ( ! empty( $attributes['backgroundColorHover'] ) ) {
                $hover_styles[] = "background-color: {$attributes['backgroundColorHover']}";
            }
            if ( ! empty( $attributes['backgroundImageHover']['url'] ) ) {
                $url = esc_url( $attributes['backgroundImageHover']['url'] );
                $hover_styles[] = "background-image: url({$url})";
            }
        }

        if ( ! empty( $hover_styles ) ) {
            $rules = implode( '; ', $hover_styles );
            $css_rules[] = "{$selector}:hover { {$rules}; }";
        }

        // Custom CSS
        if ( ! empty( $attributes['customCSS'] ) ) {
            // Replace 'selector' placeholder with actual selector
            $custom_css = str_ireplace( 'selector', $selector, $attributes['customCSS'] );
            $css_rules[] = $custom_css;
        }

        return implode( "\n", $css_rules );
    }

    /**
     * Get visibility classes based on hide attributes
     *
     * @param array $attributes Block attributes.
     * @return array CSS class names.
     */
    public static function get_visibility_classes( $attributes ) {
        $classes = [];
        if ( ! empty( $attributes['hideDesktop'] ) ) $classes[] = 'vx-hidden-desktop';
        if ( ! empty( $attributes['hideTablet'] ) )  $classes[] = 'vx-hidden-tablet';
        if ( ! empty( $attributes['hideMobile'] ) )  $classes[] = 'vx-hidden-mobile';
        return $classes;
    }

    /**
     * Parse custom attributes string
     *
     * Format: "key|value" per line (Elementor Pro format)
     *
     * @param string $custom_attributes String with key|value pairs.
     * @return array Parsed attributes.
     */
    public static function parse_custom_attributes( $custom_attributes ) {
        if ( empty( $custom_attributes ) ) {
            return [];
        }

        $result = [];
        $lines  = explode( "\n", $custom_attributes );

        foreach ( $lines as $line ) {
            $trimmed = trim( $line );
            if ( empty( $trimmed ) ) {
                continue;
            }

            $pipe_pos = strpos( $trimmed, '|' );
            if ( $pipe_pos !== false && $pipe_pos > 0 ) {
                $key   = trim( substr( $trimmed, 0, $pipe_pos ) );
                $value = trim( substr( $trimmed, $pipe_pos + 1 ) );
                if ( $key && self::is_valid_attribute_name( $key ) ) {
                    $result[ $key ] = esc_attr( $value );
                }
            } elseif ( self::is_valid_attribute_name( $trimmed ) ) {
                // Boolean attribute (no value)
                $result[ $trimmed ] = '';
            }
        }

        return $result;
    }

    /**
     * Validate attribute name (prevent XSS/injection)
     *
     * @param string $name Attribute name.
     * @return bool
     */
    private static function is_valid_attribute_name( $name ) {
        // Must start with letter, can contain letters, numbers, hyphens, underscores
        if ( ! preg_match( '/^[a-z][a-z0-9_-]*$/i', $name ) ) {
            return false;
        }

        // Blacklist event handlers and special attributes
        $blacklist = [
            'onclick', 'onload', 'onerror', 'onmouseover', 'onfocus', 'onblur',
            'onkeydown', 'onkeyup', 'onsubmit', 'onchange', 'style', 'class', 'id', 'href', 'src'
        ];

        return ! in_array( strtolower( $name ), $blacklist, true );
    }

    /**
     * Build transform array for a specific breakpoint
     *
     * @param array  $attributes Block attributes.
     * @param string $suffix     Breakpoint suffix (_tablet, _mobile, or empty).
     * @return array Transform CSS functions.
     */
    private static function build_transform_array( $attributes, $suffix ) {
        $transforms = [];

        // Rotation
        $rotate_z = $attributes[ "transformRotateZ{$suffix}" ] ?? null;
        $rotate_x = $attributes[ "transformRotateX{$suffix}" ] ?? null;
        $rotate_y = $attributes[ "transformRotateY{$suffix}" ] ?? null;
        if ( $rotate_z ) $transforms[] = "rotateZ({$rotate_z}deg)";
        if ( $rotate_x ) $transforms[] = "rotateX({$rotate_x}deg)";
        if ( $rotate_y ) $transforms[] = "rotateY({$rotate_y}deg)";

        // Translate
        $offset_x = $attributes[ "transformOffsetX{$suffix}" ] ?? null;
        $offset_y = $attributes[ "transformOffsetY{$suffix}" ] ?? null;
        if ( $offset_x !== null || $offset_y !== null ) {
            $x      = $offset_x ?? 0;
            $x_unit = $attributes['transformOffsetXUnit'] ?? 'px';
            $y      = $offset_y ?? 0;
            $y_unit = $attributes['transformOffsetYUnit'] ?? 'px';
            $transforms[] = "translate({$x}{$x_unit}, {$y}{$y_unit})";
        }

        // Scale
        $scale_x = $attributes[ "transformScaleX{$suffix}" ] ?? null;
        $scale_y = $attributes[ "transformScaleY{$suffix}" ] ?? null;
        if ( $scale_x !== null || $scale_y !== null ) {
            $sx = $scale_x ?? 1;
            $sy = $scale_y ?? 1;
            $transforms[] = "scale({$sx}, {$sy})";
        }

        // Skew
        $skew_x = $attributes[ "transformSkewX{$suffix}" ] ?? null;
        $skew_y = $attributes[ "transformSkewY{$suffix}" ] ?? null;
        if ( $skew_x || $skew_y ) {
            $sx = $skew_x ?? 0;
            $sy = $skew_y ?? 0;
            $transforms[] = "skew({$sx}deg, {$sy}deg)";
        }

        // Flip (only on desktop - no suffix needed)
        if ( $suffix === '' ) {
            if ( ! empty( $attributes['transformFlipH'] ) ) $transforms[] = 'scaleX(-1)';
            if ( ! empty( $attributes['transformFlipV'] ) ) $transforms[] = 'scaleY(-1)';
        }

        return $transforms;
    }

    /**
     * Get mask shape URL for predefined Elementor shapes
     *
     * @param string $shape Shape name.
     * @return string URL to SVG.
     */
    private static function get_mask_shape_url( $shape ) {
        $valid_shapes = [
            'circle', 'oval-vertical', 'oval-horizontal', 'pill-vertical', 'pill-horizontal',
            'triangle', 'diamond', 'pentagon', 'hexagon-vertical', 'hexagon-horizontal',
            'heptagon', 'octagon', 'parallelogram-right', 'parallelogram-left',
            'trapezoid-up', 'trapezoid-down', 'flower', 'sketch', 'hexagon', 'blob'
        ];

        $shape_name = in_array( $shape, $valid_shapes, true ) ? $shape : 'circle';
        return '/wp-content/plugins/elementor/assets/mask-shapes/' . $shape_name . '.svg';
    }

    /**
     * Convert style array to inline style string
     *
     * @param array $styles CSS properties.
     * @return string Inline style value.
     */
    private static function array_to_style_string( $styles ) {
        if ( empty( $styles ) ) {
            return '';
        }

        $parts = [];
        foreach ( $styles as $property => $value ) {
            $parts[] = $property . ': ' . $value;
        }

        return implode( '; ', $parts );
    }

    /**
     * Generate Search Form specific CSS
     *
     * This generates CSS for search-form inspector controls that need
     * high-specificity selectors to override Voxel's commons.css.
     *
     * Called separately from generate_all() because search-form has
     * special requirements like portal-rendered elements (switcher button).
     *
     * @param array  $attributes Block attributes.
     * @param string $block_id   Block unique ID.
     * @return string CSS rules.
     */
    public static function generate_search_form_css( $attributes, $block_id ) {
        if ( empty( $block_id ) ) {
            return '';
        }

        $css_rules = [];
        $tablet_rules = [];
        $mobile_rules = [];

        // Block selector (frontend uses single class)
        $selector = '.voxel-fse-search-form-' . $block_id;

        // CRITICAL: Popup selector for portal elements rendered at document.body level
        // FieldPopup uses createPortal(..., document.body), so block-scoped selectors cannot reach them.
        // Instead, we target popups via the class added to their wrapper: voxel-popup-{blockId}
        $popup_selector = '.voxel-popup-' . $block_id;

        // SPECIFICITY FIX for Map/Feed Switcher: The switcher is portaled to document.body.
        // commons.css uses `.ts-switcher-btn .ts-btn` (specificity 0,2,0)
        // We need higher specificity to override. Using doubled class selector (0,2,0)
        // Combined with `.ts-switcher-btn .ts-btn` = (0,4,0) which beats commons.css (0,2,0)
        $switcher_selector = '.voxel-fse-search-form-' . $block_id . '.voxel-fse-search-form-' . $block_id;

        // ============================================
        // Map/Feed Switcher Styles
        // Source: themes/voxel/templates/widgets/search-form.php:2917-3065
        // Target: .ts-switcher-btn (container), .ts-switcher-btn .ts-btn (button)
        // These styles target portal-rendered elements at document.body level
        // ============================================

        // Switcher Alignment - ts_switcher_position
        if ( ! empty( $attributes['mapSwitcherAlign'] ) ) {
            $css_rules[] = "{$switcher_selector} .ts-switcher-btn { justify-content: {$attributes['mapSwitcherAlign']}; }";
        }

        // Bottom Margin - ts_switcher_bottom
        if ( isset( $attributes['mapSwitcherBottomMargin'] ) && $attributes['mapSwitcherBottomMargin'] !== '' ) {
            $css_rules[] = "{$switcher_selector} .ts-switcher-btn { bottom: {$attributes['mapSwitcherBottomMargin']}px; }";
        }
        if ( isset( $attributes['mapSwitcherBottomMargin_tablet'] ) && $attributes['mapSwitcherBottomMargin_tablet'] !== '' ) {
            $tablet_rules[] = "{$switcher_selector} .ts-switcher-btn { bottom: {$attributes['mapSwitcherBottomMargin_tablet']}px; }";
        }
        if ( isset( $attributes['mapSwitcherBottomMargin_mobile'] ) && $attributes['mapSwitcherBottomMargin_mobile'] !== '' ) {
            $mobile_rules[] = "{$switcher_selector} .ts-switcher-btn { bottom: {$attributes['mapSwitcherBottomMargin_mobile']}px; }";
        }

        // Side Margin - ts_switcher_side
        if ( isset( $attributes['mapSwitcherSideMargin'] ) && $attributes['mapSwitcherSideMargin'] !== '' ) {
            $css_rules[] = "{$switcher_selector} .ts-switcher-btn { padding-left: {$attributes['mapSwitcherSideMargin']}px; padding-right: {$attributes['mapSwitcherSideMargin']}px; }";
        }
        if ( isset( $attributes['mapSwitcherSideMargin_tablet'] ) && $attributes['mapSwitcherSideMargin_tablet'] !== '' ) {
            $tablet_rules[] = "{$switcher_selector} .ts-switcher-btn { padding-left: {$attributes['mapSwitcherSideMargin_tablet']}px; padding-right: {$attributes['mapSwitcherSideMargin_tablet']}px; }";
        }
        if ( isset( $attributes['mapSwitcherSideMargin_mobile'] ) && $attributes['mapSwitcherSideMargin_mobile'] !== '' ) {
            $mobile_rules[] = "{$switcher_selector} .ts-switcher-btn { padding-left: {$attributes['mapSwitcherSideMargin_mobile']}px; padding-right: {$attributes['mapSwitcherSideMargin_mobile']}px; }";
        }

        // Typography - ts_switcher_typo
        if ( ! empty( $attributes['mapSwitcherTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['mapSwitcherTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$switcher_selector} .ts-switcher-btn .ts-btn { {$typo} }";
            }
        }

        // Text Color - ts_switcher_text
        if ( ! empty( $attributes['mapSwitcherColor'] ) ) {
            $css_rules[] = "{$switcher_selector} .ts-switcher-btn .ts-btn { color: {$attributes['mapSwitcherColor']}; }";
        }

        // Background Color - ts_switcher_bg
        if ( ! empty( $attributes['mapSwitcherBackgroundColor'] ) ) {
            $css_rules[] = "{$switcher_selector} .ts-switcher-btn .ts-btn { background: {$attributes['mapSwitcherBackgroundColor']}; }";
        }

        // Height - ts_switcher_height
        if ( isset( $attributes['mapSwitcherHeight'] ) && $attributes['mapSwitcherHeight'] !== '' ) {
            $css_rules[] = "{$switcher_selector} .ts-switcher-btn .ts-btn { height: {$attributes['mapSwitcherHeight']}px; }";
        }
        if ( isset( $attributes['mapSwitcherHeight_tablet'] ) && $attributes['mapSwitcherHeight_tablet'] !== '' ) {
            $tablet_rules[] = "{$switcher_selector} .ts-switcher-btn .ts-btn { height: {$attributes['mapSwitcherHeight_tablet']}px; }";
        }
        if ( isset( $attributes['mapSwitcherHeight_mobile'] ) && $attributes['mapSwitcherHeight_mobile'] !== '' ) {
            $mobile_rules[] = "{$switcher_selector} .ts-switcher-btn .ts-btn { height: {$attributes['mapSwitcherHeight_mobile']}px; }";
        }

        // Padding - ts_switcher_padding
        if ( ! empty( $attributes['mapSwitcherPadding'] ) ) {
            $padding = self::generate_dimensions_css( $attributes['mapSwitcherPadding'], 'padding' );
            if ( $padding ) {
                $css_rules[] = "{$switcher_selector} .ts-switcher-btn .ts-btn { {$padding} }";
            }
        }
        if ( ! empty( $attributes['mapSwitcherPadding_tablet'] ) ) {
            $padding = self::generate_dimensions_css( $attributes['mapSwitcherPadding_tablet'], 'padding' );
            if ( $padding ) {
                $tablet_rules[] = "{$switcher_selector} .ts-switcher-btn .ts-btn { {$padding} }";
            }
        }
        if ( ! empty( $attributes['mapSwitcherPadding_mobile'] ) ) {
            $padding = self::generate_dimensions_css( $attributes['mapSwitcherPadding_mobile'], 'padding' );
            if ( $padding ) {
                $mobile_rules[] = "{$switcher_selector} .ts-switcher-btn .ts-btn { {$padding} }";
            }
        }

        // Border - ts_switcher_border
        if ( ! empty( $attributes['mapSwitcherBorder'] ) ) {
            $border = self::generate_border_css( $attributes['mapSwitcherBorder'] );
            if ( $border ) {
                $css_rules[] = "{$switcher_selector} .ts-switcher-btn .ts-btn { border: {$border}; }";
            }
        }

        // Border Radius - ts_switcher_radius
        if ( isset( $attributes['mapSwitcherBorderRadius'] ) && $attributes['mapSwitcherBorderRadius'] !== '' ) {
            $unit = $attributes['mapSwitcherBorderRadiusUnit'] ?? 'px';
            $css_rules[] = "{$switcher_selector} .ts-switcher-btn .ts-btn { border-radius: {$attributes['mapSwitcherBorderRadius']}{$unit}; }";
        }
        if ( isset( $attributes['mapSwitcherBorderRadius_tablet'] ) && $attributes['mapSwitcherBorderRadius_tablet'] !== '' ) {
            $unit = $attributes['mapSwitcherBorderRadiusUnit'] ?? 'px';
            $tablet_rules[] = "{$switcher_selector} .ts-switcher-btn .ts-btn { border-radius: {$attributes['mapSwitcherBorderRadius_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['mapSwitcherBorderRadius_mobile'] ) && $attributes['mapSwitcherBorderRadius_mobile'] !== '' ) {
            $unit = $attributes['mapSwitcherBorderRadiusUnit'] ?? 'px';
            $mobile_rules[] = "{$switcher_selector} .ts-switcher-btn .ts-btn { border-radius: {$attributes['mapSwitcherBorderRadius_mobile']}{$unit}; }";
        }

        // Box Shadow - ts_switcher_shadow
        if ( ! empty( $attributes['mapSwitcherBoxShadow'] ) ) {
            $shadow = self::generate_box_shadow_css( $attributes['mapSwitcherBoxShadow'] );
            if ( $shadow ) {
                $css_rules[] = "{$switcher_selector} .ts-switcher-btn .ts-btn { box-shadow: {$shadow}; }";
            }
        }

        // Icon Spacing - ts_switcher_ico_spacing
        if ( isset( $attributes['mapSwitcherIconSpacing'] ) && $attributes['mapSwitcherIconSpacing'] !== '' ) {
            $css_rules[] = "{$switcher_selector} .ts-switcher-btn .ts-btn { grid-gap: {$attributes['mapSwitcherIconSpacing']}px; }";
        }
        if ( isset( $attributes['mapSwitcherIconSpacing_tablet'] ) && $attributes['mapSwitcherIconSpacing_tablet'] !== '' ) {
            $tablet_rules[] = "{$switcher_selector} .ts-switcher-btn .ts-btn { grid-gap: {$attributes['mapSwitcherIconSpacing_tablet']}px; }";
        }
        if ( isset( $attributes['mapSwitcherIconSpacing_mobile'] ) && $attributes['mapSwitcherIconSpacing_mobile'] !== '' ) {
            $mobile_rules[] = "{$switcher_selector} .ts-switcher-btn .ts-btn { grid-gap: {$attributes['mapSwitcherIconSpacing_mobile']}px; }";
        }

        // Icon Size - ts_switcher_ico_size
        if ( isset( $attributes['mapSwitcherIconSize'] ) && $attributes['mapSwitcherIconSize'] !== '' ) {
            $unit = $attributes['mapSwitcherIconSizeUnit'] ?? 'px';
            $css_rules[] = "{$switcher_selector} .ts-switcher-btn .ts-btn { --ts-icon-size: {$attributes['mapSwitcherIconSize']}{$unit}; }";
        }
        if ( isset( $attributes['mapSwitcherIconSize_tablet'] ) && $attributes['mapSwitcherIconSize_tablet'] !== '' ) {
            $unit = $attributes['mapSwitcherIconSizeUnit'] ?? 'px';
            $tablet_rules[] = "{$switcher_selector} .ts-switcher-btn .ts-btn { --ts-icon-size: {$attributes['mapSwitcherIconSize_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['mapSwitcherIconSize_mobile'] ) && $attributes['mapSwitcherIconSize_mobile'] !== '' ) {
            $unit = $attributes['mapSwitcherIconSizeUnit'] ?? 'px';
            $mobile_rules[] = "{$switcher_selector} .ts-switcher-btn .ts-btn { --ts-icon-size: {$attributes['mapSwitcherIconSize_mobile']}{$unit}; }";
        }

        // Icon Color - ts_switcher_ico_color
        if ( ! empty( $attributes['mapSwitcherIconColor'] ) ) {
            $css_rules[] = "{$switcher_selector} .ts-switcher-btn .ts-btn { --ts-icon-color: {$attributes['mapSwitcherIconColor']}; }";
        }

        // Hover States
        if ( ! empty( $attributes['mapSwitcherColorHover'] ) ) {
            $css_rules[] = "{$switcher_selector} .ts-switcher-btn .ts-btn:hover { color: {$attributes['mapSwitcherColorHover']}; }";
        }
        if ( ! empty( $attributes['mapSwitcherBackgroundColorHover'] ) ) {
            $css_rules[] = "{$switcher_selector} .ts-switcher-btn .ts-btn:hover { background: {$attributes['mapSwitcherBackgroundColorHover']}; }";
        }
        if ( ! empty( $attributes['mapSwitcherBorderColorHover'] ) ) {
            $css_rules[] = "{$switcher_selector} .ts-switcher-btn .ts-btn:hover { border-color: {$attributes['mapSwitcherBorderColorHover']}; }";
        }
        if ( ! empty( $attributes['mapSwitcherIconColorHover'] ) ) {
            $css_rules[] = "{$switcher_selector} .ts-switcher-btn .ts-btn:hover { --ts-icon-color: {$attributes['mapSwitcherIconColorHover']}; }";
        }

        // ============================================
        // CONTENT TAB - Post type filter width
        // Source: search-form.php:63-79
        // ============================================
        if ( isset( $attributes['postTypeFilterWidth'] ) && $attributes['postTypeFilterWidth'] !== '' ) {
            $css_rules[] = "{$selector} .choose-cpt-filter { width: {$attributes['postTypeFilterWidth']}%; }";
        }
        if ( isset( $attributes['postTypeFilterWidth_tablet'] ) && $attributes['postTypeFilterWidth_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .choose-cpt-filter { width: {$attributes['postTypeFilterWidth_tablet']}%; }";
        }
        if ( isset( $attributes['postTypeFilterWidth_mobile'] ) && $attributes['postTypeFilterWidth_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .choose-cpt-filter { width: {$attributes['postTypeFilterWidth_mobile']}%; }";
        }

        // ============================================
        // CONTENT TAB - Search button width
        // Source: search-form.php:509-523
        // ============================================
        if ( isset( $attributes['searchButtonWidth'] ) && $attributes['searchButtonWidth'] !== '' ) {
            $unit = $attributes['searchButtonWidthUnit'] ?? '%';
            $css_rules[] = "{$selector} .ts-form-group.ts-form-submit { width: {$attributes['searchButtonWidth']}{$unit}; }";
        }
        if ( isset( $attributes['searchButtonWidth_tablet'] ) && $attributes['searchButtonWidth_tablet'] !== '' ) {
            $unit = $attributes['searchButtonWidthUnit'] ?? '%';
            $tablet_rules[] = "{$selector} .ts-form-group.ts-form-submit { width: {$attributes['searchButtonWidth_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['searchButtonWidth_mobile'] ) && $attributes['searchButtonWidth_mobile'] !== '' ) {
            $unit = $attributes['searchButtonWidthUnit'] ?? '%';
            $mobile_rules[] = "{$selector} .ts-form-group.ts-form-submit { width: {$attributes['searchButtonWidth_mobile']}{$unit}; }";
        }

        // ============================================
        // CONTENT TAB - Reset button width
        // Source: search-form.php:558-570
        // ============================================
        if ( isset( $attributes['resetButtonWidth'] ) && $attributes['resetButtonWidth'] !== '' ) {
            $unit = $attributes['resetButtonWidthUnit'] ?? '%';
            $css_rules[] = "{$selector} .ts-form-reset { width: {$attributes['resetButtonWidth']}{$unit}; }";
        }
        if ( isset( $attributes['resetButtonWidth_tablet'] ) && $attributes['resetButtonWidth_tablet'] !== '' ) {
            $unit = $attributes['resetButtonWidthUnit'] ?? '%';
            $tablet_rules[] = "{$selector} .ts-form-reset { width: {$attributes['resetButtonWidth_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['resetButtonWidth_mobile'] ) && $attributes['resetButtonWidth_mobile'] !== '' ) {
            $unit = $attributes['resetButtonWidthUnit'] ?? '%';
            $mobile_rules[] = "{$selector} .ts-form-reset { width: {$attributes['resetButtonWidth_mobile']}{$unit}; }";
        }

        // ============================================
        // GENERAL TAB - Section 1: General
        // Source: search-form.php:912-974
        // ============================================

        // Filter Margin (uses padding property)
        if ( ! empty( $attributes['filterMargin'] ) ) {
            $padding = self::generate_dimensions_css( $attributes['filterMargin'], 'padding' );
            if ( $padding ) {
                $css_rules[] = "{$selector} .ts-filter-wrapper > .ts-form-group { {$padding} }";
            }
        }
        if ( ! empty( $attributes['filterMargin_tablet'] ) ) {
            $padding = self::generate_dimensions_css( $attributes['filterMargin_tablet'], 'padding' );
            if ( $padding ) {
                $tablet_rules[] = "{$selector} .ts-filter-wrapper > .ts-form-group { {$padding} }";
            }
        }
        if ( ! empty( $attributes['filterMargin_mobile'] ) ) {
            $padding = self::generate_dimensions_css( $attributes['filterMargin_mobile'], 'padding' );
            if ( $padding ) {
                $mobile_rules[] = "{$selector} .ts-filter-wrapper > .ts-form-group { {$padding} }";
            }
        }

        // Show labels (default is false in block.json  labels hidden by default)
        // Note: $attributes may not include defaults from block.json, so use ?? false
        $show_labels = $attributes['showLabels'] ?? false;
        if ( $show_labels === false ) {
            $css_rules[] = "{$selector} .ts-form-group > label:not(.ts-keep-visible) { display: none; }";
        }

        // Label color
        if ( ! empty( $attributes['labelColor'] ) ) {
            $css_rules[] = "{$selector} .ts-form-group > label { color: {$attributes['labelColor']}; }";
        }

        // Label typography
        if ( ! empty( $attributes['labelTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['labelTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-form-group > label { {$typo} }";
            }
        }

        // ============================================
        // GENERAL TAB - Section 2: Common Styles
        // Source: search-form.php:978-1266
        // ============================================

        // Height
        if ( isset( $attributes['commonHeight'] ) && $attributes['commonHeight'] !== '' ) {
            $css_rules[] = "{$selector} .ts-form-group .ts-filter { min-height: {$attributes['commonHeight']}px; }";
        }
        if ( isset( $attributes['commonHeight_tablet'] ) && $attributes['commonHeight_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-form-group .ts-filter { min-height: {$attributes['commonHeight_tablet']}px; }";
        }
        if ( isset( $attributes['commonHeight_mobile'] ) && $attributes['commonHeight_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-form-group .ts-filter { min-height: {$attributes['commonHeight_mobile']}px; }";
        }

        // Icon size
        if ( isset( $attributes['commonIconSize'] ) && $attributes['commonIconSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-form-group .ts-filter > span svg { width: {$attributes['commonIconSize']}px; height: {$attributes['commonIconSize']}px; }";
        }
        if ( isset( $attributes['commonIconSize_tablet'] ) && $attributes['commonIconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-form-group .ts-filter > span svg { width: {$attributes['commonIconSize_tablet']}px; height: {$attributes['commonIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['commonIconSize_mobile'] ) && $attributes['commonIconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-form-group .ts-filter > span svg { width: {$attributes['commonIconSize_mobile']}px; height: {$attributes['commonIconSize_mobile']}px; }";
        }

        // Border radius
        if ( isset( $attributes['commonBorderRadius'] ) && $attributes['commonBorderRadius'] !== '' ) {
            $unit = $attributes['commonBorderRadiusUnit'] ?? 'px';
            $css_rules[] = "{$selector} .ts-form-group .ts-filter { border-radius: {$attributes['commonBorderRadius']}{$unit}; }";
        }
        if ( isset( $attributes['commonBorderRadius_tablet'] ) && $attributes['commonBorderRadius_tablet'] !== '' ) {
            $unit = $attributes['commonBorderRadiusUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .ts-form-group .ts-filter { border-radius: {$attributes['commonBorderRadius_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['commonBorderRadius_mobile'] ) && $attributes['commonBorderRadius_mobile'] !== '' ) {
            $unit = $attributes['commonBorderRadiusUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .ts-form-group .ts-filter { border-radius: {$attributes['commonBorderRadius_mobile']}{$unit}; }";
        }

        // Box shadow
        if ( ! empty( $attributes['commonBoxShadow'] ) ) {
            $shadow = self::generate_box_shadow_css( $attributes['commonBoxShadow'] );
            if ( $shadow ) {
                $css_rules[] = "{$selector} .ts-form-group .ts-filter { box-shadow: {$shadow}; }";
            }
        }

        // Border
        if ( ! empty( $attributes['commonBorder'] ) ) {
            $border = self::generate_border_css( $attributes['commonBorder'] );
            if ( $border ) {
                $css_rules[] = "{$selector} .ts-form-group .ts-filter { border: {$border}; }";
            }
        }

        // Background color
        if ( ! empty( $attributes['commonBackgroundColor'] ) ) {
            $css_rules[] = "{$selector} .ts-form-group .ts-filter { background-color: {$attributes['commonBackgroundColor']}; }";
        }

        // Icon color
        if ( ! empty( $attributes['commonIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-form-group .ts-filter > span svg { fill: {$attributes['commonIconColor']}; color: {$attributes['commonIconColor']}; }";
        }

        // Text color
        if ( ! empty( $attributes['commonTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-form-group .ts-filter .ts-filter-text { color: {$attributes['commonTextColor']}; }";
        }

        // Hover states
        if ( ! empty( $attributes['commonBoxShadowHover'] ) ) {
            $shadow = self::generate_box_shadow_css( $attributes['commonBoxShadowHover'] );
            if ( $shadow ) {
                $css_rules[] = "{$selector} .ts-form-group .ts-filter:hover { box-shadow: {$shadow}; }";
            }
        }
        if ( ! empty( $attributes['commonBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-form-group .ts-filter:hover { border-color: {$attributes['commonBorderColorHover']}; }";
        }
        if ( ! empty( $attributes['commonBackgroundColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-form-group .ts-filter:hover { background-color: {$attributes['commonBackgroundColorHover']}; }";
        }
        if ( ! empty( $attributes['commonIconColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-form-group .ts-filter:hover > span svg { fill: {$attributes['commonIconColorHover']}; color: {$attributes['commonIconColorHover']}; }";
        }
        if ( ! empty( $attributes['commonTextColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-form-group .ts-filter:hover .ts-filter-text { color: {$attributes['commonTextColorHover']}; }";
        }

        // Typography
        if ( ! empty( $attributes['commonTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['commonTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-form-group .ts-filter .ts-filter-text { {$typo} }";
            }
        }

        // Hide chevron
        if ( ! empty( $attributes['hideChevron'] ) && $attributes['hideChevron'] === true ) {
            $css_rules[] = "{$selector} .ts-form-group .ts-filter .ts-down-icon { display: none; }";
        }

        // Chevron color
        if ( ! empty( $attributes['chevronColor'] ) ) {
            $css_rules[] = "{$selector} .ts-form-group .ts-filter .ts-down-icon { color: {$attributes['chevronColor']}; border-color: {$attributes['chevronColor']}; }";
        }
        if ( ! empty( $attributes['chevronColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-form-group .ts-filter:hover .ts-down-icon { color: {$attributes['chevronColorHover']}; border-color: {$attributes['chevronColorHover']}; }";
        }

        // ============================================
        // GENERAL TAB - Section 3: Button
        // Source: search-form.php:1270-1468
        // ============================================

        // Button Padding
        if ( ! empty( $attributes['buttonPadding'] ) ) {
            $padding = self::generate_dimensions_css( $attributes['buttonPadding'], 'padding' );
            if ( $padding ) {
                $css_rules[] = "{$selector} .ts-form-group .ts-filter { {$padding} }";
            }
        }
        if ( ! empty( $attributes['buttonPadding_tablet'] ) ) {
            $padding = self::generate_dimensions_css( $attributes['buttonPadding_tablet'], 'padding' );
            if ( $padding ) {
                $tablet_rules[] = "{$selector} .ts-form-group .ts-filter { {$padding} }";
            }
        }
        if ( ! empty( $attributes['buttonPadding_mobile'] ) ) {
            $padding = self::generate_dimensions_css( $attributes['buttonPadding_mobile'], 'padding' );
            if ( $padding ) {
                $mobile_rules[] = "{$selector} .ts-form-group .ts-filter { {$padding} }";
            }
        }

        // Button Icon/Text spacing
        if ( isset( $attributes['buttonIconSpacing'] ) && $attributes['buttonIconSpacing'] !== '' ) {
            $css_rules[] = "{$selector} .ts-form-group .ts-filter { grid-gap: {$attributes['buttonIconSpacing']}px; }";
            $css_rules[] = "{$selector} .ts-search-btn { grid-gap: {$attributes['buttonIconSpacing']}px; }";
        }
        if ( isset( $attributes['buttonIconSpacing_tablet'] ) && $attributes['buttonIconSpacing_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-form-group .ts-filter { grid-gap: {$attributes['buttonIconSpacing_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-search-btn { grid-gap: {$attributes['buttonIconSpacing_tablet']}px; }";
        }
        if ( isset( $attributes['buttonIconSpacing_mobile'] ) && $attributes['buttonIconSpacing_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-form-group .ts-filter { grid-gap: {$attributes['buttonIconSpacing_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-search-btn { grid-gap: {$attributes['buttonIconSpacing_mobile']}px; }";
        }

        // Filled state
        if ( ! empty( $attributes['buttonFilledTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['buttonFilledTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-form-group .ts-filter.ts-filled { {$typo} }";
            }
        }
        if ( ! empty( $attributes['buttonFilledBackground'] ) ) {
            $css_rules[] = "{$selector} .ts-form-group .ts-filter.ts-filled { background-color: {$attributes['buttonFilledBackground']}; }";
        }
        if ( ! empty( $attributes['buttonFilledTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-form-group .ts-filter.ts-filled .ts-filter-text { color: {$attributes['buttonFilledTextColor']}; }";
        }
        if ( ! empty( $attributes['buttonFilledIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-form-group .ts-filter.ts-filled { --ts-icon-color: {$attributes['buttonFilledIconColor']}; }";
        }
        if ( ! empty( $attributes['buttonFilledBorderColor'] ) ) {
            $css_rules[] = "{$selector} .ts-form-group .ts-filter.ts-filled { border-color: {$attributes['buttonFilledBorderColor']}; }";
        }
        if ( isset( $attributes['buttonFilledBorderWidth'] ) && $attributes['buttonFilledBorderWidth'] !== '' ) {
            $unit = $attributes['buttonFilledBorderWidthUnit'] ?? 'px';
            $css_rules[] = "{$selector} .ts-form-group .ts-filter.ts-filled { border-width: {$attributes['buttonFilledBorderWidth']}{$unit}; }";
        }
        if ( ! empty( $attributes['buttonFilledBoxShadow'] ) ) {
            $shadow = self::generate_box_shadow_css( $attributes['buttonFilledBoxShadow'] );
            if ( $shadow ) {
                $css_rules[] = "{$selector} .ts-form-group .ts-filter.ts-filled { box-shadow: {$shadow}; }";
            }
        }
        if ( ! empty( $attributes['buttonFilledChevronColor'] ) ) {
            $css_rules[] = "{$selector} .ts-form-group .ts-filter.ts-filled .ts-down-icon { border-color: {$attributes['buttonFilledChevronColor']}; }";
        }

        // ============================================
        // GENERAL TAB - Section 5: Search Button
        // Source: search-form.php:1600-1769
        // ============================================

        // Normal state
        if ( ! empty( $attributes['searchBtnColor'] ) ) {
            $css_rules[] = "{$selector} .ts-search-btn { color: {$attributes['searchBtnColor']}; }";
        }
        if ( ! empty( $attributes['searchBtnIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-search-btn { --ts-icon-color: {$attributes['searchBtnIconColor']}; }";
        }
        if ( ! empty( $attributes['searchBtnBackgroundColor'] ) ) {
            $css_rules[] = "{$selector} .ts-search-btn { background: {$attributes['searchBtnBackgroundColor']}; }";
        }
        if ( ! empty( $attributes['searchBtnBorder'] ) ) {
            $border = self::generate_border_css( $attributes['searchBtnBorder'] );
            if ( $border ) {
                $css_rules[] = "{$selector} .ts-form-submit.ts-form-group button.ts-search-btn { border: {$border}; }";
            }
            // Border radius from BorderGroupControl
            if ( ! empty( $attributes['searchBtnBorder']['borderRadius'] ) ) {
                $radius = $attributes['searchBtnBorder']['borderRadius'];
                $unit = $radius['unit'] ?? 'px';
                $top = isset( $radius['top'] ) ? preg_replace( '/[^0-9.]/', '', $radius['top'] ) : '0';
                $right = isset( $radius['right'] ) ? preg_replace( '/[^0-9.]/', '', $radius['right'] ) : '0';
                $bottom = isset( $radius['bottom'] ) ? preg_replace( '/[^0-9.]/', '', $radius['bottom'] ) : '0';
                $left = isset( $radius['left'] ) ? preg_replace( '/[^0-9.]/', '', $radius['left'] ) : '0';
                if ( $top !== '0' || $right !== '0' || $bottom !== '0' || $left !== '0' ) {
                    $css_rules[] = "{$selector} .ts-form-submit.ts-form-group button.ts-search-btn { border-radius: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
                }
            }
        }
        if ( ! empty( $attributes['searchBtnBoxShadow'] ) ) {
            $shadow = self::generate_box_shadow_css( $attributes['searchBtnBoxShadow'] );
            if ( $shadow ) {
                $css_rules[] = "{$selector} .ts-search-btn { box-shadow: {$shadow}; }";
            }
        }

        // Hover state
        if ( ! empty( $attributes['searchBtnTextColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-search-btn:hover { color: {$attributes['searchBtnTextColorHover']}; }";
        }
        if ( ! empty( $attributes['searchBtnIconColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-search-btn:hover { --ts-icon-color: {$attributes['searchBtnIconColorHover']}; }";
        }
        if ( ! empty( $attributes['searchBtnBackgroundColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-search-btn:hover { background: {$attributes['searchBtnBackgroundColorHover']}; }";
        }
        if ( ! empty( $attributes['searchBtnBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-form-submit.ts-form-group button.ts-search-btn:hover { border-color: {$attributes['searchBtnBorderColorHover']}; }";
        }
        if ( ! empty( $attributes['searchBtnBoxShadowHover'] ) ) {
            $shadow = self::generate_box_shadow_css( $attributes['searchBtnBoxShadowHover'] );
            if ( $shadow ) {
                $css_rules[] = "{$selector} .ts-search-btn:hover { box-shadow: {$shadow}; }";
            }
        }

        // ============================================
        // INLINE TAB - Section 1: Terms: Inline
        // Source: search-form.php:1811, 1823, 1843, 1868, 1889
        // Selectors: .inline-multilevel li > a span
        // ============================================

        // Normal state - Title
        if ( ! empty( $attributes['termsInlineTitleColor'] ) ) {
            $css_rules[] = "{$selector} .inline-multilevel li > a span { color: {$attributes['termsInlineTitleColor']}; }";
        }
        if ( ! empty( $attributes['termsInlineTitleTypographyNormal'] ) ) {
            $typo = self::generate_typography_css( $attributes['termsInlineTitleTypographyNormal'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .inline-multilevel li > a span { {$typo}; }";
            }
        }

        // Normal state - Icon (Voxel uses CSS custom property --ts-icon-color)
        if ( ! empty( $attributes['termsInlineIconColor'] ) ) {
            $css_rules[] = "{$selector} .inline-multilevel .ts-term-icon { --ts-icon-color: {$attributes['termsInlineIconColor']}; }";
        }
        // Icon size
        if ( isset( $attributes['termsInlineIconSize'] ) && $attributes['termsInlineIconSize'] !== '' ) {
            $unit = $attributes['termsInlineIconSizeUnit'] ?? 'px';
            $css_rules[] = "{$selector} .inline-multilevel .ts-term-icon { --ts-icon-size: {$attributes['termsInlineIconSize']}{$unit}; }";
        }
        if ( isset( $attributes['termsInlineIconSize_tablet'] ) && $attributes['termsInlineIconSize_tablet'] !== '' ) {
            $unit = $attributes['termsInlineIconSizeUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .inline-multilevel .ts-term-icon { --ts-icon-size: {$attributes['termsInlineIconSize_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['termsInlineIconSize_mobile'] ) && $attributes['termsInlineIconSize_mobile'] !== '' ) {
            $unit = $attributes['termsInlineIconSizeUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .inline-multilevel .ts-term-icon { --ts-icon-size: {$attributes['termsInlineIconSize_mobile']}{$unit}; }";
        }

        // Inner gap (grid-gap on li > a)
        if ( isset( $attributes['termsInlineInnerGap'] ) && $attributes['termsInlineInnerGap'] !== '' ) {
            $css_rules[] = "{$selector} .inline-multilevel li > a { grid-gap: {$attributes['termsInlineInnerGap']}px; }";
        }
        if ( isset( $attributes['termsInlineInnerGap_tablet'] ) && $attributes['termsInlineInnerGap_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .inline-multilevel li > a { grid-gap: {$attributes['termsInlineInnerGap_tablet']}px; }";
        }
        if ( isset( $attributes['termsInlineInnerGap_mobile'] ) && $attributes['termsInlineInnerGap_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .inline-multilevel li > a { grid-gap: {$attributes['termsInlineInnerGap_mobile']}px; }";
        }

        // Chevron color
        if ( ! empty( $attributes['termsInlineChevronColor'] ) ) {
            $css_rules[] = "{$selector} .ts-right-icon, {$selector} .ts-left-icon { border-color: {$attributes['termsInlineChevronColor']}; }";
        }

        // Hover state
        if ( ! empty( $attributes['termsInlineTitleColorHover'] ) ) {
            $css_rules[] = "{$selector} .inline-multilevel li > a:hover span { color: {$attributes['termsInlineTitleColorHover']}; }";
        }
        if ( ! empty( $attributes['termsInlineIconColorHover'] ) ) {
            $css_rules[] = "{$selector} .inline-multilevel li > a:hover .ts-term-icon { --ts-icon-color: {$attributes['termsInlineIconColorHover']}; }";
        }
        if ( ! empty( $attributes['termsInlineChevronColorHover'] ) ) {
            $css_rules[] = "{$selector} .inline-multilevel li > a:hover .ts-right-icon, {$selector} .inline-multilevel li > a:hover .ts-left-icon { border-color: {$attributes['termsInlineChevronColorHover']}; }";
        }

        // Selected state
        if ( ! empty( $attributes['termsInlineTitleColorSelected'] ) ) {
            $css_rules[] = "{$selector} .inline-multilevel li.ts-selected > a span { color: {$attributes['termsInlineTitleColorSelected']}; }";
        }
        if ( ! empty( $attributes['termsInlineTitleTypographySelected'] ) ) {
            $typo = self::generate_typography_css( $attributes['termsInlineTitleTypographySelected'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .inline-multilevel li.ts-selected > a span { {$typo}; }";
            }
        }
        if ( ! empty( $attributes['termsInlineIconColorSelected'] ) ) {
            $css_rules[] = "{$selector} .inline-multilevel li.ts-selected > a .ts-term-icon { --ts-icon-color: {$attributes['termsInlineIconColorSelected']}; }";
        }
        if ( ! empty( $attributes['termsInlineChevronColorSelected'] ) ) {
            $css_rules[] = "{$selector} .inline-multilevel li.ts-selected > a .ts-right-icon, {$selector} .inline-multilevel li.ts-selected > a .ts-left-icon { border-color: {$attributes['termsInlineChevronColorSelected']}; }";
        }

        // ============================================
        // INLINE TAB - Section 2: Terms: Buttons
        // Source: search-form.php:2049, 2060, 2072, 2090, 2102, 2112, 2139
        // Selectors: .addon-buttons li
        // ============================================

        if ( isset( $attributes['termsButtonsGap'] ) && $attributes['termsButtonsGap'] !== '' ) {
            $css_rules[] = "{$selector} .addon-buttons { grid-gap: {$attributes['termsButtonsGap']}px; }";
        }
        if ( isset( $attributes['termsButtonsGap_tablet'] ) && $attributes['termsButtonsGap_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .addon-buttons { grid-gap: {$attributes['termsButtonsGap_tablet']}px; }";
        }
        if ( isset( $attributes['termsButtonsGap_mobile'] ) && $attributes['termsButtonsGap_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .addon-buttons { grid-gap: {$attributes['termsButtonsGap_mobile']}px; }";
        }

        if ( ! empty( $attributes['termsButtonsBackground'] ) ) {
            $css_rules[] = "{$selector} .addon-buttons li { background: {$attributes['termsButtonsBackground']}; }";
        }
        // Border type
        if ( ! empty( $attributes['termsButtonsBorderType'] ) && $attributes['termsButtonsBorderType'] !== 'none' ) {
            $css_rules[] = "{$selector} .addon-buttons li { border-style: {$attributes['termsButtonsBorderType']}; }";
        }
        if ( isset( $attributes['termsButtonsBorderType'] ) && $attributes['termsButtonsBorderType'] === 'none' ) {
            $css_rules[] = "{$selector} .addon-buttons li { border: none; }";
        }
        // Border radius
        if ( isset( $attributes['termsButtonsBorderRadius'] ) && $attributes['termsButtonsBorderRadius'] !== '' ) {
            $css_rules[] = "{$selector} .addon-buttons li { border-radius: {$attributes['termsButtonsBorderRadius']}px; }";
        }
        if ( isset( $attributes['termsButtonsBorderRadius_tablet'] ) && $attributes['termsButtonsBorderRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .addon-buttons li { border-radius: {$attributes['termsButtonsBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['termsButtonsBorderRadius_mobile'] ) && $attributes['termsButtonsBorderRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .addon-buttons li { border-radius: {$attributes['termsButtonsBorderRadius_mobile']}px; }";
        }
        if ( ! empty( $attributes['termsButtonsTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['termsButtonsTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .addon-buttons li { {$typo}; }";
            }
        }
        if ( ! empty( $attributes['termsButtonsTextColor'] ) ) {
            $css_rules[] = "{$selector} .addon-buttons li { color: {$attributes['termsButtonsTextColor']}; }";
        }

        // Selected state (Voxel uses .adb-selected class)
        if ( ! empty( $attributes['termsButtonsBackgroundSelected'] ) ) {
            $css_rules[] = "{$selector} .addon-buttons li.adb-selected { background: {$attributes['termsButtonsBackgroundSelected']}; }";
        }
        if ( ! empty( $attributes['termsButtonsColorSelected'] ) ) {
            $css_rules[] = "{$selector} .addon-buttons li.adb-selected { color: {$attributes['termsButtonsColorSelected']}; }";
        }
        if ( ! empty( $attributes['termsButtonsBorderColorSelected'] ) ) {
            $css_rules[] = "{$selector} .addon-buttons li.adb-selected { border-color: {$attributes['termsButtonsBorderColorSelected']}; }";
        }
        if ( ! empty( $attributes['termsButtonsBoxShadowSelected'] ) ) {
            $shadow = self::generate_box_shadow_css( $attributes['termsButtonsBoxShadowSelected'] );
            if ( $shadow ) {
                $css_rules[] = "{$selector} .addon-buttons li.adb-selected { box-shadow: {$shadow}; }";
            }
        }

        // ============================================
        // INLINE TAB - Section 3: Geolocation Icon
        // Source: search-form.php:2225, 2257, 2268, 2293, 2304, 2315, 2337, 2364
        // Selectors: .inline-user-location
        // ============================================

        if ( isset( $attributes['geoIconRightMargin'] ) && $attributes['geoIconRightMargin'] !== '' ) {
            $css_rules[] = "{$selector} .inline-user-location { right: {$attributes['geoIconRightMargin']}px; }";
        }
        if ( isset( $attributes['geoIconRightMargin_tablet'] ) && $attributes['geoIconRightMargin_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .inline-user-location { right: {$attributes['geoIconRightMargin_tablet']}px; }";
        }
        if ( isset( $attributes['geoIconRightMargin_mobile'] ) && $attributes['geoIconRightMargin_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .inline-user-location { right: {$attributes['geoIconRightMargin_mobile']}px; }";
        }

        if ( isset( $attributes['geoIconButtonSize'] ) && $attributes['geoIconButtonSize'] !== '' ) {
            $unit = $attributes['geoIconButtonSizeUnit'] ?? 'px';
            $css_rules[] = "{$selector} .inline-user-location { width: {$attributes['geoIconButtonSize']}{$unit}; height: {$attributes['geoIconButtonSize']}{$unit}; }";
        }
        if ( isset( $attributes['geoIconButtonSize_tablet'] ) && $attributes['geoIconButtonSize_tablet'] !== '' ) {
            $unit = $attributes['geoIconButtonSizeUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .inline-user-location { width: {$attributes['geoIconButtonSize_tablet']}{$unit}; height: {$attributes['geoIconButtonSize_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['geoIconButtonSize_mobile'] ) && $attributes['geoIconButtonSize_mobile'] !== '' ) {
            $unit = $attributes['geoIconButtonSizeUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .inline-user-location { width: {$attributes['geoIconButtonSize_mobile']}{$unit}; height: {$attributes['geoIconButtonSize_mobile']}{$unit}; }";
        }

        if ( ! empty( $attributes['geoIconButtonBackground'] ) ) {
            $css_rules[] = "{$selector} .inline-user-location { background-color: {$attributes['geoIconButtonBackground']}; }";
        }
        // Border type
        if ( ! empty( $attributes['geoIconButtonBorderType'] ) && $attributes['geoIconButtonBorderType'] !== 'none' ) {
            $css_rules[] = "{$selector} .inline-user-location { border-style: {$attributes['geoIconButtonBorderType']}; }";
        }
        if ( isset( $attributes['geoIconButtonBorderType'] ) && $attributes['geoIconButtonBorderType'] === 'none' ) {
            $css_rules[] = "{$selector} .inline-user-location { border: none; }";
        }
        // Border radius
        if ( isset( $attributes['geoIconButtonBorderRadius'] ) && $attributes['geoIconButtonBorderRadius'] !== '' ) {
            $unit = $attributes['geoIconButtonBorderRadiusUnit'] ?? 'px';
            $css_rules[] = "{$selector} .inline-user-location { border-radius: {$attributes['geoIconButtonBorderRadius']}{$unit}; }";
        }
        if ( isset( $attributes['geoIconButtonBorderRadius_tablet'] ) && $attributes['geoIconButtonBorderRadius_tablet'] !== '' ) {
            $unit = $attributes['geoIconButtonBorderRadiusUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .inline-user-location { border-radius: {$attributes['geoIconButtonBorderRadius_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['geoIconButtonBorderRadius_mobile'] ) && $attributes['geoIconButtonBorderRadius_mobile'] !== '' ) {
            $unit = $attributes['geoIconButtonBorderRadiusUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .inline-user-location { border-radius: {$attributes['geoIconButtonBorderRadius_mobile']}{$unit}; }";
        }
        // Icon color
        if ( ! empty( $attributes['geoIconButtonIconColor'] ) ) {
            $css_rules[] = "{$selector} .inline-user-location { --ts-icon-color: {$attributes['geoIconButtonIconColor']}; }";
        }
        // Icon size
        if ( isset( $attributes['geoIconButtonIconSize'] ) && $attributes['geoIconButtonIconSize'] !== '' ) {
            $unit = $attributes['geoIconButtonIconSizeUnit'] ?? 'px';
            $css_rules[] = "{$selector} .inline-user-location { --ts-icon-size: {$attributes['geoIconButtonIconSize']}{$unit}; }";
        }
        if ( isset( $attributes['geoIconButtonIconSize_tablet'] ) && $attributes['geoIconButtonIconSize_tablet'] !== '' ) {
            $unit = $attributes['geoIconButtonIconSizeUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .inline-user-location { --ts-icon-size: {$attributes['geoIconButtonIconSize_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['geoIconButtonIconSize_mobile'] ) && $attributes['geoIconButtonIconSize_mobile'] !== '' ) {
            $unit = $attributes['geoIconButtonIconSizeUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .inline-user-location { --ts-icon-size: {$attributes['geoIconButtonIconSize_mobile']}{$unit}; }";
        }

        // Hover state
        if ( ! empty( $attributes['geoIconButtonBackgroundHover'] ) ) {
            $css_rules[] = "{$selector} .inline-user-location:hover { background-color: {$attributes['geoIconButtonBackgroundHover']}; }";
        }
        if ( ! empty( $attributes['geoIconButtonBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .inline-user-location:hover { border-color: {$attributes['geoIconButtonBorderColorHover']}; }";
        }
        if ( ! empty( $attributes['geoIconButtonIconColorHover'] ) ) {
            $css_rules[] = "{$selector} .inline-user-location:hover { --ts-icon-color: {$attributes['geoIconButtonIconColorHover']}; }";
        }

        // ============================================
        // INLINE TAB - Section 4: Stepper
        // Source: search-form.php:2439
        // Selectors: .ts-inline-filter .ts-stepper-input input
        // ============================================

        if ( isset( $attributes['stepperInputValueSize'] ) && $attributes['stepperInputValueSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-inline-filter .ts-stepper-input input { font-size: {$attributes['stepperInputValueSize']}px; }";
        }
        if ( isset( $attributes['stepperInputValueSize_tablet'] ) && $attributes['stepperInputValueSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-inline-filter .ts-stepper-input input { font-size: {$attributes['stepperInputValueSize_tablet']}px; }";
        }
        if ( isset( $attributes['stepperInputValueSize_mobile'] ) && $attributes['stepperInputValueSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-inline-filter .ts-stepper-input input { font-size: {$attributes['stepperInputValueSize_mobile']}px; }";
        }

        // ============================================
        // INLINE TAB - Section 5: Stepper Buttons
        // Source: search-form.php:2497, 2508, 2533, 2544
        // Selectors: .ts-icon-btn.inline-btn-ts
        // ============================================

        if ( isset( $attributes['stepperButtonsSize'] ) && $attributes['stepperButtonsSize'] !== '' ) {
            $unit = $attributes['stepperButtonsSizeUnit'] ?? 'px';
            $css_rules[] = "{$selector} .ts-icon-btn.inline-btn-ts { width: {$attributes['stepperButtonsSize']}{$unit}; height: {$attributes['stepperButtonsSize']}{$unit}; }";
        }
        if ( isset( $attributes['stepperButtonsSize_tablet'] ) && $attributes['stepperButtonsSize_tablet'] !== '' ) {
            $unit = $attributes['stepperButtonsSizeUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .ts-icon-btn.inline-btn-ts { width: {$attributes['stepperButtonsSize_tablet']}{$unit}; height: {$attributes['stepperButtonsSize_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['stepperButtonsSize_mobile'] ) && $attributes['stepperButtonsSize_mobile'] !== '' ) {
            $unit = $attributes['stepperButtonsSizeUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .ts-icon-btn.inline-btn-ts { width: {$attributes['stepperButtonsSize_mobile']}{$unit}; height: {$attributes['stepperButtonsSize_mobile']}{$unit}; }";
        }
        if ( ! empty( $attributes['stepperButtonsIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-icon-btn.inline-btn-ts { --ts-icon-color: {$attributes['stepperButtonsIconColor']}; }";
        }
        if ( isset( $attributes['stepperButtonsIconSize'] ) && $attributes['stepperButtonsIconSize'] !== '' ) {
            $unit = $attributes['stepperButtonsIconSizeUnit'] ?? 'px';
            $css_rules[] = "{$selector} .ts-icon-btn.inline-btn-ts { --ts-icon-size: {$attributes['stepperButtonsIconSize']}{$unit}; }";
        }
        if ( isset( $attributes['stepperButtonsIconSize_tablet'] ) && $attributes['stepperButtonsIconSize_tablet'] !== '' ) {
            $unit = $attributes['stepperButtonsIconSizeUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .ts-icon-btn.inline-btn-ts { --ts-icon-size: {$attributes['stepperButtonsIconSize_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['stepperButtonsIconSize_mobile'] ) && $attributes['stepperButtonsIconSize_mobile'] !== '' ) {
            $unit = $attributes['stepperButtonsIconSizeUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .ts-icon-btn.inline-btn-ts { --ts-icon-size: {$attributes['stepperButtonsIconSize_mobile']}{$unit}; }";
        }
        if ( ! empty( $attributes['stepperButtonsBackground'] ) ) {
            $css_rules[] = "{$selector} .ts-icon-btn.inline-btn-ts { background-color: {$attributes['stepperButtonsBackground']}; }";
        }
        // Border type
        if ( ! empty( $attributes['stepperButtonsBorderType'] ) && $attributes['stepperButtonsBorderType'] !== 'none' ) {
            $css_rules[] = "{$selector} .ts-icon-btn.inline-btn-ts { border-style: {$attributes['stepperButtonsBorderType']}; }";
        }
        if ( isset( $attributes['stepperButtonsBorderType'] ) && $attributes['stepperButtonsBorderType'] === 'none' ) {
            $css_rules[] = "{$selector} .ts-icon-btn.inline-btn-ts { border: none; }";
        }
        // Border radius
        if ( isset( $attributes['stepperButtonsBorderRadius'] ) && $attributes['stepperButtonsBorderRadius'] !== '' ) {
            $unit = $attributes['stepperButtonsBorderRadiusUnit'] ?? 'px';
            $css_rules[] = "{$selector} .ts-icon-btn.inline-btn-ts { border-radius: {$attributes['stepperButtonsBorderRadius']}{$unit}; }";
        }
        if ( isset( $attributes['stepperButtonsBorderRadius_tablet'] ) && $attributes['stepperButtonsBorderRadius_tablet'] !== '' ) {
            $unit = $attributes['stepperButtonsBorderRadiusUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .ts-icon-btn.inline-btn-ts { border-radius: {$attributes['stepperButtonsBorderRadius_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['stepperButtonsBorderRadius_mobile'] ) && $attributes['stepperButtonsBorderRadius_mobile'] !== '' ) {
            $unit = $attributes['stepperButtonsBorderRadiusUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .ts-icon-btn.inline-btn-ts { border-radius: {$attributes['stepperButtonsBorderRadius_mobile']}{$unit}; }";
        }

        // Hover state
        if ( ! empty( $attributes['stepperButtonsIconColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-icon-btn.inline-btn-ts:hover { --ts-icon-color: {$attributes['stepperButtonsIconColorHover']}; }";
        }
        if ( ! empty( $attributes['stepperButtonsBackgroundHover'] ) ) {
            $css_rules[] = "{$selector} .ts-icon-btn.inline-btn-ts:hover { background-color: {$attributes['stepperButtonsBackgroundHover']}; }";
        }
        if ( ! empty( $attributes['stepperButtonsBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-icon-btn.inline-btn-ts:hover { border-color: {$attributes['stepperButtonsBorderColorHover']}; }";
        }

        // ============================================
        // INLINE TAB - Section 6: Range Slider
        // Source: search-form.php:2678, 2702, 2715, 2728
        // Selectors: .ts-inline-filter .noUi-*
        // ============================================

        if ( isset( $attributes['rangeValueSize'] ) && $attributes['rangeValueSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-inline-filter .range-slider-wrapper .range-value { font-size: {$attributes['rangeValueSize']}px; }";
        }
        if ( isset( $attributes['rangeValueSize_tablet'] ) && $attributes['rangeValueSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-inline-filter .range-slider-wrapper .range-value { font-size: {$attributes['rangeValueSize_tablet']}px; }";
        }
        if ( isset( $attributes['rangeValueSize_mobile'] ) && $attributes['rangeValueSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-inline-filter .range-slider-wrapper .range-value { font-size: {$attributes['rangeValueSize_mobile']}px; }";
        }
        if ( ! empty( $attributes['rangeValueColor'] ) ) {
            $css_rules[] = "{$selector} .ts-inline-filter .range-slider-wrapper .range-value { color: {$attributes['rangeValueColor']}; }";
        }
        // Track background
        if ( ! empty( $attributes['rangeBackground'] ) ) {
            $css_rules[] = "{$selector} .ts-inline-filter .noUi-target { background-color: {$attributes['rangeBackground']}; }";
        }
        // Selected portion background
        if ( ! empty( $attributes['rangeSelectedBackground'] ) ) {
            $css_rules[] = "{$selector} .ts-inline-filter .noUi-connect { background-color: {$attributes['rangeSelectedBackground']}; }";
        }
        // Handle background
        if ( ! empty( $attributes['rangeHandleBackground'] ) ) {
            $css_rules[] = "{$selector} .ts-inline-filter .noUi-handle { background-color: {$attributes['rangeHandleBackground']}; }";
        }
        // Border type
        if ( ! empty( $attributes['rangeBorderType'] ) && $attributes['rangeBorderType'] !== 'none' ) {
            $css_rules[] = "{$selector} .ts-inline-filter .noUi-handle { border-style: {$attributes['rangeBorderType']}; }";
        }
        if ( isset( $attributes['rangeBorderType'] ) && $attributes['rangeBorderType'] === 'none' ) {
            $css_rules[] = "{$selector} .ts-inline-filter .noUi-handle { border: none; }";
        }

        // ============================================
        // INLINE TAB - Section 7: Switcher on/off
        // Source: search-form.php:2767, 2780, 2793
        // Selectors: .ts-inline-filter .onoffswitch
        // ============================================

        // Inactive background
        if ( ! empty( $attributes['switcherBackgroundInactive'] ) ) {
            $css_rules[] = "{$selector} .ts-inline-filter .onoffswitch .onoffswitch-label { background-color: {$attributes['switcherBackgroundInactive']}; }";
        }
        // Active background
        if ( ! empty( $attributes['switcherBackgroundActive'] ) ) {
            $css_rules[] = "{$selector} .ts-inline-filter .onoffswitch .onoffswitch-checkbox:checked + .onoffswitch-label { background-color: {$attributes['switcherBackgroundActive']}; }";
        }
        // Handle background
        if ( ! empty( $attributes['switcherHandleBackground'] ) ) {
            $css_rules[] = "{$selector} .ts-inline-filter .onoffswitch .onoffswitch-label:before { background-color: {$attributes['switcherHandleBackground']}; }";
        }

        // ============================================
        // INLINE TAB - Section 8: Checkbox
        // Source: search-form.php:2826
        // Selectors: .ts-inline-filter .container-checkbox .checkmark
        // ============================================

        if ( isset( $attributes['checkboxSize'] ) && $attributes['checkboxSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-inline-filter .container-checkbox .checkmark { width: {$attributes['checkboxSize']}px; height: {$attributes['checkboxSize']}px; min-width: {$attributes['checkboxSize']}px; }";
        }
        if ( isset( $attributes['checkboxSize_tablet'] ) && $attributes['checkboxSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-inline-filter .container-checkbox .checkmark { width: {$attributes['checkboxSize_tablet']}px; height: {$attributes['checkboxSize_tablet']}px; min-width: {$attributes['checkboxSize_tablet']}px; }";
        }
        if ( isset( $attributes['checkboxSize_mobile'] ) && $attributes['checkboxSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-inline-filter .container-checkbox .checkmark { width: {$attributes['checkboxSize_mobile']}px; height: {$attributes['checkboxSize_mobile']}px; min-width: {$attributes['checkboxSize_mobile']}px; }";
        }
        // Border radius
        if ( isset( $attributes['checkboxRadius'] ) && $attributes['checkboxRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-inline-filter .container-checkbox .checkmark { border-radius: {$attributes['checkboxRadius']}px; }";
        }
        if ( isset( $attributes['checkboxRadius_tablet'] ) && $attributes['checkboxRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-inline-filter .container-checkbox .checkmark { border-radius: {$attributes['checkboxRadius_tablet']}px; }";
        }
        if ( isset( $attributes['checkboxRadius_mobile'] ) && $attributes['checkboxRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-inline-filter .container-checkbox .checkmark { border-radius: {$attributes['checkboxRadius_mobile']}px; }";
        }
        // Border type
        if ( ! empty( $attributes['checkboxBorderType'] ) && $attributes['checkboxBorderType'] !== 'none' ) {
            $css_rules[] = "{$selector} .ts-inline-filter .container-checkbox .checkmark { border-style: {$attributes['checkboxBorderType']}; }";
        }
        if ( isset( $attributes['checkboxBorderType'] ) && $attributes['checkboxBorderType'] === 'none' ) {
            $css_rules[] = "{$selector} .ts-inline-filter .container-checkbox .checkmark { border: none; }";
        }
        // Unchecked background
        if ( ! empty( $attributes['checkboxBackgroundUnchecked'] ) ) {
            $css_rules[] = "{$selector} .ts-inline-filter .container-checkbox .checkmark { background-color: {$attributes['checkboxBackgroundUnchecked']}; }";
        }
        // Checked background
        if ( ! empty( $attributes['checkboxBackgroundChecked'] ) ) {
            $css_rules[] = "{$selector} .ts-inline-filter .container-checkbox input:checked ~ .checkmark { background-color: {$attributes['checkboxBackgroundChecked']}; }";
        }
        // Checked border color
        if ( ! empty( $attributes['checkboxBorderColorChecked'] ) ) {
            $css_rules[] = "{$selector} .ts-inline-filter .container-checkbox input:checked ~ .checkmark { border-color: {$attributes['checkboxBorderColorChecked']}; }";
        }

        // ============================================
        // INLINE TAB - Section 9: Radio
        // Source: search-form.php:2923
        // Selectors: .ts-inline-filter .container-radio .checkmark
        // ============================================

        if ( isset( $attributes['radioSize'] ) && $attributes['radioSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-inline-filter .container-radio .checkmark { width: {$attributes['radioSize']}px; height: {$attributes['radioSize']}px; min-width: {$attributes['radioSize']}px; }";
        }
        if ( isset( $attributes['radioSize_tablet'] ) && $attributes['radioSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-inline-filter .container-radio .checkmark { width: {$attributes['radioSize_tablet']}px; height: {$attributes['radioSize_tablet']}px; min-width: {$attributes['radioSize_tablet']}px; }";
        }
        if ( isset( $attributes['radioSize_mobile'] ) && $attributes['radioSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-inline-filter .container-radio .checkmark { width: {$attributes['radioSize_mobile']}px; height: {$attributes['radioSize_mobile']}px; min-width: {$attributes['radioSize_mobile']}px; }";
        }
        // Border radius
        if ( isset( $attributes['radioRadius'] ) && $attributes['radioRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-inline-filter .container-radio .checkmark { border-radius: {$attributes['radioRadius']}px; }";
        }
        if ( isset( $attributes['radioRadius_tablet'] ) && $attributes['radioRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-inline-filter .container-radio .checkmark { border-radius: {$attributes['radioRadius_tablet']}px; }";
        }
        if ( isset( $attributes['radioRadius_mobile'] ) && $attributes['radioRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-inline-filter .container-radio .checkmark { border-radius: {$attributes['radioRadius_mobile']}px; }";
        }
        // Border type
        if ( ! empty( $attributes['radioBorderType'] ) && $attributes['radioBorderType'] !== 'none' ) {
            $css_rules[] = "{$selector} .ts-inline-filter .container-radio .checkmark { border-style: {$attributes['radioBorderType']}; }";
        }
        if ( isset( $attributes['radioBorderType'] ) && $attributes['radioBorderType'] === 'none' ) {
            $css_rules[] = "{$selector} .ts-inline-filter .container-radio .checkmark { border: none; }";
        }
        // Unchecked background
        if ( ! empty( $attributes['radioBackgroundUnchecked'] ) ) {
            $css_rules[] = "{$selector} .ts-inline-filter .container-radio .checkmark { background-color: {$attributes['radioBackgroundUnchecked']}; }";
        }
        // Checked background
        if ( ! empty( $attributes['radioBackgroundChecked'] ) ) {
            $css_rules[] = "{$selector} .ts-inline-filter .container-radio input:checked ~ .checkmark { background-color: {$attributes['radioBackgroundChecked']}; }";
        }
        // Checked border color
        if ( ! empty( $attributes['radioBorderColorChecked'] ) ) {
            $css_rules[] = "{$selector} .ts-inline-filter .container-radio input:checked ~ .checkmark { border-color: {$attributes['radioBorderColorChecked']}; }";
        }

        // ============================================
        // INLINE TAB - Section 10: Input
        // Source: search-form.php:1470-1598
        // Selectors: .ts-form-group input, .ts-form-group textarea
        // ============================================

        if ( ! empty( $attributes['inputTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-form-group input, {$selector} .ts-form-group textarea { color: {$attributes['inputTextColor']}; }";
        }
        if ( ! empty( $attributes['inputPlaceholderColor'] ) ) {
            $css_rules[] = "{$selector} .ts-form-group input::placeholder, {$selector} .ts-form-group textarea::placeholder { color: {$attributes['inputPlaceholderColor']}; opacity: 1; }";
        }
        if ( ! empty( $attributes['inputPadding'] ) ) {
            $padding = self::generate_dimensions_css( $attributes['inputPadding'], 'padding' );
            if ( $padding ) {
                $css_rules[] = "{$selector} .ts-form-group input, {$selector} .ts-form-group textarea { {$padding}; }";
            }
        }
        if ( ! empty( $attributes['inputPadding_tablet'] ) ) {
            $padding = self::generate_dimensions_css( $attributes['inputPadding_tablet'], 'padding' );
            if ( $padding ) {
                $tablet_rules[] = "{$selector} .ts-form-group input, {$selector} .ts-form-group textarea { {$padding}; }";
            }
        }
        if ( ! empty( $attributes['inputPadding_mobile'] ) ) {
            $padding = self::generate_dimensions_css( $attributes['inputPadding_mobile'], 'padding' );
            if ( $padding ) {
                $mobile_rules[] = "{$selector} .ts-form-group input, {$selector} .ts-form-group textarea { {$padding}; }";
            }
        }
        // Icon side margin
        if ( isset( $attributes['inputIconSideMargin'] ) && $attributes['inputIconSideMargin'] !== '' ) {
            $css_rules[] = "{$selector} .ts-form-group .ts-input-icon > span { margin-right: {$attributes['inputIconSideMargin']}px; }";
        }
        if ( isset( $attributes['inputIconSideMargin_tablet'] ) && $attributes['inputIconSideMargin_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-form-group .ts-input-icon > span { margin-right: {$attributes['inputIconSideMargin_tablet']}px; }";
        }
        if ( isset( $attributes['inputIconSideMargin_mobile'] ) && $attributes['inputIconSideMargin_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-form-group .ts-input-icon > span { margin-right: {$attributes['inputIconSideMargin_mobile']}px; }";
        }
        // Focus state
        if ( ! empty( $attributes['inputBackgroundColorFocus'] ) ) {
            $css_rules[] = "{$selector} .ts-form-group input:focus, {$selector} .ts-form-group textarea:focus { background-color: {$attributes['inputBackgroundColorFocus']} !important; }";
        }
        if ( ! empty( $attributes['inputBorderColorFocus'] ) ) {
            $css_rules[] = "{$selector} .ts-form-group input:focus, {$selector} .ts-form-group textarea:focus { border-color: {$attributes['inputBorderColorFocus']} !important; }";
        }
        if ( ! empty( $attributes['inputBoxShadowFocus'] ) ) {
            $shadow = self::generate_box_shadow_css( $attributes['inputBoxShadowFocus'] );
            if ( $shadow ) {
                $css_rules[] = "{$selector} .ts-form-group input:focus, {$selector} .ts-form-group textarea:focus { box-shadow: {$shadow} !important; }";
            }
        }

        // ============================================
        // INLINE TAB - Section 11: Toggle Button / Switcher
        // Source: search-form.php:2996-3284
        // Selectors: .ts-form-group .ts-switcher li, .ts-filter-toggle
        // ============================================

        // Default styles
        $css_rules[] = "{$selector} a.ts-filter-toggle.ts-btn { text-decoration: none; }";
        $css_rules[] = "{$selector} .ts-form-group .ts-switcher li { text-decoration: none; }";

        $toggle_selector = "{$selector} .ts-form-group .ts-switcher li, {$selector} .ts-filter-toggle";

        if ( ! empty( $attributes['toggleBtnTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['toggleBtnTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$toggle_selector} { {$typo}; }";
            }
        }
        if ( isset( $attributes['toggleBtnSize'] ) && $attributes['toggleBtnSize'] !== '' ) {
            $css_rules[] = "{$toggle_selector} { height: {$attributes['toggleBtnSize']}px; display: flex; align-items: center; justify-content: center; }";
        }
        if ( isset( $attributes['toggleBtnSize_tablet'] ) && $attributes['toggleBtnSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$toggle_selector} { height: {$attributes['toggleBtnSize_tablet']}px; }";
        }
        if ( isset( $attributes['toggleBtnSize_mobile'] ) && $attributes['toggleBtnSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$toggle_selector} { height: {$attributes['toggleBtnSize_mobile']}px; }";
        }
        if ( ! empty( $attributes['toggleBtnPadding'] ) ) {
            $padding = self::generate_dimensions_css( $attributes['toggleBtnPadding'], 'padding' );
            if ( $padding ) {
                $css_rules[] = "{$toggle_selector} { {$padding}; }";
            }
        }
        if ( ! empty( $attributes['toggleBtnPadding_tablet'] ) ) {
            $padding = self::generate_dimensions_css( $attributes['toggleBtnPadding_tablet'], 'padding' );
            if ( $padding ) {
                $tablet_rules[] = "{$toggle_selector} { {$padding}; }";
            }
        }
        if ( ! empty( $attributes['toggleBtnPadding_mobile'] ) ) {
            $padding = self::generate_dimensions_css( $attributes['toggleBtnPadding_mobile'], 'padding' );
            if ( $padding ) {
                $mobile_rules[] = "{$toggle_selector} { {$padding}; }";
            }
        }
        // Border radius
        if ( isset( $attributes['toggleBtnBorderRadius'] ) && $attributes['toggleBtnBorderRadius'] !== '' ) {
            $unit = $attributes['toggleBtnBorderRadiusUnit'] ?? 'px';
            $css_rules[] = "{$toggle_selector} { border-radius: {$attributes['toggleBtnBorderRadius']}{$unit}; }";
        }
        if ( isset( $attributes['toggleBtnBorderRadius_tablet'] ) && $attributes['toggleBtnBorderRadius_tablet'] !== '' ) {
            $unit = $attributes['toggleBtnBorderRadiusUnit'] ?? 'px';
            $tablet_rules[] = "{$toggle_selector} { border-radius: {$attributes['toggleBtnBorderRadius_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['toggleBtnBorderRadius_mobile'] ) && $attributes['toggleBtnBorderRadius_mobile'] !== '' ) {
            $unit = $attributes['toggleBtnBorderRadiusUnit'] ?? 'px';
            $mobile_rules[] = "{$toggle_selector} { border-radius: {$attributes['toggleBtnBorderRadius_mobile']}{$unit}; }";
        }
        if ( ! empty( $attributes['toggleBtnTextColor'] ) ) {
            $css_rules[] = "{$toggle_selector} { color: {$attributes['toggleBtnTextColor']}; }";
        }
        // Icon color
        if ( ! empty( $attributes['toggleBtnIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-form-group .ts-switcher li i, {$selector} .ts-form-group .ts-switcher li svg, {$selector} .ts-filter-toggle svg { color: {$attributes['toggleBtnIconColor']}; fill: {$attributes['toggleBtnIconColor']}; }";
        }
        // Icon size
        if ( isset( $attributes['toggleBtnIconSize'] ) && $attributes['toggleBtnIconSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-form-group .ts-switcher li i, {$selector} .ts-form-group .ts-switcher li svg, {$selector} .ts-filter-toggle svg { width: {$attributes['toggleBtnIconSize']}px; height: {$attributes['toggleBtnIconSize']}px; font-size: {$attributes['toggleBtnIconSize']}px; }";
        }
        if ( isset( $attributes['toggleBtnIconSize_tablet'] ) && $attributes['toggleBtnIconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-form-group .ts-switcher li i, {$selector} .ts-form-group .ts-switcher li svg, {$selector} .ts-filter-toggle svg { width: {$attributes['toggleBtnIconSize_tablet']}px; height: {$attributes['toggleBtnIconSize_tablet']}px; font-size: {$attributes['toggleBtnIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['toggleBtnIconSize_mobile'] ) && $attributes['toggleBtnIconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-form-group .ts-switcher li i, {$selector} .ts-form-group .ts-switcher li svg, {$selector} .ts-filter-toggle svg { width: {$attributes['toggleBtnIconSize_mobile']}px; height: {$attributes['toggleBtnIconSize_mobile']}px; font-size: {$attributes['toggleBtnIconSize_mobile']}px; }";
        }
        // Icon spacing
        if ( isset( $attributes['toggleBtnIconSpacing'] ) && $attributes['toggleBtnIconSpacing'] !== '' ) {
            $css_rules[] = "{$toggle_selector} { grid-gap: {$attributes['toggleBtnIconSpacing']}px; gap: {$attributes['toggleBtnIconSpacing']}px; }";
        }
        if ( isset( $attributes['toggleBtnIconSpacing_tablet'] ) && $attributes['toggleBtnIconSpacing_tablet'] !== '' ) {
            $tablet_rules[] = "{$toggle_selector} { grid-gap: {$attributes['toggleBtnIconSpacing_tablet']}px; gap: {$attributes['toggleBtnIconSpacing_tablet']}px; }";
        }
        if ( isset( $attributes['toggleBtnIconSpacing_mobile'] ) && $attributes['toggleBtnIconSpacing_mobile'] !== '' ) {
            $mobile_rules[] = "{$toggle_selector} { grid-gap: {$attributes['toggleBtnIconSpacing_mobile']}px; gap: {$attributes['toggleBtnIconSpacing_mobile']}px; }";
        }
        if ( ! empty( $attributes['toggleBtnBackgroundColor'] ) ) {
            $css_rules[] = "{$toggle_selector} { background-color: {$attributes['toggleBtnBackgroundColor']}; }";
        }
        if ( ! empty( $attributes['toggleBtnBorder'] ) ) {
            $border = self::generate_border_css( $attributes['toggleBtnBorder'] );
            if ( $border ) {
                $css_rules[] = "{$toggle_selector} { border: {$border}; }";
            }
        }
        if ( ! empty( $attributes['toggleBtnSeparatorColor'] ) ) {
            $css_rules[] = "{$selector} .ts-form-group .ts-switcher li:not(:last-child) { border-right-color: {$attributes['toggleBtnSeparatorColor']}; }";
        }
        if ( ! empty( $attributes['toggleBtnBoxShadow'] ) ) {
            $shadow = self::generate_box_shadow_css( $attributes['toggleBtnBoxShadow'] );
            if ( $shadow ) {
                $css_rules[] = "{$toggle_selector} { box-shadow: {$shadow}; }";
            }
        }

        // Hover state
        if ( ! empty( $attributes['toggleBtnTextColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-form-group .ts-switcher li:hover, {$selector} .ts-filter-toggle:hover { color: {$attributes['toggleBtnTextColorHover']}; }";
        }
        if ( ! empty( $attributes['toggleBtnIconColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-form-group .ts-switcher li:hover i, {$selector} .ts-form-group .ts-switcher li:hover svg, {$selector} .ts-filter-toggle:hover svg { color: {$attributes['toggleBtnIconColorHover']}; fill: {$attributes['toggleBtnIconColorHover']}; }";
        }
        if ( ! empty( $attributes['toggleBtnBackgroundColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-form-group .ts-switcher li:hover, {$selector} .ts-filter-toggle:hover { background-color: {$attributes['toggleBtnBackgroundColorHover']}; }";
        }
        if ( ! empty( $attributes['toggleBtnBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-form-group .ts-switcher li:hover, {$selector} .ts-filter-toggle:hover { border-color: {$attributes['toggleBtnBorderColorHover']}; }";
        }
        if ( ! empty( $attributes['toggleBtnBoxShadowHover'] ) ) {
            $shadow = self::generate_box_shadow_css( $attributes['toggleBtnBoxShadowHover'] );
            if ( $shadow ) {
                $css_rules[] = "{$selector} .ts-form-group .ts-switcher li:hover, {$selector} .ts-filter-toggle:hover { box-shadow: {$shadow}; }";
            }
        }

        // Filled (Active) state
        $active_selector = "{$selector} .ts-form-group .ts-switcher li.ts-active, {$selector} .ts-filter-toggle[aria-expanded=\"true\"]";
        if ( ! empty( $attributes['toggleBtnTextColorFilled'] ) ) {
            $css_rules[] = "{$active_selector} { color: {$attributes['toggleBtnTextColorFilled']}; }";
        }
        if ( ! empty( $attributes['toggleBtnIconColorFilled'] ) ) {
            $css_rules[] = "{$active_selector} i, {$active_selector} svg { color: {$attributes['toggleBtnIconColorFilled']}; fill: {$attributes['toggleBtnIconColorFilled']}; }";
        }
        $bg_filled = $attributes['toggleBtnBackgroundColorFilled'] ?? ( $attributes['toggleBtnBackgroundFilled'] ?? null );
        if ( ! empty( $bg_filled ) ) {
            $css_rules[] = "{$active_selector} { background-color: {$bg_filled}; }";
        }
        if ( ! empty( $attributes['toggleBtnBorderColorFilled'] ) ) {
            $css_rules[] = "{$active_selector} { border-color: {$attributes['toggleBtnBorderColorFilled']}; }";
        }
        if ( ! empty( $attributes['toggleBtnBoxShadowFilled'] ) ) {
            $shadow = self::generate_box_shadow_css( $attributes['toggleBtnBoxShadowFilled'] );
            if ( $shadow ) {
                $css_rules[] = "{$active_selector} { box-shadow: {$shadow}; }";
            }
        }

        // ============================================
        // INLINE TAB - Section 12: Toggle: Active Count
        // Source: search-form.php:3367-3422
        // Selectors: .ts-filter-count
        // ============================================

        if ( ! empty( $attributes['activeCountTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-filter-count { color: {$attributes['activeCountTextColor']}; }";
        }
        if ( ! empty( $attributes['activeCountBackgroundColor'] ) ) {
            $css_rules[] = "{$selector} .ts-filter-count { background: {$attributes['activeCountBackgroundColor']}; }";
        }
        if ( isset( $attributes['activeCountRightMargin'] ) && $attributes['activeCountRightMargin'] !== '' ) {
            $css_rules[] = "{$selector} .ts-filter-count { right: {$attributes['activeCountRightMargin']}px; }";
        }
        if ( isset( $attributes['activeCountRightMargin_tablet'] ) && $attributes['activeCountRightMargin_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-filter-count { right: {$attributes['activeCountRightMargin_tablet']}px; }";
        }
        if ( isset( $attributes['activeCountRightMargin_mobile'] ) && $attributes['activeCountRightMargin_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-filter-count { right: {$attributes['activeCountRightMargin_mobile']}px; }";
        }

        // ============================================
        // INLINE TAB - Section 13: Term Count
        // Source: search-form.php:3778-3810
        // Selectors: .ts-term-count
        // ============================================

        if ( ! empty( $attributes['termCountNumberColor'] ) ) {
            $css_rules[] = "{$selector} .ts-term-count { color: {$attributes['termCountNumberColor']}; }";
        }
        if ( ! empty( $attributes['termCountBorderColor'] ) ) {
            $css_rules[] = "{$selector} .ts-term-count { border-color: {$attributes['termCountBorderColor']}; }";
        }

        // ============================================
        // INLINE TAB - Section 14: Other (Max Filter Width, Min Input Width)
        // Source: search-form.php:3818-3878
        // ============================================

        // Max filter width
        if ( isset( $attributes['maxFilterWidth'] ) && $attributes['maxFilterWidth'] !== '' ) {
            $unit = $attributes['maxFilterWidthUnit'] ?? 'px';
            $css_rules[] = "{$selector} .ts-filter { max-width: {$attributes['maxFilterWidth']}{$unit}; }";
        }
        if ( isset( $attributes['maxFilterWidth_tablet'] ) && $attributes['maxFilterWidth_tablet'] !== '' ) {
            $unit = $attributes['maxFilterWidthUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .ts-filter { max-width: {$attributes['maxFilterWidth_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['maxFilterWidth_mobile'] ) && $attributes['maxFilterWidth_mobile'] !== '' ) {
            $unit = $attributes['maxFilterWidthUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .ts-filter { max-width: {$attributes['maxFilterWidth_mobile']}{$unit}; }";
        }

        // Min input width
        if ( isset( $attributes['minInputWidth'] ) && $attributes['minInputWidth'] !== '' ) {
            $unit = $attributes['minInputWidthUnit'] ?? 'px';
            $css_rules[] = "{$selector} .ts-inline-filter { min-width: {$attributes['minInputWidth']}{$unit}; }";
        }
        if ( isset( $attributes['minInputWidth_tablet'] ) && $attributes['minInputWidth_tablet'] !== '' ) {
            $unit = $attributes['minInputWidthUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .ts-inline-filter { min-width: {$attributes['minInputWidth_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['minInputWidth_mobile'] ) && $attributes['minInputWidth_mobile'] !== '' ) {
            $unit = $attributes['minInputWidthUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .ts-inline-filter { min-width: {$attributes['minInputWidth_mobile']}{$unit}; }";
        }

        // ============================================
        // PORTAL/POPUP CSS - Section 1: Popups: Custom Style
        // Source: search-form.php:3880-3960
        // Target: Portal elements (scoped via voxel-popup-{blockId} class)
        // CRITICAL: Popups render at document.body via React Portal, so use
        // popupSelector (.voxel-popup-{blockId}) not block selector
        // ============================================

        // $popup_selector already defined at top of method
        $portal_selector = '.voxel-fse-search-form-' . $block_id . '.ts-search-portal';
        $combined_popup_selector = ":is({$portal_selector}, {$popup_selector})";

        if ( ! empty( $attributes['popupCustomStyleEnabled'] ) ) {
            // Backdrop background
            // Selector: .ts-popup-root > div::after (NOT .ts-popup-root::after)
            if ( ! empty( $attributes['popupBackdropBackground'] ) ) {
                $css_rules[] = "{$combined_popup_selector} .ts-popup-root > div::after { background-color: {$attributes['popupBackdropBackground']} !important; }";
            }

            // Backdrop pointer events
            if ( ! empty( $attributes['popupBackdropPointerEvents'] ) ) {
                $css_rules[] = "{$combined_popup_selector} .ts-popup-root > div::after { pointer-events: all; }";
            }

            // Box shadow
            if ( ! empty( $attributes['popupBoxShadow'] ) ) {
                $shadow = self::generate_box_shadow_css( $attributes['popupBoxShadow'] );
                if ( $shadow ) {
                    $css_rules[] = "{$combined_popup_selector} .ts-field-popup { box-shadow: {$shadow}; }";
                }
            }

            // Top / Bottom margin
            if ( isset( $attributes['popupTopBottomMargin'] ) && $attributes['popupTopBottomMargin'] !== '' ) {
                $css_rules[] = "{$combined_popup_selector} .ts-field-popup-container { margin: {$attributes['popupTopBottomMargin']}px 0; }";
            }
            if ( isset( $attributes['popupTopBottomMargin_tablet'] ) && $attributes['popupTopBottomMargin_tablet'] !== '' ) {
                $tablet_rules[] = "{$combined_popup_selector} .ts-field-popup-container { margin: {$attributes['popupTopBottomMargin_tablet']}px 0; }";
            }
            if ( isset( $attributes['popupTopBottomMargin_mobile'] ) && $attributes['popupTopBottomMargin_mobile'] !== '' ) {
                $mobile_rules[] = "{$combined_popup_selector} .ts-field-popup-container { margin: {$attributes['popupTopBottomMargin_mobile']}px 0; }";
            }

            // Max height
            if ( isset( $attributes['popupMaxHeight'] ) && $attributes['popupMaxHeight'] !== '' ) {
                $css_rules[] = "{$combined_popup_selector} .ts-popup-content-wrapper { max-height: {$attributes['popupMaxHeight']}px; }";
            }
            if ( isset( $attributes['popupMaxHeight_tablet'] ) && $attributes['popupMaxHeight_tablet'] !== '' ) {
                $tablet_rules[] = "{$combined_popup_selector} .ts-popup-content-wrapper { max-height: {$attributes['popupMaxHeight_tablet']}px; }";
            }
            if ( isset( $attributes['popupMaxHeight_mobile'] ) && $attributes['popupMaxHeight_mobile'] !== '' ) {
                $mobile_rules[] = "{$combined_popup_selector} .ts-popup-content-wrapper { max-height: {$attributes['popupMaxHeight_mobile']}px; }";
            }

            // Autosuggest top margin
            if ( isset( $attributes['popupAutosuggestTopMargin'] ) && $attributes['popupAutosuggestTopMargin'] !== '' ) {
                $css_rules[] = "{$combined_popup_selector} .ts-autocomplete-dropdown .suggestions-list { margin-top: {$attributes['popupAutosuggestTopMargin']}px !important; }";
                $css_rules[] = "{$selector} .ts-autocomplete-dropdown .suggestions-list { margin-top: {$attributes['popupAutosuggestTopMargin']}px !important; }";
            }
            if ( isset( $attributes['popupAutosuggestTopMargin_tablet'] ) && $attributes['popupAutosuggestTopMargin_tablet'] !== '' ) {
                $tablet_rules[] = "{$combined_popup_selector} .ts-autocomplete-dropdown .suggestions-list { margin-top: {$attributes['popupAutosuggestTopMargin_tablet']}px !important; }";
                $tablet_rules[] = "{$selector} .ts-autocomplete-dropdown .suggestions-list { margin-top: {$attributes['popupAutosuggestTopMargin_tablet']}px !important; }";
            }
            if ( isset( $attributes['popupAutosuggestTopMargin_mobile'] ) && $attributes['popupAutosuggestTopMargin_mobile'] !== '' ) {
                $mobile_rules[] = "{$combined_popup_selector} .ts-autocomplete-dropdown .suggestions-list { margin-top: {$attributes['popupAutosuggestTopMargin_mobile']}px !important; }";
                $mobile_rules[] = "{$selector} .ts-autocomplete-dropdown .suggestions-list { margin-top: {$attributes['popupAutosuggestTopMargin_mobile']}px !important; }";
            }
        }

        // ============================================
        // PORTAL/POPUP CSS - Section 2: Filter-Level Popup: Center Position
        // Source: search-form.php:421-434
        // ============================================

        $css_rules[] = ".ts-popup-centered .ts-popup-root { position: fixed !important; }";
        $css_rules[] = ".ts-popup-centered .ts-form { position: static !important; max-width: initial; width: auto !important; }";

        // ============================================
        // PORTAL/POPUP CSS - Section 3: Filter-Level Popup: Multi-Column Menu & Custom Popup CSS
        // Source: search-form.php:334-434 (custom popup) & 387-419 (columns)
        // ============================================

        if ( ! empty( $attributes['filterLists'] ) && is_array( $attributes['filterLists'] ) ) {
            foreach ( $attributes['filterLists'] as $post_type_key => $filters ) {
                if ( ! is_array( $filters ) ) {
                    continue;
                }
                foreach ( $filters as $filter ) {
                    // Safety check for ID
                    if ( empty( $filter['id'] ) ) {
                        continue;
                    }

                    // Scoped selector for this filter's popup
                    $filter_popup_scope = "{$popup_selector}.elementor-repeater-item-{$filter['id']}";

                    // Custom Popup Styles
                    if ( ! empty( $filter['customPopupEnabled'] ) ) {
                        // Min Width
                        if ( isset( $filter['popupMinWidth'] ) && $filter['popupMinWidth'] !== '' ) {
                            $css_rules[] = "{$filter_popup_scope} .ts-field-popup { min-width: {$filter['popupMinWidth']}px; }";
                        }
                        // Max Width
                        if ( isset( $filter['popupMaxWidth'] ) && $filter['popupMaxWidth'] !== '' ) {
                            $css_rules[] = "{$filter_popup_scope} .ts-field-popup { max-width: {$filter['popupMaxWidth']}px; }";
                        }
                        // Max Height
                        if ( isset( $filter['popupMaxHeight'] ) && $filter['popupMaxHeight'] !== '' ) {
                            $css_rules[] = "{$filter_popup_scope} .ts-popup-content-wrapper { max-height: {$filter['popupMaxHeight']}px; }";
                        }
                        // Center Position
                        if ( ! empty( $filter['popupCenterPosition'] ) ) {
                            $css_rules[] = "{$filter_popup_scope} .ts-field-popup-container { align-items: center; justify-content: center; display: flex; }";
                            $css_rules[] = "{$filter_popup_scope} .ts-field-popup { margin: 0 !important; transform: none !important; }";
                        }
                    }

                    // Multi-Column Menu Styles
                    if ( ! empty( $filter['popupMenuColumnsEnabled'] ) ) {
                        $menu_selector = "{$filter_popup_scope} .ts-term-dropdown-list";

                        // Desktop columns
                        if ( isset( $filter['popupMenuColumns'] ) && $filter['popupMenuColumns'] > 0 ) {
                            $css_rules[] = "{$menu_selector} { display: grid; grid-template-columns: repeat({$filter['popupMenuColumns']}, 1fr); }";
                        }

                        // Desktop column gap
                        if ( isset( $filter['popupMenuColumnGap'] ) && $filter['popupMenuColumnGap'] !== '' ) {
                            $css_rules[] = "{$menu_selector} { gap: {$filter['popupMenuColumnGap']}px; }";
                        }
                    }
                }
            }
        }

        // Combine all CSS
        $final_css = '';

        if ( ! empty( $css_rules ) ) {
            $final_css .= implode( "\n", $css_rules );
        }

        if ( ! empty( $tablet_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::TABLET_BREAKPOINT . "px) {\n" . implode( "\n", $tablet_rules ) . "\n}";
        }

        if ( ! empty( $mobile_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::MOBILE_BREAKPOINT . "px) {\n" . implode( "\n", $mobile_rules ) . "\n}";
        }

        return $final_css;
    }

    /**
     * Generate CSS for Map Block
     *
     * Handles markers (cluster, icon, text, image), popups, search button, and nav buttons.
     * CRITICAL: Includes global CSS variable fallbacks for Elementor compatibility.
     *
     * @param array  $attributes Block attributes.
     * @param string $block_id   Block unique ID.
     * @return string Generated CSS.
     */
    public static function generate_map_css( $attributes, $block_id ) {
        if ( empty( $block_id ) ) {
            return '';
        }

        $selector = '.voxel-fse-map-' . $block_id;
        $css_rules = [];
        $tablet_rules = [];
        $mobile_rules = [];

        // ============================================
        // GLOBAL marker styling - targets markers in Google Maps overlay pane
        // ============================================
        // Markers render in Google Maps overlay pane (NOT inside block DOM), so we use
        // global selectors. Elementor CSS variable fallbacks (--e-global-typography-*,
        // --ts-shade-*, --ts-accent-1) are set GLOBALLY in Block_Loader.php, NOT per-block.
        $css_rules[] = '.marker-type-text { font-size: 14px !important; color: #4a4a4a !important; }';
        $css_rules[] = '.marker-wrapper { position: absolute; z-index: 10; transform: translate(-50%, -50%); }';
        $css_rules[] = '.map-marker { display: flex; align-items: center; justify-content: center; overflow: hidden; white-space: nowrap; }';

        // ============================================
        // ACCORDION: Clusters
        // ============================================

        // Cluster Size
        if ( isset( $attributes['clusterSize'] ) ) {
            $css_rules[] = "{$selector} .ts-marker-cluster { width: {$attributes['clusterSize']}px; height: {$attributes['clusterSize']}px; }";
        }
        if ( isset( $attributes['clusterSize_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-marker-cluster { width: {$attributes['clusterSize_tablet']}px; height: {$attributes['clusterSize_tablet']}px; }";
        }
        if ( isset( $attributes['clusterSize_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-marker-cluster { width: {$attributes['clusterSize_mobile']}px; height: {$attributes['clusterSize_mobile']}px; }";
        }

        // Cluster Background Color
        if ( ! empty( $attributes['clusterBgColor'] ) ) {
            $css_rules[] = "{$selector} .ts-marker-cluster { background-color: {$attributes['clusterBgColor']}; }";
        }
        if ( ! empty( $attributes['clusterBgColor_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-marker-cluster { background-color: {$attributes['clusterBgColor_tablet']}; }";
        }
        if ( ! empty( $attributes['clusterBgColor_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-marker-cluster { background-color: {$attributes['clusterBgColor_mobile']}; }";
        }

        // Cluster Box Shadow
        if ( ! empty( $attributes['clusterShadow']['enable'] ) ) {
            $shadow = self::generate_box_shadow_css( $attributes['clusterShadow'] );
            if ( $shadow ) {
                $css_rules[] = "{$selector} .ts-marker-cluster { box-shadow: {$shadow}; }";
            }
        }

        // Cluster Border Radius
        if ( isset( $attributes['clusterRadius'] ) ) {
            $css_rules[] = "{$selector} .ts-marker-cluster { border-radius: {$attributes['clusterRadius']}px; }";
        }
        if ( isset( $attributes['clusterRadius_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-marker-cluster { border-radius: {$attributes['clusterRadius_tablet']}px; }";
        }
        if ( isset( $attributes['clusterRadius_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-marker-cluster { border-radius: {$attributes['clusterRadius_mobile']}px; }";
        }

        // Cluster Typography
        if ( ! empty( $attributes['clusterTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['clusterTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-marker-cluster { {$typo} }";
            }
        }

        // Cluster Text Color
        if ( ! empty( $attributes['clusterTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-marker-cluster { color: {$attributes['clusterTextColor']}; }";
        }
        if ( ! empty( $attributes['clusterTextColor_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-marker-cluster { color: {$attributes['clusterTextColor_tablet']}; }";
        }
        if ( ! empty( $attributes['clusterTextColor_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-marker-cluster { color: {$attributes['clusterTextColor_mobile']}; }";
        }

        // ============================================
        // ACCORDION: Icon Marker
        // ============================================

        // Icon Marker Size
        if ( isset( $attributes['iconMarkerSize'] ) ) {
            $css_rules[] = "{$selector} .marker-type-icon { width: {$attributes['iconMarkerSize']}px; height: {$attributes['iconMarkerSize']}px; }";
        }
        if ( isset( $attributes['iconMarkerSize_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .marker-type-icon { width: {$attributes['iconMarkerSize_tablet']}px; height: {$attributes['iconMarkerSize_tablet']}px; }";
        }
        if ( isset( $attributes['iconMarkerSize_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .marker-type-icon { width: {$attributes['iconMarkerSize_mobile']}px; height: {$attributes['iconMarkerSize_mobile']}px; }";
        }

        // Icon Marker Icon Size (CSS variable)
        if ( isset( $attributes['iconMarkerIconSize'] ) ) {
            $css_rules[] = "{$selector} .marker-type-icon { --ts-icon-size: {$attributes['iconMarkerIconSize']}px; }";
        }
        if ( isset( $attributes['iconMarkerIconSize_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .marker-type-icon { --ts-icon-size: {$attributes['iconMarkerIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['iconMarkerIconSize_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .marker-type-icon { --ts-icon-size: {$attributes['iconMarkerIconSize_mobile']}px; }";
        }

        // Icon Marker Border Radius
        if ( isset( $attributes['iconMarkerRadius'] ) ) {
            $css_rules[] = "{$selector} .marker-type-icon { border-radius: {$attributes['iconMarkerRadius']}px; }";
        }
        if ( isset( $attributes['iconMarkerRadius_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .marker-type-icon { border-radius: {$attributes['iconMarkerRadius_tablet']}px; }";
        }
        if ( isset( $attributes['iconMarkerRadius_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .marker-type-icon { border-radius: {$attributes['iconMarkerRadius_mobile']}px; }";
        }

        // Icon Marker Box Shadow
        if ( ! empty( $attributes['iconMarkerShadow']['enable'] ) ) {
            $shadow = self::generate_box_shadow_css( $attributes['iconMarkerShadow'] );
            if ( $shadow ) {
                $css_rules[] = "{$selector} .marker-type-icon { box-shadow: {$shadow}; }";
            }
        }

        // Icon Marker Static Background
        if ( ! empty( $attributes['iconMarkerStaticBg'] ) ) {
            $css_rules[] = "{$selector} .mi-static { background-color: {$attributes['iconMarkerStaticBg']}; }";
        }
        if ( ! empty( $attributes['iconMarkerStaticBg_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .mi-static { background-color: {$attributes['iconMarkerStaticBg_tablet']}; }";
        }
        if ( ! empty( $attributes['iconMarkerStaticBg_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .mi-static { background-color: {$attributes['iconMarkerStaticBg_mobile']}; }";
        }

        // Icon Marker Static Background Active
        if ( ! empty( $attributes['iconMarkerStaticBgActive'] ) ) {
            $css_rules[] = "{$selector} .marker-active .mi-static { background-color: {$attributes['iconMarkerStaticBgActive']}; }";
        }
        if ( ! empty( $attributes['iconMarkerStaticBgActive_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .marker-active .mi-static { background-color: {$attributes['iconMarkerStaticBgActive_tablet']}; }";
        }
        if ( ! empty( $attributes['iconMarkerStaticBgActive_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .marker-active .mi-static { background-color: {$attributes['iconMarkerStaticBgActive_mobile']}; }";
        }

        // Icon Marker Static Icon Color
        if ( ! empty( $attributes['iconMarkerStaticIconColor'] ) ) {
            $css_rules[] = "{$selector} .mi-static { --ts-icon-color: {$attributes['iconMarkerStaticIconColor']}; }";
        }
        if ( ! empty( $attributes['iconMarkerStaticIconColor_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .mi-static { --ts-icon-color: {$attributes['iconMarkerStaticIconColor_tablet']}; }";
        }
        if ( ! empty( $attributes['iconMarkerStaticIconColor_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .mi-static { --ts-icon-color: {$attributes['iconMarkerStaticIconColor_mobile']}; }";
        }

        // Icon Marker Static Icon Color Active
        if ( ! empty( $attributes['iconMarkerStaticIconColorActive'] ) ) {
            $css_rules[] = "{$selector} .marker-active .mi-static { --ts-icon-color: {$attributes['iconMarkerStaticIconColorActive']}; }";
        }
        if ( ! empty( $attributes['iconMarkerStaticIconColorActive_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .marker-active .mi-static { --ts-icon-color: {$attributes['iconMarkerStaticIconColorActive_tablet']}; }";
        }
        if ( ! empty( $attributes['iconMarkerStaticIconColorActive_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .marker-active .mi-static { --ts-icon-color: {$attributes['iconMarkerStaticIconColorActive_mobile']}; }";
        }

        // ============================================
        // ACCORDION: Text Marker
        // ============================================

        // Text Marker Background Color
        if ( ! empty( $attributes['textMarkerBgColor'] ) ) {
            $css_rules[] = "{$selector} .marker-type-text { background-color: {$attributes['textMarkerBgColor']}; }";
        }
        if ( ! empty( $attributes['textMarkerBgColor_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .marker-type-text { background-color: {$attributes['textMarkerBgColor_tablet']}; }";
        }
        if ( ! empty( $attributes['textMarkerBgColor_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .marker-type-text { background-color: {$attributes['textMarkerBgColor_mobile']}; }";
        }

        // Text Marker Background Color Active
        if ( ! empty( $attributes['textMarkerBgColorActive'] ) ) {
            $css_rules[] = "{$selector} .marker-active .marker-type-text { background-color: {$attributes['textMarkerBgColorActive']}; }";
        }
        if ( ! empty( $attributes['textMarkerBgColorActive_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .marker-active .marker-type-text { background-color: {$attributes['textMarkerBgColorActive_tablet']}; }";
        }
        if ( ! empty( $attributes['textMarkerBgColorActive_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .marker-active .marker-type-text { background-color: {$attributes['textMarkerBgColorActive_mobile']}; }";
        }

        // Text Marker Text Color
        if ( ! empty( $attributes['textMarkerTextColor'] ) ) {
            $css_rules[] = "{$selector} .marker-type-text { color: {$attributes['textMarkerTextColor']}; }";
        }
        if ( ! empty( $attributes['textMarkerTextColor_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .marker-type-text { color: {$attributes['textMarkerTextColor_tablet']}; }";
        }
        if ( ! empty( $attributes['textMarkerTextColor_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .marker-type-text { color: {$attributes['textMarkerTextColor_mobile']}; }";
        }

        // Text Marker Text Color Active
        if ( ! empty( $attributes['textMarkerTextColorActive'] ) ) {
            $css_rules[] = "{$selector} .marker-active .marker-type-text { color: {$attributes['textMarkerTextColorActive']}; }";
        }
        if ( ! empty( $attributes['textMarkerTextColorActive_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .marker-active .marker-type-text { color: {$attributes['textMarkerTextColorActive_tablet']}; }";
        }
        if ( ! empty( $attributes['textMarkerTextColorActive_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .marker-active .marker-type-text { color: {$attributes['textMarkerTextColorActive_mobile']}; }";
        }

        // Text Marker Border Radius
        if ( isset( $attributes['textMarkerRadius'] ) ) {
            $css_rules[] = "{$selector} .marker-type-text { border-radius: {$attributes['textMarkerRadius']}px; }";
        }
        if ( isset( $attributes['textMarkerRadius_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .marker-type-text { border-radius: {$attributes['textMarkerRadius_tablet']}px; }";
        }
        if ( isset( $attributes['textMarkerRadius_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .marker-type-text { border-radius: {$attributes['textMarkerRadius_mobile']}px; }";
        }

        // Text Marker Typography
        if ( ! empty( $attributes['textMarkerTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['textMarkerTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .marker-type-text { {$typo} }";
            }
        }

        // Text Marker Padding
        if ( ! empty( $attributes['textMarkerPadding'] ) ) {
            $padding = self::generate_dimensions_css( $attributes['textMarkerPadding'], 'padding' );
            if ( $padding ) {
                $css_rules[] = "{$selector} .marker-type-text { {$padding} }";
            }
        }
        if ( ! empty( $attributes['textMarkerPadding_tablet'] ) ) {
            $padding = self::generate_dimensions_css( $attributes['textMarkerPadding_tablet'], 'padding' );
            if ( $padding ) {
                $tablet_rules[] = "{$selector} .marker-type-text { {$padding} }";
            }
        }
        if ( ! empty( $attributes['textMarkerPadding_mobile'] ) ) {
            $padding = self::generate_dimensions_css( $attributes['textMarkerPadding_mobile'], 'padding' );
            if ( $padding ) {
                $mobile_rules[] = "{$selector} .marker-type-text { {$padding} }";
            }
        }

        // Text Marker Box Shadow
        if ( ! empty( $attributes['textMarkerShadow']['enable'] ) ) {
            $shadow = self::generate_box_shadow_css( $attributes['textMarkerShadow'] );
            if ( $shadow ) {
                $css_rules[] = "{$selector} .marker-type-text { box-shadow: {$shadow}; }";
            }
        }

        // ============================================
        // ACCORDION: Image Marker
        // ============================================

        // Image Marker Size
        if ( isset( $attributes['imageMarkerSize'] ) ) {
            $css_rules[] = "{$selector} .marker-type-image { width: {$attributes['imageMarkerSize']}px; height: {$attributes['imageMarkerSize']}px; }";
        }
        if ( isset( $attributes['imageMarkerSize_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .marker-type-image { width: {$attributes['imageMarkerSize_tablet']}px; height: {$attributes['imageMarkerSize_tablet']}px; }";
        }
        if ( isset( $attributes['imageMarkerSize_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .marker-type-image { width: {$attributes['imageMarkerSize_mobile']}px; height: {$attributes['imageMarkerSize_mobile']}px; }";
        }

        // Image Marker Border Radius
        if ( isset( $attributes['imageMarkerRadius'] ) ) {
            $css_rules[] = "{$selector} .marker-type-image { border-radius: {$attributes['imageMarkerRadius']}px; }";
        }
        if ( isset( $attributes['imageMarkerRadius_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .marker-type-image { border-radius: {$attributes['imageMarkerRadius_tablet']}px; }";
        }
        if ( isset( $attributes['imageMarkerRadius_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .marker-type-image { border-radius: {$attributes['imageMarkerRadius_mobile']}px; }";
        }

        // Image Marker Box Shadow
        if ( ! empty( $attributes['imageMarkerShadow']['enable'] ) ) {
            $shadow = self::generate_box_shadow_css( $attributes['imageMarkerShadow'] );
            if ( $shadow ) {
                $css_rules[] = "{$selector} .marker-type-image { box-shadow: {$shadow}; }";
            }
        }

        // ============================================
        // ACCORDION: Map Popup
        // ============================================

        // Popup Card Width
        if ( isset( $attributes['popupCardWidth'] ) ) {
            $css_rules[] = "{$selector} .ts-preview-popup { width: {$attributes['popupCardWidth']}px; }";
        }
        if ( isset( $attributes['popupCardWidth_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-preview-popup { width: {$attributes['popupCardWidth_tablet']}px; }";
        }
        if ( isset( $attributes['popupCardWidth_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-preview-popup { width: {$attributes['popupCardWidth_mobile']}px; }";
        }

        // Popup Loader Colors
        if ( ! empty( $attributes['popupLoaderColor1'] ) ) {
            $css_rules[] = "{$selector} .ts-loading-popup .ts-loader { border-color: {$attributes['popupLoaderColor1']}; }";
        }
        if ( ! empty( $attributes['popupLoaderColor2'] ) ) {
            $css_rules[] = "{$selector} .ts-loading-popup .ts-loader { border-bottom-color: {$attributes['popupLoaderColor2']}; }";
        }

        // ============================================
        // ACCORDION: Search Button
        // ============================================

        // Search Button Typography
        if ( ! empty( $attributes['searchBtnTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['searchBtnTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-map-btn { {$typo} }";
            }
        }

        // Search Button Text Color
        if ( ! empty( $attributes['searchBtnTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-map-btn { color: {$attributes['searchBtnTextColor']}; }";
        }
        if ( ! empty( $attributes['searchBtnTextColor_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-map-btn { color: {$attributes['searchBtnTextColor_tablet']}; }";
        }
        if ( ! empty( $attributes['searchBtnTextColor_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-map-btn { color: {$attributes['searchBtnTextColor_mobile']}; }";
        }

        // Search Button Background Color
        if ( ! empty( $attributes['searchBtnBgColor'] ) ) {
            $css_rules[] = "{$selector} .ts-map-btn { background-color: {$attributes['searchBtnBgColor']}; }";
        }
        if ( ! empty( $attributes['searchBtnBgColor_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-map-btn { background-color: {$attributes['searchBtnBgColor_tablet']}; }";
        }
        if ( ! empty( $attributes['searchBtnBgColor_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-map-btn { background-color: {$attributes['searchBtnBgColor_mobile']}; }";
        }

        // Search Button Icon Color
        if ( ! empty( $attributes['searchBtnIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-map-btn svg { fill: {$attributes['searchBtnIconColor']}; }";
        }
        if ( ! empty( $attributes['searchBtnIconColor_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-map-btn svg { fill: {$attributes['searchBtnIconColor_tablet']}; }";
        }
        if ( ! empty( $attributes['searchBtnIconColor_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-map-btn svg { fill: {$attributes['searchBtnIconColor_mobile']}; }";
        }

        // Search Button Icon Color Active
        if ( ! empty( $attributes['searchBtnIconColorActive'] ) ) {
            $css_rules[] = "{$selector} .ts-map-btn.active svg { fill: {$attributes['searchBtnIconColorActive']}; }";
        }
        if ( ! empty( $attributes['searchBtnIconColorActive_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-map-btn.active svg { fill: {$attributes['searchBtnIconColorActive_tablet']}; }";
        }
        if ( ! empty( $attributes['searchBtnIconColorActive_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-map-btn.active svg { fill: {$attributes['searchBtnIconColorActive_mobile']}; }";
        }

        // Search Button Border Radius
        if ( isset( $attributes['searchBtnRadius'] ) ) {
            $css_rules[] = "{$selector} .ts-map-btn { border-radius: {$attributes['searchBtnRadius']}px; }";
        }
        if ( isset( $attributes['searchBtnRadius_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-map-btn { border-radius: {$attributes['searchBtnRadius_tablet']}px; }";
        }
        if ( isset( $attributes['searchBtnRadius_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-map-btn { border-radius: {$attributes['searchBtnRadius_mobile']}px; }";
        }

        // ============================================
        // ACCORDION: Nav Buttons
        // ============================================

        // Nav Button Icon Color
        if ( ! empty( $attributes['navBtnIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-map-nav .ts-icon-btn i { color: {$attributes['navBtnIconColor']}; }";
            $css_rules[] = "{$selector} .ts-map-nav .ts-icon-btn svg { fill: {$attributes['navBtnIconColor']}; }";
        }

        // Nav Button Icon Size
        if ( isset( $attributes['navBtnIconSize'] ) ) {
            $css_rules[] = "{$selector} .ts-map-nav .ts-icon-btn i { font-size: {$attributes['navBtnIconSize']}px; }";
            $css_rules[] = "{$selector} .ts-map-nav .ts-icon-btn svg { width: {$attributes['navBtnIconSize']}px; height: {$attributes['navBtnIconSize']}px; }";
        }
        if ( isset( $attributes['navBtnIconSize_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-map-nav .ts-icon-btn i { font-size: {$attributes['navBtnIconSize_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-map-nav .ts-icon-btn svg { width: {$attributes['navBtnIconSize_tablet']}px; height: {$attributes['navBtnIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['navBtnIconSize_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-map-nav .ts-icon-btn i { font-size: {$attributes['navBtnIconSize_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-map-nav .ts-icon-btn svg { width: {$attributes['navBtnIconSize_mobile']}px; height: {$attributes['navBtnIconSize_mobile']}px; }";
        }

        // Nav Button Background Color
        if ( ! empty( $attributes['navBtnBgColor'] ) ) {
            $css_rules[] = "{$selector} .ts-map-nav .ts-icon-btn { background-color: {$attributes['navBtnBgColor']}; }";
        }

        // Nav Button Border
        if ( ! empty( $attributes['navBtnBorder'] ) ) {
            $border = $attributes['navBtnBorder'];
            if ( ! empty( $border['borderType'] ) && $border['borderType'] !== 'none' ) {
                $css_rules[] = "{$selector} .ts-map-nav .ts-icon-btn { border-style: {$border['borderType']}; }";

                if ( ! empty( $border['borderWidth'] ) ) {
                    $width = $border['borderWidth'];
                    $unit = $width['unit'] ?? 'px';
                    if ( ! empty( $width['linked'] ) && isset( $width['top'] ) ) {
                        $css_rules[] = "{$selector} .ts-map-nav .ts-icon-btn { border-width: {$width['top']}{$unit}; }";
                    } else {
                        $t = isset( $width['top'] ) ? "{$width['top']}{$unit}" : '0';
                        $r = isset( $width['right'] ) ? "{$width['right']}{$unit}" : '0';
                        $b = isset( $width['bottom'] ) ? "{$width['bottom']}{$unit}" : '0';
                        $l = isset( $width['left'] ) ? "{$width['left']}{$unit}" : '0';
                        $css_rules[] = "{$selector} .ts-map-nav .ts-icon-btn { border-width: {$t} {$r} {$b} {$l}; }";
                    }
                }

                if ( ! empty( $border['borderColor'] ) ) {
                    $css_rules[] = "{$selector} .ts-map-nav .ts-icon-btn { border-color: {$border['borderColor']}; }";
                }
            }
        }

        // Nav Button Border Radius
        if ( isset( $attributes['navBtnRadius'] ) ) {
            $css_rules[] = "{$selector} .ts-map-nav .ts-icon-btn { border-radius: {$attributes['navBtnRadius']}px; }";
        }
        if ( isset( $attributes['navBtnRadius_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-map-nav .ts-icon-btn { border-radius: {$attributes['navBtnRadius_tablet']}px; }";
        }
        if ( isset( $attributes['navBtnRadius_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-map-nav .ts-icon-btn { border-radius: {$attributes['navBtnRadius_mobile']}px; }";
        }

        // Nav Button Box Shadow
        if ( ! empty( $attributes['navBtnShadow']['enable'] ) ) {
            $shadow = self::generate_box_shadow_css( $attributes['navBtnShadow'] );
            if ( $shadow ) {
                $css_rules[] = "{$selector} .ts-map-nav .ts-icon-btn { box-shadow: {$shadow}; }";
            }
        }

        // Nav Button Size
        if ( isset( $attributes['navBtnSize'] ) ) {
            $css_rules[] = "{$selector} .ts-map-nav .ts-icon-btn { width: {$attributes['navBtnSize']}px; height: {$attributes['navBtnSize']}px; }";
        }
        if ( isset( $attributes['navBtnSize_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-map-nav .ts-icon-btn { width: {$attributes['navBtnSize_tablet']}px; height: {$attributes['navBtnSize_tablet']}px; }";
        }
        if ( isset( $attributes['navBtnSize_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-map-nav .ts-icon-btn { width: {$attributes['navBtnSize_mobile']}px; height: {$attributes['navBtnSize_mobile']}px; }";
        }

        // Nav Button Hover States
        if ( ! empty( $attributes['navBtnIconColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-map-nav .ts-icon-btn:hover i { color: {$attributes['navBtnIconColorHover']}; }";
            $css_rules[] = "{$selector} .ts-map-nav .ts-icon-btn:hover svg { fill: {$attributes['navBtnIconColorHover']}; }";
        }
        if ( ! empty( $attributes['navBtnBgColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-map-nav .ts-icon-btn:hover { background-color: {$attributes['navBtnBgColorHover']}; }";
        }
        if ( ! empty( $attributes['navBtnBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-map-nav .ts-icon-btn:hover { border-color: {$attributes['navBtnBorderColorHover']}; }";
        }

        // ============================================
        // Combine CSS with media queries
        // ============================================
        $final_css = '';

        if ( ! empty( $css_rules ) ) {
            $final_css .= implode( "\n", $css_rules );
        }

        if ( ! empty( $tablet_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::TABLET_BREAKPOINT . "px) {\n" . implode( "\n", $tablet_rules ) . "\n}";
        }

        if ( ! empty( $mobile_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::MOBILE_BREAKPOINT . "px) {\n" . implode( "\n", $mobile_rules ) . "\n}";
        }

        return $final_css;
    }

    /**
     * Generate CSS for Post Feed Block
     *
     * Handles counter, order-by, pagination, carousel navigation, loading states, and no-results.
     * Uses data-block-id selector for scoping.
     *
     * @param array  $attributes Block attributes.
     * @param string $block_id   Block unique ID.
     * @return string Generated CSS.
     */
    public static function generate_post_feed_css( $attributes, $block_id ) {
        if ( empty( $block_id ) ) {
            return '';
        }

        $selector = '[data-block-id="' . $block_id . '"]';
        $css_rules = [];
        $tablet_rules = [];
        $mobile_rules = [];

        // ============================================
        // CONTAINER POSITIONING
        // ============================================
        // Fix: Carousel nav is position:absolute and needs relative container
        // Also prevent carousel from expanding parent (max-width: 100%, min-width: 0)
        $css_rules[] = "{$selector} { position: relative; max-width: 100%; min-width: 0; }";
        $css_rules[] = "{$selector} .post-feed-grid { max-width: 100%; }";

        // ============================================
        // COUNTER STYLES
        // ============================================

        // Counter typography
        if ( ! empty( $attributes['counterTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['counterTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .result-count { {$typo} }";
            }
        }

        // Counter text color
        if ( ! empty( $attributes['counterTextColor'] ) ) {
            $css_rules[] = "{$selector} .result-count { color: {$attributes['counterTextColor']}; }";
        }

        // Counter bottom spacing
        if ( isset( $attributes['counterBottomSpacing'] ) ) {
            $css_rules[] = "{$selector} .post-feed-header { margin-bottom: {$attributes['counterBottomSpacing']}px; }";
        }
        if ( isset( $attributes['counterBottomSpacing_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .post-feed-header { margin-bottom: {$attributes['counterBottomSpacing_tablet']}px; }";
        }
        if ( isset( $attributes['counterBottomSpacing_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .post-feed-header { margin-bottom: {$attributes['counterBottomSpacing_mobile']}px; }";
        }

        // ============================================
        // ORDER BY STYLES
        // ============================================

        // Order by typography
        if ( ! empty( $attributes['orderByTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['orderByTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .vxf-sort { {$typo} }";
            }
        }

        // Order by text color (uses CSS variable --ts-shade-3)
        if ( ! empty( $attributes['orderByTextColor'] ) ) {
            $css_rules[] = "{$selector} .vxf-sort { --ts-shade-3: {$attributes['orderByTextColor']}; }";
        }

        // Order by text color hover (uses CSS variable --ts-shade-2)
        if ( ! empty( $attributes['orderByTextColorHover'] ) ) {
            $css_rules[] = "{$selector} .vxf-sort { --ts-shade-2: {$attributes['orderByTextColorHover']}; }";
        }

        // ============================================
        // NO RESULTS STYLES
        // ============================================

        // No results content gap
        if ( isset( $attributes['noResultsContentGap'] ) ) {
            $css_rules[] = "{$selector} .ts-no-posts { gap: {$attributes['noResultsContentGap']}px; }";
        }
        if ( isset( $attributes['noResultsContentGap_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-no-posts { gap: {$attributes['noResultsContentGap_tablet']}px; }";
        }
        if ( isset( $attributes['noResultsContentGap_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-no-posts { gap: {$attributes['noResultsContentGap_mobile']}px; }";
        }

        // No results icon size
        if ( isset( $attributes['noResultsIconSize'] ) ) {
            $css_rules[] = "{$selector} .ts-no-posts > svg, {$selector} .ts-no-posts > i { --ts-icon-size: {$attributes['noResultsIconSize']}px; width: {$attributes['noResultsIconSize']}px; height: {$attributes['noResultsIconSize']}px; font-size: {$attributes['noResultsIconSize']}px; }";
        }
        if ( isset( $attributes['noResultsIconSize_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-no-posts > svg, {$selector} .ts-no-posts > i { --ts-icon-size: {$attributes['noResultsIconSize_tablet']}px; width: {$attributes['noResultsIconSize_tablet']}px; height: {$attributes['noResultsIconSize_tablet']}px; font-size: {$attributes['noResultsIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['noResultsIconSize_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-no-posts > svg, {$selector} .ts-no-posts > i { --ts-icon-size: {$attributes['noResultsIconSize_mobile']}px; width: {$attributes['noResultsIconSize_mobile']}px; height: {$attributes['noResultsIconSize_mobile']}px; font-size: {$attributes['noResultsIconSize_mobile']}px; }";
        }

        // No results icon color
        if ( ! empty( $attributes['noResultsIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-no-posts > svg, {$selector} .ts-no-posts > i { --ts-icon-color: {$attributes['noResultsIconColor']}; color: {$attributes['noResultsIconColor']}; fill: {$attributes['noResultsIconColor']}; }";
        }

        // No results typography
        if ( ! empty( $attributes['noResultsTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['noResultsTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-no-posts p { {$typo} }";
            }
        }

        // No results text color
        if ( ! empty( $attributes['noResultsTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-no-posts p { color: {$attributes['noResultsTextColor']}; }";
        }

        // No results link color
        if ( ! empty( $attributes['noResultsLinkColor'] ) ) {
            $css_rules[] = "{$selector} .ts-no-posts a { color: {$attributes['noResultsLinkColor']}; }";
        }

        // ============================================
        // PAGINATION STYLES
        // ============================================

        // Pagination top margin
        if ( isset( $attributes['paginationTopMargin'] ) ) {
            $css_rules[] = "{$selector} .feed-pagination { margin-top: {$attributes['paginationTopMargin']}px; }";
        }
        if ( isset( $attributes['paginationTopMargin_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .feed-pagination { margin-top: {$attributes['paginationTopMargin_tablet']}px; }";
        }
        if ( isset( $attributes['paginationTopMargin_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .feed-pagination { margin-top: {$attributes['paginationTopMargin_mobile']}px; }";
        }

        // Pagination typography
        if ( ! empty( $attributes['paginationTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['paginationTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .feed-pagination .ts-btn { {$typo} }";
            }
        }

        // Pagination padding
        if ( ! empty( $attributes['paginationPadding'] ) ) {
            $padding = self::generate_dimensions_css( $attributes['paginationPadding'], 'padding' );
            if ( $padding ) {
                $css_rules[] = "{$selector} .feed-pagination .ts-btn { {$padding} }";
            }
        }

        // Pagination height
        if ( isset( $attributes['paginationHeight'] ) ) {
            $css_rules[] = "{$selector} .feed-pagination .ts-btn { height: {$attributes['paginationHeight']}px; }";
        }
        if ( isset( $attributes['paginationHeight_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .feed-pagination .ts-btn { height: {$attributes['paginationHeight_tablet']}px; }";
        }
        if ( isset( $attributes['paginationHeight_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .feed-pagination .ts-btn { height: {$attributes['paginationHeight_mobile']}px; }";
        }

        // Pagination width
        if ( isset( $attributes['paginationWidth'] ) && $attributes['paginationWidth'] > 0 ) {
            $unit = $attributes['paginationWidthUnit'] ?? '%';
            $css_rules[] = "{$selector} .feed-pagination .ts-btn { width: {$attributes['paginationWidth']}{$unit}; }";
        }

        // Pagination icon text spacing
        if ( isset( $attributes['paginationIconTextSpacing'] ) ) {
            $css_rules[] = "{$selector} .feed-pagination .ts-btn { gap: {$attributes['paginationIconTextSpacing']}px; }";
        }

        // Pagination border type
        if ( ! empty( $attributes['paginationBorderType'] ) ) {
            $css_rules[] = "{$selector} .feed-pagination .ts-btn { border-style: {$attributes['paginationBorderType']}; }";
        }

        // Pagination border width
        if ( isset( $attributes['paginationBorderWidth'] ) ) {
            $css_rules[] = "{$selector} .feed-pagination .ts-btn { border-width: {$attributes['paginationBorderWidth']}px; }";
        } elseif ( ! empty( $attributes['paginationBorderType'] ) && $attributes['paginationBorderType'] !== 'none' ) {
            $css_rules[] = "{$selector} .feed-pagination .ts-btn { border-width: 1px; }";
        }

        // Pagination border color
        if ( ! empty( $attributes['paginationBorderColor'] ) ) {
            $css_rules[] = "{$selector} .feed-pagination .ts-btn { border-color: {$attributes['paginationBorderColor']}; }";
        }

        // Pagination justify
        if ( ! empty( $attributes['paginationJustify'] ) ) {
            $css_rules[] = "{$selector} .feed-pagination { justify-content: {$attributes['paginationJustify']}; }";
        }

        // Pagination spacing between buttons
        if ( isset( $attributes['paginationSpacing'] ) ) {
            $css_rules[] = "{$selector} .feed-pagination { gap: {$attributes['paginationSpacing']}px; }";
        }
        if ( isset( $attributes['paginationSpacing_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .feed-pagination { gap: {$attributes['paginationSpacing_tablet']}px; }";
        }
        if ( isset( $attributes['paginationSpacing_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .feed-pagination { gap: {$attributes['paginationSpacing_mobile']}px; }";
        }

        // Pagination border radius
        if ( isset( $attributes['paginationBorderRadius'] ) ) {
            $css_rules[] = "{$selector} .feed-pagination .ts-btn { border-radius: {$attributes['paginationBorderRadius']}px; }";
        }
        if ( isset( $attributes['paginationBorderRadius_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .feed-pagination .ts-btn { border-radius: {$attributes['paginationBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['paginationBorderRadius_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .feed-pagination .ts-btn { border-radius: {$attributes['paginationBorderRadius_mobile']}px; }";
        }

        // Pagination text color
        if ( ! empty( $attributes['paginationTextColor'] ) ) {
            $css_rules[] = "{$selector} .feed-pagination .ts-btn { color: {$attributes['paginationTextColor']}; }";
        }

        // Pagination background
        if ( ! empty( $attributes['paginationBackground'] ) ) {
            $css_rules[] = "{$selector} .feed-pagination .ts-btn { background-color: {$attributes['paginationBackground']}; }";
        }

        // Pagination icon color
        if ( ! empty( $attributes['paginationIconColor'] ) ) {
            $css_rules[] = "{$selector} .feed-pagination .ts-btn svg, {$selector} .feed-pagination .ts-btn i { --ts-icon-color: {$attributes['paginationIconColor']}; color: {$attributes['paginationIconColor']}; fill: {$attributes['paginationIconColor']}; }";
        }

        // Pagination hover states
        if ( ! empty( $attributes['paginationTextColorHover'] ) ) {
            $css_rules[] = "{$selector} .feed-pagination .ts-btn:hover { color: {$attributes['paginationTextColorHover']}; }";
        }
        if ( ! empty( $attributes['paginationBackgroundHover'] ) ) {
            $css_rules[] = "{$selector} .feed-pagination .ts-btn:hover { background-color: {$attributes['paginationBackgroundHover']}; }";
        }
        if ( ! empty( $attributes['paginationBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .feed-pagination .ts-btn:hover { border-color: {$attributes['paginationBorderColorHover']}; }";
        }
        if ( ! empty( $attributes['paginationIconColorHover'] ) ) {
            $css_rules[] = "{$selector} .feed-pagination .ts-btn:hover svg, {$selector} .feed-pagination .ts-btn:hover i { --ts-icon-color: {$attributes['paginationIconColorHover']}; color: {$attributes['paginationIconColorHover']}; fill: {$attributes['paginationIconColorHover']}; }";
        }

        // ============================================
        // CAROUSEL NAVIGATION STYLES
        // ============================================

        // Carousel nav horizontal position
        if ( isset( $attributes['carouselNavHorizontalPosition'] ) ) {
            $css_rules[] = "{$selector} .post-feed-nav .ts-prev-page { left: {$attributes['carouselNavHorizontalPosition']}px; }";
            $css_rules[] = "{$selector} .post-feed-nav .ts-next-page { right: {$attributes['carouselNavHorizontalPosition']}px; }";
        }
        if ( isset( $attributes['carouselNavHorizontalPosition_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .post-feed-nav .ts-prev-page { left: {$attributes['carouselNavHorizontalPosition_tablet']}px; }";
            $tablet_rules[] = "{$selector} .post-feed-nav .ts-next-page { right: {$attributes['carouselNavHorizontalPosition_tablet']}px; }";
        }
        if ( isset( $attributes['carouselNavHorizontalPosition_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .post-feed-nav .ts-prev-page { left: {$attributes['carouselNavHorizontalPosition_mobile']}px; }";
            $mobile_rules[] = "{$selector} .post-feed-nav .ts-next-page { right: {$attributes['carouselNavHorizontalPosition_mobile']}px; }";
        }

        // Carousel nav vertical position
        if ( isset( $attributes['carouselNavVerticalPosition'] ) ) {
            $css_rules[] = "{$selector} .post-feed-nav .ts-icon-btn { top: {$attributes['carouselNavVerticalPosition']}%; transform: translateY(-50%); }";
        }
        if ( isset( $attributes['carouselNavVerticalPosition_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .post-feed-nav .ts-icon-btn { top: {$attributes['carouselNavVerticalPosition_tablet']}%; transform: translateY(-50%); }";
        }
        if ( isset( $attributes['carouselNavVerticalPosition_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .post-feed-nav .ts-icon-btn { top: {$attributes['carouselNavVerticalPosition_mobile']}%; transform: translateY(-50%); }";
        }

        // Carousel nav icon color
        if ( ! empty( $attributes['carouselNavIconColor'] ) ) {
            $css_rules[] = "{$selector} .post-feed-nav .ts-icon-btn svg, {$selector} .post-feed-nav .ts-icon-btn i { --ts-icon-color: {$attributes['carouselNavIconColor']}; color: {$attributes['carouselNavIconColor']}; fill: {$attributes['carouselNavIconColor']}; }";
        }

        // Carousel nav button size
        if ( isset( $attributes['carouselNavButtonSize'] ) ) {
            $css_rules[] = "{$selector} .post-feed-nav .ts-icon-btn { width: {$attributes['carouselNavButtonSize']}px; height: {$attributes['carouselNavButtonSize']}px; }";
        }
        if ( isset( $attributes['carouselNavButtonSize_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .post-feed-nav .ts-icon-btn { width: {$attributes['carouselNavButtonSize_tablet']}px; height: {$attributes['carouselNavButtonSize_tablet']}px; }";
        }
        if ( isset( $attributes['carouselNavButtonSize_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .post-feed-nav .ts-icon-btn { width: {$attributes['carouselNavButtonSize_mobile']}px; height: {$attributes['carouselNavButtonSize_mobile']}px; }";
        }

        // Carousel nav icon size
        if ( isset( $attributes['carouselNavIconSize'] ) ) {
            $css_rules[] = "{$selector} .post-feed-nav .ts-icon-btn svg, {$selector} .post-feed-nav .ts-icon-btn i { --ts-icon-size: {$attributes['carouselNavIconSize']}px; width: {$attributes['carouselNavIconSize']}px; height: {$attributes['carouselNavIconSize']}px; font-size: {$attributes['carouselNavIconSize']}px; }";
        }
        if ( isset( $attributes['carouselNavIconSize_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .post-feed-nav .ts-icon-btn svg, {$selector} .post-feed-nav .ts-icon-btn i { --ts-icon-size: {$attributes['carouselNavIconSize_tablet']}px; width: {$attributes['carouselNavIconSize_tablet']}px; height: {$attributes['carouselNavIconSize_tablet']}px; font-size: {$attributes['carouselNavIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['carouselNavIconSize_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .post-feed-nav .ts-icon-btn svg, {$selector} .post-feed-nav .ts-icon-btn i { --ts-icon-size: {$attributes['carouselNavIconSize_mobile']}px; width: {$attributes['carouselNavIconSize_mobile']}px; height: {$attributes['carouselNavIconSize_mobile']}px; font-size: {$attributes['carouselNavIconSize_mobile']}px; }";
        }

        // Carousel nav background
        if ( ! empty( $attributes['carouselNavBackground'] ) ) {
            $css_rules[] = "{$selector} .post-feed-nav .ts-icon-btn { background-color: {$attributes['carouselNavBackground']}; }";
        }

        // Carousel nav backdrop blur
        if ( isset( $attributes['carouselNavBackdropBlur'] ) ) {
            $css_rules[] = "{$selector} .post-feed-nav .ts-icon-btn { backdrop-filter: blur({$attributes['carouselNavBackdropBlur']}px); -webkit-backdrop-filter: blur({$attributes['carouselNavBackdropBlur']}px); }";
        }

        // Carousel nav border type
        if ( ! empty( $attributes['carouselNavBorderType'] ) ) {
            $css_rules[] = "{$selector} .post-feed-nav .ts-icon-btn { border-style: {$attributes['carouselNavBorderType']}; }";
        }

        // Carousel nav border width
        if ( isset( $attributes['carouselNavBorderWidth'] ) ) {
            $css_rules[] = "{$selector} .post-feed-nav .ts-icon-btn { border-width: {$attributes['carouselNavBorderWidth']}px; }";
        } elseif ( ! empty( $attributes['carouselNavBorderType'] ) && $attributes['carouselNavBorderType'] !== 'none' ) {
            $css_rules[] = "{$selector} .post-feed-nav .ts-icon-btn { border-width: 1px; }";
        }

        // Carousel nav border color
        if ( ! empty( $attributes['carouselNavBorderColor'] ) ) {
            $css_rules[] = "{$selector} .post-feed-nav .ts-icon-btn { border-color: {$attributes['carouselNavBorderColor']}; }";
        }

        // Carousel nav border radius
        if ( isset( $attributes['carouselNavBorderRadius'] ) ) {
            $css_rules[] = "{$selector} .post-feed-nav .ts-icon-btn { border-radius: {$attributes['carouselNavBorderRadius']}px; }";
        }
        if ( isset( $attributes['carouselNavBorderRadius_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .post-feed-nav .ts-icon-btn { border-radius: {$attributes['carouselNavBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['carouselNavBorderRadius_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .post-feed-nav .ts-icon-btn { border-radius: {$attributes['carouselNavBorderRadius_mobile']}px; }";
        }

        // Carousel nav hover states
        if ( isset( $attributes['carouselNavButtonSizeHover'] ) ) {
            $css_rules[] = "{$selector} .post-feed-nav .ts-icon-btn:hover { width: {$attributes['carouselNavButtonSizeHover']}px; height: {$attributes['carouselNavButtonSizeHover']}px; }";
        }
        if ( isset( $attributes['carouselNavButtonSizeHover_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .post-feed-nav .ts-icon-btn:hover { width: {$attributes['carouselNavButtonSizeHover_tablet']}px; height: {$attributes['carouselNavButtonSizeHover_tablet']}px; }";
        }
        if ( isset( $attributes['carouselNavButtonSizeHover_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .post-feed-nav .ts-icon-btn:hover { width: {$attributes['carouselNavButtonSizeHover_mobile']}px; height: {$attributes['carouselNavButtonSizeHover_mobile']}px; }";
        }

        if ( isset( $attributes['carouselNavIconSizeHover'] ) ) {
            $css_rules[] = "{$selector} .post-feed-nav .ts-icon-btn:hover svg, {$selector} .post-feed-nav .ts-icon-btn:hover i { --ts-icon-size: {$attributes['carouselNavIconSizeHover']}px; width: {$attributes['carouselNavIconSizeHover']}px; height: {$attributes['carouselNavIconSizeHover']}px; font-size: {$attributes['carouselNavIconSizeHover']}px; }";
        }
        if ( isset( $attributes['carouselNavIconSizeHover_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .post-feed-nav .ts-icon-btn:hover svg, {$selector} .post-feed-nav .ts-icon-btn:hover i { --ts-icon-size: {$attributes['carouselNavIconSizeHover_tablet']}px; width: {$attributes['carouselNavIconSizeHover_tablet']}px; height: {$attributes['carouselNavIconSizeHover_tablet']}px; font-size: {$attributes['carouselNavIconSizeHover_tablet']}px; }";
        }
        if ( isset( $attributes['carouselNavIconSizeHover_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .post-feed-nav .ts-icon-btn:hover svg, {$selector} .post-feed-nav .ts-icon-btn:hover i { --ts-icon-size: {$attributes['carouselNavIconSizeHover_mobile']}px; width: {$attributes['carouselNavIconSizeHover_mobile']}px; height: {$attributes['carouselNavIconSizeHover_mobile']}px; font-size: {$attributes['carouselNavIconSizeHover_mobile']}px; }";
        }

        if ( ! empty( $attributes['carouselNavIconColorHover'] ) ) {
            $css_rules[] = "{$selector} .post-feed-nav .ts-icon-btn:hover svg, {$selector} .post-feed-nav .ts-icon-btn:hover i { --ts-icon-color: {$attributes['carouselNavIconColorHover']}; color: {$attributes['carouselNavIconColorHover']}; fill: {$attributes['carouselNavIconColorHover']}; }";
        }

        if ( ! empty( $attributes['carouselNavBackgroundHover'] ) ) {
            $css_rules[] = "{$selector} .post-feed-nav .ts-icon-btn:hover { background-color: {$attributes['carouselNavBackgroundHover']}; }";
        }

        if ( ! empty( $attributes['carouselNavBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .post-feed-nav .ts-icon-btn:hover { border-color: {$attributes['carouselNavBorderColorHover']}; }";
        }

        // ============================================
        // LOADING STYLES
        // ============================================

        // Loading opacity
        if ( ! empty( $attributes['loadingStyle'] ) && $attributes['loadingStyle'] === 'opacity' && isset( $attributes['loadingOpacity'] ) ) {
            $css_rules[] = "{$selector} .post-feed-grid.vx-opacity { opacity: {$attributes['loadingOpacity']}; }";
        }

        // Skeleton background color
        if ( ! empty( $attributes['loadingStyle'] ) && $attributes['loadingStyle'] === 'skeleton' && ! empty( $attributes['skeletonBackgroundColor'] ) ) {
            $css_rules[] = "{$selector}.vx-loading .vx-skeleton .ts-preview { background-color: {$attributes['skeletonBackgroundColor']}; }";
        }

        // ============================================
        // COMBINE ALL RULES
        // ============================================
        $final_css = '';

        if ( ! empty( $css_rules ) ) {
            $final_css .= implode( "\n", $css_rules );
        }

        if ( ! empty( $tablet_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::TABLET_BREAKPOINT . "px) {\n" . implode( "\n", $tablet_rules ) . "\n}";
        }

        if ( ! empty( $mobile_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::MOBILE_BREAKPOINT . "px) {\n" . implode( "\n", $mobile_rules ) . "\n}";
        }

        return $final_css;
    }

    /**
     * Generate CSS for Navbar Block
     *
     * Handles orientation, menu items (normal/hover/active), icons, scroll, and chevrons.
     *
     * @param array  $attributes Block attributes.
     * @param string $block_id   Block unique ID.
     * @return string Generated CSS.
     */
    public static function generate_navbar_css( $attributes, $block_id ) {
        if ( empty( $block_id ) ) {
            return '';
        }

        $selector = '.voxel-fse-navbar-' . $block_id;
        $css_rules = [];
        $tablet_rules = [];
        $mobile_rules = [];

        // ============================================
        // CONTENT TAB - Settings (Orientation & Justify)
        // ============================================

        // Horizontal mode justify
        if ( ! empty( $attributes['orientation'] ) && $attributes['orientation'] === 'horizontal' ) {
            $justify_map = [
                'left' => 'flex-start',
                'center' => 'center',
                'right' => 'flex-end',
                'space-between' => 'space-between',
                'space-around' => 'space-around',
            ];

            if ( ! empty( $attributes['justify'] ) && isset( $justify_map[ $attributes['justify'] ] ) ) {
                $css_rules[] = "{$selector} .ts-nav { justify-content: {$justify_map[ $attributes['justify'] ]}; }";
            }
            if ( ! empty( $attributes['justify_tablet'] ) && isset( $justify_map[ $attributes['justify_tablet'] ] ) ) {
                $tablet_rules[] = "{$selector} .ts-nav { justify-content: {$justify_map[ $attributes['justify_tablet'] ]}; }";
            }
            if ( ! empty( $attributes['justify_mobile'] ) && isset( $justify_map[ $attributes['justify_mobile'] ] ) ) {
                $mobile_rules[] = "{$selector} .ts-nav { justify-content: {$justify_map[ $attributes['justify_mobile'] ]}; }";
            }
        }

        // Vertical mode collapsible widths
        if ( ! empty( $attributes['orientation'] ) && $attributes['orientation'] === 'vertical' && ! empty( $attributes['collapsible'] ) ) {
            if ( isset( $attributes['collapsedWidth'] ) ) {
                $css_rules[] = "{$selector} .ts-nav-collapsed { width: {$attributes['collapsedWidth']}px; }";
            }
            if ( isset( $attributes['expandedWidth'] ) ) {
                $css_rules[] = "{$selector} .ts-nav-collapsed:hover { width: {$attributes['expandedWidth']}px; }";
                $css_rules[] = "{$selector} .ts-nav-collapsed.expanded { width: {$attributes['expandedWidth']}px; }";
            }
        }

        // ============================================
        // STYLE TAB - Menu Item (Normal State)
        // ============================================

        // Typography
        if ( ! empty( $attributes['typography'] ) ) {
            $typo = self::generate_typography_css( $attributes['typography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-item-link { {$typo} }";
            }
        }

        // Text color
        if ( ! empty( $attributes['linkColor'] ) ) {
            $css_rules[] = "{$selector} .ts-item-link { color: {$attributes['linkColor']}; }";
        }

        // Background color
        if ( ! empty( $attributes['linkBg'] ) ) {
            $css_rules[] = "{$selector} .ts-item-link { background-color: {$attributes['linkBg']}; }";
        }

        // Margin (responsive)
        if ( ! empty( $attributes['linkMargin'] ) ) {
            $margin = self::generate_dimensions_css( $attributes['linkMargin'], 'margin' );
            if ( $margin ) {
                $css_rules[] = "{$selector} .ts-item-link { {$margin} }";
            }
        }
        if ( ! empty( $attributes['linkMargin_tablet'] ) ) {
            $margin = self::generate_dimensions_css( $attributes['linkMargin_tablet'], 'margin' );
            if ( $margin ) {
                $tablet_rules[] = "{$selector} .ts-item-link { {$margin} }";
            }
        }
        if ( ! empty( $attributes['linkMargin_mobile'] ) ) {
            $margin = self::generate_dimensions_css( $attributes['linkMargin_mobile'], 'margin' );
            if ( $margin ) {
                $mobile_rules[] = "{$selector} .ts-item-link { {$margin} }";
            }
        }

        // Padding (responsive)
        if ( ! empty( $attributes['linkPadding'] ) ) {
            $padding = self::generate_dimensions_css( $attributes['linkPadding'], 'padding' );
            if ( $padding ) {
                $css_rules[] = "{$selector} .ts-item-link { {$padding} }";
            }
        }
        if ( ! empty( $attributes['linkPadding_tablet'] ) ) {
            $padding = self::generate_dimensions_css( $attributes['linkPadding_tablet'], 'padding' );
            if ( $padding ) {
                $tablet_rules[] = "{$selector} .ts-item-link { {$padding} }";
            }
        }
        if ( ! empty( $attributes['linkPadding_mobile'] ) ) {
            $padding = self::generate_dimensions_css( $attributes['linkPadding_mobile'], 'padding' );
            if ( $padding ) {
                $mobile_rules[] = "{$selector} .ts-item-link { {$padding} }";
            }
        }

        // Border (style, width, color)
        if ( ! empty( $attributes['linkBorderStyle'] ) && $attributes['linkBorderStyle'] !== 'default' ) {
            if ( $attributes['linkBorderStyle'] === 'none' ) {
                $css_rules[] = "{$selector} .ts-item-link { border: none; }";
            } else {
                $css_rules[] = "{$selector} .ts-item-link { border-style: {$attributes['linkBorderStyle']}; }";

                // Border width
                if ( ! empty( $attributes['linkBorderWidth'] ) ) {
                    $border_width = self::generate_dimensions_css( $attributes['linkBorderWidth'], 'border-width' );
                    if ( $border_width ) {
                        $css_rules[] = "{$selector} .ts-item-link { {$border_width} }";
                    }
                }

                // Border color
                if ( ! empty( $attributes['linkBorderColor'] ) ) {
                    $css_rules[] = "{$selector} .ts-item-link { border-color: {$attributes['linkBorderColor']}; }";
                }
            }
        }

        // Border radius (responsive)
        if ( isset( $attributes['linkBorderRadius'] ) ) {
            $css_rules[] = "{$selector} .ts-item-link { border-radius: {$attributes['linkBorderRadius']}px; }";
        }
        if ( isset( $attributes['linkBorderRadius_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-item-link { border-radius: {$attributes['linkBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['linkBorderRadius_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-item-link { border-radius: {$attributes['linkBorderRadius_mobile']}px; }";
        }

        // Item content gap (responsive)
        if ( isset( $attributes['linkGap'] ) ) {
            $css_rules[] = "{$selector} .ts-item-link { gap: {$attributes['linkGap']}px; }";
        }
        if ( isset( $attributes['linkGap_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-item-link { gap: {$attributes['linkGap_tablet']}px; }";
        }
        if ( isset( $attributes['linkGap_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-item-link { gap: {$attributes['linkGap_mobile']}px; }";
        }

        // ============================================
        // STYLE TAB - Menu Item (Hover State)
        // ============================================

        if ( ! empty( $attributes['linkColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-item-link:hover { color: {$attributes['linkColorHover']}; }";
        }

        if ( ! empty( $attributes['linkBgHover'] ) ) {
            $css_rules[] = "{$selector} .ts-item-link:hover { background-color: {$attributes['linkBgHover']}; }";
        }

        // ============================================
        // STYLE TAB - Menu Item (Active State)
        // ============================================

        if ( ! empty( $attributes['linkColorActive'] ) ) {
            $css_rules[] = "{$selector} .current-menu-item .ts-item-link { color: {$attributes['linkColorActive']}; }";
        }

        if ( ! empty( $attributes['linkBgActive'] ) ) {
            $css_rules[] = "{$selector} .current-menu-item .ts-item-link { background-color: {$attributes['linkBgActive']}; }";
        }

        // ============================================
        // STYLE TAB - Menu Item Icon
        // ============================================

        // Icon container size (responsive)
        if ( isset( $attributes['iconContainerSize'] ) ) {
            $css_rules[] = "{$selector} .ts-item-icon { width: {$attributes['iconContainerSize']}px; height: {$attributes['iconContainerSize']}px; }";
        }
        if ( isset( $attributes['iconContainerSize_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-item-icon { width: {$attributes['iconContainerSize_tablet']}px; height: {$attributes['iconContainerSize_tablet']}px; }";
        }
        if ( isset( $attributes['iconContainerSize_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-item-icon { width: {$attributes['iconContainerSize_mobile']}px; height: {$attributes['iconContainerSize_mobile']}px; }";
        }

        // Icon container border radius (responsive, uses %)
        if ( isset( $attributes['iconContainerRadius'] ) ) {
            $css_rules[] = "{$selector} .ts-item-icon { border-radius: {$attributes['iconContainerRadius']}%; }";
        }
        if ( isset( $attributes['iconContainerRadius_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-item-icon { border-radius: {$attributes['iconContainerRadius_tablet']}%; }";
        }
        if ( isset( $attributes['iconContainerRadius_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-item-icon { border-radius: {$attributes['iconContainerRadius_mobile']}%; }";
        }

        // Icon container background (normal/hover/active)
        if ( ! empty( $attributes['iconContainerBg'] ) ) {
            $css_rules[] = "{$selector} .ts-item-icon { background-color: {$attributes['iconContainerBg']}; }";
        }
        if ( ! empty( $attributes['iconContainerBgHover'] ) ) {
            $css_rules[] = "{$selector} .ts-item-link:hover .ts-item-icon { background-color: {$attributes['iconContainerBgHover']}; }";
        }
        if ( ! empty( $attributes['iconContainerBgActive'] ) ) {
            $css_rules[] = "{$selector} .current-menu-item .ts-item-icon { background-color: {$attributes['iconContainerBgActive']}; }";
        }

        // Icon size (responsive)
        if ( isset( $attributes['iconSize'] ) ) {
            $css_rules[] = "{$selector} .ts-item-icon i { font-size: {$attributes['iconSize']}px; }";
            $css_rules[] = "{$selector} .ts-item-icon svg { width: {$attributes['iconSize']}px; height: {$attributes['iconSize']}px; }";
        }
        if ( isset( $attributes['iconSize_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-item-icon i { font-size: {$attributes['iconSize_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-item-icon svg { width: {$attributes['iconSize_tablet']}px; height: {$attributes['iconSize_tablet']}px; }";
        }
        if ( isset( $attributes['iconSize_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-item-icon i { font-size: {$attributes['iconSize_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-item-icon svg { width: {$attributes['iconSize_mobile']}px; height: {$attributes['iconSize_mobile']}px; }";
        }

        // Icon color (normal/hover/active)
        if ( ! empty( $attributes['iconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-item-icon i { color: {$attributes['iconColor']}; }";
            $css_rules[] = "{$selector} .ts-item-icon svg { fill: {$attributes['iconColor']}; }";
        }
        if ( ! empty( $attributes['iconColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-item-link:hover .ts-item-icon i { color: {$attributes['iconColorHover']}; }";
            $css_rules[] = "{$selector} .ts-item-link:hover .ts-item-icon svg { fill: {$attributes['iconColorHover']}; }";
        }
        if ( ! empty( $attributes['iconColorActive'] ) ) {
            $css_rules[] = "{$selector} .current-menu-item .ts-item-icon i { color: {$attributes['iconColorActive']}; }";
            $css_rules[] = "{$selector} .current-menu-item .ts-item-icon svg { fill: {$attributes['iconColorActive']}; }";
        }

        // ============================================
        // STYLE TAB - Horizontal Scroll
        // ============================================

        if ( ! empty( $attributes['scrollBg'] ) ) {
            $css_rules[] = "{$selector} .min-scroll { background-color: {$attributes['scrollBg']}; }";
        }

        // ============================================
        // STYLE TAB - Chevron
        // ============================================

        if ( ! empty( $attributes['chevronColor'] ) ) {
            $css_rules[] = "{$selector} .ts-down-icon { border-top-color: {$attributes['chevronColor']}; }";
            $css_rules[] = "{$selector} .ts-right-icon { border-left-color: {$attributes['chevronColor']}; }";
        }

        // ============================================
        // STYLE TAB - Popups: Custom Style
        // Popups are portaled to document.body, scoped via popupScopeClass
        // Matches styles.ts popup section (lines 474-587)
        // ============================================

        if ( ! empty( $attributes['customPopupEnabled'] ) ) {
            $popup_selector = '.voxel-popup-navbar-' . $block_id;

            // Backdrop background color
            // Voxel dist/ selector: .ts-popup-root > div:after { background }
            if ( ! empty( $attributes['popupBackdropBackground'] ) ) {
                $css_rules[] = "{$popup_selector} .ts-popup-root > div::after { background-color: {$attributes['popupBackdropBackground']} !important; }";
            }

            // Backdrop pointer events
            if ( ! empty( $attributes['popupBackdropPointerEvents'] ) ) {
                $css_rules[] = "{$popup_selector} .ts-popup-root > div::after { pointer-events: all; }";
            }

            // Box shadow
            // Voxel dist/ selector: .ts-field-popup { box-shadow }
            if ( ! empty( $attributes['popupBoxShadow'] ) && is_array( $attributes['popupBoxShadow'] ) ) {
                $bs = $attributes['popupBoxShadow'];
                $inset = ( ! empty( $bs['position'] ) && $bs['position'] === 'inset' ) ? 'inset ' : '';
                $h      = isset( $bs['horizontal'] ) ? intval( $bs['horizontal'] ) : 0;
                $v      = isset( $bs['vertical'] ) ? intval( $bs['vertical'] ) : 0;
                $blur   = isset( $bs['blur'] ) ? intval( $bs['blur'] ) : 0;
                $spread = isset( $bs['spread'] ) ? intval( $bs['spread'] ) : 0;
                $color  = ! empty( $bs['color'] ) ? $bs['color'] : 'rgba(0,0,0,0.5)';
                $css_rules[] = "{$popup_selector} .ts-field-popup { box-shadow: {$inset}{$h}px {$v}px {$blur}px {$spread}px {$color}; }";
            }

            // Top/Bottom margin (responsive)
            // Voxel dist/ selector: .ts-field-popup-container { margin }
            if ( isset( $attributes['popupTopBottomMargin'] ) ) {
                $css_rules[] = "{$popup_selector} .ts-field-popup-container { margin: {$attributes['popupTopBottomMargin']}px 0; }";
            }
            if ( isset( $attributes['popupTopBottomMargin_tablet'] ) ) {
                $tablet_rules[] = "{$popup_selector} .ts-field-popup-container { margin: {$attributes['popupTopBottomMargin_tablet']}px 0; }";
            }
            if ( isset( $attributes['popupTopBottomMargin_mobile'] ) ) {
                $mobile_rules[] = "{$popup_selector} .ts-field-popup-container { margin: {$attributes['popupTopBottomMargin_mobile']}px 0; }";
            }

            // Min width (responsive)
            // Voxel dist/ selector: .ts-field-popup { min-width }
            if ( isset( $attributes['popupMinWidth'] ) ) {
                $css_rules[] = "{$popup_selector} .ts-field-popup { min-width: {$attributes['popupMinWidth']}px; }";
            }
            if ( isset( $attributes['popupMinWidth_tablet'] ) ) {
                $tablet_rules[] = "{$popup_selector} .ts-field-popup { min-width: {$attributes['popupMinWidth_tablet']}px; }";
            }
            if ( isset( $attributes['popupMinWidth_mobile'] ) ) {
                $mobile_rules[] = "{$popup_selector} .ts-field-popup { min-width: {$attributes['popupMinWidth_mobile']}px; }";
            }

            // Max width (responsive)
            // Voxel dist/ selector: .ts-field-popup { max-width }
            if ( isset( $attributes['popupMaxWidth'] ) ) {
                $css_rules[] = "{$popup_selector} .ts-field-popup { max-width: {$attributes['popupMaxWidth']}px; }";
            }
            if ( isset( $attributes['popupMaxWidth_tablet'] ) ) {
                $tablet_rules[] = "{$popup_selector} .ts-field-popup { max-width: {$attributes['popupMaxWidth_tablet']}px; }";
            }
            if ( isset( $attributes['popupMaxWidth_mobile'] ) ) {
                $mobile_rules[] = "{$popup_selector} .ts-field-popup { max-width: {$attributes['popupMaxWidth_mobile']}px; }";
            }

            // Max height (responsive)
            // Voxel dist/ selector: .ts-popup-content-wrapper { max-height }
            if ( isset( $attributes['popupMaxHeight'] ) ) {
                $css_rules[] = "{$popup_selector} .ts-popup-content-wrapper { max-height: {$attributes['popupMaxHeight']}px; }";
            }
            if ( isset( $attributes['popupMaxHeight_tablet'] ) ) {
                $tablet_rules[] = "{$popup_selector} .ts-popup-content-wrapper { max-height: {$attributes['popupMaxHeight_tablet']}px; }";
            }
            if ( isset( $attributes['popupMaxHeight_mobile'] ) ) {
                $mobile_rules[] = "{$popup_selector} .ts-popup-content-wrapper { max-height: {$attributes['popupMaxHeight_mobile']}px; }";
            }

            // Multi-column menu
            // Voxel dist/ selector: .ts-term-dropdown-list { grid-template-columns }
            if ( ! empty( $attributes['multiColumnMenu'] ) && ! empty( $attributes['menuColumns'] ) && intval( $attributes['menuColumns'] ) > 1 ) {
                $cols = intval( $attributes['menuColumns'] );
                $css_rules[] = "{$popup_selector} .ts-term-dropdown-list { display: grid; grid-template-columns: repeat({$cols}, minmax(0, 1fr)); }";
            }
        }

        // ============================================
        // COMBINE ALL RULES
        // ============================================
        $final_css = '';

        if ( ! empty( $css_rules ) ) {
            $final_css .= implode( "\n", $css_rules );
        }

        if ( ! empty( $tablet_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::TABLET_BREAKPOINT . "px) {\n" . implode( "\n", $tablet_rules ) . "\n}";
        }

        if ( ! empty( $mobile_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::MOBILE_BREAKPOINT . "px) {\n" . implode( "\n", $mobile_rules ) . "\n}";
        }

        return $final_css;
    }

    /**
     * Generate CSS for Userbar Block
     *
     * Handles user area items, icons, labels, avatar, unread indicators, chevron,
     * and per-item responsive visibility controls.
     *
     * @param array  $attributes Block attributes.
     * @param string $block_id   Block unique ID.
     * @return string Generated CSS.
     */
    public static function generate_userbar_css( $attributes, $block_id ) {
        if ( empty( $block_id ) ) {
            return '';
        }

        $selector = '.voxel-fse-userbar-' . $block_id;
        $css_rules = [];
        $tablet_rules = [];
        $mobile_rules = [];

        // Item gap
        if ( isset( $attributes['itemGap'] ) ) {
            $css_rules[] = "{$selector} > ul { grid-gap: {$attributes['itemGap']}px; }";
        }
        if ( isset( $attributes['itemGapTablet'] ) ) {
            $tablet_rules[] = "{$selector} > ul { grid-gap: {$attributes['itemGapTablet']}px; }";
        }
        if ( isset( $attributes['itemGapMobile'] ) ) {
            $mobile_rules[] = "{$selector} > ul { grid-gap: {$attributes['itemGapMobile']}px; }";
        }

        // Vertical orientation
        if ( ! empty( $attributes['verticalOrientation'] ) ) {
            $css_rules[] = "{$selector} > ul > li > a { flex-direction: column; }";
            if ( ! empty( $attributes['itemContentAlign'] ) ) {
                $css_rules[] = "{$selector} > ul > li > a { justify-content: {$attributes['itemContentAlign']}; }";
            }
        }
        if ( ! empty( $attributes['verticalOrientationTablet'] ) ) {
            $tablet_rules[] = "{$selector} > ul > li > a { flex-direction: column; }";
            if ( ! empty( $attributes['itemContentAlign'] ) ) {
                $tablet_rules[] = "{$selector} > ul > li > a { justify-content: {$attributes['itemContentAlign']}; }";
            }
        }
        if ( ! empty( $attributes['verticalOrientationMobile'] ) ) {
            $mobile_rules[] = "{$selector} > ul > li > a { flex-direction: column; }";
            if ( ! empty( $attributes['itemContentAlign'] ) ) {
                $mobile_rules[] = "{$selector} > ul > li > a { justify-content: {$attributes['itemContentAlign']}; }";
            }
        }

        // Item background
        if ( ! empty( $attributes['itemBackground'] ) ) {
            $css_rules[] = "{$selector} > ul > li > a { background-color: {$attributes['itemBackground']}; }";
        }
        if ( ! empty( $attributes['itemBackgroundHover'] ) ) {
            $css_rules[] = "{$selector} > ul > li > a:hover { background-color: {$attributes['itemBackgroundHover']}; }";
        }

        // Item margin & padding
        if ( ! empty( $attributes['itemMargin'] ) ) {
            $margin = self::generate_dimensions_css( $attributes['itemMargin'], 'margin' );
            if ( $margin ) {
                $css_rules[] = "{$selector} > ul > li > a { {$margin} }";
            }
        }
        if ( ! empty( $attributes['itemPadding'] ) ) {
            $padding = self::generate_dimensions_css( $attributes['itemPadding'], 'padding' );
            if ( $padding ) {
                $css_rules[] = "{$selector} > ul > li > a { {$padding} }";
            }
        }

        // Item box shadow
        if ( ! empty( $attributes['itemBoxShadow']['enable'] ) ) {
            $shadow = self::generate_box_shadow_css( $attributes['itemBoxShadow'] );
            if ( $shadow ) {
                $css_rules[] = "{$selector} > ul > li > a { box-shadow: {$shadow}; }";
            }
        }
        if ( ! empty( $attributes['itemBoxShadowHover']['enable'] ) ) {
            $shadow = self::generate_box_shadow_css( $attributes['itemBoxShadowHover'] );
            if ( $shadow ) {
                $css_rules[] = "{$selector} > ul > li > a:hover { box-shadow: {$shadow}; }";
            }
        }

        // Item border radius
        if ( isset( $attributes['itemBorderRadius'] ) ) {
            $css_rules[] = "{$selector} > ul > li > a { border-radius: {$attributes['itemBorderRadius']}px; }";
        }
        if ( isset( $attributes['itemBorderRadiusTablet'] ) ) {
            $tablet_rules[] = "{$selector} > ul > li > a { border-radius: {$attributes['itemBorderRadiusTablet']}px; }";
        }
        if ( isset( $attributes['itemBorderRadiusMobile'] ) ) {
            $mobile_rules[] = "{$selector} > ul > li > a { border-radius: {$attributes['itemBorderRadiusMobile']}px; }";
        }

        // Item content gap
        if ( isset( $attributes['itemContentGap'] ) ) {
            $css_rules[] = "{$selector} > ul > li > a { grid-gap: {$attributes['itemContentGap']}px; }";
        }
        if ( isset( $attributes['itemContentGapTablet'] ) ) {
            $tablet_rules[] = "{$selector} > ul > li > a { grid-gap: {$attributes['itemContentGapTablet']}px; }";
        }
        if ( isset( $attributes['itemContentGapMobile'] ) ) {
            $mobile_rules[] = "{$selector} > ul > li > a { grid-gap: {$attributes['itemContentGapMobile']}px; }";
        }

        // Icon container size
        if ( isset( $attributes['iconContainerSize'] ) ) {
            $css_rules[] = "{$selector} > ul > li > a .ts-comp-icon { width: {$attributes['iconContainerSize']}px; height: {$attributes['iconContainerSize']}px; }";
        }
        if ( isset( $attributes['iconContainerSizeTablet'] ) ) {
            $tablet_rules[] = "{$selector} > ul > li > a .ts-comp-icon { width: {$attributes['iconContainerSizeTablet']}px; height: {$attributes['iconContainerSizeTablet']}px; }";
        }
        if ( isset( $attributes['iconContainerSizeMobile'] ) ) {
            $mobile_rules[] = "{$selector} > ul > li > a .ts-comp-icon { width: {$attributes['iconContainerSizeMobile']}px; height: {$attributes['iconContainerSizeMobile']}px; }";
        }

        // Icon container border radius
        if ( isset( $attributes['iconContainerRadius'] ) ) {
            $css_rules[] = "{$selector} > ul > li > a .ts-comp-icon { border-radius: {$attributes['iconContainerRadius']}px; }";
        }
        if ( isset( $attributes['iconContainerRadiusTablet'] ) ) {
            $tablet_rules[] = "{$selector} > ul > li > a .ts-comp-icon { border-radius: {$attributes['iconContainerRadiusTablet']}px; }";
        }
        if ( isset( $attributes['iconContainerRadiusMobile'] ) ) {
            $mobile_rules[] = "{$selector} > ul > li > a .ts-comp-icon { border-radius: {$attributes['iconContainerRadiusMobile']}px; }";
        }

        // Icon container background
        if ( ! empty( $attributes['iconContainerBackground'] ) ) {
            $css_rules[] = "{$selector} > ul > li > a .ts-comp-icon { background-color: {$attributes['iconContainerBackground']}; }";
        }
        if ( ! empty( $attributes['iconContainerBackgroundHover'] ) ) {
            $css_rules[] = "{$selector} > ul > li > a:hover .ts-comp-icon { background-color: {$attributes['iconContainerBackgroundHover']}; }";
        }

        // Icon size & color (CSS variables)
        if ( isset( $attributes['iconSize'] ) ) {
            $css_rules[] = "{$selector} > ul > li > a .ts-comp-icon { --ts-icon-size: {$attributes['iconSize']}px; }";
        }
        if ( isset( $attributes['iconSizeTablet'] ) ) {
            $tablet_rules[] = "{$selector} > ul > li > a .ts-comp-icon { --ts-icon-size: {$attributes['iconSizeTablet']}px; }";
        }
        if ( isset( $attributes['iconSizeMobile'] ) ) {
            $mobile_rules[] = "{$selector} > ul > li > a .ts-comp-icon { --ts-icon-size: {$attributes['iconSizeMobile']}px; }";
        }

        // Icon color  must match Voxel's selector specificity:
        // .ts-user-area > ul > li > a .ts-comp-icon
        if ( ! empty( $attributes['iconColor'] ) ) {
            $css_rules[] = "{$selector} > ul > li > a .ts-comp-icon { --ts-icon-color: {$attributes['iconColor']}; }";
        }
        if ( ! empty( $attributes['iconColorHover'] ) ) {
            $css_rules[] = "{$selector} > ul > li > a:hover .ts-comp-icon { --ts-icon-color: {$attributes['iconColorHover']}; }";
        }

        // Unread indicator
        if ( ! empty( $attributes['unreadIndicatorColor'] ) ) {
            $css_rules[] = "{$selector} span.unread-indicator { background: {$attributes['unreadIndicatorColor']}; }";
        }
        if ( isset( $attributes['unreadIndicatorMargin'] ) ) {
            $css_rules[] = "{$selector} span.unread-indicator { top: {$attributes['unreadIndicatorMargin']}px; }";
        }
        if ( isset( $attributes['unreadIndicatorMarginTablet'] ) ) {
            $tablet_rules[] = "{$selector} span.unread-indicator { top: {$attributes['unreadIndicatorMarginTablet']}px; }";
        }
        if ( isset( $attributes['unreadIndicatorMarginMobile'] ) ) {
            $mobile_rules[] = "{$selector} span.unread-indicator { top: {$attributes['unreadIndicatorMarginMobile']}px; }";
        }
        if ( isset( $attributes['unreadIndicatorSize'] ) ) {
            $css_rules[] = "{$selector} span.unread-indicator { width: {$attributes['unreadIndicatorSize']}px; height: {$attributes['unreadIndicatorSize']}px; }";
        }
        if ( isset( $attributes['unreadIndicatorSizeTablet'] ) ) {
            $tablet_rules[] = "{$selector} span.unread-indicator { width: {$attributes['unreadIndicatorSizeTablet']}px; height: {$attributes['unreadIndicatorSizeTablet']}px; }";
        }
        if ( isset( $attributes['unreadIndicatorSizeMobile'] ) ) {
            $mobile_rules[] = "{$selector} span.unread-indicator { width: {$attributes['unreadIndicatorSizeMobile']}px; height: {$attributes['unreadIndicatorSizeMobile']}px; }";
        }

        // Avatar
        if ( isset( $attributes['avatarSize'] ) ) {
            $css_rules[] = "{$selector} > ul > li.ts-user-area-avatar img { width: {$attributes['avatarSize']}px; height: {$attributes['avatarSize']}px; }";
        }
        if ( isset( $attributes['avatarSizeTablet'] ) ) {
            $tablet_rules[] = "{$selector} > ul > li.ts-user-area-avatar img { width: {$attributes['avatarSizeTablet']}px; height: {$attributes['avatarSizeTablet']}px; }";
        }
        if ( isset( $attributes['avatarSizeMobile'] ) ) {
            $mobile_rules[] = "{$selector} > ul > li.ts-user-area-avatar img { width: {$attributes['avatarSizeMobile']}px; height: {$attributes['avatarSizeMobile']}px; }";
        }
        if ( isset( $attributes['avatarRadius'] ) ) {
            $css_rules[] = "{$selector} > ul > li.ts-user-area-avatar img { border-radius: {$attributes['avatarRadius']}%; }";
        }
        if ( isset( $attributes['avatarRadiusTablet'] ) ) {
            $tablet_rules[] = "{$selector} > ul > li.ts-user-area-avatar img { border-radius: {$attributes['avatarRadiusTablet']}%; }";
        }
        if ( isset( $attributes['avatarRadiusMobile'] ) ) {
            $mobile_rules[] = "{$selector} > ul > li.ts-user-area-avatar img { border-radius: {$attributes['avatarRadiusMobile']}%; }";
        }

        // Per-item responsive visibility
        if ( ! empty( $attributes['items'] ) && is_array( $attributes['items'] ) ) {
            foreach ( $attributes['items'] as $item ) {
                if ( empty( $item['_id'] ) ) {
                    continue;
                }
                $item_selector = "{$selector} .elementor-repeater-item-{$item['_id']}";

                // Label visibility
                // Voxel base CSS defaults .ts_comp_label to display:none, so we must
                // always emit the desktop rule when labelVisibility is enabled.
                if ( ! empty( $item['labelVisibility'] ) ) {
                    $desktop_display = ! empty( $item['labelVisibilityDesktop'] ) ? $item['labelVisibilityDesktop'] : 'flex';
                    $css_rules[] = "{$item_selector} .ts_comp_label { display: {$desktop_display}; }";

                    if ( ! empty( $item['labelVisibilityTablet'] ) && $item['labelVisibilityTablet'] === 'none' ) {
                        $tablet_rules[] = "{$item_selector} .ts_comp_label { display: none; }";
                    } elseif ( ! empty( $item['labelVisibilityTablet'] ) && $item['labelVisibilityTablet'] === 'flex' ) {
                        $tablet_rules[] = "{$item_selector} .ts_comp_label { display: flex; }";
                    }
                    if ( ! empty( $item['labelVisibilityMobile'] ) && $item['labelVisibilityMobile'] === 'none' ) {
                        $mobile_rules[] = "{$item_selector} .ts_comp_label { display: none; }";
                    } elseif ( ! empty( $item['labelVisibilityMobile'] ) && $item['labelVisibilityMobile'] === 'flex' ) {
                        $mobile_rules[] = "{$item_selector} .ts_comp_label { display: flex; }";
                    }
                }

                // Component visibility
                if ( ! empty( $item['componentVisibility'] ) ) {
                    if ( ! empty( $item['userBarVisibilityDesktop'] ) && $item['userBarVisibilityDesktop'] === 'none' ) {
                        $css_rules[] = "{$item_selector} { display: none !important; }";
                    }
                    if ( ! empty( $item['userBarVisibilityTablet'] ) && $item['userBarVisibilityTablet'] === 'none' ) {
                        $tablet_rules[] = "{$item_selector} { display: none !important; }";
                    } elseif ( ! empty( $item['userBarVisibilityTablet'] ) && $item['userBarVisibilityTablet'] === 'flex' ) {
                        $tablet_rules[] = "{$item_selector} { display: flex !important; }";
                    }
                    if ( ! empty( $item['userBarVisibilityMobile'] ) && $item['userBarVisibilityMobile'] === 'none' ) {
                        $mobile_rules[] = "{$item_selector} { display: none !important; }";
                    } elseif ( ! empty( $item['userBarVisibilityMobile'] ) && $item['userBarVisibilityMobile'] === 'flex' ) {
                        $mobile_rules[] = "{$item_selector} { display: flex !important; }";
                    }
                }
            }
        }

        // Label typography & color
        if ( ! empty( $attributes['labelTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['labelTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts_comp_label { {$typo} }";
            }
        }
        if ( ! empty( $attributes['labelColor'] ) ) {
            $css_rules[] = "{$selector} .ts_comp_label { color: {$attributes['labelColor']}; }";
        }
        if ( ! empty( $attributes['labelColorHover'] ) ) {
            $css_rules[] = "{$selector} > ul > li > a:hover .ts_comp_label { color: {$attributes['labelColorHover']}; }";
        }

        // Chevron
        if ( ! empty( $attributes['chevronColor'] ) ) {
            $css_rules[] = "{$selector} .ts-down-icon { border-color: {$attributes['chevronColor']}; }";
        }
        if ( ! empty( $attributes['chevronColorHover'] ) ) {
            $css_rules[] = "{$selector} > ul > li > a:hover .ts-down-icon { border-color: {$attributes['chevronColorHover']}; }";
        }
        if ( ! empty( $attributes['hideChevron'] ) ) {
            $css_rules[] = "{$selector} .ts-down-icon { display: none !important; }";
        }

        // Popup custom style (portaled to document.body, target via popup scope class)
        if ( ! empty( $attributes['customPopupEnable'] ) ) {
            $popup_selector = '.voxel-popup-userbar-' . $block_id;

            // Popup backdrop color - user-bar.php:1036
            if ( ! empty( $attributes['popupBackdropColor'] ) ) {
                $css_rules[] = "{$popup_selector} .ts-popup-root > div::after { background-color: {$attributes['popupBackdropColor']} !important; }";
            }

            // Popup backdrop pointer events - user-bar.php:1049
            if ( ! empty( $attributes['popupPointerEvents'] ) ) {
                $css_rules[] = "{$popup_selector} .ts-popup-root > div::after { pointer-events: all; }";
            }

            // Popup box shadow - user-bar.php:1059-1066
            if ( ! empty( $attributes['popupBoxShadow']['enable'] ) ) {
                $shadow = self::generate_box_shadow_css( $attributes['popupBoxShadow'] );
                if ( $shadow ) {
                    $css_rules[] = "{$popup_selector} .ts-field-popup { box-shadow: {$shadow}; }";
                }
            }

            // Popup top/bottom margin - user-bar.php:1077
            if ( isset( $attributes['popupTopMargin'] ) && $attributes['popupTopMargin'] !== 0 ) {
                $css_rules[] = "{$popup_selector} .ts-field-popup-container { margin: {$attributes['popupTopMargin']}px 0; }";
            }
            if ( isset( $attributes['popupTopMargin_tablet'] ) ) {
                $tablet_rules[] = "{$popup_selector} .ts-field-popup-container { margin: {$attributes['popupTopMargin_tablet']}px 0; }";
            }
            if ( isset( $attributes['popupTopMargin_mobile'] ) ) {
                $mobile_rules[] = "{$popup_selector} .ts-field-popup-container { margin: {$attributes['popupTopMargin_mobile']}px 0; }";
            }

            // Popup max height - user-bar.php:1098
            if ( isset( $attributes['popupMaxHeight'] ) && $attributes['popupMaxHeight'] !== 0 ) {
                $css_rules[] = "{$popup_selector} .ts-popup-content-wrapper { max-height: {$attributes['popupMaxHeight']}px; }";
            }
            if ( isset( $attributes['popupMaxHeight_tablet'] ) ) {
                $tablet_rules[] = "{$popup_selector} .ts-popup-content-wrapper { max-height: {$attributes['popupMaxHeight_tablet']}px; }";
            }
            if ( isset( $attributes['popupMaxHeight_mobile'] ) ) {
                $mobile_rules[] = "{$popup_selector} .ts-popup-content-wrapper { max-height: {$attributes['popupMaxHeight_mobile']}px; }";
            }
        }

        // Combine all rules
        $final_css = '';
        if ( ! empty( $css_rules ) ) {
            $final_css .= implode( "\n", $css_rules );
        }
        if ( ! empty( $tablet_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::TABLET_BREAKPOINT . "px) {\n" . implode( "\n", $tablet_rules ) . "\n}";
        }
        if ( ! empty( $mobile_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::MOBILE_BREAKPOINT . "px) {\n" . implode( "\n", $mobile_rules ) . "\n}";
        }

        return $final_css;
    }

    /**
     * Generate typography CSS string
     *
     * @param array $typography Typography settings.
     * @return string CSS properties.
     */
    private static function generate_typography_css( $typography ) {
        if ( empty( $typography ) || ! is_array( $typography ) ) {
            return '';
        }

        $props = [];

        if ( ! empty( $typography['fontFamily'] ) ) {
            $props[] = "font-family: {$typography['fontFamily']}";
        }
        if ( isset( $typography['fontSize'] ) && $typography['fontSize'] !== '' ) {
            $unit = $typography['fontSizeUnit'] ?? 'px';
            $props[] = "font-size: {$typography['fontSize']}{$unit}";
        }
        if ( ! empty( $typography['fontWeight'] ) ) {
            $props[] = "font-weight: {$typography['fontWeight']}";
        }
        if ( ! empty( $typography['fontStyle'] ) ) {
            $props[] = "font-style: {$typography['fontStyle']}";
        }
        if ( ! empty( $typography['textTransform'] ) ) {
            $props[] = "text-transform: {$typography['textTransform']}";
        }
        if ( ! empty( $typography['textDecoration'] ) ) {
            $props[] = "text-decoration: {$typography['textDecoration']}";
        }
        if ( isset( $typography['lineHeight'] ) && $typography['lineHeight'] !== '' ) {
            $unit = $typography['lineHeightUnit'] ?? '';
            $props[] = "line-height: {$typography['lineHeight']}{$unit}";
        }
        if ( isset( $typography['letterSpacing'] ) && $typography['letterSpacing'] !== '' ) {
            $unit = $typography['letterSpacingUnit'] ?? 'px';
            $props[] = "letter-spacing: {$typography['letterSpacing']}{$unit}";
        }
        if ( isset( $typography['wordSpacing'] ) && $typography['wordSpacing'] !== '' ) {
            $unit = $typography['wordSpacingUnit'] ?? 'px';
            $props[] = "word-spacing: {$typography['wordSpacing']}{$unit}";
        }

        return implode( '; ', $props );
    }

    /**
     * Generate dimensions CSS (padding/margin)
     *
     * @param array  $dimensions Dimensions values.
     * @param string $property   CSS property (padding/margin).
     * @return string CSS declaration.
     */
    private static function generate_dimensions_css( $dimensions, $property ) {
        if ( empty( $dimensions ) || ! is_array( $dimensions ) ) {
            return '';
        }

        // Helper: Format value - add unit only if not already present
        $format_value = function( $value, $default_unit ) {
            if ( $value === '' || $value === null ) {
                return null;
            }

            // If value already contains a unit (e.g., "3px"), return as-is
            if ( preg_match( '/^[\d.]+(?:px|%|em|rem|vw|vh)$/', $value ) ) {
                return $value;
            }

            // If value is just a number, add the default unit
            if ( is_numeric( $value ) ) {
                return $value . $default_unit;
            }

            // Fallback: return as-is
            return $value;
        };

        $unit = $dimensions['unit'] ?? 'px';
        $props = [];

        if ( isset( $dimensions['top'] ) && $dimensions['top'] !== '' ) {
            $formatted = $format_value( $dimensions['top'], $unit );
            if ( $formatted !== null ) {
                $props[] = "{$property}-top: {$formatted}";
            }
        }
        if ( isset( $dimensions['right'] ) && $dimensions['right'] !== '' ) {
            $formatted = $format_value( $dimensions['right'], $unit );
            if ( $formatted !== null ) {
                $props[] = "{$property}-right: {$formatted}";
            }
        }
        if ( isset( $dimensions['bottom'] ) && $dimensions['bottom'] !== '' ) {
            $formatted = $format_value( $dimensions['bottom'], $unit );
            if ( $formatted !== null ) {
                $props[] = "{$property}-bottom: {$formatted}";
            }
        }
        if ( isset( $dimensions['left'] ) && $dimensions['left'] !== '' ) {
            $formatted = $format_value( $dimensions['left'], $unit );
            if ( $formatted !== null ) {
                $props[] = "{$property}-left: {$formatted}";
            }
        }

        return implode( '; ', $props );
    }

    /**
     * Generate border CSS
     *
     * Handles TWO formats:
     * 1. OLD BorderControl format: { width: 1, style: 'solid', color: '#000' }
     * 2. NEW BorderGroupControl format: { borderType: 'solid', borderWidth: {...}, borderColor: '#000' }
     *
     * @param array $border Border settings.
     * @return string Border CSS value (e.g., "1px solid #000").
     */
    private static function generate_border_css( $border ) {
        if ( empty( $border ) || ! is_array( $border ) ) {
            return '';
        }

        // Detect which format we have
        $is_border_group = isset( $border['borderType'] ) || isset( $border['borderWidth'] ) || isset( $border['borderColor'] );

        if ( $is_border_group ) {
            // NEW BorderGroupControl format
            $type = $border['borderType'] ?? '';

            // If borderType is 'none' or empty string (default), return empty
            if ( empty( $type ) || $type === 'none' || $type === '' ) {
                return '';
            }

            // Extract width from borderWidth dimensions (use top value or average)
            $width = '1'; // Default
            if ( ! empty( $border['borderWidth'] ) && is_array( $border['borderWidth'] ) ) {
                $dims = $border['borderWidth'];
                // Use top value, stripping any existing units
                if ( isset( $dims['top'] ) ) {
                    $width = preg_replace( '/[^0-9.]/', '', $dims['top'] );
                } elseif ( isset( $dims['left'] ) ) {
                    $width = preg_replace( '/[^0-9.]/', '', $dims['left'] );
                }
            }

            // Use borderColor if set, otherwise don't generate border CSS at all
            // (this prevents the hardcoded #000 fallback issue)
            if ( empty( $border['borderColor'] ) ) {
                return '';
            }

            $color = $border['borderColor'];

            return "{$width}px {$type} {$color}";
        } else {
            // OLD BorderControl format
            $width = $border['width'] ?? '1';
            $style = $border['style'] ?? 'solid';
            $color = $border['color'] ?? '#000';

            return "{$width}px {$style} {$color}";
        }
    }

    /**
     * Generate box shadow CSS
     *
     * @param array $shadow Box shadow settings.
     * @return string Box shadow CSS value.
     */
    private static function generate_box_shadow_css( $shadow ) {
        if ( empty( $shadow ) || ! is_array( $shadow ) ) {
            return '';
        }

        $horizontal = $shadow['horizontal'] ?? 0;
        $vertical = $shadow['vertical'] ?? 0;
        $blur = $shadow['blur'] ?? 0;
        $spread = $shadow['spread'] ?? 0;
        $color = $shadow['color'] ?? 'rgba(0,0,0,0.5)';
        $position = ! empty( $shadow['position'] ) && $shadow['position'] === 'inset' ? 'inset ' : '';

        return "{$position}{$horizontal}px {$vertical}px {$blur}px {$spread}px {$color}";
    }

    /**
     * Generate background CSS for a named prefix
     *
     * @param array  $attributes Block attributes.
     * @param string $prefix     Attribute prefix (e.g. 'responder1', 'responder2', 'error').
     * @return string|null CSS background declaration or null.
     */
    private static function generate_background_css( $attributes, $prefix ) {
        $bg_color = $attributes[ $prefix . 'BgColor' ] ?? ( $attributes[ $prefix . 'Background' ] ?? null );
        if ( ! empty( $bg_color ) ) {
            return "background-color: {$bg_color};";
        }
        return null;
    }

    /**
     * Generate CSS for Messages Block
     *
     * @param array  $attributes Block attributes
     * @param string $block_id   Unique block ID
     * @return string Generated CSS
     */
    public static function generate_messages_css( $attributes, $block_id ) {
        if ( empty( $block_id ) ) {
            return '';
        }

        $selector = '.voxel-fse-messages-' . $block_id;
        $css_rules = [];
        $tablet_rules = [];
        $mobile_rules = [];

        // ============================================
        // 1. GENERAL
        // ============================================

        // Height
        if ( isset( $attributes['generalHeight'] ) && $attributes['generalHeight'] !== '' ) {
            $unit = $attributes['generalHeightUnit'] ?? 'px';
            $css_rules[] = "{$selector} { height: {$attributes['generalHeight']}{$unit}; }";
        }
        if ( isset( $attributes['generalHeightTablet'] ) && $attributes['generalHeightTablet'] !== '' ) {
            $unit = $attributes['generalHeightUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} { height: {$attributes['generalHeightTablet']}{$unit}; }";
        }
        if ( isset( $attributes['generalHeightMobile'] ) && $attributes['generalHeightMobile'] !== '' ) {
            $unit = $attributes['generalHeightUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} { height: {$attributes['generalHeightMobile']}{$unit}; }";
        }

        // Calculated height
        if ( ! empty( $attributes['enableCalcHeight'] ) && ! empty( $attributes['calcHeight'] ) ) {
            $css_rules[] = "{$selector} { height: {$attributes['calcHeight']}; }";
        }

        // Background color
        if ( ! empty( $attributes['generalBackground'] ) ) {
            $css_rules[] = "{$selector} { background-color: {$attributes['generalBackground']}; }";
        }

        // Border
        $border_css = self::generate_border_css(
            $attributes['generalBorderType'] ?? null,
            $attributes['generalBorderWidth'] ?? null,
            $attributes['generalBorderColor'] ?? null
        );
        if ( $border_css ) {
            $css_rules[] = "{$selector} { {$border_css} }";
        }

        // Border radius
        if ( isset( $attributes['generalBorderRadius'] ) && $attributes['generalBorderRadius'] !== '' ) {
            $css_rules[] = "{$selector} { border-radius: {$attributes['generalBorderRadius']}px; }";
        }

        // Box shadow
        if ( ! empty( $attributes['generalBoxShadow'] ) && ! empty( $attributes['generalBoxShadow']['enable'] ) ) {
            $shadow = self::generate_box_shadow_css( $attributes['generalBoxShadow'] );
            if ( $shadow ) {
                $css_rules[] = "{$selector} { box-shadow: {$shadow}; }";
            }
        }

        // Sidebar width
        if ( isset( $attributes['sidebarWidth'] ) && $attributes['sidebarWidth'] !== '' ) {
            $css_rules[] = "{$selector} .message-list-container { width: {$attributes['sidebarWidth']}px; }";
        }

        // Separator color
        if ( ! empty( $attributes['separatorColor'] ) ) {
            $css_rules[] = "{$selector} .separator { background-color: {$attributes['separatorColor']}; }";
        }

        // Scrollbar color
        if ( ! empty( $attributes['scrollbarColor'] ) ) {
            $css_rules[] = "{$selector} .message-list::-webkit-scrollbar-thumb { background-color: {$attributes['scrollbarColor']}; }";
            $css_rules[] = "{$selector} .conversation-body::-webkit-scrollbar-thumb { background-color: {$attributes['scrollbarColor']}; }";
        }

        // ============================================
        // 2. INBOX: MESSAGE
        // ============================================

        // Padding
        if ( ! empty( $attributes['inboxMessagePadding'] ) ) {
            $padding = self::generate_dimensions_css( $attributes['inboxMessagePadding'], 'padding' );
            if ( $padding ) {
                $css_rules[] = "{$selector} .ts-convo-list > li > a { {$padding} }";
            }
        }

        // Content gap
        if ( isset( $attributes['inboxMessageContentGap'] ) && $attributes['inboxMessageContentGap'] !== '' ) {
            $css_rules[] = "{$selector} .ts-convo-list > li > a { gap: {$attributes['inboxMessageContentGap']}px; }";
        }

        // Title color
        if ( ! empty( $attributes['inboxMessageTitleColor'] ) ) {
            $css_rules[] = "{$selector} .ts-convo-list .message-details > b { color: {$attributes['inboxMessageTitleColor']}; }";
        }

        // Title typography
        if ( ! empty( $attributes['inboxMessageTitleTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['inboxMessageTitleTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-convo-list .message-details > b { {$typo} }";
            }
        }

        // Subtitle color
        if ( ! empty( $attributes['inboxMessageSubtitleColor'] ) ) {
            $css_rules[] = "{$selector} .ts-convo-list .message-details > span { color: {$attributes['inboxMessageSubtitleColor']}; }";
        }

        // Subtitle typography
        if ( ! empty( $attributes['inboxMessageSubtitleTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['inboxMessageSubtitleTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-convo-list .message-details > span { {$typo} }";
            }
        }

        // Avatar size
        if ( isset( $attributes['inboxMessageAvatarSize'] ) && $attributes['inboxMessageAvatarSize'] !== '' ) {
            $unit = $attributes['inboxMessageAvatarSizeUnit'] ?? 'px';
            $css_rules[] = "{$selector} .ts-convo-list .convo-avatar { width: {$attributes['inboxMessageAvatarSize']}{$unit}; height: {$attributes['inboxMessageAvatarSize']}{$unit}; }";
        }
        if ( isset( $attributes['inboxMessageAvatarSize_tablet'] ) && $attributes['inboxMessageAvatarSize_tablet'] !== '' ) {
            $unit = $attributes['inboxMessageAvatarSizeUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .ts-convo-list .convo-avatar { width: {$attributes['inboxMessageAvatarSize_tablet']}{$unit}; height: {$attributes['inboxMessageAvatarSize_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['inboxMessageAvatarSize_mobile'] ) && $attributes['inboxMessageAvatarSize_mobile'] !== '' ) {
            $unit = $attributes['inboxMessageAvatarSizeUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .ts-convo-list .convo-avatar { width: {$attributes['inboxMessageAvatarSize_mobile']}{$unit}; height: {$attributes['inboxMessageAvatarSize_mobile']}{$unit}; }";
        }

        // Avatar gap
        if ( isset( $attributes['inboxMessageAvatarGap'] ) && $attributes['inboxMessageAvatarGap'] !== '' ) {
            $unit = $attributes['inboxMessageAvatarGapUnit'] ?? 'px';
            $css_rules[] = "{$selector} .ts-convo-list > li > a { column-gap: {$attributes['inboxMessageAvatarGap']}{$unit}; }";
        }
        if ( isset( $attributes['inboxMessageAvatarGap_tablet'] ) && $attributes['inboxMessageAvatarGap_tablet'] !== '' ) {
            $unit = $attributes['inboxMessageAvatarGapUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .ts-convo-list > li > a { column-gap: {$attributes['inboxMessageAvatarGap_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['inboxMessageAvatarGap_mobile'] ) && $attributes['inboxMessageAvatarGap_mobile'] !== '' ) {
            $unit = $attributes['inboxMessageAvatarGapUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .ts-convo-list > li > a { column-gap: {$attributes['inboxMessageAvatarGap_mobile']}{$unit}; }";
        }

        // Secondary logo size
        if ( isset( $attributes['inboxMessageSecondaryLogoSize'] ) && $attributes['inboxMessageSecondaryLogoSize'] !== '' ) {
            $unit = $attributes['inboxMessageSecondaryLogoSizeUnit'] ?? 'px';
            $css_rules[] = "{$selector} .ts-convo-list .post-avatar { width: {$attributes['inboxMessageSecondaryLogoSize']}{$unit}; height: {$attributes['inboxMessageSecondaryLogoSize']}{$unit}; }";
        }
        if ( isset( $attributes['inboxMessageSecondaryLogoSize_tablet'] ) && $attributes['inboxMessageSecondaryLogoSize_tablet'] !== '' ) {
            $unit = $attributes['inboxMessageSecondaryLogoSizeUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .ts-convo-list .post-avatar { width: {$attributes['inboxMessageSecondaryLogoSize_tablet']}{$unit}; height: {$attributes['inboxMessageSecondaryLogoSize_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['inboxMessageSecondaryLogoSize_mobile'] ) && $attributes['inboxMessageSecondaryLogoSize_mobile'] !== '' ) {
            $unit = $attributes['inboxMessageSecondaryLogoSizeUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .ts-convo-list .post-avatar { width: {$attributes['inboxMessageSecondaryLogoSize_mobile']}{$unit}; height: {$attributes['inboxMessageSecondaryLogoSize_mobile']}{$unit}; }";
        }

        // Secondary logo border
        if ( ! empty( $attributes['inboxMessageSecondaryLogoBorder'] ) ) {
            $border = self::generate_border_css(
                $attributes['inboxMessageSecondaryLogoBorder']['borderType'] ?? null,
                $attributes['inboxMessageSecondaryLogoBorder']['borderWidth'] ?? null,
                $attributes['inboxMessageSecondaryLogoBorder']['borderColor'] ?? null
            );
            if ( $border ) {
                $css_rules[] = "{$selector} .ts-convo-list .post-avatar { {$border} }";
            }
        }

        // Hover state
        if ( ! empty( $attributes['inboxMessageHoverBg'] ) ) {
            $css_rules[] = "{$selector} .ts-convo-list > li > a:hover { background-color: {$attributes['inboxMessageHoverBg']}; }";
        }
        if ( ! empty( $attributes['inboxMessageHoverTitleColor'] ) ) {
            $css_rules[] = "{$selector} .ts-convo-list > li > a:hover .message-details > b { color: {$attributes['inboxMessageHoverTitleColor']}; }";
        }
        if ( ! empty( $attributes['inboxMessageHoverSubtitleColor'] ) ) {
            $css_rules[] = "{$selector} .ts-convo-list > li > a:hover .message-details > span { color: {$attributes['inboxMessageHoverSubtitleColor']}; }";
        }

        // Active state
        if ( ! empty( $attributes['inboxMessageActiveBg'] ) ) {
            $css_rules[] = "{$selector} .ts-convo-list > li.ts-active-chat > a { background-color: {$attributes['inboxMessageActiveBg']}; }";
        }
        if ( isset( $attributes['inboxMessageActiveBorderWidth'] ) && $attributes['inboxMessageActiveBorderWidth'] !== '' ) {
            $unit = $attributes['inboxMessageActiveBorderWidthUnit'] ?? 'px';
            $css_rules[] = "{$selector} .ts-convo-list > li.ts-active-chat > a { border-left-width: {$attributes['inboxMessageActiveBorderWidth']}{$unit}; border-left-style: solid; }";
        }
        if ( isset( $attributes['inboxMessageActiveBorderWidth_tablet'] ) && $attributes['inboxMessageActiveBorderWidth_tablet'] !== '' ) {
            $unit = $attributes['inboxMessageActiveBorderWidthUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .ts-convo-list > li.ts-active-chat > a { border-left-width: {$attributes['inboxMessageActiveBorderWidth_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['inboxMessageActiveBorderWidth_mobile'] ) && $attributes['inboxMessageActiveBorderWidth_mobile'] !== '' ) {
            $unit = $attributes['inboxMessageActiveBorderWidthUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .ts-convo-list > li.ts-active-chat > a { border-left-width: {$attributes['inboxMessageActiveBorderWidth_mobile']}{$unit}; }";
        }
        if ( ! empty( $attributes['inboxMessageActiveBorderColor'] ) ) {
            $css_rules[] = "{$selector} .ts-convo-list > li.ts-active-chat > a { border-left-color: {$attributes['inboxMessageActiveBorderColor']}; }";
        }
        if ( ! empty( $attributes['inboxMessageActiveTitleColor'] ) ) {
            $css_rules[] = "{$selector} .ts-convo-list > li.ts-active-chat .message-details > b { color: {$attributes['inboxMessageActiveTitleColor']}; }";
        }
        if ( ! empty( $attributes['inboxMessageActiveSubtitleColor'] ) ) {
            $css_rules[] = "{$selector} .ts-convo-list > li.ts-active-chat .message-details > span { color: {$attributes['inboxMessageActiveSubtitleColor']}; }";
        }

        // Unread state
        if ( ! empty( $attributes['inboxMessageUnreadTitleTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['inboxMessageUnreadTitleTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-convo-list > li.ts-unread-message .message-details > b { {$typo} }";
            }
        }

        // New state - avatar border
        if ( ! empty( $attributes['inboxMessageNewAvatarBorder'] ) ) {
            $border = self::generate_border_css(
                $attributes['inboxMessageNewAvatarBorder']['borderType'] ?? null,
                $attributes['inboxMessageNewAvatarBorder']['borderWidth'] ?? null,
                $attributes['inboxMessageNewAvatarBorder']['borderColor'] ?? null
            );
            if ( $border ) {
                $css_rules[] = "{$selector} .ts-convo-list > li.ts-new-message .convo-avatar { {$border} }";
            }
        }

        // ============================================
        // 3. INBOX: SEARCH
        // ============================================

        if ( ! empty( $attributes['inboxSearchTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['inboxSearchTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .inbox-search input { {$typo} }";
            }
        }
        if ( ! empty( $attributes['inboxSearchValueColor'] ) ) {
            $css_rules[] = "{$selector} .inbox-search input { color: {$attributes['inboxSearchValueColor']}; }";
        }
        if ( ! empty( $attributes['inboxSearchPlaceholderColor'] ) ) {
            $css_rules[] = "{$selector} .inbox-search input::placeholder { color: {$attributes['inboxSearchPlaceholderColor']}; }";
        }
        if ( ! empty( $attributes['inboxSearchIconColor'] ) ) {
            $css_rules[] = "{$selector} .inbox-search .search-icon { color: {$attributes['inboxSearchIconColor']}; }";
        }
        if ( isset( $attributes['inboxSearchIconSize'] ) && $attributes['inboxSearchIconSize'] !== '' ) {
            $unit = $attributes['inboxSearchIconSizeUnit'] ?? 'px';
            $css_rules[] = "{$selector} .inbox-search .search-icon { font-size: {$attributes['inboxSearchIconSize']}{$unit}; }";
        }
        if ( isset( $attributes['inboxSearchIconSize_tablet'] ) && $attributes['inboxSearchIconSize_tablet'] !== '' ) {
            $unit = $attributes['inboxSearchIconSizeUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .inbox-search .search-icon { font-size: {$attributes['inboxSearchIconSize_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['inboxSearchIconSize_mobile'] ) && $attributes['inboxSearchIconSize_mobile'] !== '' ) {
            $unit = $attributes['inboxSearchIconSizeUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .inbox-search .search-icon { font-size: {$attributes['inboxSearchIconSize_mobile']}{$unit}; }";
        }

        // ============================================
        // 4. CONVERSATION: TOP
        // ============================================

        if ( isset( $attributes['conversationTopAvatarRadius'] ) && $attributes['conversationTopAvatarRadius'] !== '' ) {
            $unit = $attributes['conversationTopAvatarRadiusUnit'] ?? 'px';
            $css_rules[] = "{$selector} .conversation-top .avatar { border-radius: {$attributes['conversationTopAvatarRadius']}{$unit}; }";
        }
        if ( isset( $attributes['conversationTopAvatarRadius_tablet'] ) && $attributes['conversationTopAvatarRadius_tablet'] !== '' ) {
            $unit = $attributes['conversationTopAvatarRadiusUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .conversation-top .avatar { border-radius: {$attributes['conversationTopAvatarRadius_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['conversationTopAvatarRadius_mobile'] ) && $attributes['conversationTopAvatarRadius_mobile'] !== '' ) {
            $unit = $attributes['conversationTopAvatarRadiusUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .conversation-top .avatar { border-radius: {$attributes['conversationTopAvatarRadius_mobile']}{$unit}; }";
        }
        if ( isset( $attributes['conversationTopAvatarGap'] ) && $attributes['conversationTopAvatarGap'] !== '' ) {
            $unit = $attributes['conversationTopAvatarGapUnit'] ?? 'px';
            $css_rules[] = "{$selector} .conversation-top { gap: {$attributes['conversationTopAvatarGap']}{$unit}; }";
        }
        if ( isset( $attributes['conversationTopAvatarGap_tablet'] ) && $attributes['conversationTopAvatarGap_tablet'] !== '' ) {
            $unit = $attributes['conversationTopAvatarGapUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .conversation-top { gap: {$attributes['conversationTopAvatarGap_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['conversationTopAvatarGap_mobile'] ) && $attributes['conversationTopAvatarGap_mobile'] !== '' ) {
            $unit = $attributes['conversationTopAvatarGapUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .conversation-top { gap: {$attributes['conversationTopAvatarGap_mobile']}{$unit}; }";
        }
        if ( ! empty( $attributes['conversationTopTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['conversationTopTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .conversation-top .name { {$typo} }";
            }
        }
        if ( ! empty( $attributes['conversationTopTextColor'] ) ) {
            $css_rules[] = "{$selector} .conversation-top .name { color: {$attributes['conversationTopTextColor']}; }";
        }

        // ============================================
        // 5. CONVERSATION: INTRO
        // ============================================

        if ( isset( $attributes['conversationIntroContentGap'] ) && $attributes['conversationIntroContentGap'] !== '' ) {
            $unit = $attributes['conversationIntroContentGapUnit'] ?? 'px';
            $css_rules[] = "{$selector} .conversation-intro { gap: {$attributes['conversationIntroContentGap']}{$unit}; }";
        }
        if ( isset( $attributes['conversationIntroContentGap_tablet'] ) && $attributes['conversationIntroContentGap_tablet'] !== '' ) {
            $unit = $attributes['conversationIntroContentGapUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .conversation-intro { gap: {$attributes['conversationIntroContentGap_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['conversationIntroContentGap_mobile'] ) && $attributes['conversationIntroContentGap_mobile'] !== '' ) {
            $unit = $attributes['conversationIntroContentGapUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .conversation-intro { gap: {$attributes['conversationIntroContentGap_mobile']}{$unit}; }";
        }
        if ( isset( $attributes['conversationIntroAvatarSize'] ) && $attributes['conversationIntroAvatarSize'] !== '' ) {
            $unit = $attributes['conversationIntroAvatarSizeUnit'] ?? 'px';
            $css_rules[] = "{$selector} .conversation-intro .avatar { width: {$attributes['conversationIntroAvatarSize']}{$unit}; height: {$attributes['conversationIntroAvatarSize']}{$unit}; }";
        }
        if ( isset( $attributes['conversationIntroAvatarSize_tablet'] ) && $attributes['conversationIntroAvatarSize_tablet'] !== '' ) {
            $unit = $attributes['conversationIntroAvatarSizeUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .conversation-intro .avatar { width: {$attributes['conversationIntroAvatarSize_tablet']}{$unit}; height: {$attributes['conversationIntroAvatarSize_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['conversationIntroAvatarSize_mobile'] ) && $attributes['conversationIntroAvatarSize_mobile'] !== '' ) {
            $unit = $attributes['conversationIntroAvatarSizeUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .conversation-intro .avatar { width: {$attributes['conversationIntroAvatarSize_mobile']}{$unit}; height: {$attributes['conversationIntroAvatarSize_mobile']}{$unit}; }";
        }
        if ( isset( $attributes['conversationIntroAvatarRadius'] ) && $attributes['conversationIntroAvatarRadius'] !== '' ) {
            $unit = $attributes['conversationIntroAvatarRadiusUnit'] ?? 'px';
            $css_rules[] = "{$selector} .conversation-intro .avatar { border-radius: {$attributes['conversationIntroAvatarRadius']}{$unit}; }";
        }
        if ( isset( $attributes['conversationIntroAvatarRadius_tablet'] ) && $attributes['conversationIntroAvatarRadius_tablet'] !== '' ) {
            $unit = $attributes['conversationIntroAvatarRadiusUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .conversation-intro .avatar { border-radius: {$attributes['conversationIntroAvatarRadius_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['conversationIntroAvatarRadius_mobile'] ) && $attributes['conversationIntroAvatarRadius_mobile'] !== '' ) {
            $unit = $attributes['conversationIntroAvatarRadiusUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .conversation-intro .avatar { border-radius: {$attributes['conversationIntroAvatarRadius_mobile']}{$unit}; }";
        }
        if ( ! empty( $attributes['conversationIntroNameTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['conversationIntroNameTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .conversation-intro .name { {$typo} }";
            }
        }
        if ( ! empty( $attributes['conversationIntroNameColor'] ) ) {
            $css_rules[] = "{$selector} .conversation-intro .name { color: {$attributes['conversationIntroNameColor']}; }";
        }
        if ( ! empty( $attributes['conversationIntroSubtitleTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['conversationIntroSubtitleTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .conversation-intro .subtitle { {$typo} }";
            }
        }
        if ( ! empty( $attributes['conversationIntroSubtitleColor'] ) ) {
            $css_rules[] = "{$selector} .conversation-intro .subtitle { color: {$attributes['conversationIntroSubtitleColor']}; }";
        }

        // ============================================
        // 6. CONVERSATION: BODY
        // ============================================

        if ( isset( $attributes['conversationBodyMessageGap'] ) && $attributes['conversationBodyMessageGap'] !== '' ) {
            $unit = $attributes['conversationBodyMessageGapUnit'] ?? 'px';
            $css_rules[] = "{$selector} .conversation-body { gap: {$attributes['conversationBodyMessageGap']}{$unit}; }";
        }
        if ( isset( $attributes['conversationBodyMessageGap_tablet'] ) && $attributes['conversationBodyMessageGap_tablet'] !== '' ) {
            $unit = $attributes['conversationBodyMessageGapUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .conversation-body { gap: {$attributes['conversationBodyMessageGap_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['conversationBodyMessageGap_mobile'] ) && $attributes['conversationBodyMessageGap_mobile'] !== '' ) {
            $unit = $attributes['conversationBodyMessageGapUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .conversation-body { gap: {$attributes['conversationBodyMessageGap_mobile']}{$unit}; }";
        }
        if ( ! empty( $attributes['conversationBodyMessagePadding'] ) ) {
            $padding = self::generate_dimensions_css( $attributes['conversationBodyMessagePadding'], 'padding' );
            if ( $padding ) {
                $css_rules[] = "{$selector} .message-bubble { {$padding} }";
            }
        }
        if ( ! empty( $attributes['conversationBodyMessageTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['conversationBodyMessageTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .message-bubble { {$typo} }";
            }
        }
        if ( isset( $attributes['conversationBodyMessageRadius'] ) && $attributes['conversationBodyMessageRadius'] !== '' ) {
            $unit = $attributes['conversationBodyMessageRadiusUnit'] ?? 'px';
            $css_rules[] = "{$selector} .message-bubble { border-radius: {$attributes['conversationBodyMessageRadius']}{$unit}; }";
        }
        if ( isset( $attributes['conversationBodyMessageRadius_tablet'] ) && $attributes['conversationBodyMessageRadius_tablet'] !== '' ) {
            $unit = $attributes['conversationBodyMessageRadiusUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .message-bubble { border-radius: {$attributes['conversationBodyMessageRadius_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['conversationBodyMessageRadius_mobile'] ) && $attributes['conversationBodyMessageRadius_mobile'] !== '' ) {
            $unit = $attributes['conversationBodyMessageRadiusUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .message-bubble { border-radius: {$attributes['conversationBodyMessageRadius_mobile']}{$unit}; }";
        }

        // Responder 1
        $responder1_bg = self::generate_background_css( $attributes, 'responder1' );
        if ( $responder1_bg ) {
            $css_rules[] = "{$selector} .message-bubble.responder-1 { {$responder1_bg} }";
        }
        if ( ! empty( $attributes['responder1Color'] ) ) {
            $css_rules[] = "{$selector} .message-bubble.responder-1 { color: {$attributes['responder1Color']}; }";
        }

        // Responder 2
        $responder2_bg = self::generate_background_css( $attributes, 'responder2' );
        if ( $responder2_bg ) {
            $css_rules[] = "{$selector} .message-bubble.responder-2 { {$responder2_bg} }";
        }
        if ( ! empty( $attributes['responder2Color'] ) ) {
            $css_rules[] = "{$selector} .message-bubble.responder-2 { color: {$attributes['responder2Color']}; }";
        }

        // Error
        $error_bg = self::generate_background_css( $attributes, 'error' );
        if ( $error_bg ) {
            $css_rules[] = "{$selector} .message-bubble.error { {$error_bg} }";
        }
        if ( ! empty( $attributes['errorColor'] ) ) {
            $css_rules[] = "{$selector} .message-bubble.error { color: {$attributes['errorColor']}; }";
        }

        // Message info
        if ( ! empty( $attributes['messageInfoTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['messageInfoTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .message-info { {$typo} }";
            }
        }
        if ( ! empty( $attributes['messageInfoDefaultColor'] ) ) {
            $css_rules[] = "{$selector} .message-info { color: {$attributes['messageInfoDefaultColor']}; }";
        }
        if ( ! empty( $attributes['messageInfoDeleteColor'] ) ) {
            $css_rules[] = "{$selector} .message-info .delete { color: {$attributes['messageInfoDeleteColor']}; }";
        }

        // Seen
        if ( ! empty( $attributes['seenTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['seenTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .seen-indicator { {$typo} }";
            }
        }
        if ( ! empty( $attributes['seenColor'] ) ) {
            $css_rules[] = "{$selector} .seen-indicator { color: {$attributes['seenColor']}; }";
        }

        // Images
        if ( isset( $attributes['imagesRadius'] ) && $attributes['imagesRadius'] !== '' ) {
            $unit = $attributes['imagesRadiusUnit'] ?? 'px';
            $css_rules[] = "{$selector} .message-image { border-radius: {$attributes['imagesRadius']}{$unit}; }";
        }
        if ( isset( $attributes['imagesRadius_tablet'] ) && $attributes['imagesRadius_tablet'] !== '' ) {
            $unit = $attributes['imagesRadiusUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .message-image { border-radius: {$attributes['imagesRadius_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['imagesRadius_mobile'] ) && $attributes['imagesRadius_mobile'] !== '' ) {
            $unit = $attributes['imagesRadiusUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .message-image { border-radius: {$attributes['imagesRadius_mobile']}{$unit}; }";
        }

        // ============================================
        // 7. CONVERSATION: COMPOSE
        // ============================================

        if ( isset( $attributes['composeAvatarRadius'] ) && $attributes['composeAvatarRadius'] !== '' ) {
            $unit = $attributes['composeAvatarRadiusUnit'] ?? 'px';
            $css_rules[] = "{$selector} .compose-area .avatar { border-radius: {$attributes['composeAvatarRadius']}{$unit}; }";
        }
        if ( isset( $attributes['composeAvatarRadius_tablet'] ) && $attributes['composeAvatarRadius_tablet'] !== '' ) {
            $unit = $attributes['composeAvatarRadiusUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .compose-area .avatar { border-radius: {$attributes['composeAvatarRadius_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['composeAvatarRadius_mobile'] ) && $attributes['composeAvatarRadius_mobile'] !== '' ) {
            $unit = $attributes['composeAvatarRadiusUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .compose-area .avatar { border-radius: {$attributes['composeAvatarRadius_mobile']}{$unit}; }";
        }
        if ( ! empty( $attributes['composePlaceholderTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['composePlaceholderTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .compose-area textarea::placeholder { {$typo} }";
            }
        }
        if ( ! empty( $attributes['composePlaceholderColor'] ) ) {
            $css_rules[] = "{$selector} .compose-area textarea::placeholder { color: {$attributes['composePlaceholderColor']}; }";
        }
        if ( ! empty( $attributes['composeValueTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['composeValueTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .compose-area textarea { {$typo} }";
            }
        }
        if ( ! empty( $attributes['composeValueColor'] ) ) {
            $css_rules[] = "{$selector} .compose-area textarea { color: {$attributes['composeValueColor']}; }";
        }

        // ============================================
        // 8. ICON BUTTON
        // ============================================

        if ( ! empty( $attributes['iconButtonColor'] ) ) {
            $css_rules[] = "{$selector} .icon-button { color: {$attributes['iconButtonColor']}; }";
        }
        if ( ! empty( $attributes['iconButtonBackground'] ) ) {
            $css_rules[] = "{$selector} .icon-button { background-color: {$attributes['iconButtonBackground']}; }";
        }
        $icon_button_border = self::generate_border_css(
            $attributes['iconButtonBorderType'] ?? null,
            $attributes['iconButtonBorderWidth'] ?? null,
            $attributes['iconButtonBorderColor'] ?? null
        );
        if ( $icon_button_border ) {
            $css_rules[] = "{$selector} .icon-button { {$icon_button_border} }";
        }
        if ( isset( $attributes['iconButtonRadius'] ) && $attributes['iconButtonRadius'] !== '' ) {
            $unit = $attributes['iconButtonRadiusUnit'] ?? 'px';
            $css_rules[] = "{$selector} .icon-button { border-radius: {$attributes['iconButtonRadius']}{$unit}; }";
        }
        if ( isset( $attributes['iconButtonRadius_tablet'] ) && $attributes['iconButtonRadius_tablet'] !== '' ) {
            $unit = $attributes['iconButtonRadiusUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .icon-button { border-radius: {$attributes['iconButtonRadius_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['iconButtonRadius_mobile'] ) && $attributes['iconButtonRadius_mobile'] !== '' ) {
            $unit = $attributes['iconButtonRadiusUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .icon-button { border-radius: {$attributes['iconButtonRadius_mobile']}{$unit}; }";
        }
        if ( ! empty( $attributes['iconButtonHoverColor'] ) ) {
            $css_rules[] = "{$selector} .icon-button:hover { color: {$attributes['iconButtonHoverColor']}; }";
        }
        if ( ! empty( $attributes['iconButtonHoverBackground'] ) ) {
            $css_rules[] = "{$selector} .icon-button:hover { background-color: {$attributes['iconButtonHoverBackground']}; }";
        }
        if ( ! empty( $attributes['iconButtonHoverBorderColor'] ) ) {
            $css_rules[] = "{$selector} .icon-button:hover { border-color: {$attributes['iconButtonHoverBorderColor']}; }";
        }

        // ============================================
        // 9. TERTIARY BUTTON
        // ============================================

        if ( ! empty( $attributes['tertiaryButtonIconColor'] ) ) {
            $css_rules[] = "{$selector} .tertiary-button .icon { color: {$attributes['tertiaryButtonIconColor']}; }";
        }
        if ( isset( $attributes['tertiaryButtonIconSize'] ) && $attributes['tertiaryButtonIconSize'] !== '' ) {
            $unit = $attributes['tertiaryButtonIconSizeUnit'] ?? 'px';
            $css_rules[] = "{$selector} .tertiary-button .icon { font-size: {$attributes['tertiaryButtonIconSize']}{$unit}; }";
        }
        if ( isset( $attributes['tertiaryButtonIconSize_tablet'] ) && $attributes['tertiaryButtonIconSize_tablet'] !== '' ) {
            $unit = $attributes['tertiaryButtonIconSizeUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .tertiary-button .icon { font-size: {$attributes['tertiaryButtonIconSize_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['tertiaryButtonIconSize_mobile'] ) && $attributes['tertiaryButtonIconSize_mobile'] !== '' ) {
            $unit = $attributes['tertiaryButtonIconSizeUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .tertiary-button .icon { font-size: {$attributes['tertiaryButtonIconSize_mobile']}{$unit}; }";
        }
        if ( ! empty( $attributes['tertiaryButtonBackground'] ) ) {
            $css_rules[] = "{$selector} .tertiary-button { background-color: {$attributes['tertiaryButtonBackground']}; }";
        }
        $tertiary_button_border = self::generate_border_css(
            $attributes['tertiaryButtonBorderType'] ?? null,
            $attributes['tertiaryButtonBorderWidth'] ?? null,
            $attributes['tertiaryButtonBorderColor'] ?? null
        );
        if ( $tertiary_button_border ) {
            $css_rules[] = "{$selector} .tertiary-button { {$tertiary_button_border} }";
        }
        if ( isset( $attributes['tertiaryButtonRadius'] ) && $attributes['tertiaryButtonRadius'] !== '' ) {
            $unit = $attributes['tertiaryButtonRadiusUnit'] ?? 'px';
            $css_rules[] = "{$selector} .tertiary-button { border-radius: {$attributes['tertiaryButtonRadius']}{$unit}; }";
        }
        if ( isset( $attributes['tertiaryButtonRadius_tablet'] ) && $attributes['tertiaryButtonRadius_tablet'] !== '' ) {
            $unit = $attributes['tertiaryButtonRadiusUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .tertiary-button { border-radius: {$attributes['tertiaryButtonRadius_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['tertiaryButtonRadius_mobile'] ) && $attributes['tertiaryButtonRadius_mobile'] !== '' ) {
            $unit = $attributes['tertiaryButtonRadiusUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .tertiary-button { border-radius: {$attributes['tertiaryButtonRadius_mobile']}{$unit}; }";
        }
        if ( ! empty( $attributes['tertiaryButtonTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['tertiaryButtonTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .tertiary-button { {$typo} }";
            }
        }
        if ( ! empty( $attributes['tertiaryButtonTextColor'] ) ) {
            $css_rules[] = "{$selector} .tertiary-button { color: {$attributes['tertiaryButtonTextColor']}; }";
        }
        if ( ! empty( $attributes['tertiaryButtonHoverIconColor'] ) ) {
            $css_rules[] = "{$selector} .tertiary-button:hover .icon { color: {$attributes['tertiaryButtonHoverIconColor']}; }";
        }
        if ( ! empty( $attributes['tertiaryButtonHoverBackground'] ) ) {
            $css_rules[] = "{$selector} .tertiary-button:hover { background-color: {$attributes['tertiaryButtonHoverBackground']}; }";
        }
        if ( ! empty( $attributes['tertiaryButtonHoverBorderColor'] ) ) {
            $css_rules[] = "{$selector} .tertiary-button:hover { border-color: {$attributes['tertiaryButtonHoverBorderColor']}; }";
        }
        if ( ! empty( $attributes['tertiaryButtonHoverTextColor'] ) ) {
            $css_rules[] = "{$selector} .tertiary-button:hover { color: {$attributes['tertiaryButtonHoverTextColor']}; }";
        }

        // ============================================
        // 10. NO MESSAGES / NO CHAT SELECTED
        // ============================================

        if ( isset( $attributes['emptyIconSize'] ) && $attributes['emptyIconSize'] !== '' ) {
            $unit = $attributes['emptyIconSizeUnit'] ?? 'px';
            $css_rules[] = "{$selector} .empty-state .icon { font-size: {$attributes['emptyIconSize']}{$unit}; }";
        }
        if ( isset( $attributes['emptyIconSize_tablet'] ) && $attributes['emptyIconSize_tablet'] !== '' ) {
            $unit = $attributes['emptyIconSizeUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .empty-state .icon { font-size: {$attributes['emptyIconSize_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['emptyIconSize_mobile'] ) && $attributes['emptyIconSize_mobile'] !== '' ) {
            $unit = $attributes['emptyIconSizeUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .empty-state .icon { font-size: {$attributes['emptyIconSize_mobile']}{$unit}; }";
        }
        if ( ! empty( $attributes['emptyIconColor'] ) ) {
            $css_rules[] = "{$selector} .empty-state .icon { color: {$attributes['emptyIconColor']}; }";
        }
        if ( ! empty( $attributes['emptyTitleColor'] ) ) {
            $css_rules[] = "{$selector} .empty-state .title { color: {$attributes['emptyTitleColor']}; }";
        }
        if ( ! empty( $attributes['emptyTitleTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['emptyTitleTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .empty-state .title { {$typo} }";
            }
        }

        // ============================================
        // 11. LOADING
        // ============================================

        if ( ! empty( $attributes['loadingColor1'] ) ) {
            $css_rules[] = "{$selector} .loader { --color-1: {$attributes['loadingColor1']}; }";
        }
        if ( ! empty( $attributes['loadingColor2'] ) ) {
            $css_rules[] = "{$selector} .loader { --color-2: {$attributes['loadingColor2']}; }";
        }

        // ============================================
        // Combine CSS with media queries
        // ============================================
        $final_css = '';
        if ( ! empty( $css_rules ) ) {
            $final_css .= implode( "\n", $css_rules );
        }
        if ( ! empty( $tablet_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::TABLET_BREAKPOINT . "px) {\n" . implode( "\n", $tablet_rules ) . "\n}";
        }
        if ( ! empty( $mobile_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::MOBILE_BREAKPOINT . "px) {\n" . implode( "\n", $mobile_rules ) . "\n}";
        }

        return $final_css;
    }

    /**
     * Generate product-form block CSS
     *
     * CSS generation for product-form block.
     *
     * @param array  $attributes Block attributes from inspector controls
     * @param string $block_id   Unique block identifier
     * @return string Generated CSS rules
     */
    public static function generate_product_form_css( $attributes, $block_id ) {
        if ( empty( $block_id ) ) {
            return '';
        }

        $css_rules = [];
        $tablet_rules = [];
        $mobile_rules = [];

        $selector = '.voxel-fse-product-form-' . $block_id;

        // ============================================
        // SECTION: General (Field Spacing, Field Label)
        // Source: product-form.php:215-278
        // ============================================

        // Field spacing
        if ( isset( $attributes['fieldSpacing'] ) && $attributes['fieldSpacing'] !== '' ) {
            $css_rules[] = "{$selector} .ts-form-group { margin-bottom: {$attributes['fieldSpacing']}px; }";
        }
        if ( isset( $attributes['fieldSpacingTablet'] ) && $attributes['fieldSpacingTablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-form-group { margin-bottom: {$attributes['fieldSpacingTablet']}px; }";
        }
        if ( isset( $attributes['fieldSpacingMobile'] ) && $attributes['fieldSpacingMobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-form-group { margin-bottom: {$attributes['fieldSpacingMobile']}px; }";
        }

        // Field label typography
        if ( ! empty( $attributes['fieldLabelTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['fieldLabelTypography'] );
            if ( ! empty( $typo_css ) ) {
                $css_rules[] = "{$selector} .ts-form label { {$typo_css} }";
            }
        }

        // Field label color
        if ( ! empty( $attributes['fieldLabelColor'] ) ) {
            $css_rules[] = "{$selector} .ts-form label { color: {$attributes['fieldLabelColor']}; }";
        }

        // ============================================
        // SECTION: Primary Button (Normal + Hover States)
        // Source: product-form.php:278-510
        // ============================================

        // Primary button typography
        if ( ! empty( $attributes['primaryButtonTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['primaryButtonTypography'] );
            if ( ! empty( $typo_css ) ) {
                $css_rules[] = "{$selector} .ts-btn.form-btn { {$typo_css} }";
            }
        }

        // Primary button border
        if ( ! empty( $attributes['primaryButtonBorder'] ) ) {
            $border_css = self::generate_border_css( $attributes['primaryButtonBorder'] );
            if ( ! empty( $border_css ) ) {
                $css_rules[] = "{$selector} .ts-btn.form-btn { {$border_css} }";
            }
        }

        // Primary button border radius
        if ( isset( $attributes['primaryButtonBorderRadius'] ) && $attributes['primaryButtonBorderRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-btn.form-btn { border-radius: {$attributes['primaryButtonBorderRadius']}px; }";
        }

        // Primary button box shadow
        if ( ! empty( $attributes['primaryButtonBoxShadow'] ) ) {
            $shadow_css = self::generate_box_shadow_css( $attributes['primaryButtonBoxShadow'] );
            if ( ! empty( $shadow_css ) ) {
                $css_rules[] = "{$selector} .ts-btn.form-btn { {$shadow_css} }";
            }
        }

        // Primary button text color
        if ( ! empty( $attributes['primaryButtonTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-btn.form-btn { color: {$attributes['primaryButtonTextColor']}; }";
            $css_rules[] = "{$selector} .ts-btn.form-btn svg { fill: {$attributes['primaryButtonTextColor']}; }";
        }

        // Primary button background
        if ( ! empty( $attributes['primaryButtonBackground'] ) ) {
            $css_rules[] = "{$selector} .ts-btn.form-btn { background-color: {$attributes['primaryButtonBackground']}; }";
        }

        // Primary button icon size
        if ( isset( $attributes['primaryButtonIconSize'] ) && $attributes['primaryButtonIconSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-btn.form-btn i { font-size: {$attributes['primaryButtonIconSize']}px; }";
            $css_rules[] = "{$selector} .ts-btn.form-btn svg { width: {$attributes['primaryButtonIconSize']}px; height: {$attributes['primaryButtonIconSize']}px; }";
        }

        // Primary button icon color
        if ( ! empty( $attributes['primaryButtonIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-btn.form-btn i { color: {$attributes['primaryButtonIconColor']}; }";
            $css_rules[] = "{$selector} .ts-btn.form-btn svg { fill: {$attributes['primaryButtonIconColor']}; }";
        }

        // Primary button icon/text spacing
        if ( isset( $attributes['primaryButtonIconTextSpacing'] ) && $attributes['primaryButtonIconTextSpacing'] !== '' ) {
            $css_rules[] = "{$selector} .ts-btn.form-btn i { margin-right: {$attributes['primaryButtonIconTextSpacing']}px; }";
            $css_rules[] = "{$selector} .ts-btn.form-btn svg { margin-right: {$attributes['primaryButtonIconTextSpacing']}px; }";
        }

        // Primary button hover states

        // Text color hover
        if ( ! empty( $attributes['primaryButtonTextColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn.form-btn:hover { color: {$attributes['primaryButtonTextColorHover']}; }";
            $css_rules[] = "{$selector} .ts-btn.form-btn:hover svg { fill: {$attributes['primaryButtonTextColorHover']}; }";
        }

        // Background hover
        if ( ! empty( $attributes['primaryButtonBackgroundHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn.form-btn:hover { background-color: {$attributes['primaryButtonBackgroundHover']}; }";
        }

        // Border color hover
        if ( ! empty( $attributes['primaryButtonBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn.form-btn:hover { border-color: {$attributes['primaryButtonBorderColorHover']}; }";
        }

        // Box shadow hover
        if ( ! empty( $attributes['primaryButtonBoxShadowHover'] ) ) {
            $shadow_css = self::generate_box_shadow_css( $attributes['primaryButtonBoxShadowHover'] );
            if ( ! empty( $shadow_css ) ) {
                $css_rules[] = "{$selector} .ts-btn.form-btn:hover { {$shadow_css} }";
            }
        }

        // Icon color hover
        if ( ! empty( $attributes['primaryButtonIconColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn.form-btn:hover i { color: {$attributes['primaryButtonIconColorHover']}; }";
            $css_rules[] = "{$selector} .ts-btn.form-btn:hover svg { fill: {$attributes['primaryButtonIconColorHover']}; }";
        }

        // ============================================
        // SECTION: Price Calculator
        // ============================================

        // List spacing
        if ( isset( $attributes['priceCalculatorListSpacing'] ) && $attributes['priceCalculatorListSpacing'] !== '' ) {
            $css_rules[] = "{$selector} .ts-cost-calculator li { margin-bottom: {$attributes['priceCalculatorListSpacing']}px; }";
        }

        // Typography
        if ( ! empty( $attributes['priceCalculatorTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['priceCalculatorTypography'] );
            if ( ! empty( $typo_css ) ) {
                $css_rules[] = "{$selector} .ts-cost-calculator { {$typo_css} }";
            }
        }

        // Text color
        if ( ! empty( $attributes['priceCalculatorTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-cost-calculator { color: {$attributes['priceCalculatorTextColor']}; }";
        }

        // Total typography
        if ( ! empty( $attributes['priceCalculatorTotalTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['priceCalculatorTotalTypography'] );
            if ( ! empty( $typo_css ) ) {
                $css_rules[] = "{$selector} .ts-cost-calculator .ts-total { {$typo_css} }";
            }
        }

        // Total text color
        if ( ! empty( $attributes['priceCalculatorTotalTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-cost-calculator .ts-total { color: {$attributes['priceCalculatorTotalTextColor']}; }";
        }

        // ============================================
        // SECTION: Loading / Out of Stock
        // Source: product-form.php:585-710
        // ============================================

        // Loading color 1
        if ( ! empty( $attributes['loadingColor1'] ) ) {
            $css_rules[] = "{$selector} .ts-loader::before { border-top-color: {$attributes['loadingColor1']}; }";
        }

        // Loading color 2
        if ( ! empty( $attributes['loadingColor2'] ) ) {
            $css_rules[] = "{$selector} .ts-loader::before { border-bottom-color: {$attributes['loadingColor2']}; }";
        }

        // Out of stock content gap
        if ( isset( $attributes['outOfStockContentGap'] ) && $attributes['outOfStockContentGap'] !== '' ) {
            $css_rules[] = "{$selector} .ts-no-posts { gap: {$attributes['outOfStockContentGap']}px; }";
        }

        // Out of stock icon size
        if ( isset( $attributes['outOfStockIconSize'] ) && $attributes['outOfStockIconSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-no-posts i { font-size: {$attributes['outOfStockIconSize']}px; }";
            $css_rules[] = "{$selector} .ts-no-posts svg { width: {$attributes['outOfStockIconSize']}px; height: {$attributes['outOfStockIconSize']}px; }";
        }

        // Out of stock icon color
        if ( ! empty( $attributes['outOfStockIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-no-posts i { color: {$attributes['outOfStockIconColor']}; }";
            $css_rules[] = "{$selector} .ts-no-posts svg { fill: {$attributes['outOfStockIconColor']}; }";
        }

        // Out of stock typography
        if ( ! empty( $attributes['outOfStockTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['outOfStockTypography'] );
            if ( ! empty( $typo_css ) ) {
                $css_rules[] = "{$selector} .ts-no-posts p { {$typo_css} }";
            }
        }

        // Out of stock text color
        if ( ! empty( $attributes['outOfStockTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-no-posts p { color: {$attributes['outOfStockTextColor']}; }";
        }

        // ============================================
        // SECTION: Number Stepper (Normal + Hover)
        // Source: product-form.php:709-869
        // ============================================

        // Stepper input value size
        if ( isset( $attributes['stepperInputSize'] ) && $attributes['stepperInputSize'] !== '' ) {
            $css_rules[] = "{$selector} .pf-number-input .ts-stepper-number { font-size: {$attributes['stepperInputSize']}px; }";
        }

        // Stepper button icon color
        if ( ! empty( $attributes['stepperButtonIconColor'] ) ) {
            $css_rules[] = "{$selector} .pf-number-input .ts-icon-btn i { color: {$attributes['stepperButtonIconColor']}; }";
            $css_rules[] = "{$selector} .pf-number-input .ts-icon-btn svg { fill: {$attributes['stepperButtonIconColor']}; }";
        }

        // Stepper button background
        if ( ! empty( $attributes['stepperButtonBackground'] ) ) {
            $css_rules[] = "{$selector} .pf-number-input .ts-icon-btn { background-color: {$attributes['stepperButtonBackground']}; }";
        }

        // Stepper button border
        if ( ! empty( $attributes['stepperButtonBorder'] ) ) {
            $border_css = self::generate_border_css( $attributes['stepperButtonBorder'] );
            if ( ! empty( $border_css ) ) {
                $css_rules[] = "{$selector} .pf-number-input .ts-icon-btn { {$border_css} }";
            }
        }

        // Stepper button border radius
        if ( isset( $attributes['stepperButtonBorderRadius'] ) && $attributes['stepperButtonBorderRadius'] !== '' ) {
            $css_rules[] = "{$selector} .pf-number-input .ts-icon-btn { border-radius: {$attributes['stepperButtonBorderRadius']}px; }";
        }

        // Stepper hover states

        // Button icon color hover
        if ( ! empty( $attributes['stepperButtonIconColorHover'] ) ) {
            $css_rules[] = "{$selector} .pf-number-input .ts-icon-btn:hover i { color: {$attributes['stepperButtonIconColorHover']}; }";
            $css_rules[] = "{$selector} .pf-number-input .ts-icon-btn:hover svg { fill: {$attributes['stepperButtonIconColorHover']}; }";
        }

        // Button background hover
        if ( ! empty( $attributes['stepperButtonBackgroundHover'] ) ) {
            $css_rules[] = "{$selector} .pf-number-input .ts-icon-btn:hover { background-color: {$attributes['stepperButtonBackgroundHover']}; }";
        }

        // Button border color hover
        if ( ! empty( $attributes['stepperButtonBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .pf-number-input .ts-icon-btn:hover { border-color: {$attributes['stepperButtonBorderColorHover']}; }";
        }

        // ============================================
        // SECTION: Cards (Normal + Selected)
        // Source: product-form.php:869-1149
        // ============================================

        // Cards gap
        if ( isset( $attributes['cardsGap'] ) && $attributes['cardsGap'] !== '' ) {
            $css_rules[] = "{$selector} .pf-card-choices { gap: {$attributes['cardsGap']}px; }";
        }

        // Cards background
        if ( ! empty( $attributes['cardsBackground'] ) ) {
            $css_rules[] = "{$selector} .pf-card-choice { background-color: {$attributes['cardsBackground']}; }";
        }

        // Cards border
        if ( ! empty( $attributes['cardsBorder'] ) ) {
            $border_css = self::generate_border_css( $attributes['cardsBorder'] );
            if ( ! empty( $border_css ) ) {
                $css_rules[] = "{$selector} .pf-card-choice { {$border_css} }";
            }
        }

        // Cards border radius
        if ( isset( $attributes['cardsBorderRadius'] ) && $attributes['cardsBorderRadius'] !== '' ) {
            $css_rules[] = "{$selector} .pf-card-choice { border-radius: {$attributes['cardsBorderRadius']}px; }";
        }

        // Cards primary typography
        if ( ! empty( $attributes['cardsPrimaryTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['cardsPrimaryTypography'] );
            if ( ! empty( $typo_css ) ) {
                $css_rules[] = "{$selector} .pf-card-choice .pf-cc-title { {$typo_css} }";
            }
        }

        // Cards primary color
        if ( ! empty( $attributes['cardsPrimaryColor'] ) ) {
            $css_rules[] = "{$selector} .pf-card-choice .pf-cc-title { color: {$attributes['cardsPrimaryColor']}; }";
        }

        // Cards secondary typography
        if ( ! empty( $attributes['cardsSecondaryTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['cardsSecondaryTypography'] );
            if ( ! empty( $typo_css ) ) {
                $css_rules[] = "{$selector} .pf-card-choice .pf-cc-description { {$typo_css} }";
            }
        }

        // Cards secondary color
        if ( ! empty( $attributes['cardsSecondaryColor'] ) ) {
            $css_rules[] = "{$selector} .pf-card-choice .pf-cc-description { color: {$attributes['cardsSecondaryColor']}; }";
        }

        // Cards price typography
        if ( ! empty( $attributes['cardsPriceTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['cardsPriceTypography'] );
            if ( ! empty( $typo_css ) ) {
                $css_rules[] = "{$selector} .pf-card-choice .pf-cc-price { {$typo_css} }";
            }
        }

        // Cards price color
        if ( ! empty( $attributes['cardsPriceColor'] ) ) {
            $css_rules[] = "{$selector} .pf-card-choice .pf-cc-price { color: {$attributes['cardsPriceColor']}; }";
        }

        // Cards image border radius
        if ( isset( $attributes['cardsImageBorderRadius'] ) && $attributes['cardsImageBorderRadius'] !== '' ) {
            $css_rules[] = "{$selector} .pf-card-choice .pf-cc-image { border-radius: {$attributes['cardsImageBorderRadius']}px; }";
        }

        // Cards image size
        if ( isset( $attributes['cardsImageSize'] ) && $attributes['cardsImageSize'] !== '' ) {
            $css_rules[] = "{$selector} .pf-card-choice .pf-cc-image { width: {$attributes['cardsImageSize']}px; height: {$attributes['cardsImageSize']}px; }";
        }

        // Cards selected state

        // Selected background
        if ( ! empty( $attributes['cardsSelectedBackground'] ) ) {
            $css_rules[] = "{$selector} .pf-card-choice.pf-selected { background-color: {$attributes['cardsSelectedBackground']}; }";
        }

        // Selected border color
        if ( ! empty( $attributes['cardsSelectedBorderColor'] ) ) {
            $css_rules[] = "{$selector} .pf-card-choice.pf-selected { border-color: {$attributes['cardsSelectedBorderColor']}; }";
        }

        // Selected box shadow
        if ( ! empty( $attributes['cardsSelectedBoxShadow'] ) ) {
            $shadow_css = self::generate_box_shadow_css( $attributes['cardsSelectedBoxShadow'] );
            if ( ! empty( $shadow_css ) ) {
                $css_rules[] = "{$selector} .pf-card-choice.pf-selected { {$shadow_css} }";
            }
        }

        // Selected primary typography
        if ( ! empty( $attributes['cardsSelectedPrimaryTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['cardsSelectedPrimaryTypography'] );
            if ( ! empty( $typo_css ) ) {
                $css_rules[] = "{$selector} .pf-card-choice.pf-selected .pf-cc-title { {$typo_css} }";
            }
        }

        // ============================================
        // SECTION: Buttons (Normal + Selected)
        // Source: product-form.php:1149-1315
        // ============================================

        // Buttons gap
        if ( isset( $attributes['buttonsGap'] ) && $attributes['buttonsGap'] !== '' ) {
            $css_rules[] = "{$selector} .pf-btn-choices { gap: {$attributes['buttonsGap']}px; }";
        }

        // Buttons background
        if ( ! empty( $attributes['buttonsBackground'] ) ) {
            $css_rules[] = "{$selector} .pf-btn-choice { background-color: {$attributes['buttonsBackground']}; }";
        }

        // Buttons border
        if ( ! empty( $attributes['buttonsBorder'] ) ) {
            $border_css = self::generate_border_css( $attributes['buttonsBorder'] );
            if ( ! empty( $border_css ) ) {
                $css_rules[] = "{$selector} .pf-btn-choice { {$border_css} }";
            }
        }

        // Buttons border radius
        if ( isset( $attributes['buttonsBorderRadius'] ) && $attributes['buttonsBorderRadius'] !== '' ) {
            $css_rules[] = "{$selector} .pf-btn-choice { border-radius: {$attributes['buttonsBorderRadius']}px; }";
        }

        // Buttons text typography
        if ( ! empty( $attributes['buttonsTextTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['buttonsTextTypography'] );
            if ( ! empty( $typo_css ) ) {
                $css_rules[] = "{$selector} .pf-btn-choice { {$typo_css} }";
            }
        }

        // Buttons text color
        if ( ! empty( $attributes['buttonsTextColor'] ) ) {
            $css_rules[] = "{$selector} .pf-btn-choice { color: {$attributes['buttonsTextColor']}; }";
        }

        // Buttons selected state

        // Selected background
        if ( ! empty( $attributes['buttonsSelectedBackground'] ) ) {
            $css_rules[] = "{$selector} .pf-btn-choice.pf-selected { background-color: {$attributes['buttonsSelectedBackground']}; }";
        }

        // Selected border color
        if ( ! empty( $attributes['buttonsSelectedBorderColor'] ) ) {
            $css_rules[] = "{$selector} .pf-btn-choice.pf-selected { border-color: {$attributes['buttonsSelectedBorderColor']}; }";
        }

        // Selected box shadow
        if ( ! empty( $attributes['buttonsSelectedBoxShadow'] ) ) {
            $shadow_css = self::generate_box_shadow_css( $attributes['buttonsSelectedBoxShadow'] );
            if ( ! empty( $shadow_css ) ) {
                $css_rules[] = "{$selector} .pf-btn-choice.pf-selected { {$shadow_css} }";
            }
        }

        // ============================================
        // SECTION: Dropdown (Normal + Hover + Filled)
        // Source: product-form.php:1315-1520
        // ============================================

        // Dropdown typography - normal state
        if ( ! empty( $attributes['dropdownTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['dropdownTypography'] );
            if ( ! empty( $typo_css ) ) {
                $css_rules[] = "{$selector} .pf-select { {$typo_css} }";
            }
        }

        // Dropdown box shadow - normal
        if ( ! empty( $attributes['dropdownBoxShadow'] ) ) {
            $shadow_css = self::generate_box_shadow_css( $attributes['dropdownBoxShadow'] );
            if ( ! empty( $shadow_css ) ) {
                $css_rules[] = "{$selector} .pf-select { {$shadow_css} }";
            }
        }

        // Dropdown background - normal
        if ( ! empty( $attributes['dropdownBackground'] ) ) {
            $css_rules[] = "{$selector} .pf-select { background-color: {$attributes['dropdownBackground']}; }";
        }

        // Dropdown text color - normal
        if ( ! empty( $attributes['dropdownTextColor'] ) ) {
            $css_rules[] = "{$selector} .pf-select { color: {$attributes['dropdownTextColor']}; }";
        }

        // Dropdown border - normal
        if ( ! empty( $attributes['dropdownBorder'] ) ) {
            $border_css = self::generate_border_css( $attributes['dropdownBorder'] );
            if ( ! empty( $border_css ) ) {
                $css_rules[] = "{$selector} .pf-select { {$border_css} }";
            }
        }

        // Dropdown border radius - normal
        if ( isset( $attributes['dropdownBorderRadius'] ) && $attributes['dropdownBorderRadius'] !== '' ) {
            $css_rules[] = "{$selector} .pf-select { border-radius: {$attributes['dropdownBorderRadius']}px; }";
        }

        // Dropdown icon color - normal
        if ( ! empty( $attributes['dropdownIconColor'] ) ) {
            $css_rules[] = "{$selector} .pf-select i { color: {$attributes['dropdownIconColor']}; }";
            $css_rules[] = "{$selector} .pf-select svg { fill: {$attributes['dropdownIconColor']}; }";
        }

        // Dropdown icon size
        if ( isset( $attributes['dropdownIconSize'] ) && $attributes['dropdownIconSize'] !== '' ) {
            $css_rules[] = "{$selector} .pf-select i { font-size: {$attributes['dropdownIconSize']}px; }";
            $css_rules[] = "{$selector} .pf-select svg { width: {$attributes['dropdownIconSize']}px; height: {$attributes['dropdownIconSize']}px; }";
        }

        // Dropdown icon/text spacing
        if ( isset( $attributes['dropdownIconTextSpacing'] ) && $attributes['dropdownIconTextSpacing'] !== '' ) {
            $css_rules[] = "{$selector} .pf-select i { margin-right: {$attributes['dropdownIconTextSpacing']}px; }";
            $css_rules[] = "{$selector} .pf-select svg { margin-right: {$attributes['dropdownIconTextSpacing']}px; }";
        }

        // Dropdown chevron visibility
        if ( ! empty( $attributes['dropdownHideChevron'] ) ) {
            $css_rules[] = "{$selector} .pf-select .ts-down-icon { display: none; }";
        }

        // Dropdown chevron color
        if ( ! empty( $attributes['dropdownChevronColor'] ) ) {
            $css_rules[] = "{$selector} .pf-select .ts-down-icon { color: {$attributes['dropdownChevronColor']}; }";
            $css_rules[] = "{$selector} .pf-select .ts-down-icon svg { fill: {$attributes['dropdownChevronColor']}; }";
        }

        // Dropdown hover states

        // Background hover
        if ( ! empty( $attributes['dropdownBackgroundHover'] ) ) {
            $css_rules[] = "{$selector} .pf-select:hover { background-color: {$attributes['dropdownBackgroundHover']}; }";
        }

        // Text color hover
        if ( ! empty( $attributes['dropdownTextColorHover'] ) ) {
            $css_rules[] = "{$selector} .pf-select:hover { color: {$attributes['dropdownTextColorHover']}; }";
        }

        // Border color hover
        if ( ! empty( $attributes['dropdownBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .pf-select:hover { border-color: {$attributes['dropdownBorderColorHover']}; }";
        }

        // Icon color hover
        if ( ! empty( $attributes['dropdownIconColorHover'] ) ) {
            $css_rules[] = "{$selector} .pf-select:hover i { color: {$attributes['dropdownIconColorHover']}; }";
            $css_rules[] = "{$selector} .pf-select:hover svg { fill: {$attributes['dropdownIconColorHover']}; }";
        }

        // Box shadow hover
        if ( ! empty( $attributes['dropdownBoxShadowHover'] ) ) {
            $shadow_css = self::generate_box_shadow_css( $attributes['dropdownBoxShadowHover'] );
            if ( ! empty( $shadow_css ) ) {
                $css_rules[] = "{$selector} .pf-select:hover { {$shadow_css} }";
            }
        }

        // Dropdown filled state (when value selected)

        // Filled typography
        if ( ! empty( $attributes['dropdownFilledTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['dropdownFilledTypography'] );
            if ( ! empty( $typo_css ) ) {
                $css_rules[] = "{$selector} .pf-select.pf-filled { {$typo_css} }";
            }
        }

        // Filled background
        if ( ! empty( $attributes['dropdownFilledBackground'] ) ) {
            $css_rules[] = "{$selector} .pf-select.pf-filled { background-color: {$attributes['dropdownFilledBackground']}; }";
        }

        // Filled text color
        if ( ! empty( $attributes['dropdownFilledTextColor'] ) ) {
            $css_rules[] = "{$selector} .pf-select.pf-filled { color: {$attributes['dropdownFilledTextColor']}; }";
        }

        // Filled icon color
        if ( ! empty( $attributes['dropdownFilledIconColor'] ) ) {
            $css_rules[] = "{$selector} .pf-select.pf-filled i { color: {$attributes['dropdownFilledIconColor']}; }";
            $css_rules[] = "{$selector} .pf-select.pf-filled svg { fill: {$attributes['dropdownFilledIconColor']}; }";
        }

        // Filled border color
        if ( ! empty( $attributes['dropdownFilledBorderColor'] ) ) {
            $css_rules[] = "{$selector} .pf-select.pf-filled { border-color: {$attributes['dropdownFilledBorderColor']}; }";
        }

        // Filled border width
        if ( isset( $attributes['dropdownFilledBorderWidth'] ) && $attributes['dropdownFilledBorderWidth'] !== '' ) {
            $css_rules[] = "{$selector} .pf-select.pf-filled { border-width: {$attributes['dropdownFilledBorderWidth']}px; }";
        }

        // Filled box shadow
        if ( ! empty( $attributes['dropdownFilledBoxShadow'] ) ) {
            $shadow_css = self::generate_box_shadow_css( $attributes['dropdownFilledBoxShadow'] );
            if ( ! empty( $shadow_css ) ) {
                $css_rules[] = "{$selector} .pf-select.pf-filled { {$shadow_css} }";
            }
        }

        // ============================================
        // SECTION: Radio/Checkboxes (Normal + Selected)
        // ============================================

        // Radio/checkbox border color - normal
        if ( ! empty( $attributes['radioCheckboxBorderColor'] ) ) {
            $css_rules[] = "{$selector} .pf-radio-choice, {$selector} .pf-checkbox-choice { border-color: {$attributes['radioCheckboxBorderColor']}; }";
        }

        // Radio/checkbox text typography - normal
        if ( ! empty( $attributes['radioCheckboxTextTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['radioCheckboxTextTypography'] );
            if ( ! empty( $typo_css ) ) {
                $css_rules[] = "{$selector} .pf-radio-choice, {$selector} .pf-checkbox-choice { {$typo_css} }";
            }
        }

        // Radio/checkbox text color - normal
        if ( ! empty( $attributes['radioCheckboxTextColor'] ) ) {
            $css_rules[] = "{$selector} .pf-radio-choice, {$selector} .pf-checkbox-choice { color: {$attributes['radioCheckboxTextColor']}; }";
        }

        // Radio/checkbox selected state

        // Selected background
        if ( ! empty( $attributes['radioCheckboxSelectedBackground'] ) ) {
            $css_rules[] = "{$selector} .pf-radio-choice.pf-selected, {$selector} .pf-checkbox-choice.pf-selected { background-color: {$attributes['radioCheckboxSelectedBackground']}; }";
        }

        // Selected text typography
        if ( ! empty( $attributes['radioCheckboxSelectedTextTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['radioCheckboxSelectedTextTypography'] );
            if ( ! empty( $typo_css ) ) {
                $css_rules[] = "{$selector} .pf-radio-choice.pf-selected, {$selector} .pf-checkbox-choice.pf-selected { {$typo_css} }";
            }
        }

        // Selected text color
        if ( ! empty( $attributes['radioCheckboxSelectedTextColor'] ) ) {
            $css_rules[] = "{$selector} .pf-radio-choice.pf-selected, {$selector} .pf-checkbox-choice.pf-selected { color: {$attributes['radioCheckboxSelectedTextColor']}; }";
        }

        // Selected box shadow
        if ( ! empty( $attributes['radioCheckboxSelectedBoxShadow'] ) ) {
            $shadow_css = self::generate_box_shadow_css( $attributes['radioCheckboxSelectedBoxShadow'] );
            if ( ! empty( $shadow_css ) ) {
                $css_rules[] = "{$selector} .pf-radio-choice.pf-selected, {$selector} .pf-checkbox-choice.pf-selected { {$shadow_css} }";
            }
        }

        // ============================================
        // SECTION: Switcher
        // ============================================

        // Switcher background inactive
        if ( ! empty( $attributes['switcherBackgroundInactive'] ) ) {
            $css_rules[] = "{$selector} .pf-switcher .ts-switcher { background-color: {$attributes['switcherBackgroundInactive']}; }";
        }

        // Switcher background active
        if ( ! empty( $attributes['switcherBackgroundActive'] ) ) {
            $css_rules[] = "{$selector} .pf-switcher input:checked + .ts-switcher { background-color: {$attributes['switcherBackgroundActive']}; }";
        }

        // Switcher handle background
        if ( ! empty( $attributes['switcherHandleBackground'] ) ) {
            $css_rules[] = "{$selector} .pf-switcher .ts-switcher:before { background-color: {$attributes['switcherHandleBackground']}; }";
        }

        // ============================================
        // SECTION: Images (Normal + Selected)
        // ============================================

        // Images gap - normal
        if ( isset( $attributes['imagesGap'] ) && $attributes['imagesGap'] !== '' ) {
            $css_rules[] = "{$selector} .pf-image-choices { gap: {$attributes['imagesGap']}px; }";
        }

        // Images border radius - normal
        if ( isset( $attributes['imagesBorderRadius'] ) && $attributes['imagesBorderRadius'] !== '' ) {
            $css_rules[] = "{$selector} .pf-image-choice { border-radius: {$attributes['imagesBorderRadius']}px; }";
        }

        // Images selected border color
        if ( ! empty( $attributes['imagesSelectedBorderColor'] ) ) {
            $css_rules[] = "{$selector} .pf-image-choice.pf-selected { border-color: {$attributes['imagesSelectedBorderColor']}; }";
        }

        // ============================================
        // SECTION: Colors
        // ============================================

        // Colors gap
        if ( isset( $attributes['colorsGap'] ) && $attributes['colorsGap'] !== '' ) {
            $css_rules[] = "{$selector} .pf-color-choices { gap: {$attributes['colorsGap']}px; }";
        }

        // Colors size
        if ( isset( $attributes['colorsSize'] ) && $attributes['colorsSize'] !== '' ) {
            $css_rules[] = "{$selector} .pf-color-choice { width: {$attributes['colorsSize']}px; height: {$attributes['colorsSize']}px; }";
        }

        // Colors border radius
        if ( isset( $attributes['colorsBorderRadius'] ) && $attributes['colorsBorderRadius'] !== '' ) {
            $css_rules[] = "{$selector} .pf-color-choice { border-radius: {$attributes['colorsBorderRadius']}px; }";
        }

        // Colors inset color
        if ( ! empty( $attributes['colorsInsetColor'] ) ) {
            $css_rules[] = "{$selector} .pf-color-choice { box-shadow: inset 0 0 0 2px {$attributes['colorsInsetColor']}; }";
        }

        // ============================================
        // SECTION: Input and Textarea (Normal + Hover + Active)
        // ============================================

        // Input placeholder color - normal
        if ( ! empty( $attributes['inputPlaceholderColor'] ) ) {
            $css_rules[] = "{$selector} input.pf-input::placeholder, {$selector} textarea.pf-input::placeholder { color: {$attributes['inputPlaceholderColor']}; }";
        }

        // Input placeholder typography - normal
        if ( ! empty( $attributes['inputPlaceholderTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['inputPlaceholderTypography'] );
            if ( ! empty( $typo_css ) ) {
                $css_rules[] = "{$selector} input.pf-input::placeholder, {$selector} textarea.pf-input::placeholder { {$typo_css} }";
            }
        }

        // Input value color - normal
        if ( ! empty( $attributes['inputValueColor'] ) ) {
            $css_rules[] = "{$selector} input.pf-input, {$selector} textarea.pf-input { color: {$attributes['inputValueColor']}; }";
        }

        // Input value typography - normal
        if ( ! empty( $attributes['inputValueTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['inputValueTypography'] );
            if ( ! empty( $typo_css ) ) {
                $css_rules[] = "{$selector} input.pf-input, {$selector} textarea.pf-input { {$typo_css} }";
            }
        }

        // Input background - normal
        if ( ! empty( $attributes['inputBackground'] ) ) {
            $css_rules[] = "{$selector} input.pf-input, {$selector} textarea.pf-input { background-color: {$attributes['inputBackground']}; }";
        }

        // Input border - normal
        if ( ! empty( $attributes['inputBorder'] ) ) {
            $border_css = self::generate_border_css( $attributes['inputBorder'] );
            if ( ! empty( $border_css ) ) {
                $css_rules[] = "{$selector} input.pf-input, {$selector} textarea.pf-input { {$border_css} }";
            }
        }

        // Input border radius - normal
        if ( isset( $attributes['inputBorderRadius'] ) && $attributes['inputBorderRadius'] !== '' ) {
            $css_rules[] = "{$selector} input.pf-input, {$selector} textarea.pf-input { border-radius: {$attributes['inputBorderRadius']}px; }";
        }

        // Input hover states

        // Background hover
        if ( ! empty( $attributes['inputBackgroundHover'] ) ) {
            $css_rules[] = "{$selector} input.pf-input:hover, {$selector} textarea.pf-input:hover { background-color: {$attributes['inputBackgroundHover']}; }";
        }

        // Border color hover
        if ( ! empty( $attributes['inputBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} input.pf-input:hover, {$selector} textarea.pf-input:hover { border-color: {$attributes['inputBorderColorHover']}; }";
        }

        // Placeholder color hover
        if ( ! empty( $attributes['inputPlaceholderColorHover'] ) ) {
            $css_rules[] = "{$selector} input.pf-input:hover::placeholder, {$selector} textarea.pf-input:hover::placeholder { color: {$attributes['inputPlaceholderColorHover']}; }";
        }

        // Text color hover
        if ( ! empty( $attributes['inputTextColorHover'] ) ) {
            $css_rules[] = "{$selector} input.pf-input:hover, {$selector} textarea.pf-input:hover { color: {$attributes['inputTextColorHover']}; }";
        }

        // Input active states (focus)

        // Background active
        if ( ! empty( $attributes['inputBackgroundActive'] ) ) {
            $css_rules[] = "{$selector} input.pf-input:focus, {$selector} textarea.pf-input:focus { background-color: {$attributes['inputBackgroundActive']}; }";
        }

        // Border color active
        if ( ! empty( $attributes['inputBorderColorActive'] ) ) {
            $css_rules[] = "{$selector} input.pf-input:focus, {$selector} textarea.pf-input:focus { border-color: {$attributes['inputBorderColorActive']}; }";
        }

        // Text color active
        if ( ! empty( $attributes['inputTextColorActive'] ) ) {
            $css_rules[] = "{$selector} input.pf-input:focus, {$selector} textarea.pf-input:focus { color: {$attributes['inputTextColorActive']}; }";
        }

        // ============================================
        // Combine CSS with media queries
        // ============================================
        $final_css = '';
        if ( ! empty( $css_rules ) ) {
            $final_css .= implode( "\n", $css_rules );
        }
        if ( ! empty( $tablet_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::TABLET_BREAKPOINT . "px) {\n" . implode( "\n", $tablet_rules ) . "\n}";
        }
        if ( ! empty( $mobile_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::MOBILE_BREAKPOINT . "px) {\n" . implode( "\n", $mobile_rules ) . "\n}";
        }

        return $final_css;
    }

    /**
     * Generate CSS for Login Block
     * Source: app/blocks/src/login/styles.ts (lines 26-1012)
     * Verified: themes/voxel/app/widgets/login.php
     *
     * Sections: 16 total
     * 1. Layout (Content Spacing, Title)
     * 2. Field Label
     * 3. Input (Normal + Hover + Active)
     * 4. Input With Icon
     * 5. Textarea
     * 6. Popup Button (Normal + Hover + Filled)
     * 7. Switcher
     * 8. Checkbox
     * 9. Role Selection
     * 10. Primary Button
     * 11. Secondary Button
     * 12. Google Button
     * 13. Section Divider
     * 14. Welcome Message
     * 15. Form: File/Gallery Upload
     * 16. Form: Dialog
     *
     * @param array  $attributes Block attributes
     * @param string $block_id   Block ID for scoped selector
     * @return string Generated CSS rules
     */
    public static function generate_login_css( $attributes, $block_id ) {
        if ( empty( $block_id ) ) {
            return '';
        }

        $css_rules = [];
        $tablet_rules = [];
        $mobile_rules = [];
        $selector = '.voxel-fse-login-' . $block_id;

        // ==================== LAYOUT ====================

        // Content Spacing
        if ( isset( $attributes['contentSpacing'] ) && $attributes['contentSpacing'] !== '' ) {
            $css_rules[] = "{$selector} .login-section { gap: {$attributes['contentSpacing']}px; }";
        }
        if ( isset( $attributes['contentSpacing_tablet'] ) && $attributes['contentSpacing_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .login-section { gap: {$attributes['contentSpacing_tablet']}px; }";
        }
        if ( isset( $attributes['contentSpacing_mobile'] ) && $attributes['contentSpacing_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .login-section { gap: {$attributes['contentSpacing_mobile']}px; }";
        }

        // Title Typography
        if ( ! empty( $attributes['titleTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['titleTypography'] );
            if ( ! empty( $typo_css ) ) {
                $css_rules[] = "{$selector} .vx-step-title { {$typo_css} }";
            }
        }

        // Title Color
        if ( ! empty( $attributes['titleColor'] ) ) {
            $css_rules[] = "{$selector} .vx-step-title { color: {$attributes['titleColor']}; }";
        }

        // ==================== FIELD LABEL ====================

        $label_selector = "{$selector} .ts-form-group > label";

        // Label Typography
        if ( ! empty( $attributes['fieldLabelTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['fieldLabelTypography'] );
            if ( ! empty( $typo_css ) ) {
                $css_rules[] = "{$label_selector} { {$typo_css} }";
            }
        }

        // Label Color
        if ( ! empty( $attributes['fieldLabelColor'] ) ) {
            $css_rules[] = "{$label_selector} { color: {$attributes['fieldLabelColor']}; }";
        }

        // Label Link Color
        if ( ! empty( $attributes['fieldLabelLinkColor'] ) ) {
            $css_rules[] = "{$label_selector} a { color: {$attributes['fieldLabelLinkColor']}; }";
        }

        // Label Padding
        if ( ! empty( $attributes['fieldLabelPadding'] ) ) {
            $dims_css = self::generate_dimensions_css( $attributes['fieldLabelPadding'] );
            if ( ! empty( $dims_css ) ) {
                $css_rules[] = "{$label_selector} { {$dims_css} }";
            }
        }

        // Optional Label Typography
        if ( ! empty( $attributes['fieldOptionalLabelTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['fieldOptionalLabelTypography'] );
            if ( ! empty( $typo_css ) ) {
                $css_rules[] = "{$label_selector} small { {$typo_css} }";
            }
        }

        // Optional Label Color
        if ( ! empty( $attributes['fieldOptionalLabelColor'] ) ) {
            $css_rules[] = "{$label_selector} small { color: {$attributes['fieldOptionalLabelColor']}; }";
        }

        // ==================== INPUT ====================

        $input_selector = "{$selector} .ts-filter";

        // Placeholder Color
        if ( ! empty( $attributes['fieldInputPlaceholderColor'] ) ) {
            $css_rules[] = "{$input_selector}::placeholder { color: {$attributes['fieldInputPlaceholderColor']}; opacity: 1; }";
        }
        if ( ! empty( $attributes['fieldInputPlaceholderColorHover'] ) ) {
            $css_rules[] = "{$input_selector}:hover::placeholder { color: {$attributes['fieldInputPlaceholderColorHover']}; }";
        }
        if ( ! empty( $attributes['fieldInputPlaceholderColorActive'] ) ) {
            $css_rules[] = "{$input_selector}:focus::placeholder { color: {$attributes['fieldInputPlaceholderColorActive']}; }";
        }

        // Placeholder Typography
        if ( ! empty( $attributes['fieldInputPlaceholderTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['fieldInputPlaceholderTypography'] );
            if ( ! empty( $typo_css ) ) {
                $css_rules[] = "{$input_selector}::placeholder { {$typo_css} }";
            }
        }

        // Input Typography
        if ( ! empty( $attributes['fieldInputTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['fieldInputTypography'] );
            if ( ! empty( $typo_css ) ) {
                $css_rules[] = "{$input_selector} { {$typo_css} }";
            }
        }

        // Input Text Color
        if ( ! empty( $attributes['fieldInputTextColor'] ) ) {
            $css_rules[] = "{$input_selector} { color: {$attributes['fieldInputTextColor']}; }";
        }
        if ( ! empty( $attributes['fieldInputTextColorHover'] ) ) {
            $css_rules[] = "{$input_selector}:hover { color: {$attributes['fieldInputTextColorHover']}; }";
        }
        if ( ! empty( $attributes['fieldInputTextColorActive'] ) ) {
            $css_rules[] = "{$input_selector}:focus { color: {$attributes['fieldInputTextColorActive']}; }";
        }

        // Input Background Color
        if ( ! empty( $attributes['fieldInputBackgroundColor'] ) ) {
            $css_rules[] = "{$input_selector} { background-color: {$attributes['fieldInputBackgroundColor']}; }";
        }
        if ( ! empty( $attributes['fieldInputBackgroundColorHover'] ) ) {
            $css_rules[] = "{$input_selector}:hover { background-color: {$attributes['fieldInputBackgroundColorHover']}; }";
        }
        if ( ! empty( $attributes['fieldInputBackgroundColorActive'] ) ) {
            $css_rules[] = "{$input_selector}:focus { background-color: {$attributes['fieldInputBackgroundColorActive']}; }";
        }

        // Input Border
        if ( ! empty( $attributes['fieldInputBorder'] ) ) {
            $border_css = self::generate_border_css( $attributes['fieldInputBorder'] );
            if ( ! empty( $border_css ) ) {
                $css_rules[] = "{$input_selector} { {$border_css} }";
            }
        }

        if ( ! empty( $attributes['fieldInputBorderColorHover'] ) ) {
            $css_rules[] = "{$input_selector}:hover { border-color: {$attributes['fieldInputBorderColorHover']}; }";
        }
        if ( ! empty( $attributes['fieldInputBorderColorActive'] ) ) {
            $css_rules[] = "{$input_selector}:focus { border-color: {$attributes['fieldInputBorderColorActive']}; }";
        }

        // Input Padding
        if ( ! empty( $attributes['fieldInputPadding'] ) ) {
            $dims_css = self::generate_dimensions_css( $attributes['fieldInputPadding'] );
            if ( ! empty( $dims_css ) ) {
                $css_rules[] = "{$input_selector} { {$dims_css} }";
            }
        }

        // Input Border Radius
        if ( isset( $attributes['fieldInputBorderRadius'] ) && $attributes['fieldInputBorderRadius'] !== '' ) {
            $css_rules[] = "{$input_selector} { border-radius: {$attributes['fieldInputBorderRadius']}px; }";
        }
        if ( isset( $attributes['fieldInputBorderRadius_tablet'] ) && $attributes['fieldInputBorderRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$input_selector} { border-radius: {$attributes['fieldInputBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['fieldInputBorderRadius_mobile'] ) && $attributes['fieldInputBorderRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$input_selector} { border-radius: {$attributes['fieldInputBorderRadius_mobile']}px; }";
        }

        // ==================== INPUT WITH ICON ====================

        $input_group_selector = "{$selector} .ts-input-icon";

        // Icon Input Padding
        if ( ! empty( $attributes['fieldInputIconPadding'] ) ) {
            $dims_css = self::generate_dimensions_css( $attributes['fieldInputIconPadding'] );
            if ( ! empty( $dims_css ) ) {
                $css_rules[] = "{$input_group_selector}.flexify {$input_selector} { {$dims_css} }";
            }
        }

        // Icon Color
        if ( ! empty( $attributes['fieldInputIconColor'] ) ) {
            $css_rules[] = "{$input_group_selector} > i { color: {$attributes['fieldInputIconColor']}; }";
            $css_rules[] = "{$input_group_selector} > svg { fill: {$attributes['fieldInputIconColor']}; }";
        }
        if ( ! empty( $attributes['fieldInputIconColorHover'] ) ) {
            $css_rules[] = "{$input_group_selector}:hover > i { color: {$attributes['fieldInputIconColorHover']}; }";
            $css_rules[] = "{$input_group_selector}:hover > svg { fill: {$attributes['fieldInputIconColorHover']}; }";
        }

        // Icon Size
        if ( isset( $attributes['fieldInputIconSize'] ) && $attributes['fieldInputIconSize'] !== '' ) {
            $css_rules[] = "{$input_group_selector} > i { font-size: {$attributes['fieldInputIconSize']}px; }";
            $css_rules[] = "{$input_group_selector} > svg { width: {$attributes['fieldInputIconSize']}px; height: {$attributes['fieldInputIconSize']}px; }";
        }
        if ( isset( $attributes['fieldInputIconSize_tablet'] ) && $attributes['fieldInputIconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$input_group_selector} > i { font-size: {$attributes['fieldInputIconSize_tablet']}px; }";
            $tablet_rules[] = "{$input_group_selector} > svg { width: {$attributes['fieldInputIconSize_tablet']}px; height: {$attributes['fieldInputIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['fieldInputIconSize_mobile'] ) && $attributes['fieldInputIconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$input_group_selector} > i { font-size: {$attributes['fieldInputIconSize_mobile']}px; }";
            $mobile_rules[] = "{$input_group_selector} > svg { width: {$attributes['fieldInputIconSize_mobile']}px; height: {$attributes['fieldInputIconSize_mobile']}px; }";
        }

        // Icon Side Padding
        if ( isset( $attributes['fieldInputIconSidePadding'] ) && $attributes['fieldInputIconSidePadding'] !== '' ) {
            $css_rules[] = "{$input_group_selector} > i, {$input_group_selector} > svg { left: {$attributes['fieldInputIconSidePadding']}px; }";
        }
        if ( isset( $attributes['fieldInputIconSidePadding_tablet'] ) && $attributes['fieldInputIconSidePadding_tablet'] !== '' ) {
            $tablet_rules[] = "{$input_group_selector} > i, {$input_group_selector} > svg { left: {$attributes['fieldInputIconSidePadding_tablet']}px; }";
        }
        if ( isset( $attributes['fieldInputIconSidePadding_mobile'] ) && $attributes['fieldInputIconSidePadding_mobile'] !== '' ) {
            $mobile_rules[] = "{$input_group_selector} > i, {$input_group_selector} > svg { left: {$attributes['fieldInputIconSidePadding_mobile']}px; }";
        }

        // ==================== TEXTAREA ====================

        $textarea_selector = "{$selector} textarea.ts-filter";

        // Textarea Padding
        if ( ! empty( $attributes['fieldTextareaPadding'] ) ) {
            $dims_css = self::generate_dimensions_css( $attributes['fieldTextareaPadding'] );
            if ( ! empty( $dims_css ) ) {
                $css_rules[] = "{$textarea_selector} { {$dims_css} }";
            }
        }

        // Textarea Height
        if ( isset( $attributes['fieldTextareaHeight'] ) && $attributes['fieldTextareaHeight'] !== '' ) {
            $css_rules[] = "{$textarea_selector} { height: {$attributes['fieldTextareaHeight']}px; min-height: {$attributes['fieldTextareaHeight']}px; }";
        }
        if ( isset( $attributes['fieldTextareaHeight_tablet'] ) && $attributes['fieldTextareaHeight_tablet'] !== '' ) {
            $tablet_rules[] = "{$textarea_selector} { height: {$attributes['fieldTextareaHeight_tablet']}px; min-height: {$attributes['fieldTextareaHeight_tablet']}px; }";
        }
        if ( isset( $attributes['fieldTextareaHeight_mobile'] ) && $attributes['fieldTextareaHeight_mobile'] !== '' ) {
            $mobile_rules[] = "{$textarea_selector} { height: {$attributes['fieldTextareaHeight_mobile']}px; min-height: {$attributes['fieldTextareaHeight_mobile']}px; }";
        }

        // Textarea Border Radius
        if ( isset( $attributes['fieldTextareaBorderRadius'] ) && $attributes['fieldTextareaBorderRadius'] !== '' ) {
            $css_rules[] = "{$textarea_selector} { border-radius: {$attributes['fieldTextareaBorderRadius']}px; }";
        }
        if ( isset( $attributes['fieldTextareaBorderRadius_tablet'] ) && $attributes['fieldTextareaBorderRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$textarea_selector} { border-radius: {$attributes['fieldTextareaBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['fieldTextareaBorderRadius_mobile'] ) && $attributes['fieldTextareaBorderRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$textarea_selector} { border-radius: {$attributes['fieldTextareaBorderRadius_mobile']}px; }";
        }

        // ==================== POPUP BUTTON ====================

        $popup_btn_selector = "{$selector} .ts-filter.ts-popup-target";

        // Popup Button Typography
        if ( ! empty( $attributes['fieldPopupBtnTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['fieldPopupBtnTypography'] );
            if ( ! empty( $typo_css ) ) {
                $css_rules[] = "{$popup_btn_selector} { {$typo_css} }";
            }
        }

        // Popup Button Padding
        if ( ! empty( $attributes['fieldPopupBtnPadding'] ) ) {
            $dims_css = self::generate_dimensions_css( $attributes['fieldPopupBtnPadding'] );
            if ( ! empty( $dims_css ) ) {
                $css_rules[] = "{$popup_btn_selector} { {$dims_css} }";
            }
        }

        // Popup Button Height
        if ( isset( $attributes['fieldPopupBtnHeight'] ) && $attributes['fieldPopupBtnHeight'] !== '' ) {
            $css_rules[] = "{$popup_btn_selector} { height: {$attributes['fieldPopupBtnHeight']}px; line-height: {$attributes['fieldPopupBtnHeight']}px; }";
        }
        if ( isset( $attributes['fieldPopupBtnHeight_tablet'] ) && $attributes['fieldPopupBtnHeight_tablet'] !== '' ) {
            $tablet_rules[] = "{$popup_btn_selector} { height: {$attributes['fieldPopupBtnHeight_tablet']}px; line-height: {$attributes['fieldPopupBtnHeight_tablet']}px; }";
        }
        if ( isset( $attributes['fieldPopupBtnHeight_mobile'] ) && $attributes['fieldPopupBtnHeight_mobile'] !== '' ) {
            $mobile_rules[] = "{$popup_btn_selector} { height: {$attributes['fieldPopupBtnHeight_mobile']}px; line-height: {$attributes['fieldPopupBtnHeight_mobile']}px; }";
        }

        // Popup Button Box Shadow
        if ( ! empty( $attributes['fieldPopupBtnBoxShadow'] ) ) {
            $shadow_css = self::generate_box_shadow_css( $attributes['fieldPopupBtnBoxShadow'] );
            if ( ! empty( $shadow_css ) ) {
                $css_rules[] = "{$popup_btn_selector} { {$shadow_css} }";
            }
        }

        // Popup Button Colors
        if ( ! empty( $attributes['fieldPopupBtnBackgroundColor'] ) ) {
            $css_rules[] = "{$popup_btn_selector} { background-color: {$attributes['fieldPopupBtnBackgroundColor']}; }";
        }
        if ( ! empty( $attributes['fieldPopupBtnTextColor'] ) ) {
            $css_rules[] = "{$popup_btn_selector} { color: {$attributes['fieldPopupBtnTextColor']}; }";
        }

        // Popup Button Border
        if ( ! empty( $attributes['fieldPopupBtnBorder'] ) ) {
            $border_css = self::generate_border_css( $attributes['fieldPopupBtnBorder'] );
            if ( ! empty( $border_css ) ) {
                $css_rules[] = "{$popup_btn_selector} { {$border_css} }";
            }
        }

        // Popup Button Border Radius
        if ( isset( $attributes['fieldPopupBtnBorderRadius'] ) && $attributes['fieldPopupBtnBorderRadius'] !== '' ) {
            $css_rules[] = "{$popup_btn_selector} { border-radius: {$attributes['fieldPopupBtnBorderRadius']}px; }";
        }
        if ( isset( $attributes['fieldPopupBtnBorderRadius_tablet'] ) && $attributes['fieldPopupBtnBorderRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$popup_btn_selector} { border-radius: {$attributes['fieldPopupBtnBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['fieldPopupBtnBorderRadius_mobile'] ) && $attributes['fieldPopupBtnBorderRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$popup_btn_selector} { border-radius: {$attributes['fieldPopupBtnBorderRadius_mobile']}px; }";
        }

        // Popup Button Icon
        $popup_icon_selector = "{$popup_btn_selector} i, {$popup_btn_selector} svg";

        if ( ! empty( $attributes['fieldPopupBtnIconColor'] ) ) {
            $css_rules[] = "{$popup_icon_selector} { color: {$attributes['fieldPopupBtnIconColor']}; fill: {$attributes['fieldPopupBtnIconColor']}; }";
        }

        if ( isset( $attributes['fieldPopupBtnIconSize'] ) && $attributes['fieldPopupBtnIconSize'] !== '' ) {
            $css_rules[] = "{$popup_icon_selector} { font-size: {$attributes['fieldPopupBtnIconSize']}px; width: {$attributes['fieldPopupBtnIconSize']}px; height: {$attributes['fieldPopupBtnIconSize']}px; }";
        }
        if ( isset( $attributes['fieldPopupBtnIconSize_tablet'] ) && $attributes['fieldPopupBtnIconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$popup_icon_selector} { font-size: {$attributes['fieldPopupBtnIconSize_tablet']}px; width: {$attributes['fieldPopupBtnIconSize_tablet']}px; height: {$attributes['fieldPopupBtnIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['fieldPopupBtnIconSize_mobile'] ) && $attributes['fieldPopupBtnIconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$popup_icon_selector} { font-size: {$attributes['fieldPopupBtnIconSize_mobile']}px; width: {$attributes['fieldPopupBtnIconSize_mobile']}px; height: {$attributes['fieldPopupBtnIconSize_mobile']}px; }";
        }

        // Icon Spacing
        if ( isset( $attributes['fieldPopupBtnIconSpacing'] ) && $attributes['fieldPopupBtnIconSpacing'] !== '' ) {
            $css_rules[] = "{$popup_btn_selector} { gap: {$attributes['fieldPopupBtnIconSpacing']}px; }";
        }
        if ( isset( $attributes['fieldPopupBtnIconSpacing_tablet'] ) && $attributes['fieldPopupBtnIconSpacing_tablet'] !== '' ) {
            $tablet_rules[] = "{$popup_btn_selector} { gap: {$attributes['fieldPopupBtnIconSpacing_tablet']}px; }";
        }
        if ( isset( $attributes['fieldPopupBtnIconSpacing_mobile'] ) && $attributes['fieldPopupBtnIconSpacing_mobile'] !== '' ) {
            $mobile_rules[] = "{$popup_btn_selector} { gap: {$attributes['fieldPopupBtnIconSpacing_mobile']}px; }";
        }

        // Chevron
        if ( ! empty( $attributes['fieldPopupBtnHideChevron'] ) ) {
            $css_rules[] = "{$popup_btn_selector} .ts-down-icon { display: none; }";
        }
        if ( ! empty( $attributes['fieldPopupBtnChevronColor'] ) ) {
            $css_rules[] = "{$popup_btn_selector} .ts-down-icon { color: {$attributes['fieldPopupBtnChevronColor']}; }";
        }

        // Popup Button Hover State
        if ( ! empty( $attributes['fieldPopupBtnBackgroundColorHover'] ) ) {
            $css_rules[] = "{$popup_btn_selector}:hover { background-color: {$attributes['fieldPopupBtnBackgroundColorHover']}; }";
        }
        if ( ! empty( $attributes['fieldPopupBtnTextColorHover'] ) ) {
            $css_rules[] = "{$popup_btn_selector}:hover { color: {$attributes['fieldPopupBtnTextColorHover']}; }";
        }
        if ( ! empty( $attributes['fieldPopupBtnBorderColorHover'] ) ) {
            $css_rules[] = "{$popup_btn_selector}:hover { border-color: {$attributes['fieldPopupBtnBorderColorHover']}; }";
        }
        if ( ! empty( $attributes['fieldPopupBtnIconColorHover'] ) ) {
            $css_rules[] = "{$popup_btn_selector}:hover i { color: {$attributes['fieldPopupBtnIconColorHover']}; }";
            $css_rules[] = "{$popup_btn_selector}:hover svg { fill: {$attributes['fieldPopupBtnIconColorHover']}; }";
        }
        if ( ! empty( $attributes['fieldPopupBtnBoxShadowHover'] ) ) {
            $shadow_css = self::generate_box_shadow_css( $attributes['fieldPopupBtnBoxShadowHover'] );
            if ( ! empty( $shadow_css ) ) {
                $css_rules[] = "{$popup_btn_selector}:hover { {$shadow_css} }";
            }
        }

        // Popup Button Filled State
        $popup_filled_selector = "{$selector} .ts-filter.ts-popup-target.ts-filled";

        if ( ! empty( $attributes['fieldPopupBtnFilledTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['fieldPopupBtnFilledTypography'] );
            if ( ! empty( $typo_css ) ) {
                $css_rules[] = "{$popup_filled_selector} { {$typo_css} }";
            }
        }

        if ( ! empty( $attributes['fieldPopupBtnFilledBackground'] ) ) {
            $css_rules[] = "{$popup_filled_selector} { background-color: {$attributes['fieldPopupBtnFilledBackground']}; }";
        }
        if ( ! empty( $attributes['fieldPopupBtnFilledTextColor'] ) ) {
            $css_rules[] = "{$popup_filled_selector} { color: {$attributes['fieldPopupBtnFilledTextColor']}; }";
        }
        if ( ! empty( $attributes['fieldPopupBtnFilledIconColor'] ) ) {
            $css_rules[] = "{$popup_filled_selector} i { color: {$attributes['fieldPopupBtnFilledIconColor']}; }";
            $css_rules[] = "{$popup_filled_selector} svg { fill: {$attributes['fieldPopupBtnFilledIconColor']}; }";
        }
        if ( ! empty( $attributes['fieldPopupBtnFilledBorderColor'] ) ) {
            $css_rules[] = "{$popup_filled_selector} { border-color: {$attributes['fieldPopupBtnFilledBorderColor']}; }";
        }
        if ( isset( $attributes['fieldPopupBtnFilledBorderWidth'] ) && $attributes['fieldPopupBtnFilledBorderWidth'] !== '' ) {
            $css_rules[] = "{$popup_filled_selector} { border-width: {$attributes['fieldPopupBtnFilledBorderWidth']}px; }";
        }
        if ( isset( $attributes['fieldPopupBtnFilledBorderWidth_tablet'] ) && $attributes['fieldPopupBtnFilledBorderWidth_tablet'] !== '' ) {
            $tablet_rules[] = "{$popup_filled_selector} { border-width: {$attributes['fieldPopupBtnFilledBorderWidth_tablet']}px; }";
        }
        if ( isset( $attributes['fieldPopupBtnFilledBorderWidth_mobile'] ) && $attributes['fieldPopupBtnFilledBorderWidth_mobile'] !== '' ) {
            $mobile_rules[] = "{$popup_filled_selector} { border-width: {$attributes['fieldPopupBtnFilledBorderWidth_mobile']}px; }";
        }
        if ( ! empty( $attributes['fieldPopupBtnFilledBoxShadow'] ) ) {
            $shadow_css = self::generate_box_shadow_css( $attributes['fieldPopupBtnFilledBoxShadow'] );
            if ( ! empty( $shadow_css ) ) {
                $css_rules[] = "{$popup_filled_selector} { {$shadow_css} }";
            }
        }

        // ==================== SWITCHER ====================

        $switch_label_selector = "{$selector} .onoffswitch-label";
        $switch_checkbox_selector = "{$selector} .onoffswitch-checkbox";

        if ( ! empty( $attributes['fieldSwitcherBackgroundColor'] ) ) {
            $css_rules[] = "{$switch_label_selector} { background-color: {$attributes['fieldSwitcherBackgroundColor']}; }";
        }
        if ( ! empty( $attributes['fieldSwitcherBackgroundColorActive'] ) ) {
            $css_rules[] = "{$switch_checkbox_selector}:checked + {$switch_label_selector} { background-color: {$attributes['fieldSwitcherBackgroundColorActive']}; }";
        }
        if ( ! empty( $attributes['fieldSwitcherHandleColor'] ) ) {
            $css_rules[] = "{$switch_label_selector}:before { background-color: {$attributes['fieldSwitcherHandleColor']}; }";
        }

        // ==================== CHECKBOX ====================

        $checkbox_selector = "{$selector} .container-checkbox .checkmark";
        $checkbox_checked_selector = "{$selector} .container-checkbox input:checked ~ .checkmark";

        // Checkbox Size
        if ( isset( $attributes['fieldCheckboxSize'] ) && $attributes['fieldCheckboxSize'] !== '' ) {
            $css_rules[] = "{$checkbox_selector} { width: {$attributes['fieldCheckboxSize']}px; height: {$attributes['fieldCheckboxSize']}px; }";
        }
        if ( isset( $attributes['fieldCheckboxSize_tablet'] ) && $attributes['fieldCheckboxSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$checkbox_selector} { width: {$attributes['fieldCheckboxSize_tablet']}px; height: {$attributes['fieldCheckboxSize_tablet']}px; }";
        }
        if ( isset( $attributes['fieldCheckboxSize_mobile'] ) && $attributes['fieldCheckboxSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$checkbox_selector} { width: {$attributes['fieldCheckboxSize_mobile']}px; height: {$attributes['fieldCheckboxSize_mobile']}px; }";
        }

        // Checkbox Border Radius
        if ( isset( $attributes['fieldCheckboxBorderRadius'] ) && $attributes['fieldCheckboxBorderRadius'] !== '' ) {
            $css_rules[] = "{$checkbox_selector} { border-radius: {$attributes['fieldCheckboxBorderRadius']}px; }";
        }
        if ( isset( $attributes['fieldCheckboxBorderRadius_tablet'] ) && $attributes['fieldCheckboxBorderRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$checkbox_selector} { border-radius: {$attributes['fieldCheckboxBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['fieldCheckboxBorderRadius_mobile'] ) && $attributes['fieldCheckboxBorderRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$checkbox_selector} { border-radius: {$attributes['fieldCheckboxBorderRadius_mobile']}px; }";
        }

        // Checkbox Border
        if ( ! empty( $attributes['fieldCheckboxBorder'] ) ) {
            $border_css = self::generate_border_css( $attributes['fieldCheckboxBorder'] );
            if ( ! empty( $border_css ) ) {
                $css_rules[] = "{$checkbox_selector} { {$border_css} }";
            }
        }

        // Checkbox Colors
        if ( ! empty( $attributes['fieldCheckboxBackgroundColor'] ) ) {
            $css_rules[] = "{$checkbox_selector} { background-color: {$attributes['fieldCheckboxBackgroundColor']}; }";
        }
        if ( ! empty( $attributes['fieldCheckboxBackgroundColorChecked'] ) ) {
            $css_rules[] = "{$checkbox_checked_selector} { background-color: {$attributes['fieldCheckboxBackgroundColorChecked']}; }";
        }
        if ( ! empty( $attributes['fieldCheckboxBorderColorChecked'] ) ) {
            $css_rules[] = "{$checkbox_checked_selector} { border-color: {$attributes['fieldCheckboxBorderColorChecked']}; }";
        }

        // ==================== ROLE SELECTION ====================

        $role_selector = "{$selector} .ts-role-item";

        // Role Min Width
        if ( isset( $attributes['roleMinWidth'] ) && $attributes['roleMinWidth'] !== '' ) {
            $css_rules[] = "{$role_selector} { min-width: {$attributes['roleMinWidth']}px; }";
        }
        if ( isset( $attributes['roleMinWidth_tablet'] ) && $attributes['roleMinWidth_tablet'] !== '' ) {
            $tablet_rules[] = "{$role_selector} { min-width: {$attributes['roleMinWidth_tablet']}px; }";
        }
        if ( isset( $attributes['roleMinWidth_mobile'] ) && $attributes['roleMinWidth_mobile'] !== '' ) {
            $mobile_rules[] = "{$role_selector} { min-width: {$attributes['roleMinWidth_mobile']}px; }";
        }

        // Role Border
        if ( ! empty( $attributes['roleBorder'] ) ) {
            $border_css = self::generate_border_css( $attributes['roleBorder'] );
            if ( ! empty( $border_css ) ) {
                $css_rules[] = "{$role_selector} { {$border_css} }";
            }
        }

        // Role Border Radius
        if ( isset( $attributes['roleBorderRadius'] ) && $attributes['roleBorderRadius'] !== '' ) {
            $css_rules[] = "{$role_selector} { border-radius: {$attributes['roleBorderRadius']}px; }";
        }
        if ( isset( $attributes['roleBorderRadius_tablet'] ) && $attributes['roleBorderRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$role_selector} { border-radius: {$attributes['roleBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['roleBorderRadius_mobile'] ) && $attributes['roleBorderRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$role_selector} { border-radius: {$attributes['roleBorderRadius_mobile']}px; }";
        }

        // Role Typography
        if ( ! empty( $attributes['roleTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['roleTypography'] );
            if ( ! empty( $typo_css ) ) {
                $css_rules[] = "{$role_selector} { {$typo_css} }";
            }
        }

        // Role Colors
        if ( ! empty( $attributes['roleSeparatorColor'] ) ) {
            $css_rules[] = "{$role_selector} { border-color: {$attributes['roleSeparatorColor']}; }";
        }
        if ( ! empty( $attributes['roleTextColor'] ) ) {
            $css_rules[] = "{$role_selector} { color: {$attributes['roleTextColor']}; }";
        }
        if ( ! empty( $attributes['roleBackgroundColor'] ) ) {
            $css_rules[] = "{$role_selector} { background-color: {$attributes['roleBackgroundColor']}; }";
        }

        // Role Active State
        $role_active_selector = "{$selector} .ts-role-item.current";

        if ( ! empty( $attributes['roleActiveTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['roleActiveTypography'] );
            if ( ! empty( $typo_css ) ) {
                $css_rules[] = "{$role_active_selector} { {$typo_css} }";
            }
        }

        if ( ! empty( $attributes['roleActiveTextColor'] ) ) {
            $css_rules[] = "{$role_active_selector} { color: {$attributes['roleActiveTextColor']}; }";
        }
        if ( ! empty( $attributes['roleActiveBackgroundColor'] ) ) {
            $css_rules[] = "{$role_active_selector} { background-color: {$attributes['roleActiveBackgroundColor']}; }";
        }

        // ==================== PRIMARY BUTTON ====================

        $primary_btn_selector = "{$selector} .ts-btn.ts-btn-1";

        if ( ! empty( $attributes['primaryBtnTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['primaryBtnTypography'] );
            if ( ! empty( $typo_css ) ) {
                $css_rules[] = "{$primary_btn_selector} { {$typo_css} }";
            }
        }

        if ( isset( $attributes['primaryBtnBorderRadius'] ) && $attributes['primaryBtnBorderRadius'] !== '' ) {
            $css_rules[] = "{$primary_btn_selector} { border-radius: {$attributes['primaryBtnBorderRadius']}px; }";
        }
        if ( isset( $attributes['primaryBtnBorderRadius_tablet'] ) && $attributes['primaryBtnBorderRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$primary_btn_selector} { border-radius: {$attributes['primaryBtnBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['primaryBtnBorderRadius_mobile'] ) && $attributes['primaryBtnBorderRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$primary_btn_selector} { border-radius: {$attributes['primaryBtnBorderRadius_mobile']}px; }";
        }

        if ( ! empty( $attributes['primaryBtnTextColor'] ) ) {
            $css_rules[] = "{$primary_btn_selector} { color: {$attributes['primaryBtnTextColor']}; }";
        }

        if ( ! empty( $attributes['primaryBtnPadding'] ) ) {
            $dims_css = self::generate_dimensions_css( $attributes['primaryBtnPadding'] );
            if ( ! empty( $dims_css ) ) {
                $css_rules[] = "{$primary_btn_selector} { {$dims_css} }";
            }
        }

        if ( isset( $attributes['primaryBtnHeight'] ) && $attributes['primaryBtnHeight'] !== '' ) {
            $css_rules[] = "{$primary_btn_selector} { height: {$attributes['primaryBtnHeight']}px; min-height: {$attributes['primaryBtnHeight']}px; }";
        }
        if ( isset( $attributes['primaryBtnHeight_tablet'] ) && $attributes['primaryBtnHeight_tablet'] !== '' ) {
            $tablet_rules[] = "{$primary_btn_selector} { height: {$attributes['primaryBtnHeight_tablet']}px; min-height: {$attributes['primaryBtnHeight_tablet']}px; }";
        }
        if ( isset( $attributes['primaryBtnHeight_mobile'] ) && $attributes['primaryBtnHeight_mobile'] !== '' ) {
            $mobile_rules[] = "{$primary_btn_selector} { height: {$attributes['primaryBtnHeight_mobile']}px; min-height: {$attributes['primaryBtnHeight_mobile']}px; }";
        }

        if ( ! empty( $attributes['primaryBtnBackgroundColor'] ) ) {
            $css_rules[] = "{$primary_btn_selector} { background-color: {$attributes['primaryBtnBackgroundColor']}; }";
        }

        if ( ! empty( $attributes['primaryBtnBorder'] ) ) {
            $border_css = self::generate_border_css( $attributes['primaryBtnBorder'] );
            if ( ! empty( $border_css ) ) {
                $css_rules[] = "{$primary_btn_selector} { {$border_css} }";
            }
        }

        $primary_btn_icon_selector = "{$primary_btn_selector} i, {$primary_btn_selector} svg";

        if ( isset( $attributes['primaryBtnIconSize'] ) && $attributes['primaryBtnIconSize'] !== '' ) {
            $css_rules[] = "{$primary_btn_icon_selector} { font-size: {$attributes['primaryBtnIconSize']}px; width: {$attributes['primaryBtnIconSize']}px; height: {$attributes['primaryBtnIconSize']}px; }";
        }
        if ( isset( $attributes['primaryBtnIconSize_tablet'] ) && $attributes['primaryBtnIconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$primary_btn_icon_selector} { font-size: {$attributes['primaryBtnIconSize_tablet']}px; width: {$attributes['primaryBtnIconSize_tablet']}px; height: {$attributes['primaryBtnIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['primaryBtnIconSize_mobile'] ) && $attributes['primaryBtnIconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$primary_btn_icon_selector} { font-size: {$attributes['primaryBtnIconSize_mobile']}px; width: {$attributes['primaryBtnIconSize_mobile']}px; height: {$attributes['primaryBtnIconSize_mobile']}px; }";
        }

        if ( isset( $attributes['primaryBtnIconSpacing'] ) && $attributes['primaryBtnIconSpacing'] !== '' ) {
            $css_rules[] = "{$primary_btn_selector} { gap: {$attributes['primaryBtnIconSpacing']}px; }";
        }
        if ( isset( $attributes['primaryBtnIconSpacing_tablet'] ) && $attributes['primaryBtnIconSpacing_tablet'] !== '' ) {
            $tablet_rules[] = "{$primary_btn_selector} { gap: {$attributes['primaryBtnIconSpacing_tablet']}px; }";
        }
        if ( isset( $attributes['primaryBtnIconSpacing_mobile'] ) && $attributes['primaryBtnIconSpacing_mobile'] !== '' ) {
            $mobile_rules[] = "{$primary_btn_selector} { gap: {$attributes['primaryBtnIconSpacing_mobile']}px; }";
        }

        if ( ! empty( $attributes['primaryBtnIconColor'] ) ) {
            $css_rules[] = "{$primary_btn_icon_selector} { color: {$attributes['primaryBtnIconColor']}; fill: {$attributes['primaryBtnIconColor']}; }";
        }

        if ( ! empty( $attributes['primaryBtnTextColorHover'] ) ) {
            $css_rules[] = "{$primary_btn_selector}:hover { color: {$attributes['primaryBtnTextColorHover']}; }";
        }
        if ( ! empty( $attributes['primaryBtnBackgroundColorHover'] ) ) {
            $css_rules[] = "{$primary_btn_selector}:hover { background-color: {$attributes['primaryBtnBackgroundColorHover']}; }";
        }
        if ( ! empty( $attributes['primaryBtnBorderColorHover'] ) ) {
            $css_rules[] = "{$primary_btn_selector}:hover { border-color: {$attributes['primaryBtnBorderColorHover']}; }";
        }
        if ( ! empty( $attributes['primaryBtnIconColorHover'] ) ) {
            $css_rules[] = "{$primary_btn_selector}:hover i { color: {$attributes['primaryBtnIconColorHover']}; }";
            $css_rules[] = "{$primary_btn_selector}:hover svg { fill: {$attributes['primaryBtnIconColorHover']}; }";
        }

        // ==================== SECONDARY BUTTON ====================

        $secondary_btn_selector = "{$selector} .ts-btn.ts-btn-2";

        if ( ! empty( $attributes['secondaryBtnTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['secondaryBtnTypography'] );
            if ( ! empty( $typo_css ) ) {
                $css_rules[] = "{$secondary_btn_selector} { {$typo_css} }";
            }
        }

        if ( isset( $attributes['secondaryBtnBorderRadius'] ) && $attributes['secondaryBtnBorderRadius'] !== '' ) {
            $css_rules[] = "{$secondary_btn_selector} { border-radius: {$attributes['secondaryBtnBorderRadius']}px; }";
        }
        if ( isset( $attributes['secondaryBtnBorderRadius_tablet'] ) && $attributes['secondaryBtnBorderRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$secondary_btn_selector} { border-radius: {$attributes['secondaryBtnBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['secondaryBtnBorderRadius_mobile'] ) && $attributes['secondaryBtnBorderRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$secondary_btn_selector} { border-radius: {$attributes['secondaryBtnBorderRadius_mobile']}px; }";
        }

        if ( ! empty( $attributes['secondaryBtnTextColor'] ) ) {
            $css_rules[] = "{$secondary_btn_selector} { color: {$attributes['secondaryBtnTextColor']}; }";
        }

        if ( ! empty( $attributes['secondaryBtnPadding'] ) ) {
            $dims_css = self::generate_dimensions_css( $attributes['secondaryBtnPadding'] );
            if ( ! empty( $dims_css ) ) {
                $css_rules[] = "{$secondary_btn_selector} { {$dims_css} }";
            }
        }

        if ( isset( $attributes['secondaryBtnHeight'] ) && $attributes['secondaryBtnHeight'] !== '' ) {
            $css_rules[] = "{$secondary_btn_selector} { height: {$attributes['secondaryBtnHeight']}px; min-height: {$attributes['secondaryBtnHeight']}px; }";
        }
        if ( isset( $attributes['secondaryBtnHeight_tablet'] ) && $attributes['secondaryBtnHeight_tablet'] !== '' ) {
            $tablet_rules[] = "{$secondary_btn_selector} { height: {$attributes['secondaryBtnHeight_tablet']}px; min-height: {$attributes['secondaryBtnHeight_tablet']}px; }";
        }
        if ( isset( $attributes['secondaryBtnHeight_mobile'] ) && $attributes['secondaryBtnHeight_mobile'] !== '' ) {
            $mobile_rules[] = "{$secondary_btn_selector} { height: {$attributes['secondaryBtnHeight_mobile']}px; min-height: {$attributes['secondaryBtnHeight_mobile']}px; }";
        }

        if ( ! empty( $attributes['secondaryBtnBackgroundColor'] ) ) {
            $css_rules[] = "{$secondary_btn_selector} { background-color: {$attributes['secondaryBtnBackgroundColor']}; }";
        }

        if ( ! empty( $attributes['secondaryBtnBorder'] ) ) {
            $border_css = self::generate_border_css( $attributes['secondaryBtnBorder'] );
            if ( ! empty( $border_css ) ) {
                $css_rules[] = "{$secondary_btn_selector} { {$border_css} }";
            }
        }

        $secondary_btn_icon_selector = "{$secondary_btn_selector} i, {$secondary_btn_selector} svg";

        if ( isset( $attributes['secondaryBtnIconSize'] ) && $attributes['secondaryBtnIconSize'] !== '' ) {
            $css_rules[] = "{$secondary_btn_icon_selector} { font-size: {$attributes['secondaryBtnIconSize']}px; width: {$attributes['secondaryBtnIconSize']}px; height: {$attributes['secondaryBtnIconSize']}px; }";
        }
        if ( isset( $attributes['secondaryBtnIconSize_tablet'] ) && $attributes['secondaryBtnIconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$secondary_btn_icon_selector} { font-size: {$attributes['secondaryBtnIconSize_tablet']}px; width: {$attributes['secondaryBtnIconSize_tablet']}px; height: {$attributes['secondaryBtnIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['secondaryBtnIconSize_mobile'] ) && $attributes['secondaryBtnIconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$secondary_btn_icon_selector} { font-size: {$attributes['secondaryBtnIconSize_mobile']}px; width: {$attributes['secondaryBtnIconSize_mobile']}px; height: {$attributes['secondaryBtnIconSize_mobile']}px; }";
        }

        if ( isset( $attributes['secondaryBtnIconSpacing'] ) && $attributes['secondaryBtnIconSpacing'] !== '' ) {
            $css_rules[] = "{$secondary_btn_selector} { gap: {$attributes['secondaryBtnIconSpacing']}px; }";
        }
        if ( isset( $attributes['secondaryBtnIconSpacing_tablet'] ) && $attributes['secondaryBtnIconSpacing_tablet'] !== '' ) {
            $tablet_rules[] = "{$secondary_btn_selector} { gap: {$attributes['secondaryBtnIconSpacing_tablet']}px; }";
        }
        if ( isset( $attributes['secondaryBtnIconSpacing_mobile'] ) && $attributes['secondaryBtnIconSpacing_mobile'] !== '' ) {
            $mobile_rules[] = "{$secondary_btn_selector} { gap: {$attributes['secondaryBtnIconSpacing_mobile']}px; }";
        }

        if ( ! empty( $attributes['secondaryBtnIconColor'] ) ) {
            $css_rules[] = "{$secondary_btn_icon_selector} { color: {$attributes['secondaryBtnIconColor']}; fill: {$attributes['secondaryBtnIconColor']}; }";
        }

        if ( ! empty( $attributes['secondaryBtnTextColorHover'] ) ) {
            $css_rules[] = "{$secondary_btn_selector}:hover { color: {$attributes['secondaryBtnTextColorHover']}; }";
        }
        if ( ! empty( $attributes['secondaryBtnBackgroundColorHover'] ) ) {
            $css_rules[] = "{$secondary_btn_selector}:hover { background-color: {$attributes['secondaryBtnBackgroundColorHover']}; }";
        }
        if ( ! empty( $attributes['secondaryBtnBorderColorHover'] ) ) {
            $css_rules[] = "{$secondary_btn_selector}:hover { border-color: {$attributes['secondaryBtnBorderColorHover']}; }";
        }
        if ( ! empty( $attributes['secondaryBtnIconColorHover'] ) ) {
            $css_rules[] = "{$secondary_btn_selector}:hover i { color: {$attributes['secondaryBtnIconColorHover']}; }";
            $css_rules[] = "{$secondary_btn_selector}:hover svg { fill: {$attributes['secondaryBtnIconColorHover']}; }";
        }

        // ==================== GOOGLE BUTTON ====================

        $google_btn_selector = "{$selector} .ts-btn.ts-google-btn";

        if ( ! empty( $attributes['googleBtnTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['googleBtnTypography'] );
            if ( ! empty( $typo_css ) ) {
                $css_rules[] = "{$google_btn_selector} { {$typo_css} }";
            }
        }

        if ( isset( $attributes['googleBtnBorderRadius'] ) && $attributes['googleBtnBorderRadius'] !== '' ) {
            $css_rules[] = "{$google_btn_selector} { border-radius: {$attributes['googleBtnBorderRadius']}px; }";
        }

        if ( ! empty( $attributes['googleBtnTextColor'] ) ) {
            $css_rules[] = "{$google_btn_selector} { color: {$attributes['googleBtnTextColor']}; }";
        }

        if ( ! empty( $attributes['googleBtnPadding'] ) ) {
            $dims_css = self::generate_dimensions_css( $attributes['googleBtnPadding'] );
            if ( ! empty( $dims_css ) ) {
                $css_rules[] = "{$google_btn_selector} { {$dims_css} }";
            }
        }

        if ( isset( $attributes['googleBtnHeight'] ) && $attributes['googleBtnHeight'] !== '' ) {
            $css_rules[] = "{$google_btn_selector} { height: {$attributes['googleBtnHeight']}px; min-height: {$attributes['googleBtnHeight']}px; }";
        }

        if ( ! empty( $attributes['googleBtnBackgroundColor'] ) ) {
            $css_rules[] = "{$google_btn_selector} { background-color: {$attributes['googleBtnBackgroundColor']}; }";
        }

        if ( ! empty( $attributes['googleBtnBorder'] ) ) {
            $border_css = self::generate_border_css( $attributes['googleBtnBorder'] );
            if ( ! empty( $border_css ) ) {
                $css_rules[] = "{$google_btn_selector} { {$border_css} }";
            }
        }

        $google_btn_icon_selector = "{$google_btn_selector} i, {$google_btn_selector} svg";

        if ( isset( $attributes['googleBtnIconSize'] ) && $attributes['googleBtnIconSize'] !== '' ) {
            $css_rules[] = "{$google_btn_icon_selector} { font-size: {$attributes['googleBtnIconSize']}px; width: {$attributes['googleBtnIconSize']}px; height: {$attributes['googleBtnIconSize']}px; }";
        }

        if ( isset( $attributes['googleBtnIconSpacing'] ) && $attributes['googleBtnIconSpacing'] !== '' ) {
            $css_rules[] = "{$google_btn_selector} { gap: {$attributes['googleBtnIconSpacing']}px; }";
        }

        if ( ! empty( $attributes['googleBtnIconColor'] ) ) {
            $css_rules[] = "{$google_btn_icon_selector} { color: {$attributes['googleBtnIconColor']}; fill: {$attributes['googleBtnIconColor']}; }";
        }

        if ( ! empty( $attributes['googleBtnTextColorHover'] ) ) {
            $css_rules[] = "{$google_btn_selector}:hover { color: {$attributes['googleBtnTextColorHover']}; }";
        }
        if ( ! empty( $attributes['googleBtnBackgroundColorHover'] ) ) {
            $css_rules[] = "{$google_btn_selector}:hover { background-color: {$attributes['googleBtnBackgroundColorHover']}; }";
        }
        if ( ! empty( $attributes['googleBtnBorderColorHover'] ) ) {
            $css_rules[] = "{$google_btn_selector}:hover { border-color: {$attributes['googleBtnBorderColorHover']}; }";
        }
        if ( ! empty( $attributes['googleBtnIconColorHover'] ) ) {
            $css_rules[] = "{$google_btn_selector}:hover i { color: {$attributes['googleBtnIconColorHover']}; }";
            $css_rules[] = "{$google_btn_selector}:hover svg { fill: {$attributes['googleBtnIconColorHover']}; }";
        }

        // ============================================
        // 13. SECTION DIVIDER
        // Evidence: login/styles.ts:793-814
        // ============================================

        $divider_selector = "{$selector} .ts-login-separator";

        // Typography (for text inside divider)
        if ( ! empty( $attributes['dividerTypography'] ) ) {
            $divider_typography = self::generate_typography_css( $attributes['dividerTypography'] );
            if ( ! empty( $divider_typography['desktop'] ) ) {
                $css_rules[] = "{$selector} .ts-separator-text { {$divider_typography['desktop']} }";
            }
            if ( ! empty( $divider_typography['tablet'] ) ) {
                $tablet_rules[] = "{$selector} .ts-separator-text { {$divider_typography['tablet']} }";
            }
            if ( ! empty( $divider_typography['mobile'] ) ) {
                $mobile_rules[] = "{$selector} .ts-separator-text { {$divider_typography['mobile']} }";
            }
        }

        // Text Color
        if ( ! empty( $attributes['dividerTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-separator-text { color: {$attributes['dividerTextColor']}; }";
        }

        // Divider Color
        if ( ! empty( $attributes['dividerColor'] ) ) {
            $css_rules[] = "{$divider_selector}::before, {$divider_selector}::after { background-color: {$attributes['dividerColor']}; }";
        }

        // Height (Thickness)
        if ( isset( $attributes['dividerHeight'] ) && $attributes['dividerHeight'] !== '' ) {
            $css_rules[] = "{$divider_selector}::before, {$divider_selector}::after { height: {$attributes['dividerHeight']}px; }";
        }

        // ============================================
        // 14. WELCOME MESSAGE
        // Evidence: login/styles.ts:817-855
        // ============================================

        $welcome_selector = "{$selector} .ts-welcome-message";

        // Alignment
        if ( ! empty( $attributes['welcomeAlignContent'] ) ) {
            $css_rules[] = "{$welcome_selector} { align-items: {$attributes['welcomeAlignContent']}; }";
        }
        if ( ! empty( $attributes['welcomeTextAlign'] ) ) {
            $css_rules[] = "{$welcome_selector} { text-align: {$attributes['welcomeTextAlign']}; }";
        }

        // Icon Size
        if ( isset( $attributes['welcomeIconSize'] ) && $attributes['welcomeIconSize'] !== '' ) {
            $css_rules[] = "{$welcome_selector} i { font-size: {$attributes['welcomeIconSize']}px; }";
            $css_rules[] = "{$welcome_selector} svg { width: {$attributes['welcomeIconSize']}px; height: {$attributes['welcomeIconSize']}px; }";
        }

        // Icon Color
        if ( ! empty( $attributes['welcomeIconColor'] ) ) {
            $css_rules[] = "{$welcome_selector} i { color: {$attributes['welcomeIconColor']}; }";
            $css_rules[] = "{$welcome_selector} svg { fill: {$attributes['welcomeIconColor']}; }";
        }

        // Heading Typography
        if ( ! empty( $attributes['welcomeHeadingTypography'] ) ) {
            $welcome_heading_typography = self::generate_typography_css( $attributes['welcomeHeadingTypography'] );
            if ( ! empty( $welcome_heading_typography['desktop'] ) ) {
                $css_rules[] = "{$welcome_selector} h2 { {$welcome_heading_typography['desktop']} }";
            }
            if ( ! empty( $welcome_heading_typography['tablet'] ) ) {
                $tablet_rules[] = "{$welcome_selector} h2 { {$welcome_heading_typography['tablet']} }";
            }
            if ( ! empty( $welcome_heading_typography['mobile'] ) ) {
                $mobile_rules[] = "{$welcome_selector} h2 { {$welcome_heading_typography['mobile']} }";
            }
        }

        // Heading Color
        if ( ! empty( $attributes['welcomeHeadingColor'] ) ) {
            $css_rules[] = "{$welcome_selector} h2 { color: {$attributes['welcomeHeadingColor']}; }";
        }

        // Top Margin
        if ( isset( $attributes['welcomeHeadingTopMargin'] ) && $attributes['welcomeHeadingTopMargin'] !== '' ) {
            $css_rules[] = "{$welcome_selector} h2 { margin-top: {$attributes['welcomeHeadingTopMargin']}px; }";
        }

        // ============================================
        // 15. FORM: FILE/GALLERY UPLOAD
        // Evidence: login/styles.ts:858-967
        // ============================================

        $form_file_selector = "{$selector} .ts-form-group.ts-file-upload";

        // Item Gap
        if ( isset( $attributes['formFileItemGap'] ) && $attributes['formFileItemGap'] !== '' ) {
            $css_rules[] = "{$form_file_selector} .ts-file-list { gap: {$attributes['formFileItemGap']}px; }";
        }

        $file_select_selector = "{$form_file_selector} .ts-file-select";

        // Icon Color
        if ( ! empty( $attributes['formFileSelectIconColor'] ) ) {
            $css_rules[] = "{$file_select_selector} i { color: {$attributes['formFileSelectIconColor']}; }";
            $css_rules[] = "{$file_select_selector} svg { fill: {$attributes['formFileSelectIconColor']}; }";
        }

        // Icon Size
        if ( isset( $attributes['formFileSelectIconSize'] ) && $attributes['formFileSelectIconSize'] !== '' ) {
            $css_rules[] = "{$file_select_selector} i { font-size: {$attributes['formFileSelectIconSize']}px; }";
            $css_rules[] = "{$file_select_selector} svg { width: {$attributes['formFileSelectIconSize']}px; height: {$attributes['formFileSelectIconSize']}px; }";
        }

        // Background
        if ( ! empty( $attributes['formFileSelectBackground'] ) ) {
            $css_rules[] = "{$file_select_selector} { background-color: {$attributes['formFileSelectBackground']}; }";
        }

        // Border
        if ( ! empty( $attributes['formFileSelectBorder'] ) ) {
            $file_select_border = self::generate_border_css( $attributes['formFileSelectBorder'] );
            if ( ! empty( $file_select_border['desktop'] ) ) {
                $css_rules[] = "{$file_select_selector} { {$file_select_border['desktop']} }";
            }
        }

        // Radius
        if ( isset( $attributes['formFileSelectBorderRadius'] ) && $attributes['formFileSelectBorderRadius'] !== '' ) {
            $css_rules[] = "{$file_select_selector} { border-radius: {$attributes['formFileSelectBorderRadius']}px; }";
        }

        // Typography
        if ( ! empty( $attributes['formFileSelectTypography'] ) ) {
            $file_select_typography = self::generate_typography_css( $attributes['formFileSelectTypography'] );
            if ( ! empty( $file_select_typography['desktop'] ) ) {
                $css_rules[] = "{$file_select_selector} { {$file_select_typography['desktop']} }";
            }
            if ( ! empty( $file_select_typography['tablet'] ) ) {
                $tablet_rules[] = "{$file_select_selector} { {$file_select_typography['tablet']} }";
            }
            if ( ! empty( $file_select_typography['mobile'] ) ) {
                $mobile_rules[] = "{$file_select_selector} { {$file_select_typography['mobile']} }";
            }
        }

        // Text Color
        if ( ! empty( $attributes['formFileSelectTextColor'] ) ) {
            $css_rules[] = "{$file_select_selector} { color: {$attributes['formFileSelectTextColor']}; }";
        }

        // Hover State
        if ( ! empty( $attributes['formFileSelectIconColorHover'] ) ) {
            $css_rules[] = "{$file_select_selector}:hover i { color: {$attributes['formFileSelectIconColorHover']}; }";
            $css_rules[] = "{$file_select_selector}:hover svg { fill: {$attributes['formFileSelectIconColorHover']}; }";
        }
        if ( ! empty( $attributes['formFileSelectBackgroundHover'] ) ) {
            $css_rules[] = "{$file_select_selector}:hover { background-color: {$attributes['formFileSelectBackgroundHover']}; }";
        }
        if ( ! empty( $attributes['formFileSelectBorderColorHover'] ) ) {
            $css_rules[] = "{$file_select_selector}:hover { border-color: {$attributes['formFileSelectBorderColorHover']}; }";
        }
        if ( ! empty( $attributes['formFileSelectTextColorHover'] ) ) {
            $css_rules[] = "{$file_select_selector}:hover { color: {$attributes['formFileSelectTextColorHover']}; }";
        }

        // Added File Section
        $file_added_selector = "{$form_file_selector} .ts-file-item";

        if ( isset( $attributes['formFileAddedBorderRadius'] ) && $attributes['formFileAddedBorderRadius'] !== '' ) {
            $css_rules[] = "{$file_added_selector} { border-radius: {$attributes['formFileAddedBorderRadius']}px; }";
        }
        if ( ! empty( $attributes['formFileAddedBackground'] ) ) {
            $css_rules[] = "{$file_added_selector} { background-color: {$attributes['formFileAddedBackground']}; }";
        }
        if ( ! empty( $attributes['formFileAddedIconColor'] ) ) {
            $css_rules[] = "{$file_added_selector} i { color: {$attributes['formFileAddedIconColor']}; }";
            $css_rules[] = "{$file_added_selector} svg { fill: {$attributes['formFileAddedIconColor']}; }";
        }
        if ( isset( $attributes['formFileAddedIconSize'] ) && $attributes['formFileAddedIconSize'] !== '' ) {
            $css_rules[] = "{$file_added_selector} i { font-size: {$attributes['formFileAddedIconSize']}px; }";
            $css_rules[] = "{$file_added_selector} svg { width: {$attributes['formFileAddedIconSize']}px; height: {$attributes['formFileAddedIconSize']}px; }";
        }
        if ( ! empty( $attributes['formFileAddedTypography'] ) ) {
            $file_added_typography = self::generate_typography_css( $attributes['formFileAddedTypography'] );
            if ( ! empty( $file_added_typography['desktop'] ) ) {
                $css_rules[] = "{$file_added_selector} { {$file_added_typography['desktop']} }";
            }
            if ( ! empty( $file_added_typography['tablet'] ) ) {
                $tablet_rules[] = "{$file_added_selector} { {$file_added_typography['tablet']} }";
            }
            if ( ! empty( $file_added_typography['mobile'] ) ) {
                $mobile_rules[] = "{$file_added_selector} { {$file_added_typography['mobile']} }";
            }
        }
        if ( ! empty( $attributes['formFileAddedTextColor'] ) ) {
            $css_rules[] = "{$file_added_selector} { color: {$attributes['formFileAddedTextColor']}; }";
        }

        // Remove Button
        $file_remove_selector = "{$file_added_selector} .ts-remove-file";

        if ( ! empty( $attributes['formFileRemoveBackground'] ) ) {
            $css_rules[] = "{$file_remove_selector} { background-color: {$attributes['formFileRemoveBackground']}; }";
        }
        if ( ! empty( $attributes['formFileRemoveBackgroundHover'] ) ) {
            $css_rules[] = "{$file_remove_selector}:hover { background-color: {$attributes['formFileRemoveBackgroundHover']}; }";
        }
        if ( ! empty( $attributes['formFileRemoveColor'] ) ) {
            $css_rules[] = "{$file_remove_selector} { color: {$attributes['formFileRemoveColor']}; }";
        }
        if ( ! empty( $attributes['formFileRemoveColorHover'] ) ) {
            $css_rules[] = "{$file_remove_selector}:hover { color: {$attributes['formFileRemoveColorHover']}; }";
        }
        if ( isset( $attributes['formFileRemoveBorderRadius'] ) && $attributes['formFileRemoveBorderRadius'] !== '' ) {
            $css_rules[] = "{$file_remove_selector} { border-radius: {$attributes['formFileRemoveBorderRadius']}px; }";
        }
        if ( isset( $attributes['formFileRemoveSize'] ) && $attributes['formFileRemoveSize'] !== '' ) {
            $css_rules[] = "{$file_remove_selector} { width: {$attributes['formFileRemoveSize']}px; height: {$attributes['formFileRemoveSize']}px; }";
        }
        if ( isset( $attributes['formFileRemoveIconSize'] ) && $attributes['formFileRemoveIconSize'] !== '' ) {
            $css_rules[] = "{$file_remove_selector} i { font-size: {$attributes['formFileRemoveIconSize']}px; }";
            $css_rules[] = "{$file_remove_selector} svg { width: {$attributes['formFileRemoveIconSize']}px; height: {$attributes['formFileRemoveIconSize']}px; }";
        }

        // ============================================
        // 16. FORM: DIALOG
        // Evidence: login/styles.ts:969-997
        // ============================================

        $dialog_selector = "{$selector} .vx-dialog-content";
        $dialog_icon_selector = "{$selector} .vx-dialog > i";

        if ( ! empty( $attributes['formDialogIconColor'] ) ) {
            $css_rules[] = "{$dialog_icon_selector} { color: {$attributes['formDialogIconColor']}; }";
        }
        if ( isset( $attributes['formDialogIconSize'] ) && $attributes['formDialogIconSize'] !== '' ) {
            $css_rules[] = "{$dialog_icon_selector} { font-size: {$attributes['formDialogIconSize']}px; }";
        }
        if ( ! empty( $attributes['formDialogTextColor'] ) ) {
            $css_rules[] = "{$dialog_selector} { color: {$attributes['formDialogTextColor']}; }";
        }

        // Dialog Typography
        if ( ! empty( $attributes['formDialogTypography'] ) ) {
            $dialog_typography = self::generate_typography_css( $attributes['formDialogTypography'] );
            if ( ! empty( $dialog_typography['desktop'] ) ) {
                $css_rules[] = "{$dialog_selector} { {$dialog_typography['desktop']} }";
            }
            if ( ! empty( $dialog_typography['tablet'] ) ) {
                $tablet_rules[] = "{$dialog_selector} { {$dialog_typography['tablet']} }";
            }
            if ( ! empty( $dialog_typography['mobile'] ) ) {
                $mobile_rules[] = "{$dialog_selector} { {$dialog_typography['mobile']} }";
            }
        }

        if ( ! empty( $attributes['formDialogBackgroundColor'] ) ) {
            $css_rules[] = "{$dialog_selector} { background-color: {$attributes['formDialogBackgroundColor']}; }";
        }
        if ( isset( $attributes['formDialogRadius'] ) && $attributes['formDialogRadius'] !== '' ) {
            $css_rules[] = "{$dialog_selector} { border-radius: {$attributes['formDialogRadius']}px; }";
        }

        // Box Shadow
        if ( ! empty( $attributes['formDialogBoxShadow'] ) ) {
            $dialog_shadow = self::generate_box_shadow_css( $attributes['formDialogBoxShadow'] );
            if ( ! empty( $dialog_shadow ) ) {
                $css_rules[] = "{$dialog_selector} { box-shadow: {$dialog_shadow}; }";
            }
        }

        // Border
        if ( ! empty( $attributes['formDialogBorder'] ) ) {
            $dialog_border = self::generate_border_css( $attributes['formDialogBorder'] );
            if ( ! empty( $dialog_border['desktop'] ) ) {
                $css_rules[] = "{$dialog_selector} { {$dialog_border['desktop']} }";
            }
        }

        // ==================== COMBINE CSS ====================

        $final_css = '';
        if ( ! empty( $css_rules ) ) {
            $final_css .= implode( "\n", $css_rules );
        }

        if ( ! empty( $tablet_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::TABLET_BREAKPOINT . "px) {\n" . implode( "\n", $tablet_rules ) . "\n}";
        }

        if ( ! empty( $mobile_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::MOBILE_BREAKPOINT . "px) {\n" . implode( "\n", $mobile_rules ) . "\n}";
        }

        return $final_css;
    }

    /**
     * Generate CSS for Stripe Account Block
     * Source: app/blocks/src/stripe-account/styles.ts (lines 25-434)
     *
     * Sections: 15 total
     * - Panel (Border, Radius, Background, Shadow, Body Spacing)
     * - Form: Fields General (Label, Select/Unselect Color)
     * - Form: Input & Textarea (Placeholder, Value, States)
     * - Form: Input Suffix
     * - Form: Switcher
     * - Form: Select
     * - Form: Tabs
     * - Buttons (Primary, Secondary, Tertiary)
     * - Form: Heading
     * - Form: Repeater
     * - Form: Repeater Head
     * - Repeater: Icon Button
     * - Form: Pills
     * - Buttons Refinement (Icon sizing/spacing)
     *
     * @param array  $attributes Block attributes from Gutenberg
     * @param string $block_id   Block ID for scoped selector
     * @return string Generated CSS
     */
    public static function generate_stripe_account_css( $attributes, $block_id ) {
        if ( empty( $block_id ) ) {
            return '';
        }

        $css_rules = [];
        $tablet_rules = [];
        $mobile_rules = [];
        $selector = '.voxel-fse-stripe-account-' . $block_id;

        // ============================================
        // 1. PANEL
        // Evidence: stripe-account/styles.ts:40-82
        // ============================================

        $panel_selector = "{$selector} .ts-panel";

        // Border
        if ( ! empty( $attributes['panelBorder'] ) ) {
            $panel_border = self::generate_border_css( $attributes['panelBorder'] );
            if ( ! empty( $panel_border['desktop'] ) ) {
                $css_rules[] = "{$panel_selector} { {$panel_border['desktop']} }";
            }
            if ( ! empty( $panel_border['tablet'] ) ) {
                $tablet_rules[] = "{$panel_selector} { {$panel_border['tablet']} }";
            }
            if ( ! empty( $panel_border['mobile'] ) ) {
                $mobile_rules[] = "{$panel_selector} { {$panel_border['mobile']} }";
            }
        }

        // Radius
        if ( isset( $attributes['panelBorderRadius'] ) && $attributes['panelBorderRadius'] !== '' ) {
            $css_rules[] = "{$panel_selector} { border-radius: {$attributes['panelBorderRadius']}px; }";
        }
        if ( isset( $attributes['panelBorderRadius_tablet'] ) && $attributes['panelBorderRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$panel_selector} { border-radius: {$attributes['panelBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['panelBorderRadius_mobile'] ) && $attributes['panelBorderRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$panel_selector} { border-radius: {$attributes['panelBorderRadius_mobile']}px; }";
        }

        // Background
        if ( ! empty( $attributes['panelBackground'] ) ) {
            $css_rules[] = "{$panel_selector} { background-color: {$attributes['panelBackground']}; }";
        }

        // Box Shadow
        if ( ! empty( $attributes['panelBoxShadow'] ) ) {
            $panel_shadow = self::generate_box_shadow_css( $attributes['panelBoxShadow'] );
            if ( ! empty( $panel_shadow ) ) {
                $css_rules[] = "{$panel_selector} { box-shadow: {$panel_shadow}; }";
            }
        }

        // Panel Body
        $panel_body_selector = "{$selector} .ac-body";

        // Spacing (Padding)
        if ( isset( $attributes['panelBodySpacing'] ) && $attributes['panelBodySpacing'] !== '' ) {
            $css_rules[] = "{$panel_body_selector} { padding: {$attributes['panelBodySpacing']}px; }";
        }
        if ( isset( $attributes['panelBodySpacing_tablet'] ) && $attributes['panelBodySpacing_tablet'] !== '' ) {
            $tablet_rules[] = "{$panel_body_selector} { padding: {$attributes['panelBodySpacing_tablet']}px; }";
        }
        if ( isset( $attributes['panelBodySpacing_mobile'] ) && $attributes['panelBodySpacing_mobile'] !== '' ) {
            $mobile_rules[] = "{$panel_body_selector} { padding: {$attributes['panelBodySpacing_mobile']}px; }";
        }

        // Content Gap
        if ( isset( $attributes['panelBodyContentGap'] ) && $attributes['panelBodyContentGap'] !== '' ) {
            $css_rules[] = "{$panel_body_selector} { gap: {$attributes['panelBodyContentGap']}px; display: flex; flex-direction: column; }";
        }
        if ( isset( $attributes['panelBodyContentGap_tablet'] ) && $attributes['panelBodyContentGap_tablet'] !== '' ) {
            $tablet_rules[] = "{$panel_body_selector} { gap: {$attributes['panelBodyContentGap_tablet']}px; }";
        }
        if ( isset( $attributes['panelBodyContentGap_mobile'] ) && $attributes['panelBodyContentGap_mobile'] !== '' ) {
            $mobile_rules[] = "{$panel_body_selector} { gap: {$attributes['panelBodyContentGap_mobile']}px; }";
        }

        // Typography
        if ( ! empty( $attributes['panelTypography'] ) ) {
            $panel_typography = self::generate_typography_css( $attributes['panelTypography'] );
            if ( ! empty( $panel_typography['desktop'] ) ) {
                $css_rules[] = "{$panel_selector} { {$panel_typography['desktop']} }";
            }
            if ( ! empty( $panel_typography['tablet'] ) ) {
                $tablet_rules[] = "{$panel_selector} { {$panel_typography['tablet']} }";
            }
            if ( ! empty( $panel_typography['mobile'] ) ) {
                $mobile_rules[] = "{$panel_selector} { {$panel_typography['mobile']} }";
            }
        }

        // Text Color
        if ( ! empty( $attributes['panelTextColor'] ) ) {
            $css_rules[] = "{$panel_selector} { color: {$attributes['panelTextColor']}; }";
        }

        // ============================================
        // 2. FORM: FIELDS GENERAL
        // Evidence: stripe-account/styles.ts:84-103
        // ============================================

        $label_selector = "{$selector} .ts-form-group label";

        // Typography
        if ( ! empty( $attributes['fieldLabelTypography'] ) ) {
            $label_typography = self::generate_typography_css( $attributes['fieldLabelTypography'] );
            if ( ! empty( $label_typography['desktop'] ) ) {
                $css_rules[] = "{$label_selector} { {$label_typography['desktop']} }";
            }
            if ( ! empty( $label_typography['tablet'] ) ) {
                $tablet_rules[] = "{$label_selector} { {$label_typography['tablet']} }";
            }
            if ( ! empty( $label_typography['mobile'] ) ) {
                $mobile_rules[] = "{$label_selector} { {$label_typography['mobile']} }";
            }
        }

        // Color
        if ( ! empty( $attributes['fieldLabelColor'] ) ) {
            $css_rules[] = "{$label_selector} { color: {$attributes['fieldLabelColor']}; }";
        }

        // Select/Unselect Color
        if ( ! empty( $attributes['fieldSelectColor'] ) ) {
            $css_rules[] = "{$selector} .ts-term-dropdown li.selected { color: {$attributes['fieldSelectColor']}; }";
            $css_rules[] = "{$selector} .ts-term-dropdown li.selected:before { border-color: {$attributes['fieldSelectColor']}; background-color: {$attributes['fieldSelectColor']}; }";
        }

        // ============================================
        // 3. FORM: INPUT & TEXTAREA
        // Evidence: stripe-account/styles.ts:105-161
        // ============================================

        $input_selector = "{$selector} .ts-filter";
        $input_focus_selector = "{$selector} .ts-filter:focus";
        $input_hover_selector = "{$selector} .ts-filter:hover";

        // Placeholder
        if ( ! empty( $attributes['inputPlaceholderColor'] ) ) {
            $css_rules[] = "{$input_selector}::placeholder { color: {$attributes['inputPlaceholderColor']}; opacity: 1; }";
        }

        if ( ! empty( $attributes['inputPlaceholderTypography'] ) ) {
            $placeholder_typography = self::generate_typography_css( $attributes['inputPlaceholderTypography'] );
            if ( ! empty( $placeholder_typography['desktop'] ) ) {
                $css_rules[] = "{$input_selector}::placeholder { {$placeholder_typography['desktop']} }";
            }
        }

        // Value (Input Text)
        if ( ! empty( $attributes['inputValueTextColor'] ) ) {
            $css_rules[] = "{$input_selector} { color: {$attributes['inputValueTextColor']}; }";
        }

        if ( ! empty( $attributes['inputValueTypography'] ) ) {
            $value_typography = self::generate_typography_css( $attributes['inputValueTypography'] );
            if ( ! empty( $value_typography['desktop'] ) ) {
                $css_rules[] = "{$input_selector} { {$value_typography['desktop']} }";
            }
        }

        // General Input Styles
        if ( ! empty( $attributes['inputBackgroundColor'] ) ) {
            $css_rules[] = "{$input_selector} { background-color: {$attributes['inputBackgroundColor']}; }";
        }

        if ( ! empty( $attributes['inputBorder'] ) ) {
            $input_border = self::generate_border_css( $attributes['inputBorder'] );
            if ( ! empty( $input_border['desktop'] ) ) {
                $css_rules[] = "{$input_selector} { {$input_border['desktop']} }";
            }
            if ( ! empty( $input_border['tablet'] ) ) {
                $tablet_rules[] = "{$input_selector} { {$input_border['tablet']} }";
            }
            if ( ! empty( $input_border['mobile'] ) ) {
                $mobile_rules[] = "{$input_selector} { {$input_border['mobile']} }";
            }
        }

        if ( isset( $attributes['inputBorderRadius'] ) && $attributes['inputBorderRadius'] !== '' ) {
            $css_rules[] = "{$input_selector} { border-radius: {$attributes['inputBorderRadius']}px; }";
        }
        if ( isset( $attributes['inputBorderRadius_tablet'] ) && $attributes['inputBorderRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$input_selector} { border-radius: {$attributes['inputBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['inputBorderRadius_mobile'] ) && $attributes['inputBorderRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$input_selector} { border-radius: {$attributes['inputBorderRadius_mobile']}px; }";
        }

        if ( isset( $attributes['inputHeight'] ) && $attributes['inputHeight'] !== '' ) {
            $css_rules[] = "{$input_selector} { height: {$attributes['inputHeight']}px; }";
        }
        if ( isset( $attributes['inputHeight_tablet'] ) && $attributes['inputHeight_tablet'] !== '' ) {
            $tablet_rules[] = "{$input_selector} { height: {$attributes['inputHeight_tablet']}px; }";
        }
        if ( isset( $attributes['inputHeight_mobile'] ) && $attributes['inputHeight_mobile'] !== '' ) {
            $mobile_rules[] = "{$input_selector} { height: {$attributes['inputHeight_mobile']}px; }";
        }

        // Textarea specific
        $textarea_selector = "{$selector} textarea.ts-filter";
        if ( ! empty( $attributes['textareaPadding'] ) ) {
            $textarea_padding = self::generate_dimensions_css( $attributes['textareaPadding'] );
            if ( ! empty( $textarea_padding['desktop'] ) ) {
                $css_rules[] = "{$textarea_selector} { {$textarea_padding['desktop']} }";
            }
        }

        if ( isset( $attributes['textareaHeight'] ) && $attributes['textareaHeight'] !== '' ) {
            $css_rules[] = "{$textarea_selector} { height: {$attributes['textareaHeight']}px; min-height: {$attributes['textareaHeight']}px; }";
        }
        if ( isset( $attributes['textareaHeight_tablet'] ) && $attributes['textareaHeight_tablet'] !== '' ) {
            $tablet_rules[] = "{$textarea_selector} { height: {$attributes['textareaHeight_tablet']}px; min-height: {$attributes['textareaHeight_tablet']}px; }";
        }
        if ( isset( $attributes['textareaHeight_mobile'] ) && $attributes['textareaHeight_mobile'] !== '' ) {
            $mobile_rules[] = "{$textarea_selector} { height: {$attributes['textareaHeight_mobile']}px; min-height: {$attributes['textareaHeight_mobile']}px; }";
        }

        if ( isset( $attributes['textareaBorderRadius'] ) && $attributes['textareaBorderRadius'] !== '' ) {
            $css_rules[] = "{$textarea_selector} { border-radius: {$attributes['textareaBorderRadius']}px; }";
        }

        // Input States (Hover/Active)
        if ( ! empty( $attributes['inputBackgroundColorHover'] ) ) {
            $css_rules[] = "{$input_hover_selector} { background-color: {$attributes['inputBackgroundColorHover']}; }";
        }
        if ( ! empty( $attributes['inputBorderColorHover'] ) ) {
            $css_rules[] = "{$input_hover_selector} { border-color: {$attributes['inputBorderColorHover']}; }";
        }
        if ( ! empty( $attributes['inputPlaceholderColorHover'] ) ) {
            $css_rules[] = "{$input_hover_selector}::placeholder { color: {$attributes['inputPlaceholderColorHover']}; }";
        }
        if ( ! empty( $attributes['inputTextColorHover'] ) ) {
            $css_rules[] = "{$input_hover_selector} { color: {$attributes['inputTextColorHover']}; }";
        }
        if ( ! empty( $attributes['inputIconColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-input-icon:hover i { color: {$attributes['inputIconColorHover']}; }";
        }

        if ( ! empty( $attributes['inputBackgroundColorActive'] ) ) {
            $css_rules[] = "{$input_focus_selector} { background-color: {$attributes['inputBackgroundColorActive']}; }";
        }
        if ( ! empty( $attributes['inputBorderColorActive'] ) ) {
            $css_rules[] = "{$input_focus_selector} { border-color: {$attributes['inputBorderColorActive']}; }";
        }
        if ( ! empty( $attributes['inputPlaceholderColorActive'] ) ) {
            $css_rules[] = "{$input_focus_selector}::placeholder { color: {$attributes['inputPlaceholderColorActive']}; }";
        }
        if ( ! empty( $attributes['inputTextColorActive'] ) ) {
            $css_rules[] = "{$input_focus_selector} { color: {$attributes['inputTextColorActive']}; }";
        }

        // ============================================
        // 4. FORM: INPUT SUFFIX
        // Evidence: stripe-account/styles.ts:163-180
        // ============================================

        $suffix_selector = "{$selector} .input-suffix";

        if ( ! empty( $attributes['inputSuffixButtonTypography'] ) ) {
            $suffix_typography = self::generate_typography_css( $attributes['inputSuffixButtonTypography'] );
            if ( ! empty( $suffix_typography['desktop'] ) ) {
                $css_rules[] = "{$suffix_selector} { {$suffix_typography['desktop']} }";
            }
        }

        if ( ! empty( $attributes['inputSuffixTextColor'] ) ) {
            $css_rules[] = "{$suffix_selector} { color: {$attributes['inputSuffixTextColor']}; }";
        }
        if ( ! empty( $attributes['inputSuffixBackgroundColor'] ) ) {
            $css_rules[] = "{$suffix_selector} { background-color: {$attributes['inputSuffixBackgroundColor']}; }";
        }

        if ( isset( $attributes['inputSuffixBorderRadius'] ) && $attributes['inputSuffixBorderRadius'] !== '' ) {
            $css_rules[] = "{$suffix_selector} { border-radius: {$attributes['inputSuffixBorderRadius']}px; }";
        }

        if ( ! empty( $attributes['inputSuffixBoxShadow'] ) ) {
            $suffix_shadow = self::generate_box_shadow_css( $attributes['inputSuffixBoxShadow'] );
            if ( ! empty( $suffix_shadow ) ) {
                $css_rules[] = "{$suffix_selector} { box-shadow: {$suffix_shadow}; }";
            }
        }

        if ( isset( $attributes['inputSuffixSideMargin'] ) && $attributes['inputSuffixSideMargin'] !== '' ) {
            $css_rules[] = "{$suffix_selector} { right: {$attributes['inputSuffixSideMargin']}px; }";
        }

        if ( ! empty( $attributes['inputSuffixIconColor'] ) ) {
            $css_rules[] = "{$suffix_selector} i { color: {$attributes['inputSuffixIconColor']}; }";
        }

        // ============================================
        // 5. FORM: SWITCHER
        // Evidence: stripe-account/styles.ts:182-191
        // ============================================

        $switcher_label = "{$selector} .onoffswitch-label";
        $switcher_checkbox = "{$selector} .onoffswitch-checkbox";

        if ( ! empty( $attributes['switcherBackgroundInactive'] ) ) {
            $css_rules[] = "{$switcher_label} { background-color: {$attributes['switcherBackgroundInactive']}; }";
        }

        if ( ! empty( $attributes['switcherBackgroundActive'] ) ) {
            $css_rules[] = "{$switcher_checkbox}:checked + {$switcher_label} { background-color: {$attributes['switcherBackgroundActive']}; }";
        }

        if ( ! empty( $attributes['switcherHandleBackground'] ) ) {
            $css_rules[] = "{$switcher_label}:before { background-color: {$attributes['switcherHandleBackground']}; }";
        }

        // ============================================
        // 6. FORM: SELECT
        // Evidence: stripe-account/styles.ts:193-222
        // ============================================

        $select_selector = "{$selector} .ts-filter select";
        $select_wrapper = "{$selector} div.ts-filter";

        if ( ! empty( $attributes['selectBoxShadow'] ) ) {
            $select_shadow = self::generate_box_shadow_css( $attributes['selectBoxShadow'] );
            if ( ! empty( $select_shadow ) ) {
                $css_rules[] = "{$select_wrapper} { box-shadow: {$select_shadow}; }";
            }
        }

        if ( ! empty( $attributes['selectBackgroundColor'] ) ) {
            $css_rules[] = "{$select_wrapper} { background-color: {$attributes['selectBackgroundColor']}; }";
            $css_rules[] = "{$select_selector} { background-color: {$attributes['selectBackgroundColor']}; }";
        }

        if ( ! empty( $attributes['selectTextColor'] ) ) {
            $css_rules[] = "{$select_selector} { color: {$attributes['selectTextColor']}; }";
        }

        if ( ! empty( $attributes['selectBorder'] ) ) {
            $select_border = self::generate_border_css( $attributes['selectBorder'] );
            if ( ! empty( $select_border['desktop'] ) ) {
                $css_rules[] = "{$select_wrapper} { {$select_border['desktop']} }";
            }
        }

        if ( isset( $attributes['selectBorderRadius'] ) && $attributes['selectBorderRadius'] !== '' ) {
            $css_rules[] = "{$select_wrapper} { border-radius: {$attributes['selectBorderRadius']}px; }";
        }

        // Chevron
        if ( ! empty( $attributes['selectHideChevron'] ) ) {
            $css_rules[] = "{$selector} .ts-down-icon { display: none; }";
        }
        if ( ! empty( $attributes['selectChevronColor'] ) ) {
            $css_rules[] = "{$selector} .ts-down-icon { color: {$attributes['selectChevronColor']}; }";
        }

        // Select Hover
        if ( ! empty( $attributes['selectBackgroundColorHover'] ) ) {
            $css_rules[] = "{$select_wrapper}:hover { background-color: {$attributes['selectBackgroundColorHover']}; }";
        }
        if ( ! empty( $attributes['selectTextColorHover'] ) ) {
            $css_rules[] = "{$select_wrapper}:hover select { color: {$attributes['selectTextColorHover']}; }";
        }
        if ( ! empty( $attributes['selectBorderColorHover'] ) ) {
            $css_rules[] = "{$select_wrapper}:hover { border-color: {$attributes['selectBorderColorHover']}; }";
        }
        if ( ! empty( $attributes['selectIconColorHover'] ) ) {
            $css_rules[] = "{$select_wrapper}:hover .ts-down-icon { color: {$attributes['selectIconColorHover']}; }";
        }

        if ( ! empty( $attributes['selectBoxShadowHover'] ) ) {
            $select_shadow_hover = self::generate_box_shadow_css( $attributes['selectBoxShadowHover'] );
            if ( ! empty( $select_shadow_hover ) ) {
                $css_rules[] = "{$select_wrapper}:hover { box-shadow: {$select_shadow_hover}; }";
            }
        }

        // ============================================
        // 7. FORM: TABS
        // Evidence: stripe-account/styles.ts:224-251
        // ============================================

        $tabs_selector = "{$selector} .ts-tabs";
        $tab_item_selector = "{$selector} .ts-tab";

        if ( isset( $attributes['tabsGap'] ) && $attributes['tabsGap'] !== '' ) {
            $css_rules[] = "{$tabs_selector} { gap: {$attributes['tabsGap']}px; }";
        }

        // Tab Item Normal
        if ( ! empty( $attributes['tabsBackground'] ) ) {
            $css_rules[] = "{$tab_item_selector} { background-color: {$attributes['tabsBackground']}; }";
        }

        if ( ! empty( $attributes['tabsBorder'] ) ) {
            $tabs_border = self::generate_border_css( $attributes['tabsBorder'] );
            if ( ! empty( $tabs_border['desktop'] ) ) {
                $css_rules[] = "{$tab_item_selector} { {$tabs_border['desktop']} }";
            }
        }

        if ( isset( $attributes['tabsBorderRadius'] ) && $attributes['tabsBorderRadius'] !== '' ) {
            $css_rules[] = "{$tab_item_selector} { border-radius: {$attributes['tabsBorderRadius']}px; }";
        }

        if ( ! empty( $attributes['tabsTextTypography'] ) ) {
            $tabs_typography = self::generate_typography_css( $attributes['tabsTextTypography'] );
            if ( ! empty( $tabs_typography['desktop'] ) ) {
                $css_rules[] = "{$tab_item_selector} { {$tabs_typography['desktop']} }";
            }
        }

        if ( ! empty( $attributes['tabsTextColor'] ) ) {
            $css_rules[] = "{$tab_item_selector} { color: {$attributes['tabsTextColor']}; }";
        }

        // Tab Item Selected
        $tab_selected_selector = "{$selector} .ts-tab.active";
        if ( ! empty( $attributes['tabsBackgroundSelected'] ) ) {
            $css_rules[] = "{$tab_selected_selector} { background-color: {$attributes['tabsBackgroundSelected']}; }";
        }
        if ( ! empty( $attributes['tabsColorSelected'] ) ) {
            $css_rules[] = "{$tab_selected_selector} { color: {$attributes['tabsColorSelected']}; }";
        }
        if ( ! empty( $attributes['tabsBorderColorSelected'] ) ) {
            $css_rules[] = "{$tab_selected_selector} { border-color: {$attributes['tabsBorderColorSelected']}; }";
        }

        if ( ! empty( $attributes['tabsBoxShadowSelected'] ) ) {
            $tabs_shadow = self::generate_box_shadow_css( $attributes['tabsBoxShadowSelected'] );
            if ( ! empty( $tabs_shadow ) ) {
                $css_rules[] = "{$tab_selected_selector} { box-shadow: {$tabs_shadow}; }";
            }
        }

        // ============================================
        // 8. BUTTONS (PRIMARY, SECONDARY, TERTIARY)
        // Evidence: stripe-account/styles.ts:253-317
        // ============================================

        // Primary
        $primary_btn = "{$selector} .ts-btn-2";
        if ( ! empty( $attributes['primaryButtonTypography'] ) ) {
            $primary_btn_typography = self::generate_typography_css( $attributes['primaryButtonTypography'] );
            if ( ! empty( $primary_btn_typography['desktop'] ) ) {
                $css_rules[] = "{$primary_btn} { {$primary_btn_typography['desktop']} }";
            }
        }

        if ( ! empty( $attributes['primaryButtonBorder'] ) ) {
            $primary_btn_border = self::generate_border_css( $attributes['primaryButtonBorder'] );
            if ( ! empty( $primary_btn_border['desktop'] ) ) {
                $css_rules[] = "{$primary_btn} { {$primary_btn_border['desktop']} }";
            }
        }

        if ( isset( $attributes['primaryButtonBorderRadius'] ) && $attributes['primaryButtonBorderRadius'] !== '' ) {
            $css_rules[] = "{$primary_btn} { border-radius: {$attributes['primaryButtonBorderRadius']}px; }";
        }

        if ( ! empty( $attributes['primaryButtonBoxShadow'] ) ) {
            $primary_btn_shadow = self::generate_box_shadow_css( $attributes['primaryButtonBoxShadow'] );
            if ( ! empty( $primary_btn_shadow ) ) {
                $css_rules[] = "{$primary_btn} { box-shadow: {$primary_btn_shadow}; }";
            }
        }

        if ( ! empty( $attributes['primaryButtonTextColor'] ) ) {
            $css_rules[] = "{$primary_btn} { color: {$attributes['primaryButtonTextColor']}; }";
        }
        if ( ! empty( $attributes['primaryButtonBackgroundColor'] ) ) {
            $css_rules[] = "{$primary_btn} { background-color: {$attributes['primaryButtonBackgroundColor']}; }";
        }

        // Hover
        if ( ! empty( $attributes['primaryButtonTextColorHover'] ) ) {
            $css_rules[] = "{$primary_btn}:hover { color: {$attributes['primaryButtonTextColorHover']}; }";
        }
        if ( ! empty( $attributes['primaryButtonBackgroundColorHover'] ) ) {
            $css_rules[] = "{$primary_btn}:hover { background-color: {$attributes['primaryButtonBackgroundColorHover']}; }";
        }
        if ( ! empty( $attributes['primaryButtonBorderColorHover'] ) ) {
            $css_rules[] = "{$primary_btn}:hover { border-color: {$attributes['primaryButtonBorderColorHover']}; }";
        }

        // Secondary
        $secondary_btn = "{$selector} .ts-btn-1";
        if ( ! empty( $attributes['secondaryButtonTypography'] ) ) {
            $secondary_btn_typography = self::generate_typography_css( $attributes['secondaryButtonTypography'] );
            if ( ! empty( $secondary_btn_typography['desktop'] ) ) {
                $css_rules[] = "{$secondary_btn} { {$secondary_btn_typography['desktop']} }";
            }
        }

        if ( ! empty( $attributes['secondaryButtonBorder'] ) ) {
            $secondary_btn_border = self::generate_border_css( $attributes['secondaryButtonBorder'] );
            if ( ! empty( $secondary_btn_border['desktop'] ) ) {
                $css_rules[] = "{$secondary_btn} { {$secondary_btn_border['desktop']} }";
            }
        }

        if ( isset( $attributes['secondaryButtonBorderRadius'] ) && $attributes['secondaryButtonBorderRadius'] !== '' ) {
            $css_rules[] = "{$secondary_btn} { border-radius: {$attributes['secondaryButtonBorderRadius']}px; }";
        }
        if ( ! empty( $attributes['secondaryButtonTextColor'] ) ) {
            $css_rules[] = "{$secondary_btn} { color: {$attributes['secondaryButtonTextColor']}; }";
        }

        if ( ! empty( $attributes['secondaryButtonPadding'] ) ) {
            $secondary_btn_padding = self::generate_dimensions_css( $attributes['secondaryButtonPadding'] );
            if ( ! empty( $secondary_btn_padding['desktop'] ) ) {
                $css_rules[] = "{$secondary_btn} { {$secondary_btn_padding['desktop']} }";
            }
        }

        if ( ! empty( $attributes['secondaryButtonBackgroundColor'] ) ) {
            $css_rules[] = "{$secondary_btn} { background-color: {$attributes['secondaryButtonBackgroundColor']}; }";
        }

        // Hover
        if ( ! empty( $attributes['secondaryButtonTextColorHover'] ) ) {
            $css_rules[] = "{$secondary_btn}:hover { color: {$attributes['secondaryButtonTextColorHover']}; }";
        }
        if ( ! empty( $attributes['secondaryButtonBackgroundColorHover'] ) ) {
            $css_rules[] = "{$secondary_btn}:hover { background-color: {$attributes['secondaryButtonBackgroundColorHover']}; }";
        }
        if ( ! empty( $attributes['secondaryButtonBorderColorHover'] ) ) {
            $css_rules[] = "{$secondary_btn}:hover { border-color: {$attributes['secondaryButtonBorderColorHover']}; }";
        }

        // Tertiary
        $tertiary_btn = "{$selector} .ts-btn-4";
        if ( ! empty( $attributes['tertiaryButtonIconColor'] ) ) {
            $css_rules[] = "{$tertiary_btn} i { color: {$attributes['tertiaryButtonIconColor']}; }";
        }
        if ( ! empty( $attributes['tertiaryButtonBackground'] ) ) {
            $css_rules[] = "{$tertiary_btn} { background-color: {$attributes['tertiaryButtonBackground']}; }";
        }

        if ( ! empty( $attributes['tertiaryButtonBorder'] ) ) {
            $tertiary_btn_border = self::generate_border_css( $attributes['tertiaryButtonBorder'] );
            if ( ! empty( $tertiary_btn_border['desktop'] ) ) {
                $css_rules[] = "{$tertiary_btn} { {$tertiary_btn_border['desktop']} }";
            }
        }

        if ( isset( $attributes['tertiaryButtonBorderRadius'] ) && $attributes['tertiaryButtonBorderRadius'] !== '' ) {
            $css_rules[] = "{$tertiary_btn} { border-radius: {$attributes['tertiaryButtonBorderRadius']}px; }";
        }

        if ( ! empty( $attributes['tertiaryButtonTypography'] ) ) {
            $tertiary_btn_typography = self::generate_typography_css( $attributes['tertiaryButtonTypography'] );
            if ( ! empty( $tertiary_btn_typography['desktop'] ) ) {
                $css_rules[] = "{$tertiary_btn} { {$tertiary_btn_typography['desktop']} }";
            }
        }

        if ( ! empty( $attributes['tertiaryButtonTextColor'] ) ) {
            $css_rules[] = "{$tertiary_btn} { color: {$attributes['tertiaryButtonTextColor']}; }";
        }

        // Hover
        if ( ! empty( $attributes['tertiaryButtonIconColorHover'] ) ) {
            $css_rules[] = "{$tertiary_btn}:hover i { color: {$attributes['tertiaryButtonIconColorHover']}; }";
        }
        if ( ! empty( $attributes['tertiaryButtonBackgroundHover'] ) ) {
            $css_rules[] = "{$tertiary_btn}:hover { background-color: {$attributes['tertiaryButtonBackgroundHover']}; }";
        }
        if ( ! empty( $attributes['tertiaryButtonBorderColorHover'] ) ) {
            $css_rules[] = "{$tertiary_btn}:hover { border-color: {$attributes['tertiaryButtonBorderColorHover']}; }";
        }
        if ( ! empty( $attributes['tertiaryButtonTextColorHover'] ) ) {
            $css_rules[] = "{$tertiary_btn}:hover { color: {$attributes['tertiaryButtonTextColorHover']}; }";
        }

        // ============================================
        // 9. FORM: HEADING
        // Evidence: stripe-account/styles.ts:319-324
        // ============================================

        $heading_selector = "{$selector} .ui-heading-field label";
        if ( ! empty( $attributes['headingTypography'] ) ) {
            $heading_typography = self::generate_typography_css( $attributes['headingTypography'] );
            if ( ! empty( $heading_typography['desktop'] ) ) {
                $css_rules[] = "{$heading_selector} { {$heading_typography['desktop']} }";
            }
        }
        if ( ! empty( $attributes['headingColor'] ) ) {
            $css_rules[] = "{$heading_selector} { color: {$attributes['headingColor']}; }";
        }

        // ============================================
        // 10. FORM: REPEATER
        // Evidence: stripe-account/styles.ts:326-339
        // ============================================

        $repeater_item_selector = "{$selector} .ts-field-repeater";
        if ( ! empty( $attributes['repeaterBackground'] ) ) {
            $css_rules[] = "{$repeater_item_selector} { background-color: {$attributes['repeaterBackground']}; }";
        }

        if ( ! empty( $attributes['repeaterBorder'] ) ) {
            $repeater_border = self::generate_border_css( $attributes['repeaterBorder'] );
            if ( ! empty( $repeater_border['desktop'] ) ) {
                $css_rules[] = "{$repeater_item_selector} { {$repeater_border['desktop']} }";
            }
        }

        if ( isset( $attributes['repeaterBorderRadius'] ) && $attributes['repeaterBorderRadius'] !== '' ) {
            $css_rules[] = "{$repeater_item_selector} { border-radius: {$attributes['repeaterBorderRadius']}px; }";
        }
        if ( isset( $attributes['repeaterBorderRadius_tablet'] ) && $attributes['repeaterBorderRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$repeater_item_selector} { border-radius: {$attributes['repeaterBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['repeaterBorderRadius_mobile'] ) && $attributes['repeaterBorderRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$repeater_item_selector} { border-radius: {$attributes['repeaterBorderRadius_mobile']}px; }";
        }

        if ( ! empty( $attributes['repeaterBoxShadow'] ) ) {
            $repeater_shadow = self::generate_box_shadow_css( $attributes['repeaterBoxShadow'] );
            if ( ! empty( $repeater_shadow ) ) {
                $css_rules[] = "{$repeater_item_selector} { box-shadow: {$repeater_shadow}; }";
            }
        }

        // ============================================
        // 11. FORM: REPEATER HEAD
        // Evidence: stripe-account/styles.ts:341-356
        // ============================================

        $repeater_head_selector = "{$selector} .ts-repeater-head";
        $repeater_secondary_selector = "{$selector} .ts-repeater-head label span";

        if ( ! empty( $attributes['repeaterHeadSecondaryColor'] ) ) {
            $css_rules[] = "{$repeater_secondary_selector} { color: {$attributes['repeaterHeadSecondaryColor']}; }";
        }

        if ( ! empty( $attributes['repeaterHeadSecondaryTypography'] ) ) {
            $repeater_secondary_typography = self::generate_typography_css( $attributes['repeaterHeadSecondaryTypography'] );
            if ( ! empty( $repeater_secondary_typography['desktop'] ) ) {
                $css_rules[] = "{$repeater_secondary_selector} { {$repeater_secondary_typography['desktop']} }";
            }
        }

        if ( ! empty( $attributes['repeaterHeadIconColor'] ) ) {
            $css_rules[] = "{$repeater_head_selector} i { color: {$attributes['repeaterHeadIconColor']}; }";
        }
        if ( ! empty( $attributes['repeaterHeadBorderColor'] ) ) {
            $css_rules[] = "{$repeater_head_selector} { border-bottom: 1px solid {$attributes['repeaterHeadBorderColor']}; }";
        }

        if ( isset( $attributes['repeaterHeadBorderWidth'] ) && $attributes['repeaterHeadBorderWidth'] !== '' ) {
            $css_rules[] = "{$repeater_head_selector} { border-bottom-width: {$attributes['repeaterHeadBorderWidth']}px; }";
        }
        if ( isset( $attributes['repeaterHeadBorderWidth_tablet'] ) && $attributes['repeaterHeadBorderWidth_tablet'] !== '' ) {
            $tablet_rules[] = "{$repeater_head_selector} { border-bottom-width: {$attributes['repeaterHeadBorderWidth_tablet']}px; }";
        }
        if ( isset( $attributes['repeaterHeadBorderWidth_mobile'] ) && $attributes['repeaterHeadBorderWidth_mobile'] !== '' ) {
            $mobile_rules[] = "{$repeater_head_selector} { border-bottom-width: {$attributes['repeaterHeadBorderWidth_mobile']}px; }";
        }

        // ============================================
        // 12. REPEATER: ICON BUTTON
        // Evidence: stripe-account/styles.ts:358-373
        // ============================================

        $icon_btn_selector = "{$selector} .ts-icon-btn";
        if ( ! empty( $attributes['repeaterIconButtonColor'] ) ) {
            $css_rules[] = "{$icon_btn_selector} { color: {$attributes['repeaterIconButtonColor']}; }";
        }
        if ( ! empty( $attributes['repeaterIconButtonBackground'] ) ) {
            $css_rules[] = "{$icon_btn_selector} { background-color: {$attributes['repeaterIconButtonBackground']}; }";
        }

        if ( ! empty( $attributes['repeaterIconButtonBorder'] ) ) {
            $icon_btn_border = self::generate_border_css( $attributes['repeaterIconButtonBorder'] );
            if ( ! empty( $icon_btn_border['desktop'] ) ) {
                $css_rules[] = "{$icon_btn_selector} { {$icon_btn_border['desktop']} }";
            }
        }

        if ( isset( $attributes['repeaterIconButtonBorderRadius'] ) && $attributes['repeaterIconButtonBorderRadius'] !== '' ) {
            $css_rules[] = "{$icon_btn_selector} { border-radius: {$attributes['repeaterIconButtonBorderRadius']}px; }";
        }
        if ( isset( $attributes['repeaterIconButtonBorderRadius_tablet'] ) && $attributes['repeaterIconButtonBorderRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$icon_btn_selector} { border-radius: {$attributes['repeaterIconButtonBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['repeaterIconButtonBorderRadius_mobile'] ) && $attributes['repeaterIconButtonBorderRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$icon_btn_selector} { border-radius: {$attributes['repeaterIconButtonBorderRadius_mobile']}px; }";
        }

        if ( ! empty( $attributes['repeaterIconButtonColorHover'] ) ) {
            $css_rules[] = "{$icon_btn_selector}:hover { color: {$attributes['repeaterIconButtonColorHover']}; }";
        }
        if ( ! empty( $attributes['repeaterIconButtonBackgroundHover'] ) ) {
            $css_rules[] = "{$icon_btn_selector}:hover { background-color: {$attributes['repeaterIconButtonBackgroundHover']}; }";
        }
        if ( ! empty( $attributes['repeaterIconButtonBorderColorHover'] ) ) {
            $css_rules[] = "{$icon_btn_selector}:hover { border-color: {$attributes['repeaterIconButtonBorderColorHover']}; }";
        }

        // ============================================
        // 13. FORM: PILLS
        // Evidence: stripe-account/styles.ts:375-389
        // ============================================

        $pill_selector = "{$selector} .attribute-select a";
        if ( ! empty( $attributes['pillsTypography'] ) ) {
            $pill_typography = self::generate_typography_css( $attributes['pillsTypography'] );
            if ( ! empty( $pill_typography['desktop'] ) ) {
                $css_rules[] = "{$pill_selector} { {$pill_typography['desktop']} }";
            }
        }

        if ( isset( $attributes['pillsBorderRadius'] ) && $attributes['pillsBorderRadius'] !== '' ) {
            $css_rules[] = "{$pill_selector} { border-radius: {$attributes['pillsBorderRadius']}px; }";
        }
        if ( isset( $attributes['pillsBorderRadius_tablet'] ) && $attributes['pillsBorderRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$pill_selector} { border-radius: {$attributes['pillsBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['pillsBorderRadius_mobile'] ) && $attributes['pillsBorderRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$pill_selector} { border-radius: {$attributes['pillsBorderRadius_mobile']}px; }";
        }

        if ( ! empty( $attributes['pillsTextColor'] ) ) {
            $css_rules[] = "{$pill_selector} { color: {$attributes['pillsTextColor']}; }";
        }
        if ( ! empty( $attributes['pillsBackgroundColor'] ) ) {
            $css_rules[] = "{$pill_selector} { background-color: {$attributes['pillsBackgroundColor']}; }";
        }

        if ( ! empty( $attributes['pillsTextColorHover'] ) ) {
            $css_rules[] = "{$pill_selector}:hover { color: {$attributes['pillsTextColorHover']}; }";
        }
        if ( ! empty( $attributes['pillsBackgroundColorHover'] ) ) {
            $css_rules[] = "{$pill_selector}:hover { background-color: {$attributes['pillsBackgroundColorHover']}; }";
        }

        // ============================================
        // 14. BUTTONS REFINEMENT - PRIMARY ICON
        // Evidence: stripe-account/styles.ts:391-403
        // ============================================

        if ( ! empty( $attributes['primaryButtonIconColor'] ) ) {
            $css_rules[] = "{$primary_btn} i { color: {$attributes['primaryButtonIconColor']}; }";
        }
        if ( ! empty( $attributes['primaryButtonIconColorHover'] ) ) {
            $css_rules[] = "{$primary_btn}:hover i { color: {$attributes['primaryButtonIconColorHover']}; }";
        }

        if ( isset( $attributes['primaryButtonIconSize'] ) && $attributes['primaryButtonIconSize'] !== '' ) {
            $css_rules[] = "{$primary_btn} i { font-size: {$attributes['primaryButtonIconSize']}px; }";
        }
        if ( isset( $attributes['primaryButtonIconSize_tablet'] ) && $attributes['primaryButtonIconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$primary_btn} i { font-size: {$attributes['primaryButtonIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['primaryButtonIconSize_mobile'] ) && $attributes['primaryButtonIconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$primary_btn} i { font-size: {$attributes['primaryButtonIconSize_mobile']}px; }";
        }

        if ( isset( $attributes['primaryButtonIconTextSpacing'] ) && $attributes['primaryButtonIconTextSpacing'] !== '' ) {
            $css_rules[] = "{$primary_btn} { gap: {$attributes['primaryButtonIconTextSpacing']}px; }";
        }
        if ( isset( $attributes['primaryButtonIconTextSpacing_tablet'] ) && $attributes['primaryButtonIconTextSpacing_tablet'] !== '' ) {
            $tablet_rules[] = "{$primary_btn} { gap: {$attributes['primaryButtonIconTextSpacing_tablet']}px; }";
        }
        if ( isset( $attributes['primaryButtonIconTextSpacing_mobile'] ) && $attributes['primaryButtonIconTextSpacing_mobile'] !== '' ) {
            $mobile_rules[] = "{$primary_btn} { gap: {$attributes['primaryButtonIconTextSpacing_mobile']}px; }";
        }

        // ============================================
        // 15. BUTTONS REFINEMENT - SECONDARY & TERTIARY
        // Evidence: stripe-account/styles.ts:405-424
        // ============================================

        // Secondary Height & Icon
        if ( isset( $attributes['secondaryButtonHeight'] ) && $attributes['secondaryButtonHeight'] !== '' ) {
            $css_rules[] = "{$secondary_btn} { height: {$attributes['secondaryButtonHeight']}px; }";
        }
        if ( isset( $attributes['secondaryButtonHeight_tablet'] ) && $attributes['secondaryButtonHeight_tablet'] !== '' ) {
            $tablet_rules[] = "{$secondary_btn} { height: {$attributes['secondaryButtonHeight_tablet']}px; }";
        }
        if ( isset( $attributes['secondaryButtonHeight_mobile'] ) && $attributes['secondaryButtonHeight_mobile'] !== '' ) {
            $mobile_rules[] = "{$secondary_btn} { height: {$attributes['secondaryButtonHeight_mobile']}px; }";
        }

        if ( isset( $attributes['secondaryButtonIconSize'] ) && $attributes['secondaryButtonIconSize'] !== '' ) {
            $css_rules[] = "{$secondary_btn} i { font-size: {$attributes['secondaryButtonIconSize']}px; }";
        }
        if ( isset( $attributes['secondaryButtonIconSize_tablet'] ) && $attributes['secondaryButtonIconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$secondary_btn} i { font-size: {$attributes['secondaryButtonIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['secondaryButtonIconSize_mobile'] ) && $attributes['secondaryButtonIconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$secondary_btn} i { font-size: {$attributes['secondaryButtonIconSize_mobile']}px; }";
        }

        if ( isset( $attributes['secondaryButtonIconRightPadding'] ) && $attributes['secondaryButtonIconRightPadding'] !== '' ) {
            $css_rules[] = "{$secondary_btn} i { margin-right: {$attributes['secondaryButtonIconRightPadding']}px; }";
        }
        if ( isset( $attributes['secondaryButtonIconRightPadding_tablet'] ) && $attributes['secondaryButtonIconRightPadding_tablet'] !== '' ) {
            $tablet_rules[] = "{$secondary_btn} i { margin-right: {$attributes['secondaryButtonIconRightPadding_tablet']}px; }";
        }
        if ( isset( $attributes['secondaryButtonIconRightPadding_mobile'] ) && $attributes['secondaryButtonIconRightPadding_mobile'] !== '' ) {
            $mobile_rules[] = "{$secondary_btn} i { margin-right: {$attributes['secondaryButtonIconRightPadding_mobile']}px; }";
        }

        if ( ! empty( $attributes['secondaryButtonIconColor'] ) ) {
            $css_rules[] = "{$secondary_btn} i { color: {$attributes['secondaryButtonIconColor']}; }";
        }
        if ( ! empty( $attributes['secondaryButtonIconColorHover'] ) ) {
            $css_rules[] = "{$secondary_btn}:hover i { color: {$attributes['secondaryButtonIconColorHover']}; }";
        }

        // Tertiary Icon
        if ( isset( $attributes['tertiaryButtonIconSize'] ) && $attributes['tertiaryButtonIconSize'] !== '' ) {
            $css_rules[] = "{$tertiary_btn} i { font-size: {$attributes['tertiaryButtonIconSize']}px; }";
        }
        if ( isset( $attributes['tertiaryButtonIconSize_tablet'] ) && $attributes['tertiaryButtonIconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$tertiary_btn} i { font-size: {$attributes['tertiaryButtonIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['tertiaryButtonIconSize_mobile'] ) && $attributes['tertiaryButtonIconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$tertiary_btn} i { font-size: {$attributes['tertiaryButtonIconSize_mobile']}px; }";
        }

        // ==================== COMBINE CSS ====================

        $final_css = '';
        if ( ! empty( $css_rules ) ) {
            $final_css .= implode( "\n", $css_rules );
        }

        if ( ! empty( $tablet_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::TABLET_BREAKPOINT . "px) {\n" . implode( "\n", $tablet_rules ) . "\n}";
        }

        if ( ! empty( $mobile_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::MOBILE_BREAKPOINT . "px) {\n" . implode( "\n", $mobile_rules ) . "\n}";
        }

        return $final_css;
    }

    /**
     * Generate CSS for Review Stats Block
     * Source: app/blocks/src/review-stats/styles.ts (lines 78-249)
     *
     * Sections: 2 total
     * - Reviews Grid (Columns, Item Gap)
     * - Review Stats (Icon Size/Spacing, Label/Score Typography/Color, Chart Background/Height/Radius)
     *
     * @param array  $attributes Block attributes from Gutenberg
     * @param string $block_id   Block ID for scoped selector
     * @return string Generated CSS
     */
    public static function generate_review_stats_css( $attributes, $block_id ) {
        if ( empty( $block_id ) ) {
            return '';
        }

        $css_rules = [];
        $tablet_rules = [];
        $mobile_rules = [];
        $selector = '.vxfse-review-stats-' . $block_id;

        // ============================================
        // 1. REVIEWS GRID
        // Evidence: review-stats/styles.ts:87-122
        // ============================================

        // Grid columns
        if ( isset( $attributes['columns'] ) && $attributes['columns'] !== '' ) {
            $css_rules[] = "{$selector} .ts-review-bars { grid-template-columns: repeat({$attributes['columns']}, 1fr); }";
        }
        if ( isset( $attributes['columns_tablet'] ) && $attributes['columns_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-review-bars { grid-template-columns: repeat({$attributes['columns_tablet']}, 1fr); }";
        }
        if ( isset( $attributes['columns_mobile'] ) && $attributes['columns_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-review-bars { grid-template-columns: repeat({$attributes['columns_mobile']}, 1fr); }";
        }

        // Item gap
        if ( isset( $attributes['itemGap'] ) && $attributes['itemGap'] !== '' ) {
            $css_rules[] = "{$selector} .ts-review-bars { grid-gap: {$attributes['itemGap']}px; }";
        }
        if ( isset( $attributes['itemGap_tablet'] ) && $attributes['itemGap_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-review-bars { grid-gap: {$attributes['itemGap_tablet']}px; }";
        }
        if ( isset( $attributes['itemGap_mobile'] ) && $attributes['itemGap_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-review-bars { grid-gap: {$attributes['itemGap_mobile']}px; }";
        }

        // ============================================
        // 2. REVIEW STATS
        // Evidence: review-stats/styles.ts:124-226
        // ============================================

        // Icon size
        if ( isset( $attributes['iconSize'] ) && $attributes['iconSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-bar-data i { font-size: {$attributes['iconSize']}px; }";
            $css_rules[] = "{$selector} .ts-bar-data svg { width: {$attributes['iconSize']}px; height: {$attributes['iconSize']}px; }";
        }
        if ( isset( $attributes['iconSize_tablet'] ) && $attributes['iconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-bar-data i { font-size: {$attributes['iconSize_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-bar-data svg { width: {$attributes['iconSize_tablet']}px; height: {$attributes['iconSize_tablet']}px; }";
        }
        if ( isset( $attributes['iconSize_mobile'] ) && $attributes['iconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-bar-data i { font-size: {$attributes['iconSize_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-bar-data svg { width: {$attributes['iconSize_mobile']}px; height: {$attributes['iconSize_mobile']}px; }";
        }

        // Icon spacing
        if ( isset( $attributes['iconSpacing'] ) && $attributes['iconSpacing'] !== '' ) {
            $css_rules[] = "{$selector} .ts-bar-data i { margin-right: {$attributes['iconSpacing']}px; }";
            $css_rules[] = "{$selector} .ts-bar-data svg { margin-right: {$attributes['iconSpacing']}px; }";
        }

        // Label typography
        if ( ! empty( $attributes['labelTypography'] ) ) {
            $label_typography = self::generate_typography_css( $attributes['labelTypography'] );
            if ( ! empty( $label_typography['desktop'] ) ) {
                $css_rules[] = "{$selector} .ts-bar-data p { {$label_typography['desktop']} }";
            }
            if ( ! empty( $label_typography['tablet'] ) ) {
                $tablet_rules[] = "{$selector} .ts-bar-data p { {$label_typography['tablet']} }";
            }
            if ( ! empty( $label_typography['mobile'] ) ) {
                $mobile_rules[] = "{$selector} .ts-bar-data p { {$label_typography['mobile']} }";
            }
        }

        // Label color
        if ( ! empty( $attributes['labelColor'] ) ) {
            $css_rules[] = "{$selector} .ts-bar-data p { color: {$attributes['labelColor']}; }";
        }

        // Score typography
        if ( ! empty( $attributes['scoreTypography'] ) ) {
            $score_typography = self::generate_typography_css( $attributes['scoreTypography'] );
            if ( ! empty( $score_typography['desktop'] ) ) {
                $css_rules[] = "{$selector} .ts-bar-data p span { {$score_typography['desktop']} }";
            }
            if ( ! empty( $score_typography['tablet'] ) ) {
                $tablet_rules[] = "{$selector} .ts-bar-data p span { {$score_typography['tablet']} }";
            }
            if ( ! empty( $score_typography['mobile'] ) ) {
                $mobile_rules[] = "{$selector} .ts-bar-data p span { {$score_typography['mobile']} }";
            }
        }

        // Score color
        if ( ! empty( $attributes['scoreColor'] ) ) {
            $css_rules[] = "{$selector} .ts-bar-data p span { color: {$attributes['scoreColor']}; }";
        }

        // Chart background color
        if ( ! empty( $attributes['chartBgColor'] ) ) {
            $css_rules[] = "{$selector} .ts-bar-chart { background-color: {$attributes['chartBgColor']}; }";
        }

        // Chart height
        if ( isset( $attributes['chartHeight'] ) && $attributes['chartHeight'] !== '' ) {
            $css_rules[] = "{$selector} .ts-bar-chart { height: {$attributes['chartHeight']}px; }";
        }
        if ( isset( $attributes['chartHeight_tablet'] ) && $attributes['chartHeight_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-bar-chart { height: {$attributes['chartHeight_tablet']}px; }";
        }
        if ( isset( $attributes['chartHeight_mobile'] ) && $attributes['chartHeight_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-bar-chart { height: {$attributes['chartHeight_mobile']}px; }";
        }

        // Chart radius
        if ( isset( $attributes['chartRadius'] ) && $attributes['chartRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-bar-chart { border-radius: {$attributes['chartRadius']}px; }";
        }
        if ( isset( $attributes['chartRadius_tablet'] ) && $attributes['chartRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-bar-chart { border-radius: {$attributes['chartRadius_tablet']}px; }";
        }
        if ( isset( $attributes['chartRadius_mobile'] ) && $attributes['chartRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-bar-chart { border-radius: {$attributes['chartRadius_mobile']}px; }";
        }

        // ==================== COMBINE CSS ====================

        $final_css = '';
        if ( ! empty( $css_rules ) ) {
            $final_css .= implode( "\n", $css_rules );
        }

        if ( ! empty( $tablet_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::TABLET_BREAKPOINT . "px) {\n" . implode( "\n", $tablet_rules ) . "\n}";
        }

        if ( ! empty( $mobile_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::MOBILE_BREAKPOINT . "px) {\n" . implode( "\n", $mobile_rules ) . "\n}";
        }

        return $final_css;
    }

    /**
     * Generate CSS for Ring Chart Block
     *
     * Evidence: ring-chart/styles.ts
     * Sections: Animation Duration (Content tab), Typography (Style tab)
     * Only generates tablet/mobile overrides - desktop values handled as inline styles.
     *
     * @param array  $attributes Block attributes from Gutenberg
     * @param string $block_id   Block ID for scoped selector
     * @return string Generated CSS
     */
    public static function generate_ring_chart_css( $attributes, $block_id ) {
        if ( empty( $block_id ) ) {
            return '';
        }

        $css_rules    = [];
        $tablet_rules = [];
        $mobile_rules = [];
        $selector     = '.voxel-fse-ring-chart-' . $block_id;

        // ============================================
        // CONTENT TAB - Animation Duration (Responsive)
        // Evidence: ring-chart/styles.ts:42-58
        // Selector: .circle-chart__circle
        // Desktop value handled as inline style in RingChartComponent
        // ============================================

        // Tablet
        if ( isset( $attributes['ts_chart_animation_duration_tablet'] ) && $attributes['ts_chart_animation_duration_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .circle-chart__circle { animation-duration: {$attributes['ts_chart_animation_duration_tablet']}s; }";
        }

        // Mobile
        if ( isset( $attributes['ts_chart_animation_duration_mobile'] ) && $attributes['ts_chart_animation_duration_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .circle-chart__circle { animation-duration: {$attributes['ts_chart_animation_duration_mobile']}s; }";
        }

        // ============================================
        // STYLE TAB - Value Typography (Responsive)
        // Evidence: ring-chart/styles.ts:60-106
        // Selector: .circle-chart .chart-value
        // ============================================

        // Font size - Tablet
        if ( ! empty( $attributes['chart_value_typography_font_size_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .circle-chart .chart-value { font-size: {$attributes['chart_value_typography_font_size_tablet']}; }";
        }

        // Font size - Mobile
        if ( ! empty( $attributes['chart_value_typography_font_size_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .circle-chart .chart-value { font-size: {$attributes['chart_value_typography_font_size_mobile']}; }";
        }

        // Line height - Tablet
        if ( ! empty( $attributes['chart_value_typography_line_height_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .circle-chart .chart-value { line-height: {$attributes['chart_value_typography_line_height_tablet']}; }";
        }

        // Line height - Mobile
        if ( ! empty( $attributes['chart_value_typography_line_height_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .circle-chart .chart-value { line-height: {$attributes['chart_value_typography_line_height_mobile']}; }";
        }

        // Letter spacing - Tablet
        if ( ! empty( $attributes['chart_value_typography_letter_spacing_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .circle-chart .chart-value { letter-spacing: {$attributes['chart_value_typography_letter_spacing_tablet']}; }";
        }

        // Letter spacing - Mobile
        if ( ! empty( $attributes['chart_value_typography_letter_spacing_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .circle-chart .chart-value { letter-spacing: {$attributes['chart_value_typography_letter_spacing_mobile']}; }";
        }

        // ==================== COMBINE CSS ====================

        $final_css = '';
        if ( ! empty( $css_rules ) ) {
            $final_css .= implode( "\n", $css_rules );
        }

        if ( ! empty( $tablet_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::TABLET_BREAKPOINT . "px) {\n" . implode( "\n", $tablet_rules ) . "\n}";
        }

        if ( ! empty( $mobile_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::MOBILE_BREAKPOINT . "px) {\n" . implode( "\n", $mobile_rules ) . "\n}";
        }

        return $final_css;
    }

    /**
     * Generate CSS for Nested Accordion Block
     *
     * Evidence: nested-accordion/styles.ts
     * Combines Content tab (generateContentTabResponsiveCSS) and Style tab (generateStyleTabResponsiveCSS).
     *
     * Content Tab Sections:
     * - Item Spacing, Content Distance (CSS variables)
     * - Item Position, Icon Position
     * - Icon Size, Icon Spacing
     *
     * Style Tab Sections:
     * - Accordion Normal/Hover/Active: background, border, border-radius, padding
     * - Title Typography, Text Shadow, Text Stroke (Normal/Hover/Active)
     * - Content: background, border, border-radius, padding
     *
     * @param array  $attributes Block attributes from Gutenberg
     * @param string $block_id   Block ID for scoped selector
     * @return string Generated CSS
     */
    public static function generate_nested_accordion_css( $attributes, $block_id ) {
        if ( empty( $block_id ) ) {
            return '';
        }

        $css_rules    = [];
        $tablet_rules = [];
        $mobile_rules = [];

        // Content tab uses class-based selector
        $selector = '.vxfse-nested-accordion-' . $block_id;

        // Style tab uses data-attribute selector (matches Elementor pattern)
        $style_selector = ".vxfse-nested-accordion[data-block-id=\"{$block_id}\"]";

        // ============================================
        // CONTENT TAB - Layout Section
        // Evidence: nested-accordion/styles.ts:37-61
        // ============================================

        // Item Spacing - CSS Variable: --n-accordion-item-title-space-between
        if ( isset( $attributes['itemSpacing_tablet'] ) && $attributes['itemSpacing_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} { --n-accordion-item-title-space-between: {$attributes['itemSpacing_tablet']}px; }";
        }
        if ( isset( $attributes['itemSpacing_mobile'] ) && $attributes['itemSpacing_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} { --n-accordion-item-title-space-between: {$attributes['itemSpacing_mobile']}px; }";
        }

        // Content Distance - CSS Variable: --n-accordion-item-title-distance-from-content
        if ( isset( $attributes['contentDistance_tablet'] ) && $attributes['contentDistance_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} { --n-accordion-item-title-distance-from-content: {$attributes['contentDistance_tablet']}px; }";
        }
        if ( isset( $attributes['contentDistance_mobile'] ) && $attributes['contentDistance_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} { --n-accordion-item-title-distance-from-content: {$attributes['contentDistance_mobile']}px; }";
        }

        // Item Position - Maps to justify-content
        // start  initial, center  center, end  flex-end, stretch  space-between
        $position_map = [
            'start'   => 'initial',
            'center'  => 'center',
            'end'     => 'flex-end',
            'stretch' => 'space-between',
        ];

        if ( ! empty( $attributes['itemPosition']['tablet'] ) ) {
            $pos = $attributes['itemPosition']['tablet'];
            $val = $position_map[ $pos ] ?? 'initial';
            $tablet_rules[] = "{$selector} .e-n-accordion-item-title { justify-content: {$val}; }";
            if ( $pos === 'stretch' ) {
                $tablet_rules[] = "{$selector} .e-n-accordion-item-title .e-n-accordion-item-title-text { flex-grow: 1; }";
            }
        }

        if ( ! empty( $attributes['itemPosition']['mobile'] ) ) {
            $pos = $attributes['itemPosition']['mobile'];
            $val = $position_map[ $pos ] ?? 'initial';
            $mobile_rules[] = "{$selector} .e-n-accordion-item-title { justify-content: {$val}; }";
            if ( $pos === 'stretch' ) {
                $mobile_rules[] = "{$selector} .e-n-accordion-item-title .e-n-accordion-item-title-text { flex-grow: 1; }";
            }
        }

        // Icon Position - start  order:-1, end  order:initial
        if ( ! empty( $attributes['iconPosition']['tablet'] ) ) {
            $order = $attributes['iconPosition']['tablet'] === 'start' ? '-1' : 'initial';
            $tablet_rules[] = "{$selector} .e-n-accordion-item-title-icon { order: {$order}; }";
        }
        if ( ! empty( $attributes['iconPosition']['mobile'] ) ) {
            $order = $attributes['iconPosition']['mobile'] === 'start' ? '-1' : 'initial';
            $mobile_rules[] = "{$selector} .e-n-accordion-item-title-icon { order: {$order}; }";
        }

        // ============================================
        // CONTENT TAB - Icon Section
        // Evidence: nested-accordion/styles.ts:128-150
        // ============================================

        // Icon Size - Responsive
        if ( isset( $attributes['iconSize_tablet'] ) && $attributes['iconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .e-n-accordion-item-title-icon i { font-size: {$attributes['iconSize_tablet']}px; }";
        }
        if ( isset( $attributes['iconSize_mobile'] ) && $attributes['iconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .e-n-accordion-item-title-icon i { font-size: {$attributes['iconSize_mobile']}px; }";
        }

        // Icon Spacing - Responsive
        if ( isset( $attributes['iconSpacing_tablet'] ) && $attributes['iconSpacing_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .e-n-accordion-item-title-icon { margin: 0 {$attributes['iconSpacing_tablet']}px; }";
        }
        if ( isset( $attributes['iconSpacing_mobile'] ) && $attributes['iconSpacing_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .e-n-accordion-item-title-icon { margin: 0 {$attributes['iconSpacing_mobile']}px; }";
        }

        // ============================================
        // STYLE TAB - SECTION 1: Accordion Styling (Normal/Hover/Active)
        // Evidence: nested-accordion/styles.ts:204-332
        // Uses data-attribute selector ($style_selector)
        // ============================================

        // --- Normal State ---

        // Background
        if ( ! empty( $attributes['accordionNormalBg'] ) ) {
            $css_rules[] = "{$style_selector} .e-n-accordion-item-title { background-color: {$attributes['accordionNormalBg']}; }";
        }

        // Border (uses borderType/borderWidth/borderColor pattern)
        if ( ! empty( $attributes['accordionNormalBorderType'] ) && $attributes['accordionNormalBorderType'] !== 'none' ) {
            $border_width = $attributes['accordionNormalBorderWidth'] ?? [];
            $top    = floatval( $border_width['top'] ?? 0 );
            $right  = floatval( $border_width['right'] ?? 0 );
            $bottom = floatval( $border_width['bottom'] ?? 0 );
            $left   = floatval( $border_width['left'] ?? 0 );
            $color  = $attributes['accordionNormalBorderColor'] ?? '#d5d8dc';

            $css_rules[] = "{$style_selector} .e-n-accordion-item-title { "
                . "border-style: {$attributes['accordionNormalBorderType']}; "
                . "border-width: {$top}px {$right}px {$bottom}px {$left}px; "
                . "border-color: {$color}; "
                . "}";
        }

        // --- Hover State ---

        if ( ! empty( $attributes['accordionHoverBg'] ) ) {
            $css_rules[] = "{$style_selector} .e-n-accordion-item:not([open]):hover > .e-n-accordion-item-title { background-color: {$attributes['accordionHoverBg']}; }";
        }

        if ( ! empty( $attributes['accordionHoverBorderType'] ) && $attributes['accordionHoverBorderType'] !== 'none' ) {
            $border_width = $attributes['accordionHoverBorderWidth'] ?? [];
            $top    = floatval( $border_width['top'] ?? 0 );
            $right  = floatval( $border_width['right'] ?? 0 );
            $bottom = floatval( $border_width['bottom'] ?? 0 );
            $left   = floatval( $border_width['left'] ?? 0 );
            $color  = $attributes['accordionHoverBorderColor'] ?? '#d5d8dc';

            $css_rules[] = "{$style_selector} .e-n-accordion-item:not([open]):hover > .e-n-accordion-item-title { "
                . "border-style: {$attributes['accordionHoverBorderType']}; "
                . "border-width: {$top}px {$right}px {$bottom}px {$left}px; "
                . "border-color: {$color}; "
                . "}";
        }

        // --- Active State ---

        if ( ! empty( $attributes['accordionActiveBg'] ) ) {
            $css_rules[] = "{$style_selector} .e-n-accordion-item[open] > .e-n-accordion-item-title { background-color: {$attributes['accordionActiveBg']}; }";
        }

        if ( ! empty( $attributes['accordionActiveBorderType'] ) && $attributes['accordionActiveBorderType'] !== 'none' ) {
            $border_width = $attributes['accordionActiveBorderWidth'] ?? [];
            $top    = floatval( $border_width['top'] ?? 0 );
            $right  = floatval( $border_width['right'] ?? 0 );
            $bottom = floatval( $border_width['bottom'] ?? 0 );
            $left   = floatval( $border_width['left'] ?? 0 );
            $color  = $attributes['accordionActiveBorderColor'] ?? '#d5d8dc';

            $css_rules[] = "{$style_selector} .e-n-accordion-item[open] > .e-n-accordion-item-title { "
                . "border-style: {$attributes['accordionActiveBorderType']}; "
                . "border-width: {$top}px {$right}px {$bottom}px {$left}px; "
                . "border-color: {$color}; "
                . "}";
        }

        // Accordion Border Radius (responsive)
        if ( ! empty( $attributes['accordionBorderRadius']['desktop'] ) ) {
            $br     = $attributes['accordionBorderRadius']['desktop'];
            $top    = $br['top'] ?? '0px';
            $right  = $br['right'] ?? '0px';
            $bottom = $br['bottom'] ?? '0px';
            $left   = $br['left'] ?? '0px';
            $css_rules[] = "{$style_selector} .e-n-accordion-item-title { border-radius: {$top} {$right} {$bottom} {$left}; }";
        }
        if ( ! empty( $attributes['accordionBorderRadius']['tablet'] ) ) {
            $br     = $attributes['accordionBorderRadius']['tablet'];
            $top    = $br['top'] ?? '0px';
            $right  = $br['right'] ?? '0px';
            $bottom = $br['bottom'] ?? '0px';
            $left   = $br['left'] ?? '0px';
            $tablet_rules[] = "{$style_selector} .e-n-accordion-item-title { border-radius: {$top} {$right} {$bottom} {$left}; }";
        }
        if ( ! empty( $attributes['accordionBorderRadius']['mobile'] ) ) {
            $br     = $attributes['accordionBorderRadius']['mobile'];
            $top    = $br['top'] ?? '0px';
            $right  = $br['right'] ?? '0px';
            $bottom = $br['bottom'] ?? '0px';
            $left   = $br['left'] ?? '0px';
            $mobile_rules[] = "{$style_selector} .e-n-accordion-item-title { border-radius: {$top} {$right} {$bottom} {$left}; }";
        }

        // Accordion Padding (responsive)
        if ( ! empty( $attributes['accordionPadding']['desktop'] ) ) {
            $p      = $attributes['accordionPadding']['desktop'];
            $top    = $p['top'] ?? '10px';
            $right  = $p['right'] ?? '10px';
            $bottom = $p['bottom'] ?? '10px';
            $left   = $p['left'] ?? '10px';
            $css_rules[] = "{$style_selector} .e-n-accordion-item-title { padding: {$top} {$right} {$bottom} {$left}; }";
        }
        if ( ! empty( $attributes['accordionPadding']['tablet'] ) ) {
            $p      = $attributes['accordionPadding']['tablet'];
            $top    = $p['top'] ?? '10px';
            $right  = $p['right'] ?? '10px';
            $bottom = $p['bottom'] ?? '10px';
            $left   = $p['left'] ?? '10px';
            $tablet_rules[] = "{$style_selector} .e-n-accordion-item-title { padding: {$top} {$right} {$bottom} {$left}; }";
        }
        if ( ! empty( $attributes['accordionPadding']['mobile'] ) ) {
            $p      = $attributes['accordionPadding']['mobile'];
            $top    = $p['top'] ?? '10px';
            $right  = $p['right'] ?? '10px';
            $bottom = $p['bottom'] ?? '10px';
            $left   = $p['left'] ?? '10px';
            $mobile_rules[] = "{$style_selector} .e-n-accordion-item-title { padding: {$top} {$right} {$bottom} {$left}; }";
        }

        // ============================================
        // STYLE TAB - SECTION 2: Title Typography & States
        // Evidence: nested-accordion/styles.ts:334-398
        // ============================================

        // Typography
        if ( ! empty( $attributes['titleTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['titleTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$style_selector} .e-n-accordion-item-title-text { {$typo}; }";
            }
        }

        // Title Text Shadow (Normal/Hover/Active states)
        $title_shadow_states = [
            'Normal' => "{$style_selector} .e-n-accordion-item-title-text",
            'Hover'  => "{$style_selector} .e-n-accordion-item:not([open]):hover > .e-n-accordion-item-title .e-n-accordion-item-title-text",
            'Active' => "{$style_selector} .e-n-accordion-item[open] > .e-n-accordion-item-title .e-n-accordion-item-title-text",
        ];

        foreach ( $title_shadow_states as $state => $state_selector ) {
            $attr_key = "title{$state}TextShadow";
            if ( ! empty( $attributes[ $attr_key ] ) ) {
                $shadow = $attributes[ $attr_key ];
                if ( isset( $shadow['horizontal'] ) ) {
                    $h     = $shadow['horizontal'] ?? 0;
                    $v     = $shadow['vertical'] ?? 0;
                    $blur  = $shadow['blur'] ?? 0;
                    $color = $shadow['color'] ?? 'rgba(0,0,0,0.3)';
                    $css_rules[] = "{$state_selector} { text-shadow: {$h}px {$v}px {$blur}px {$color}; }";
                }
            }
        }

        // Title Text Stroke (Normal/Hover/Active states)
        $title_stroke_states = [
            'Normal' => "{$style_selector} .e-n-accordion-item-title-text",
            'Hover'  => "{$style_selector} .e-n-accordion-item:not([open]):hover > .e-n-accordion-item-title .e-n-accordion-item-title-text",
            'Active' => "{$style_selector} .e-n-accordion-item[open] > .e-n-accordion-item-title .e-n-accordion-item-title-text",
        ];

        foreach ( $title_stroke_states as $state => $state_selector ) {
            $attr_key = "title{$state}TextStroke";
            if ( ! empty( $attributes[ $attr_key ] ) ) {
                $stroke = $attributes[ $attr_key ];
                if ( isset( $stroke['width'] ) && ! empty( $stroke['color'] ) ) {
                    $width = $stroke['width'] ?? 0;
                    $color = $stroke['color'] ?? '#000';
                    $css_rules[] = "{$state_selector} { -webkit-text-stroke-width: {$width}px; -webkit-text-stroke-color: {$color}; }";
                }
            }
        }

        // ============================================
        // STYLE TAB - SECTION 3: Content Styling
        // Evidence: nested-accordion/styles.ts:400-482
        // ============================================

        // Content Background
        if ( ! empty( $attributes['contentBg'] ) ) {
            $css_rules[] = "{$style_selector} .e-n-accordion-item-content { background-color: {$attributes['contentBg']}; }";
        }

        // Content Border
        if ( ! empty( $attributes['contentBorderType'] ) && $attributes['contentBorderType'] !== 'none' ) {
            $border_width = $attributes['contentBorderWidth'] ?? [];
            $top    = floatval( $border_width['top'] ?? 0 );
            $right  = floatval( $border_width['right'] ?? 0 );
            $bottom = floatval( $border_width['bottom'] ?? 0 );
            $left   = floatval( $border_width['left'] ?? 0 );
            $color  = $attributes['contentBorderColor'] ?? '#d5d8dc';

            $css_rules[] = "{$style_selector} .e-n-accordion-item-content { "
                . "border-style: {$attributes['contentBorderType']}; "
                . "border-width: {$top}px {$right}px {$bottom}px {$left}px; "
                . "border-color: {$color}; "
                . "}";
        }

        // Content Border Radius (responsive)
        if ( ! empty( $attributes['contentBorderRadius']['desktop'] ) ) {
            $br     = $attributes['contentBorderRadius']['desktop'];
            $top    = $br['top'] ?? '0px';
            $right  = $br['right'] ?? '0px';
            $bottom = $br['bottom'] ?? '0px';
            $left   = $br['left'] ?? '0px';
            $css_rules[] = "{$style_selector} .e-n-accordion-item-content { border-radius: {$top} {$right} {$bottom} {$left}; }";
        }
        if ( ! empty( $attributes['contentBorderRadius']['tablet'] ) ) {
            $br     = $attributes['contentBorderRadius']['tablet'];
            $top    = $br['top'] ?? '0px';
            $right  = $br['right'] ?? '0px';
            $bottom = $br['bottom'] ?? '0px';
            $left   = $br['left'] ?? '0px';
            $tablet_rules[] = "{$style_selector} .e-n-accordion-item-content { border-radius: {$top} {$right} {$bottom} {$left}; }";
        }
        if ( ! empty( $attributes['contentBorderRadius']['mobile'] ) ) {
            $br     = $attributes['contentBorderRadius']['mobile'];
            $top    = $br['top'] ?? '0px';
            $right  = $br['right'] ?? '0px';
            $bottom = $br['bottom'] ?? '0px';
            $left   = $br['left'] ?? '0px';
            $mobile_rules[] = "{$style_selector} .e-n-accordion-item-content { border-radius: {$top} {$right} {$bottom} {$left}; }";
        }

        // Content Padding (responsive)
        if ( ! empty( $attributes['contentPadding']['desktop'] ) ) {
            $p      = $attributes['contentPadding']['desktop'];
            $top    = $p['top'] ?? '0';
            $right  = $p['right'] ?? '0';
            $bottom = $p['bottom'] ?? '0';
            $left   = $p['left'] ?? '0';
            $css_rules[] = "{$style_selector} .e-n-accordion-item-content { padding: {$top} {$right} {$bottom} {$left}; }";
        }
        if ( ! empty( $attributes['contentPadding']['tablet'] ) ) {
            $p      = $attributes['contentPadding']['tablet'];
            $top    = $p['top'] ?? '0';
            $right  = $p['right'] ?? '0';
            $bottom = $p['bottom'] ?? '0';
            $left   = $p['left'] ?? '0';
            $tablet_rules[] = "{$style_selector} .e-n-accordion-item-content { padding: {$top} {$right} {$bottom} {$left}; }";
        }
        if ( ! empty( $attributes['contentPadding']['mobile'] ) ) {
            $p      = $attributes['contentPadding']['mobile'];
            $top    = $p['top'] ?? '0';
            $right  = $p['right'] ?? '0';
            $bottom = $p['bottom'] ?? '0';
            $left   = $p['left'] ?? '0';
            $mobile_rules[] = "{$style_selector} .e-n-accordion-item-content { padding: {$top} {$right} {$bottom} {$left}; }";
        }

        // ==================== COMBINE CSS ====================

        $final_css = '';
        if ( ! empty( $css_rules ) ) {
            $final_css .= implode( "\n", $css_rules );
        }

        if ( ! empty( $tablet_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::TABLET_BREAKPOINT . "px) {\n" . implode( "\n", $tablet_rules ) . "\n}";
        }

        if ( ! empty( $mobile_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::MOBILE_BREAKPOINT . "px) {\n" . implode( "\n", $mobile_rules ) . "\n}";
        }

        return $final_css;
    }

    /**
     * Generate CSS for Nested Tabs Block
     *
     * Evidence: nested-tabs/styles.ts
     * Sections:
     * - Tabs: Tab button styling (Normal/Hover/Active) with borders and box shadows
     * - Titles: Typography and text styling (Normal/Hover/Active) with text shadow/stroke
     * - Content: Border and box shadow
     * - Responsive CSS variables for tablet/mobile
     *
     * @param array  $attributes Block attributes from Gutenberg
     * @param string $block_id   Block ID for scoped selector
     * @return string Generated CSS
     */
    public static function generate_nested_tabs_css( $attributes, $block_id ) {
        if ( empty( $block_id ) ) {
            return '';
        }

        $css_rules    = [];
        $tablet_rules = [];
        $mobile_rules = [];
        $selector     = '.vxfse-nested-tabs-' . $block_id;

        // ============================================
        // SECTION 1: Tabs - Tab button styling (Normal/Hover/Active)
        // Evidence: nested-tabs/styles.ts:88-170
        // ============================================

        // --- Normal State ---
        $tab_normal_selector = "{$selector} .e-n-tabs-heading > .e-n-tab-title[aria-selected='false']:not(:hover)";

        // Border - Normal
        if ( ! empty( $attributes['tabsNormalBorderType'] ) && $attributes['tabsNormalBorderType'] !== 'none' ) {
            $border_width = $attributes['tabsNormalBorderWidth'] ?? [];
            $top    = floatval( $border_width['top'] ?? 0 );
            $right  = floatval( $border_width['right'] ?? 0 );
            $bottom = floatval( $border_width['bottom'] ?? 0 );
            $left   = floatval( $border_width['left'] ?? 0 );
            $color  = $attributes['tabsNormalBorderColor'] ?? '#000000';

            $css_rules[] = "{$tab_normal_selector} { "
                . "border-style: {$attributes['tabsNormalBorderType']}; "
                . "border-width: {$top}px {$right}px {$bottom}px {$left}px; "
                . "border-color: {$color}; "
                . "}";
        }

        // Box Shadow - Normal
        if ( ! empty( $attributes['tabsNormalBoxShadow'] ) && ! empty( $attributes['tabsNormalBoxShadow']['enable'] ) ) {
            $shadow     = $attributes['tabsNormalBoxShadow'];
            $h          = $shadow['horizontal'] ?? 0;
            $v          = $shadow['vertical'] ?? 0;
            $blur       = $shadow['blur'] ?? 0;
            $spread     = $shadow['spread'] ?? 0;
            $color      = $shadow['color'] ?? 'rgba(0,0,0,0.1)';
            $inset      = ( ! empty( $shadow['position'] ) && $shadow['position'] === 'inset' ) ? 'inset ' : '';
            $css_rules[] = "{$tab_normal_selector} { box-shadow: {$inset}{$h}px {$v}px {$blur}px {$spread}px {$color}; }";
        }

        // --- Hover State ---
        $tab_hover_selector = "{$selector} .e-n-tabs[data-touch-mode='false'] > .e-n-tabs-heading > .e-n-tab-title[aria-selected='false']:hover";

        // Border - Hover
        if ( ! empty( $attributes['tabsHoverBorderType'] ) && $attributes['tabsHoverBorderType'] !== 'none' ) {
            $border_width = $attributes['tabsHoverBorderWidth'] ?? [];
            $top    = floatval( $border_width['top'] ?? 0 );
            $right  = floatval( $border_width['right'] ?? 0 );
            $bottom = floatval( $border_width['bottom'] ?? 0 );
            $left   = floatval( $border_width['left'] ?? 0 );
            $color  = $attributes['tabsHoverBorderColor'] ?? '#000000';

            $css_rules[] = "{$tab_hover_selector} { "
                . "border-style: {$attributes['tabsHoverBorderType']}; "
                . "border-width: {$top}px {$right}px {$bottom}px {$left}px; "
                . "border-color: {$color}; "
                . "}";
        }

        // Box Shadow - Hover
        if ( ! empty( $attributes['tabsHoverBoxShadow'] ) && ! empty( $attributes['tabsHoverBoxShadow']['enable'] ) ) {
            $shadow     = $attributes['tabsHoverBoxShadow'];
            $h          = $shadow['horizontal'] ?? 0;
            $v          = $shadow['vertical'] ?? 0;
            $blur       = $shadow['blur'] ?? 0;
            $spread     = $shadow['spread'] ?? 0;
            $color      = $shadow['color'] ?? 'rgba(0,0,0,0.1)';
            $inset      = ( ! empty( $shadow['position'] ) && $shadow['position'] === 'inset' ) ? 'inset ' : '';
            $css_rules[] = "{$tab_hover_selector} { box-shadow: {$inset}{$h}px {$v}px {$blur}px {$spread}px {$color}; }";
        }

        // --- Active State ---
        $tab_active_selector       = "{$selector} .e-n-tabs-heading > .e-n-tab-title[aria-selected='true']";
        $tab_active_touch_selector = "{$selector} .e-n-tabs[data-touch-mode='true'] > .e-n-tabs-heading > .e-n-tab-title[aria-selected='false']:hover";

        // Border - Active
        if ( ! empty( $attributes['tabsActiveBorderType'] ) && $attributes['tabsActiveBorderType'] !== 'none' ) {
            $border_width = $attributes['tabsActiveBorderWidth'] ?? [];
            $top    = floatval( $border_width['top'] ?? 0 );
            $right  = floatval( $border_width['right'] ?? 0 );
            $bottom = floatval( $border_width['bottom'] ?? 0 );
            $left   = floatval( $border_width['left'] ?? 0 );
            $color  = $attributes['tabsActiveBorderColor'] ?? '#000000';

            $css_rules[] = "{$tab_active_selector}, {$tab_active_touch_selector} { "
                . "border-style: {$attributes['tabsActiveBorderType']}; "
                . "border-width: {$top}px {$right}px {$bottom}px {$left}px; "
                . "border-color: {$color}; "
                . "}";
        }

        // Box Shadow - Active
        if ( ! empty( $attributes['tabsActiveBoxShadow'] ) && ! empty( $attributes['tabsActiveBoxShadow']['enable'] ) ) {
            $shadow     = $attributes['tabsActiveBoxShadow'];
            $h          = $shadow['horizontal'] ?? 0;
            $v          = $shadow['vertical'] ?? 0;
            $blur       = $shadow['blur'] ?? 0;
            $spread     = $shadow['spread'] ?? 0;
            $color      = $shadow['color'] ?? 'rgba(0,0,0,0.1)';
            $inset      = ( ! empty( $shadow['position'] ) && $shadow['position'] === 'inset' ) ? 'inset ' : '';
            $css_rules[] = "{$tab_active_selector}, {$tab_active_touch_selector} { box-shadow: {$inset}{$h}px {$v}px {$blur}px {$spread}px {$color}; }";
        }

        // ============================================
        // SECTION 2: Titles - Typography and text styling
        // Evidence: nested-tabs/styles.ts:172-243
        // ============================================

        $title_selector = "{$selector} .e-n-tabs-heading > .e-n-tab-title > .e-n-tab-title-text";

        // Typography - applies to all states
        if ( ! empty( $attributes['titleTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['titleTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$title_selector} { {$typo}; }";
            }
        }

        // Title Normal State
        $title_normal_selector = "{$selector} .e-n-tabs-heading > .e-n-tab-title[aria-selected='false']:not(:hover)";

        // Text Shadow - Normal
        if ( ! empty( $attributes['titleNormalTextShadow'] ) && ! empty( $attributes['titleNormalTextShadow']['enable'] ) ) {
            $shadow = $attributes['titleNormalTextShadow'];
            $h      = $shadow['horizontal'] ?? 0;
            $v      = $shadow['vertical'] ?? 0;
            $blur   = $shadow['blur'] ?? 0;
            $color  = $shadow['color'] ?? 'rgba(0,0,0,0.3)';
            $css_rules[] = "{$title_normal_selector} { text-shadow: {$h}px {$v}px {$blur}px {$color}; }";
        }

        // Text Stroke - Normal
        if ( ! empty( $attributes['titleNormalTextStroke'] ) && ! empty( $attributes['titleNormalTextStroke']['enable'] ) ) {
            $stroke = $attributes['titleNormalTextStroke'];
            $width  = $stroke['width'] ?? 1;
            $color  = $stroke['color'] ?? '#000000';
            $css_rules[] = "{$title_normal_selector} :is(span, a, i) { -webkit-text-stroke: {$width}px {$color}; text-stroke: {$width}px {$color}; }";
        }

        // Title Hover State
        $title_hover_selector = "{$selector} .e-n-tabs[data-touch-mode='false'] > .e-n-tabs-heading > .e-n-tab-title[aria-selected='false']:hover";

        // Text Shadow - Hover
        if ( ! empty( $attributes['titleHoverTextShadow'] ) && ! empty( $attributes['titleHoverTextShadow']['enable'] ) ) {
            $shadow = $attributes['titleHoverTextShadow'];
            $h      = $shadow['horizontal'] ?? 0;
            $v      = $shadow['vertical'] ?? 0;
            $blur   = $shadow['blur'] ?? 0;
            $color  = $shadow['color'] ?? 'rgba(0,0,0,0.3)';
            $css_rules[] = "{$title_hover_selector} { text-shadow: {$h}px {$v}px {$blur}px {$color}; }";
        }

        // Text Stroke - Hover
        if ( ! empty( $attributes['titleHoverTextStroke'] ) && ! empty( $attributes['titleHoverTextStroke']['enable'] ) ) {
            $stroke = $attributes['titleHoverTextStroke'];
            $width  = $stroke['width'] ?? 1;
            $color  = $stroke['color'] ?? '#000000';
            $css_rules[] = "{$title_hover_selector} :is(span, a, i) { -webkit-text-stroke: {$width}px {$color}; text-stroke: {$width}px {$color}; }";
        }

        // Title Active State
        $title_active_selector       = "{$selector} .e-n-tabs-heading > .e-n-tab-title[aria-selected='true']";
        $title_active_touch_selector = "{$selector} .e-n-tabs[data-touch-mode='true'] > .e-n-tabs-heading > .e-n-tab-title[aria-selected='false']:hover";

        // Text Shadow - Active
        if ( ! empty( $attributes['titleActiveTextShadow'] ) && ! empty( $attributes['titleActiveTextShadow']['enable'] ) ) {
            $shadow = $attributes['titleActiveTextShadow'];
            $h      = $shadow['horizontal'] ?? 0;
            $v      = $shadow['vertical'] ?? 0;
            $blur   = $shadow['blur'] ?? 0;
            $color  = $shadow['color'] ?? 'rgba(0,0,0,0.3)';
            $css_rules[] = "{$title_active_selector}, {$title_active_touch_selector} { text-shadow: {$h}px {$v}px {$blur}px {$color}; }";
        }

        // Text Stroke - Active
        if ( ! empty( $attributes['titleActiveTextStroke'] ) && ! empty( $attributes['titleActiveTextStroke']['enable'] ) ) {
            $stroke = $attributes['titleActiveTextStroke'];
            $width  = $stroke['width'] ?? 1;
            $color  = $stroke['color'] ?? '#000000';
            $css_rules[] = "{$title_active_selector} :is(span, a, i), {$title_active_touch_selector} :is(span, a, i) { -webkit-text-stroke: {$width}px {$color}; text-stroke: {$width}px {$color}; }";
        }

        // ============================================
        // SECTION 3: Content - Border and box shadow
        // Evidence: nested-tabs/styles.ts:255-280
        // ============================================

        $content_selector = "{$selector} .e-n-tabs-content > .e-con";

        // Border - Content
        if ( ! empty( $attributes['contentBorderType'] ) && $attributes['contentBorderType'] !== 'none' ) {
            $border_width = $attributes['contentBorderWidth'] ?? [];
            $top    = floatval( $border_width['top'] ?? 0 );
            $right  = floatval( $border_width['right'] ?? 0 );
            $bottom = floatval( $border_width['bottom'] ?? 0 );
            $left   = floatval( $border_width['left'] ?? 0 );
            $color  = $attributes['contentBorderColor'] ?? '#000000';

            $css_rules[] = "{$content_selector} { "
                . "border-style: {$attributes['contentBorderType']}; "
                . "border-width: {$top}px {$right}px {$bottom}px {$left}px; "
                . "border-color: {$color}; "
                . "}";
        }

        // Box Shadow - Content
        if ( ! empty( $attributes['contentBoxShadow'] ) && ! empty( $attributes['contentBoxShadow']['enable'] ) ) {
            $shadow     = $attributes['contentBoxShadow'];
            $h          = $shadow['horizontal'] ?? 0;
            $v          = $shadow['vertical'] ?? 0;
            $blur       = $shadow['blur'] ?? 0;
            $spread     = $shadow['spread'] ?? 0;
            $color      = $shadow['color'] ?? 'rgba(0,0,0,0.1)';
            $inset      = ( ! empty( $shadow['position'] ) && $shadow['position'] === 'inset' ) ? 'inset ' : '';
            $css_rules[] = "{$content_selector} { box-shadow: {$inset}{$h}px {$v}px {$blur}px {$spread}px {$color}; }";
        }

        // ============================================
        // SECTION 4: Responsive CSS Variables (Tablet)
        // Evidence: nested-tabs/styles.ts:282-334
        // ============================================

        // Tabs Gap - Tablet
        if ( ! empty( $attributes['tabsGap']['tablet'] ) ) {
            $tablet_rules[] = "{$selector} { --n-tabs-title-gap: {$attributes['tabsGap']['tablet']}; }";
        }

        // Tabs Content Distance - Tablet
        if ( ! empty( $attributes['tabsContentDistance']['tablet'] ) ) {
            $tablet_rules[] = "{$selector} { --n-tabs-gap: {$attributes['tabsContentDistance']['tablet']}; }";
        }

        // Padding - Tablet
        if ( ! empty( $attributes['tabsPadding']['tablet'] ) ) {
            $p   = $attributes['tabsPadding']['tablet'];
            $top    = $p['top'] ?? '15px';
            $right  = $p['right'] ?? '20px';
            $bottom = $p['bottom'] ?? '15px';
            $left   = $p['left'] ?? '20px';
            $tablet_rules[] = "{$selector} { --n-tabs-title-padding-top: {$top}; --n-tabs-title-padding-right: {$right}; --n-tabs-title-padding-bottom: {$bottom}; --n-tabs-title-padding-left: {$left}; }";
        }

        // Border Radius - Tablet
        if ( ! empty( $attributes['tabsBorderRadius']['tablet'] ) ) {
            $br     = $attributes['tabsBorderRadius']['tablet'];
            $top    = $br['top'] ?? '0';
            $right  = $br['right'] ?? '0';
            $bottom = $br['bottom'] ?? '0';
            $left   = $br['left'] ?? '0';
            $tablet_rules[] = "{$selector} { --n-tabs-title-border-radius: {$top} {$right} {$bottom} {$left}; }";
        }

        // Icon Size - Tablet
        if ( ! empty( $attributes['iconSize']['tablet'] ) ) {
            $tablet_rules[] = "{$selector} { --n-tabs-icon-size: {$attributes['iconSize']['tablet']}; }";
        }

        // Icon Spacing - Tablet
        if ( ! empty( $attributes['iconSpacing']['tablet'] ) ) {
            $tablet_rules[] = "{$selector} { --n-tabs-icon-gap: {$attributes['iconSpacing']['tablet']}; }";
        }

        // Content Padding - Tablet
        if ( ! empty( $attributes['contentPadding']['tablet'] ) ) {
            $cp     = $attributes['contentPadding']['tablet'];
            $top    = $cp['top'] ?? '0';
            $right  = $cp['right'] ?? '0';
            $bottom = $cp['bottom'] ?? '0';
            $left   = $cp['left'] ?? '0';
            $tablet_rules[] = "{$selector} { --n-tabs-content-padding: {$top} {$right} {$bottom} {$left}; }";
        }

        // Content Border Radius - Tablet
        if ( ! empty( $attributes['contentBorderRadius']['tablet'] ) ) {
            $cbr    = $attributes['contentBorderRadius']['tablet'];
            $top    = $cbr['top'] ?? '0';
            $right  = $cbr['right'] ?? '0';
            $bottom = $cbr['bottom'] ?? '0';
            $left   = $cbr['left'] ?? '0';
            $tablet_rules[] = "{$selector} { --n-tabs-content-border-radius: {$top} {$right} {$bottom} {$left}; }";
        }

        // ============================================
        // SECTION 5: Responsive CSS Variables (Mobile)
        // Evidence: nested-tabs/styles.ts:336-388
        // ============================================

        // Tabs Gap - Mobile
        if ( ! empty( $attributes['tabsGap']['mobile'] ) ) {
            $mobile_rules[] = "{$selector} { --n-tabs-title-gap: {$attributes['tabsGap']['mobile']}; }";
        }

        // Tabs Content Distance - Mobile
        if ( ! empty( $attributes['tabsContentDistance']['mobile'] ) ) {
            $mobile_rules[] = "{$selector} { --n-tabs-gap: {$attributes['tabsContentDistance']['mobile']}; }";
        }

        // Padding - Mobile
        if ( ! empty( $attributes['tabsPadding']['mobile'] ) ) {
            $p   = $attributes['tabsPadding']['mobile'];
            $top    = $p['top'] ?? '15px';
            $right  = $p['right'] ?? '20px';
            $bottom = $p['bottom'] ?? '15px';
            $left   = $p['left'] ?? '20px';
            $mobile_rules[] = "{$selector} { --n-tabs-title-padding-top: {$top}; --n-tabs-title-padding-right: {$right}; --n-tabs-title-padding-bottom: {$bottom}; --n-tabs-title-padding-left: {$left}; }";
        }

        // Border Radius - Mobile
        if ( ! empty( $attributes['tabsBorderRadius']['mobile'] ) ) {
            $br     = $attributes['tabsBorderRadius']['mobile'];
            $top    = $br['top'] ?? '0';
            $right  = $br['right'] ?? '0';
            $bottom = $br['bottom'] ?? '0';
            $left   = $br['left'] ?? '0';
            $mobile_rules[] = "{$selector} { --n-tabs-title-border-radius: {$top} {$right} {$bottom} {$left}; }";
        }

        // Icon Size - Mobile
        if ( ! empty( $attributes['iconSize']['mobile'] ) ) {
            $mobile_rules[] = "{$selector} { --n-tabs-icon-size: {$attributes['iconSize']['mobile']}; }";
        }

        // Icon Spacing - Mobile
        if ( ! empty( $attributes['iconSpacing']['mobile'] ) ) {
            $mobile_rules[] = "{$selector} { --n-tabs-icon-gap: {$attributes['iconSpacing']['mobile']}; }";
        }

        // Content Padding - Mobile
        if ( ! empty( $attributes['contentPadding']['mobile'] ) ) {
            $cp     = $attributes['contentPadding']['mobile'];
            $top    = $cp['top'] ?? '0';
            $right  = $cp['right'] ?? '0';
            $bottom = $cp['bottom'] ?? '0';
            $left   = $cp['left'] ?? '0';
            $mobile_rules[] = "{$selector} { --n-tabs-content-padding: {$top} {$right} {$bottom} {$left}; }";
        }

        // Content Border Radius - Mobile
        if ( ! empty( $attributes['contentBorderRadius']['mobile'] ) ) {
            $cbr    = $attributes['contentBorderRadius']['mobile'];
            $top    = $cbr['top'] ?? '0';
            $right  = $cbr['right'] ?? '0';
            $bottom = $cbr['bottom'] ?? '0';
            $left   = $cbr['left'] ?? '0';
            $mobile_rules[] = "{$selector} { --n-tabs-content-border-radius: {$top} {$right} {$bottom} {$left}; }";
        }

        // ==================== COMBINE CSS ====================

        $final_css = '';
        if ( ! empty( $css_rules ) ) {
            $final_css .= implode( "\n", $css_rules );
        }

        if ( ! empty( $tablet_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::TABLET_BREAKPOINT . "px) {\n" . implode( "\n", $tablet_rules ) . "\n}";
        }

        if ( ! empty( $mobile_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::MOBILE_BREAKPOINT . "px) {\n" . implode( "\n", $mobile_rules ) . "\n}";
        }

        return $final_css;
    }

    /**
     * Generate CSS for Cart Summary Block
     *
     * Evidence: cart-summary.php:140-158
     * Sections: 15 total (General, Primary/Secondary Buttons, Loading, Radio/Checkboxes,
     *           Cart Styling, Icon Button, Dropdown Button, Ship To, Section Divider,
     *           Subtotal, Field Label, Input & Textarea, Cards, File/Gallery Fields)
     *
     * @param array  $attributes Block attributes from Gutenberg
     * @param string $block_id   Block ID for scoped selector
     * @return string Generated CSS
     */
    public static function generate_cart_summary_css( $attributes, $block_id ) {
        if ( empty( $block_id ) ) {
            return '';
        }

        $css_rules = [];
        $tablet_rules = [];
        $mobile_rules = [];

        $selector = '.voxel-fse-cart-summary-' . $block_id;

        // ============================================
        // 1. GENERAL SECTION
        // Evidence: cart-summary.php:140-158
        // ============================================

        // Section spacing (grid-gap on .ts-checkout)
        if ( isset( $attributes['sectionSpacing'] ) && $attributes['sectionSpacing'] !== '' ) {
            $css_rules[] = "{$selector} .ts-checkout { grid-gap: {$attributes['sectionSpacing']}px; }";
        }
        if ( isset( $attributes['sectionSpacing_tablet'] ) && $attributes['sectionSpacing_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-checkout { grid-gap: {$attributes['sectionSpacing_tablet']}px; }";
        }
        if ( isset( $attributes['sectionSpacing_mobile'] ) && $attributes['sectionSpacing_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-checkout { grid-gap: {$attributes['sectionSpacing_mobile']}px; }";
        }

        // Title typography (.ts-cart-head h1)
        if ( ! empty( $attributes['titleTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['titleTypography'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ts-cart-head h1 { {$typo_css} }";
            }
        }

        // Title color
        if ( ! empty( $attributes['titleColor'] ) ) {
            $css_rules[] = "{$selector} .ts-cart-head h1 { color: {$attributes['titleColor']}; }";
        }

        // Empty cart gap
        if ( isset( $attributes['emptyCartGap'] ) && $attributes['emptyCartGap'] !== '' ) {
            $css_rules[] = "{$selector} .ts-empty-cart { gap: {$attributes['emptyCartGap']}px; }";
        }
        if ( isset( $attributes['emptyCartGap_tablet'] ) && $attributes['emptyCartGap_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-empty-cart { gap: {$attributes['emptyCartGap_tablet']}px; }";
        }
        if ( isset( $attributes['emptyCartGap_mobile'] ) && $attributes['emptyCartGap_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-empty-cart { gap: {$attributes['emptyCartGap_mobile']}px; }";
        }

        // Empty cart icon size
        if ( isset( $attributes['emptyCartIconSize'] ) && $attributes['emptyCartIconSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-empty-cart i { font-size: {$attributes['emptyCartIconSize']}px; }";
        }
        if ( isset( $attributes['emptyCartIconSize_tablet'] ) && $attributes['emptyCartIconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-empty-cart i { font-size: {$attributes['emptyCartIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['emptyCartIconSize_mobile'] ) && $attributes['emptyCartIconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-empty-cart i { font-size: {$attributes['emptyCartIconSize_mobile']}px; }";
        }

        // Empty cart icon color
        if ( ! empty( $attributes['emptyCartIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-empty-cart i { color: {$attributes['emptyCartIconColor']}; }";
        }

        // Empty cart typography
        if ( ! empty( $attributes['emptyCartTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['emptyCartTypography'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ts-empty-cart p { {$typo_css} }";
            }
        }

        // Empty cart text color
        if ( ! empty( $attributes['emptyCartTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-empty-cart p { color: {$attributes['emptyCartTextColor']}; }";
        }

        // ============================================
        // 2. PRIMARY BUTTON (ts-btn ts-btn-1)
        // ============================================

        // Typography
        if ( ! empty( $attributes['primaryBtnTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['primaryBtnTypography'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ts-btn.ts-btn-1 { {$typo_css} }";
            }
        }

        // Border
        if ( ! empty( $attributes['primaryBtnBorderType'] ) && $attributes['primaryBtnBorderType'] !== 'none' ) {
            $css_rules[] = "{$selector} .ts-btn.ts-btn-1 { border-style: {$attributes['primaryBtnBorderType']}; }";

            if ( ! empty( $attributes['primaryBtnBorderWidth'] ) ) {
                $border_css = self::generate_border_width_css( $attributes['primaryBtnBorderWidth'] );
                if ( $border_css ) {
                    $css_rules[] = "{$selector} .ts-btn.ts-btn-1 { border-width: {$border_css}; }";
                }
            }

            if ( ! empty( $attributes['primaryBtnBorderColor'] ) ) {
                $css_rules[] = "{$selector} .ts-btn.ts-btn-1 { border-color: {$attributes['primaryBtnBorderColor']}; }";
            }
        }

        // Border radius
        if ( isset( $attributes['primaryBtnRadius'] ) && $attributes['primaryBtnRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-btn.ts-btn-1 { border-radius: {$attributes['primaryBtnRadius']}px; }";
        }
        if ( isset( $attributes['primaryBtnRadius_tablet'] ) && $attributes['primaryBtnRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-btn.ts-btn-1 { border-radius: {$attributes['primaryBtnRadius_tablet']}px; }";
        }
        if ( isset( $attributes['primaryBtnRadius_mobile'] ) && $attributes['primaryBtnRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-btn.ts-btn-1 { border-radius: {$attributes['primaryBtnRadius_mobile']}px; }";
        }

        // Box shadow
        if ( ! empty( $attributes['primaryBtnBoxShadow'] ) ) {
            $shadow_css = self::generate_box_shadow_css( $attributes['primaryBtnBoxShadow'] );
            if ( $shadow_css ) {
                $css_rules[] = "{$selector} .ts-btn.ts-btn-1 { box-shadow: {$shadow_css}; }";
            }
        }

        // Text color
        if ( ! empty( $attributes['primaryBtnTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-btn.ts-btn-1 { color: {$attributes['primaryBtnTextColor']}; }";
        }

        // Background color
        if ( ! empty( $attributes['primaryBtnBgColor'] ) ) {
            $css_rules[] = "{$selector} .ts-btn.ts-btn-1 { background-color: {$attributes['primaryBtnBgColor']}; }";
        }

        // Icon size
        if ( isset( $attributes['primaryBtnIconSize'] ) && $attributes['primaryBtnIconSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-btn.ts-btn-1 i { font-size: {$attributes['primaryBtnIconSize']}px; }";
        }
        if ( isset( $attributes['primaryBtnIconSize_tablet'] ) && $attributes['primaryBtnIconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-btn.ts-btn-1 i { font-size: {$attributes['primaryBtnIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['primaryBtnIconSize_mobile'] ) && $attributes['primaryBtnIconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-btn.ts-btn-1 i { font-size: {$attributes['primaryBtnIconSize_mobile']}px; }";
        }

        // Icon color
        if ( ! empty( $attributes['primaryBtnIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-btn.ts-btn-1 i { color: {$attributes['primaryBtnIconColor']}; }";
        }

        // Icon spacing
        if ( isset( $attributes['primaryBtnIconSpacing'] ) && $attributes['primaryBtnIconSpacing'] !== '' ) {
            $css_rules[] = "{$selector} .ts-btn.ts-btn-1 { gap: {$attributes['primaryBtnIconSpacing']}px; }";
        }
        if ( isset( $attributes['primaryBtnIconSpacing_tablet'] ) && $attributes['primaryBtnIconSpacing_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-btn.ts-btn-1 { gap: {$attributes['primaryBtnIconSpacing_tablet']}px; }";
        }
        if ( isset( $attributes['primaryBtnIconSpacing_mobile'] ) && $attributes['primaryBtnIconSpacing_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-btn.ts-btn-1 { gap: {$attributes['primaryBtnIconSpacing_mobile']}px; }";
        }

        // Hover states
        if ( ! empty( $attributes['primaryBtnTextColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn.ts-btn-1:hover { color: {$attributes['primaryBtnTextColorHover']}; }";
        }
        if ( ! empty( $attributes['primaryBtnBgColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn.ts-btn-1:hover { background-color: {$attributes['primaryBtnBgColorHover']}; }";
        }
        if ( ! empty( $attributes['primaryBtnBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn.ts-btn-1:hover { border-color: {$attributes['primaryBtnBorderColorHover']}; }";
        }
        if ( ! empty( $attributes['primaryBtnBoxShadowHover'] ) ) {
            $shadow_css = self::generate_box_shadow_css( $attributes['primaryBtnBoxShadowHover'] );
            if ( $shadow_css ) {
                $css_rules[] = "{$selector} .ts-btn.ts-btn-1:hover { box-shadow: {$shadow_css}; }";
            }
        }
        if ( ! empty( $attributes['primaryBtnIconColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn.ts-btn-1:hover i { color: {$attributes['primaryBtnIconColorHover']}; }";
        }

        // ============================================
        // 3. SECONDARY BUTTON (ts-btn ts-btn-2)
        // ============================================

        // Typography
        if ( ! empty( $attributes['secondaryBtnTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['secondaryBtnTypography'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ts-btn.ts-btn-2 { {$typo_css} }";
            }
        }

        // Padding
        if ( ! empty( $attributes['secondaryBtnPadding'] ) ) {
            $padding_css = self::generate_dimensions_css( $attributes['secondaryBtnPadding'] );
            if ( $padding_css ) {
                $css_rules[] = "{$selector} .ts-btn.ts-btn-2 { padding: {$padding_css}; }";
            }
        }
        if ( ! empty( $attributes['secondaryBtnPadding_tablet'] ) ) {
            $padding_css = self::generate_dimensions_css( $attributes['secondaryBtnPadding_tablet'] );
            if ( $padding_css ) {
                $tablet_rules[] = "{$selector} .ts-btn.ts-btn-2 { padding: {$padding_css}; }";
            }
        }
        if ( ! empty( $attributes['secondaryBtnPadding_mobile'] ) ) {
            $padding_css = self::generate_dimensions_css( $attributes['secondaryBtnPadding_mobile'] );
            if ( $padding_css ) {
                $mobile_rules[] = "{$selector} .ts-btn.ts-btn-2 { padding: {$padding_css}; }";
            }
        }

        // Border radius
        if ( isset( $attributes['secondaryBtnRadius'] ) && $attributes['secondaryBtnRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-btn.ts-btn-2 { border-radius: {$attributes['secondaryBtnRadius']}px; }";
        }
        if ( isset( $attributes['secondaryBtnRadius_tablet'] ) && $attributes['secondaryBtnRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-btn.ts-btn-2 { border-radius: {$attributes['secondaryBtnRadius_tablet']}px; }";
        }
        if ( isset( $attributes['secondaryBtnRadius_mobile'] ) && $attributes['secondaryBtnRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-btn.ts-btn-2 { border-radius: {$attributes['secondaryBtnRadius_mobile']}px; }";
        }

        // Text color
        if ( ! empty( $attributes['secondaryBtnTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-btn.ts-btn-2 { color: {$attributes['secondaryBtnTextColor']}; }";
        }

        // Background color
        if ( ! empty( $attributes['secondaryBtnBgColor'] ) ) {
            $css_rules[] = "{$selector} .ts-btn.ts-btn-2 { background-color: {$attributes['secondaryBtnBgColor']}; }";
        }

        // Border
        if ( ! empty( $attributes['secondaryBtnBorderType'] ) && $attributes['secondaryBtnBorderType'] !== 'none' ) {
            $css_rules[] = "{$selector} .ts-btn.ts-btn-2 { border-style: {$attributes['secondaryBtnBorderType']}; }";

            if ( ! empty( $attributes['secondaryBtnBorderWidth'] ) ) {
                $border_css = self::generate_border_width_css( $attributes['secondaryBtnBorderWidth'] );
                if ( $border_css ) {
                    $css_rules[] = "{$selector} .ts-btn.ts-btn-2 { border-width: {$border_css}; }";
                }
            }

            if ( ! empty( $attributes['secondaryBtnBorderColor'] ) ) {
                $css_rules[] = "{$selector} .ts-btn.ts-btn-2 { border-color: {$attributes['secondaryBtnBorderColor']}; }";
            }
        }

        // Icon size
        if ( isset( $attributes['secondaryBtnIconSize'] ) && $attributes['secondaryBtnIconSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-btn.ts-btn-2 i { font-size: {$attributes['secondaryBtnIconSize']}px; }";
        }
        if ( isset( $attributes['secondaryBtnIconSize_tablet'] ) && $attributes['secondaryBtnIconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-btn.ts-btn-2 i { font-size: {$attributes['secondaryBtnIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['secondaryBtnIconSize_mobile'] ) && $attributes['secondaryBtnIconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-btn.ts-btn-2 i { font-size: {$attributes['secondaryBtnIconSize_mobile']}px; }";
        }

        // Icon color
        if ( ! empty( $attributes['secondaryBtnIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-btn.ts-btn-2 i { color: {$attributes['secondaryBtnIconColor']}; }";
        }

        // Icon spacing
        if ( isset( $attributes['secondaryBtnIconSpacing'] ) && $attributes['secondaryBtnIconSpacing'] !== '' ) {
            $css_rules[] = "{$selector} .ts-btn.ts-btn-2 { gap: {$attributes['secondaryBtnIconSpacing']}px; }";
        }
        if ( isset( $attributes['secondaryBtnIconSpacing_tablet'] ) && $attributes['secondaryBtnIconSpacing_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-btn.ts-btn-2 { gap: {$attributes['secondaryBtnIconSpacing_tablet']}px; }";
        }
        if ( isset( $attributes['secondaryBtnIconSpacing_mobile'] ) && $attributes['secondaryBtnIconSpacing_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-btn.ts-btn-2 { gap: {$attributes['secondaryBtnIconSpacing_mobile']}px; }";
        }

        // Hover states
        if ( ! empty( $attributes['secondaryBtnTextColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn.ts-btn-2:hover { color: {$attributes['secondaryBtnTextColorHover']}; }";
        }
        if ( ! empty( $attributes['secondaryBtnBgColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn.ts-btn-2:hover { background-color: {$attributes['secondaryBtnBgColorHover']}; }";
        }
        if ( ! empty( $attributes['secondaryBtnBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn.ts-btn-2:hover { border-color: {$attributes['secondaryBtnBorderColorHover']}; }";
        }
        if ( ! empty( $attributes['secondaryBtnIconColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn.ts-btn-2:hover i { color: {$attributes['secondaryBtnIconColorHover']}; }";
        }

        // ============================================
        // 4. LOADING
        // ============================================

        if ( ! empty( $attributes['loaderColor1'] ) ) {
            $css_rules[] = "{$selector} .ts-loader { border-top-color: {$attributes['loaderColor1']}; }";
        }
        if ( ! empty( $attributes['loaderColor2'] ) ) {
            $css_rules[] = "{$selector} .ts-loader { border-bottom-color: {$attributes['loaderColor2']}; }";
        }

        // ============================================
        // 5. RADIO/CHECKBOXES
        // ============================================

        if ( ! empty( $attributes['checkboxBorderColor'] ) ) {
            $css_rules[] = "{$selector} .container-checkbox .checkmark { border-color: {$attributes['checkboxBorderColor']}; }";
            $css_rules[] = "{$selector} .container-radio .checkmark { border-color: {$attributes['checkboxBorderColor']}; }";
        }

        if ( ! empty( $attributes['checkboxSelectedBgColor'] ) ) {
            $css_rules[] = "{$selector} .container-checkbox input:checked ~ .checkmark { background-color: {$attributes['checkboxSelectedBgColor']}; }";
            $css_rules[] = "{$selector} .container-radio input:checked ~ .checkmark { background-color: {$attributes['checkboxSelectedBgColor']}; }";
        }

        if ( ! empty( $attributes['checkboxSelectedBoxShadow'] ) ) {
            $shadow_css = self::generate_box_shadow_css( $attributes['checkboxSelectedBoxShadow'] );
            if ( $shadow_css ) {
                $css_rules[] = "{$selector} .container-checkbox input:checked ~ .checkmark { box-shadow: {$shadow_css}; }";
                $css_rules[] = "{$selector} .container-radio input:checked ~ .checkmark { box-shadow: {$shadow_css}; }";
            }
        }

        // ============================================
        // 6. CART STYLING
        // ============================================

        // Cart item spacing
        if ( isset( $attributes['cartItemSpacing'] ) && $attributes['cartItemSpacing'] !== '' ) {
            $css_rules[] = "{$selector} .ts-cart-items > li { margin-bottom: {$attributes['cartItemSpacing']}px; }";
        }
        if ( isset( $attributes['cartItemSpacing_tablet'] ) && $attributes['cartItemSpacing_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-cart-items > li { margin-bottom: {$attributes['cartItemSpacing_tablet']}px; }";
        }
        if ( isset( $attributes['cartItemSpacing_mobile'] ) && $attributes['cartItemSpacing_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-cart-items > li { margin-bottom: {$attributes['cartItemSpacing_mobile']}px; }";
        }

        // Cart item content spacing
        if ( isset( $attributes['cartItemContentSpacing'] ) && $attributes['cartItemContentSpacing'] !== '' ) {
            $css_rules[] = "{$selector} .ts-item-details { gap: {$attributes['cartItemContentSpacing']}px; }";
        }
        if ( isset( $attributes['cartItemContentSpacing_tablet'] ) && $attributes['cartItemContentSpacing_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-item-details { gap: {$attributes['cartItemContentSpacing_tablet']}px; }";
        }
        if ( isset( $attributes['cartItemContentSpacing_mobile'] ) && $attributes['cartItemContentSpacing_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-item-details { gap: {$attributes['cartItemContentSpacing_mobile']}px; }";
        }

        // Cart picture size
        if ( isset( $attributes['cartPictureSize'] ) && $attributes['cartPictureSize'] !== '' ) {
            $size = $attributes['cartPictureSize'];
            $css_rules[] = "{$selector} .ts-item-image { width: {$size}px; height: {$size}px; min-width: {$size}px; }";
        }
        if ( isset( $attributes['cartPictureSize_tablet'] ) && $attributes['cartPictureSize_tablet'] !== '' ) {
            $size = $attributes['cartPictureSize_tablet'];
            $tablet_rules[] = "{$selector} .ts-item-image { width: {$size}px; height: {$size}px; min-width: {$size}px; }";
        }
        if ( isset( $attributes['cartPictureSize_mobile'] ) && $attributes['cartPictureSize_mobile'] !== '' ) {
            $size = $attributes['cartPictureSize_mobile'];
            $mobile_rules[] = "{$selector} .ts-item-image { width: {$size}px; height: {$size}px; min-width: {$size}px; }";
        }

        // Cart picture radius
        if ( isset( $attributes['cartPictureRadius'] ) && $attributes['cartPictureRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-item-image { border-radius: {$attributes['cartPictureRadius']}px; }";
        }
        if ( isset( $attributes['cartPictureRadius_tablet'] ) && $attributes['cartPictureRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-item-image { border-radius: {$attributes['cartPictureRadius_tablet']}px; }";
        }
        if ( isset( $attributes['cartPictureRadius_mobile'] ) && $attributes['cartPictureRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-item-image { border-radius: {$attributes['cartPictureRadius_mobile']}px; }";
        }

        // Cart title typography
        if ( ! empty( $attributes['cartTitleTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['cartTitleTypography'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ts-item-name { {$typo_css} }";
            }
        }

        // Cart title color
        if ( ! empty( $attributes['cartTitleColor'] ) ) {
            $css_rules[] = "{$selector} .ts-item-name { color: {$attributes['cartTitleColor']}; }";
        }

        // Cart subtitle typography
        if ( ! empty( $attributes['cartSubtitleTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['cartSubtitleTypography'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ts-item-description { {$typo_css} }";
            }
        }

        // Cart subtitle color
        if ( ! empty( $attributes['cartSubtitleColor'] ) ) {
            $css_rules[] = "{$selector} .ts-item-description { color: {$attributes['cartSubtitleColor']}; }";
        }

        // ============================================
        // 7. ICON BUTTON (ts-icon-btn)
        // ============================================

        // Icon color
        if ( ! empty( $attributes['iconBtnColor'] ) ) {
            $css_rules[] = "{$selector} .ts-icon-btn i { color: {$attributes['iconBtnColor']}; }";
        }

        // Background color
        if ( ! empty( $attributes['iconBtnBgColor'] ) ) {
            $css_rules[] = "{$selector} .ts-icon-btn { background-color: {$attributes['iconBtnBgColor']}; }";
        }

        // Border
        if ( ! empty( $attributes['iconBtnBorderType'] ) && $attributes['iconBtnBorderType'] !== 'none' ) {
            $css_rules[] = "{$selector} .ts-icon-btn { border-style: {$attributes['iconBtnBorderType']}; }";

            if ( ! empty( $attributes['iconBtnBorderWidth'] ) ) {
                $border_css = self::generate_border_width_css( $attributes['iconBtnBorderWidth'] );
                if ( $border_css ) {
                    $css_rules[] = "{$selector} .ts-icon-btn { border-width: {$border_css}; }";
                }
            }

            if ( ! empty( $attributes['iconBtnBorderColor'] ) ) {
                $css_rules[] = "{$selector} .ts-icon-btn { border-color: {$attributes['iconBtnBorderColor']}; }";
            }
        }

        // Border radius
        if ( isset( $attributes['iconBtnRadius'] ) && $attributes['iconBtnRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-icon-btn { border-radius: {$attributes['iconBtnRadius']}px; }";
        }
        if ( isset( $attributes['iconBtnRadius_tablet'] ) && $attributes['iconBtnRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-icon-btn { border-radius: {$attributes['iconBtnRadius_tablet']}px; }";
        }
        if ( isset( $attributes['iconBtnRadius_mobile'] ) && $attributes['iconBtnRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-icon-btn { border-radius: {$attributes['iconBtnRadius_mobile']}px; }";
        }

        // Value size
        if ( isset( $attributes['iconBtnValueSize'] ) && $attributes['iconBtnValueSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-icon-btn .ts-number { font-size: {$attributes['iconBtnValueSize']}px; }";
        }

        // Value color
        if ( ! empty( $attributes['iconBtnValueColor'] ) ) {
            $css_rules[] = "{$selector} .ts-icon-btn .ts-number { color: {$attributes['iconBtnValueColor']}; }";
        }

        // Hover states
        if ( ! empty( $attributes['iconBtnColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-icon-btn:hover i { color: {$attributes['iconBtnColorHover']}; }";
        }
        if ( ! empty( $attributes['iconBtnBgColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-icon-btn:hover { background-color: {$attributes['iconBtnBgColorHover']}; }";
        }
        if ( ! empty( $attributes['iconBtnBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-icon-btn:hover { border-color: {$attributes['iconBtnBorderColorHover']}; }";
        }

        // ============================================
        // 8. DROPDOWN BUTTON (ts-filter, ts-filter-wrapper)
        // ============================================

        // Typography
        if ( ! empty( $attributes['dropdownTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['dropdownTypography'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ts-filter { {$typo_css} }";
            }
        }

        // Box shadow
        if ( ! empty( $attributes['dropdownBoxShadow'] ) ) {
            $shadow_css = self::generate_box_shadow_css( $attributes['dropdownBoxShadow'] );
            if ( $shadow_css ) {
                $css_rules[] = "{$selector} .ts-filter { box-shadow: {$shadow_css}; }";
            }
        }

        // Background color
        if ( ! empty( $attributes['dropdownBgColor'] ) ) {
            $css_rules[] = "{$selector} .ts-filter { background-color: {$attributes['dropdownBgColor']}; }";
        }

        // Text color
        if ( ! empty( $attributes['dropdownTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-filter { color: {$attributes['dropdownTextColor']}; }";
        }

        // Border
        if ( ! empty( $attributes['dropdownBorderType'] ) && $attributes['dropdownBorderType'] !== 'none' ) {
            $css_rules[] = "{$selector} .ts-filter { border-style: {$attributes['dropdownBorderType']}; }";

            if ( ! empty( $attributes['dropdownBorderWidth'] ) ) {
                $border_css = self::generate_border_width_css( $attributes['dropdownBorderWidth'] );
                if ( $border_css ) {
                    $css_rules[] = "{$selector} .ts-filter { border-width: {$border_css}; }";
                }
            }

            if ( ! empty( $attributes['dropdownBorderColor'] ) ) {
                $css_rules[] = "{$selector} .ts-filter { border-color: {$attributes['dropdownBorderColor']}; }";
            }
        }

        // Border radius
        if ( isset( $attributes['dropdownRadius'] ) && $attributes['dropdownRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-filter { border-radius: {$attributes['dropdownRadius']}px; }";
        }
        if ( isset( $attributes['dropdownRadius_tablet'] ) && $attributes['dropdownRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-filter { border-radius: {$attributes['dropdownRadius_tablet']}px; }";
        }
        if ( isset( $attributes['dropdownRadius_mobile'] ) && $attributes['dropdownRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-filter { border-radius: {$attributes['dropdownRadius_mobile']}px; }";
        }

        // Height
        if ( isset( $attributes['dropdownHeight'] ) && $attributes['dropdownHeight'] !== '' ) {
            $css_rules[] = "{$selector} .ts-filter { min-height: {$attributes['dropdownHeight']}px; }";
        }
        if ( isset( $attributes['dropdownHeight_tablet'] ) && $attributes['dropdownHeight_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-filter { min-height: {$attributes['dropdownHeight_tablet']}px; }";
        }
        if ( isset( $attributes['dropdownHeight_mobile'] ) && $attributes['dropdownHeight_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-filter { min-height: {$attributes['dropdownHeight_mobile']}px; }";
        }

        // Icon color
        if ( ! empty( $attributes['dropdownIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-filter i { color: {$attributes['dropdownIconColor']}; }";
        }

        // Icon size
        if ( isset( $attributes['dropdownIconSize'] ) && $attributes['dropdownIconSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-filter i { font-size: {$attributes['dropdownIconSize']}px; }";
        }
        if ( isset( $attributes['dropdownIconSize_tablet'] ) && $attributes['dropdownIconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-filter i { font-size: {$attributes['dropdownIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['dropdownIconSize_mobile'] ) && $attributes['dropdownIconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-filter i { font-size: {$attributes['dropdownIconSize_mobile']}px; }";
        }

        // Icon spacing
        if ( isset( $attributes['dropdownIconSpacing'] ) && $attributes['dropdownIconSpacing'] !== '' ) {
            $css_rules[] = "{$selector} .ts-filter { gap: {$attributes['dropdownIconSpacing']}px; }";
        }
        if ( isset( $attributes['dropdownIconSpacing_tablet'] ) && $attributes['dropdownIconSpacing_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-filter { gap: {$attributes['dropdownIconSpacing_tablet']}px; }";
        }
        if ( isset( $attributes['dropdownIconSpacing_mobile'] ) && $attributes['dropdownIconSpacing_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-filter { gap: {$attributes['dropdownIconSpacing_mobile']}px; }";
        }

        // Hide chevron
        if ( ! empty( $attributes['dropdownHideChevron'] ) ) {
            $css_rules[] = "{$selector} .ts-filter .ts-down-icon { display: none; }";
        }

        // Chevron color
        if ( ! empty( $attributes['dropdownChevronColor'] ) ) {
            $css_rules[] = "{$selector} .ts-filter .ts-down-icon { color: {$attributes['dropdownChevronColor']}; }";
        }

        // Hover states
        if ( ! empty( $attributes['dropdownBgColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-filter:hover { background-color: {$attributes['dropdownBgColorHover']}; }";
        }
        if ( ! empty( $attributes['dropdownTextColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-filter:hover { color: {$attributes['dropdownTextColorHover']}; }";
        }
        if ( ! empty( $attributes['dropdownBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-filter:hover { border-color: {$attributes['dropdownBorderColorHover']}; }";
        }
        if ( ! empty( $attributes['dropdownIconColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-filter:hover i { color: {$attributes['dropdownIconColorHover']}; }";
        }
        if ( ! empty( $attributes['dropdownBoxShadowHover'] ) ) {
            $shadow_css = self::generate_box_shadow_css( $attributes['dropdownBoxShadowHover'] );
            if ( $shadow_css ) {
                $css_rules[] = "{$selector} .ts-filter:hover { box-shadow: {$shadow_css}; }";
            }
        }

        // Filled states (when dropdown has value)
        if ( ! empty( $attributes['dropdownTypographyFilled'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['dropdownTypographyFilled'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ts-filter.ts-filled { {$typo_css} }";
            }
        }
        if ( ! empty( $attributes['dropdownBgColorFilled'] ) ) {
            $css_rules[] = "{$selector} .ts-filter.ts-filled { background-color: {$attributes['dropdownBgColorFilled']}; }";
        }
        if ( ! empty( $attributes['dropdownTextColorFilled'] ) ) {
            $css_rules[] = "{$selector} .ts-filter.ts-filled { color: {$attributes['dropdownTextColorFilled']}; }";
        }
        if ( ! empty( $attributes['dropdownIconColorFilled'] ) ) {
            $css_rules[] = "{$selector} .ts-filter.ts-filled i { color: {$attributes['dropdownIconColorFilled']}; }";
        }
        if ( ! empty( $attributes['dropdownBorderColorFilled'] ) ) {
            $css_rules[] = "{$selector} .ts-filter.ts-filled { border-color: {$attributes['dropdownBorderColorFilled']}; }";
        }
        if ( isset( $attributes['dropdownBorderWidthFilled'] ) && $attributes['dropdownBorderWidthFilled'] !== '' ) {
            $css_rules[] = "{$selector} .ts-filter.ts-filled { border-width: {$attributes['dropdownBorderWidthFilled']}px; }";
        }
        if ( ! empty( $attributes['dropdownBoxShadowFilled'] ) ) {
            $shadow_css = self::generate_box_shadow_css( $attributes['dropdownBoxShadowFilled'] );
            if ( $shadow_css ) {
                $css_rules[] = "{$selector} .ts-filter.ts-filled { box-shadow: {$shadow_css}; }";
            }
        }

        // ============================================
        // 9. SHIP TO
        // ============================================

        if ( ! empty( $attributes['shipToTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['shipToTypography'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ts-ship-to { {$typo_css} }";
            }
        }

        if ( ! empty( $attributes['shipToTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-ship-to { color: {$attributes['shipToTextColor']}; }";
        }

        if ( ! empty( $attributes['shipToLinkColor'] ) ) {
            $css_rules[] = "{$selector} .ts-ship-to a { color: {$attributes['shipToLinkColor']}; }";
        }

        // ============================================
        // 10. SECTION DIVIDER
        // ============================================

        if ( ! empty( $attributes['dividerTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['dividerTypography'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ts-section-divider { {$typo_css} }";
            }
        }

        if ( ! empty( $attributes['dividerTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-section-divider { color: {$attributes['dividerTextColor']}; }";
        }

        if ( ! empty( $attributes['dividerLineColor'] ) ) {
            $css_rules[] = "{$selector} .ts-section-divider::before { background-color: {$attributes['dividerLineColor']}; }";
        }

        if ( isset( $attributes['dividerLineHeight'] ) && $attributes['dividerLineHeight'] !== '' ) {
            $css_rules[] = "{$selector} .ts-section-divider::before { height: {$attributes['dividerLineHeight']}px; }";
        }

        // ============================================
        // 11. SUBTOTAL
        // ============================================

        if ( ! empty( $attributes['subtotalTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['subtotalTypography'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ts-subtotal { {$typo_css} }";
            }
        }

        if ( ! empty( $attributes['subtotalTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-subtotal { color: {$attributes['subtotalTextColor']}; }";
        }

        // ============================================
        // 12. FIELD LABEL
        // ============================================

        if ( ! empty( $attributes['fieldLabelTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['fieldLabelTypography'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ts-form-group label { {$typo_css} }";
            }
        }

        if ( ! empty( $attributes['fieldLabelColor'] ) ) {
            $css_rules[] = "{$selector} .ts-form-group label { color: {$attributes['fieldLabelColor']}; }";
        }

        if ( ! empty( $attributes['fieldLabelLinkColor'] ) ) {
            $css_rules[] = "{$selector} .ts-form-group label a { color: {$attributes['fieldLabelLinkColor']}; }";
        }

        // ============================================
        // 13. INPUT & TEXTAREA (Normal)
        // ============================================

        // Placeholder typography & color
        if ( ! empty( $attributes['inputPlaceholderTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['inputPlaceholderTypography'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} input::placeholder, {$selector} textarea::placeholder { {$typo_css} }";
            }
        }
        if ( ! empty( $attributes['inputPlaceholderColor'] ) ) {
            $css_rules[] = "{$selector} input::placeholder, {$selector} textarea::placeholder { color: {$attributes['inputPlaceholderColor']}; }";
        }

        // Value typography & color
        if ( ! empty( $attributes['inputValueTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['inputValueTypography'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} input, {$selector} textarea { {$typo_css} }";
            }
        }
        if ( ! empty( $attributes['inputValueColor'] ) ) {
            $css_rules[] = "{$selector} input, {$selector} textarea { color: {$attributes['inputValueColor']}; }";
        }

        // Background color
        if ( ! empty( $attributes['inputBgColor'] ) ) {
            $css_rules[] = "{$selector} input, {$selector} textarea, {$selector} .ts-filter { background-color: {$attributes['inputBgColor']}; }";
        }

        // Border
        if ( ! empty( $attributes['inputBorderType'] ) && $attributes['inputBorderType'] !== 'none' ) {
            $css_rules[] = "{$selector} input, {$selector} textarea, {$selector} .ts-filter { border-style: {$attributes['inputBorderType']}; }";

            if ( ! empty( $attributes['inputBorderWidth'] ) ) {
                $border_css = self::generate_border_width_css( $attributes['inputBorderWidth'] );
                if ( $border_css ) {
                    $css_rules[] = "{$selector} input, {$selector} textarea, {$selector} .ts-filter { border-width: {$border_css}; }";
                }
            }

            if ( ! empty( $attributes['inputBorderColor'] ) ) {
                $css_rules[] = "{$selector} input, {$selector} textarea, {$selector} .ts-filter { border-color: {$attributes['inputBorderColor']}; }";
            }
        }

        // Padding
        if ( ! empty( $attributes['inputPadding'] ) ) {
            $padding_css = self::generate_dimensions_css( $attributes['inputPadding'] );
            if ( $padding_css ) {
                $css_rules[] = "{$selector} input { padding: {$padding_css}; }";
            }
        }
        if ( ! empty( $attributes['inputPadding_tablet'] ) ) {
            $padding_css = self::generate_dimensions_css( $attributes['inputPadding_tablet'] );
            if ( $padding_css ) {
                $tablet_rules[] = "{$selector} input { padding: {$padding_css}; }";
            }
        }
        if ( ! empty( $attributes['inputPadding_mobile'] ) ) {
            $padding_css = self::generate_dimensions_css( $attributes['inputPadding_mobile'] );
            if ( $padding_css ) {
                $mobile_rules[] = "{$selector} input { padding: {$padding_css}; }";
            }
        }

        // Height
        if ( isset( $attributes['inputHeight'] ) && $attributes['inputHeight'] !== '' ) {
            $css_rules[] = "{$selector} input { min-height: {$attributes['inputHeight']}px; }";
        }
        if ( isset( $attributes['inputHeight_tablet'] ) && $attributes['inputHeight_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} input { min-height: {$attributes['inputHeight_tablet']}px; }";
        }
        if ( isset( $attributes['inputHeight_mobile'] ) && $attributes['inputHeight_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} input { min-height: {$attributes['inputHeight_mobile']}px; }";
        }

        // Radius
        if ( isset( $attributes['inputRadius'] ) && $attributes['inputRadius'] !== '' ) {
            $css_rules[] = "{$selector} input { border-radius: {$attributes['inputRadius']}px; }";
        }
        if ( isset( $attributes['inputRadius_tablet'] ) && $attributes['inputRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} input { border-radius: {$attributes['inputRadius_tablet']}px; }";
        }
        if ( isset( $attributes['inputRadius_mobile'] ) && $attributes['inputRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} input { border-radius: {$attributes['inputRadius_mobile']}px; }";
        }

        // Input with icon padding
        if ( ! empty( $attributes['inputWithIconPadding'] ) ) {
            $padding_css = self::generate_dimensions_css( $attributes['inputWithIconPadding'] );
            if ( $padding_css ) {
                $css_rules[] = "{$selector} .ts-input-icon input { padding: {$padding_css}; }";
            }
        }
        if ( ! empty( $attributes['inputWithIconPadding_tablet'] ) ) {
            $padding_css = self::generate_dimensions_css( $attributes['inputWithIconPadding_tablet'] );
            if ( $padding_css ) {
                $tablet_rules[] = "{$selector} .ts-input-icon input { padding: {$padding_css}; }";
            }
        }
        if ( ! empty( $attributes['inputWithIconPadding_mobile'] ) ) {
            $padding_css = self::generate_dimensions_css( $attributes['inputWithIconPadding_mobile'] );
            if ( $padding_css ) {
                $mobile_rules[] = "{$selector} .ts-input-icon input { padding: {$padding_css}; }";
            }
        }

        // Icon color
        if ( ! empty( $attributes['inputIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-input-icon i { color: {$attributes['inputIconColor']}; }";
        }

        // Icon size
        if ( isset( $attributes['inputIconSize'] ) && $attributes['inputIconSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-input-icon i { font-size: {$attributes['inputIconSize']}px; }";
        }
        if ( isset( $attributes['inputIconSize_tablet'] ) && $attributes['inputIconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-input-icon i { font-size: {$attributes['inputIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['inputIconSize_mobile'] ) && $attributes['inputIconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-input-icon i { font-size: {$attributes['inputIconSize_mobile']}px; }";
        }

        // Icon margin
        if ( isset( $attributes['inputIconMargin'] ) && $attributes['inputIconMargin'] !== '' ) {
            $css_rules[] = "{$selector} .ts-input-icon i { margin: 0 {$attributes['inputIconMargin']}px; }";
        }
        if ( isset( $attributes['inputIconMargin_tablet'] ) && $attributes['inputIconMargin_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-input-icon i { margin: 0 {$attributes['inputIconMargin_tablet']}px; }";
        }
        if ( isset( $attributes['inputIconMargin_mobile'] ) && $attributes['inputIconMargin_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-input-icon i { margin: 0 {$attributes['inputIconMargin_mobile']}px; }";
        }

        // Textarea padding
        if ( ! empty( $attributes['textareaPadding'] ) ) {
            $padding_css = self::generate_dimensions_css( $attributes['textareaPadding'] );
            if ( $padding_css ) {
                $css_rules[] = "{$selector} textarea { padding: {$padding_css}; }";
            }
        }
        if ( ! empty( $attributes['textareaPadding_tablet'] ) ) {
            $padding_css = self::generate_dimensions_css( $attributes['textareaPadding_tablet'] );
            if ( $padding_css ) {
                $tablet_rules[] = "{$selector} textarea { padding: {$padding_css}; }";
            }
        }
        if ( ! empty( $attributes['textareaPadding_mobile'] ) ) {
            $padding_css = self::generate_dimensions_css( $attributes['textareaPadding_mobile'] );
            if ( $padding_css ) {
                $mobile_rules[] = "{$selector} textarea { padding: {$padding_css}; }";
            }
        }

        // Textarea radius
        if ( isset( $attributes['textareaRadius'] ) && $attributes['textareaRadius'] !== '' ) {
            $css_rules[] = "{$selector} textarea { border-radius: {$attributes['textareaRadius']}px; }";
        }
        if ( isset( $attributes['textareaRadius_tablet'] ) && $attributes['textareaRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} textarea { border-radius: {$attributes['textareaRadius_tablet']}px; }";
        }
        if ( isset( $attributes['textareaRadius_mobile'] ) && $attributes['textareaRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} textarea { border-radius: {$attributes['textareaRadius_mobile']}px; }";
        }

        // Hover states
        if ( ! empty( $attributes['inputBgColorHover'] ) ) {
            $css_rules[] = "{$selector} input:hover, {$selector} textarea:hover, {$selector} .ts-filter:hover { background-color: {$attributes['inputBgColorHover']}; }";
        }
        if ( ! empty( $attributes['inputBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} input:hover, {$selector} textarea:hover, {$selector} .ts-filter:hover { border-color: {$attributes['inputBorderColorHover']}; }";
        }
        if ( ! empty( $attributes['inputPlaceholderColorHover'] ) ) {
            $css_rules[] = "{$selector} input:hover::placeholder, {$selector} textarea:hover::placeholder { color: {$attributes['inputPlaceholderColorHover']}; }";
        }
        if ( ! empty( $attributes['inputValueColorHover'] ) ) {
            $css_rules[] = "{$selector} input:hover, {$selector} textarea:hover { color: {$attributes['inputValueColorHover']}; }";
        }
        if ( ! empty( $attributes['inputIconColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-input-icon:hover i { color: {$attributes['inputIconColorHover']}; }";
        }

        // Active (focus) states
        if ( ! empty( $attributes['inputBgColorActive'] ) ) {
            $css_rules[] = "{$selector} input:focus, {$selector} textarea:focus, {$selector} .ts-filter:focus { background-color: {$attributes['inputBgColorActive']}; }";
        }
        if ( ! empty( $attributes['inputBorderColorActive'] ) ) {
            $css_rules[] = "{$selector} input:focus, {$selector} textarea:focus, {$selector} .ts-filter:focus { border-color: {$attributes['inputBorderColorActive']}; }";
        }
        if ( ! empty( $attributes['inputPlaceholderColorActive'] ) ) {
            $css_rules[] = "{$selector} input:focus::placeholder, {$selector} textarea:focus::placeholder { color: {$attributes['inputPlaceholderColorActive']}; }";
        }
        if ( ! empty( $attributes['inputValueColorActive'] ) ) {
            $css_rules[] = "{$selector} input:focus, {$selector} textarea:focus { color: {$attributes['inputValueColorActive']}; }";
        }

        // ============================================
        // 14. CARDS (Payment methods, etc.)
        // ============================================

        // Gap
        if ( isset( $attributes['cardsGap'] ) && $attributes['cardsGap'] !== '' ) {
            $css_rules[] = "{$selector} .ts-payment-methods { gap: {$attributes['cardsGap']}px; }";
        }
        if ( isset( $attributes['cardsGap_tablet'] ) && $attributes['cardsGap_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-payment-methods { gap: {$attributes['cardsGap_tablet']}px; }";
        }
        if ( isset( $attributes['cardsGap_mobile'] ) && $attributes['cardsGap_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-payment-methods { gap: {$attributes['cardsGap_mobile']}px; }";
        }

        // Background color
        if ( ! empty( $attributes['cardsBgColor'] ) ) {
            $css_rules[] = "{$selector} .ts-payment-card { background-color: {$attributes['cardsBgColor']}; }";
        }

        // Border
        if ( ! empty( $attributes['cardsBorderType'] ) && $attributes['cardsBorderType'] !== 'none' ) {
            $css_rules[] = "{$selector} .ts-payment-card { border-style: {$attributes['cardsBorderType']}; }";

            if ( ! empty( $attributes['cardsBorderWidth'] ) ) {
                $border_css = self::generate_border_width_css( $attributes['cardsBorderWidth'] );
                if ( $border_css ) {
                    $css_rules[] = "{$selector} .ts-payment-card { border-width: {$border_css}; }";
                }
            }

            if ( ! empty( $attributes['cardsBorderColor'] ) ) {
                $css_rules[] = "{$selector} .ts-payment-card { border-color: {$attributes['cardsBorderColor']}; }";
            }
        }

        // Border radius
        if ( isset( $attributes['cardsRadius'] ) && $attributes['cardsRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-payment-card { border-radius: {$attributes['cardsRadius']}px; }";
        }
        if ( isset( $attributes['cardsRadius_tablet'] ) && $attributes['cardsRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-payment-card { border-radius: {$attributes['cardsRadius_tablet']}px; }";
        }
        if ( isset( $attributes['cardsRadius_mobile'] ) && $attributes['cardsRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-payment-card { border-radius: {$attributes['cardsRadius_mobile']}px; }";
        }

        // Primary text typography & color
        if ( ! empty( $attributes['cardsPrimaryTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['cardsPrimaryTypography'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ts-payment-card .ts-primary { {$typo_css} }";
            }
        }
        if ( ! empty( $attributes['cardsPrimaryColor'] ) ) {
            $css_rules[] = "{$selector} .ts-payment-card .ts-primary { color: {$attributes['cardsPrimaryColor']}; }";
        }

        // Secondary text typography & color
        if ( ! empty( $attributes['cardsSecondaryTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['cardsSecondaryTypography'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ts-payment-card .ts-secondary { {$typo_css} }";
            }
        }
        if ( ! empty( $attributes['cardsSecondaryColor'] ) ) {
            $css_rules[] = "{$selector} .ts-payment-card .ts-secondary { color: {$attributes['cardsSecondaryColor']}; }";
        }

        // Price typography & color
        if ( ! empty( $attributes['cardsPriceTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['cardsPriceTypography'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ts-payment-card .ts-price { {$typo_css} }";
            }
        }
        if ( ! empty( $attributes['cardsPriceColor'] ) ) {
            $css_rules[] = "{$selector} .ts-payment-card .ts-price { color: {$attributes['cardsPriceColor']}; }";
        }

        // Image radius
        if ( isset( $attributes['cardsImageRadius'] ) && $attributes['cardsImageRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-payment-card img { border-radius: {$attributes['cardsImageRadius']}px; }";
        }
        if ( isset( $attributes['cardsImageRadius_tablet'] ) && $attributes['cardsImageRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-payment-card img { border-radius: {$attributes['cardsImageRadius_tablet']}px; }";
        }
        if ( isset( $attributes['cardsImageRadius_mobile'] ) && $attributes['cardsImageRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-payment-card img { border-radius: {$attributes['cardsImageRadius_mobile']}px; }";
        }

        // Image size
        if ( isset( $attributes['cardsImageSize'] ) && $attributes['cardsImageSize'] !== '' ) {
            $size = $attributes['cardsImageSize'];
            $css_rules[] = "{$selector} .ts-payment-card img { width: {$size}px; height: {$size}px; }";
        }
        if ( isset( $attributes['cardsImageSize_tablet'] ) && $attributes['cardsImageSize_tablet'] !== '' ) {
            $size = $attributes['cardsImageSize_tablet'];
            $tablet_rules[] = "{$selector} .ts-payment-card img { width: {$size}px; height: {$size}px; }";
        }
        if ( isset( $attributes['cardsImageSize_mobile'] ) && $attributes['cardsImageSize_mobile'] !== '' ) {
            $size = $attributes['cardsImageSize_mobile'];
            $mobile_rules[] = "{$selector} .ts-payment-card img { width: {$size}px; height: {$size}px; }";
        }

        // Selected states
        if ( ! empty( $attributes['cardsSelectedBgColor'] ) ) {
            $css_rules[] = "{$selector} .ts-payment-card.ts-selected { background-color: {$attributes['cardsSelectedBgColor']}; }";
        }
        if ( ! empty( $attributes['cardsSelectedBorderColor'] ) ) {
            $css_rules[] = "{$selector} .ts-payment-card.ts-selected { border-color: {$attributes['cardsSelectedBorderColor']}; }";
        }
        if ( ! empty( $attributes['cardsSelectedBoxShadow'] ) ) {
            $shadow_css = self::generate_box_shadow_css( $attributes['cardsSelectedBoxShadow'] );
            if ( $shadow_css ) {
                $css_rules[] = "{$selector} .ts-payment-card.ts-selected { box-shadow: {$shadow_css}; }";
            }
        }
        if ( ! empty( $attributes['cardsSelectedPrimaryTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['cardsSelectedPrimaryTypography'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ts-payment-card.ts-selected .ts-primary { {$typo_css} }";
            }
        }

        // ============================================
        // 15. FILE/GALLERY FIELDS
        // ============================================

        // Field gap
        if ( isset( $attributes['fileFieldGap'] ) && $attributes['fileFieldGap'] !== '' ) {
            $css_rules[] = "{$selector} .ts-file-list { gap: {$attributes['fileFieldGap']}px; }";
        }
        if ( isset( $attributes['fileFieldGap_tablet'] ) && $attributes['fileFieldGap_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-file-list { gap: {$attributes['fileFieldGap_tablet']}px; }";
        }
        if ( isset( $attributes['fileFieldGap_mobile'] ) && $attributes['fileFieldGap_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-file-list { gap: {$attributes['fileFieldGap_mobile']}px; }";
        }

        // File select button icon
        if ( ! empty( $attributes['fileSelectIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-file-upload i { color: {$attributes['fileSelectIconColor']}; }";
        }
        if ( isset( $attributes['fileSelectIconSize'] ) && $attributes['fileSelectIconSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-file-upload i { font-size: {$attributes['fileSelectIconSize']}px; }";
        }
        if ( isset( $attributes['fileSelectIconSize_tablet'] ) && $attributes['fileSelectIconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-file-upload i { font-size: {$attributes['fileSelectIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['fileSelectIconSize_mobile'] ) && $attributes['fileSelectIconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-file-upload i { font-size: {$attributes['fileSelectIconSize_mobile']}px; }";
        }

        // File select button background
        if ( ! empty( $attributes['fileSelectBgColor'] ) ) {
            $css_rules[] = "{$selector} .ts-file-upload { background-color: {$attributes['fileSelectBgColor']}; }";
        }

        // File select button border
        if ( ! empty( $attributes['fileSelectBorderType'] ) && $attributes['fileSelectBorderType'] !== 'none' ) {
            $css_rules[] = "{$selector} .ts-file-upload { border-style: {$attributes['fileSelectBorderType']}; }";

            if ( ! empty( $attributes['fileSelectBorderWidth'] ) ) {
                $border_css = self::generate_border_width_css( $attributes['fileSelectBorderWidth'] );
                if ( $border_css ) {
                    $css_rules[] = "{$selector} .ts-file-upload { border-width: {$border_css}; }";
                }
            }

            if ( ! empty( $attributes['fileSelectBorderColor'] ) ) {
                $css_rules[] = "{$selector} .ts-file-upload { border-color: {$attributes['fileSelectBorderColor']}; }";
            }
        }

        // File select button radius
        if ( isset( $attributes['fileSelectRadius'] ) && $attributes['fileSelectRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-file-upload { border-radius: {$attributes['fileSelectRadius']}px; }";
        }
        if ( isset( $attributes['fileSelectRadius_tablet'] ) && $attributes['fileSelectRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-file-upload { border-radius: {$attributes['fileSelectRadius_tablet']}px; }";
        }
        if ( isset( $attributes['fileSelectRadius_mobile'] ) && $attributes['fileSelectRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-file-upload { border-radius: {$attributes['fileSelectRadius_mobile']}px; }";
        }

        // File select button typography & text color
        if ( ! empty( $attributes['fileSelectTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['fileSelectTypography'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ts-file-upload { {$typo_css} }";
            }
        }
        if ( ! empty( $attributes['fileSelectTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-file-upload { color: {$attributes['fileSelectTextColor']}; }";
        }

        // Added file radius
        if ( isset( $attributes['addedFileRadius'] ) && $attributes['addedFileRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-uploaded-file { border-radius: {$attributes['addedFileRadius']}px; }";
        }
        if ( isset( $attributes['addedFileRadius_tablet'] ) && $attributes['addedFileRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-uploaded-file { border-radius: {$attributes['addedFileRadius_tablet']}px; }";
        }
        if ( isset( $attributes['addedFileRadius_mobile'] ) && $attributes['addedFileRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-uploaded-file { border-radius: {$attributes['addedFileRadius_mobile']}px; }";
        }

        // Added file background
        if ( ! empty( $attributes['addedFileBgColor'] ) ) {
            $css_rules[] = "{$selector} .ts-uploaded-file { background-color: {$attributes['addedFileBgColor']}; }";
        }

        // Added file icon
        if ( ! empty( $attributes['addedFileIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-uploaded-file i { color: {$attributes['addedFileIconColor']}; }";
        }
        if ( isset( $attributes['addedFileIconSize'] ) && $attributes['addedFileIconSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-uploaded-file i { font-size: {$attributes['addedFileIconSize']}px; }";
        }
        if ( isset( $attributes['addedFileIconSize_tablet'] ) && $attributes['addedFileIconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-uploaded-file i { font-size: {$attributes['addedFileIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['addedFileIconSize_mobile'] ) && $attributes['addedFileIconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-uploaded-file i { font-size: {$attributes['addedFileIconSize_mobile']}px; }";
        }

        // Added file typography & text color
        if ( ! empty( $attributes['addedFileTypography'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['addedFileTypography'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ts-uploaded-file { {$typo_css} }";
            }
        }
        if ( ! empty( $attributes['addedFileTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-uploaded-file { color: {$attributes['addedFileTextColor']}; }";
        }

        // Remove file button
        if ( ! empty( $attributes['removeFileBgColor'] ) ) {
            $css_rules[] = "{$selector} .ts-remove-file { background-color: {$attributes['removeFileBgColor']}; }";
        }
        if ( ! empty( $attributes['removeFileBgColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-remove-file:hover { background-color: {$attributes['removeFileBgColorHover']}; }";
        }
        if ( ! empty( $attributes['removeFileColor'] ) ) {
            $css_rules[] = "{$selector} .ts-remove-file { color: {$attributes['removeFileColor']}; }";
        }
        if ( ! empty( $attributes['removeFileColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-remove-file:hover { color: {$attributes['removeFileColorHover']}; }";
        }

        // Remove file button radius
        if ( isset( $attributes['removeFileRadius'] ) && $attributes['removeFileRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-remove-file { border-radius: {$attributes['removeFileRadius']}px; }";
        }
        if ( isset( $attributes['removeFileRadius_tablet'] ) && $attributes['removeFileRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-remove-file { border-radius: {$attributes['removeFileRadius_tablet']}px; }";
        }
        if ( isset( $attributes['removeFileRadius_mobile'] ) && $attributes['removeFileRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-remove-file { border-radius: {$attributes['removeFileRadius_mobile']}px; }";
        }

        // Remove file button size
        if ( isset( $attributes['removeFileSize'] ) && $attributes['removeFileSize'] !== '' ) {
            $size = $attributes['removeFileSize'];
            $css_rules[] = "{$selector} .ts-remove-file { width: {$size}px; height: {$size}px; }";
        }
        if ( isset( $attributes['removeFileSize_tablet'] ) && $attributes['removeFileSize_tablet'] !== '' ) {
            $size = $attributes['removeFileSize_tablet'];
            $tablet_rules[] = "{$selector} .ts-remove-file { width: {$size}px; height: {$size}px; }";
        }
        if ( isset( $attributes['removeFileSize_mobile'] ) && $attributes['removeFileSize_mobile'] !== '' ) {
            $size = $attributes['removeFileSize_mobile'];
            $mobile_rules[] = "{$selector} .ts-remove-file { width: {$size}px; height: {$size}px; }";
        }

        // Remove file icon size
        if ( isset( $attributes['removeFileIconSize'] ) && $attributes['removeFileIconSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-remove-file i { font-size: {$attributes['removeFileIconSize']}px; }";
        }
        if ( isset( $attributes['removeFileIconSize_tablet'] ) && $attributes['removeFileIconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-remove-file i { font-size: {$attributes['removeFileIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['removeFileIconSize_mobile'] ) && $attributes['removeFileIconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-remove-file i { font-size: {$attributes['removeFileIconSize_mobile']}px; }";
        }

        // File select hover states
        if ( ! empty( $attributes['fileSelectIconColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-file-upload:hover i { color: {$attributes['fileSelectIconColorHover']}; }";
        }
        if ( ! empty( $attributes['fileSelectBgColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-file-upload:hover { background-color: {$attributes['fileSelectBgColorHover']}; }";
        }
        if ( ! empty( $attributes['fileSelectBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-file-upload:hover { border-color: {$attributes['fileSelectBorderColorHover']}; }";
        }
        if ( ! empty( $attributes['fileSelectTextColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-file-upload:hover { color: {$attributes['fileSelectTextColorHover']}; }";
        }

        // ============================================
        // COMBINE ALL RULES
        // ============================================

        $final_css = '';
        if ( ! empty( $css_rules ) ) {
            $final_css .= implode( "\n", $css_rules );
        }
        if ( ! empty( $tablet_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::TABLET_BREAKPOINT . "px) {\n" . implode( "\n", $tablet_rules ) . "\n}";
        }
        if ( ! empty( $mobile_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::MOBILE_BREAKPOINT . "px) {\n" . implode( "\n", $mobile_rules ) . "\n}";
        }

        return $final_css;
    }

    /**
     * Generate CSS for Term Feed Block
     *
     * Evidence: term-feed.php (uses post-feed markup with term taxonomy)
     * Sections: Carousel Navigation Buttons, Layout (Grid/Carousel modes)
     *
     * @param array  $attributes Block attributes from Gutenberg
     * @param string $block_id   Block ID for scoped selector
     * @return string Generated CSS
     */
    public static function generate_term_feed_css( $attributes, $block_id ) {
        if ( empty( $block_id ) ) {
            return '';
        }

        $css_rules = [];
        $tablet_rules = [];
        $mobile_rules = [];

        $selector = '[data-block-id="' . $block_id . '"]';

        // ============================================
        // 1. CAROUSEL NAVIGATION BUTTONS
        // ============================================

        $btn_selector = "{$selector} .ts-icon-btn";
        $btn_hover_selector = "{$selector} .ts-icon-btn:hover";
        $nav_li_first_selector = "{$selector} .post-feed-nav li:first-child";
        $nav_li_last_selector = "{$selector} .post-feed-nav li:last-child";
        $nav_li_all_selector = "{$selector} .post-feed-nav li";

        // 1.1 Horizontal Position (Margins on li)
        if ( isset( $attributes['navHorizontalPosition'] ) && $attributes['navHorizontalPosition'] !== '' ) {
            $css_rules[] = "{$nav_li_first_selector} { margin-left: {$attributes['navHorizontalPosition']}px; }";
            $css_rules[] = "{$nav_li_last_selector} { margin-right: {$attributes['navHorizontalPosition']}px; }";
        }
        if ( isset( $attributes['navHorizontalPosition_tablet'] ) && $attributes['navHorizontalPosition_tablet'] !== '' ) {
            $tablet_rules[] = "{$nav_li_first_selector} { margin-left: {$attributes['navHorizontalPosition_tablet']}px; }";
            $tablet_rules[] = "{$nav_li_last_selector} { margin-right: {$attributes['navHorizontalPosition_tablet']}px; }";
        }
        if ( isset( $attributes['navHorizontalPosition_mobile'] ) && $attributes['navHorizontalPosition_mobile'] !== '' ) {
            $mobile_rules[] = "{$nav_li_first_selector} { margin-left: {$attributes['navHorizontalPosition_mobile']}px; }";
            $mobile_rules[] = "{$nav_li_last_selector} { margin-right: {$attributes['navHorizontalPosition_mobile']}px; }";
        }

        // 1.2 Vertical Position (Margin top on li)
        if ( isset( $attributes['navVerticalPosition'] ) && $attributes['navVerticalPosition'] !== '' ) {
            $css_rules[] = "{$nav_li_all_selector} { margin-top: {$attributes['navVerticalPosition']}px; }";
        }
        if ( isset( $attributes['navVerticalPosition_tablet'] ) && $attributes['navVerticalPosition_tablet'] !== '' ) {
            $tablet_rules[] = "{$nav_li_all_selector} { margin-top: {$attributes['navVerticalPosition_tablet']}px; }";
        }
        if ( isset( $attributes['navVerticalPosition_mobile'] ) && $attributes['navVerticalPosition_mobile'] !== '' ) {
            $mobile_rules[] = "{$nav_li_all_selector} { margin-top: {$attributes['navVerticalPosition_mobile']}px; }";
        }

        // 1.3 Button Icon Color
        if ( ! empty( $attributes['navButtonIconColor'] ) ) {
            $css_rules[] = "{$btn_selector} { --ts-icon-color: {$attributes['navButtonIconColor']}; color: {$attributes['navButtonIconColor']}; }";
        }

        // 1.4 Button Size
        if ( isset( $attributes['navButtonSize'] ) && $attributes['navButtonSize'] !== '' ) {
            $css_rules[] = "{$btn_selector} { width: {$attributes['navButtonSize']}px; height: {$attributes['navButtonSize']}px; }";
        }
        if ( isset( $attributes['navButtonSize_tablet'] ) && $attributes['navButtonSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$btn_selector} { width: {$attributes['navButtonSize_tablet']}px; height: {$attributes['navButtonSize_tablet']}px; }";
        }
        if ( isset( $attributes['navButtonSize_mobile'] ) && $attributes['navButtonSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$btn_selector} { width: {$attributes['navButtonSize_mobile']}px; height: {$attributes['navButtonSize_mobile']}px; }";
        }

        // 1.5 Button Icon Size
        if ( isset( $attributes['navButtonIconSize'] ) && $attributes['navButtonIconSize'] !== '' ) {
            $css_rules[] = "{$btn_selector} { --ts-icon-size: {$attributes['navButtonIconSize']}px; }";
        }
        if ( isset( $attributes['navButtonIconSize_tablet'] ) && $attributes['navButtonIconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$btn_selector} { --ts-icon-size: {$attributes['navButtonIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['navButtonIconSize_mobile'] ) && $attributes['navButtonIconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$btn_selector} { --ts-icon-size: {$attributes['navButtonIconSize_mobile']}px; }";
        }

        // 1.6 Button Background
        if ( ! empty( $attributes['navButtonBackground'] ) ) {
            $css_rules[] = "{$btn_selector} { background-color: {$attributes['navButtonBackground']}; }";
        }

        // 1.7 Backdrop Blur
        if ( isset( $attributes['navBackdropBlur'] ) && $attributes['navBackdropBlur'] !== '' ) {
            $css_rules[] = "{$btn_selector} { backdrop-filter: blur({$attributes['navBackdropBlur']}px); }";
        }
        if ( isset( $attributes['navBackdropBlur_tablet'] ) && $attributes['navBackdropBlur_tablet'] !== '' ) {
            $tablet_rules[] = "{$btn_selector} { backdrop-filter: blur({$attributes['navBackdropBlur_tablet']}px); }";
        }
        if ( isset( $attributes['navBackdropBlur_mobile'] ) && $attributes['navBackdropBlur_mobile'] !== '' ) {
            $mobile_rules[] = "{$btn_selector} { backdrop-filter: blur({$attributes['navBackdropBlur_mobile']}px); }";
        }

        // 1.8 Border
        if ( ! empty( $attributes['navBorderType'] ) && $attributes['navBorderType'] !== 'none' ) {
            $css_rules[] = "{$btn_selector} { border-style: {$attributes['navBorderType']}; }";

            if ( ! empty( $attributes['navBorderWidth'] ) ) {
                $border_css = self::generate_border_width_css( $attributes['navBorderWidth'] );
                if ( $border_css ) {
                    $css_rules[] = "{$btn_selector} { border-width: {$border_css}; }";
                }
            }

            if ( ! empty( $attributes['navBorderColor'] ) ) {
                $css_rules[] = "{$btn_selector} { border-color: {$attributes['navBorderColor']}; }";
            }
        }

        // 1.9 Border Radius
        if ( isset( $attributes['navBorderRadius'] ) && $attributes['navBorderRadius'] !== '' ) {
            $css_rules[] = "{$btn_selector} { border-radius: {$attributes['navBorderRadius']}px; }";
        }
        if ( isset( $attributes['navBorderRadius_tablet'] ) && $attributes['navBorderRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$btn_selector} { border-radius: {$attributes['navBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['navBorderRadius_mobile'] ) && $attributes['navBorderRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$btn_selector} { border-radius: {$attributes['navBorderRadius_mobile']}px; }";
        }

        // --- HOVER STATE ---

        // 1.10 Button Size Hover
        if ( isset( $attributes['navButtonSizeHover'] ) && $attributes['navButtonSizeHover'] !== '' ) {
            $css_rules[] = "{$btn_hover_selector} { width: {$attributes['navButtonSizeHover']}px; height: {$attributes['navButtonSizeHover']}px; }";
        }
        if ( isset( $attributes['navButtonSizeHover_tablet'] ) && $attributes['navButtonSizeHover_tablet'] !== '' ) {
            $tablet_rules[] = "{$btn_hover_selector} { width: {$attributes['navButtonSizeHover_tablet']}px; height: {$attributes['navButtonSizeHover_tablet']}px; }";
        }
        if ( isset( $attributes['navButtonSizeHover_mobile'] ) && $attributes['navButtonSizeHover_mobile'] !== '' ) {
            $mobile_rules[] = "{$btn_hover_selector} { width: {$attributes['navButtonSizeHover_mobile']}px; height: {$attributes['navButtonSizeHover_mobile']}px; }";
        }

        // 1.11 Button Icon Size Hover
        if ( isset( $attributes['navButtonIconSizeHover'] ) && $attributes['navButtonIconSizeHover'] !== '' ) {
            $css_rules[] = "{$btn_hover_selector} { --ts-icon-size: {$attributes['navButtonIconSizeHover']}px; }";
        }
        if ( isset( $attributes['navButtonIconSizeHover_tablet'] ) && $attributes['navButtonIconSizeHover_tablet'] !== '' ) {
            $tablet_rules[] = "{$btn_hover_selector} { --ts-icon-size: {$attributes['navButtonIconSizeHover_tablet']}px; }";
        }
        if ( isset( $attributes['navButtonIconSizeHover_mobile'] ) && $attributes['navButtonIconSizeHover_mobile'] !== '' ) {
            $mobile_rules[] = "{$btn_hover_selector} { --ts-icon-size: {$attributes['navButtonIconSizeHover_mobile']}px; }";
        }

        // 1.12 Button Icon Color Hover
        if ( ! empty( $attributes['navButtonIconColorHover'] ) ) {
            $css_rules[] = "{$btn_hover_selector} { --ts-icon-color: {$attributes['navButtonIconColorHover']}; color: {$attributes['navButtonIconColorHover']}; }";
        }

        // 1.13 Button Background Hover
        if ( ! empty( $attributes['navButtonBackgroundHover'] ) ) {
            $css_rules[] = "{$btn_hover_selector} { background-color: {$attributes['navButtonBackgroundHover']}; }";
        }

        // 1.14 Button Border Color Hover
        if ( ! empty( $attributes['navButtonBorderColorHover'] ) ) {
            $css_rules[] = "{$btn_hover_selector} { border-color: {$attributes['navButtonBorderColorHover']}; }";
        }

        // ============================================
        // 2. LAYOUT ATTRIBUTES
        // ============================================

        $grid_selector = "{$selector} .post-feed-grid";

        // 2.1 Item Gap
        if ( isset( $attributes['itemGap'] ) && $attributes['itemGap'] !== '' ) {
            $css_rules[] = "{$grid_selector} { gap: {$attributes['itemGap']}px; }";
        }
        if ( isset( $attributes['itemGap_tablet'] ) && $attributes['itemGap_tablet'] !== '' ) {
            $tablet_rules[] = "{$grid_selector} { gap: {$attributes['itemGap_tablet']}px; }";
        }
        if ( isset( $attributes['itemGap_mobile'] ) && $attributes['itemGap_mobile'] !== '' ) {
            $mobile_rules[] = "{$grid_selector} { gap: {$attributes['itemGap_mobile']}px; }";
        }

        // 2.2 Layout Mode: Grid (ts-feed-grid-default)
        if ( ! empty( $attributes['layoutMode'] ) && $attributes['layoutMode'] === 'ts-feed-grid-default' ) {
            // Grid Columns
            if ( isset( $attributes['gridColumns'] ) && $attributes['gridColumns'] !== '' ) {
                $css_rules[] = "{$grid_selector} { grid-template-columns: repeat({$attributes['gridColumns']}, minmax(0, 1fr)); }";
            }
            if ( isset( $attributes['gridColumns_tablet'] ) && $attributes['gridColumns_tablet'] !== '' ) {
                $tablet_rules[] = "{$grid_selector} { grid-template-columns: repeat({$attributes['gridColumns_tablet']}, minmax(0, 1fr)); }";
            }
            if ( isset( $attributes['gridColumns_mobile'] ) && $attributes['gridColumns_mobile'] !== '' ) {
                $mobile_rules[] = "{$grid_selector} { grid-template-columns: repeat({$attributes['gridColumns_mobile']}, minmax(0, 1fr)); }";
            }
        }

        // 2.3 Layout Mode: Carousel (ts-feed-nowrap)
        elseif ( ! empty( $attributes['layoutMode'] ) && $attributes['layoutMode'] === 'ts-feed-nowrap' ) {
            // Scroll Padding
            if ( isset( $attributes['scrollPadding'] ) && $attributes['scrollPadding'] !== '' ) {
                $css_rules[] = "{$grid_selector} { padding-left: {$attributes['scrollPadding']}px; padding-right: {$attributes['scrollPadding']}px; scroll-padding: {$attributes['scrollPadding']}px; }";
                $css_rules[] = "{$grid_selector} > div:last-of-type { margin-right: {$attributes['scrollPadding']}px; }";
            }
            if ( isset( $attributes['scrollPadding_tablet'] ) && $attributes['scrollPadding_tablet'] !== '' ) {
                $tablet_rules[] = "{$grid_selector} { padding-left: {$attributes['scrollPadding_tablet']}px; padding-right: {$attributes['scrollPadding_tablet']}px; scroll-padding: {$attributes['scrollPadding_tablet']}px; }";
                $tablet_rules[] = "{$grid_selector} > div:last-of-type { margin-right: {$attributes['scrollPadding_tablet']}px; }";
            }
            if ( isset( $attributes['scrollPadding_mobile'] ) && $attributes['scrollPadding_mobile'] !== '' ) {
                $mobile_rules[] = "{$grid_selector} { padding-left: {$attributes['scrollPadding_mobile']}px; padding-right: {$attributes['scrollPadding_mobile']}px; scroll-padding: {$attributes['scrollPadding_mobile']}px; }";
                $mobile_rules[] = "{$grid_selector} > div:last-of-type { margin-right: {$attributes['scrollPadding_mobile']}px; }";
            }

            // Item Width
            $item_selector = "{$selector} .ts-feed-nowrap .ts-preview";
            $unit = $attributes['carouselItemWidthUnit'] ?? '%';
            if ( isset( $attributes['carouselItemWidth'] ) && $attributes['carouselItemWidth'] !== '' ) {
                $width = $attributes['carouselItemWidth'];
                $css_rules[] = "{$item_selector} { width: {$width}{$unit}; min-width: {$width}{$unit}; flex-basis: {$width}{$unit}; }";
            }
            if ( isset( $attributes['carouselItemWidth_tablet'] ) && $attributes['carouselItemWidth_tablet'] !== '' ) {
                $width = $attributes['carouselItemWidth_tablet'];
                $tablet_rules[] = "{$item_selector} { width: {$width}{$unit}; min-width: {$width}{$unit}; flex-basis: {$width}{$unit}; }";
            }
            if ( isset( $attributes['carouselItemWidth_mobile'] ) && $attributes['carouselItemWidth_mobile'] !== '' ) {
                $width = $attributes['carouselItemWidth_mobile'];
                $mobile_rules[] = "{$item_selector} { width: {$width}{$unit}; min-width: {$width}{$unit}; flex-basis: {$width}{$unit}; }";
            }

            // Item Padding
            if ( isset( $attributes['itemPadding'] ) && $attributes['itemPadding'] !== '' ) {
                $css_rules[] = "{$item_selector} { padding: {$attributes['itemPadding']}px; }";
            }
            if ( isset( $attributes['itemPadding_tablet'] ) && $attributes['itemPadding_tablet'] !== '' ) {
                $tablet_rules[] = "{$item_selector} { padding: {$attributes['itemPadding_tablet']}px; }";
            }
            if ( isset( $attributes['itemPadding_mobile'] ) && $attributes['itemPadding_mobile'] !== '' ) {
                $mobile_rules[] = "{$item_selector} { padding: {$attributes['itemPadding_mobile']}px; }";
            }
        }

        // ============================================
        // COMBINE ALL RULES
        // ============================================

        $final_css = '';
        if ( ! empty( $css_rules ) ) {
            $final_css .= implode( "\n", $css_rules );
        }
        if ( ! empty( $tablet_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::TABLET_BREAKPOINT . "px) {\n" . implode( "\n", $tablet_rules ) . "\n}";
        }
        if ( ! empty( $mobile_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::MOBILE_BREAKPOINT . "px) {\n" . implode( "\n", $mobile_rules ) . "\n}";
        }

        return $final_css;
    }

    /**
     * Generate CSS for Slider Block
     *
     * Evidence: slider.php:170-686
     * Sections: 3 (General/Images, Thumbnails, Carousel Navigation)
     *
     * @param array  $attributes Block attributes from Gutenberg
     * @param string $block_id   Block ID for scoped selector
     * @return string Generated CSS
     */
    public static function generate_slider_css( $attributes, $block_id ) {
        if ( empty( $block_id ) ) {
            return '';
        }

        $css_rules = [];
        $tablet_rules = [];
        $mobile_rules = [];

        $selector = '.voxel-fse-slider-' . $block_id;

        // ============================================
        // SECTION 1: GENERAL (Image Styling)
        // Evidence: slider.php:170-267
        // ============================================

        // Image aspect ratio (Normal)
        if ( ! empty( $attributes['imageAspectRatio'] ) ) {
            $css_rules[] = "{$selector} .ts-preview img { aspect-ratio: {$attributes['imageAspectRatio']}; }";
        }
        if ( ! empty( $attributes['imageAspectRatio_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-preview img { aspect-ratio: {$attributes['imageAspectRatio_tablet']}; }";
        }
        if ( ! empty( $attributes['imageAspectRatio_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-preview img { aspect-ratio: {$attributes['imageAspectRatio_mobile']}; }";
        }

        // Border radius (Normal)
        if ( isset( $attributes['imageBorderRadius'] ) && $attributes['imageBorderRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-slider, {$selector} .ts-single-slide { border-radius: {$attributes['imageBorderRadius']}px; }";
        }
        if ( isset( $attributes['imageBorderRadius_tablet'] ) && $attributes['imageBorderRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-slider, {$selector} .ts-single-slide { border-radius: {$attributes['imageBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['imageBorderRadius_mobile'] ) && $attributes['imageBorderRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-slider, {$selector} .ts-single-slide { border-radius: {$attributes['imageBorderRadius_mobile']}px; }";
        }

        // Opacity (Normal)
        if ( isset( $attributes['imageOpacity'] ) && $attributes['imageOpacity'] !== '' ) {
            $css_rules[] = "{$selector} { opacity: {$attributes['imageOpacity']}; }";
        }
        if ( isset( $attributes['imageOpacity_tablet'] ) && $attributes['imageOpacity_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} { opacity: {$attributes['imageOpacity_tablet']}; }";
        }
        if ( isset( $attributes['imageOpacity_mobile'] ) && $attributes['imageOpacity_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} { opacity: {$attributes['imageOpacity_mobile']}; }";
        }

        // Opacity (Hover)
        if ( isset( $attributes['imageOpacityHover'] ) && $attributes['imageOpacityHover'] !== '' ) {
            $css_rules[] = "{$selector}:hover { opacity: {$attributes['imageOpacityHover']}; }";
        }
        if ( isset( $attributes['imageOpacityHover_tablet'] ) && $attributes['imageOpacityHover_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector}:hover { opacity: {$attributes['imageOpacityHover_tablet']}; }";
        }
        if ( isset( $attributes['imageOpacityHover_mobile'] ) && $attributes['imageOpacityHover_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector}:hover { opacity: {$attributes['imageOpacityHover_mobile']}; }";
        }

        // ============================================
        // SECTION 2: THUMBNAILS
        // Evidence: slider.php:271-385
        // ============================================

        // Thumbnail size (Normal)
        if ( isset( $attributes['thumbnailSize'] ) && $attributes['thumbnailSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-slide-nav a { width: {$attributes['thumbnailSize']}px; height: {$attributes['thumbnailSize']}px; }";
        }
        if ( isset( $attributes['thumbnailSize_tablet'] ) && $attributes['thumbnailSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-slide-nav a { width: {$attributes['thumbnailSize_tablet']}px; height: {$attributes['thumbnailSize_tablet']}px; }";
        }
        if ( isset( $attributes['thumbnailSize_mobile'] ) && $attributes['thumbnailSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-slide-nav a { width: {$attributes['thumbnailSize_mobile']}px; height: {$attributes['thumbnailSize_mobile']}px; }";
        }

        // Thumbnail border radius (Normal)
        if ( isset( $attributes['thumbnailBorderRadius'] ) && $attributes['thumbnailBorderRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-slide-nav a { border-radius: {$attributes['thumbnailBorderRadius']}px; }";
        }
        if ( isset( $attributes['thumbnailBorderRadius_tablet'] ) && $attributes['thumbnailBorderRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-slide-nav a { border-radius: {$attributes['thumbnailBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['thumbnailBorderRadius_mobile'] ) && $attributes['thumbnailBorderRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-slide-nav a { border-radius: {$attributes['thumbnailBorderRadius_mobile']}px; }";
        }

        // Thumbnail opacity (Normal)
        if ( isset( $attributes['thumbnailOpacity'] ) && $attributes['thumbnailOpacity'] !== '' ) {
            $css_rules[] = "{$selector} .ts-slide-nav a { opacity: {$attributes['thumbnailOpacity']}; }";
        }
        if ( isset( $attributes['thumbnailOpacity_tablet'] ) && $attributes['thumbnailOpacity_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-slide-nav a { opacity: {$attributes['thumbnailOpacity_tablet']}; }";
        }
        if ( isset( $attributes['thumbnailOpacity_mobile'] ) && $attributes['thumbnailOpacity_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-slide-nav a { opacity: {$attributes['thumbnailOpacity_mobile']}; }";
        }

        // Thumbnail opacity (Hover)
        if ( isset( $attributes['thumbnailOpacityHover'] ) && $attributes['thumbnailOpacityHover'] !== '' ) {
            $css_rules[] = "{$selector} .ts-slide-nav a:hover { opacity: {$attributes['thumbnailOpacityHover']}; }";
        }
        if ( isset( $attributes['thumbnailOpacityHover_tablet'] ) && $attributes['thumbnailOpacityHover_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-slide-nav a:hover { opacity: {$attributes['thumbnailOpacityHover_tablet']}; }";
        }
        if ( isset( $attributes['thumbnailOpacityHover_mobile'] ) && $attributes['thumbnailOpacityHover_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-slide-nav a:hover { opacity: {$attributes['thumbnailOpacityHover_mobile']}; }";
        }

        // ============================================
        // SECTION 3: CAROUSEL NAVIGATION
        // Evidence: slider.php:386-686
        // ============================================

        // Horizontal position (Normal)
        if ( isset( $attributes['navHorizontalPosition'] ) && $attributes['navHorizontalPosition'] !== '' ) {
            $css_rules[] = "{$selector} .post-feed-nav li:last-child { margin-right: {$attributes['navHorizontalPosition']}px; }";
            $css_rules[] = "{$selector} .post-feed-nav li:first-child { margin-left: {$attributes['navHorizontalPosition']}px; }";
        }
        if ( isset( $attributes['navHorizontalPosition_tablet'] ) && $attributes['navHorizontalPosition_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .post-feed-nav li:last-child { margin-right: {$attributes['navHorizontalPosition_tablet']}px; }";
            $tablet_rules[] = "{$selector} .post-feed-nav li:first-child { margin-left: {$attributes['navHorizontalPosition_tablet']}px; }";
        }
        if ( isset( $attributes['navHorizontalPosition_mobile'] ) && $attributes['navHorizontalPosition_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .post-feed-nav li:last-child { margin-right: {$attributes['navHorizontalPosition_mobile']}px; }";
            $mobile_rules[] = "{$selector} .post-feed-nav li:first-child { margin-left: {$attributes['navHorizontalPosition_mobile']}px; }";
        }

        // Vertical position (Normal)
        if ( isset( $attributes['navVerticalPosition'] ) && $attributes['navVerticalPosition'] !== '' ) {
            $css_rules[] = "{$selector} .post-feed-nav li { margin-top: {$attributes['navVerticalPosition']}px; }";
        }
        if ( isset( $attributes['navVerticalPosition_tablet'] ) && $attributes['navVerticalPosition_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .post-feed-nav li { margin-top: {$attributes['navVerticalPosition_tablet']}px; }";
        }
        if ( isset( $attributes['navVerticalPosition_mobile'] ) && $attributes['navVerticalPosition_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .post-feed-nav li { margin-top: {$attributes['navVerticalPosition_mobile']}px; }";
        }

        // Button icon color (Normal)
        if ( ! empty( $attributes['navButtonIconColor'] ) ) {
            $css_rules[] = "{$selector} .post-feed-nav .ts-icon-btn i { color: {$attributes['navButtonIconColor']}; }";
            $css_rules[] = "{$selector} .post-feed-nav .ts-icon-btn svg { fill: {$attributes['navButtonIconColor']}; }";
        }

        // Button size (Normal)
        if ( isset( $attributes['navButtonSize'] ) && $attributes['navButtonSize'] !== '' ) {
            $css_rules[] = "{$selector} .post-feed-nav .ts-icon-btn { width: {$attributes['navButtonSize']}px; height: {$attributes['navButtonSize']}px; }";
        }
        if ( isset( $attributes['navButtonSize_tablet'] ) && $attributes['navButtonSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .post-feed-nav .ts-icon-btn { width: {$attributes['navButtonSize_tablet']}px; height: {$attributes['navButtonSize_tablet']}px; }";
        }
        if ( isset( $attributes['navButtonSize_mobile'] ) && $attributes['navButtonSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .post-feed-nav .ts-icon-btn { width: {$attributes['navButtonSize_mobile']}px; height: {$attributes['navButtonSize_mobile']}px; }";
        }

        // Button icon size (Normal)
        if ( isset( $attributes['navButtonIconSize'] ) && $attributes['navButtonIconSize'] !== '' ) {
            $css_rules[] = "{$selector} .post-feed-nav .ts-icon-btn i { font-size: {$attributes['navButtonIconSize']}px; }";
            $css_rules[] = "{$selector} .post-feed-nav .ts-icon-btn svg { width: {$attributes['navButtonIconSize']}px; height: {$attributes['navButtonIconSize']}px; }";
        }
        if ( isset( $attributes['navButtonIconSize_tablet'] ) && $attributes['navButtonIconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .post-feed-nav .ts-icon-btn i { font-size: {$attributes['navButtonIconSize_tablet']}px; }";
            $tablet_rules[] = "{$selector} .post-feed-nav .ts-icon-btn svg { width: {$attributes['navButtonIconSize_tablet']}px; height: {$attributes['navButtonIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['navButtonIconSize_mobile'] ) && $attributes['navButtonIconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .post-feed-nav .ts-icon-btn i { font-size: {$attributes['navButtonIconSize_mobile']}px; }";
            $mobile_rules[] = "{$selector} .post-feed-nav .ts-icon-btn svg { width: {$attributes['navButtonIconSize_mobile']}px; height: {$attributes['navButtonIconSize_mobile']}px; }";
        }

        // Button background (Normal)
        if ( ! empty( $attributes['navButtonBackground'] ) ) {
            $css_rules[] = "{$selector} .post-feed-nav .ts-icon-btn { background-color: {$attributes['navButtonBackground']}; }";
        }

        // Backdrop blur (Normal)
        if ( isset( $attributes['navBackdropBlur'] ) && $attributes['navBackdropBlur'] !== '' ) {
            $css_rules[] = "{$selector} .post-feed-nav .ts-icon-btn { backdrop-filter: blur({$attributes['navBackdropBlur']}px); }";
        }
        if ( isset( $attributes['navBackdropBlur_tablet'] ) && $attributes['navBackdropBlur_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .post-feed-nav .ts-icon-btn { backdrop-filter: blur({$attributes['navBackdropBlur_tablet']}px); }";
        }
        if ( isset( $attributes['navBackdropBlur_mobile'] ) && $attributes['navBackdropBlur_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .post-feed-nav .ts-icon-btn { backdrop-filter: blur({$attributes['navBackdropBlur_mobile']}px); }";
        }

        // Border (Normal)
        if ( ! empty( $attributes['navBorderType'] ) && $attributes['navBorderType'] !== 'none' ) {
            $css_rules[] = "{$selector} .post-feed-nav .ts-icon-btn { border-style: {$attributes['navBorderType']}; }";

            if ( ! empty( $attributes['navBorderColor'] ) ) {
                $css_rules[] = "{$selector} .post-feed-nav .ts-icon-btn { border-color: {$attributes['navBorderColor']}; }";
            }

            // Border width (default to 1px if not specified)
            $border_width = isset( $attributes['navBorderWidth'] ) && $attributes['navBorderWidth'] !== '' ? "{$attributes['navBorderWidth']}px" : '1px';
            $css_rules[] = "{$selector} .post-feed-nav .ts-icon-btn { border-width: {$border_width}; }";
        }

        // Button border radius (Normal)
        if ( isset( $attributes['navButtonBorderRadius'] ) && $attributes['navButtonBorderRadius'] !== '' ) {
            $css_rules[] = "{$selector} .post-feed-nav .ts-icon-btn { border-radius: {$attributes['navButtonBorderRadius']}px; }";
        }
        if ( isset( $attributes['navButtonBorderRadius_tablet'] ) && $attributes['navButtonBorderRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .post-feed-nav .ts-icon-btn { border-radius: {$attributes['navButtonBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['navButtonBorderRadius_mobile'] ) && $attributes['navButtonBorderRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .post-feed-nav .ts-icon-btn { border-radius: {$attributes['navButtonBorderRadius_mobile']}px; }";
        }

        // --- HOVER STATE ---

        // Button size (Hover)
        if ( isset( $attributes['navButtonSizeHover'] ) && $attributes['navButtonSizeHover'] !== '' ) {
            $css_rules[] = "{$selector} .post-feed-nav .ts-icon-btn:hover { width: {$attributes['navButtonSizeHover']}px; height: {$attributes['navButtonSizeHover']}px; }";
        }
        if ( isset( $attributes['navButtonSizeHover_tablet'] ) && $attributes['navButtonSizeHover_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .post-feed-nav .ts-icon-btn:hover { width: {$attributes['navButtonSizeHover_tablet']}px; height: {$attributes['navButtonSizeHover_tablet']}px; }";
        }
        if ( isset( $attributes['navButtonSizeHover_mobile'] ) && $attributes['navButtonSizeHover_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .post-feed-nav .ts-icon-btn:hover { width: {$attributes['navButtonSizeHover_mobile']}px; height: {$attributes['navButtonSizeHover_mobile']}px; }";
        }

        // Button icon size (Hover)
        if ( isset( $attributes['navButtonIconSizeHover'] ) && $attributes['navButtonIconSizeHover'] !== '' ) {
            $css_rules[] = "{$selector} .post-feed-nav .ts-icon-btn:hover i { font-size: {$attributes['navButtonIconSizeHover']}px; }";
            $css_rules[] = "{$selector} .post-feed-nav .ts-icon-btn:hover svg { width: {$attributes['navButtonIconSizeHover']}px; height: {$attributes['navButtonIconSizeHover']}px; }";
        }
        if ( isset( $attributes['navButtonIconSizeHover_tablet'] ) && $attributes['navButtonIconSizeHover_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .post-feed-nav .ts-icon-btn:hover i { font-size: {$attributes['navButtonIconSizeHover_tablet']}px; }";
            $tablet_rules[] = "{$selector} .post-feed-nav .ts-icon-btn:hover svg { width: {$attributes['navButtonIconSizeHover_tablet']}px; height: {$attributes['navButtonIconSizeHover_tablet']}px; }";
        }
        if ( isset( $attributes['navButtonIconSizeHover_mobile'] ) && $attributes['navButtonIconSizeHover_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .post-feed-nav .ts-icon-btn:hover i { font-size: {$attributes['navButtonIconSizeHover_mobile']}px; }";
            $mobile_rules[] = "{$selector} .post-feed-nav .ts-icon-btn:hover svg { width: {$attributes['navButtonIconSizeHover_mobile']}px; height: {$attributes['navButtonIconSizeHover_mobile']}px; }";
        }

        // Button icon color (Hover)
        if ( ! empty( $attributes['navButtonIconColorHover'] ) ) {
            $css_rules[] = "{$selector} .post-feed-nav .ts-icon-btn:hover i { color: {$attributes['navButtonIconColorHover']}; }";
            $css_rules[] = "{$selector} .post-feed-nav .ts-icon-btn:hover svg { fill: {$attributes['navButtonIconColorHover']}; }";
        }

        // Button background color (Hover)
        if ( ! empty( $attributes['navButtonBackgroundHover'] ) ) {
            $css_rules[] = "{$selector} .post-feed-nav .ts-icon-btn:hover { background-color: {$attributes['navButtonBackgroundHover']}; }";
        }

        // Button border color (Hover)
        if ( ! empty( $attributes['navBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .post-feed-nav .ts-icon-btn:hover { border-color: {$attributes['navBorderColorHover']}; }";
        }

        // ============================================
        // COMBINE ALL RULES
        // ============================================

        $final_css = '';
        if ( ! empty( $css_rules ) ) {
            $final_css .= implode( "\n", $css_rules );
        }
        if ( ! empty( $tablet_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::TABLET_BREAKPOINT . "px) {\n" . implode( "\n", $tablet_rules ) . "\n}";
        }
        if ( ! empty( $mobile_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::MOBILE_BREAKPOINT . "px) {\n" . implode( "\n", $mobile_rules ) . "\n}";
        }

        return $final_css;
    }

    /**
     * Generate CSS for Image Block
     *
     * Sections: Alignment, Dimensions, Caption, Border/Radius, Box Shadow, Filters/Opacity
     *
     * @param array  $attributes Block attributes from Gutenberg
     * @param string $block_id   Block ID for scoped selector
     * @return string Generated CSS
     */
    public static function generate_image_css( $attributes, $block_id ) {
        if ( empty( $block_id ) ) {
            return '';
        }

        $css_rules = [];
        $tablet_rules = [];
        $mobile_rules = [];

        $selector = '.voxel-fse-image-wrapper-' . $block_id;

        // ============================================
        // 1. ALIGNMENT (Wrapper)
        // ============================================
        if ( ! empty( $attributes['imageAlign'] ) ) {
            $css_rules[] = "{$selector} { text-align: {$attributes['imageAlign']}; }";
        }
        if ( ! empty( $attributes['imageAlign_tablet'] ) ) {
            $tablet_rules[] = "{$selector} { text-align: {$attributes['imageAlign_tablet']}; }";
        }
        if ( ! empty( $attributes['imageAlign_mobile'] ) ) {
            $mobile_rules[] = "{$selector} { text-align: {$attributes['imageAlign_mobile']}; }";
        }

        // ============================================
        // 2. DIMENSIONS (Image)
        // ============================================

        // Width
        if ( isset( $attributes['width'] ) && $attributes['width'] !== '' ) {
            $unit = $attributes['widthUnit'] ?? 'px';
            $css_rules[] = "{$selector} img { width: {$attributes['width']}{$unit}; }";
        }
        if ( isset( $attributes['width_tablet'] ) && $attributes['width_tablet'] !== '' ) {
            $unit = $attributes['widthUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} img { width: {$attributes['width_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['width_mobile'] ) && $attributes['width_mobile'] !== '' ) {
            $unit = $attributes['widthUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} img { width: {$attributes['width_mobile']}{$unit}; }";
        }

        // Custom Size (overrides responsive width/height if set)
        if ( ! empty( $attributes['imageSize'] ) && $attributes['imageSize'] === 'custom' ) {
            if ( ! empty( $attributes['customWidth'] ) ) {
                $css_rules[] = "{$selector} img { width: {$attributes['customWidth']}px; }";
            } else {
                $css_rules[] = "{$selector} img { width: auto; }";
            }

            if ( ! empty( $attributes['customHeight'] ) ) {
                $css_rules[] = "{$selector} img { height: {$attributes['customHeight']}px; }";
            } else {
                $css_rules[] = "{$selector} img { height: auto; }";
            }
        }

        // Max Width
        if ( isset( $attributes['maxWidth'] ) && $attributes['maxWidth'] !== '' ) {
            $unit = $attributes['maxWidthUnit'] ?? 'px';
            $css_rules[] = "{$selector} img { max-width: {$attributes['maxWidth']}{$unit}; }";
        }
        if ( isset( $attributes['maxWidth_tablet'] ) && $attributes['maxWidth_tablet'] !== '' ) {
            $unit = $attributes['maxWidthUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} img { max-width: {$attributes['maxWidth_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['maxWidth_mobile'] ) && $attributes['maxWidth_mobile'] !== '' ) {
            $unit = $attributes['maxWidthUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} img { max-width: {$attributes['maxWidth_mobile']}{$unit}; }";
        }

        // Height
        if ( isset( $attributes['height'] ) && $attributes['height'] !== '' ) {
            $unit = $attributes['heightUnit'] ?? 'px';
            $css_rules[] = "{$selector} img { height: {$attributes['height']}{$unit}; }";
        }
        if ( isset( $attributes['height_tablet'] ) && $attributes['height_tablet'] !== '' ) {
            $unit = $attributes['heightUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} img { height: {$attributes['height_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['height_mobile'] ) && $attributes['height_mobile'] !== '' ) {
            $unit = $attributes['heightUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} img { height: {$attributes['height_mobile']}{$unit}; }";
        }

        // Object Fit (Responsive)
        if ( ! empty( $attributes['objectFit'] ) ) {
            $css_rules[] = "{$selector} img { object-fit: {$attributes['objectFit']}; }";
        }
        if ( ! empty( $attributes['objectFit_tablet'] ) ) {
            $tablet_rules[] = "{$selector} img { object-fit: {$attributes['objectFit_tablet']}; }";
        }
        if ( ! empty( $attributes['objectFit_mobile'] ) ) {
            $mobile_rules[] = "{$selector} img { object-fit: {$attributes['objectFit_mobile']}; }";
        }

        // Object Position (Responsive)
        if ( ! empty( $attributes['objectPosition'] ) ) {
            $css_rules[] = "{$selector} img { object-position: {$attributes['objectPosition']}; }";
        }
        if ( ! empty( $attributes['objectPosition_tablet'] ) ) {
            $tablet_rules[] = "{$selector} img { object-position: {$attributes['objectPosition_tablet']}; }";
        }
        if ( ! empty( $attributes['objectPosition_mobile'] ) ) {
            $mobile_rules[] = "{$selector} img { object-position: {$attributes['objectPosition_mobile']}; }";
        }

        // ============================================
        // 3. CAPTION ALIGNMENT
        // ============================================
        if ( ! empty( $attributes['captionAlign'] ) ) {
            $css_rules[] = "{$selector} figcaption { text-align: {$attributes['captionAlign']}; }";
        }
        if ( ! empty( $attributes['captionAlign_tablet'] ) ) {
            $tablet_rules[] = "{$selector} figcaption { text-align: {$attributes['captionAlign_tablet']}; }";
        }
        if ( ! empty( $attributes['captionAlign_mobile'] ) ) {
            $mobile_rules[] = "{$selector} figcaption { text-align: {$attributes['captionAlign_mobile']}; }";
        }

        // ============================================
        // 4. BORDER & RADIUS
        // ============================================
        if ( ! empty( $attributes['imageBorder'] ) ) {
            $border = $attributes['imageBorder'];

            // Border Type
            if ( ! empty( $border['borderType'] ) && $border['borderType'] !== 'none' ) {
                $css_rules[] = "{$selector} img { border-style: {$border['borderType']}; }";

                // Width
                if ( ! empty( $border['borderWidth'] ) ) {
                    $border_css = self::generate_border_width_css( $border['borderWidth'] );
                    if ( $border_css ) {
                        $css_rules[] = "{$selector} img { border-width: {$border_css}; }";
                    }
                }

                // Color
                if ( ! empty( $border['borderColor'] ) ) {
                    $css_rules[] = "{$selector} img { border-color: {$border['borderColor']}; }";
                }
            }

            // Radius (Standard)
            if ( ! empty( $border['borderRadius'] ) ) {
                $radius_css = self::generate_dimensions_css( $border['borderRadius'] );
                if ( $radius_css ) {
                    $css_rules[] = "{$selector} img { border-radius: {$radius_css}; }";
                }
            }

            // Radius (Responsive)
            if ( ! empty( $border['borderRadius_tablet'] ) ) {
                $radius_css = self::generate_dimensions_css( $border['borderRadius_tablet'] );
                if ( $radius_css ) {
                    $tablet_rules[] = "{$selector} img { border-radius: {$radius_css}; }";
                }
            }
            if ( ! empty( $border['borderRadius_mobile'] ) ) {
                $radius_css = self::generate_dimensions_css( $border['borderRadius_mobile'] );
                if ( $radius_css ) {
                    $mobile_rules[] = "{$selector} img { border-radius: {$radius_css}; }";
                }
            }
        }

        // ============================================
        // 5. BOX SHADOW
        // ============================================
        if ( ! empty( $attributes['imageBoxShadow'] ) ) {
            $shadow_css = self::generate_box_shadow_css( $attributes['imageBoxShadow'] );
            if ( $shadow_css ) {
                $css_rules[] = "{$selector} img { box-shadow: {$shadow_css}; }";
            }
        }

        // ============================================
        // 6. FILTERS & OPACITY
        // ============================================

        // Opacity
        if ( isset( $attributes['imageOpacity'] ) && $attributes['imageOpacity'] !== '' ) {
            $css_rules[] = "{$selector} img { opacity: {$attributes['imageOpacity']}; }";
        }

        // CSS Filters
        if ( ! empty( $attributes['imageCssFilters'] ) ) {
            $filters = $attributes['imageCssFilters'];
            $filter_parts = [];

            if ( isset( $filters['blur'] ) && $filters['blur'] !== '' ) {
                $filter_parts[] = "blur({$filters['blur']}px)";
            }
            if ( isset( $filters['brightness'] ) && $filters['brightness'] !== '' ) {
                $filter_parts[] = "brightness({$filters['brightness']}%)";
            }
            if ( isset( $filters['contrast'] ) && $filters['contrast'] !== '' ) {
                $filter_parts[] = "contrast({$filters['contrast']}%)";
            }
            if ( isset( $filters['saturation'] ) && $filters['saturation'] !== '' ) {
                $filter_parts[] = "saturate({$filters['saturation']}%)";
            }
            if ( isset( $filters['hue'] ) && $filters['hue'] !== '' ) {
                $filter_parts[] = "hue-rotate({$filters['hue']}deg)";
            }

            if ( ! empty( $filter_parts ) ) {
                $css_rules[] = "{$selector} img { filter: " . implode( ' ', $filter_parts ) . "; }";
            }
        }

        // Transition
        if ( isset( $attributes['imageTransitionDuration'] ) && $attributes['imageTransitionDuration'] !== '' ) {
            $css_rules[] = "{$selector} img { transition-duration: {$attributes['imageTransitionDuration']}s; }";
        }

        // ============================================
        // COMBINE ALL RULES
        // ============================================

        $final_css = '';
        if ( ! empty( $css_rules ) ) {
            $final_css .= implode( "\n", $css_rules );
        }
        if ( ! empty( $tablet_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::TABLET_BREAKPOINT . "px) {\n" . implode( "\n", $tablet_rules ) . "\n}";
        }
        if ( ! empty( $mobile_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::MOBILE_BREAKPOINT . "px) {\n" . implode( "\n", $mobile_rules ) . "\n}";
        }

        return $final_css;
    }

    /**
     * Generate CSS for Advanced List block
     *
     * Comprehensive CSS generation covering:
     * - Layout (CSS Grid with responsive columns)
     * - List items (padding, height, border, radius, box shadow, typography, colors)
     * - Icon containers (background, size, border, radius, box shadow)
     * - Icons (size, color)
     * - Hover states (all of the above)
     * - Active states (all of the above)
     * - Tooltips (position, typography, colors, border radius)
     *
     * @param array  $attributes Block attributes
     * @param string $block_id   Block identifier
     * @return string Generated CSS
     */
    public static function generate_advanced_list_css( $attributes, $block_id ) {
        if ( empty( $block_id ) ) {
            return '';
        }

        $selector = '.voxel-fse-advanced-list-' . $block_id;
        $css_rules = [];
        $tablet_rules = [];
        $mobile_rules = [];

        // Helper: Parse dimension (convert empty/null to 0)
        $parse_dimension = function( $val ) {
            if ( $val === null || $val === '' ) {
                return 0;
            }
            return is_numeric( $val ) ? (int) $val : $val;
        };

        // Helper: Check if box shadow has values
        $has_box_shadow = function( $shadow ) {
            if ( empty( $shadow ) || ! is_array( $shadow ) ) {
                return false;
            }
            return ! empty( $shadow['horizontal'] ) || ! empty( $shadow['vertical'] ) || ! empty( $shadow['blur'] ) || ! empty( $shadow['spread'] );
        };

        // Helper: Generate box shadow CSS
        $generate_box_shadow = function( $shadow ) {
            if ( empty( $shadow ) || ! is_array( $shadow ) ) {
                return '';
            }
            $position = ! empty( $shadow['position'] ) && $shadow['position'] === 'inset' ? 'inset ' : '';
            $horizontal = $shadow['horizontal'] ?? 0;
            $vertical = $shadow['vertical'] ?? 0;
            $blur = $shadow['blur'] ?? 0;
            $spread = $shadow['spread'] ?? 0;
            $color = $shadow['color'] ?? 'rgba(0,0,0,0.5)';
            return "{$position}{$horizontal}px {$vertical}px {$blur}px {$spread}px {$color}";
        };

        // Helper: Check if typography has values
        $has_typography = function( $typo ) {
            return ! empty( $typo ) && is_array( $typo ) && (
                ! empty( $typo['fontFamily'] ) ||
                ! empty( $typo['fontSize'] ) ||
                ! empty( $typo['fontWeight'] ) ||
                ! empty( $typo['lineHeight'] ) ||
                ! empty( $typo['letterSpacing'] ) ||
                ! empty( $typo['textTransform'] )
            );
        };

        // Helper: Generate typography CSS
        $generate_typography = function( $typo ) {
            if ( empty( $typo ) || ! is_array( $typo ) ) {
                return '';
            }
            $parts = [];
            if ( ! empty( $typo['fontFamily'] ) ) {
                $parts[] = "font-family: {$typo['fontFamily']}";
            }
            if ( isset( $typo['fontSize'] ) && $typo['fontSize'] !== '' ) {
                $unit = $typo['fontSizeUnit'] ?? 'px';
                $parts[] = "font-size: {$typo['fontSize']}{$unit}";
            }
            if ( ! empty( $typo['fontWeight'] ) ) {
                $parts[] = "font-weight: {$typo['fontWeight']}";
            }
            if ( isset( $typo['lineHeight'] ) && $typo['lineHeight'] !== '' ) {
                $unit = $typo['lineHeightUnit'] ?? '';
                $parts[] = "line-height: {$typo['lineHeight']}{$unit}";
            }
            if ( isset( $typo['letterSpacing'] ) && $typo['letterSpacing'] !== '' ) {
                $unit = $typo['letterSpacingUnit'] ?? 'px';
                $parts[] = "letter-spacing: {$typo['letterSpacing']}{$unit}";
            }
            if ( ! empty( $typo['textTransform'] ) ) {
                $parts[] = "text-transform: {$typo['textTransform']}";
            }
            return implode( '; ', $parts );
        };

        // ============================================
        // LAYOUT - CSS GRID
        // ============================================

        // List Layout Mode
        if ( ! empty( $attributes['listLayout'] ) && $attributes['listLayout'] === 'css-grid' ) {
            $css_rules[] = "{$selector} { display: grid; }";

            // Grid columns (responsive)
            if ( isset( $attributes['gridColumns'] ) && $attributes['gridColumns'] !== '' ) {
                $cols = (int) $attributes['gridColumns'];
                $css_rules[] = "{$selector} { grid-template-columns: repeat({$cols}, minmax(0, 1fr)); }";
            }
            if ( isset( $attributes['gridColumns_tablet'] ) && $attributes['gridColumns_tablet'] !== '' ) {
                $cols = (int) $attributes['gridColumns_tablet'];
                $tablet_rules[] = "{$selector} { grid-template-columns: repeat({$cols}, minmax(0, 1fr)); }";
            }
            if ( isset( $attributes['gridColumns_mobile'] ) && $attributes['gridColumns_mobile'] !== '' ) {
                $cols = (int) $attributes['gridColumns_mobile'];
                $mobile_rules[] = "{$selector} { grid-template-columns: repeat({$cols}, minmax(0, 1fr)); }";
            }

            // Item gap (responsive)
            if ( isset( $attributes['itemGap'] ) && $attributes['itemGap'] !== '' ) {
                $unit = $attributes['itemGapUnit'] ?? 'px';
                $css_rules[] = "{$selector} { gap: {$attributes['itemGap']}{$unit}; }";
            }
            if ( isset( $attributes['itemGap_tablet'] ) && $attributes['itemGap_tablet'] !== '' ) {
                $unit = $attributes['itemGapUnit'] ?? 'px';
                $tablet_rules[] = "{$selector} { gap: {$attributes['itemGap_tablet']}{$unit}; }";
            }
            if ( isset( $attributes['itemGap_mobile'] ) && $attributes['itemGap_mobile'] !== '' ) {
                $unit = $attributes['itemGapUnit'] ?? 'px';
                $mobile_rules[] = "{$selector} { gap: {$attributes['itemGap_mobile']}{$unit}; }";
            }
        }

        // Custom item width (responsive)
        if ( isset( $attributes['customItemWidth'] ) && $attributes['customItemWidth'] !== '' ) {
            $unit = $attributes['customItemWidthUnit'] ?? 'px';
            $css_rules[] = "{$selector} .ts-action { width: {$attributes['customItemWidth']}{$unit}; flex-basis: {$attributes['customItemWidth']}{$unit}; }";
        }
        if ( isset( $attributes['customItemWidth_tablet'] ) && $attributes['customItemWidth_tablet'] !== '' ) {
            $unit = $attributes['customItemWidthUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .ts-action { width: {$attributes['customItemWidth_tablet']}{$unit}; flex-basis: {$attributes['customItemWidth_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['customItemWidth_mobile'] ) && $attributes['customItemWidth_mobile'] !== '' ) {
            $unit = $attributes['customItemWidthUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .ts-action { width: {$attributes['customItemWidth_mobile']}{$unit}; flex-basis: {$attributes['customItemWidth_mobile']}{$unit}; }";
        }

        // Justify content (responsive)
        if ( ! empty( $attributes['itemJustifyContent'] ) ) {
            $css_rules[] = "{$selector} .ts-action-con { justify-content: {$attributes['itemJustifyContent']}; }";
        }
        if ( ! empty( $attributes['itemJustifyContent_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-action-con { justify-content: {$attributes['itemJustifyContent_tablet']}; }";
        }
        if ( ! empty( $attributes['itemJustifyContent_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-action-con { justify-content: {$attributes['itemJustifyContent_mobile']}; }";
        }

        // ============================================
        // LIST ITEM STYLES
        // ============================================

        // Item padding (responsive)
        if ( ! empty( $attributes['itemPadding'] ) ) {
            $padding = $attributes['itemPadding'];
            if ( is_array( $padding ) && ( ! empty( $padding['top'] ) || ! empty( $padding['right'] ) || ! empty( $padding['bottom'] ) || ! empty( $padding['left'] ) ) ) {
                $unit = $attributes['itemPaddingUnit'] ?? 'px';
                $top = $parse_dimension( $padding['top'] ?? 0 );
                $right = $parse_dimension( $padding['right'] ?? 0 );
                $bottom = $parse_dimension( $padding['bottom'] ?? 0 );
                $left = $parse_dimension( $padding['left'] ?? 0 );
                $css_rules[] = "{$selector} .ts-action-con { padding: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
            }
        }
        if ( ! empty( $attributes['itemPadding_tablet'] ) ) {
            $padding = $attributes['itemPadding_tablet'];
            if ( is_array( $padding ) ) {
                $unit = $attributes['itemPaddingUnit'] ?? 'px';
                $top = $parse_dimension( $padding['top'] ?? 0 );
                $right = $parse_dimension( $padding['right'] ?? 0 );
                $bottom = $parse_dimension( $padding['bottom'] ?? 0 );
                $left = $parse_dimension( $padding['left'] ?? 0 );
                $tablet_rules[] = "{$selector} .ts-action-con { padding: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
            }
        }
        if ( ! empty( $attributes['itemPadding_mobile'] ) ) {
            $padding = $attributes['itemPadding_mobile'];
            if ( is_array( $padding ) ) {
                $unit = $attributes['itemPaddingUnit'] ?? 'px';
                $top = $parse_dimension( $padding['top'] ?? 0 );
                $right = $parse_dimension( $padding['right'] ?? 0 );
                $bottom = $parse_dimension( $padding['bottom'] ?? 0 );
                $left = $parse_dimension( $padding['left'] ?? 0 );
                $mobile_rules[] = "{$selector} .ts-action-con { padding: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
            }
        }

        // Item height (responsive)
        if ( isset( $attributes['itemHeight'] ) && $attributes['itemHeight'] !== '' ) {
            $unit = $attributes['itemHeightUnit'] ?? 'px';
            $css_rules[] = "{$selector} .ts-action-con { min-height: {$attributes['itemHeight']}{$unit}; }";
        }
        if ( isset( $attributes['itemHeight_tablet'] ) && $attributes['itemHeight_tablet'] !== '' ) {
            $unit = $attributes['itemHeightUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .ts-action-con { min-height: {$attributes['itemHeight_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['itemHeight_mobile'] ) && $attributes['itemHeight_mobile'] !== '' ) {
            $unit = $attributes['itemHeightUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .ts-action-con { min-height: {$attributes['itemHeight_mobile']}{$unit}; }";
        }

        // Border type
        if ( ! empty( $attributes['itemBorderType'] ) && $attributes['itemBorderType'] !== 'none' ) {
            $css_rules[] = "{$selector} .ts-action-con { border-style: {$attributes['itemBorderType']}; }";

            // Border width
            if ( ! empty( $attributes['itemBorderWidth'] ) && is_array( $attributes['itemBorderWidth'] ) ) {
                $unit = $attributes['itemBorderWidthUnit'] ?? 'px';
                $border_width = $attributes['itemBorderWidth'];
                $top = $parse_dimension( $border_width['top'] ?? 1 );
                $right = $parse_dimension( $border_width['right'] ?? 1 );
                $bottom = $parse_dimension( $border_width['bottom'] ?? 1 );
                $left = $parse_dimension( $border_width['left'] ?? 1 );
                $css_rules[] = "{$selector} .ts-action-con { border-width: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
            }

            // Border color
            if ( ! empty( $attributes['itemBorderColor'] ) ) {
                $css_rules[] = "{$selector} .ts-action-con { border-color: {$attributes['itemBorderColor']}; }";
            }
        }

        // Border radius (responsive)
        if ( isset( $attributes['itemBorderRadius'] ) && $attributes['itemBorderRadius'] !== '' ) {
            $unit = $attributes['itemBorderRadiusUnit'] ?? 'px';
            $css_rules[] = "{$selector} .ts-action-con { border-radius: {$attributes['itemBorderRadius']}{$unit}; }";
        }
        if ( isset( $attributes['itemBorderRadius_tablet'] ) && $attributes['itemBorderRadius_tablet'] !== '' ) {
            $unit = $attributes['itemBorderRadiusUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .ts-action-con { border-radius: {$attributes['itemBorderRadius_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['itemBorderRadius_mobile'] ) && $attributes['itemBorderRadius_mobile'] !== '' ) {
            $unit = $attributes['itemBorderRadiusUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .ts-action-con { border-radius: {$attributes['itemBorderRadius_mobile']}{$unit}; }";
        }

        // Box shadow
        if ( $has_box_shadow( $attributes['itemBoxShadow'] ?? null ) ) {
            $shadow = $generate_box_shadow( $attributes['itemBoxShadow'] );
            if ( $shadow ) {
                $css_rules[] = "{$selector} .ts-action-con { box-shadow: {$shadow}; }";
            }
        }

        // Typography
        if ( $has_typography( $attributes['itemTypography'] ?? null ) ) {
            $typo = $generate_typography( $attributes['itemTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-action-con { {$typo}; }";
            }
        }

        // Text color
        if ( ! empty( $attributes['itemTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-action-con { color: {$attributes['itemTextColor']}; }";
        }

        // Background color
        if ( ! empty( $attributes['itemBackgroundColor'] ) ) {
            $css_rules[] = "{$selector} .ts-action-con { background-color: {$attributes['itemBackgroundColor']}; }";
        }

        // Icon on top (flex-direction)
        if ( ! empty( $attributes['iconOnTop'] ) ) {
            $css_rules[] = "{$selector} .ts-action-con { flex-direction: column; }";
        }

        // ============================================
        // ICON CONTAINER STYLES
        // ============================================

        // Icon container background
        if ( ! empty( $attributes['iconContainerBackground'] ) ) {
            $css_rules[] = "{$selector} .ts-action-icon { background-color: {$attributes['iconContainerBackground']}; }";
        }

        // Icon container size (responsive)
        if ( isset( $attributes['iconContainerSize'] ) && $attributes['iconContainerSize'] !== '' ) {
            $unit = $attributes['iconContainerSizeUnit'] ?? 'px';
            $css_rules[] = "{$selector} .ts-action-icon { width: {$attributes['iconContainerSize']}{$unit}; height: {$attributes['iconContainerSize']}{$unit}; min-width: {$attributes['iconContainerSize']}{$unit}; }";
        }
        if ( isset( $attributes['iconContainerSize_tablet'] ) && $attributes['iconContainerSize_tablet'] !== '' ) {
            $unit = $attributes['iconContainerSizeUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .ts-action-icon { width: {$attributes['iconContainerSize_tablet']}{$unit}; height: {$attributes['iconContainerSize_tablet']}{$unit}; min-width: {$attributes['iconContainerSize_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['iconContainerSize_mobile'] ) && $attributes['iconContainerSize_mobile'] !== '' ) {
            $unit = $attributes['iconContainerSizeUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .ts-action-icon { width: {$attributes['iconContainerSize_mobile']}{$unit}; height: {$attributes['iconContainerSize_mobile']}{$unit}; min-width: {$attributes['iconContainerSize_mobile']}{$unit}; }";
        }

        // Icon container border type
        if ( ! empty( $attributes['iconContainerBorderType'] ) && $attributes['iconContainerBorderType'] !== 'none' ) {
            $css_rules[] = "{$selector} .ts-action-icon { border-style: {$attributes['iconContainerBorderType']}; }";

            // Border width
            if ( ! empty( $attributes['iconContainerBorderWidth'] ) && is_array( $attributes['iconContainerBorderWidth'] ) ) {
                $unit = $attributes['iconContainerBorderWidthUnit'] ?? 'px';
                $border_width = $attributes['iconContainerBorderWidth'];
                $top = $parse_dimension( $border_width['top'] ?? 1 );
                $right = $parse_dimension( $border_width['right'] ?? 1 );
                $bottom = $parse_dimension( $border_width['bottom'] ?? 1 );
                $left = $parse_dimension( $border_width['left'] ?? 1 );
                $css_rules[] = "{$selector} .ts-action-icon { border-width: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
            }

            // Border color
            if ( ! empty( $attributes['iconContainerBorderColor'] ) ) {
                $css_rules[] = "{$selector} .ts-action-icon { border-color: {$attributes['iconContainerBorderColor']}; }";
            }
        }

        // Icon container border radius (responsive)
        if ( isset( $attributes['iconContainerBorderRadius'] ) && $attributes['iconContainerBorderRadius'] !== '' ) {
            $unit = $attributes['iconContainerBorderRadiusUnit'] ?? 'px';
            $css_rules[] = "{$selector} .ts-action-icon { border-radius: {$attributes['iconContainerBorderRadius']}{$unit}; }";
        }
        if ( isset( $attributes['iconContainerBorderRadius_tablet'] ) && $attributes['iconContainerBorderRadius_tablet'] !== '' ) {
            $unit = $attributes['iconContainerBorderRadiusUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .ts-action-icon { border-radius: {$attributes['iconContainerBorderRadius_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['iconContainerBorderRadius_mobile'] ) && $attributes['iconContainerBorderRadius_mobile'] !== '' ) {
            $unit = $attributes['iconContainerBorderRadiusUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .ts-action-icon { border-radius: {$attributes['iconContainerBorderRadius_mobile']}{$unit}; }";
        }

        // Icon container box shadow
        if ( $has_box_shadow( $attributes['iconContainerBoxShadow'] ?? null ) ) {
            $shadow = $generate_box_shadow( $attributes['iconContainerBoxShadow'] );
            if ( $shadow ) {
                $css_rules[] = "{$selector} .ts-action-icon { box-shadow: {$shadow}; }";
            }
        }

        // Icon/text spacing (responsive)
        if ( isset( $attributes['iconTextSpacing'] ) && $attributes['iconTextSpacing'] !== '' ) {
            $unit = $attributes['iconTextSpacingUnit'] ?? 'px';
            $css_rules[] = "{$selector} .ts-action-con { gap: {$attributes['iconTextSpacing']}{$unit}; }";
        }
        if ( isset( $attributes['iconTextSpacing_tablet'] ) && $attributes['iconTextSpacing_tablet'] !== '' ) {
            $unit = $attributes['iconTextSpacingUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .ts-action-con { gap: {$attributes['iconTextSpacing_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['iconTextSpacing_mobile'] ) && $attributes['iconTextSpacing_mobile'] !== '' ) {
            $unit = $attributes['iconTextSpacingUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .ts-action-con { gap: {$attributes['iconTextSpacing_mobile']}{$unit}; }";
        }

        // ============================================
        // ICON STYLES
        // ============================================

        // Icon size (responsive)
        if ( isset( $attributes['iconSize'] ) && $attributes['iconSize'] !== '' ) {
            $unit = $attributes['iconSizeUnit'] ?? 'px';
            $css_rules[] = "{$selector} .ts-action-icon svg, {$selector} .ts-action-icon i { width: {$attributes['iconSize']}{$unit}; height: {$attributes['iconSize']}{$unit}; font-size: {$attributes['iconSize']}{$unit}; }";
            $css_rules[] = "{$selector} .ts-action-icon { --ts-icon-size: {$attributes['iconSize']}{$unit}; }";
        }
        if ( isset( $attributes['iconSize_tablet'] ) && $attributes['iconSize_tablet'] !== '' ) {
            $unit = $attributes['iconSizeUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .ts-action-icon svg, {$selector} .ts-action-icon i { width: {$attributes['iconSize_tablet']}{$unit}; height: {$attributes['iconSize_tablet']}{$unit}; font-size: {$attributes['iconSize_tablet']}{$unit}; }";
            $tablet_rules[] = "{$selector} .ts-action-icon { --ts-icon-size: {$attributes['iconSize_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['iconSize_mobile'] ) && $attributes['iconSize_mobile'] !== '' ) {
            $unit = $attributes['iconSizeUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .ts-action-icon svg, {$selector} .ts-action-icon i { width: {$attributes['iconSize_mobile']}{$unit}; height: {$attributes['iconSize_mobile']}{$unit}; font-size: {$attributes['iconSize_mobile']}{$unit}; }";
            $mobile_rules[] = "{$selector} .ts-action-icon { --ts-icon-size: {$attributes['iconSize_mobile']}{$unit}; }";
        }

        // Icon color
        if ( ! empty( $attributes['iconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-action-icon svg, {$selector} .ts-action-icon i { color: {$attributes['iconColor']}; fill: {$attributes['iconColor']}; }";
            $css_rules[] = "{$selector} .ts-action-icon { --ts-icon-color: {$attributes['iconColor']}; }";
        }

        // ============================================
        // HOVER STATE
        // ============================================

        if ( ! empty( $attributes['itemBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-action-con:hover { border-color: {$attributes['itemBorderColorHover']}; }";
        }

        if ( $has_box_shadow( $attributes['itemBoxShadowHover'] ?? null ) ) {
            $shadow = $generate_box_shadow( $attributes['itemBoxShadowHover'] );
            if ( $shadow ) {
                $css_rules[] = "{$selector} .ts-action-con:hover { box-shadow: {$shadow}; }";
            }
        }

        if ( ! empty( $attributes['itemBackgroundColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-action-con:hover { background-color: {$attributes['itemBackgroundColorHover']}; }";
        }

        if ( ! empty( $attributes['itemTextColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-action-con:hover { color: {$attributes['itemTextColorHover']}; }";
        }

        if ( ! empty( $attributes['iconContainerBackgroundHover'] ) ) {
            $css_rules[] = "{$selector} .ts-action-con:hover .ts-action-icon { background-color: {$attributes['iconContainerBackgroundHover']}; }";
        }

        if ( ! empty( $attributes['iconContainerBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-action-con:hover .ts-action-icon { border-color: {$attributes['iconContainerBorderColorHover']}; }";
        }

        if ( ! empty( $attributes['iconColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-action-con:hover .ts-action-icon svg, {$selector} .ts-action-con:hover .ts-action-icon i { color: {$attributes['iconColorHover']}; fill: {$attributes['iconColorHover']}; }";
            $css_rules[] = "{$selector} .ts-action-con:hover .ts-action-icon { --ts-icon-color: {$attributes['iconColorHover']}; }";
        }

        // ============================================
        // ACTIVE STATE
        // ============================================

        if ( ! empty( $attributes['itemBorderColorActive'] ) ) {
            $css_rules[] = "{$selector} .ts-action-con.active { border-color: {$attributes['itemBorderColorActive']}; }";
        }

        if ( $has_box_shadow( $attributes['itemBoxShadowActive'] ?? null ) ) {
            $shadow = $generate_box_shadow( $attributes['itemBoxShadowActive'] );
            if ( $shadow ) {
                $css_rules[] = "{$selector} .ts-action-con.active { box-shadow: {$shadow}; }";
            }
        }

        if ( ! empty( $attributes['itemBackgroundColorActive'] ) ) {
            $css_rules[] = "{$selector} .ts-action-con.active { background-color: {$attributes['itemBackgroundColorActive']}; }";
        }

        if ( ! empty( $attributes['itemTextColorActive'] ) ) {
            $css_rules[] = "{$selector} .ts-action-con.active { color: {$attributes['itemTextColorActive']}; }";
        }

        if ( ! empty( $attributes['iconContainerBackgroundActive'] ) ) {
            $css_rules[] = "{$selector} .ts-action-con.active .ts-action-icon { background-color: {$attributes['iconContainerBackgroundActive']}; }";
        }

        if ( ! empty( $attributes['iconContainerBorderColorActive'] ) ) {
            $css_rules[] = "{$selector} .ts-action-con.active .ts-action-icon { border-color: {$attributes['iconContainerBorderColorActive']}; }";
        }

        if ( ! empty( $attributes['iconColorActive'] ) ) {
            $css_rules[] = "{$selector} .ts-action-con.active .ts-action-icon svg, {$selector} .ts-action-con.active .ts-action-icon i { color: {$attributes['iconColorActive']}; fill: {$attributes['iconColorActive']}; }";
            $css_rules[] = "{$selector} .ts-action-con.active .ts-action-icon { --ts-icon-color: {$attributes['iconColorActive']}; }";
        }

        // ============================================
        // TOOLTIP STYLES
        // ============================================

        if ( ! empty( $attributes['tooltipBottom'] ) ) {
            $css_rules[] = "{$selector} .ts-action[data-tooltip]::after { top: auto; bottom: 100%; transform: translateX(-50%); }";
        }

        if ( ! empty( $attributes['tooltipTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-action[data-tooltip]::after { color: {$attributes['tooltipTextColor']}; }";
        }

        if ( $has_typography( $attributes['tooltipTypography'] ?? null ) ) {
            $typo = $generate_typography( $attributes['tooltipTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-action[data-tooltip]::after { {$typo}; }";
            }
        }

        if ( ! empty( $attributes['tooltipBackgroundColor'] ) ) {
            $css_rules[] = "{$selector} .ts-action[data-tooltip]::after { background-color: {$attributes['tooltipBackgroundColor']}; }";
        }

        if ( isset( $attributes['tooltipBorderRadius'] ) && $attributes['tooltipBorderRadius'] !== '' ) {
            $unit = $attributes['tooltipBorderRadiusUnit'] ?? 'px';
            $css_rules[] = "{$selector} .ts-action[data-tooltip]::after { border-radius: {$attributes['tooltipBorderRadius']}{$unit}; }";
        }
        if ( isset( $attributes['tooltipBorderRadius_tablet'] ) && $attributes['tooltipBorderRadius_tablet'] !== '' ) {
            $unit = $attributes['tooltipBorderRadiusUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} .ts-action[data-tooltip]::after { border-radius: {$attributes['tooltipBorderRadius_tablet']}{$unit}; }";
        }
        if ( isset( $attributes['tooltipBorderRadius_mobile'] ) && $attributes['tooltipBorderRadius_mobile'] !== '' ) {
            $unit = $attributes['tooltipBorderRadiusUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} .ts-action[data-tooltip]::after { border-radius: {$attributes['tooltipBorderRadius_mobile']}{$unit}; }";
        }

        // Margin (Deprecated but supported)
        if ( ! empty( $attributes['itemMargin'] ) ) {
            $margin = $attributes['itemMargin'];
            if ( is_array( $margin ) && ( ! empty( $margin['top'] ) || ! empty( $margin['right'] ) || ! empty( $margin['bottom'] ) || ! empty( $margin['left'] ) ) ) {
                $unit = $attributes['itemMarginUnit'] ?? 'px';
                $top = $parse_dimension( $margin['top'] ?? 0 );
                $right = $parse_dimension( $margin['right'] ?? 0 );
                $bottom = $parse_dimension( $margin['bottom'] ?? 0 );
                $left = $parse_dimension( $margin['left'] ?? 0 );
                $css_rules[] = "{$selector} .ts-action { margin: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
            }
        }
        if ( ! empty( $attributes['itemMargin_tablet'] ) ) {
            $margin = $attributes['itemMargin_tablet'];
            if ( is_array( $margin ) ) {
                $unit = $attributes['itemMarginUnit'] ?? 'px';
                $top = $parse_dimension( $margin['top'] ?? 0 );
                $right = $parse_dimension( $margin['right'] ?? 0 );
                $bottom = $parse_dimension( $margin['bottom'] ?? 0 );
                $left = $parse_dimension( $margin['left'] ?? 0 );
                $tablet_rules[] = "{$selector} .ts-action { margin: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
            }
        }
        if ( ! empty( $attributes['itemMargin_mobile'] ) ) {
            $margin = $attributes['itemMargin_mobile'];
            if ( is_array( $margin ) ) {
                $unit = $attributes['itemMarginUnit'] ?? 'px';
                $top = $parse_dimension( $margin['top'] ?? 0 );
                $right = $parse_dimension( $margin['right'] ?? 0 );
                $bottom = $parse_dimension( $margin['bottom'] ?? 0 );
                $left = $parse_dimension( $margin['left'] ?? 0 );
                $mobile_rules[] = "{$selector} .ts-action { margin: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
            }
        }

        // ============================================
        // COMBINE ALL RULES
        // ============================================

        $final_css = '';
        if ( ! empty( $css_rules ) ) {
            $final_css .= implode( "\n", $css_rules );
        }
        if ( ! empty( $tablet_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::TABLET_BREAKPOINT . "px) {\n" . implode( "\n", $tablet_rules ) . "\n}";
        }
        if ( ! empty( $mobile_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::MOBILE_BREAKPOINT . "px) {\n" . implode( "\n", $mobile_rules ) . "\n}";
        }

        return $final_css;
    }

    /**
     * Generate CSS for Current Plan block
     *
     * Comprehensive styling for membership plan panels including:
     * - Panel accordion (spacing, border, radius, background, shadow)
     * - Panel head (padding, icon, typography, separator)
     * - Panel pricing (alignment, price/period typography & colors)
     * - Panel body (spacing, gap, typography, links)
     * - Panel buttons (gap)
     * - Secondary button (typography, radius, colors, icons, padding, hover states)
     *
     * Source: current-plan/styles.ts (478 lines)
     * Evidence: themes/voxel/app/modules/paid-memberships/widgets/current-plan-widget.php:L105-L774
     *
     * @param array  $attributes Block attributes
     * @param string $block_id   Block identifier
     * @return string Generated CSS
     */
    public static function generate_current_plan_css( $attributes, $block_id ) {
        if ( empty( $block_id ) ) {
            return '';
        }

        $selector = '.voxel-fse-current-plan-' . $block_id;
        $css_rules = [];
        $tablet_rules = [];
        $mobile_rules = [];

        // ============================================
        // PANEL ACCORDION
        // ============================================

        // Panel gap (panelsSpacing)
        if ( isset( $attributes['panelsSpacing'] ) && $attributes['panelsSpacing'] !== '' ) {
            $css_rules[] = "{$selector} { display: flex; flex-direction: column; grid-gap: {$attributes['panelsSpacing']}px; }";
        }
        if ( isset( $attributes['panelsSpacing_tablet'] ) && $attributes['panelsSpacing_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} { display: flex; flex-direction: column; grid-gap: {$attributes['panelsSpacing_tablet']}px; }";
        }
        if ( isset( $attributes['panelsSpacing_mobile'] ) && $attributes['panelsSpacing_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} { display: flex; flex-direction: column; grid-gap: {$attributes['panelsSpacing_mobile']}px; }";
        }

        // Panel border
        if ( ! empty( $attributes['panelBorder'] ) ) {
            $border = $attributes['panelBorder'];
            if ( ! empty( $border['borderType'] ) && $border['borderType'] !== 'none' && $border['borderType'] !== '' ) {
                $css_rules[] = "{$selector} .ts-panel { border-style: {$border['borderType']}; }";

                // Border width
                if ( ! empty( $border['borderWidth'] ) ) {
                    $dims_css = self::generate_dimensions_css( $border['borderWidth'], 'border-width' );
                    if ( $dims_css ) {
                        $css_rules[] = "{$selector} .ts-panel { {$dims_css} }";
                    }
                }

                // Border color
                if ( ! empty( $border['borderColor'] ) ) {
                    $css_rules[] = "{$selector} .ts-panel { border-color: {$border['borderColor']}; }";
                }
            }
        }

        // Panel border radius
        if ( isset( $attributes['panelRadius'] ) && $attributes['panelRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-panel { border-radius: {$attributes['panelRadius']}px; }";
        }
        if ( isset( $attributes['panelRadius_tablet'] ) && $attributes['panelRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-panel { border-radius: {$attributes['panelRadius_tablet']}px; }";
        }
        if ( isset( $attributes['panelRadius_mobile'] ) && $attributes['panelRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-panel { border-radius: {$attributes['panelRadius_mobile']}px; }";
        }

        // Panel background
        if ( ! empty( $attributes['panelBg'] ) ) {
            $css_rules[] = "{$selector} .ts-panel { background-color: {$attributes['panelBg']}; }";
        }

        // Panel box shadow
        if ( ! empty( $attributes['panelShadow'] ) ) {
            $shadow_css = self::generate_box_shadow_css( $attributes['panelShadow'] );
            if ( $shadow_css ) {
                $css_rules[] = "{$selector} .ts-panel { box-shadow: {$shadow_css}; }";
            }
        }

        // ============================================
        // PANEL HEAD
        // ============================================

        // Head padding
        if ( ! empty( $attributes['headPadding'] ) ) {
            $padding_css = self::generate_dimensions_css( $attributes['headPadding'], 'padding' );
            if ( $padding_css ) {
                $css_rules[] = "{$selector} .ac-head { {$padding_css} }";
            }
        }

        // Head icon size
        if ( isset( $attributes['headIcoSize'] ) && $attributes['headIcoSize'] !== '' ) {
            $css_rules[] = "{$selector} .ac-head > i { font-size: {$attributes['headIcoSize']}px; }";
            $css_rules[] = "{$selector} .ac-head > svg { width: {$attributes['headIcoSize']}px; height: {$attributes['headIcoSize']}px; }";
        }
        if ( isset( $attributes['headIcoSize_tablet'] ) && $attributes['headIcoSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ac-head > i { font-size: {$attributes['headIcoSize_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ac-head > svg { width: {$attributes['headIcoSize_tablet']}px; height: {$attributes['headIcoSize_tablet']}px; }";
        }
        if ( isset( $attributes['headIcoSize_mobile'] ) && $attributes['headIcoSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ac-head > i { font-size: {$attributes['headIcoSize_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ac-head > svg { width: {$attributes['headIcoSize_mobile']}px; height: {$attributes['headIcoSize_mobile']}px; }";
        }

        // Head icon margin
        if ( isset( $attributes['headIcoMargin'] ) && $attributes['headIcoMargin'] !== '' ) {
            $css_rules[] = "{$selector} .ac-head > i { margin-right: {$attributes['headIcoMargin']}px; }";
            $css_rules[] = "{$selector} .ac-head > svg { margin-right: {$attributes['headIcoMargin']}px; }";
        }
        if ( isset( $attributes['headIcoMargin_tablet'] ) && $attributes['headIcoMargin_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ac-head > i { margin-right: {$attributes['headIcoMargin_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ac-head > svg { margin-right: {$attributes['headIcoMargin_tablet']}px; }";
        }
        if ( isset( $attributes['headIcoMargin_mobile'] ) && $attributes['headIcoMargin_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ac-head > i { margin-right: {$attributes['headIcoMargin_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ac-head > svg { margin-right: {$attributes['headIcoMargin_mobile']}px; }";
        }

        // Head icon color
        if ( ! empty( $attributes['headIcoCol'] ) ) {
            $css_rules[] = "{$selector} .ac-head > i { color: {$attributes['headIcoCol']}; }";
            $css_rules[] = "{$selector} .ac-head > svg { fill: {$attributes['headIcoCol']}; }";
        }

        // Head typography
        if ( ! empty( $attributes['headTypo'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['headTypo'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ac-head b { {$typo_css} }";
            }
        }

        // Head text color
        if ( ! empty( $attributes['headTypoCol'] ) ) {
            $css_rules[] = "{$selector} .ac-head b { color: {$attributes['headTypoCol']}; }";
        }

        // Head separator color
        if ( ! empty( $attributes['headBorderCol'] ) ) {
            $css_rules[] = "{$selector} .ac-head { border-bottom-color: {$attributes['headBorderCol']}; }";
        }

        // ============================================
        // PANEL PRICING
        // ============================================

        // Price alignment
        if ( ! empty( $attributes['priceAlign'] ) ) {
            $css_rules[] = "{$selector} .ac-plan-pricing { justify-content: {$attributes['priceAlign']}; }";
        }

        // Price typography
        if ( ! empty( $attributes['priceTypo'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['priceTypo'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ac-plan-price { {$typo_css} }";
            }
        }

        // Price color
        if ( ! empty( $attributes['priceCol'] ) ) {
            $css_rules[] = "{$selector} .ac-plan-price { color: {$attributes['priceCol']}; }";
        }

        // Period typography
        if ( ! empty( $attributes['periodTypo'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['periodTypo'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ac-price-period { {$typo_css} }";
            }
        }

        // Period color
        if ( ! empty( $attributes['periodCol'] ) ) {
            $css_rules[] = "{$selector} .ac-price-period { color: {$attributes['periodCol']}; }";
        }

        // ============================================
        // PANEL BODY
        // ============================================

        // Body spacing (padding)
        if ( isset( $attributes['panelSpacing'] ) && $attributes['panelSpacing'] !== '' ) {
            $css_rules[] = "{$selector} .ac-body { padding: {$attributes['panelSpacing']}px; }";
        }
        if ( isset( $attributes['panelSpacing_tablet'] ) && $attributes['panelSpacing_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ac-body { padding: {$attributes['panelSpacing_tablet']}px; }";
        }
        if ( isset( $attributes['panelSpacing_mobile'] ) && $attributes['panelSpacing_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ac-body { padding: {$attributes['panelSpacing_mobile']}px; }";
        }

        // Body content gap
        if ( isset( $attributes['panelGap'] ) && $attributes['panelGap'] !== '' ) {
            $css_rules[] = "{$selector} .ac-body { display: flex; flex-direction: column; grid-gap: {$attributes['panelGap']}px; }";
        }
        if ( isset( $attributes['panelGap_tablet'] ) && $attributes['panelGap_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ac-body { display: flex; flex-direction: column; grid-gap: {$attributes['panelGap_tablet']}px; }";
        }
        if ( isset( $attributes['panelGap_mobile'] ) && $attributes['panelGap_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ac-body { display: flex; flex-direction: column; grid-gap: {$attributes['panelGap_mobile']}px; }";
        }

        // Body text alignment
        if ( ! empty( $attributes['textAlign'] ) ) {
            $css_rules[] = "{$selector} .ac-body { text-align: {$attributes['textAlign']}; }";
        }

        // Body typography
        if ( ! empty( $attributes['bodyTypo'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['bodyTypo'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ac-body p { {$typo_css} }";
            }
        }

        // Body text color
        if ( ! empty( $attributes['bodyTypoCol'] ) ) {
            $css_rules[] = "{$selector} .ac-body p { color: {$attributes['bodyTypoCol']}; }";
        }

        // Body link typography
        if ( ! empty( $attributes['bodyTypoLink'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['bodyTypoLink'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ac-body a { {$typo_css} }";
            }
        }

        // Body link color
        if ( ! empty( $attributes['bodyColLink'] ) ) {
            $css_rules[] = "{$selector} .ac-body a { color: {$attributes['bodyColLink']}; }";
        }

        // ============================================
        // PANEL BUTTONS
        // ============================================

        // Panel buttons gap
        if ( isset( $attributes['panelButtonsGap'] ) && $attributes['panelButtonsGap'] !== '' ) {
            $css_rules[] = "{$selector} .ac-bottom ul { grid-gap: {$attributes['panelButtonsGap']}px; }";
        }
        if ( isset( $attributes['panelButtonsGap_tablet'] ) && $attributes['panelButtonsGap_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ac-bottom ul { grid-gap: {$attributes['panelButtonsGap_tablet']}px; }";
        }
        if ( isset( $attributes['panelButtonsGap_mobile'] ) && $attributes['panelButtonsGap_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ac-bottom ul { grid-gap: {$attributes['panelButtonsGap_mobile']}px; }";
        }

        // ============================================
        // SECONDARY BUTTON - NORMAL STATE
        // ============================================

        // Button typography
        if ( ! empty( $attributes['scndBtnTypo'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['scndBtnTypo'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ts-btn-1 { {$typo_css} }";
            }
        }

        // Button border radius
        if ( isset( $attributes['scndBtnRadius'] ) && $attributes['scndBtnRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-btn-1 { border-radius: {$attributes['scndBtnRadius']}px; }";
        }
        if ( isset( $attributes['scndBtnRadius_tablet'] ) && $attributes['scndBtnRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-btn-1 { border-radius: {$attributes['scndBtnRadius_tablet']}px; }";
        }
        if ( isset( $attributes['scndBtnRadius_mobile'] ) && $attributes['scndBtnRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-btn-1 { border-radius: {$attributes['scndBtnRadius_mobile']}px; }";
        }

        // Button text color
        if ( ! empty( $attributes['scndBtnC'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-1 { color: {$attributes['scndBtnC']}; }";
        }

        // Button padding
        if ( ! empty( $attributes['scndBtnPadding'] ) ) {
            $padding_css = self::generate_dimensions_css( $attributes['scndBtnPadding'], 'padding' );
            if ( $padding_css ) {
                $css_rules[] = "{$selector} .ts-btn-1 { {$padding_css} }";
            }
        }

        // Button height
        if ( isset( $attributes['scndBtnHeight'] ) && $attributes['scndBtnHeight'] !== '' ) {
            $css_rules[] = "{$selector} .ts-btn-1 { min-height: {$attributes['scndBtnHeight']}px; }";
        }
        if ( isset( $attributes['scndBtnHeight_tablet'] ) && $attributes['scndBtnHeight_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-btn-1 { min-height: {$attributes['scndBtnHeight_tablet']}px; }";
        }
        if ( isset( $attributes['scndBtnHeight_mobile'] ) && $attributes['scndBtnHeight_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-btn-1 { min-height: {$attributes['scndBtnHeight_mobile']}px; }";
        }

        // Button background
        if ( ! empty( $attributes['scndBtnBg'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-1 { background-color: {$attributes['scndBtnBg']}; }";
        }

        // Button border
        if ( ! empty( $attributes['scndBtnBorder'] ) ) {
            $border = $attributes['scndBtnBorder'];
            if ( ! empty( $border['borderType'] ) && $border['borderType'] !== 'none' && $border['borderType'] !== '' ) {
                $css_rules[] = "{$selector} .ts-btn-1 { border-style: {$border['borderType']}; }";

                if ( ! empty( $border['borderWidth'] ) ) {
                    $dims_css = self::generate_dimensions_css( $border['borderWidth'], 'border-width' );
                    if ( $dims_css ) {
                        $css_rules[] = "{$selector} .ts-btn-1 { {$dims_css} }";
                    }
                }

                if ( ! empty( $border['borderColor'] ) ) {
                    $css_rules[] = "{$selector} .ts-btn-1 { border-color: {$border['borderColor']}; }";
                }
            }
        }

        // Button icon size
        if ( isset( $attributes['scndBtnIconSize'] ) && $attributes['scndBtnIconSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-btn-1 i { font-size: {$attributes['scndBtnIconSize']}px; }";
            $css_rules[] = "{$selector} .ts-btn-1 svg { width: {$attributes['scndBtnIconSize']}px; height: {$attributes['scndBtnIconSize']}px; }";
        }
        if ( isset( $attributes['scndBtnIconSize_tablet'] ) && $attributes['scndBtnIconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-btn-1 i { font-size: {$attributes['scndBtnIconSize_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-btn-1 svg { width: {$attributes['scndBtnIconSize_tablet']}px; height: {$attributes['scndBtnIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['scndBtnIconSize_mobile'] ) && $attributes['scndBtnIconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-btn-1 i { font-size: {$attributes['scndBtnIconSize_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-btn-1 svg { width: {$attributes['scndBtnIconSize_mobile']}px; height: {$attributes['scndBtnIconSize_mobile']}px; }";
        }

        // Button icon spacing
        if ( isset( $attributes['scndBtnIconPad'] ) && $attributes['scndBtnIconPad'] !== '' ) {
            $css_rules[] = "{$selector} .ts-btn-1 { grid-gap: {$attributes['scndBtnIconPad']}px; }";
        }
        if ( isset( $attributes['scndBtnIconPad_tablet'] ) && $attributes['scndBtnIconPad_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-btn-1 { grid-gap: {$attributes['scndBtnIconPad_tablet']}px; }";
        }
        if ( isset( $attributes['scndBtnIconPad_mobile'] ) && $attributes['scndBtnIconPad_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-btn-1 { grid-gap: {$attributes['scndBtnIconPad_mobile']}px; }";
        }

        // Button icon color
        if ( ! empty( $attributes['scndBtnIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-1 i { color: {$attributes['scndBtnIconColor']}; }";
            $css_rules[] = "{$selector} .ts-btn-1 svg { fill: {$attributes['scndBtnIconColor']}; }";
        }

        // ============================================
        // SECONDARY BUTTON - HOVER STATE
        // ============================================

        // Button text color (hover)
        if ( ! empty( $attributes['scndBtnCH'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-1:hover { color: {$attributes['scndBtnCH']}; }";
        }

        // Button background (hover)
        if ( ! empty( $attributes['scndBtnBgH'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-1:hover { background-color: {$attributes['scndBtnBgH']}; }";
        }

        // Button border color (hover)
        if ( ! empty( $attributes['scndBtnBorderH'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-1:hover { border-color: {$attributes['scndBtnBorderH']}; }";
        }

        // Button icon color (hover)
        if ( ! empty( $attributes['scndBtnIconColorH'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-1:hover i { color: {$attributes['scndBtnIconColorH']}; }";
            $css_rules[] = "{$selector} .ts-btn-1:hover svg { fill: {$attributes['scndBtnIconColorH']}; }";
        }

        // ============================================
        // COMBINE ALL RULES
        // ============================================

        $final_css = '';
        if ( ! empty( $css_rules ) ) {
            $final_css .= implode( "\n", $css_rules );
        }
        if ( ! empty( $tablet_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::TABLET_BREAKPOINT . "px) {\n" . implode( "\n", $tablet_rules ) . "\n}";
        }
        if ( ! empty( $mobile_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::MOBILE_BREAKPOINT . "px) {\n" . implode( "\n", $mobile_rules ) . "\n}";
        }

        return $final_css;
    }

    /**
     * Generate CSS for Product Price block
     *
     * Simple responsive CSS variables for price colors and strikethrough styling.
     * Desktop styles are applied via inline CSS variables in the block's edit.tsx.
     * This method only handles tablet and mobile responsive overrides.
     *
     * @param array  $attributes Block attributes
     * @param string $block_id   Block identifier
     * @return string Generated CSS
     */
    public static function generate_product_price_css( $attributes, $block_id ) {
        if ( empty( $block_id ) ) {
            return '';
        }

        $selector = '.vxfse-product-price-' . $block_id;
        $tablet_rules = [];
        $mobile_rules = [];

        // ============================================
        // TABLET BREAKPOINT (@media max-width: 1024px)
        // ============================================

        // Price color (tablet)
        if ( ! empty( $attributes['priceColor_tablet'] ) ) {
            $tablet_rules[] = "{$selector} { --vx-price-color: {$attributes['priceColor_tablet']}; }";
        }

        // Strikethrough text color (tablet)
        if ( ! empty( $attributes['strikethroughTextColor_tablet'] ) ) {
            $tablet_rules[] = "{$selector} { --vx-strike-text-color: {$attributes['strikethroughTextColor_tablet']}; }";
        }

        // Strikethrough line color (tablet)
        if ( ! empty( $attributes['strikethroughLineColor_tablet'] ) ) {
            $tablet_rules[] = "{$selector} { --vx-strike-line-color: {$attributes['strikethroughLineColor_tablet']}; }";
        }

        // Strikethrough width (tablet)
        if ( isset( $attributes['strikethroughWidth_tablet'] ) && $attributes['strikethroughWidth_tablet'] !== '' ) {
            $unit = $attributes['strikethroughWidthUnit'] ?? 'px';
            $tablet_rules[] = "{$selector} { --vx-strike-width: {$attributes['strikethroughWidth_tablet']}{$unit}; }";
        }

        // Out of stock color (tablet)
        if ( ! empty( $attributes['outOfStockColor_tablet'] ) ) {
            $tablet_rules[] = "{$selector} { --vx-nostock-color: {$attributes['outOfStockColor_tablet']}; }";
        }

        // ============================================
        // MOBILE BREAKPOINT (@media max-width: 767px)
        // ============================================

        // Price color (mobile)
        if ( ! empty( $attributes['priceColor_mobile'] ) ) {
            $mobile_rules[] = "{$selector} { --vx-price-color: {$attributes['priceColor_mobile']}; }";
        }

        // Strikethrough text color (mobile)
        if ( ! empty( $attributes['strikethroughTextColor_mobile'] ) ) {
            $mobile_rules[] = "{$selector} { --vx-strike-text-color: {$attributes['strikethroughTextColor_mobile']}; }";
        }

        // Strikethrough line color (mobile)
        if ( ! empty( $attributes['strikethroughLineColor_mobile'] ) ) {
            $mobile_rules[] = "{$selector} { --vx-strike-line-color: {$attributes['strikethroughLineColor_mobile']}; }";
        }

        // Strikethrough width (mobile)
        if ( isset( $attributes['strikethroughWidth_mobile'] ) && $attributes['strikethroughWidth_mobile'] !== '' ) {
            $unit = $attributes['strikethroughWidthUnit'] ?? 'px';
            $mobile_rules[] = "{$selector} { --vx-strike-width: {$attributes['strikethroughWidth_mobile']}{$unit}; }";
        }

        // Out of stock color (mobile)
        if ( ! empty( $attributes['outOfStockColor_mobile'] ) ) {
            $mobile_rules[] = "{$selector} { --vx-nostock-color: {$attributes['outOfStockColor_mobile']}; }";
        }

        // ============================================
        // COMBINE CSS WITH MEDIA QUERIES
        // ============================================

        $final_css = '';
        if ( ! empty( $tablet_rules ) ) {
            $final_css .= "@media (max-width: " . self::TABLET_BREAKPOINT . "px) {\n" . implode( "\n", $tablet_rules ) . "\n}";
        }
        if ( ! empty( $mobile_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::MOBILE_BREAKPOINT . "px) {\n" . implode( "\n", $mobile_rules ) . "\n}";
        }

        return $final_css;
    }

    /**
     * Generate CSS for Current Role block
     *
     * Similar to Current Plan but simpler - for role/membership display.
     * Includes: panel accordion, panel head, panel body, panel buttons, secondary button.
     *
     * Source: current-role/styles.ts (417 lines)
     * Evidence: themes/voxel/app/widgets/current-role.php
     *
     * @param array  $attributes Block attributes
     * @param string $block_id   Block identifier
     * @return string Generated CSS
     */
    public static function generate_current_role_css( $attributes, $block_id ) {
        if ( empty( $block_id ) ) {
            return '';
        }

        $selector = '.voxel-fse-current-role-' . $block_id;
        $css_rules = [];
        $tablet_rules = [];
        $mobile_rules = [];

        // Panel border (using BorderGroupControl format)
        if ( ! empty( $attributes['panelBorder'] ) ) {
            $border = $attributes['panelBorder'];
            if ( ! empty( $border['borderType'] ) && $border['borderType'] !== 'none' && $border['borderType'] !== '' ) {
                $css_rules[] = "{$selector} .ts-panel { border-style: {$border['borderType']}; }";
                if ( ! empty( $border['borderWidth'] ) ) {
                    $dims_css = self::generate_dimensions_css( $border['borderWidth'], 'border-width' );
                    if ( $dims_css ) $css_rules[] = "{$selector} .ts-panel { {$dims_css} }";
                }
                if ( ! empty( $border['borderColor'] ) ) {
                    $css_rules[] = "{$selector} .ts-panel { border-color: {$border['borderColor']}; }";
                }
            }
        }

        // Panel radius
        if ( isset( $attributes['panelRadius'] ) && $attributes['panelRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-panel { border-radius: {$attributes['panelRadius']}px; }";
        }
        if ( isset( $attributes['panelRadius_tablet'] ) && $attributes['panelRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-panel { border-radius: {$attributes['panelRadius_tablet']}px; }";
        }
        if ( isset( $attributes['panelRadius_mobile'] ) && $attributes['panelRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-panel { border-radius: {$attributes['panelRadius_mobile']}px; }";
        }

        // Panel background & shadow
        if ( ! empty( $attributes['panelBg'] ) ) {
            $css_rules[] = "{$selector} .ts-panel { background-color: {$attributes['panelBg']}; }";
        }
        if ( ! empty( $attributes['panelShadow'] ) ) {
            $shadow = self::generate_box_shadow_css( $attributes['panelShadow'] );
            if ( $shadow ) $css_rules[] = "{$selector} .ts-panel { box-shadow: {$shadow}; }";
        }

        // Head padding
        if ( ! empty( $attributes['headPadding'] ) ) {
            $padding = self::generate_dimensions_css( $attributes['headPadding'], 'padding' );
            if ( $padding ) $css_rules[] = "{$selector} .ac-head { {$padding} }";
        }

        // Head icon size & margin
        if ( isset( $attributes['headIcoSize'] ) && $attributes['headIcoSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-panel .ac-head i { font-size: {$attributes['headIcoSize']}px; }";
            $css_rules[] = "{$selector} .ts-panel .ac-head svg { width: {$attributes['headIcoSize']}px; height: {$attributes['headIcoSize']}px; }";
        }
        if ( isset( $attributes['headIcoSize_tablet'] ) && $attributes['headIcoSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-panel .ac-head i { font-size: {$attributes['headIcoSize_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-panel .ac-head svg { width: {$attributes['headIcoSize_tablet']}px; height: {$attributes['headIcoSize_tablet']}px; }";
        }
        if ( isset( $attributes['headIcoSize_mobile'] ) && $attributes['headIcoSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-panel .ac-head i { font-size: {$attributes['headIcoSize_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-panel .ac-head svg { width: {$attributes['headIcoSize_mobile']}px; height: {$attributes['headIcoSize_mobile']}px; }";
        }
        if ( isset( $attributes['headIcoMargin'] ) && $attributes['headIcoMargin'] !== '' ) {
            $css_rules[] = "{$selector} .ts-panel .ac-head i { margin-right: {$attributes['headIcoMargin']}px; }";
            $css_rules[] = "{$selector} .ts-panel .ac-head svg { margin-right: {$attributes['headIcoMargin']}px; }";
        }
        if ( isset( $attributes['headIcoMargin_tablet'] ) && $attributes['headIcoMargin_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-panel .ac-head i { margin-right: {$attributes['headIcoMargin_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-panel .ac-head svg { margin-right: {$attributes['headIcoMargin_tablet']}px; }";
        }
        if ( isset( $attributes['headIcoMargin_mobile'] ) && $attributes['headIcoMargin_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-panel .ac-head i { margin-right: {$attributes['headIcoMargin_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-panel .ac-head svg { margin-right: {$attributes['headIcoMargin_mobile']}px; }";
        }

        // Head icon color & typography
        if ( ! empty( $attributes['headIcoCol'] ) ) {
            $css_rules[] = "{$selector} .ts-panel .ac-head i { color: {$attributes['headIcoCol']}; }";
            $css_rules[] = "{$selector} .ts-panel .ac-head svg { fill: {$attributes['headIcoCol']}; }";
        }
        if ( ! empty( $attributes['headTypo'] ) ) {
            $typo = self::generate_typography_css( $attributes['headTypo'] );
            if ( $typo ) $css_rules[] = "{$selector} .ts-panel .ac-head b { {$typo} }";
        }
        if ( ! empty( $attributes['headTypoCol'] ) ) {
            $css_rules[] = "{$selector} .ts-panel .ac-head b { color: {$attributes['headTypoCol']}; }";
        }
        if ( ! empty( $attributes['headBorderCol'] ) ) {
            $css_rules[] = "{$selector} .ts-panel .ac-head { border-color: {$attributes['headBorderCol']}; }";
        }

        // Body spacing & gap
        if ( isset( $attributes['panelSpacing'] ) && $attributes['panelSpacing'] !== '' ) {
            $css_rules[] = "{$selector} .ac-body { padding: {$attributes['panelSpacing']}px; }";
        }
        if ( isset( $attributes['panelSpacing_tablet'] ) && $attributes['panelSpacing_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ac-body { padding: {$attributes['panelSpacing_tablet']}px; }";
        }
        if ( isset( $attributes['panelSpacing_mobile'] ) && $attributes['panelSpacing_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ac-body { padding: {$attributes['panelSpacing_mobile']}px; }";
        }
        if ( isset( $attributes['panelGap'] ) && $attributes['panelGap'] !== '' ) {
            $css_rules[] = "{$selector} .ac-body { display: flex; flex-direction: column; grid-gap: {$attributes['panelGap']}px; }";
        }
        if ( isset( $attributes['panelGap_tablet'] ) && $attributes['panelGap_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ac-body { display: flex; flex-direction: column; grid-gap: {$attributes['panelGap_tablet']}px; }";
        }
        if ( isset( $attributes['panelGap_mobile'] ) && $attributes['panelGap_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ac-body { display: flex; flex-direction: column; grid-gap: {$attributes['panelGap_mobile']}px; }";
        }

        // Body typography
        if ( ! empty( $attributes['textAlign'] ) ) {
            $css_rules[] = "{$selector} .ac-body { text-align: {$attributes['textAlign']}; }";
        }
        if ( ! empty( $attributes['bodyTypo'] ) ) {
            $typo = self::generate_typography_css( $attributes['bodyTypo'] );
            if ( $typo ) $css_rules[] = "{$selector} .ts-panel .ac-body p { {$typo} }";
        }
        if ( ! empty( $attributes['bodyTypoCol'] ) ) {
            $css_rules[] = "{$selector} .ts-panel .ac-body p { color: {$attributes['bodyTypoCol']}; }";
        }

        // Panel buttons gap
        if ( isset( $attributes['panelButtonsGap'] ) && $attributes['panelButtonsGap'] !== '' ) {
            $css_rules[] = "{$selector} .current-plan-btn { grid-gap: {$attributes['panelButtonsGap']}px; }";
        }
        if ( isset( $attributes['panelButtonsGap_tablet'] ) && $attributes['panelButtonsGap_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .current-plan-btn { grid-gap: {$attributes['panelButtonsGap_tablet']}px; }";
        }
        if ( isset( $attributes['panelButtonsGap_mobile'] ) && $attributes['panelButtonsGap_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .current-plan-btn { grid-gap: {$attributes['panelButtonsGap_mobile']}px; }";
        }

        // Secondary button - normal
        if ( ! empty( $attributes['scndBtnTypo'] ) ) {
            $typo = self::generate_typography_css( $attributes['scndBtnTypo'] );
            if ( $typo ) $css_rules[] = "{$selector} .ts-btn-1 { {$typo} }";
        }
        if ( isset( $attributes['scndBtnRadius'] ) && $attributes['scndBtnRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-btn-1 { border-radius: {$attributes['scndBtnRadius']}px; }";
        }
        if ( isset( $attributes['scndBtnRadius_tablet'] ) && $attributes['scndBtnRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-btn-1 { border-radius: {$attributes['scndBtnRadius_tablet']}px; }";
        }
        if ( isset( $attributes['scndBtnRadius_mobile'] ) && $attributes['scndBtnRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-btn-1 { border-radius: {$attributes['scndBtnRadius_mobile']}px; }";
        }
        if ( ! empty( $attributes['scndBtnC'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-1 { color: {$attributes['scndBtnC']}; }";
        }
        if ( ! empty( $attributes['scndBtnPadding'] ) ) {
            $padding = self::generate_dimensions_css( $attributes['scndBtnPadding'], 'padding' );
            if ( $padding ) $css_rules[] = "{$selector} .ts-btn-1 { {$padding} }";
        }
        if ( isset( $attributes['scndBtnHeight'] ) && $attributes['scndBtnHeight'] !== '' ) {
            $css_rules[] = "{$selector} .ts-btn-1 { height: {$attributes['scndBtnHeight']}px; }";
        }
        if ( isset( $attributes['scndBtnHeight_tablet'] ) && $attributes['scndBtnHeight_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-btn-1 { height: {$attributes['scndBtnHeight_tablet']}px; }";
        }
        if ( isset( $attributes['scndBtnHeight_mobile'] ) && $attributes['scndBtnHeight_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-btn-1 { height: {$attributes['scndBtnHeight_mobile']}px; }";
        }
        if ( ! empty( $attributes['scndBtnBg'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-1 { background: {$attributes['scndBtnBg']}; }";
        }

        // Secondary button border
        if ( ! empty( $attributes['scndBtnBorder'] ) ) {
            $border = $attributes['scndBtnBorder'];
            if ( ! empty( $border['borderType'] ) && $border['borderType'] !== 'none' && $border['borderType'] !== '' ) {
                $css_rules[] = "{$selector} .ts-btn-1 { border-style: {$border['borderType']}; }";
                if ( ! empty( $border['borderWidth'] ) ) {
                    $dims_css = self::generate_dimensions_css( $border['borderWidth'], 'border-width' );
                    if ( $dims_css ) $css_rules[] = "{$selector} .ts-btn-1 { {$dims_css} }";
                }
                if ( ! empty( $border['borderColor'] ) ) {
                    $css_rules[] = "{$selector} .ts-btn-1 { border-color: {$border['borderColor']}; }";
                }
            }
        }

        // Secondary button icon
        if ( isset( $attributes['scndBtnIconSize'] ) && $attributes['scndBtnIconSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-btn-1 i { font-size: {$attributes['scndBtnIconSize']}px; }";
            $css_rules[] = "{$selector} .ts-btn-1 svg { width: {$attributes['scndBtnIconSize']}px; height: {$attributes['scndBtnIconSize']}px; }";
        }
        if ( isset( $attributes['scndBtnIconSize_tablet'] ) && $attributes['scndBtnIconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-btn-1 i { font-size: {$attributes['scndBtnIconSize_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-btn-1 svg { width: {$attributes['scndBtnIconSize_tablet']}px; height: {$attributes['scndBtnIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['scndBtnIconSize_mobile'] ) && $attributes['scndBtnIconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-btn-1 i { font-size: {$attributes['scndBtnIconSize_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-btn-1 svg { width: {$attributes['scndBtnIconSize_mobile']}px; height: {$attributes['scndBtnIconSize_mobile']}px; }";
        }
        if ( isset( $attributes['scndBtnIconPad'] ) && $attributes['scndBtnIconPad'] !== '' ) {
            $css_rules[] = "{$selector} .ts-btn-1 { grid-gap: {$attributes['scndBtnIconPad']}px; }";
        }
        if ( isset( $attributes['scndBtnIconPad_tablet'] ) && $attributes['scndBtnIconPad_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-btn-1 { grid-gap: {$attributes['scndBtnIconPad_tablet']}px; }";
        }
        if ( isset( $attributes['scndBtnIconPad_mobile'] ) && $attributes['scndBtnIconPad_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-btn-1 { grid-gap: {$attributes['scndBtnIconPad_mobile']}px; }";
        }
        if ( ! empty( $attributes['scndBtnIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-1 i { color: {$attributes['scndBtnIconColor']}; }";
            $css_rules[] = "{$selector} .ts-btn-1 svg { fill: {$attributes['scndBtnIconColor']}; }";
        }

        // Secondary button - hover states
        if ( ! empty( $attributes['scndBtnCH'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-1:hover { color: {$attributes['scndBtnCH']}; }";
        }
        if ( ! empty( $attributes['scndBtnBgH'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-1:hover { background: {$attributes['scndBtnBgH']}; }";
        }
        if ( ! empty( $attributes['scndBtnBorderH'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-1:hover { border-color: {$attributes['scndBtnBorderH']}; }";
        }
        if ( ! empty( $attributes['scndBtnIconColorH'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-1:hover i { color: {$attributes['scndBtnIconColorH']}; }";
            $css_rules[] = "{$selector} .ts-btn-1:hover svg { fill: {$attributes['scndBtnIconColorH']}; }";
        }

        // Combine CSS
        $final_css = '';
        if ( ! empty( $css_rules ) ) {
            $final_css .= implode( "\n", $css_rules );
        }
        if ( ! empty( $tablet_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::TABLET_BREAKPOINT . "px) {\n" . implode( "\n", $tablet_rules ) . "\n}";
        }
        if ( ! empty( $mobile_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::MOBILE_BREAKPOINT . "px) {\n" . implode( "\n", $mobile_rules ) . "\n}";
        }

        return $final_css;
    }

    /**
     * Generate CSS for Work Hours block
     *
     * Source: work-hours/styles.ts (493 lines)
     *
     * @param array  $attributes Block attributes
     * @param string $block_id   Block identifier
     * @return string Generated CSS
     */
    public static function generate_work_hours_css( $attributes, $block_id ) {
        if ( empty( $block_id ) ) {
            return '';
        }

        $selector = '.voxel-fse-work-hours-' . $block_id;
        $css_rules = [];
        $tablet_rules = [];
        $mobile_rules = [];

        // Border
        if ( ! empty( $attributes['borderType'] ) && $attributes['borderType'] !== 'none' ) {
            $css_rules[] = "{$selector} .ts-work-hours { border-style: {$attributes['borderType']}; }";
            if ( ! empty( $attributes['borderWidth'] ) ) {
                $dims_css = self::generate_dimensions_css( $attributes['borderWidth'], 'border-width' );
                if ( $dims_css ) $css_rules[] = "{$selector} .ts-work-hours { {$dims_css} }";
            }
            if ( ! empty( $attributes['borderColor'] ) ) {
                $css_rules[] = "{$selector} .ts-work-hours { border-color: {$attributes['borderColor']}; }";
            }
        }

        // Border radius (responsive)
        if ( isset( $attributes['borderRadius'] ) && $attributes['borderRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-work-hours { border-radius: {$attributes['borderRadius']}px; }";
        }
        if ( isset( $attributes['borderRadiusTablet'] ) && $attributes['borderRadiusTablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-work-hours { border-radius: {$attributes['borderRadiusTablet']}px; }";
        }
        if ( isset( $attributes['borderRadiusMobile'] ) && $attributes['borderRadiusMobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-work-hours { border-radius: {$attributes['borderRadiusMobile']}px; }";
        }

        // Box shadow
        if ( ! empty( $attributes['boxShadow'] ) ) {
            $shadow = self::generate_box_shadow_css( $attributes['boxShadow'] );
            if ( $shadow ) $css_rules[] = "{$selector} .ts-work-hours { box-shadow: {$shadow}; }";
        }

        // Top area - background (responsive)
        if ( ! empty( $attributes['topBg'] ) ) {
            $css_rules[] = "{$selector} .ts-hours-today { background-color: {$attributes['topBg']}; }";
        }
        if ( ! empty( $attributes['topBgTablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-hours-today { background-color: {$attributes['topBgTablet']}; }";
        }
        if ( ! empty( $attributes['topBgMobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-hours-today { background-color: {$attributes['topBgMobile']}; }";
        }

        // Top area - icon size (responsive)
        $unit = $attributes['topIconSizeUnit'] ?? 'px';
        if ( isset( $attributes['topIconSize'] ) && $attributes['topIconSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-open-status i { font-size: {$attributes['topIconSize']}{$unit}; }";
            $css_rules[] = "{$selector} .ts-open-status svg { width: {$attributes['topIconSize']}{$unit}; height: {$attributes['topIconSize']}{$unit}; }";
        }
        if ( isset( $attributes['topIconSizeTablet'] ) && $attributes['topIconSizeTablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-open-status i { font-size: {$attributes['topIconSizeTablet']}{$unit}; }";
            $tablet_rules[] = "{$selector} .ts-open-status svg { width: {$attributes['topIconSizeTablet']}{$unit}; height: {$attributes['topIconSizeTablet']}{$unit}; }";
        }
        if ( isset( $attributes['topIconSizeMobile'] ) && $attributes['topIconSizeMobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-open-status i { font-size: {$attributes['topIconSizeMobile']}{$unit}; }";
            $mobile_rules[] = "{$selector} .ts-open-status svg { width: {$attributes['topIconSizeMobile']}{$unit}; height: {$attributes['topIconSizeMobile']}{$unit}; }";
        }

        // Typography & colors
        if ( ! empty( $attributes['labelTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['labelTypography'] );
            if ( $typo ) $css_rules[] = "{$selector} .ts-open-status p { {$typo} }";
        }
        if ( ! empty( $attributes['labelColor'] ) ) {
            $css_rules[] = "{$selector} .ts-open-status p { color: {$attributes['labelColor']}; }";
        }
        if ( ! empty( $attributes['currentHoursTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['currentHoursTypography'] );
            if ( $typo ) $css_rules[] = "{$selector} .ts-hours-today .ts-current-period { {$typo} }";
        }
        if ( ! empty( $attributes['currentHoursColor'] ) ) {
            $css_rules[] = "{$selector} .ts-hours-today .ts-current-period { color: {$attributes['currentHoursColor']}; }";
        }

        // Body
        if ( ! empty( $attributes['bodyBg'] ) ) {
            $css_rules[] = "{$selector} .ts-work-hours-list ul { background-color: {$attributes['bodyBg']}; }";
        }
        if ( ! empty( $attributes['bodySeparatorColor'] ) ) {
            $css_rules[] = "{$selector} .ts-work-hours-list li { border-color: {$attributes['bodySeparatorColor']}; }";
        }
        if ( ! empty( $attributes['dayTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['dayTypography'] );
            if ( $typo ) $css_rules[] = "{$selector} .ts-work-hours-list li p { {$typo} }";
        }
        if ( ! empty( $attributes['dayColor'] ) ) {
            $css_rules[] = "{$selector} .ts-work-hours-list li p { color: {$attributes['dayColor']}; }";
        }
        if ( ! empty( $attributes['hoursTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['hoursTypography'] );
            if ( $typo ) $css_rules[] = "{$selector} .ts-work-hours-list li small { {$typo} }";
        }
        if ( ! empty( $attributes['hoursColor'] ) ) {
            $css_rules[] = "{$selector} .ts-work-hours-list li small { color: {$attributes['hoursColor']}; }";
        }

        // State-specific colors
        if ( ! empty( $attributes['openIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-open-status.open i { color: {$attributes['openIconColor']}; }";
            $css_rules[] = "{$selector} .ts-open-status.open svg { fill: {$attributes['openIconColor']}; }";
        }
        if ( ! empty( $attributes['openTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-open-status.open p { color: {$attributes['openTextColor']}; }";
        }
        if ( ! empty( $attributes['closedIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-open-status.closed i { color: {$attributes['closedIconColor']}; }";
            $css_rules[] = "{$selector} .ts-open-status.closed svg { fill: {$attributes['closedIconColor']}; }";
        }
        if ( ! empty( $attributes['closedTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-open-status.closed p { color: {$attributes['closedTextColor']}; }";
        }
        if ( ! empty( $attributes['appointmentIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-open-status.appt-only i { color: {$attributes['appointmentIconColor']}; }";
            $css_rules[] = "{$selector} .ts-open-status.appt-only svg { fill: {$attributes['appointmentIconColor']}; }";
        }
        if ( ! empty( $attributes['appointmentTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-open-status.appt-only p { color: {$attributes['appointmentTextColor']}; }";
        }
        if ( ! empty( $attributes['notAvailableIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-open-status.not-available i { color: {$attributes['notAvailableIconColor']}; }";
            $css_rules[] = "{$selector} .ts-open-status.not-available svg { fill: {$attributes['notAvailableIconColor']}; }";
        }
        if ( ! empty( $attributes['notAvailableTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-open-status.not-available p { color: {$attributes['notAvailableTextColor']}; }";
        }

        // Accordion button
        if ( isset( $attributes['accordionButtonSize'] ) && $attributes['accordionButtonSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-icon-btn.ts-smaller { width: {$attributes['accordionButtonSize']}px; height: {$attributes['accordionButtonSize']}px; }";
        }
        if ( ! empty( $attributes['accordionButtonColor'] ) ) {
            $css_rules[] = "{$selector} .ts-icon-btn.ts-smaller i { color: {$attributes['accordionButtonColor']}; }";
            $css_rules[] = "{$selector} .ts-icon-btn.ts-smaller svg { fill: {$attributes['accordionButtonColor']}; }";
        }
        if ( isset( $attributes['accordionButtonIconSize'] ) && $attributes['accordionButtonIconSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-icon-btn.ts-smaller i { font-size: {$attributes['accordionButtonIconSize']}px; }";
            $css_rules[] = "{$selector} .ts-icon-btn.ts-smaller svg { width: {$attributes['accordionButtonIconSize']}px; height: {$attributes['accordionButtonIconSize']}px; }";
        }
        if ( ! empty( $attributes['accordionButtonBg'] ) ) {
            $css_rules[] = "{$selector} .ts-icon-btn.ts-smaller { background-color: {$attributes['accordionButtonBg']}; }";
        }
        if ( ! empty( $attributes['accordionButtonBorderType'] ) && $attributes['accordionButtonBorderType'] !== 'none' ) {
            $css_rules[] = "{$selector} .ts-icon-btn.ts-smaller { border-style: {$attributes['accordionButtonBorderType']}; }";
            if ( ! empty( $attributes['accordionButtonBorderWidth'] ) ) {
                $dims_css = self::generate_dimensions_css( $attributes['accordionButtonBorderWidth'], 'border-width' );
                if ( $dims_css ) $css_rules[] = "{$selector} .ts-icon-btn.ts-smaller { {$dims_css} }";
            }
            if ( ! empty( $attributes['accordionButtonBorderColor'] ) ) {
                $css_rules[] = "{$selector} .ts-icon-btn.ts-smaller { border-color: {$attributes['accordionButtonBorderColor']}; }";
            }
        }
        if ( isset( $attributes['accordionButtonBorderRadius'] ) && $attributes['accordionButtonBorderRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-icon-btn.ts-smaller { border-radius: {$attributes['accordionButtonBorderRadius']}px; }";
        }

        // Accordion button - hover
        if ( ! empty( $attributes['accordionButtonColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-icon-btn.ts-smaller:hover i { color: {$attributes['accordionButtonColorHover']}; }";
            $css_rules[] = "{$selector} .ts-icon-btn.ts-smaller:hover svg { fill: {$attributes['accordionButtonColorHover']}; }";
        }
        if ( ! empty( $attributes['accordionButtonBgHover'] ) ) {
            $css_rules[] = "{$selector} .ts-icon-btn.ts-smaller:hover { background-color: {$attributes['accordionButtonBgHover']}; }";
        }
        if ( ! empty( $attributes['accordionButtonBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-icon-btn.ts-smaller:hover { border-color: {$attributes['accordionButtonBorderColorHover']}; }";
        }

        // Combine CSS
        $final_css = '';
        if ( ! empty( $css_rules ) ) {
            $final_css .= implode( "\n", $css_rules );
        }
        if ( ! empty( $tablet_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::TABLET_BREAKPOINT . "px) {\n" . implode( "\n", $tablet_rules ) . "\n}";
        }
        if ( ! empty( $mobile_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::MOBILE_BREAKPOINT . "px) {\n" . implode( "\n", $mobile_rules ) . "\n}";
        }

        return $final_css;
    }

    /**
     * Generate create-post block CSS
     *
     * Comprehensive CSS generation for create-post form block.
     * Covers all Style Tab inspector controls including:
     * - Form head (progress bar, steps)
     * - Navigation buttons
     * - Footer
     * - Field labels and validation
     * - Input/textarea fields
     * - Select/dropdown fields
     * - Checkboxes and switches
     * - Radio buttons
     * - Number fields
     * - Date/time fields
     * - File upload
     * - Recurring date
     * - Location field
     * - Work hours
     * - Product fields
     * - Primary button (submit)
     * - Secondary button
     *
     * @param array  $attributes Block attributes from inspector controls
     * @param string $block_id   Unique block identifier
     * @return string Generated CSS rules
     */
    public static function generate_create_post_css( $attributes, $block_id ) {
        if ( empty( $block_id ) ) {
            return '';
        }

        $selector = '.voxel-fse-create-post-' . $block_id;
        $css_rules = [];
        $tablet_rules = [];
        $mobile_rules = [];

        // ============================================
        // 1. FORM: HEAD (Progress Bar)
        // ============================================

        // Hide form head
        if ( ! empty( $attributes['headHide'] ) ) {
            $css_rules[] = "{$selector} .ts-form-progres { display: none !important; }";
        }

        // Head spacing (bottom)
        if ( isset( $attributes['headSpacing'] ) ) {
            $css_rules[] = "{$selector} .ts-form-progres { margin-bottom: {$attributes['headSpacing']}px; }";
        }
        if ( isset( $attributes['headSpacing_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-form-progres { margin-bottom: {$attributes['headSpacing_tablet']}px; }";
        }
        if ( isset( $attributes['headSpacing_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-form-progres { margin-bottom: {$attributes['headSpacing_mobile']}px; }";
        }

        // Hide steps bar
        if ( ! empty( $attributes['stepsBarHide'] ) ) {
            $css_rules[] = "{$selector} .step-percentage { display: none !important; }";
        }

        // Steps bar height
        if ( isset( $attributes['stepsBarHeight'] ) ) {
            $css_rules[] = "{$selector} .step-percentage { height: {$attributes['stepsBarHeight']}px; }";
        }
        if ( isset( $attributes['stepsBarHeight_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .step-percentage { height: {$attributes['stepsBarHeight_tablet']}px; }";
        }
        if ( isset( $attributes['stepsBarHeight_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .step-percentage { height: {$attributes['stepsBarHeight_mobile']}px; }";
        }

        // Steps bar border radius
        if ( isset( $attributes['stepsBarRadius'] ) ) {
            $css_rules[] = "{$selector} .step-percentage { border-radius: {$attributes['stepsBarRadius']}px; }";
        }
        if ( isset( $attributes['stepsBarRadius_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .step-percentage { border-radius: {$attributes['stepsBarRadius_tablet']}px; }";
        }
        if ( isset( $attributes['stepsBarRadius_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .step-percentage { border-radius: {$attributes['stepsBarRadius_mobile']}px; }";
        }

        // Percentage spacing (bottom)
        if ( isset( $attributes['percentageSpacing'] ) ) {
            $css_rules[] = "{$selector} .step-percentage { margin-bottom: {$attributes['percentageSpacing']}px; }";
        }
        if ( isset( $attributes['percentageSpacing_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .step-percentage { margin-bottom: {$attributes['percentageSpacing_tablet']}px; }";
        }
        if ( isset( $attributes['percentageSpacing_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .step-percentage { margin-bottom: {$attributes['percentageSpacing_mobile']}px; }";
        }

        // Progress bar background
        if ( ! empty( $attributes['stepBarBg'] ) ) {
            $css_rules[] = "{$selector} .step-percentage { background-color: {$attributes['stepBarBg']}; }";
        }

        // Progress background (filled)
        if ( ! empty( $attributes['stepBarDone'] ) ) {
            $css_rules[] = "{$selector} .step-percentage > div { background-color: {$attributes['stepBarDone']}; }";
        }

        // Step heading typography
        if ( ! empty( $attributes['currentStepText'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['currentStepText'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .active-step-details p { {$typo_css} }";
            }
        }

        // Step heading color
        if ( ! empty( $attributes['currentStepCol'] ) ) {
            $css_rules[] = "{$selector} .active-step-details p { color: {$attributes['currentStepCol']}; }";
        }

        // ============================================
        // 2. HEAD: NEXT/PREV BUTTONS
        // ============================================

        // Button icon color
        if ( ! empty( $attributes['fnavBtnColor'] ) ) {
            $css_rules[] = "{$selector} .step-nav .ts-icon-btn i { color: {$attributes['fnavBtnColor']}; }";
            $css_rules[] = "{$selector} .step-nav .ts-icon-btn svg { fill: {$attributes['fnavBtnColor']}; }";
        }

        // Button icon size
        if ( isset( $attributes['fnavBtnIconSize'] ) ) {
            $css_rules[] = "{$selector} .step-nav .ts-icon-btn i { font-size: {$attributes['fnavBtnIconSize']}px; }";
            $css_rules[] = "{$selector} .step-nav .ts-icon-btn svg { width: {$attributes['fnavBtnIconSize']}px; height: {$attributes['fnavBtnIconSize']}px; }";
        }
        if ( isset( $attributes['fnavBtnIconSize_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .step-nav .ts-icon-btn i { font-size: {$attributes['fnavBtnIconSize_tablet']}px; }";
            $tablet_rules[] = "{$selector} .step-nav .ts-icon-btn svg { width: {$attributes['fnavBtnIconSize_tablet']}px; height: {$attributes['fnavBtnIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['fnavBtnIconSize_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .step-nav .ts-icon-btn i { font-size: {$attributes['fnavBtnIconSize_mobile']}px; }";
            $mobile_rules[] = "{$selector} .step-nav .ts-icon-btn svg { width: {$attributes['fnavBtnIconSize_mobile']}px; height: {$attributes['fnavBtnIconSize_mobile']}px; }";
        }

        // Button background
        if ( ! empty( $attributes['fnavBtnBg'] ) ) {
            $css_rules[] = "{$selector} .step-nav .ts-icon-btn { background-color: {$attributes['fnavBtnBg']}; }";
        }

        // Button border
        if ( ! empty( $attributes['fnavBtnBorder'] ) ) {
            $border_css = self::generate_border_css( $attributes['fnavBtnBorder'] );
            if ( $border_css ) {
                $css_rules[] = "{$selector} .step-nav .ts-icon-btn { border: {$border_css}; }";
            }
        }

        // Button border radius
        if ( isset( $attributes['fnavBtnRadius'] ) ) {
            $css_rules[] = "{$selector} .step-nav .ts-icon-btn { border-radius: {$attributes['fnavBtnRadius']}px; }";
        }
        if ( isset( $attributes['fnavBtnRadius_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .step-nav .ts-icon-btn { border-radius: {$attributes['fnavBtnRadius_tablet']}px; }";
        }
        if ( isset( $attributes['fnavBtnRadius_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .step-nav .ts-icon-btn { border-radius: {$attributes['fnavBtnRadius_mobile']}px; }";
        }

        // Button size
        if ( isset( $attributes['fnavBtnSize'] ) ) {
            $css_rules[] = "{$selector} .step-nav .ts-icon-btn { width: {$attributes['fnavBtnSize']}px; height: {$attributes['fnavBtnSize']}px; }";
        }
        if ( isset( $attributes['fnavBtnSize_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .step-nav .ts-icon-btn { width: {$attributes['fnavBtnSize_tablet']}px; height: {$attributes['fnavBtnSize_tablet']}px; }";
        }
        if ( isset( $attributes['fnavBtnSize_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .step-nav .ts-icon-btn { width: {$attributes['fnavBtnSize_mobile']}px; height: {$attributes['fnavBtnSize_mobile']}px; }";
        }

        // Button hover states
        if ( ! empty( $attributes['fnavBtnColorHover'] ) ) {
            $css_rules[] = "{$selector} .step-nav .ts-icon-btn:hover i { color: {$attributes['fnavBtnColorHover']}; }";
            $css_rules[] = "{$selector} .step-nav .ts-icon-btn:hover svg { fill: {$attributes['fnavBtnColorHover']}; }";
        }
        if ( ! empty( $attributes['fnavBtnBgHover'] ) ) {
            $css_rules[] = "{$selector} .step-nav .ts-icon-btn:hover { background-color: {$attributes['fnavBtnBgHover']}; }";
        }
        if ( ! empty( $attributes['fnavBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .step-nav .ts-icon-btn:hover { border-color: {$attributes['fnavBorderColorHover']}; }";
        }

        // ============================================
        // 3. FORM: FOOTER
        // ============================================

        // Footer top spacing
        if ( isset( $attributes['footerTopSpacing'] ) ) {
            $css_rules[] = "{$selector} .ts-form-footer { margin-top: {$attributes['footerTopSpacing']}px; }";
        }
        if ( isset( $attributes['footerTopSpacing_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-form-footer { margin-top: {$attributes['footerTopSpacing_tablet']}px; }";
        }
        if ( isset( $attributes['footerTopSpacing_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-form-footer { margin-top: {$attributes['footerTopSpacing_mobile']}px; }";
        }

        // ============================================
        // 4. FIELDS GENERAL (Labels & Validation)
        // ============================================

        // Field label typography
        if ( ! empty( $attributes['sf1InputLabelTypo'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['sf1InputLabelTypo'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ts-form-group label { {$typo_css} }";
            }
        }

        // Field label color
        if ( ! empty( $attributes['sf1InputLabelCol'] ) ) {
            $css_rules[] = "{$selector} .ts-form-group label { color: {$attributes['sf1InputLabelCol']}; }";
        }

        // Field validation typography
        if ( ! empty( $attributes['sf1FieldReqTypo'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['sf1FieldReqTypo'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .field-required { {$typo_css} }";
            }
        }

        // Field validation default color
        if ( ! empty( $attributes['sf1FieldReqCol'] ) ) {
            $css_rules[] = "{$selector} .field-required { color: {$attributes['sf1FieldReqCol']}; }";
        }

        // Field validation error color
        if ( ! empty( $attributes['sf1FieldReqColErr'] ) ) {
            $css_rules[] = "{$selector} .field-required.error { color: {$attributes['sf1FieldReqColErr']}; }";
        }

        // ============================================
        // 5. INPUT & TEXTAREA
        // ============================================

        // Placeholder typography
        if ( ! empty( $attributes['intxtPlaceholderTypo'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['intxtPlaceholderTypo'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ts-form input.ts-filter::placeholder, {$selector} .ts-form textarea.ts-filter::placeholder { {$typo_css} }";
            }
        }

        // Placeholder color
        if ( ! empty( $attributes['intxtPlaceholderCol'] ) ) {
            $css_rules[] = "{$selector} .ts-form input.ts-filter::placeholder, {$selector} .ts-form textarea.ts-filter::placeholder { color: {$attributes['intxtPlaceholderCol']}; }";
        }

        // Value typography
        if ( ! empty( $attributes['intxtValueTypo'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['intxtValueTypo'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ts-form input.ts-filter, {$selector} .ts-form textarea.ts-filter { {$typo_css} }";
            }
        }

        // Value color
        if ( ! empty( $attributes['intxtValueCol'] ) ) {
            $css_rules[] = "{$selector} .ts-form input.ts-filter, {$selector} .ts-form textarea.ts-filter { color: {$attributes['intxtValueCol']}; }";
        }

        // Background color
        if ( ! empty( $attributes['intxtBg'] ) ) {
            $css_rules[] = "{$selector} .ts-form input.ts-filter, {$selector} .ts-form textarea.ts-filter { background-color: {$attributes['intxtBg']}; }";
        }

        // Border
        if ( ! empty( $attributes['intxtBorder'] ) ) {
            $border_css = self::generate_border_css( $attributes['intxtBorder'] );
            if ( $border_css ) {
                $css_rules[] = "{$selector} .ts-form input.ts-filter, {$selector} .ts-form textarea.ts-filter { border: {$border_css}; }";
            }
        }

        // Input border radius
        if ( isset( $attributes['intxtInputRadius'] ) ) {
            $css_rules[] = "{$selector} .ts-form input.ts-filter { border-radius: {$attributes['intxtInputRadius']}px; }";
        }
        if ( isset( $attributes['intxtInputRadius_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-form input.ts-filter { border-radius: {$attributes['intxtInputRadius_tablet']}px; }";
        }
        if ( isset( $attributes['intxtInputRadius_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-form input.ts-filter { border-radius: {$attributes['intxtInputRadius_mobile']}px; }";
        }

        // Input height
        if ( isset( $attributes['intxtInputHeight'] ) ) {
            $css_rules[] = "{$selector} .ts-form input.ts-filter { height: {$attributes['intxtInputHeight']}px; }";
        }
        if ( isset( $attributes['intxtInputHeight_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-form input.ts-filter { height: {$attributes['intxtInputHeight_tablet']}px; }";
        }
        if ( isset( $attributes['intxtInputHeight_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-form input.ts-filter { height: {$attributes['intxtInputHeight_mobile']}px; }";
        }

        // Input padding
        if ( isset( $attributes['intxtInputPadding'] ) ) {
            $css_rules[] = "{$selector} .ts-form input.ts-filter { padding: {$attributes['intxtInputPadding']}px; }";
        }
        if ( isset( $attributes['intxtInputPadding_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-form input.ts-filter { padding: {$attributes['intxtInputPadding_tablet']}px; }";
        }
        if ( isset( $attributes['intxtInputPadding_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-form input.ts-filter { padding: {$attributes['intxtInputPadding_mobile']}px; }";
        }

        // Textarea padding
        if ( isset( $attributes['intxtTextareaPadding'] ) ) {
            $css_rules[] = "{$selector} .ts-form textarea.ts-filter { padding: {$attributes['intxtTextareaPadding']}px; }";
        }
        if ( isset( $attributes['intxtTextareaPadding_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-form textarea.ts-filter { padding: {$attributes['intxtTextareaPadding_tablet']}px; }";
        }
        if ( isset( $attributes['intxtTextareaPadding_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-form textarea.ts-filter { padding: {$attributes['intxtTextareaPadding_mobile']}px; }";
        }

        // Textarea min height
        if ( isset( $attributes['intxtTextareaMinHeight'] ) ) {
            $css_rules[] = "{$selector} .ts-form textarea.ts-filter { min-height: {$attributes['intxtTextareaMinHeight']}px; }";
        }
        if ( isset( $attributes['intxtTextareaMinHeight_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-form textarea.ts-filter { min-height: {$attributes['intxtTextareaMinHeight_tablet']}px; }";
        }
        if ( isset( $attributes['intxtTextareaMinHeight_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-form textarea.ts-filter { min-height: {$attributes['intxtTextareaMinHeight_mobile']}px; }";
        }

        // Textarea border radius
        if ( isset( $attributes['intxtTextareaRadius'] ) ) {
            $css_rules[] = "{$selector} .ts-form textarea.ts-filter { border-radius: {$attributes['intxtTextareaRadius']}px; }";
        }
        if ( isset( $attributes['intxtTextareaRadius_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-form textarea.ts-filter { border-radius: {$attributes['intxtTextareaRadius_tablet']}px; }";
        }
        if ( isset( $attributes['intxtTextareaRadius_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-form textarea.ts-filter { border-radius: {$attributes['intxtTextareaRadius_mobile']}px; }";
        }

        // Focus state - placeholder color
        if ( ! empty( $attributes['intxtPlaceholderColFocus'] ) ) {
            $css_rules[] = "{$selector} .ts-form input.ts-filter:focus::placeholder, {$selector} .ts-form textarea.ts-filter:focus::placeholder { color: {$attributes['intxtPlaceholderColFocus']}; }";
        }

        // Focus state - value color
        if ( ! empty( $attributes['intxtValueColFocus'] ) ) {
            $css_rules[] = "{$selector} .ts-form input.ts-filter:focus, {$selector} .ts-form textarea.ts-filter:focus { color: {$attributes['intxtValueColFocus']}; }";
        }

        // Focus state - background
        if ( ! empty( $attributes['intxtBgFocus'] ) ) {
            $css_rules[] = "{$selector} .ts-form input.ts-filter:focus, {$selector} .ts-form textarea.ts-filter:focus { background-color: {$attributes['intxtBgFocus']}; }";
        }

        // Focus state - border color
        if ( ! empty( $attributes['intxtBorderColorFocus'] ) ) {
            $css_rules[] = "{$selector} .ts-form input.ts-filter:focus, {$selector} .ts-form textarea.ts-filter:focus { border-color: {$attributes['intxtBorderColorFocus']}; }";
        }

        // ============================================
        // 6. PRIMARY BUTTON (Submit)
        // ============================================

        // Primary button typography
        if ( ! empty( $attributes['pgBtnTypo'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['pgBtnTypo'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ts-btn-2 { {$typo_css} }";
            }
        }

        // Primary button text color
        if ( ! empty( $attributes['pgBtnCol'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-2 { color: {$attributes['pgBtnCol']}; }";
        }

        // Primary button background
        if ( ! empty( $attributes['pgBtnBg'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-2 { background-color: {$attributes['pgBtnBg']}; }";
        }

        // Primary button border
        if ( ! empty( $attributes['pgBtnBorder'] ) ) {
            $border_css = self::generate_border_css( $attributes['pgBtnBorder'] );
            if ( $border_css ) {
                $css_rules[] = "{$selector} .ts-btn-2 { border: {$border_css}; }";
            }
        }

        // Primary button border radius
        if ( isset( $attributes['pgBtnRadius'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-2 { border-radius: {$attributes['pgBtnRadius']}px; }";
        }
        if ( isset( $attributes['pgBtnRadius_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-btn-2 { border-radius: {$attributes['pgBtnRadius_tablet']}px; }";
        }
        if ( isset( $attributes['pgBtnRadius_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-btn-2 { border-radius: {$attributes['pgBtnRadius_mobile']}px; }";
        }

        // Primary button height
        if ( isset( $attributes['pgBtnHeight'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-2 { height: {$attributes['pgBtnHeight']}px; }";
        }
        if ( isset( $attributes['pgBtnHeight_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-btn-2 { height: {$attributes['pgBtnHeight_tablet']}px; }";
        }
        if ( isset( $attributes['pgBtnHeight_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-btn-2 { height: {$attributes['pgBtnHeight_mobile']}px; }";
        }

        // Primary button padding
        if ( ! empty( $attributes['pgBtnPadding'] ) ) {
            $dims_css = self::generate_dimensions_css( $attributes['pgBtnPadding'], 'padding' );
            if ( $dims_css ) {
                $css_rules[] = "{$selector} .ts-btn-2 { {$dims_css} }";
            }
        }

        // Primary button hover - text color
        if ( ! empty( $attributes['pgBtnColHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-2:hover { color: {$attributes['pgBtnColHover']}; }";
        }

        // Primary button hover - background
        if ( ! empty( $attributes['pgBtnBgHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-2:hover { background-color: {$attributes['pgBtnBgHover']}; }";
        }

        // Primary button hover - border color
        if ( ! empty( $attributes['pgBtnBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-2:hover { border-color: {$attributes['pgBtnBorderColorHover']}; }";
        }

        // ============================================
        // 7. SECONDARY BUTTON
        // ============================================

        // Secondary button typography
        if ( ! empty( $attributes['scBtnTypo'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['scBtnTypo'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ts-btn-1 { {$typo_css} }";
            }
        }

        // Secondary button text color
        if ( ! empty( $attributes['scBtnCol'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-1 { color: {$attributes['scBtnCol']}; }";
        }

        // Secondary button background
        if ( ! empty( $attributes['scBtnBg'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-1 { background-color: {$attributes['scBtnBg']}; }";
        }

        // Secondary button border
        if ( ! empty( $attributes['scBtnBorder'] ) ) {
            $border_css = self::generate_border_css( $attributes['scBtnBorder'] );
            if ( $border_css ) {
                $css_rules[] = "{$selector} .ts-btn-1 { border: {$border_css}; }";
            }
        }

        // Secondary button border radius
        if ( isset( $attributes['scBtnRadius'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-1 { border-radius: {$attributes['scBtnRadius']}px; }";
        }
        if ( isset( $attributes['scBtnRadius_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-btn-1 { border-radius: {$attributes['scBtnRadius_tablet']}px; }";
        }
        if ( isset( $attributes['scBtnRadius_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-btn-1 { border-radius: {$attributes['scBtnRadius_mobile']}px; }";
        }

        // Secondary button height
        if ( isset( $attributes['scBtnHeight'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-1 { height: {$attributes['scBtnHeight']}px; }";
        }
        if ( isset( $attributes['scBtnHeight_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-btn-1 { height: {$attributes['scBtnHeight_tablet']}px; }";
        }
        if ( isset( $attributes['scBtnHeight_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-btn-1 { height: {$attributes['scBtnHeight_mobile']}px; }";
        }

        // Secondary button padding
        if ( ! empty( $attributes['scBtnPadding'] ) ) {
            $dims_css = self::generate_dimensions_css( $attributes['scBtnPadding'], 'padding' );
            if ( $dims_css ) {
                $css_rules[] = "{$selector} .ts-btn-1 { {$dims_css} }";
            }
        }

        // Secondary button hover - text color
        if ( ! empty( $attributes['scBtnColHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-1:hover { color: {$attributes['scBtnColHover']}; }";
        }

        // Secondary button hover - background
        if ( ! empty( $attributes['scBtnBgHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-1:hover { background-color: {$attributes['scBtnBgHover']}; }";
        }

        // Secondary button hover - border color
        if ( ! empty( $attributes['scBtnBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-1:hover { border-color: {$attributes['scBtnBorderColorHover']}; }";
        }

        // ============================================
        // 8. INPUT SUFFIX
        // ============================================

        // Suffix typography
        if ( ! empty( $attributes['suffixTypo'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['suffixTypo'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .input-container .input-suffix { {$typo_css} }";
            }
        }

        // Suffix text color
        if ( ! empty( $attributes['suffixTextCol'] ) ) {
            $css_rules[] = "{$selector} .input-container .input-suffix { color: {$attributes['suffixTextCol']}; }";
        }

        // Suffix background
        if ( ! empty( $attributes['suffixBg'] ) ) {
            $css_rules[] = "{$selector} .input-container .input-suffix { background-color: {$attributes['suffixBg']}; }";
        }

        // Suffix border radius
        if ( isset( $attributes['suffixRadius'] ) ) {
            $css_rules[] = "{$selector} .input-container .input-suffix { border-radius: {$attributes['suffixRadius']}px; }";
        }
        if ( isset( $attributes['suffixRadius_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .input-container .input-suffix { border-radius: {$attributes['suffixRadius_tablet']}px; }";
        }
        if ( isset( $attributes['suffixRadius_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .input-container .input-suffix { border-radius: {$attributes['suffixRadius_mobile']}px; }";
        }

        // Suffix box shadow
        if ( ! empty( $attributes['suffixShadow'] ) ) {
            $shadow_css = self::generate_box_shadow_css( $attributes['suffixShadow'] );
            if ( $shadow_css ) {
                $css_rules[] = "{$selector} .input-container .input-suffix { box-shadow: {$shadow_css}; }";
            }
        }

        // Suffix side margin
        if ( isset( $attributes['suffixMargin'] ) ) {
            $css_rules[] = "{$selector} .input-container .input-suffix { right: {$attributes['suffixMargin']}px; }";
        }
        if ( isset( $attributes['suffixMargin_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .input-container .input-suffix { right: {$attributes['suffixMargin_tablet']}px; }";
        }
        if ( isset( $attributes['suffixMargin_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .input-container .input-suffix { right: {$attributes['suffixMargin_mobile']}px; }";
        }

        // Suffix icon color
        if ( ! empty( $attributes['suffixIconCol'] ) ) {
            $css_rules[] = "{$selector} .input-container .input-suffix i { color: {$attributes['suffixIconCol']}; }";
            $css_rules[] = "{$selector} .input-container .input-suffix svg { fill: {$attributes['suffixIconCol']}; }";
        }

        // ============================================
        // 9. POPUP BUTTON (Select fields, date pickers, etc.)
        // ============================================

        // Typography (normal)
        if ( ! empty( $attributes['popupBtnTypo'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['popupBtnTypo'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ts-form div.ts-filter { {$typo_css} }";
            }
        }

        // Box shadow (normal)
        if ( ! empty( $attributes['popupBtnShadow'] ) ) {
            $shadow_css = self::generate_box_shadow_css( $attributes['popupBtnShadow'] );
            if ( $shadow_css ) {
                $css_rules[] = "{$selector} div.ts-filter { box-shadow: {$shadow_css}; }";
            }
        }

        // Background color (normal)
        if ( ! empty( $attributes['popupBtnBg'] ) ) {
            $css_rules[] = "{$selector} .ts-form div.ts-filter { background: {$attributes['popupBtnBg']}; }";
        }

        // Text color (normal)
        if ( ! empty( $attributes['popupBtnValueCol'] ) ) {
            $css_rules[] = "{$selector} .ts-form div.ts-filter-text { color: {$attributes['popupBtnValueCol']}; }";
        }

        // Border (normal)
        if ( ! empty( $attributes['popupBtnBorder'] ) ) {
            $border_css = self::generate_border_css( $attributes['popupBtnBorder'] );
            if ( $border_css ) {
                $css_rules[] = "{$selector} div.ts-filter { border: {$border_css}; }";
            }
        }

        // Border radius
        if ( isset( $attributes['popupBtnRadius'] ) ) {
            $css_rules[] = "{$selector} .ts-form div.ts-filter { border-radius: {$attributes['popupBtnRadius']}px; }";
        }
        if ( isset( $attributes['popupBtnRadius_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-form div.ts-filter { border-radius: {$attributes['popupBtnRadius_tablet']}px; }";
        }
        if ( isset( $attributes['popupBtnRadius_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-form div.ts-filter { border-radius: {$attributes['popupBtnRadius_mobile']}px; }";
        }

        // Height
        if ( isset( $attributes['popupBtnHeight'] ) ) {
            $css_rules[] = "{$selector} .ts-form div.ts-filter { height: {$attributes['popupBtnHeight']}px; }";
        }
        if ( isset( $attributes['popupBtnHeight_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-form div.ts-filter { height: {$attributes['popupBtnHeight_tablet']}px; }";
        }
        if ( isset( $attributes['popupBtnHeight_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-form div.ts-filter { height: {$attributes['popupBtnHeight_mobile']}px; }";
        }

        // Padding
        if ( isset( $attributes['popupBtnPadding'] ) ) {
            $css_rules[] = "{$selector} .ts-form div.ts-filter { padding: {$attributes['popupBtnPadding']}px; }";
        }
        if ( isset( $attributes['popupBtnPadding_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-form div.ts-filter { padding: {$attributes['popupBtnPadding_tablet']}px; }";
        }
        if ( isset( $attributes['popupBtnPadding_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-form div.ts-filter { padding: {$attributes['popupBtnPadding_mobile']}px; }";
        }

        // Icon size
        if ( isset( $attributes['popupBtnIconSize'] ) ) {
            $css_rules[] = "{$selector} .ts-form div.ts-filter i { font-size: {$attributes['popupBtnIconSize']}px; }";
            $css_rules[] = "{$selector} .ts-form div.ts-filter svg { width: {$attributes['popupBtnIconSize']}px; height: {$attributes['popupBtnIconSize']}px; }";
        }
        if ( isset( $attributes['popupBtnIconSize_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-form div.ts-filter i { font-size: {$attributes['popupBtnIconSize_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-form div.ts-filter svg { width: {$attributes['popupBtnIconSize_tablet']}px; height: {$attributes['popupBtnIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['popupBtnIconSize_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-form div.ts-filter i { font-size: {$attributes['popupBtnIconSize_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-form div.ts-filter svg { width: {$attributes['popupBtnIconSize_mobile']}px; height: {$attributes['popupBtnIconSize_mobile']}px; }";
        }

        // Icon color
        if ( ! empty( $attributes['popupBtnIconCol'] ) ) {
            $css_rules[] = "{$selector} .ts-form div.ts-filter i { color: {$attributes['popupBtnIconCol']}; }";
            $css_rules[] = "{$selector} .ts-form div.ts-filter svg { fill: {$attributes['popupBtnIconCol']}; }";
        }

        // Hover/focus states
        if ( ! empty( $attributes['popupBtnValueColHover'] ) ) {
            $css_rules[] = "{$selector} .ts-form div.ts-filter:hover div.ts-filter-text { color: {$attributes['popupBtnValueColHover']}; }";
        }
        if ( ! empty( $attributes['popupBtnBgHover'] ) ) {
            $css_rules[] = "{$selector} .ts-form div.ts-filter:hover { background: {$attributes['popupBtnBgHover']}; }";
        }
        if ( ! empty( $attributes['popupBtnBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-form div.ts-filter:hover { border-color: {$attributes['popupBtnBorderColorHover']}; }";
        }
        if ( ! empty( $attributes['popupBtnIconColHover'] ) ) {
            $css_rules[] = "{$selector} .ts-form div.ts-filter:hover i { color: {$attributes['popupBtnIconColHover']}; }";
            $css_rules[] = "{$selector} .ts-form div.ts-filter:hover svg { fill: {$attributes['popupBtnIconColHover']}; }";
        }

        // Filled state (when value selected)
        if ( ! empty( $attributes['popupBtnValueColFilled'] ) ) {
            $css_rules[] = "{$selector} .ts-form div.ts-filter.ts-filled div.ts-filter-text { color: {$attributes['popupBtnValueColFilled']}; }";
        }
        if ( ! empty( $attributes['popupBtnBgFilled'] ) ) {
            $css_rules[] = "{$selector} .ts-form div.ts-filter.ts-filled { background: {$attributes['popupBtnBgFilled']}; }";
        }
        if ( ! empty( $attributes['popupBtnBorderColorFilled'] ) ) {
            $css_rules[] = "{$selector} .ts-form div.ts-filter.ts-filled { border-color: {$attributes['popupBtnBorderColorFilled']}; }";
        }
        if ( ! empty( $attributes['popupBtnIconColFilled'] ) ) {
            $css_rules[] = "{$selector} .ts-form div.ts-filter.ts-filled i { color: {$attributes['popupBtnIconColFilled']}; }";
            $css_rules[] = "{$selector} .ts-form div.ts-filter.ts-filled svg { fill: {$attributes['popupBtnIconColFilled']}; }";
        }

        // ============================================
        // 10. TERTIARY BUTTON
        // ============================================

        // Tertiary button icon color
        if ( ! empty( $attributes['tertiaryBtnIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-btn.ts-btn-4 i { color: {$attributes['tertiaryBtnIconColor']}; }";
            $css_rules[] = "{$selector} .ts-btn.ts-btn-4 svg { fill: {$attributes['tertiaryBtnIconColor']}; }";
        }

        // Tertiary button icon size
        if ( isset( $attributes['tertiaryBtnIconSize'] ) ) {
            $css_rules[] = "{$selector} .ts-btn.ts-btn-4 i { font-size: {$attributes['tertiaryBtnIconSize']}px; }";
            $css_rules[] = "{$selector} .ts-btn.ts-btn-4 svg { width: {$attributes['tertiaryBtnIconSize']}px; height: {$attributes['tertiaryBtnIconSize']}px; }";
        }
        if ( isset( $attributes['tertiaryBtnIconSize_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-btn.ts-btn-4 i { font-size: {$attributes['tertiaryBtnIconSize_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-btn.ts-btn-4 svg { width: {$attributes['tertiaryBtnIconSize_tablet']}px; height: {$attributes['tertiaryBtnIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['tertiaryBtnIconSize_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-btn.ts-btn-4 i { font-size: {$attributes['tertiaryBtnIconSize_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-btn.ts-btn-4 svg { width: {$attributes['tertiaryBtnIconSize_mobile']}px; height: {$attributes['tertiaryBtnIconSize_mobile']}px; }";
        }

        // Tertiary button background
        if ( ! empty( $attributes['tertiaryBtnBg'] ) ) {
            $css_rules[] = "{$selector} .ts-btn.ts-btn-4 { background-color: {$attributes['tertiaryBtnBg']}; }";
        }

        // Tertiary button border
        if ( ! empty( $attributes['tertiaryBtnBorder'] ) ) {
            $border_css = self::generate_border_css( $attributes['tertiaryBtnBorder'] );
            if ( $border_css ) {
                $css_rules[] = "{$selector} .ts-btn.ts-btn-4 { border: {$border_css}; }";
            }
        }

        // Tertiary button border radius
        if ( isset( $attributes['tertiaryBtnRadius'] ) ) {
            $css_rules[] = "{$selector} .ts-btn.ts-btn-4 { border-radius: {$attributes['tertiaryBtnRadius']}px; }";
        }
        if ( isset( $attributes['tertiaryBtnRadius_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-btn.ts-btn-4 { border-radius: {$attributes['tertiaryBtnRadius_tablet']}px; }";
        }
        if ( isset( $attributes['tertiaryBtnRadius_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-btn.ts-btn-4 { border-radius: {$attributes['tertiaryBtnRadius_mobile']}px; }";
        }

        // Tertiary button typography
        if ( ! empty( $attributes['tertiaryBtnText'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['tertiaryBtnText'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ts-btn.ts-btn-4 { {$typo_css} }";
            }
        }

        // Tertiary button text color
        if ( ! empty( $attributes['tertiaryBtnTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-btn.ts-btn-4 { color: {$attributes['tertiaryBtnTextColor']}; }";
        }

        // Tertiary button hover states
        if ( ! empty( $attributes['tertiaryBtnIconColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn.ts-btn-4:hover i { color: {$attributes['tertiaryBtnIconColorHover']}; }";
            $css_rules[] = "{$selector} .ts-btn.ts-btn-4:hover svg { fill: {$attributes['tertiaryBtnIconColorHover']}; }";
        }
        if ( ! empty( $attributes['tertiaryBtnBgHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn.ts-btn-4:hover { background-color: {$attributes['tertiaryBtnBgHover']}; }";
        }
        if ( ! empty( $attributes['tertiaryBtnBorderHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn.ts-btn-4:hover { border-color: {$attributes['tertiaryBtnBorderHover']}; }";
        }
        if ( ! empty( $attributes['tertiaryBtnTextColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn.ts-btn-4:hover { color: {$attributes['tertiaryBtnTextColorHover']}; }";
        }

        // ============================================
        // 11. FILE/GALLERY UPLOAD
        // ============================================

        // File item gap
        if ( isset( $attributes['fileColGap'] ) ) {
            $css_rules[] = "{$selector} .ts-file-upload { gap: {$attributes['fileColGap']}px; }";
        }
        if ( isset( $attributes['fileColGap_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-file-upload { gap: {$attributes['fileColGap_tablet']}px; }";
        }
        if ( isset( $attributes['fileColGap_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-file-upload { gap: {$attributes['fileColGap_mobile']}px; }";
        }

        // Select files - icon color
        if ( ! empty( $attributes['fileIconColor'] ) ) {
            $css_rules[] = "{$selector} .min-input i { color: {$attributes['fileIconColor']}; }";
            $css_rules[] = "{$selector} .min-input svg { fill: {$attributes['fileIconColor']}; }";
        }

        // Select files - icon size
        if ( isset( $attributes['fileIconSize'] ) ) {
            $css_rules[] = "{$selector} .min-input i { font-size: {$attributes['fileIconSize']}px; }";
            $css_rules[] = "{$selector} .min-input svg { width: {$attributes['fileIconSize']}px; height: {$attributes['fileIconSize']}px; }";
        }
        if ( isset( $attributes['fileIconSize_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .min-input i { font-size: {$attributes['fileIconSize_tablet']}px; }";
            $tablet_rules[] = "{$selector} .min-input svg { width: {$attributes['fileIconSize_tablet']}px; height: {$attributes['fileIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['fileIconSize_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .min-input i { font-size: {$attributes['fileIconSize_mobile']}px; }";
            $mobile_rules[] = "{$selector} .min-input svg { width: {$attributes['fileIconSize_mobile']}px; height: {$attributes['fileIconSize_mobile']}px; }";
        }

        // Select files - background
        if ( ! empty( $attributes['fileBg'] ) ) {
            $css_rules[] = "{$selector} .min-input { background-color: {$attributes['fileBg']}; }";
        }

        // Select files - border
        if ( ! empty( $attributes['fileBorder'] ) ) {
            $border_css = self::generate_border_css( $attributes['fileBorder'] );
            if ( $border_css ) {
                $css_rules[] = "{$selector} .min-input { border: {$border_css}; }";
            }
        }

        // Select files - border radius
        if ( isset( $attributes['fileRadius'] ) ) {
            $css_rules[] = "{$selector} .min-input { border-radius: {$attributes['fileRadius']}px; }";
        }
        if ( isset( $attributes['fileRadius_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .min-input { border-radius: {$attributes['fileRadius_tablet']}px; }";
        }
        if ( isset( $attributes['fileRadius_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .min-input { border-radius: {$attributes['fileRadius_mobile']}px; }";
        }

        // Select files - typography
        if ( ! empty( $attributes['fileText'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['fileText'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .min-input { {$typo_css} }";
            }
        }

        // Select files - text color
        if ( ! empty( $attributes['fileTextColor'] ) ) {
            $css_rules[] = "{$selector} .min-input { color: {$attributes['fileTextColor']}; }";
        }

        // Added file/image - border radius
        if ( isset( $attributes['addedRadius'] ) ) {
            $css_rules[] = "{$selector} .file-info { border-radius: {$attributes['addedRadius']}px; }";
        }
        if ( isset( $attributes['addedRadius_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .file-info { border-radius: {$attributes['addedRadius_tablet']}px; }";
        }
        if ( isset( $attributes['addedRadius_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .file-info { border-radius: {$attributes['addedRadius_mobile']}px; }";
        }

        // Added file/image - background
        if ( ! empty( $attributes['addedBg'] ) ) {
            $css_rules[] = "{$selector} .file-info { background-color: {$attributes['addedBg']}; }";
        }

        // Added file/image - icon color
        if ( ! empty( $attributes['addedIconColor'] ) ) {
            $css_rules[] = "{$selector} .file-info i { color: {$attributes['addedIconColor']}; }";
            $css_rules[] = "{$selector} .file-info svg { fill: {$attributes['addedIconColor']}; }";
        }

        // Added file/image - icon size
        if ( isset( $attributes['addedIconSize'] ) ) {
            $css_rules[] = "{$selector} .file-info i { font-size: {$attributes['addedIconSize']}px; }";
            $css_rules[] = "{$selector} .file-info svg { width: {$attributes['addedIconSize']}px; height: {$attributes['addedIconSize']}px; }";
        }
        if ( isset( $attributes['addedIconSize_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .file-info i { font-size: {$attributes['addedIconSize_tablet']}px; }";
            $tablet_rules[] = "{$selector} .file-info svg { width: {$attributes['addedIconSize_tablet']}px; height: {$attributes['addedIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['addedIconSize_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .file-info i { font-size: {$attributes['addedIconSize_mobile']}px; }";
            $mobile_rules[] = "{$selector} .file-info svg { width: {$attributes['addedIconSize_mobile']}px; height: {$attributes['addedIconSize_mobile']}px; }";
        }

        // Added file/image - typography
        if ( ! empty( $attributes['addedText'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['addedText'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .file-info { {$typo_css} }";
            }
        }

        // Added file/image - text color
        if ( ! empty( $attributes['addedTextColor'] ) ) {
            $css_rules[] = "{$selector} .file-info { color: {$attributes['addedTextColor']}; }";
        }

        // Remove/Check button - background
        if ( ! empty( $attributes['rmfBg'] ) ) {
            $css_rules[] = "{$selector} .remove-file { background-color: {$attributes['rmfBg']}; }";
        }
        if ( ! empty( $attributes['rmfBgHover'] ) ) {
            $css_rules[] = "{$selector} .remove-file:hover { background-color: {$attributes['rmfBgHover']}; }";
        }

        // Remove/Check button - color
        if ( ! empty( $attributes['rmfColor'] ) ) {
            $css_rules[] = "{$selector} .remove-file { color: {$attributes['rmfColor']}; }";
        }
        if ( ! empty( $attributes['rmfColorHover'] ) ) {
            $css_rules[] = "{$selector} .remove-file:hover { color: {$attributes['rmfColorHover']}; }";
        }

        // Remove/Check button - border radius
        if ( isset( $attributes['rmfRadius'] ) ) {
            $css_rules[] = "{$selector} .remove-file { border-radius: {$attributes['rmfRadius']}px; }";
        }
        if ( isset( $attributes['rmfRadius_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .remove-file { border-radius: {$attributes['rmfRadius_tablet']}px; }";
        }
        if ( isset( $attributes['rmfRadius_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .remove-file { border-radius: {$attributes['rmfRadius_mobile']}px; }";
        }

        // Remove/Check button - size
        if ( isset( $attributes['rmfSize'] ) ) {
            $css_rules[] = "{$selector} .remove-file { width: {$attributes['rmfSize']}px; height: {$attributes['rmfSize']}px; }";
        }
        if ( isset( $attributes['rmfSize_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .remove-file { width: {$attributes['rmfSize_tablet']}px; height: {$attributes['rmfSize_tablet']}px; }";
        }
        if ( isset( $attributes['rmfSize_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .remove-file { width: {$attributes['rmfSize_mobile']}px; height: {$attributes['rmfSize_mobile']}px; }";
        }

        // Remove/Check button - icon size
        if ( isset( $attributes['rmfIconSize'] ) ) {
            $css_rules[] = "{$selector} .remove-file i { font-size: {$attributes['rmfIconSize']}px; }";
            $css_rules[] = "{$selector} .remove-file svg { width: {$attributes['rmfIconSize']}px; height: {$attributes['rmfIconSize']}px; }";
        }
        if ( isset( $attributes['rmfIconSize_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .remove-file i { font-size: {$attributes['rmfIconSize_tablet']}px; }";
            $tablet_rules[] = "{$selector} .remove-file svg { width: {$attributes['rmfIconSize_tablet']}px; height: {$attributes['rmfIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['rmfIconSize_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .remove-file i { font-size: {$attributes['rmfIconSize_mobile']}px; }";
            $mobile_rules[] = "{$selector} .remove-file svg { width: {$attributes['rmfIconSize_mobile']}px; height: {$attributes['rmfIconSize_mobile']}px; }";
        }

        // Select files - hover states
        if ( ! empty( $attributes['fileIconColorHover'] ) ) {
            $css_rules[] = "{$selector} .min-input:hover i { color: {$attributes['fileIconColorHover']}; }";
            $css_rules[] = "{$selector} .min-input:hover svg { fill: {$attributes['fileIconColorHover']}; }";
        }
        if ( ! empty( $attributes['fileBgHover'] ) ) {
            $css_rules[] = "{$selector} .min-input:hover { background-color: {$attributes['fileBgHover']}; }";
        }
        if ( ! empty( $attributes['fileBorderHover'] ) ) {
            $css_rules[] = "{$selector} .min-input:hover { border-color: {$attributes['fileBorderHover']}; }";
        }

        // ============================================
        // 12. POST SUBMITTED/UPDATED MESSAGE
        // ============================================

        // Align icon
        if ( ! empty( $attributes['welcAlign'] ) ) {
            $css_rules[] = "{$selector} .ts-edit-success { align-items: {$attributes['welcAlign']}; }";
        }

        // Text align
        if ( ! empty( $attributes['welcAlignText'] ) ) {
            $css_rules[] = "{$selector} .ts-edit-success { text-align: {$attributes['welcAlignText']}; }";
        }

        // Icon size
        if ( isset( $attributes['welcIcoSize'] ) ) {
            $css_rules[] = "{$selector} .ts-edit-success > i { font-size: {$attributes['welcIcoSize']}px; }";
            $css_rules[] = "{$selector} .ts-edit-success > svg { width: {$attributes['welcIcoSize']}px; height: {$attributes['welcIcoSize']}px; }";
        }
        if ( isset( $attributes['welcIcoSize_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-edit-success > i { font-size: {$attributes['welcIcoSize_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-edit-success > svg { width: {$attributes['welcIcoSize_tablet']}px; height: {$attributes['welcIcoSize_tablet']}px; }";
        }
        if ( isset( $attributes['welcIcoSize_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-edit-success > i { font-size: {$attributes['welcIcoSize_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-edit-success > svg { width: {$attributes['welcIcoSize_mobile']}px; height: {$attributes['welcIcoSize_mobile']}px; }";
        }

        // Icon color
        if ( ! empty( $attributes['welcIcoColor'] ) ) {
            $css_rules[] = "{$selector} .ts-edit-success > i { color: {$attributes['welcIcoColor']}; }";
            $css_rules[] = "{$selector} .ts-edit-success > svg { fill: {$attributes['welcIcoColor']}; }";
        }

        // Heading typography
        if ( ! empty( $attributes['welcHeadingT'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['welcHeadingT'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ts-edit-success h4 { {$typo_css} }";
            }
        }

        // Heading color
        if ( ! empty( $attributes['welcHeadingCol'] ) ) {
            $css_rules[] = "{$selector} .ts-edit-success h4 { color: {$attributes['welcHeadingCol']}; }";
        }

        // Heading top margin
        if ( isset( $attributes['welcTopMargin'] ) ) {
            $css_rules[] = "{$selector} .ts-edit-success h4 { margin-top: {$attributes['welcTopMargin']}px; }";
        }
        if ( isset( $attributes['welcTopMargin_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-edit-success h4 { margin-top: {$attributes['welcTopMargin_tablet']}px; }";
        }
        if ( isset( $attributes['welcTopMargin_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-edit-success h4 { margin-top: {$attributes['welcTopMargin_mobile']}px; }";
        }

        // ============================================
        // 13. TOOLTIPS
        // ============================================

        // Tooltip text color
        if ( ! empty( $attributes['tooltipColor'] ) ) {
            $css_rules[] = "{$selector} .has-tooltip::after { color: {$attributes['tooltipColor']}; }";
        }

        // Tooltip typography
        if ( ! empty( $attributes['tooltipTypo'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['tooltipTypo'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .has-tooltip::after { {$typo_css} }";
            }
        }

        // Tooltip background
        if ( ! empty( $attributes['tooltipBg'] ) ) {
            $css_rules[] = "{$selector} .has-tooltip::after { background-color: {$attributes['tooltipBg']}; }";
        }

        // Tooltip border radius
        if ( isset( $attributes['tooltipRadius'] ) ) {
            $css_rules[] = "{$selector} .has-tooltip::after { border-radius: {$attributes['tooltipRadius']}px; }";
        }
        if ( isset( $attributes['tooltipRadius_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .has-tooltip::after { border-radius: {$attributes['tooltipRadius_tablet']}px; }";
        }
        if ( isset( $attributes['tooltipRadius_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .has-tooltip::after { border-radius: {$attributes['tooltipRadius_mobile']}px; }";
        }

        // ============================================
        // 14. DIALOG
        // ============================================

        // Dialog icon color
        if ( ! empty( $attributes['dialogIconColor'] ) ) {
            $css_rules[] = "{$selector} .vx-dialog > svg { fill: {$attributes['dialogIconColor']}; }";
        }

        // Dialog icon size
        if ( isset( $attributes['dialogIconSize'] ) ) {
            $css_rules[] = "{$selector} .vx-dialog > svg { width: {$attributes['dialogIconSize']}px; height: {$attributes['dialogIconSize']}px; }";
        }
        if ( isset( $attributes['dialogIconSize_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .vx-dialog > svg { width: {$attributes['dialogIconSize_tablet']}px; height: {$attributes['dialogIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['dialogIconSize_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .vx-dialog > svg { width: {$attributes['dialogIconSize_mobile']}px; height: {$attributes['dialogIconSize_mobile']}px; }";
        }

        // Dialog text color
        if ( ! empty( $attributes['dialogColor'] ) ) {
            $css_rules[] = "{$selector} .vx-dialog-content { color: {$attributes['dialogColor']}; }";
        }

        // Dialog typography
        if ( ! empty( $attributes['dialogTypo'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['dialogTypo'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .vx-dialog-content { {$typo_css} }";
            }
        }

        // Dialog background
        if ( ! empty( $attributes['dialogBg'] ) ) {
            $css_rules[] = "{$selector} .vx-dialog-content { background-color: {$attributes['dialogBg']}; }";
        }

        // Dialog border radius
        if ( isset( $attributes['dialogRadius'] ) ) {
            $css_rules[] = "{$selector} .vx-dialog-content { border-radius: {$attributes['dialogRadius']}px; }";
        }
        if ( isset( $attributes['dialogRadius_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .vx-dialog-content { border-radius: {$attributes['dialogRadius_tablet']}px; }";
        }
        if ( isset( $attributes['dialogRadius_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .vx-dialog-content { border-radius: {$attributes['dialogRadius_mobile']}px; }";
        }

        // Dialog box shadow
        if ( ! empty( $attributes['dialogShadow'] ) ) {
            $shadow_css = self::generate_box_shadow_css( $attributes['dialogShadow'] );
            if ( $shadow_css ) {
                $css_rules[] = "{$selector} .vx-dialog-content { box-shadow: {$shadow_css}; }";
            }
        }

        // Dialog border
        if ( ! empty( $attributes['dialogBorder'] ) ) {
            $border_css = self::generate_border_css( $attributes['dialogBorder'] );
            if ( $border_css ) {
                $css_rules[] = "{$selector} .vx-dialog-content { border: {$border_css}; }";
            }
        }

        // ============================================
        // FIELD STYLE TAB - 18 Accordions
        // These provide additional field-specific styling
        // ============================================

        // ============================================
        // FST 1. FIELDS GENERAL
        // ============================================

        // Field label typography
        if ( ! empty( $attributes['fieldLabelTypo'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['fieldLabelTypo'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ts-form-group:not(.ui-heading-field) label { {$typo_css} }";
            }
        }

        // Field label color
        if ( ! empty( $attributes['fieldLabelColor'] ) ) {
            $css_rules[] = "{$selector} .ts-form-group:not(.ui-heading-field) label { color: {$attributes['fieldLabelColor']}; }";
        }

        // Field validation typography
        if ( ! empty( $attributes['fieldValidationTypo'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['fieldValidationTypo'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .field-required { {$typo_css} }";
            }
        }

        // Field validation default color
        if ( ! empty( $attributes['fieldValidationColor'] ) ) {
            $css_rules[] = "{$selector} .field-required { color: {$attributes['fieldValidationColor']}; }";
        }

        // Field validation error color
        if ( ! empty( $attributes['fieldErrorColor'] ) ) {
            $css_rules[] = "{$selector} .field-required.vx-error { color: {$attributes['fieldErrorColor']}; }";
        }

        // ============================================
        // FST 2. INPUT & TEXTAREA (Normal/Hover/Active)
        // ============================================

        // Placeholder color
        if ( ! empty( $attributes['inputPlaceholderColor'] ) ) {
            $css_rules[] = "{$selector} .ts-form input.ts-filter::placeholder, {$selector} .ts-form textarea.ts-filter::placeholder { color: {$attributes['inputPlaceholderColor']}; }";
        }

        // Placeholder typography
        if ( ! empty( $attributes['inputPlaceholderTypo'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['inputPlaceholderTypo'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ts-form input.ts-filter::placeholder, {$selector} .ts-form textarea.ts-filter::placeholder { {$typo_css} }";
            }
        }

        // Value (text) color
        if ( ! empty( $attributes['inputTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-form input.ts-filter, {$selector} .ts-form textarea.ts-filter { color: {$attributes['inputTextColor']}; }";
        }

        // Value typography
        if ( ! empty( $attributes['inputTextTypo'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['inputTextTypo'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ts-form input.ts-filter, {$selector} .ts-form textarea.ts-filter { {$typo_css} }";
            }
        }

        // Background color
        if ( ! empty( $attributes['inputBgColor'] ) ) {
            $css_rules[] = "{$selector} .ts-form input.ts-filter, {$selector} .ts-form textarea.ts-filter { background: {$attributes['inputBgColor']}; }";
        }

        // Border
        if ( ! empty( $attributes['inputBorder'] ) ) {
            $border_css = self::generate_border_css( $attributes['inputBorder'] );
            if ( $border_css ) {
                $css_rules[] = "{$selector} .ts-form textarea.ts-filter, {$selector} .ts-form input.ts-filter { border: {$border_css}; }";
            }
        }

        // Input border radius
        if ( isset( $attributes['inputBorderRadius'] ) ) {
            $css_rules[] = "{$selector} .ts-form input.ts-filter { border-radius: {$attributes['inputBorderRadius']}px; }";
        }
        if ( isset( $attributes['inputBorderRadius_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-form input.ts-filter { border-radius: {$attributes['inputBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['inputBorderRadius_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-form input.ts-filter { border-radius: {$attributes['inputBorderRadius_mobile']}px; }";
        }

        // Textarea border radius
        if ( isset( $attributes['textareaBorderRadius'] ) ) {
            $css_rules[] = "{$selector} .ts-form textarea.ts-filter { border-radius: {$attributes['textareaBorderRadius']}px; }";
        }
        if ( isset( $attributes['textareaBorderRadius_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-form textarea.ts-filter { border-radius: {$attributes['textareaBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['textareaBorderRadius_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-form textarea.ts-filter { border-radius: {$attributes['textareaBorderRadius_mobile']}px; }";
        }

        // Input height
        if ( isset( $attributes['inputHeight'] ) ) {
            $css_rules[] = "{$selector} .ts-form input.ts-filter { height: {$attributes['inputHeight']}px; }";
        }
        if ( isset( $attributes['inputHeight_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-form input.ts-filter { height: {$attributes['inputHeight_tablet']}px; }";
        }
        if ( isset( $attributes['inputHeight_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-form input.ts-filter { height: {$attributes['inputHeight_mobile']}px; }";
        }

        // Textarea min-height
        if ( isset( $attributes['textareaHeight'] ) ) {
            $css_rules[] = "{$selector} .ts-form textarea.ts-filter { min-height: {$attributes['textareaHeight']}px; }";
        }
        if ( isset( $attributes['textareaHeight_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-form textarea.ts-filter { min-height: {$attributes['textareaHeight_tablet']}px; }";
        }
        if ( isset( $attributes['textareaHeight_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-form textarea.ts-filter { min-height: {$attributes['textareaHeight_mobile']}px; }";
        }

        // Textarea padding
        if ( ! empty( $attributes['textareaPadding'] ) ) {
            $dims_css = self::generate_dimensions_css( $attributes['textareaPadding'], 'padding' );
            if ( $dims_css ) {
                $css_rules[] = "{$selector} .ts-form textarea.ts-filter { {$dims_css} }";
            }
        }

        // Input with icon - padding
        if ( ! empty( $attributes['inputIconPadding'] ) ) {
            $dims_css = self::generate_dimensions_css( $attributes['inputIconPadding'], 'padding' );
            if ( $dims_css ) {
                $css_rules[] = "{$selector} .ts-input-icon input { {$dims_css} }";
            }
        }

        // Input with icon - icon color
        if ( ! empty( $attributes['inputIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-input-icon i { color: {$attributes['inputIconColor']}; }";
            $css_rules[] = "{$selector} .ts-input-icon svg { fill: {$attributes['inputIconColor']}; }";
        }

        // Input with icon - icon size
        if ( isset( $attributes['inputIconSize'] ) ) {
            $css_rules[] = "{$selector} .ts-input-icon i { font-size: {$attributes['inputIconSize']}px; }";
            $css_rules[] = "{$selector} .ts-input-icon svg { width: {$attributes['inputIconSize']}px; height: {$attributes['inputIconSize']}px; }";
        }
        if ( isset( $attributes['inputIconSize_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-input-icon i { font-size: {$attributes['inputIconSize_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-input-icon svg { width: {$attributes['inputIconSize_tablet']}px; height: {$attributes['inputIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['inputIconSize_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-input-icon i { font-size: {$attributes['inputIconSize_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-input-icon svg { width: {$attributes['inputIconSize_mobile']}px; height: {$attributes['inputIconSize_mobile']}px; }";
        }

        // Hover states - placeholder
        if ( ! empty( $attributes['inputPlaceholderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-form input.ts-filter:hover::placeholder, {$selector} .ts-form textarea.ts-filter:hover::placeholder { color: {$attributes['inputPlaceholderColorHover']}; }";
        }

        // Hover states - text color
        if ( ! empty( $attributes['inputTextColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-form input.ts-filter:hover, {$selector} .ts-form textarea.ts-filter:hover { color: {$attributes['inputTextColorHover']}; }";
        }

        // Hover states - background
        if ( ! empty( $attributes['inputBgColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-form input.ts-filter:hover, {$selector} .ts-form textarea.ts-filter:hover { background: {$attributes['inputBgColorHover']}; }";
        }

        // Hover states - border color
        if ( ! empty( $attributes['inputBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-form input.ts-filter:hover, {$selector} .ts-form textarea.ts-filter:hover { border-color: {$attributes['inputBorderColorHover']}; }";
        }

        // Hover states - icon color
        if ( ! empty( $attributes['inputIconColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-input-icon:hover i { color: {$attributes['inputIconColorHover']}; }";
            $css_rules[] = "{$selector} .ts-input-icon:hover svg { fill: {$attributes['inputIconColorHover']}; }";
        }

        // Active/Focus states - placeholder
        if ( ! empty( $attributes['inputPlaceholderColorActive'] ) ) {
            $css_rules[] = "{$selector} .ts-form input.ts-filter:focus::placeholder, {$selector} .ts-form textarea.ts-filter:focus::placeholder { color: {$attributes['inputPlaceholderColorActive']}; }";
        }

        // Active/Focus states - text color
        if ( ! empty( $attributes['inputTextColorActive'] ) ) {
            $css_rules[] = "{$selector} .ts-form input.ts-filter:focus, {$selector} .ts-form textarea.ts-filter:focus { color: {$attributes['inputTextColorActive']}; }";
        }

        // Active/Focus states - background
        if ( ! empty( $attributes['inputBgColorActive'] ) ) {
            $css_rules[] = "{$selector} .ts-form input.ts-filter:focus, {$selector} .ts-form textarea.ts-filter:focus { background: {$attributes['inputBgColorActive']}; }";
        }

        // Active/Focus states - border color
        if ( ! empty( $attributes['inputBorderColorActive'] ) ) {
            $css_rules[] = "{$selector} .ts-form input.ts-filter:focus, {$selector} .ts-form textarea.ts-filter:focus { border-color: {$attributes['inputBorderColorActive']}; }";
        }

        // Active/Focus states - icon color
        if ( ! empty( $attributes['inputIconColorActive'] ) ) {
            $css_rules[] = "{$selector} .ts-input-icon input:focus ~ i { color: {$attributes['inputIconColorActive']}; }";
            $css_rules[] = "{$selector} .ts-input-icon input:focus ~ svg { fill: {$attributes['inputIconColorActive']}; }";
        }

        // ============================================
        // FST 3. INPUT SUFFIX
        // ============================================

        // Suffix text color
        if ( ! empty( $attributes['suffixTextColor'] ) ) {
            $css_rules[] = "{$selector} .input-container .input-suffix { color: {$attributes['suffixTextColor']}; }";
        }

        // Suffix typography
        if ( ! empty( $attributes['suffixTextTypo'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['suffixTextTypo'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .input-container .input-suffix { {$typo_css} }";
            }
        }

        // Suffix background
        if ( ! empty( $attributes['suffixBgColor'] ) ) {
            $css_rules[] = "{$selector} .input-container .input-suffix { background-color: {$attributes['suffixBgColor']}; }";
        }

        // Suffix border radius
        if ( isset( $attributes['suffixBorderRadius'] ) ) {
            $css_rules[] = "{$selector} .input-container .input-suffix { border-radius: {$attributes['suffixBorderRadius']}px; }";
        }
        if ( isset( $attributes['suffixBorderRadius_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .input-container .input-suffix { border-radius: {$attributes['suffixBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['suffixBorderRadius_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .input-container .input-suffix { border-radius: {$attributes['suffixBorderRadius_mobile']}px; }";
        }

        // Suffix box shadow
        if ( ! empty( $attributes['suffixBoxShadow'] ) ) {
            $shadow_css = self::generate_box_shadow_css( $attributes['suffixBoxShadow'] );
            if ( $shadow_css ) {
                $css_rules[] = "{$selector} .input-container .input-suffix { box-shadow: {$shadow_css}; }";
            }
        }

        // Suffix margin
        if ( isset( $attributes['suffixSideMargin'] ) ) {
            $css_rules[] = "{$selector} .input-container .input-suffix { right: {$attributes['suffixSideMargin']}px; }";
        }
        if ( isset( $attributes['suffixSideMargin_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .input-container .input-suffix { right: {$attributes['suffixSideMargin_tablet']}px; }";
        }
        if ( isset( $attributes['suffixSideMargin_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .input-container .input-suffix { right: {$attributes['suffixSideMargin_mobile']}px; }";
        }

        // Suffix icon color
        if ( ! empty( $attributes['suffixIconColor'] ) ) {
            $css_rules[] = "{$selector} .input-container .input-suffix i { color: {$attributes['suffixIconColor']}; }";
            $css_rules[] = "{$selector} .input-container .input-suffix svg { fill: {$attributes['suffixIconColor']}; }";
        }

        // ============================================
        // FST 4. POPUP BUTTON (Select/Date/Time fields)
        // ============================================

        // Normal state - text color
        if ( ! empty( $attributes['popupTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-form div.ts-filter-text { color: {$attributes['popupTextColor']}; }";
        }

        // Normal state - typography
        if ( ! empty( $attributes['popupTextTypo'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['popupTextTypo'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ts-form div.ts-filter { {$typo_css} }";
            }
        }

        // Normal state - background
        if ( ! empty( $attributes['popupBgColor'] ) ) {
            $css_rules[] = "{$selector} .ts-form div.ts-filter { background: {$attributes['popupBgColor']}; }";
        }

        // Normal state - border
        if ( ! empty( $attributes['popupBorderGroup'] ) ) {
            $border_css = self::generate_border_css( $attributes['popupBorderGroup'] );
            if ( $border_css ) {
                $css_rules[] = "{$selector} div.ts-filter { border: {$border_css}; }";
            }
        }

        // Normal state - border radius
        if ( isset( $attributes['popupBorderRadiusNormal'] ) ) {
            $css_rules[] = "{$selector} .ts-form div.ts-filter { border-radius: {$attributes['popupBorderRadiusNormal']}px; }";
        }
        if ( isset( $attributes['popupBorderRadiusNormal_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-form div.ts-filter { border-radius: {$attributes['popupBorderRadiusNormal_tablet']}px; }";
        }
        if ( isset( $attributes['popupBorderRadiusNormal_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-form div.ts-filter { border-radius: {$attributes['popupBorderRadiusNormal_mobile']}px; }";
        }

        // Normal state - height
        if ( isset( $attributes['popupHeightNormal'] ) ) {
            $css_rules[] = "{$selector} .ts-form div.ts-filter { height: {$attributes['popupHeightNormal']}px; }";
        }
        if ( isset( $attributes['popupHeightNormal_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-form div.ts-filter { height: {$attributes['popupHeightNormal_tablet']}px; }";
        }
        if ( isset( $attributes['popupHeightNormal_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-form div.ts-filter { height: {$attributes['popupHeightNormal_mobile']}px; }";
        }

        // Normal state - box shadow
        if ( ! empty( $attributes['popupBoxShadowNormal'] ) ) {
            $shadow_css = self::generate_box_shadow_css( $attributes['popupBoxShadowNormal'] );
            if ( $shadow_css ) {
                $css_rules[] = "{$selector} div.ts-filter { box-shadow: {$shadow_css}; }";
            }
        }

        // Icon color
        if ( ! empty( $attributes['popupIconColorNormal'] ) ) {
            $css_rules[] = "{$selector} .ts-form div.ts-filter i { color: {$attributes['popupIconColorNormal']}; }";
            $css_rules[] = "{$selector} .ts-form div.ts-filter svg { fill: {$attributes['popupIconColorNormal']}; }";
        }

        // Icon size
        if ( isset( $attributes['popupIconSizeNormal'] ) ) {
            $css_rules[] = "{$selector} .ts-form div.ts-filter i { font-size: {$attributes['popupIconSizeNormal']}px; }";
            $css_rules[] = "{$selector} .ts-form div.ts-filter svg { width: {$attributes['popupIconSizeNormal']}px; height: {$attributes['popupIconSizeNormal']}px; }";
        }
        if ( isset( $attributes['popupIconSizeNormal_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-form div.ts-filter i { font-size: {$attributes['popupIconSizeNormal_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-form div.ts-filter svg { width: {$attributes['popupIconSizeNormal_tablet']}px; height: {$attributes['popupIconSizeNormal_tablet']}px; }";
        }
        if ( isset( $attributes['popupIconSizeNormal_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-form div.ts-filter i { font-size: {$attributes['popupIconSizeNormal_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-form div.ts-filter svg { width: {$attributes['popupIconSizeNormal_mobile']}px; height: {$attributes['popupIconSizeNormal_mobile']}px; }";
        }

        // Hover state - text color
        if ( ! empty( $attributes['popupTextColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-form div.ts-filter:hover div.ts-filter-text { color: {$attributes['popupTextColorHover']}; }";
        }

        // Hover state - background
        if ( ! empty( $attributes['popupBgColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-form div.ts-filter:hover { background: {$attributes['popupBgColorHover']}; }";
        }

        // Hover state - border color
        if ( ! empty( $attributes['popupBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-form div.ts-filter:hover { border-color: {$attributes['popupBorderColorHover']}; }";
        }

        // Hover state - icon color
        if ( ! empty( $attributes['popupIconColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-form div.ts-filter:hover i { color: {$attributes['popupIconColorHover']}; }";
            $css_rules[] = "{$selector} .ts-form div.ts-filter:hover svg { fill: {$attributes['popupIconColorHover']}; }";
        }

        // Filled state - text color
        if ( ! empty( $attributes['popupTextColorFilled'] ) ) {
            $css_rules[] = "{$selector} .ts-form div.ts-filter.ts-filled div.ts-filter-text { color: {$attributes['popupTextColorFilled']}; }";
        }

        // Filled state - background
        if ( ! empty( $attributes['popupBgColorFilled'] ) ) {
            $css_rules[] = "{$selector} .ts-form div.ts-filter.ts-filled { background: {$attributes['popupBgColorFilled']}; }";
        }

        // Filled state - border color
        if ( ! empty( $attributes['popupBorderColorFilled'] ) ) {
            $css_rules[] = "{$selector} .ts-form div.ts-filter.ts-filled { border-color: {$attributes['popupBorderColorFilled']}; }";
        }

        // Filled state - icon color
        if ( ! empty( $attributes['popupIconColorFilled'] ) ) {
            $css_rules[] = "{$selector} .ts-form div.ts-filter.ts-filled i { color: {$attributes['popupIconColorFilled']}; }";
            $css_rules[] = "{$selector} .ts-form div.ts-filter.ts-filled svg { fill: {$attributes['popupIconColorFilled']}; }";
        }

        // ============================================
        // FST 5. INLINE TERMS/LIST (Chips)
        // ============================================

        // Normal - text color
        if ( ! empty( $attributes['chipTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-term-dropdown .ts-term { color: {$attributes['chipTextColor']}; }";
        }

        // Normal - typography
        if ( ! empty( $attributes['chipTextTypo'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['chipTextTypo'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ts-term-dropdown .ts-term { {$typo_css} }";
            }
        }

        // Normal - background
        if ( ! empty( $attributes['chipBgColor'] ) ) {
            $css_rules[] = "{$selector} .ts-term-dropdown .ts-term { background-color: {$attributes['chipBgColor']}; }";
        }

        // Normal - border
        if ( ! empty( $attributes['chipBorder'] ) ) {
            $border_css = self::generate_border_css( $attributes['chipBorder'] );
            if ( $border_css ) {
                $css_rules[] = "{$selector} .ts-term-dropdown .ts-term { border: {$border_css}; }";
            }
        }

        // Normal - border radius
        if ( isset( $attributes['chipBorderRadius'] ) ) {
            $css_rules[] = "{$selector} .ts-term-dropdown .ts-term { border-radius: {$attributes['chipBorderRadius']}px; }";
        }
        if ( isset( $attributes['chipBorderRadius_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-term-dropdown .ts-term { border-radius: {$attributes['chipBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['chipBorderRadius_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-term-dropdown .ts-term { border-radius: {$attributes['chipBorderRadius_mobile']}px; }";
        }

        // Icon color
        if ( ! empty( $attributes['chipIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-term-dropdown .ts-term i { color: {$attributes['chipIconColor']}; }";
            $css_rules[] = "{$selector} .ts-term-dropdown .ts-term svg { fill: {$attributes['chipIconColor']}; }";
        }

        // Icon size
        if ( isset( $attributes['chipIconSize'] ) ) {
            $css_rules[] = "{$selector} .ts-term-dropdown .ts-term i { font-size: {$attributes['chipIconSize']}px; }";
            $css_rules[] = "{$selector} .ts-term-dropdown .ts-term svg { width: {$attributes['chipIconSize']}px; height: {$attributes['chipIconSize']}px; }";
        }
        if ( isset( $attributes['chipIconSize_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-term-dropdown .ts-term i { font-size: {$attributes['chipIconSize_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-term-dropdown .ts-term svg { width: {$attributes['chipIconSize_tablet']}px; height: {$attributes['chipIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['chipIconSize_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-term-dropdown .ts-term i { font-size: {$attributes['chipIconSize_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-term-dropdown .ts-term svg { width: {$attributes['chipIconSize_mobile']}px; height: {$attributes['chipIconSize_mobile']}px; }";
        }

        // Hover - text color
        if ( ! empty( $attributes['chipTextColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-term-dropdown .ts-term:hover { color: {$attributes['chipTextColorHover']}; }";
        }

        // Hover - background
        if ( ! empty( $attributes['chipBgColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-term-dropdown .ts-term:hover { background-color: {$attributes['chipBgColorHover']}; }";
        }

        // Hover - border color
        if ( ! empty( $attributes['chipBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-term-dropdown .ts-term:hover { border-color: {$attributes['chipBorderColorHover']}; }";
        }

        // Hover - icon color
        if ( ! empty( $attributes['chipIconColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-term-dropdown .ts-term:hover i { color: {$attributes['chipIconColorHover']}; }";
            $css_rules[] = "{$selector} .ts-term-dropdown .ts-term:hover svg { fill: {$attributes['chipIconColorHover']}; }";
        }

        // Selected - text color
        if ( ! empty( $attributes['chipTextColorSelected'] ) ) {
            $css_rules[] = "{$selector} .ts-term-dropdown .ts-term.ts-selected { color: {$attributes['chipTextColorSelected']}; }";
        }

        // Selected - background
        if ( ! empty( $attributes['chipBgColorSelected'] ) ) {
            $css_rules[] = "{$selector} .ts-term-dropdown .ts-term.ts-selected { background-color: {$attributes['chipBgColorSelected']}; }";
        }

        // Selected - border color
        if ( ! empty( $attributes['chipBorderColorSelected'] ) ) {
            $css_rules[] = "{$selector} .ts-term-dropdown .ts-term.ts-selected { border-color: {$attributes['chipBorderColorSelected']}; }";
        }

        // Selected - icon color
        if ( ! empty( $attributes['chipIconColorSelected'] ) ) {
            $css_rules[] = "{$selector} .ts-term-dropdown .ts-term.ts-selected i { color: {$attributes['chipIconColorSelected']}; }";
            $css_rules[] = "{$selector} .ts-term-dropdown .ts-term.ts-selected svg { fill: {$attributes['chipIconColorSelected']}; }";
        }

        // ============================================
        // FST 6. INLINE CHECKBOX
        // ============================================

        // Checkbox size
        if ( isset( $attributes['inlineCheckboxSize'] ) ) {
            $css_rules[] = "{$selector} .ts-checkbox-container { width: {$attributes['inlineCheckboxSize']}px; height: {$attributes['inlineCheckboxSize']}px; }";
        }
        if ( isset( $attributes['inlineCheckboxSize_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-checkbox-container { width: {$attributes['inlineCheckboxSize_tablet']}px; height: {$attributes['inlineCheckboxSize_tablet']}px; }";
        }
        if ( isset( $attributes['inlineCheckboxSize_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-checkbox-container { width: {$attributes['inlineCheckboxSize_mobile']}px; height: {$attributes['inlineCheckboxSize_mobile']}px; }";
        }

        // Checkbox border color
        if ( ! empty( $attributes['inlineCheckboxBorderColor'] ) ) {
            $css_rules[] = "{$selector} .ts-checkbox-container { border-color: {$attributes['inlineCheckboxBorderColor']}; }";
        }

        // Checkbox border radius
        if ( isset( $attributes['inlineCheckboxBorderRadius'] ) ) {
            $css_rules[] = "{$selector} .ts-checkbox-container { border-radius: {$attributes['inlineCheckboxBorderRadius']}px; }";
        }
        if ( isset( $attributes['inlineCheckboxBorderRadius_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-checkbox-container { border-radius: {$attributes['inlineCheckboxBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['inlineCheckboxBorderRadius_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-checkbox-container { border-radius: {$attributes['inlineCheckboxBorderRadius_mobile']}px; }";
        }

        // Checked background
        if ( ! empty( $attributes['inlineCheckboxBgChecked'] ) ) {
            $css_rules[] = "{$selector} .ts-checkbox:checked + .ts-checkbox-container { background-color: {$attributes['inlineCheckboxBgChecked']}; }";
        }

        // Checked border color
        if ( ! empty( $attributes['inlineCheckboxBorderColorChecked'] ) ) {
            $css_rules[] = "{$selector} .ts-checkbox:checked + .ts-checkbox-container { border-color: {$attributes['inlineCheckboxBorderColorChecked']}; }";
        }

        // Check icon color
        if ( ! empty( $attributes['inlineCheckboxIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-checkbox:checked + .ts-checkbox-container i { color: {$attributes['inlineCheckboxIconColor']}; }";
            $css_rules[] = "{$selector} .ts-checkbox:checked + .ts-checkbox-container svg { fill: {$attributes['inlineCheckboxIconColor']}; }";
        }

        // Check icon size
        if ( isset( $attributes['inlineCheckboxIconSize'] ) ) {
            $css_rules[] = "{$selector} .ts-checkbox-container i { font-size: {$attributes['inlineCheckboxIconSize']}px; }";
            $css_rules[] = "{$selector} .ts-checkbox-container svg { width: {$attributes['inlineCheckboxIconSize']}px; height: {$attributes['inlineCheckboxIconSize']}px; }";
        }
        if ( isset( $attributes['inlineCheckboxIconSize_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-checkbox-container i { font-size: {$attributes['inlineCheckboxIconSize_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-checkbox-container svg { width: {$attributes['inlineCheckboxIconSize_tablet']}px; height: {$attributes['inlineCheckboxIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['inlineCheckboxIconSize_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-checkbox-container i { font-size: {$attributes['inlineCheckboxIconSize_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-checkbox-container svg { width: {$attributes['inlineCheckboxIconSize_mobile']}px; height: {$attributes['inlineCheckboxIconSize_mobile']}px; }";
        }

        // Label typography
        if ( ! empty( $attributes['inlineCheckboxLabelTypo'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['inlineCheckboxLabelTypo'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ts-checkbox-container ~ p { {$typo_css} }";
            }
        }

        // Label color
        if ( ! empty( $attributes['inlineCheckboxLabelColor'] ) ) {
            $css_rules[] = "{$selector} .ts-checkbox-container ~ p { color: {$attributes['inlineCheckboxLabelColor']}; }";
        }

        // ============================================
        // FST 7. INLINE RADIO
        // ============================================

        // Radio size
        if ( isset( $attributes['inlineRadioSize'] ) ) {
            $css_rules[] = "{$selector} .ts-radio-container { width: {$attributes['inlineRadioSize']}px; height: {$attributes['inlineRadioSize']}px; }";
        }
        if ( isset( $attributes['inlineRadioSize_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-radio-container { width: {$attributes['inlineRadioSize_tablet']}px; height: {$attributes['inlineRadioSize_tablet']}px; }";
        }
        if ( isset( $attributes['inlineRadioSize_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-radio-container { width: {$attributes['inlineRadioSize_mobile']}px; height: {$attributes['inlineRadioSize_mobile']}px; }";
        }

        // Radio border color
        if ( ! empty( $attributes['inlineRadioBorderColor'] ) ) {
            $css_rules[] = "{$selector} .ts-radio-container { border-color: {$attributes['inlineRadioBorderColor']}; }";
        }

        // Checked background
        if ( ! empty( $attributes['inlineRadioBgChecked'] ) ) {
            $css_rules[] = "{$selector} .container-radio:checked + .ts-radio-container::before { background-color: {$attributes['inlineRadioBgChecked']}; }";
        }

        // Checked border color
        if ( ! empty( $attributes['inlineRadioBorderColorChecked'] ) ) {
            $css_rules[] = "{$selector} .container-radio:checked + .ts-radio-container { border-color: {$attributes['inlineRadioBorderColorChecked']}; }";
        }

        // Label typography
        if ( ! empty( $attributes['inlineRadioLabelTypo'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['inlineRadioLabelTypo'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ts-radio-container ~ p { {$typo_css} }";
            }
        }

        // Label color
        if ( ! empty( $attributes['inlineRadioLabelColor'] ) ) {
            $css_rules[] = "{$selector} .ts-radio-container ~ p { color: {$attributes['inlineRadioLabelColor']}; }";
        }

        // ============================================
        // FST 8. SWITCHER
        // ============================================

        // Switch width
        if ( isset( $attributes['switchWidth'] ) ) {
            $css_rules[] = "{$selector} .switch-slider { width: {$attributes['switchWidth']}px; }";
        }
        if ( isset( $attributes['switchWidth_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .switch-slider { width: {$attributes['switchWidth_tablet']}px; }";
        }
        if ( isset( $attributes['switchWidth_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .switch-slider { width: {$attributes['switchWidth_mobile']}px; }";
        }

        // Switch height
        if ( isset( $attributes['switchHeight'] ) ) {
            $css_rules[] = "{$selector} .switch-slider { height: {$attributes['switchHeight']}px; }";
        }
        if ( isset( $attributes['switchHeight_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .switch-slider { height: {$attributes['switchHeight_tablet']}px; }";
        }
        if ( isset( $attributes['switchHeight_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .switch-slider { height: {$attributes['switchHeight_mobile']}px; }";
        }

        // Switch background (off)
        if ( ! empty( $attributes['switchBgOff'] ) ) {
            $css_rules[] = "{$selector} .switch-slider { background-color: {$attributes['switchBgOff']}; }";
        }

        // Switch background (on)
        if ( ! empty( $attributes['switchBgOn'] ) ) {
            $css_rules[] = "{$selector} .onoffswitch-checkbox:checked + .switch-slider { background-color: {$attributes['switchBgOn']}; }";
        }

        // Slider background
        if ( ! empty( $attributes['switchSliderBg'] ) ) {
            $css_rules[] = "{$selector} .switch-slider::before { background-color: {$attributes['switchSliderBg']}; }";
        }

        // Label typography
        if ( ! empty( $attributes['switchLabelTypo'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['switchLabelTypo'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .onoffswitch + p { {$typo_css} }";
            }
        }

        // Label color
        if ( ! empty( $attributes['switchLabelColor'] ) ) {
            $css_rules[] = "{$selector} .onoffswitch + p { color: {$attributes['switchLabelColor']}; }";
        }

        // ============================================
        // FST 9. NUMBER STEPPER
        // ============================================

        // Button size
        if ( isset( $attributes['stepperButtonSize'] ) ) {
            $css_rules[] = "{$selector} .ts-stepper-input button { width: {$attributes['stepperButtonSize']}px; height: {$attributes['stepperButtonSize']}px; }";
        }
        if ( isset( $attributes['stepperButtonSize_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-stepper-input button { width: {$attributes['stepperButtonSize_tablet']}px; height: {$attributes['stepperButtonSize_tablet']}px; }";
        }
        if ( isset( $attributes['stepperButtonSize_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-stepper-input button { width: {$attributes['stepperButtonSize_mobile']}px; height: {$attributes['stepperButtonSize_mobile']}px; }";
        }

        // Button background
        if ( ! empty( $attributes['stepperButtonBg'] ) ) {
            $css_rules[] = "{$selector} .ts-stepper-input button { background-color: {$attributes['stepperButtonBg']}; }";
        }

        // Button border
        if ( ! empty( $attributes['stepperButtonBorder'] ) ) {
            $border_css = self::generate_border_css( $attributes['stepperButtonBorder'] );
            if ( $border_css ) {
                $css_rules[] = "{$selector} .ts-stepper-input button { border: {$border_css}; }";
            }
        }

        // Button border radius
        if ( isset( $attributes['stepperButtonBorderRadius'] ) ) {
            $css_rules[] = "{$selector} .ts-stepper-input button { border-radius: {$attributes['stepperButtonBorderRadius']}px; }";
        }
        if ( isset( $attributes['stepperButtonBorderRadius_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-stepper-input button { border-radius: {$attributes['stepperButtonBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['stepperButtonBorderRadius_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-stepper-input button { border-radius: {$attributes['stepperButtonBorderRadius_mobile']}px; }";
        }

        // Icon color
        if ( ! empty( $attributes['stepperIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-stepper-input button i { color: {$attributes['stepperIconColor']}; }";
            $css_rules[] = "{$selector} .ts-stepper-input button svg { fill: {$attributes['stepperIconColor']}; }";
        }

        // Icon size
        if ( isset( $attributes['stepperIconSize'] ) ) {
            $css_rules[] = "{$selector} .ts-stepper-input button i { font-size: {$attributes['stepperIconSize']}px; }";
            $css_rules[] = "{$selector} .ts-stepper-input button svg { width: {$attributes['stepperIconSize']}px; height: {$attributes['stepperIconSize']}px; }";
        }
        if ( isset( $attributes['stepperIconSize_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-stepper-input button i { font-size: {$attributes['stepperIconSize_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-stepper-input button svg { width: {$attributes['stepperIconSize_tablet']}px; height: {$attributes['stepperIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['stepperIconSize_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-stepper-input button i { font-size: {$attributes['stepperIconSize_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-stepper-input button svg { width: {$attributes['stepperIconSize_mobile']}px; height: {$attributes['stepperIconSize_mobile']}px; }";
        }

        // Hover - background
        if ( ! empty( $attributes['stepperButtonBgHover'] ) ) {
            $css_rules[] = "{$selector} .ts-stepper-input button:hover { background-color: {$attributes['stepperButtonBgHover']}; }";
        }

        // Hover - border color
        if ( ! empty( $attributes['stepperButtonBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-stepper-input button:hover { border-color: {$attributes['stepperButtonBorderColorHover']}; }";
        }

        // Hover - icon color
        if ( ! empty( $attributes['stepperIconColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-stepper-input button:hover i { color: {$attributes['stepperIconColorHover']}; }";
            $css_rules[] = "{$selector} .ts-stepper-input button:hover svg { fill: {$attributes['stepperIconColorHover']}; }";
        }

        // ============================================
        // FST 10. REPEATER
        // ============================================

        // Item background
        if ( ! empty( $attributes['repeaterItemBg'] ) ) {
            $css_rules[] = "{$selector} .ts-repeater li { background-color: {$attributes['repeaterItemBg']}; }";
        }

        // Item border
        if ( ! empty( $attributes['repeaterItemBorder'] ) ) {
            $border_css = self::generate_border_css( $attributes['repeaterItemBorder'] );
            if ( $border_css ) {
                $css_rules[] = "{$selector} .ts-repeater li { border: {$border_css}; }";
            }
        }

        // Item border radius
        if ( isset( $attributes['repeaterItemBorderRadius'] ) ) {
            $css_rules[] = "{$selector} .ts-repeater li { border-radius: {$attributes['repeaterItemBorderRadius']}px; }";
        }
        if ( isset( $attributes['repeaterItemBorderRadius_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-repeater li { border-radius: {$attributes['repeaterItemBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['repeaterItemBorderRadius_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-repeater li { border-radius: {$attributes['repeaterItemBorderRadius_mobile']}px; }";
        }

        // Remove button background
        if ( ! empty( $attributes['repeaterRemoveButtonBg'] ) ) {
            $css_rules[] = "{$selector} .ts-repeater .ts-repeater-remove { background-color: {$attributes['repeaterRemoveButtonBg']}; }";
        }

        // Remove button icon color
        if ( ! empty( $attributes['repeaterRemoveButtonIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-repeater .ts-repeater-remove i { color: {$attributes['repeaterRemoveButtonIconColor']}; }";
            $css_rules[] = "{$selector} .ts-repeater .ts-repeater-remove svg { fill: {$attributes['repeaterRemoveButtonIconColor']}; }";
        }

        // Remove button hover background
        if ( ! empty( $attributes['repeaterRemoveButtonBgHover'] ) ) {
            $css_rules[] = "{$selector} .ts-repeater .ts-repeater-remove:hover { background-color: {$attributes['repeaterRemoveButtonBgHover']}; }";
        }

        // Remove button hover icon color
        if ( ! empty( $attributes['repeaterRemoveButtonIconColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-repeater .ts-repeater-remove:hover i { color: {$attributes['repeaterRemoveButtonIconColorHover']}; }";
            $css_rules[] = "{$selector} .ts-repeater .ts-repeater-remove:hover svg { fill: {$attributes['repeaterRemoveButtonIconColorHover']}; }";
        }

        // ============================================
        // FST 11. REPEATER HEAD
        // ============================================

        // Head background
        if ( ! empty( $attributes['repeaterHeadBg'] ) ) {
            $css_rules[] = "{$selector} .ts-repeater-head { background-color: {$attributes['repeaterHeadBg']}; }";
        }

        // Head border
        if ( ! empty( $attributes['repeaterHeadBorder'] ) ) {
            $border_css = self::generate_border_css( $attributes['repeaterHeadBorder'] );
            if ( $border_css ) {
                $css_rules[] = "{$selector} .ts-repeater-head { border: {$border_css}; }";
            }
        }

        // Head border radius
        if ( isset( $attributes['repeaterHeadBorderRadius'] ) ) {
            $css_rules[] = "{$selector} .ts-repeater-head { border-radius: {$attributes['repeaterHeadBorderRadius']}px; }";
        }
        if ( isset( $attributes['repeaterHeadBorderRadius_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-repeater-head { border-radius: {$attributes['repeaterHeadBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['repeaterHeadBorderRadius_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-repeater-head { border-radius: {$attributes['repeaterHeadBorderRadius_mobile']}px; }";
        }

        // Head typography
        if ( ! empty( $attributes['repeaterHeadTypo'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['repeaterHeadTypo'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ts-repeater-head { {$typo_css} }";
            }
        }

        // Head text color
        if ( ! empty( $attributes['repeaterHeadTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-repeater-head { color: {$attributes['repeaterHeadTextColor']}; }";
        }

        // Head icon color
        if ( ! empty( $attributes['repeaterHeadIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-repeater-head i { color: {$attributes['repeaterHeadIconColor']}; }";
            $css_rules[] = "{$selector} .ts-repeater-head svg { fill: {$attributes['repeaterHeadIconColor']}; }";
        }

        // ============================================
        // FST 13. HEADING FIELD
        // ============================================

        // Heading typography
        if ( ! empty( $attributes['headingFieldTypo'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['headingFieldTypo'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .ui-heading-field label { {$typo_css} }";
            }
        }

        // Heading color
        if ( ! empty( $attributes['headingFieldColor'] ) ) {
            $css_rules[] = "{$selector} .ui-heading-field label { color: {$attributes['headingFieldColor']}; }";
        }

        // ============================================
        // FST 14. IMAGE FIELD
        // ============================================

        // Image border radius
        if ( isset( $attributes['imageFieldBorderRadius'] ) ) {
            $css_rules[] = "{$selector} .field-image img { border-radius: {$attributes['imageFieldBorderRadius']}px; }";
        }
        if ( isset( $attributes['imageFieldBorderRadius_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .field-image img { border-radius: {$attributes['imageFieldBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['imageFieldBorderRadius_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .field-image img { border-radius: {$attributes['imageFieldBorderRadius_mobile']}px; }";
        }

        // Image border
        if ( ! empty( $attributes['imageFieldBorder'] ) ) {
            $border_css = self::generate_border_css( $attributes['imageFieldBorder'] );
            if ( $border_css ) {
                $css_rules[] = "{$selector} .field-image img { border: {$border_css}; }";
            }
        }

        // ============================================
        // FST 15. AVAILABILITY CALENDAR
        // ============================================

        // Calendar background
        if ( ! empty( $attributes['calendarBg'] ) ) {
            $css_rules[] = "{$selector} .pika-single { background-color: {$attributes['calendarBg']}; }";
        }

        // Calendar border
        if ( ! empty( $attributes['calendarBorder'] ) ) {
            $border_css = self::generate_border_css( $attributes['calendarBorder'] );
            if ( $border_css ) {
                $css_rules[] = "{$selector} .pika-single { border: {$border_css}; }";
            }
        }

        // Calendar border radius
        if ( isset( $attributes['calendarBorderRadius'] ) ) {
            $css_rules[] = "{$selector} .pika-single { border-radius: {$attributes['calendarBorderRadius']}px; }";
        }
        if ( isset( $attributes['calendarBorderRadius_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .pika-single { border-radius: {$attributes['calendarBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['calendarBorderRadius_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .pika-single { border-radius: {$attributes['calendarBorderRadius_mobile']}px; }";
        }

        // Day cell typography
        if ( ! empty( $attributes['calendarDayTypo'] ) ) {
            $typo_css = self::generate_typography_css( $attributes['calendarDayTypo'] );
            if ( $typo_css ) {
                $css_rules[] = "{$selector} .pika-single .pika-button { {$typo_css} }";
            }
        }

        // Day cell color
        if ( ! empty( $attributes['calendarDayColor'] ) ) {
            $css_rules[] = "{$selector} .pika-single .pika-button { color: {$attributes['calendarDayColor']}; }";
        }

        // Day cell background
        if ( ! empty( $attributes['calendarDayBg'] ) ) {
            $css_rules[] = "{$selector} .pika-single .pika-button { background-color: {$attributes['calendarDayBg']}; }";
        }

        // Selected day background
        if ( ! empty( $attributes['calendarDaySelectedBg'] ) ) {
            $css_rules[] = "{$selector} .pika-single .is-selected .pika-button { background-color: {$attributes['calendarDaySelectedBg']}; }";
        }

        // Selected day color
        if ( ! empty( $attributes['calendarDaySelectedColor'] ) ) {
            $css_rules[] = "{$selector} .pika-single .is-selected .pika-button { color: {$attributes['calendarDaySelectedColor']}; }";
        }

        // ============================================
        // FST 16. CALENDAR BUTTONS
        // ============================================

        // Button background
        if ( ! empty( $attributes['calendarButtonBg'] ) ) {
            $css_rules[] = "{$selector} .pika-single .pika-prev, {$selector} .pika-single .pika-next { background-color: {$attributes['calendarButtonBg']}; }";
        }

        // Button icon color
        if ( ! empty( $attributes['calendarButtonIconColor'] ) ) {
            $css_rules[] = "{$selector} .pika-single .pika-prev i, {$selector} .pika-single .pika-next i { color: {$attributes['calendarButtonIconColor']}; }";
            $css_rules[] = "{$selector} .pika-single .pika-prev svg, {$selector} .pika-single .pika-next svg { fill: {$attributes['calendarButtonIconColor']}; }";
        }

        // Button hover background
        if ( ! empty( $attributes['calendarButtonBgHover'] ) ) {
            $css_rules[] = "{$selector} .pika-single .pika-prev:hover, {$selector} .pika-single .pika-next:hover { background-color: {$attributes['calendarButtonBgHover']}; }";
        }

        // Button hover icon color
        if ( ! empty( $attributes['calendarButtonIconColorHover'] ) ) {
            $css_rules[] = "{$selector} .pika-single .pika-prev:hover i, {$selector} .pika-single .pika-next:hover i { color: {$attributes['calendarButtonIconColorHover']}; }";
            $css_rules[] = "{$selector} .pika-single .pika-prev:hover svg, {$selector} .pika-single .pika-next:hover svg { fill: {$attributes['calendarButtonIconColorHover']}; }";
        }

        // ============================================
        // FST 17. ATTRIBUTES (Product attributes)
        // ============================================

        // Attribute button background
        if ( ! empty( $attributes['attributeButtonBg'] ) ) {
            $css_rules[] = "{$selector} .ts-form .ts-term-dropdown li { background-color: {$attributes['attributeButtonBg']}; }";
        }

        // Attribute button border
        if ( ! empty( $attributes['attributeButtonBorder'] ) ) {
            $border_css = self::generate_border_css( $attributes['attributeButtonBorder'] );
            if ( $border_css ) {
                $css_rules[] = "{$selector} .ts-form .ts-term-dropdown li { border: {$border_css}; }";
            }
        }

        // Attribute button text color
        if ( ! empty( $attributes['attributeButtonTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-form .ts-term-dropdown li { color: {$attributes['attributeButtonTextColor']}; }";
        }

        // Attribute button hover background
        if ( ! empty( $attributes['attributeButtonBgHover'] ) ) {
            $css_rules[] = "{$selector} .ts-form .ts-term-dropdown li:hover { background-color: {$attributes['attributeButtonBgHover']}; }";
        }

        // Attribute button hover border color
        if ( ! empty( $attributes['attributeButtonBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-form .ts-term-dropdown li:hover { border-color: {$attributes['attributeButtonBorderColorHover']}; }";
        }

        // Attribute button hover text color
        if ( ! empty( $attributes['attributeButtonTextColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-form .ts-term-dropdown li:hover { color: {$attributes['attributeButtonTextColorHover']}; }";
        }

        // ============================================
        // FST 18. COLOR FIELD
        // ============================================

        // Color swatch size
        if ( isset( $attributes['colorSwatchSize'] ) ) {
            $css_rules[] = "{$selector} .ts-color-swatch { width: {$attributes['colorSwatchSize']}px; height: {$attributes['colorSwatchSize']}px; }";
        }
        if ( isset( $attributes['colorSwatchSize_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-color-swatch { width: {$attributes['colorSwatchSize_tablet']}px; height: {$attributes['colorSwatchSize_tablet']}px; }";
        }
        if ( isset( $attributes['colorSwatchSize_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-color-swatch { width: {$attributes['colorSwatchSize_mobile']}px; height: {$attributes['colorSwatchSize_mobile']}px; }";
        }

        // Color swatch border
        if ( ! empty( $attributes['colorSwatchBorder'] ) ) {
            $border_css = self::generate_border_css( $attributes['colorSwatchBorder'] );
            if ( $border_css ) {
                $css_rules[] = "{$selector} .ts-color-swatch { border: {$border_css}; }";
            }
        }

        // Color swatch border radius
        if ( isset( $attributes['colorSwatchBorderRadius'] ) ) {
            $css_rules[] = "{$selector} .ts-color-swatch { border-radius: {$attributes['colorSwatchBorderRadius']}px; }";
        }
        if ( isset( $attributes['colorSwatchBorderRadius_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-color-swatch { border-radius: {$attributes['colorSwatchBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['colorSwatchBorderRadius_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-color-swatch { border-radius: {$attributes['colorSwatchBorderRadius_mobile']}px; }";
        }

        // Combine CSS
        $final_css = '';
        if ( ! empty( $css_rules ) ) {
            $final_css .= implode( "\n", $css_rules );
        }
        if ( ! empty( $tablet_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::TABLET_BREAKPOINT . "px) {\n" . implode( "\n", $tablet_rules ) . "\n}";
        }
        if ( ! empty( $mobile_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::MOBILE_BREAKPOINT . "px) {\n" . implode( "\n", $mobile_rules ) . "\n}";
        }

        return $final_css;
    }

    /**
     * Generate CSS for Orders Block
     *
     * Handles 16 style sections: General, Primary/Secondary Buttons, Cards,
     * Order Statuses, Filters (common/dropdown/input), Single Order (event/box/items/table/accordion/notes),
     * No Results, and Loading Spinner.
     *
     * NOTE: This block uses a simplified border pattern (border-style only via borderType select),
     * inline box-shadow with enable flag, and shorthand dimensions - matching the TS source exactly.
     *
     * Source: app/blocks/src/orders/styles.ts
     * Voxel Reference: themes/voxel/app/widgets/orders.php
     *
     * @param array  $attributes Block attributes.
     * @param string $block_id   Block unique ID.
     * @return string Generated CSS.
     */
    public static function generate_orders_css( $attributes, $block_id ) {
        if ( empty( $block_id ) ) {
            return '';
        }

        $css_rules = [];
        $tablet_rules = [];
        $mobile_rules = [];
        $selector = '.voxel-fse-orders-' . $block_id;

        // ============================================
        // SECTION 1: General
        // ============================================

        // Title typography (widget-head h2)
        if ( ! empty( $attributes['generalTitleTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['generalTitleTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .widget-head h2 { {$typo} }";
            }
        }

        // Title color
        if ( ! empty( $attributes['generalTitleColor'] ) ) {
            $css_rules[] = "{$selector} .widget-head h2 { color: {$attributes['generalTitleColor']}; }";
        }

        // Subtitle typography (widget-head p)
        if ( ! empty( $attributes['generalSubtitleTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['generalSubtitleTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .widget-head p { {$typo} }";
            }
        }

        // Subtitle color
        if ( ! empty( $attributes['generalSubtitleColor'] ) ) {
            $css_rules[] = "{$selector} .widget-head p { color: {$attributes['generalSubtitleColor']}; }";
        }

        // Spacing (desktop/tablet/mobile)
        if ( isset( $attributes['generalSpacing'] ) && $attributes['generalSpacing'] !== '' ) {
            $css_rules[] = "{$selector} .widget-head { margin-bottom: {$attributes['generalSpacing']}px; }";
        }
        if ( isset( $attributes['generalSpacing_tablet'] ) && $attributes['generalSpacing_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .widget-head { margin-bottom: {$attributes['generalSpacing_tablet']}px; }";
        }
        if ( isset( $attributes['generalSpacing_mobile'] ) && $attributes['generalSpacing_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .widget-head { margin-bottom: {$attributes['generalSpacing_mobile']}px; }";
        }

        // ============================================
        // SECTION 2: Primary Button (.ts-btn-2)
        // ============================================

        // Primary button typography
        if ( ! empty( $attributes['primaryBtnTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['primaryBtnTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-btn-2 { {$typo} }";
            }
        }

        // Primary button border type (style only)
        if ( ! empty( $attributes['primaryBtnBorderType'] ) && $attributes['primaryBtnBorderType'] !== 'Default' ) {
            $css_rules[] = "{$selector} .ts-btn-2 { border-style: " . strtolower( $attributes['primaryBtnBorderType'] ) . "; }";
        }

        // Primary button border radius (responsive)
        if ( isset( $attributes['primaryBtnBorderRadius'] ) && $attributes['primaryBtnBorderRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-btn-2 { border-radius: {$attributes['primaryBtnBorderRadius']}px; }";
        }
        if ( isset( $attributes['primaryBtnBorderRadius_tablet'] ) && $attributes['primaryBtnBorderRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-btn-2 { border-radius: {$attributes['primaryBtnBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['primaryBtnBorderRadius_mobile'] ) && $attributes['primaryBtnBorderRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-btn-2 { border-radius: {$attributes['primaryBtnBorderRadius_mobile']}px; }";
        }

        // Primary button box shadow
        if ( ! empty( $attributes['primaryBtnBoxShadow'] ) && ! empty( $attributes['primaryBtnBoxShadow']['enable'] ) ) {
            $shadow = $attributes['primaryBtnBoxShadow'];
            $h = $shadow['horizontal'] ?? 0;
            $v = $shadow['vertical'] ?? 0;
            $blur = $shadow['blur'] ?? 0;
            $spread = $shadow['spread'] ?? 0;
            $color = $shadow['color'] ?? 'rgba(0,0,0,0.1)';
            $inset = ( $shadow['position'] ?? '' ) === 'inset' ? 'inset ' : '';
            $css_rules[] = "{$selector} .ts-btn-2 { box-shadow: {$inset}{$h}px {$v}px {$blur}px {$spread}px {$color}; }";
        }

        // Primary button text color
        if ( ! empty( $attributes['primaryBtnTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-2 { color: {$attributes['primaryBtnTextColor']}; }";
        }

        // Primary button background
        if ( ! empty( $attributes['primaryBtnBackground'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-2 { background-color: {$attributes['primaryBtnBackground']}; }";
        }

        // Primary button icon size (responsive)
        if ( isset( $attributes['primaryBtnIconSize'] ) && $attributes['primaryBtnIconSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-btn-2 i { font-size: {$attributes['primaryBtnIconSize']}px; }";
            $css_rules[] = "{$selector} .ts-btn-2 svg { width: {$attributes['primaryBtnIconSize']}px; height: {$attributes['primaryBtnIconSize']}px; }";
        }
        if ( isset( $attributes['primaryBtnIconSize_tablet'] ) && $attributes['primaryBtnIconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-btn-2 i { font-size: {$attributes['primaryBtnIconSize_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-btn-2 svg { width: {$attributes['primaryBtnIconSize_tablet']}px; height: {$attributes['primaryBtnIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['primaryBtnIconSize_mobile'] ) && $attributes['primaryBtnIconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-btn-2 i { font-size: {$attributes['primaryBtnIconSize_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-btn-2 svg { width: {$attributes['primaryBtnIconSize_mobile']}px; height: {$attributes['primaryBtnIconSize_mobile']}px; }";
        }

        // Primary button icon color
        if ( ! empty( $attributes['primaryBtnIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-2 i { color: {$attributes['primaryBtnIconColor']}; }";
            $css_rules[] = "{$selector} .ts-btn-2 svg { fill: {$attributes['primaryBtnIconColor']}; }";
        }

        // Primary button icon spacing (responsive)
        if ( isset( $attributes['primaryBtnIconSpacing'] ) && $attributes['primaryBtnIconSpacing'] !== '' ) {
            $css_rules[] = "{$selector} .ts-btn-2 i { margin-right: {$attributes['primaryBtnIconSpacing']}px; }";
            $css_rules[] = "{$selector} .ts-btn-2 svg { margin-right: {$attributes['primaryBtnIconSpacing']}px; }";
        }
        if ( isset( $attributes['primaryBtnIconSpacing_tablet'] ) && $attributes['primaryBtnIconSpacing_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-btn-2 i { margin-right: {$attributes['primaryBtnIconSpacing_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-btn-2 svg { margin-right: {$attributes['primaryBtnIconSpacing_tablet']}px; }";
        }
        if ( isset( $attributes['primaryBtnIconSpacing_mobile'] ) && $attributes['primaryBtnIconSpacing_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-btn-2 i { margin-right: {$attributes['primaryBtnIconSpacing_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-btn-2 svg { margin-right: {$attributes['primaryBtnIconSpacing_mobile']}px; }";
        }

        // Primary button hover states
        if ( ! empty( $attributes['primaryBtnTextColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-2:hover { color: {$attributes['primaryBtnTextColorHover']}; }";
        }
        if ( ! empty( $attributes['primaryBtnBackgroundHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-2:hover { background-color: {$attributes['primaryBtnBackgroundHover']}; }";
        }
        if ( ! empty( $attributes['primaryBtnBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-2:hover { border-color: {$attributes['primaryBtnBorderColorHover']}; }";
        }
        if ( ! empty( $attributes['primaryBtnBoxShadowHover'] ) && ! empty( $attributes['primaryBtnBoxShadowHover']['enable'] ) ) {
            $shadow = $attributes['primaryBtnBoxShadowHover'];
            $h = $shadow['horizontal'] ?? 0;
            $v = $shadow['vertical'] ?? 0;
            $blur = $shadow['blur'] ?? 0;
            $spread = $shadow['spread'] ?? 0;
            $color = $shadow['color'] ?? 'rgba(0,0,0,0.1)';
            $inset = ( $shadow['position'] ?? '' ) === 'inset' ? 'inset ' : '';
            $css_rules[] = "{$selector} .ts-btn-2:hover { box-shadow: {$inset}{$h}px {$v}px {$blur}px {$spread}px {$color}; }";
        }
        if ( ! empty( $attributes['primaryBtnIconColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-2:hover i { color: {$attributes['primaryBtnIconColorHover']}; }";
            $css_rules[] = "{$selector} .ts-btn-2:hover svg { fill: {$attributes['primaryBtnIconColorHover']}; }";
        }

        // ============================================
        // SECTION 3: Secondary Button (.ts-btn-1)
        // ============================================

        // Secondary button icon color
        if ( ! empty( $attributes['secondaryBtnIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-1 i { color: {$attributes['secondaryBtnIconColor']}; }";
            $css_rules[] = "{$selector} .ts-btn-1 svg { fill: {$attributes['secondaryBtnIconColor']}; }";
        }

        // Secondary button icon size (responsive)
        if ( isset( $attributes['secondaryBtnIconSize'] ) && $attributes['secondaryBtnIconSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-btn-1 i { font-size: {$attributes['secondaryBtnIconSize']}px; }";
            $css_rules[] = "{$selector} .ts-btn-1 svg { width: {$attributes['secondaryBtnIconSize']}px; height: {$attributes['secondaryBtnIconSize']}px; }";
        }
        if ( isset( $attributes['secondaryBtnIconSize_tablet'] ) && $attributes['secondaryBtnIconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-btn-1 i { font-size: {$attributes['secondaryBtnIconSize_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-btn-1 svg { width: {$attributes['secondaryBtnIconSize_tablet']}px; height: {$attributes['secondaryBtnIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['secondaryBtnIconSize_mobile'] ) && $attributes['secondaryBtnIconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-btn-1 i { font-size: {$attributes['secondaryBtnIconSize_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-btn-1 svg { width: {$attributes['secondaryBtnIconSize_mobile']}px; height: {$attributes['secondaryBtnIconSize_mobile']}px; }";
        }

        // Secondary button icon spacing (responsive)
        if ( isset( $attributes['secondaryBtnIconSpacing'] ) && $attributes['secondaryBtnIconSpacing'] !== '' ) {
            $css_rules[] = "{$selector} .ts-btn-1 i { margin-right: {$attributes['secondaryBtnIconSpacing']}px; }";
            $css_rules[] = "{$selector} .ts-btn-1 svg { margin-right: {$attributes['secondaryBtnIconSpacing']}px; }";
        }
        if ( isset( $attributes['secondaryBtnIconSpacing_tablet'] ) && $attributes['secondaryBtnIconSpacing_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-btn-1 i { margin-right: {$attributes['secondaryBtnIconSpacing_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-btn-1 svg { margin-right: {$attributes['secondaryBtnIconSpacing_tablet']}px; }";
        }
        if ( isset( $attributes['secondaryBtnIconSpacing_mobile'] ) && $attributes['secondaryBtnIconSpacing_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-btn-1 i { margin-right: {$attributes['secondaryBtnIconSpacing_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-btn-1 svg { margin-right: {$attributes['secondaryBtnIconSpacing_mobile']}px; }";
        }

        // Secondary button background
        if ( ! empty( $attributes['secondaryBtnBackground'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-1 { background-color: {$attributes['secondaryBtnBackground']}; }";
        }

        // Secondary button border type
        if ( ! empty( $attributes['secondaryBtnBorderType'] ) && $attributes['secondaryBtnBorderType'] !== 'Default' ) {
            $css_rules[] = "{$selector} .ts-btn-1 { border-style: " . strtolower( $attributes['secondaryBtnBorderType'] ) . "; }";
        }

        // Secondary button border radius (responsive)
        if ( isset( $attributes['secondaryBtnBorderRadius'] ) && $attributes['secondaryBtnBorderRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-btn-1 { border-radius: {$attributes['secondaryBtnBorderRadius']}px; }";
        }
        if ( isset( $attributes['secondaryBtnBorderRadius_tablet'] ) && $attributes['secondaryBtnBorderRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-btn-1 { border-radius: {$attributes['secondaryBtnBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['secondaryBtnBorderRadius_mobile'] ) && $attributes['secondaryBtnBorderRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-btn-1 { border-radius: {$attributes['secondaryBtnBorderRadius_mobile']}px; }";
        }

        // Secondary button typography
        if ( ! empty( $attributes['secondaryBtnTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['secondaryBtnTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-btn-1 { {$typo} }";
            }
        }

        // Secondary button text color
        if ( ! empty( $attributes['secondaryBtnTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-1 { color: {$attributes['secondaryBtnTextColor']}; }";
        }

        // Secondary button hover states
        if ( ! empty( $attributes['secondaryBtnIconColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-1:hover i { color: {$attributes['secondaryBtnIconColorHover']}; }";
            $css_rules[] = "{$selector} .ts-btn-1:hover svg { fill: {$attributes['secondaryBtnIconColorHover']}; }";
        }
        if ( ! empty( $attributes['secondaryBtnBackgroundHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-1:hover { background-color: {$attributes['secondaryBtnBackgroundHover']}; }";
        }
        if ( ! empty( $attributes['secondaryBtnBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-1:hover { border-color: {$attributes['secondaryBtnBorderColorHover']}; }";
        }
        if ( ! empty( $attributes['secondaryBtnTextColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-1:hover { color: {$attributes['secondaryBtnTextColorHover']}; }";
        }

        // ============================================
        // SECTION 4: Cards (.vx-order-card)
        // ============================================

        // Card background
        if ( ! empty( $attributes['cardBackground'] ) ) {
            $css_rules[] = "{$selector} .vx-order-card { background-color: {$attributes['cardBackground']}; }";
        }

        // Card border type
        if ( ! empty( $attributes['cardBorderType'] ) && $attributes['cardBorderType'] !== 'Default' ) {
            $css_rules[] = "{$selector} .vx-order-card { border-style: " . strtolower( $attributes['cardBorderType'] ) . "; }";
        }

        // Card border radius (responsive)
        if ( isset( $attributes['cardBorderRadius'] ) && $attributes['cardBorderRadius'] !== '' ) {
            $css_rules[] = "{$selector} .vx-order-card { border-radius: {$attributes['cardBorderRadius']}px; }";
        }
        if ( isset( $attributes['cardBorderRadius_tablet'] ) && $attributes['cardBorderRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .vx-order-card { border-radius: {$attributes['cardBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['cardBorderRadius_mobile'] ) && $attributes['cardBorderRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .vx-order-card { border-radius: {$attributes['cardBorderRadius_mobile']}px; }";
        }

        // Card hover states
        if ( ! empty( $attributes['cardBackgroundHover'] ) ) {
            $css_rules[] = "{$selector} .vx-order-card:hover { background-color: {$attributes['cardBackgroundHover']}; }";
        }
        if ( ! empty( $attributes['cardBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .vx-order-card:hover { border-color: {$attributes['cardBorderColorHover']}; }";
        }

        // Avatar size (responsive)
        if ( isset( $attributes['cardAvatarSize'] ) && $attributes['cardAvatarSize'] !== '' ) {
            $css_rules[] = "{$selector} .vx-order-card .vx-avatar { width: {$attributes['cardAvatarSize']}px; height: {$attributes['cardAvatarSize']}px; }";
        }
        if ( isset( $attributes['cardAvatarSize_tablet'] ) && $attributes['cardAvatarSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .vx-order-card .vx-avatar { width: {$attributes['cardAvatarSize_tablet']}px; height: {$attributes['cardAvatarSize_tablet']}px; }";
        }
        if ( isset( $attributes['cardAvatarSize_mobile'] ) && $attributes['cardAvatarSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .vx-order-card .vx-avatar { width: {$attributes['cardAvatarSize_mobile']}px; height: {$attributes['cardAvatarSize_mobile']}px; }";
        }

        // Avatar border radius (responsive)
        if ( isset( $attributes['cardAvatarBorderRadius'] ) && $attributes['cardAvatarBorderRadius'] !== '' ) {
            $css_rules[] = "{$selector} .vx-order-card .vx-avatar { border-radius: {$attributes['cardAvatarBorderRadius']}px; }";
        }
        if ( isset( $attributes['cardAvatarBorderRadius_tablet'] ) && $attributes['cardAvatarBorderRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .vx-order-card .vx-avatar { border-radius: {$attributes['cardAvatarBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['cardAvatarBorderRadius_mobile'] ) && $attributes['cardAvatarBorderRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .vx-order-card .vx-avatar { border-radius: {$attributes['cardAvatarBorderRadius_mobile']}px; }";
        }

        // Order ID typography
        if ( ! empty( $attributes['cardOrderIdTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['cardOrderIdTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .vx-order-card .order-badge { {$typo} }";
            }
        }

        // Order ID color
        if ( ! empty( $attributes['cardOrderIdColor'] ) ) {
            $css_rules[] = "{$selector} .vx-order-card .order-badge { color: {$attributes['cardOrderIdColor']}; }";
        }

        // Order ID background
        if ( ! empty( $attributes['cardOrderIdBackground'] ) ) {
            $css_rules[] = "{$selector} .vx-order-card .order-badge { background-color: {$attributes['cardOrderIdBackground']}; }";
        }

        // Order ID border radius (responsive)
        if ( isset( $attributes['cardOrderIdBorderRadius'] ) && $attributes['cardOrderIdBorderRadius'] !== '' ) {
            $css_rules[] = "{$selector} .vx-order-card .order-badge { border-radius: {$attributes['cardOrderIdBorderRadius']}px; }";
        }
        if ( isset( $attributes['cardOrderIdBorderRadius_tablet'] ) && $attributes['cardOrderIdBorderRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .vx-order-card .order-badge { border-radius: {$attributes['cardOrderIdBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['cardOrderIdBorderRadius_mobile'] ) && $attributes['cardOrderIdBorderRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .vx-order-card .order-badge { border-radius: {$attributes['cardOrderIdBorderRadius_mobile']}px; }";
        }

        // Order title typography
        if ( ! empty( $attributes['cardOrderTitleTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['cardOrderTitleTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .vx-order-card .vx-order-title b { {$typo} }";
            }
        }

        // Order title typography (pending)
        if ( ! empty( $attributes['cardOrderTitleTypographyPending'] ) ) {
            $typo = self::generate_typography_css( $attributes['cardOrderTitleTypographyPending'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .vx-order-card.vx-status-pending_payment .vx-order-title b { {$typo} }";
            }
        }

        // Order title color
        if ( ! empty( $attributes['cardOrderTitleColor'] ) ) {
            $css_rules[] = "{$selector} .vx-order-card .vx-order-title b { color: {$attributes['cardOrderTitleColor']}; }";
        }

        // Order details typography
        if ( ! empty( $attributes['cardOrderDetailsTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['cardOrderDetailsTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .vx-order-card .vx-order-meta span { {$typo} }";
            }
        }

        // Order details color
        if ( ! empty( $attributes['cardOrderDetailsColor'] ) ) {
            $css_rules[] = "{$selector} .vx-order-card .vx-order-meta span { color: {$attributes['cardOrderDetailsColor']}; }";
        }

        // ============================================
        // SECTION 5: Order Statuses (.order-status)
        // ============================================

        // Status padding
        if ( ! empty( $attributes['statusPadding'] ) ) {
            $p = $attributes['statusPadding'];
            $unit = $p['unit'] ?? 'px';
            $top = floatval( $p['top'] ?? 0 );
            $right = floatval( $p['right'] ?? 0 );
            $bottom = floatval( $p['bottom'] ?? 0 );
            $left = floatval( $p['left'] ?? 0 );
            $css_rules[] = "{$selector} .order-status { padding: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
        }

        // Status border radius (responsive)
        if ( isset( $attributes['statusBorderRadius'] ) && $attributes['statusBorderRadius'] !== '' ) {
            $css_rules[] = "{$selector} .order-status { border-radius: {$attributes['statusBorderRadius']}px; }";
        }
        if ( isset( $attributes['statusBorderRadius_tablet'] ) && $attributes['statusBorderRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .order-status { border-radius: {$attributes['statusBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['statusBorderRadius_mobile'] ) && $attributes['statusBorderRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .order-status { border-radius: {$attributes['statusBorderRadius_mobile']}px; }";
        }

        // Status typography
        if ( ! empty( $attributes['statusTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['statusTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .order-status { {$typo} }";
            }
        }

        // Status colors (CSS variables --s-color)
        if ( ! empty( $attributes['statusOrangeColor'] ) ) {
            $css_rules[] = "{$selector} .vx-orange { --s-color: {$attributes['statusOrangeColor']}; }";
        }
        if ( ! empty( $attributes['statusGreenColor'] ) ) {
            $css_rules[] = "{$selector} .vx-green { --s-color: {$attributes['statusGreenColor']}; }";
        }
        if ( ! empty( $attributes['statusNeutralColor'] ) ) {
            $css_rules[] = "{$selector} .vx-neutral { --s-color: {$attributes['statusNeutralColor']}; }";
        }
        if ( ! empty( $attributes['statusRedColor'] ) ) {
            $css_rules[] = "{$selector} .vx-red { --s-color: {$attributes['statusRedColor']}; }";
        }
        if ( ! empty( $attributes['statusGreyColor'] ) ) {
            $css_rules[] = "{$selector} .vx-grey { --s-color: {$attributes['statusGreyColor']}; }";
        }
        if ( ! empty( $attributes['statusBlueColor'] ) ) {
            $css_rules[] = "{$selector} .vx-blue { --s-color: {$attributes['statusBlueColor']}; }";
        }

        // ============================================
        // SECTION 6: Filters Common (.ts-filter)
        // ============================================

        // Filter height (responsive)
        if ( isset( $attributes['filterHeight'] ) && $attributes['filterHeight'] !== '' ) {
            $css_rules[] = "{$selector} .ts-filter { height: {$attributes['filterHeight']}px; }";
        }
        if ( isset( $attributes['filterHeight_tablet'] ) && $attributes['filterHeight_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-filter { height: {$attributes['filterHeight_tablet']}px; }";
        }
        if ( isset( $attributes['filterHeight_mobile'] ) && $attributes['filterHeight_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-filter { height: {$attributes['filterHeight_mobile']}px; }";
        }

        // Filter border radius (responsive)
        if ( isset( $attributes['filterBorderRadius'] ) && $attributes['filterBorderRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-filter { border-radius: {$attributes['filterBorderRadius']}px; }";
        }
        if ( isset( $attributes['filterBorderRadius_tablet'] ) && $attributes['filterBorderRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-filter { border-radius: {$attributes['filterBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['filterBorderRadius_mobile'] ) && $attributes['filterBorderRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-filter { border-radius: {$attributes['filterBorderRadius_mobile']}px; }";
        }

        // Filter box shadow
        if ( ! empty( $attributes['filterBoxShadow'] ) && ! empty( $attributes['filterBoxShadow']['enable'] ) ) {
            $shadow = $attributes['filterBoxShadow'];
            $h = $shadow['horizontal'] ?? 0;
            $v = $shadow['vertical'] ?? 0;
            $blur = $shadow['blur'] ?? 0;
            $spread = $shadow['spread'] ?? 0;
            $color = $shadow['color'] ?? 'rgba(0,0,0,0.1)';
            $inset = ( $shadow['position'] ?? '' ) === 'inset' ? 'inset ' : '';
            $css_rules[] = "{$selector} .ts-filter { box-shadow: {$inset}{$h}px {$v}px {$blur}px {$spread}px {$color}; }";
        }

        // Filter border type
        if ( ! empty( $attributes['filterBorderType'] ) && $attributes['filterBorderType'] !== 'Default' ) {
            $css_rules[] = "{$selector} .ts-filter { border-style: " . strtolower( $attributes['filterBorderType'] ) . "; }";
        }

        // Filter background
        if ( ! empty( $attributes['filterBackground'] ) ) {
            $css_rules[] = "{$selector} .ts-filter { background-color: {$attributes['filterBackground']}; }";
        }

        // Filter text color
        if ( ! empty( $attributes['filterTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-filter { color: {$attributes['filterTextColor']}; }";
        }

        // Filter typography
        if ( ! empty( $attributes['filterTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['filterTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-filter { {$typo} }";
            }
        }

        // Filter chevron color
        if ( ! empty( $attributes['filterChevronColor'] ) ) {
            $css_rules[] = "{$selector} .ts-filter .ts-down-icon i { color: {$attributes['filterChevronColor']}; }";
            $css_rules[] = "{$selector} .ts-filter .ts-down-icon svg { fill: {$attributes['filterChevronColor']}; }";
        }

        // Filter hover states
        if ( ! empty( $attributes['filterBoxShadowHover'] ) && ! empty( $attributes['filterBoxShadowHover']['enable'] ) ) {
            $shadow = $attributes['filterBoxShadowHover'];
            $h = $shadow['horizontal'] ?? 0;
            $v = $shadow['vertical'] ?? 0;
            $blur = $shadow['blur'] ?? 0;
            $spread = $shadow['spread'] ?? 0;
            $color = $shadow['color'] ?? 'rgba(0,0,0,0.1)';
            $inset = ( $shadow['position'] ?? '' ) === 'inset' ? 'inset ' : '';
            $css_rules[] = "{$selector} .ts-filter:hover { box-shadow: {$inset}{$h}px {$v}px {$blur}px {$spread}px {$color}; }";
        }
        if ( ! empty( $attributes['filterBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-filter:hover { border-color: {$attributes['filterBorderColorHover']}; }";
        }
        if ( ! empty( $attributes['filterBackgroundHover'] ) ) {
            $css_rules[] = "{$selector} .ts-filter:hover { background-color: {$attributes['filterBackgroundHover']}; }";
        }
        if ( ! empty( $attributes['filterTextColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-filter:hover { color: {$attributes['filterTextColorHover']}; }";
        }
        if ( ! empty( $attributes['filterChevronColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-filter:hover .ts-down-icon i { color: {$attributes['filterChevronColorHover']}; }";
            $css_rules[] = "{$selector} .ts-filter:hover .ts-down-icon svg { fill: {$attributes['filterChevronColorHover']}; }";
        }

        // ============================================
        // SECTION 7: Filter Dropdown (.ts-filled)
        // ============================================

        // Filter dropdown typography
        if ( ! empty( $attributes['filterDropdownTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['filterDropdownTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-filter.ts-filled { {$typo} }";
            }
        }

        // Filter dropdown background
        if ( ! empty( $attributes['filterDropdownBackground'] ) ) {
            $css_rules[] = "{$selector} .ts-filter.ts-filled { background-color: {$attributes['filterDropdownBackground']}; }";
        }

        // Filter dropdown text color
        if ( ! empty( $attributes['filterDropdownTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-filter.ts-filled { color: {$attributes['filterDropdownTextColor']}; }";
        }

        // Filter dropdown border color
        if ( ! empty( $attributes['filterDropdownBorderColor'] ) ) {
            $css_rules[] = "{$selector} .ts-filter.ts-filled { border-color: {$attributes['filterDropdownBorderColor']}; }";
        }

        // Filter dropdown border width (responsive)
        if ( isset( $attributes['filterDropdownBorderWidth'] ) && $attributes['filterDropdownBorderWidth'] !== '' ) {
            $css_rules[] = "{$selector} .ts-filter.ts-filled { border-width: {$attributes['filterDropdownBorderWidth']}px; }";
        }
        if ( isset( $attributes['filterDropdownBorderWidth_tablet'] ) && $attributes['filterDropdownBorderWidth_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-filter.ts-filled { border-width: {$attributes['filterDropdownBorderWidth_tablet']}px; }";
        }
        if ( isset( $attributes['filterDropdownBorderWidth_mobile'] ) && $attributes['filterDropdownBorderWidth_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-filter.ts-filled { border-width: {$attributes['filterDropdownBorderWidth_mobile']}px; }";
        }

        // Filter dropdown box shadow
        if ( ! empty( $attributes['filterDropdownBoxShadow'] ) && ! empty( $attributes['filterDropdownBoxShadow']['enable'] ) ) {
            $shadow = $attributes['filterDropdownBoxShadow'];
            $h = $shadow['horizontal'] ?? 0;
            $v = $shadow['vertical'] ?? 0;
            $blur = $shadow['blur'] ?? 0;
            $spread = $shadow['spread'] ?? 0;
            $color = $shadow['color'] ?? 'rgba(0,0,0,0.1)';
            $inset = ( $shadow['position'] ?? '' ) === 'inset' ? 'inset ' : '';
            $css_rules[] = "{$selector} .ts-filter.ts-filled { box-shadow: {$inset}{$h}px {$v}px {$blur}px {$spread}px {$color}; }";
        }

        // Filter dropdown chevron color
        if ( ! empty( $attributes['filterDropdownChevronColor'] ) ) {
            $css_rules[] = "{$selector} .ts-filter.ts-filled .ts-down-icon i { color: {$attributes['filterDropdownChevronColor']}; }";
            $css_rules[] = "{$selector} .ts-filter.ts-filled .ts-down-icon svg { fill: {$attributes['filterDropdownChevronColor']}; }";
        }

        // ============================================
        // SECTION 8: Filter Input (.inline-input)
        // ============================================

        // Filter input placeholder color
        if ( ! empty( $attributes['filterInputPlaceholderColor'] ) ) {
            $css_rules[] = "{$selector} .inline-input::placeholder { color: {$attributes['filterInputPlaceholderColor']}; }";
        }

        // Filter input icon size (responsive)
        if ( isset( $attributes['filterInputIconSize'] ) && $attributes['filterInputIconSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-input-icon i { font-size: {$attributes['filterInputIconSize']}px; }";
            $css_rules[] = "{$selector} .ts-input-icon svg { width: {$attributes['filterInputIconSize']}px; height: {$attributes['filterInputIconSize']}px; }";
        }
        if ( isset( $attributes['filterInputIconSize_tablet'] ) && $attributes['filterInputIconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-input-icon i { font-size: {$attributes['filterInputIconSize_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-input-icon svg { width: {$attributes['filterInputIconSize_tablet']}px; height: {$attributes['filterInputIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['filterInputIconSize_mobile'] ) && $attributes['filterInputIconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-input-icon i { font-size: {$attributes['filterInputIconSize_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-input-icon svg { width: {$attributes['filterInputIconSize_mobile']}px; height: {$attributes['filterInputIconSize_mobile']}px; }";
        }

        // Filter input icon color
        if ( ! empty( $attributes['filterInputIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-input-icon i { color: {$attributes['filterInputIconColor']}; }";
            $css_rules[] = "{$selector} .ts-input-icon svg { fill: {$attributes['filterInputIconColor']}; }";
        }

        // Filter input icon margin (responsive)
        if ( isset( $attributes['filterInputIconMargin'] ) && $attributes['filterInputIconMargin'] !== '' ) {
            $css_rules[] = "{$selector} .ts-input-icon i { margin-right: {$attributes['filterInputIconMargin']}px; }";
            $css_rules[] = "{$selector} .ts-input-icon svg { margin-right: {$attributes['filterInputIconMargin']}px; }";
        }
        if ( isset( $attributes['filterInputIconMargin_tablet'] ) && $attributes['filterInputIconMargin_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-input-icon i { margin-right: {$attributes['filterInputIconMargin_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-input-icon svg { margin-right: {$attributes['filterInputIconMargin_tablet']}px; }";
        }
        if ( isset( $attributes['filterInputIconMargin_mobile'] ) && $attributes['filterInputIconMargin_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-input-icon i { margin-right: {$attributes['filterInputIconMargin_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-input-icon svg { margin-right: {$attributes['filterInputIconMargin_mobile']}px; }";
        }

        // Filter input focus states
        if ( ! empty( $attributes['filterInputBackgroundFocus'] ) ) {
            $css_rules[] = "{$selector} .inline-input:focus { background-color: {$attributes['filterInputBackgroundFocus']}; }";
        }
        if ( ! empty( $attributes['filterInputBorderColorFocus'] ) ) {
            $css_rules[] = "{$selector} .inline-input:focus { border-color: {$attributes['filterInputBorderColorFocus']}; }";
        }

        // ============================================
        // SECTION 9: Single Order Event (.order-event)
        // ============================================

        // Single event avatar size (responsive)
        if ( isset( $attributes['singleEventAvatarSize'] ) && $attributes['singleEventAvatarSize'] !== '' ) {
            $css_rules[] = "{$selector} .order-event .vx-avatar { width: {$attributes['singleEventAvatarSize']}px; height: {$attributes['singleEventAvatarSize']}px; }";
        }
        if ( isset( $attributes['singleEventAvatarSize_tablet'] ) && $attributes['singleEventAvatarSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .order-event .vx-avatar { width: {$attributes['singleEventAvatarSize_tablet']}px; height: {$attributes['singleEventAvatarSize_tablet']}px; }";
        }
        if ( isset( $attributes['singleEventAvatarSize_mobile'] ) && $attributes['singleEventAvatarSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .order-event .vx-avatar { width: {$attributes['singleEventAvatarSize_mobile']}px; height: {$attributes['singleEventAvatarSize_mobile']}px; }";
        }

        // Single event avatar border radius (responsive)
        if ( isset( $attributes['singleEventAvatarBorderRadius'] ) && $attributes['singleEventAvatarBorderRadius'] !== '' ) {
            $css_rules[] = "{$selector} .order-event .vx-avatar { border-radius: {$attributes['singleEventAvatarBorderRadius']}px; }";
        }
        if ( isset( $attributes['singleEventAvatarBorderRadius_tablet'] ) && $attributes['singleEventAvatarBorderRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .order-event .vx-avatar { border-radius: {$attributes['singleEventAvatarBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['singleEventAvatarBorderRadius_mobile'] ) && $attributes['singleEventAvatarBorderRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .order-event .vx-avatar { border-radius: {$attributes['singleEventAvatarBorderRadius_mobile']}px; }";
        }

        // Single event order title typography
        if ( ! empty( $attributes['singleEventOrderTitleTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['singleEventOrderTitleTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .order-event h3 { {$typo} }";
            }
        }

        // Single event order title color
        if ( ! empty( $attributes['singleEventOrderTitleColor'] ) ) {
            $css_rules[] = "{$selector} .order-event h3 { color: {$attributes['singleEventOrderTitleColor']}; }";
        }

        // Single event title typography
        if ( ! empty( $attributes['singleEventTitleTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['singleEventTitleTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .order-event > span { {$typo} }";
            }
        }

        // Single event title color
        if ( ! empty( $attributes['singleEventTitleColor'] ) ) {
            $css_rules[] = "{$selector} .order-event > span { color: {$attributes['singleEventTitleColor']}; }";
        }

        // Single event details typography
        if ( ! empty( $attributes['singleEventDetailsTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['singleEventDetailsTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .order-event p { {$typo} }";
            }
        }

        // Single event details color
        if ( ! empty( $attributes['singleEventDetailsColor'] ) ) {
            $css_rules[] = "{$selector} .order-event p { color: {$attributes['singleEventDetailsColor']}; }";
        }

        // Single event divider color
        if ( ! empty( $attributes['singleEventDividerColor'] ) ) {
            $css_rules[] = "{$selector} .order-event:after { background-color: {$attributes['singleEventDividerColor']}; }";
        }

        // Single event files typography
        if ( ! empty( $attributes['singleEventFilesTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['singleEventFilesTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .order-event .order-files a { {$typo} }";
            }
        }

        // Single event files color
        if ( ! empty( $attributes['singleEventFilesColor'] ) ) {
            $css_rules[] = "{$selector} .order-event .order-files a { color: {$attributes['singleEventFilesColor']}; }";
        }

        // ============================================
        // SECTION 10: Single Event Box (.order-event-box)
        // ============================================

        // Single event box padding
        if ( ! empty( $attributes['singleEventBoxPadding'] ) ) {
            $p = $attributes['singleEventBoxPadding'];
            $unit = $p['unit'] ?? 'px';
            $top = floatval( $p['top'] ?? 0 );
            $right = floatval( $p['right'] ?? 0 );
            $bottom = floatval( $p['bottom'] ?? 0 );
            $left = floatval( $p['left'] ?? 0 );
            $css_rules[] = "{$selector} .order-event-box { padding: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
        }

        // Single event box border type
        if ( ! empty( $attributes['singleEventBoxBorderType'] ) && $attributes['singleEventBoxBorderType'] !== 'Default' ) {
            $css_rules[] = "{$selector} .order-event-box { border-style: " . strtolower( $attributes['singleEventBoxBorderType'] ) . "; }";
        }

        // Single event box border radius (responsive)
        if ( isset( $attributes['singleEventBoxBorderRadius'] ) && $attributes['singleEventBoxBorderRadius'] !== '' ) {
            $css_rules[] = "{$selector} .order-event-box { border-radius: {$attributes['singleEventBoxBorderRadius']}px; }";
        }
        if ( isset( $attributes['singleEventBoxBorderRadius_tablet'] ) && $attributes['singleEventBoxBorderRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .order-event-box { border-radius: {$attributes['singleEventBoxBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['singleEventBoxBorderRadius_mobile'] ) && $attributes['singleEventBoxBorderRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .order-event-box { border-radius: {$attributes['singleEventBoxBorderRadius_mobile']}px; }";
        }

        // Single event box background
        if ( ! empty( $attributes['singleEventBoxBackground'] ) ) {
            $css_rules[] = "{$selector} .order-event-box { background-color: {$attributes['singleEventBoxBackground']}; }";
        }

        // ============================================
        // SECTION 11: Single Order Items (.ts-cart-list)
        // ============================================

        // Single item spacing (responsive)
        if ( isset( $attributes['singleItemSpacing'] ) && $attributes['singleItemSpacing'] !== '' ) {
            $css_rules[] = "{$selector} .ts-cart-list li { margin-bottom: {$attributes['singleItemSpacing']}px; }";
        }
        if ( isset( $attributes['singleItemSpacing_tablet'] ) && $attributes['singleItemSpacing_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-cart-list li { margin-bottom: {$attributes['singleItemSpacing_tablet']}px; }";
        }
        if ( isset( $attributes['singleItemSpacing_mobile'] ) && $attributes['singleItemSpacing_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-cart-list li { margin-bottom: {$attributes['singleItemSpacing_mobile']}px; }";
        }

        // Single item content spacing (responsive)
        if ( isset( $attributes['singleItemContentSpacing'] ) && $attributes['singleItemContentSpacing'] !== '' ) {
            $css_rules[] = "{$selector} .cart-item-details { gap: {$attributes['singleItemContentSpacing']}px; }";
        }
        if ( isset( $attributes['singleItemContentSpacing_tablet'] ) && $attributes['singleItemContentSpacing_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .cart-item-details { gap: {$attributes['singleItemContentSpacing_tablet']}px; }";
        }
        if ( isset( $attributes['singleItemContentSpacing_mobile'] ) && $attributes['singleItemContentSpacing_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .cart-item-details { gap: {$attributes['singleItemContentSpacing_mobile']}px; }";
        }

        // Single item picture size (responsive)
        if ( isset( $attributes['singleItemPictureSize'] ) && $attributes['singleItemPictureSize'] !== '' ) {
            $css_rules[] = "{$selector} .cart-image { width: {$attributes['singleItemPictureSize']}px; height: {$attributes['singleItemPictureSize']}px; }";
        }
        if ( isset( $attributes['singleItemPictureSize_tablet'] ) && $attributes['singleItemPictureSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .cart-image { width: {$attributes['singleItemPictureSize_tablet']}px; height: {$attributes['singleItemPictureSize_tablet']}px; }";
        }
        if ( isset( $attributes['singleItemPictureSize_mobile'] ) && $attributes['singleItemPictureSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .cart-image { width: {$attributes['singleItemPictureSize_mobile']}px; height: {$attributes['singleItemPictureSize_mobile']}px; }";
        }

        // Single item picture radius (responsive)
        if ( isset( $attributes['singleItemPictureRadius'] ) && $attributes['singleItemPictureRadius'] !== '' ) {
            $css_rules[] = "{$selector} .cart-image { border-radius: {$attributes['singleItemPictureRadius']}px; }";
        }
        if ( isset( $attributes['singleItemPictureRadius_tablet'] ) && $attributes['singleItemPictureRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .cart-image { border-radius: {$attributes['singleItemPictureRadius_tablet']}px; }";
        }
        if ( isset( $attributes['singleItemPictureRadius_mobile'] ) && $attributes['singleItemPictureRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .cart-image { border-radius: {$attributes['singleItemPictureRadius_mobile']}px; }";
        }

        // Single item title typography
        if ( ! empty( $attributes['singleItemTitleTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['singleItemTitleTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .order-item-title a { {$typo} }";
            }
        }

        // Single item title color
        if ( ! empty( $attributes['singleItemTitleColor'] ) ) {
            $css_rules[] = "{$selector} .order-item-title a { color: {$attributes['singleItemTitleColor']}; }";
        }

        // Single item subtitle typography
        if ( ! empty( $attributes['singleItemSubtitleTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['singleItemSubtitleTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .cart-item-details > span { {$typo} }";
            }
        }

        // Single item subtitle color
        if ( ! empty( $attributes['singleItemSubtitleColor'] ) ) {
            $css_rules[] = "{$selector} .cart-item-details > span { color: {$attributes['singleItemSubtitleColor']}; }";
        }

        // ============================================
        // SECTION 12: Single Table (.ts-cost-calculator)
        // ============================================

        // Single table list spacing (responsive)
        if ( isset( $attributes['singleTableListSpacing'] ) && $attributes['singleTableListSpacing'] !== '' ) {
            $css_rules[] = "{$selector} .ts-cost-calculator li { margin-bottom: {$attributes['singleTableListSpacing']}px; }";
        }
        if ( isset( $attributes['singleTableListSpacing_tablet'] ) && $attributes['singleTableListSpacing_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-cost-calculator li { margin-bottom: {$attributes['singleTableListSpacing_tablet']}px; }";
        }
        if ( isset( $attributes['singleTableListSpacing_mobile'] ) && $attributes['singleTableListSpacing_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-cost-calculator li { margin-bottom: {$attributes['singleTableListSpacing_mobile']}px; }";
        }

        // Single table typography
        if ( ! empty( $attributes['singleTableTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['singleTableTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-cost-calculator li p { {$typo} }";
            }
        }

        // Single table text color
        if ( ! empty( $attributes['singleTableTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-cost-calculator li p { color: {$attributes['singleTableTextColor']}; }";
        }

        // Single table typography (total)
        if ( ! empty( $attributes['singleTableTypographyTotal'] ) ) {
            $typo = self::generate_typography_css( $attributes['singleTableTypographyTotal'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-cost-calculator .ts-total p { {$typo} }";
            }
        }

        // Single table text color (total)
        if ( ! empty( $attributes['singleTableTextColorTotal'] ) ) {
            $css_rules[] = "{$selector} .ts-cost-calculator .ts-total p { color: {$attributes['singleTableTextColorTotal']}; }";
        }

        // ============================================
        // SECTION 13: Single Accordion (.order-accordion)
        // ============================================

        // Single accordion title typography
        if ( ! empty( $attributes['singleAccordionTitleTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['singleAccordionTitleTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .order-accordion summary { {$typo} }";
            }
        }

        // Single accordion title color
        if ( ! empty( $attributes['singleAccordionTitleColor'] ) ) {
            $css_rules[] = "{$selector} .order-accordion summary { color: {$attributes['singleAccordionTitleColor']}; }";
        }

        // Single accordion icon color
        if ( ! empty( $attributes['singleAccordionIconColor'] ) ) {
            $css_rules[] = "{$selector} .order-accordion summary i { color: {$attributes['singleAccordionIconColor']}; }";
            $css_rules[] = "{$selector} .order-accordion summary svg { fill: {$attributes['singleAccordionIconColor']}; }";
        }

        // Single accordion divider color
        if ( ! empty( $attributes['singleAccordionDividerColor'] ) ) {
            $css_rules[] = "{$selector} .order-accordion { border-color: {$attributes['singleAccordionDividerColor']}; }";
        }

        // ============================================
        // SECTION 14: Single Notes
        // ============================================

        // Single notes typography
        if ( ! empty( $attributes['singleNotesTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['singleNotesTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .order-notes p { {$typo} }";
            }
        }

        // Single notes text color
        if ( ! empty( $attributes['singleNotesTextColor'] ) ) {
            $css_rules[] = "{$selector} .order-notes p { color: {$attributes['singleNotesTextColor']}; }";
        }

        // Single notes link color
        if ( ! empty( $attributes['singleNotesLinkColor'] ) ) {
            $css_rules[] = "{$selector} .order-notes a { color: {$attributes['singleNotesLinkColor']}; }";
        }

        // ============================================
        // SECTION 15: No Results (.ts-no-posts)
        // ============================================

        // No results content gap (responsive)
        if ( isset( $attributes['noResultsContentGap'] ) && $attributes['noResultsContentGap'] !== '' ) {
            $css_rules[] = "{$selector} .ts-no-posts { gap: {$attributes['noResultsContentGap']}px; }";
        }
        if ( isset( $attributes['noResultsContentGap_tablet'] ) && $attributes['noResultsContentGap_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-no-posts { gap: {$attributes['noResultsContentGap_tablet']}px; }";
        }
        if ( isset( $attributes['noResultsContentGap_mobile'] ) && $attributes['noResultsContentGap_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-no-posts { gap: {$attributes['noResultsContentGap_mobile']}px; }";
        }

        // No results icon size (responsive)
        if ( isset( $attributes['noResultsIconSize'] ) && $attributes['noResultsIconSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-no-posts i { font-size: {$attributes['noResultsIconSize']}px; }";
            $css_rules[] = "{$selector} .ts-no-posts svg { width: {$attributes['noResultsIconSize']}px; height: {$attributes['noResultsIconSize']}px; }";
        }
        if ( isset( $attributes['noResultsIconSize_tablet'] ) && $attributes['noResultsIconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-no-posts i { font-size: {$attributes['noResultsIconSize_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-no-posts svg { width: {$attributes['noResultsIconSize_tablet']}px; height: {$attributes['noResultsIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['noResultsIconSize_mobile'] ) && $attributes['noResultsIconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-no-posts i { font-size: {$attributes['noResultsIconSize_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-no-posts svg { width: {$attributes['noResultsIconSize_mobile']}px; height: {$attributes['noResultsIconSize_mobile']}px; }";
        }

        // No results icon color
        if ( ! empty( $attributes['noResultsIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-no-posts i { color: {$attributes['noResultsIconColor']}; }";
            $css_rules[] = "{$selector} .ts-no-posts svg { fill: {$attributes['noResultsIconColor']}; }";
        }

        // No results typography
        if ( ! empty( $attributes['noResultsTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['noResultsTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-no-posts p { {$typo} }";
            }
        }

        // No results text color
        if ( ! empty( $attributes['noResultsTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-no-posts p { color: {$attributes['noResultsTextColor']}; }";
        }

        // No results link color
        if ( ! empty( $attributes['noResultsLinkColor'] ) ) {
            $css_rules[] = "{$selector} .ts-no-posts a { color: {$attributes['noResultsLinkColor']}; }";
        }

        // ============================================
        // SECTION 16: Loading Spinner (.ts-loader)
        // ============================================

        // Loading spinner colors
        if ( ! empty( $attributes['loadingSpinnerColor1'] ) ) {
            $css_rules[] = "{$selector} .ts-loader:before { border-color: {$attributes['loadingSpinnerColor1']}; }";
        }
        if ( ! empty( $attributes['loadingSpinnerColor2'] ) ) {
            $css_rules[] = "{$selector} .ts-loader:after { border-top-color: {$attributes['loadingSpinnerColor2']}; }";
        }

        // ============================================
        // Combine CSS with media queries
        // ============================================
        $final_css = '';
        if ( ! empty( $css_rules ) ) {
            $final_css .= implode( "\n", $css_rules );
        }
        if ( ! empty( $tablet_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::TABLET_BREAKPOINT . "px) {\n" . implode( "\n", $tablet_rules ) . "\n}";
        }
        if ( ! empty( $mobile_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::MOBILE_BREAKPOINT . "px) {\n" . implode( "\n", $mobile_rules ) . "\n}";
        }

        return $final_css;
    }

    /**
     * Generate CSS for Quick Search Block
     *
     * Handles 6 style sections: Search Button (normal/hover/filled), Button Suffix,
     * Popup Tabs, and Popup Custom Style.
     *
     * NOTE: This block uses the same simplified patterns as orders:
     * - Box shadow with enable flag
     * - Shorthand dimensions for padding/margin
     *
     * Source: app/blocks/src/quick-search/styles.ts
     * Voxel Reference: themes/voxel/app/widgets/quick-search.php
     *
     * @param array  $attributes Block attributes.
     * @param string $block_id   Block unique ID.
     * @return string Generated CSS.
     */
    public static function generate_quick_search_css( $attributes, $block_id ) {
        if ( empty( $block_id ) ) {
            return '';
        }

        $css_rules = [];
        $tablet_rules = [];
        $mobile_rules = [];
        $selector = '.voxel-fse-quick-search-' . $block_id;

        // ============================================
        // SECTION 1: Search Button - Normal State
        // ============================================

        // Typography
        if ( ! empty( $attributes['buttonTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['buttonTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-form .ts-filter { {$typo} }";
            }
        }

        // Padding (responsive dimensions)
        if ( ! empty( $attributes['buttonPadding'] ) ) {
            $p = $attributes['buttonPadding'];
            $unit = $p['unit'] ?? 'px';
            $top = floatval( $p['top'] ?? 0 );
            $right = floatval( $p['right'] ?? 0 );
            $bottom = floatval( $p['bottom'] ?? 0 );
            $left = floatval( $p['left'] ?? 0 );
            $css_rules[] = "{$selector} .ts-form .ts-filter { padding: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
        }
        if ( ! empty( $attributes['buttonPadding_tablet'] ) ) {
            $p = $attributes['buttonPadding_tablet'];
            $unit = $p['unit'] ?? 'px';
            $top = floatval( $p['top'] ?? 0 );
            $right = floatval( $p['right'] ?? 0 );
            $bottom = floatval( $p['bottom'] ?? 0 );
            $left = floatval( $p['left'] ?? 0 );
            $tablet_rules[] = "{$selector} .ts-form .ts-filter { padding: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
        }
        if ( ! empty( $attributes['buttonPadding_mobile'] ) ) {
            $p = $attributes['buttonPadding_mobile'];
            $unit = $p['unit'] ?? 'px';
            $top = floatval( $p['top'] ?? 0 );
            $right = floatval( $p['right'] ?? 0 );
            $bottom = floatval( $p['bottom'] ?? 0 );
            $left = floatval( $p['left'] ?? 0 );
            $mobile_rules[] = "{$selector} .ts-form .ts-filter { padding: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
        }

        // Height (responsive)
        if ( isset( $attributes['buttonHeight'] ) && $attributes['buttonHeight'] !== '' ) {
            $css_rules[] = "{$selector} .ts-filter { height: {$attributes['buttonHeight']}px; }";
        }
        if ( isset( $attributes['buttonHeight_tablet'] ) && $attributes['buttonHeight_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-filter { height: {$attributes['buttonHeight_tablet']}px; }";
        }
        if ( isset( $attributes['buttonHeight_mobile'] ) && $attributes['buttonHeight_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-filter { height: {$attributes['buttonHeight_mobile']}px; }";
        }

        // Box Shadow
        if ( ! empty( $attributes['buttonBoxShadow'] ) && ! empty( $attributes['buttonBoxShadow']['enable'] ) ) {
            $shadow = $attributes['buttonBoxShadow'];
            $h = $shadow['horizontal'] ?? 0;
            $v = $shadow['vertical'] ?? 0;
            $blur = $shadow['blur'] ?? 0;
            $spread = $shadow['spread'] ?? 0;
            $color = $shadow['color'] ?? 'rgba(0,0,0,0.1)';
            $inset = ( $shadow['position'] ?? '' ) === 'inset' ? 'inset ' : '';
            $css_rules[] = "{$selector} .ts-filter { box-shadow: {$inset}{$h}px {$v}px {$blur}px {$spread}px {$color}; }";
        }

        // Background Color
        if ( ! empty( $attributes['buttonBackground'] ) ) {
            $css_rules[] = "{$selector} .ts-form .ts-filter { background: {$attributes['buttonBackground']}; }";
        }

        // Text Color
        if ( ! empty( $attributes['buttonTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-form .ts-filter-text { color: {$attributes['buttonTextColor']}; }";
        }

        // Border (type + width + color)
        if ( ! empty( $attributes['buttonBorderType'] ) && $attributes['buttonBorderType'] !== 'none' ) {
            $border_type = $attributes['buttonBorderType'];
            $border_width = $attributes['buttonBorderWidth'] ?? 1;
            $border_color = $attributes['buttonBorderColor'] ?? '#000000';
            $css_rules[] = "{$selector} .ts-filter { border-style: {$border_type}; border-width: {$border_width}px; border-color: {$border_color}; }";
        }

        // Border Radius (responsive)
        if ( isset( $attributes['buttonBorderRadius'] ) && $attributes['buttonBorderRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-form .ts-filter { border-radius: {$attributes['buttonBorderRadius']}px; }";
        }
        if ( isset( $attributes['buttonBorderRadius_tablet'] ) && $attributes['buttonBorderRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-form .ts-filter { border-radius: {$attributes['buttonBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['buttonBorderRadius_mobile'] ) && $attributes['buttonBorderRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-form .ts-filter { border-radius: {$attributes['buttonBorderRadius_mobile']}px; }";
        }

        // Icon Color
        if ( ! empty( $attributes['buttonIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-filter i { color: {$attributes['buttonIconColor']}; }";
            $css_rules[] = "{$selector} .ts-filter svg { fill: {$attributes['buttonIconColor']}; }";
        }

        // Icon Size (responsive)
        if ( isset( $attributes['buttonIconSize'] ) && $attributes['buttonIconSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-filter i { font-size: {$attributes['buttonIconSize']}px; }";
            $css_rules[] = "{$selector} .ts-filter svg { min-width: {$attributes['buttonIconSize']}px; width: {$attributes['buttonIconSize']}px; height: {$attributes['buttonIconSize']}px; }";
        }
        if ( isset( $attributes['buttonIconSize_tablet'] ) && $attributes['buttonIconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-filter i { font-size: {$attributes['buttonIconSize_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-filter svg { min-width: {$attributes['buttonIconSize_tablet']}px; width: {$attributes['buttonIconSize_tablet']}px; height: {$attributes['buttonIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['buttonIconSize_mobile'] ) && $attributes['buttonIconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-filter i { font-size: {$attributes['buttonIconSize_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-filter svg { min-width: {$attributes['buttonIconSize_mobile']}px; width: {$attributes['buttonIconSize_mobile']}px; height: {$attributes['buttonIconSize_mobile']}px; }";
        }

        // Icon/Text Spacing (responsive)
        if ( isset( $attributes['buttonIconSpacing'] ) && $attributes['buttonIconSpacing'] !== '' ) {
            $css_rules[] = "{$selector} .ts-filter { grid-gap: {$attributes['buttonIconSpacing']}px; }";
        }
        if ( isset( $attributes['buttonIconSpacing_tablet'] ) && $attributes['buttonIconSpacing_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-filter { grid-gap: {$attributes['buttonIconSpacing_tablet']}px; }";
        }
        if ( isset( $attributes['buttonIconSpacing_mobile'] ) && $attributes['buttonIconSpacing_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-filter { grid-gap: {$attributes['buttonIconSpacing_mobile']}px; }";
        }

        // ============================================
        // SECTION 2: Search Button - Hover State
        // ============================================

        // Background Color (Hover)
        if ( ! empty( $attributes['buttonBackgroundHover'] ) ) {
            $css_rules[] = "{$selector} .ts-form .ts-filter:hover { background: {$attributes['buttonBackgroundHover']}; }";
        }

        // Text Color (Hover)
        if ( ! empty( $attributes['buttonTextColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-form .ts-filter:hover .ts-filter-text { color: {$attributes['buttonTextColorHover']}; }";
        }

        // Border Color (Hover)
        if ( ! empty( $attributes['buttonBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-form .ts-filter:hover { border-color: {$attributes['buttonBorderColorHover']}; }";
        }

        // Icon Color (Hover)
        if ( ! empty( $attributes['buttonIconColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-filter:hover i { color: {$attributes['buttonIconColorHover']}; }";
            $css_rules[] = "{$selector} .ts-filter:hover svg { fill: {$attributes['buttonIconColorHover']}; }";
        }

        // Box Shadow (Hover)
        if ( ! empty( $attributes['buttonBoxShadowHover'] ) && ! empty( $attributes['buttonBoxShadowHover']['enable'] ) ) {
            $shadow = $attributes['buttonBoxShadowHover'];
            $h = $shadow['horizontal'] ?? 0;
            $v = $shadow['vertical'] ?? 0;
            $blur = $shadow['blur'] ?? 0;
            $spread = $shadow['spread'] ?? 0;
            $color = $shadow['color'] ?? 'rgba(0,0,0,0.1)';
            $inset = ( $shadow['position'] ?? '' ) === 'inset' ? 'inset ' : '';
            $css_rules[] = "{$selector} .ts-filter:hover { box-shadow: {$inset}{$h}px {$v}px {$blur}px {$spread}px {$color}; }";
        }

        // ============================================
        // SECTION 3: Search Button - Filled State (.ts-filled)
        // ============================================

        // Typography (Filled)
        if ( ! empty( $attributes['buttonTypographyFilled'] ) ) {
            $typo = self::generate_typography_css( $attributes['buttonTypographyFilled'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-form .ts-filter.ts-filled { {$typo} }";
            }
        }

        // Background Color (Filled)
        if ( ! empty( $attributes['buttonBackgroundFilled'] ) ) {
            $css_rules[] = "{$selector} .ts-form .ts-filter.ts-filled { background: {$attributes['buttonBackgroundFilled']}; }";
        }

        // Text Color (Filled)
        if ( ! empty( $attributes['buttonTextColorFilled'] ) ) {
            $css_rules[] = "{$selector} .ts-form .ts-filter.ts-filled .ts-filter-text { color: {$attributes['buttonTextColorFilled']}; }";
        }

        // Icon Color (Filled)
        if ( ! empty( $attributes['buttonIconColorFilled'] ) ) {
            $css_rules[] = "{$selector} .ts-filter.ts-filled i { color: {$attributes['buttonIconColorFilled']}; }";
            $css_rules[] = "{$selector} .ts-filter.ts-filled svg { fill: {$attributes['buttonIconColorFilled']}; }";
        }

        // Border Color (Filled)
        if ( ! empty( $attributes['buttonBorderColorFilled'] ) ) {
            $css_rules[] = "{$selector} .ts-form .ts-filter.ts-filled { border-color: {$attributes['buttonBorderColorFilled']}; }";
        }

        // Border Width (Filled)
        if ( isset( $attributes['buttonBorderWidthFilled'] ) && $attributes['buttonBorderWidthFilled'] !== '' ) {
            $css_rules[] = "{$selector} .ts-form .ts-filter.ts-filled { border-width: {$attributes['buttonBorderWidthFilled']}px; }";
        }

        // Box Shadow (Filled)
        if ( ! empty( $attributes['buttonBoxShadowFilled'] ) && ! empty( $attributes['buttonBoxShadowFilled']['enable'] ) ) {
            $shadow = $attributes['buttonBoxShadowFilled'];
            $h = $shadow['horizontal'] ?? 0;
            $v = $shadow['vertical'] ?? 0;
            $blur = $shadow['blur'] ?? 0;
            $spread = $shadow['spread'] ?? 0;
            $color = $shadow['color'] ?? 'rgba(0,0,0,0.1)';
            $inset = ( $shadow['position'] ?? '' ) === 'inset' ? 'inset ' : '';
            $css_rules[] = "{$selector} .ts-filter.ts-filled { box-shadow: {$inset}{$h}px {$v}px {$blur}px {$spread}px {$color}; }";
        }

        // ============================================
        // SECTION 4: Button Suffix (.ts-shortcut)
        // ============================================

        // Hide Suffix (responsive)
        if ( ! empty( $attributes['suffixHide'] ) ) {
            $css_rules[] = "{$selector} .ts-shortcut { display: none !important; }";
        }
        if ( ! empty( $attributes['suffixHide_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-shortcut { display: none !important; }";
        }
        if ( ! empty( $attributes['suffixHide_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-shortcut { display: none !important; }";
        }

        // Padding (responsive dimensions)
        if ( ! empty( $attributes['suffixPadding'] ) ) {
            $p = $attributes['suffixPadding'];
            $unit = $p['unit'] ?? 'px';
            $top = floatval( $p['top'] ?? 0 );
            $right = floatval( $p['right'] ?? 0 );
            $bottom = floatval( $p['bottom'] ?? 0 );
            $left = floatval( $p['left'] ?? 0 );
            $css_rules[] = "{$selector} .ts-shortcut { padding: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
        }
        if ( ! empty( $attributes['suffixPadding_tablet'] ) ) {
            $p = $attributes['suffixPadding_tablet'];
            $unit = $p['unit'] ?? 'px';
            $top = floatval( $p['top'] ?? 0 );
            $right = floatval( $p['right'] ?? 0 );
            $bottom = floatval( $p['bottom'] ?? 0 );
            $left = floatval( $p['left'] ?? 0 );
            $tablet_rules[] = "{$selector} .ts-shortcut { padding: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
        }
        if ( ! empty( $attributes['suffixPadding_mobile'] ) ) {
            $p = $attributes['suffixPadding_mobile'];
            $unit = $p['unit'] ?? 'px';
            $top = floatval( $p['top'] ?? 0 );
            $right = floatval( $p['right'] ?? 0 );
            $bottom = floatval( $p['bottom'] ?? 0 );
            $left = floatval( $p['left'] ?? 0 );
            $mobile_rules[] = "{$selector} .ts-shortcut { padding: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
        }

        // Typography
        if ( ! empty( $attributes['suffixTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['suffixTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-shortcut { {$typo} }";
            }
        }

        // Text Color (responsive)
        if ( ! empty( $attributes['suffixTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-shortcut { color: {$attributes['suffixTextColor']}; }";
        }
        if ( ! empty( $attributes['suffixTextColor_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-shortcut { color: {$attributes['suffixTextColor_tablet']}; }";
        }
        if ( ! empty( $attributes['suffixTextColor_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-shortcut { color: {$attributes['suffixTextColor_mobile']}; }";
        }

        // Background Color (responsive)
        if ( ! empty( $attributes['suffixBackground'] ) ) {
            $css_rules[] = "{$selector} .ts-shortcut { background: {$attributes['suffixBackground']}; }";
        }
        if ( ! empty( $attributes['suffixBackground_tablet'] ) ) {
            $tablet_rules[] = "{$selector} .ts-shortcut { background: {$attributes['suffixBackground_tablet']}; }";
        }
        if ( ! empty( $attributes['suffixBackground_mobile'] ) ) {
            $mobile_rules[] = "{$selector} .ts-shortcut { background: {$attributes['suffixBackground_mobile']}; }";
        }

        // Border Radius (responsive)
        if ( isset( $attributes['suffixBorderRadius'] ) && $attributes['suffixBorderRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-shortcut { border-radius: {$attributes['suffixBorderRadius']}px; }";
        }
        if ( isset( $attributes['suffixBorderRadius_tablet'] ) && $attributes['suffixBorderRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-shortcut { border-radius: {$attributes['suffixBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['suffixBorderRadius_mobile'] ) && $attributes['suffixBorderRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-shortcut { border-radius: {$attributes['suffixBorderRadius_mobile']}px; }";
        }

        // Box Shadow
        if ( ! empty( $attributes['suffixBoxShadow'] ) && ! empty( $attributes['suffixBoxShadow']['enable'] ) ) {
            $shadow = $attributes['suffixBoxShadow'];
            $h = $shadow['horizontal'] ?? 0;
            $v = $shadow['vertical'] ?? 0;
            $blur = $shadow['blur'] ?? 0;
            $spread = $shadow['spread'] ?? 0;
            $color = $shadow['color'] ?? 'rgba(0,0,0,0.1)';
            $inset = ( $shadow['position'] ?? '' ) === 'inset' ? 'inset ' : '';
            $css_rules[] = "{$selector} .ts-shortcut { box-shadow: {$inset}{$h}px {$v}px {$blur}px {$spread}px {$color}; }";
        }

        // Side Margin (responsive) - uses 'right' for positioning
        if ( isset( $attributes['suffixMargin'] ) && $attributes['suffixMargin'] !== '' ) {
            $css_rules[] = "{$selector} .ts-shortcut { right: {$attributes['suffixMargin']}px; }";
        }
        if ( isset( $attributes['suffixMargin_tablet'] ) && $attributes['suffixMargin_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-shortcut { right: {$attributes['suffixMargin_tablet']}px; }";
        }
        if ( isset( $attributes['suffixMargin_mobile'] ) && $attributes['suffixMargin_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-shortcut { right: {$attributes['suffixMargin_mobile']}px; }";
        }

        // ============================================
        // SECTION 5: Popup Tabs (.ts-generic-tabs)
        // ============================================

        // Justify
        if ( ! empty( $attributes['tabsJustify'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs { justify-content: {$attributes['tabsJustify']}; }";
        }

        // Padding (dimensions)
        if ( ! empty( $attributes['tabsPadding'] ) ) {
            $p = $attributes['tabsPadding'];
            $unit = $p['unit'] ?? 'px';
            $top = floatval( $p['top'] ?? 0 );
            $right = floatval( $p['right'] ?? 0 );
            $bottom = floatval( $p['bottom'] ?? 0 );
            $left = floatval( $p['left'] ?? 0 );
            $css_rules[] = "{$selector} .ts-generic-tabs li a { padding: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
        }

        // Margin (dimensions)
        if ( ! empty( $attributes['tabsMargin'] ) ) {
            $m = $attributes['tabsMargin'];
            $unit = $m['unit'] ?? 'px';
            $top = floatval( $m['top'] ?? 0 );
            $right = floatval( $m['right'] ?? 0 );
            $bottom = floatval( $m['bottom'] ?? 0 );
            $left = floatval( $m['left'] ?? 0 );
            $css_rules[] = "{$selector} .ts-generic-tabs li { margin: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
        }

        // Text Color
        if ( ! empty( $attributes['tabsTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li a { color: {$attributes['tabsTextColor']}; }";
        }

        // Active Text Color
        if ( ! empty( $attributes['tabsActiveTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li.ts-tab-active a { color: {$attributes['tabsActiveTextColor']}; }";
        }

        // Border Color
        if ( ! empty( $attributes['tabsBorderColor'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li a { border-color: {$attributes['tabsBorderColor']}; }";
        }

        // Active Border Color
        if ( ! empty( $attributes['tabsActiveBorderColor'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li.ts-tab-active a { border-color: {$attributes['tabsActiveBorderColor']}; }";
        }

        // Background
        if ( ! empty( $attributes['tabsBackground'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li a { background: {$attributes['tabsBackground']}; }";
        }

        // Active Background
        if ( ! empty( $attributes['tabsActiveBackground'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li.ts-tab-active a { background: {$attributes['tabsActiveBackground']}; }";
        }

        // Border Radius
        if ( isset( $attributes['tabsBorderRadius'] ) && $attributes['tabsBorderRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li a { border-radius: {$attributes['tabsBorderRadius']}px; }";
        }

        // Hover State
        if ( ! empty( $attributes['tabsTextColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li a:hover { color: {$attributes['tabsTextColorHover']}; }";
        }
        if ( ! empty( $attributes['tabsBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li a:hover { border-color: {$attributes['tabsBorderColorHover']}; }";
        }
        if ( ! empty( $attributes['tabsBackgroundHover'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li a:hover { background: {$attributes['tabsBackgroundHover']}; }";
        }

        // ============================================
        // SECTION 6: Popup Custom Style
        // ============================================

        if ( ! empty( $attributes['popupCustomEnable'] ) ) {
            // Backdrop background
            if ( ! empty( $attributes['popupBackdropBackground'] ) ) {
                $css_rules[] = "{$selector} .ts-popup-overlay::after { content: ''; position: absolute; inset: 0; background-color: {$attributes['popupBackdropBackground']} !important; z-index: -1; }";
            }

            // Pointer events for backdrop
            if ( ! empty( $attributes['popupPointerEvents'] ) ) {
                $css_rules[] = "{$selector} .ts-popup-overlay::after { pointer-events: all; }";
            }

            // Center position
            if ( ! empty( $attributes['popupCenterPosition'] ) ) {
                $css_rules[] = "{$selector} .ts-popup-overlay { position: fixed !important; top: 50%; left: 50%; transform: translate(-50%, -50%); }";
            }

            // Box Shadow
            if ( ! empty( $attributes['popupBoxShadow'] ) && ! empty( $attributes['popupBoxShadow']['enable'] ) ) {
                $shadow = $attributes['popupBoxShadow'];
                $h = $shadow['horizontal'] ?? 0;
                $v = $shadow['vertical'] ?? 0;
                $blur = $shadow['blur'] ?? 0;
                $spread = $shadow['spread'] ?? 0;
                $color = $shadow['color'] ?? 'rgba(0,0,0,0.1)';
                $inset = ( $shadow['position'] ?? '' ) === 'inset' ? 'inset ' : '';
                $css_rules[] = "{$selector} .ts-quicksearch-popup { box-shadow: {$inset}{$h}px {$v}px {$blur}px {$spread}px {$color}; }";
            }

            // Border
            if ( ! empty( $attributes['popupBorder'] ) && ! empty( $attributes['popupBorder']['borderType'] ) && $attributes['popupBorder']['borderType'] !== 'none' ) {
                $border = $attributes['popupBorder'];
                $border_type = $border['borderType'];
                $border_width = $border['borderWidth'] ?? [ 'top' => 1, 'right' => 1, 'bottom' => 1, 'left' => 1 ];
                $border_color = $border['borderColor'] ?? '#000000';
                $top = floatval( $border_width['top'] ?? 0 );
                $right = floatval( $border_width['right'] ?? 0 );
                $bottom = floatval( $border_width['bottom'] ?? 0 );
                $left = floatval( $border_width['left'] ?? 0 );
                $css_rules[] = "{$selector} .ts-quicksearch-popup { border-style: {$border_type}; border-width: {$top}px {$right}px {$bottom}px {$left}px; border-color: {$border_color}; }";
            }

            // Top/Bottom margin (responsive)
            if ( isset( $attributes['popupTopBottomMargin'] ) && $attributes['popupTopBottomMargin'] !== '' ) {
                $css_rules[] = "{$selector} .ts-quicksearch-popup { margin-top: {$attributes['popupTopBottomMargin']}px; margin-bottom: {$attributes['popupTopBottomMargin']}px; }";
            }
            if ( isset( $attributes['popupTopBottomMargin_tablet'] ) && $attributes['popupTopBottomMargin_tablet'] !== '' ) {
                $tablet_rules[] = "{$selector} .ts-quicksearch-popup { margin-top: {$attributes['popupTopBottomMargin_tablet']}px; margin-bottom: {$attributes['popupTopBottomMargin_tablet']}px; }";
            }
            if ( isset( $attributes['popupTopBottomMargin_mobile'] ) && $attributes['popupTopBottomMargin_mobile'] !== '' ) {
                $mobile_rules[] = "{$selector} .ts-quicksearch-popup { margin-top: {$attributes['popupTopBottomMargin_mobile']}px; margin-bottom: {$attributes['popupTopBottomMargin_mobile']}px; }";
            }

            // Min width (responsive)
            if ( isset( $attributes['popupMinWidth'] ) && $attributes['popupMinWidth'] !== '' ) {
                $css_rules[] = "{$selector} .ts-quicksearch-popup { min-width: {$attributes['popupMinWidth']}px; }";
            }
            if ( isset( $attributes['popupMinWidth_tablet'] ) && $attributes['popupMinWidth_tablet'] !== '' ) {
                $tablet_rules[] = "{$selector} .ts-quicksearch-popup { min-width: {$attributes['popupMinWidth_tablet']}px; }";
            }
            if ( isset( $attributes['popupMinWidth_mobile'] ) && $attributes['popupMinWidth_mobile'] !== '' ) {
                $mobile_rules[] = "{$selector} .ts-quicksearch-popup { min-width: {$attributes['popupMinWidth_mobile']}px; }";
            }

            // Max width (responsive)
            if ( isset( $attributes['popupMaxWidth'] ) && $attributes['popupMaxWidth'] !== '' ) {
                $css_rules[] = "{$selector} .ts-quicksearch-popup { max-width: {$attributes['popupMaxWidth']}px; }";
            }
            if ( isset( $attributes['popupMaxWidth_tablet'] ) && $attributes['popupMaxWidth_tablet'] !== '' ) {
                $tablet_rules[] = "{$selector} .ts-quicksearch-popup { max-width: {$attributes['popupMaxWidth_tablet']}px; }";
            }
            if ( isset( $attributes['popupMaxWidth_mobile'] ) && $attributes['popupMaxWidth_mobile'] !== '' ) {
                $mobile_rules[] = "{$selector} .ts-quicksearch-popup { max-width: {$attributes['popupMaxWidth_mobile']}px; }";
            }

            // Max height (responsive)
            if ( isset( $attributes['popupMaxHeight'] ) && $attributes['popupMaxHeight'] !== '' ) {
                $css_rules[] = "{$selector} .ts-quicksearch-popup { max-height: {$attributes['popupMaxHeight']}px; overflow-y: auto; }";
            }
            if ( isset( $attributes['popupMaxHeight_tablet'] ) && $attributes['popupMaxHeight_tablet'] !== '' ) {
                $tablet_rules[] = "{$selector} .ts-quicksearch-popup { max-height: {$attributes['popupMaxHeight_tablet']}px; }";
            }
            if ( isset( $attributes['popupMaxHeight_mobile'] ) && $attributes['popupMaxHeight_mobile'] !== '' ) {
                $mobile_rules[] = "{$selector} .ts-quicksearch-popup { max-height: {$attributes['popupMaxHeight_mobile']}px; }";
            }
        }

        // ============================================
        // Combine CSS with media queries
        // ============================================
        $final_css = '';
        if ( ! empty( $css_rules ) ) {
            $final_css .= implode( "\n", $css_rules );
        }
        if ( ! empty( $tablet_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::TABLET_BREAKPOINT . "px) {\n" . implode( "\n", $tablet_rules ) . "\n}";
        }
        if ( ! empty( $mobile_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::MOBILE_BREAKPOINT . "px) {\n" . implode( "\n", $mobile_rules ) . "\n}";
        }

        return $final_css;
    }

    /**
     * Generate CSS for listing-plans block.
     *
     * @param array  $attributes Block attributes.
     * @param string $block_id   Unique block ID.
     * @return string Generated CSS.
     */
    public static function generate_listing_plans_css( $attributes, $block_id ) {
        $css_rules = [];
        $tablet_rules = [];
        $mobile_rules = [];
        $selector = ".voxel-fse-listing-plans-{$block_id}";

        // ============================================
        // STYLE TAB - General Section
        // ============================================

        // Plans columns (grid) - uses CSS variable
        if ( isset( $attributes['plansColumns'] ) && $attributes['plansColumns'] !== '' ) {
            $css_rules[] = "{$selector} .ts-plans-list { --ts-plans-columns: {$attributes['plansColumns']}; }";
        }
        if ( isset( $attributes['plansColumns_tablet'] ) && $attributes['plansColumns_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-plans-list { --ts-plans-columns: {$attributes['plansColumns_tablet']}; }";
        }
        if ( isset( $attributes['plansColumns_mobile'] ) && $attributes['plansColumns_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-plans-list { --ts-plans-columns: {$attributes['plansColumns_mobile']}; }";
        }

        // Plans gap
        if ( isset( $attributes['plansGap'] ) && $attributes['plansGap'] !== '' ) {
            $css_rules[] = "{$selector} .ts-plans-list { --ts-plans-gap: {$attributes['plansGap']}px; }";
        }
        if ( isset( $attributes['plansGap_tablet'] ) && $attributes['plansGap_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-plans-list { --ts-plans-gap: {$attributes['plansGap_tablet']}px; }";
        }
        if ( isset( $attributes['plansGap_mobile'] ) && $attributes['plansGap_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-plans-list { --ts-plans-gap: {$attributes['plansGap_mobile']}px; }";
        }

        // Plans border radius (responsive)
        if ( isset( $attributes['plansBorderRadius'] ) && $attributes['plansBorderRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-plan-container { border-radius: {$attributes['plansBorderRadius']}px; }";
        }
        if ( isset( $attributes['plansBorderRadius_tablet'] ) && $attributes['plansBorderRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-plan-container { border-radius: {$attributes['plansBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['plansBorderRadius_mobile'] ) && $attributes['plansBorderRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-plan-container { border-radius: {$attributes['plansBorderRadius_mobile']}px; }";
        }

        // Plans border (separate borderType/borderWidth/borderColor)
        if ( ! empty( $attributes['plansBorderType'] ) && $attributes['plansBorderType'] !== 'none' ) {
            $css_rules[] = "{$selector} .ts-plan-container { border-style: {$attributes['plansBorderType']}; }";

            if ( ! empty( $attributes['plansBorderWidth'] ) ) {
                $w = $attributes['plansBorderWidth'];
                $unit = $w['unit'] ?? 'px';
                $top = floatval( $w['top'] ?? 0 );
                $right = floatval( $w['right'] ?? 0 );
                $bottom = floatval( $w['bottom'] ?? 0 );
                $left = floatval( $w['left'] ?? 0 );
                $css_rules[] = "{$selector} .ts-plan-container { border-width: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
            }

            if ( ! empty( $attributes['plansBorderColor'] ) ) {
                $css_rules[] = "{$selector} .ts-plan-container { border-color: {$attributes['plansBorderColor']}; }";
            }
        }

        // Plans background
        if ( ! empty( $attributes['plansBackground'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-container { background-color: {$attributes['plansBackground']}; }";
        }

        // Plans box shadow (no enable flag)
        if ( ! empty( $attributes['plansBoxShadow'] ) ) {
            $s = $attributes['plansBoxShadow'];
            $h = $s['horizontal'] ?? 0;
            $v = $s['vertical'] ?? 0;
            $blur = $s['blur'] ?? 0;
            $spread = $s['spread'] ?? 0;
            $color = $s['color'] ?? 'rgba(0,0,0,0.1)';
            $css_rules[] = "{$selector} .ts-plan-container { box-shadow: {$h}px {$v}px {$blur}px {$spread}px {$color}; }";
        }

        // Body padding (responsive)
        if ( isset( $attributes['bodyPadding'] ) && $attributes['bodyPadding'] !== '' ) {
            $css_rules[] = "{$selector} .ts-plan-body { padding: {$attributes['bodyPadding']}px; }";
        }
        if ( isset( $attributes['bodyPadding_tablet'] ) && $attributes['bodyPadding_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-plan-body { padding: {$attributes['bodyPadding_tablet']}px; }";
        }
        if ( isset( $attributes['bodyPadding_mobile'] ) && $attributes['bodyPadding_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-plan-body { padding: {$attributes['bodyPadding_mobile']}px; }";
        }

        // Body content gap (responsive)
        if ( isset( $attributes['bodyContentGap'] ) && $attributes['bodyContentGap'] !== '' ) {
            $css_rules[] = "{$selector} .ts-plan-body { gap: {$attributes['bodyContentGap']}px; }";
        }
        if ( isset( $attributes['bodyContentGap_tablet'] ) && $attributes['bodyContentGap_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-plan-body { gap: {$attributes['bodyContentGap_tablet']}px; }";
        }
        if ( isset( $attributes['bodyContentGap_mobile'] ) && $attributes['bodyContentGap_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-plan-body { gap: {$attributes['bodyContentGap_mobile']}px; }";
        }

        // ============================================
        // STYLE TAB - Image Section
        // ============================================

        // Image padding (dimensions)
        if ( ! empty( $attributes['imagePadding'] ) ) {
            $p = $attributes['imagePadding'];
            $unit = $p['unit'] ?? 'px';
            $top = floatval( $p['top'] ?? 0 );
            $right = floatval( $p['right'] ?? 0 );
            $bottom = floatval( $p['bottom'] ?? 0 );
            $left = floatval( $p['left'] ?? 0 );
            $css_rules[] = "{$selector} .ts-plan-image { padding: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
        }

        // Image height (responsive)
        if ( isset( $attributes['imageHeight'] ) && $attributes['imageHeight'] !== '' && floatval( $attributes['imageHeight'] ) > 0 ) {
            $css_rules[] = "{$selector} .ts-plan-image { height: {$attributes['imageHeight']}px; }";
        }
        if ( isset( $attributes['imageHeight_tablet'] ) && $attributes['imageHeight_tablet'] !== '' && floatval( $attributes['imageHeight_tablet'] ) > 0 ) {
            $tablet_rules[] = "{$selector} .ts-plan-image { height: {$attributes['imageHeight_tablet']}px; }";
        }
        if ( isset( $attributes['imageHeight_mobile'] ) && $attributes['imageHeight_mobile'] !== '' && floatval( $attributes['imageHeight_mobile'] ) > 0 ) {
            $mobile_rules[] = "{$selector} .ts-plan-image { height: {$attributes['imageHeight_mobile']}px; }";
        }

        // ============================================
        // STYLE TAB - Pricing Section
        // ============================================

        // Pricing alignment
        if ( ! empty( $attributes['pricingAlign'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-pricing { justify-content: {$attributes['pricingAlign']}; }";
        }

        // Price typography
        if ( ! empty( $attributes['priceTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['priceTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-plan-price { {$typo}; }";
            }
        }

        // Price color
        if ( ! empty( $attributes['priceColor'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-price { color: {$attributes['priceColor']}; }";
        }

        // Period typography
        if ( ! empty( $attributes['periodTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['periodTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-price-period { {$typo}; }";
            }
        }

        // Period color
        if ( ! empty( $attributes['periodColor'] ) ) {
            $css_rules[] = "{$selector} .ts-price-period { color: {$attributes['periodColor']}; }";
        }

        // ============================================
        // STYLE TAB - Content Section
        // ============================================

        // Content alignment
        if ( ! empty( $attributes['contentAlign'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-details { justify-content: {$attributes['contentAlign']}; }";
        }

        // Name typography
        if ( ! empty( $attributes['nameTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['nameTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-plan-name { {$typo}; }";
            }
        }

        // Name color
        if ( ! empty( $attributes['nameColor'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-name { color: {$attributes['nameColor']}; }";
        }

        // Description alignment
        if ( ! empty( $attributes['descAlign'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-desc { text-align: {$attributes['descAlign']}; }";
        }

        // Description typography
        if ( ! empty( $attributes['descTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['descTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-plan-desc p { {$typo}; }";
            }
        }

        // Description color
        if ( ! empty( $attributes['descColor'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-desc p { color: {$attributes['descColor']}; }";
        }

        // ============================================
        // STYLE TAB - Features List Section
        // ============================================

        // List alignment
        if ( ! empty( $attributes['listAlign'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-features { justify-content: {$attributes['listAlign']}; }";
        }

        // List gap (responsive)
        if ( isset( $attributes['listGap'] ) && $attributes['listGap'] !== '' ) {
            $css_rules[] = "{$selector} .ts-plan-features ul li { margin-bottom: {$attributes['listGap']}px; }";
        }
        if ( isset( $attributes['listGap_tablet'] ) && $attributes['listGap_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-plan-features ul li { margin-bottom: {$attributes['listGap_tablet']}px; }";
        }
        if ( isset( $attributes['listGap_mobile'] ) && $attributes['listGap_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-plan-features ul li { margin-bottom: {$attributes['listGap_mobile']}px; }";
        }

        // List icon size (responsive)
        if ( isset( $attributes['listIconSize'] ) && $attributes['listIconSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-plan-features ul li svg { width: {$attributes['listIconSize']}px; height: {$attributes['listIconSize']}px; }";
            $css_rules[] = "{$selector} .ts-plan-features ul li i { font-size: {$attributes['listIconSize']}px; }";
        }
        if ( isset( $attributes['listIconSize_tablet'] ) && $attributes['listIconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-plan-features ul li svg { width: {$attributes['listIconSize_tablet']}px; height: {$attributes['listIconSize_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-plan-features ul li i { font-size: {$attributes['listIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['listIconSize_mobile'] ) && $attributes['listIconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-plan-features ul li svg { width: {$attributes['listIconSize_mobile']}px; height: {$attributes['listIconSize_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-plan-features ul li i { font-size: {$attributes['listIconSize_mobile']}px; }";
        }

        // List icon right padding (responsive)
        if ( isset( $attributes['listIconRightPad'] ) && $attributes['listIconRightPad'] !== '' ) {
            $css_rules[] = "{$selector} .ts-plan-features ul li svg { margin-right: {$attributes['listIconRightPad']}px; }";
            $css_rules[] = "{$selector} .ts-plan-features ul li i { margin-right: {$attributes['listIconRightPad']}px; }";
        }
        if ( isset( $attributes['listIconRightPad_tablet'] ) && $attributes['listIconRightPad_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-plan-features ul li svg { margin-right: {$attributes['listIconRightPad_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-plan-features ul li i { margin-right: {$attributes['listIconRightPad_tablet']}px; }";
        }
        if ( isset( $attributes['listIconRightPad_mobile'] ) && $attributes['listIconRightPad_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-plan-features ul li svg { margin-right: {$attributes['listIconRightPad_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-plan-features ul li i { margin-right: {$attributes['listIconRightPad_mobile']}px; }";
        }

        // List typography
        if ( ! empty( $attributes['listTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['listTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-plan-features ul li span { {$typo}; }";
            }
        }

        // List color
        if ( ! empty( $attributes['listColor'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-features ul li span { color: {$attributes['listColor']}; }";
        }

        // List icon color
        if ( ! empty( $attributes['listIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-features ul li svg { fill: {$attributes['listIconColor']}; }";
            $css_rules[] = "{$selector} .ts-plan-features ul li i { color: {$attributes['listIconColor']}; }";
        }

        // ============================================
        // STYLE TAB - Tabs Section
        // ============================================

        // Tabs justify
        if ( ! empty( $attributes['tabsJustify'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-tabs { justify-content: {$attributes['tabsJustify']}; }";
        }

        // Tabs padding (dimensions)
        if ( ! empty( $attributes['tabsPadding'] ) ) {
            $p = $attributes['tabsPadding'];
            $unit = $p['unit'] ?? 'px';
            $top = floatval( $p['top'] ?? 0 );
            $right = floatval( $p['right'] ?? 0 );
            $bottom = floatval( $p['bottom'] ?? 0 );
            $left = floatval( $p['left'] ?? 0 );
            $css_rules[] = "{$selector} .ts-plan-tabs li a { padding: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
        }

        // Tabs margin (dimensions)
        if ( ! empty( $attributes['tabsMargin'] ) ) {
            $p = $attributes['tabsMargin'];
            $unit = $p['unit'] ?? 'px';
            $top = floatval( $p['top'] ?? 0 );
            $right = floatval( $p['right'] ?? 15 );
            $bottom = floatval( $p['bottom'] ?? 15 );
            $left = floatval( $p['left'] ?? 0 );
            $css_rules[] = "{$selector} .ts-plan-tabs { margin: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
        }

        // Tabs border radius (responsive)
        if ( isset( $attributes['tabsBorderRadius'] ) && $attributes['tabsBorderRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-plan-tabs li a { border-radius: {$attributes['tabsBorderRadius']}px; }";
        }

        // Tab typography
        if ( ! empty( $attributes['tabTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['tabTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-plan-tabs li a { {$typo}; }";
            }
        }

        // Tab active typography
        if ( ! empty( $attributes['tabActiveTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['tabActiveTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-plan-tabs li.ts-tab-active a { {$typo}; }";
            }
        }

        // Tab color
        if ( ! empty( $attributes['tabColor'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-tabs li a { color: {$attributes['tabColor']}; }";
        }

        // Tab active color
        if ( ! empty( $attributes['tabActiveColor'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-tabs li.ts-tab-active a { color: {$attributes['tabActiveColor']}; }";
        }

        // Tab border color
        if ( ! empty( $attributes['tabBorderColor'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-tabs li a { border-color: {$attributes['tabBorderColor']}; }";
        }

        // Tab active border color
        if ( ! empty( $attributes['tabActiveBorderColor'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-tabs li.ts-tab-active a { border-color: {$attributes['tabActiveBorderColor']}; }";
        }

        // Tab background
        if ( ! empty( $attributes['tabBackground'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-tabs li a { background-color: {$attributes['tabBackground']}; }";
        }

        // Tab active background
        if ( ! empty( $attributes['tabActiveBackground'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-tabs li.ts-tab-active a { background-color: {$attributes['tabActiveBackground']}; }";
        }

        // ============================================
        // STYLE TAB - Primary Button Section (.ts-btn-2)
        // ============================================

        // Primary button radius (responsive)
        if ( isset( $attributes['primaryBtnRadius'] ) && $attributes['primaryBtnRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-2 { border-radius: {$attributes['primaryBtnRadius']}px; }";
        }
        if ( isset( $attributes['primaryBtnRadius_tablet'] ) && $attributes['primaryBtnRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-plan-footer .ts-btn-2 { border-radius: {$attributes['primaryBtnRadius_tablet']}px; }";
        }
        if ( isset( $attributes['primaryBtnRadius_mobile'] ) && $attributes['primaryBtnRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-plan-footer .ts-btn-2 { border-radius: {$attributes['primaryBtnRadius_mobile']}px; }";
        }

        // Primary button height (responsive)
        if ( isset( $attributes['primaryBtnHeight'] ) && $attributes['primaryBtnHeight'] !== '' && floatval( $attributes['primaryBtnHeight'] ) > 0 ) {
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-2 { height: {$attributes['primaryBtnHeight']}px; }";
        }
        if ( isset( $attributes['primaryBtnHeight_tablet'] ) && $attributes['primaryBtnHeight_tablet'] !== '' && floatval( $attributes['primaryBtnHeight_tablet'] ) > 0 ) {
            $tablet_rules[] = "{$selector} .ts-plan-footer .ts-btn-2 { height: {$attributes['primaryBtnHeight_tablet']}px; }";
        }
        if ( isset( $attributes['primaryBtnHeight_mobile'] ) && $attributes['primaryBtnHeight_mobile'] !== '' && floatval( $attributes['primaryBtnHeight_mobile'] ) > 0 ) {
            $mobile_rules[] = "{$selector} .ts-plan-footer .ts-btn-2 { height: {$attributes['primaryBtnHeight_mobile']}px; }";
        }

        // Primary button icon size (responsive)
        if ( isset( $attributes['primaryBtnIconSize'] ) && $attributes['primaryBtnIconSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-2 svg { width: {$attributes['primaryBtnIconSize']}px; height: {$attributes['primaryBtnIconSize']}px; }";
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-2 i { font-size: {$attributes['primaryBtnIconSize']}px; }";
        }
        if ( isset( $attributes['primaryBtnIconSize_tablet'] ) && $attributes['primaryBtnIconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-plan-footer .ts-btn-2 svg { width: {$attributes['primaryBtnIconSize_tablet']}px; height: {$attributes['primaryBtnIconSize_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-plan-footer .ts-btn-2 i { font-size: {$attributes['primaryBtnIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['primaryBtnIconSize_mobile'] ) && $attributes['primaryBtnIconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-plan-footer .ts-btn-2 svg { width: {$attributes['primaryBtnIconSize_mobile']}px; height: {$attributes['primaryBtnIconSize_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-plan-footer .ts-btn-2 i { font-size: {$attributes['primaryBtnIconSize_mobile']}px; }";
        }

        // Primary button icon padding (responsive)
        if ( isset( $attributes['primaryBtnIconPad'] ) && $attributes['primaryBtnIconPad'] !== '' ) {
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-2 svg { margin-left: {$attributes['primaryBtnIconPad']}px; }";
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-2 i { margin-left: {$attributes['primaryBtnIconPad']}px; }";
        }
        if ( isset( $attributes['primaryBtnIconPad_tablet'] ) && $attributes['primaryBtnIconPad_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-plan-footer .ts-btn-2 svg { margin-left: {$attributes['primaryBtnIconPad_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-plan-footer .ts-btn-2 i { margin-left: {$attributes['primaryBtnIconPad_tablet']}px; }";
        }
        if ( isset( $attributes['primaryBtnIconPad_mobile'] ) && $attributes['primaryBtnIconPad_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-plan-footer .ts-btn-2 svg { margin-left: {$attributes['primaryBtnIconPad_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-plan-footer .ts-btn-2 i { margin-left: {$attributes['primaryBtnIconPad_mobile']}px; }";
        }

        // Primary button typography
        if ( ! empty( $attributes['primaryBtnTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['primaryBtnTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-2 { {$typo}; }";
            }
        }

        // Primary button color
        if ( ! empty( $attributes['primaryBtnColor'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-2 { color: {$attributes['primaryBtnColor']}; }";
        }

        // Primary button background
        if ( ! empty( $attributes['primaryBtnBg'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-2 { background-color: {$attributes['primaryBtnBg']}; }";
        }

        // Primary button border
        if ( ! empty( $attributes['primaryBtnBorderType'] ) && $attributes['primaryBtnBorderType'] !== 'none' ) {
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-2 { border-style: {$attributes['primaryBtnBorderType']}; }";

            if ( ! empty( $attributes['primaryBtnBorderWidth'] ) ) {
                $w = $attributes['primaryBtnBorderWidth'];
                $unit = $w['unit'] ?? 'px';
                $top = floatval( $w['top'] ?? 0 );
                $right = floatval( $w['right'] ?? 0 );
                $bottom = floatval( $w['bottom'] ?? 0 );
                $left = floatval( $w['left'] ?? 0 );
                $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-2 { border-width: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
            }

            if ( ! empty( $attributes['primaryBtnBorderColor'] ) ) {
                $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-2 { border-color: {$attributes['primaryBtnBorderColor']}; }";
            }
        }

        // Primary button box shadow
        if ( ! empty( $attributes['primaryBtnBoxShadow'] ) ) {
            $s = $attributes['primaryBtnBoxShadow'];
            $h = $s['horizontal'] ?? 0;
            $v = $s['vertical'] ?? 0;
            $blur = $s['blur'] ?? 0;
            $spread = $s['spread'] ?? 0;
            $color = $s['color'] ?? 'rgba(0,0,0,0.1)';
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-2 { box-shadow: {$h}px {$v}px {$blur}px {$spread}px {$color}; }";
        }

        // Primary button icon color
        if ( ! empty( $attributes['primaryBtnIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-2 svg { fill: {$attributes['primaryBtnIconColor']}; }";
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-2 i { color: {$attributes['primaryBtnIconColor']}; }";
        }

        // Primary button hover states
        if ( ! empty( $attributes['primaryBtnColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-2:hover { color: {$attributes['primaryBtnColorHover']}; }";
        }
        if ( ! empty( $attributes['primaryBtnBgHover'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-2:hover { background-color: {$attributes['primaryBtnBgHover']}; }";
        }
        if ( ! empty( $attributes['primaryBtnBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-2:hover { border-color: {$attributes['primaryBtnBorderColorHover']}; }";
        }
        if ( ! empty( $attributes['primaryBtnIconColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-2:hover svg { fill: {$attributes['primaryBtnIconColorHover']}; }";
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-2:hover i { color: {$attributes['primaryBtnIconColorHover']}; }";
        }
        if ( ! empty( $attributes['primaryBtnBoxShadowHover'] ) ) {
            $s = $attributes['primaryBtnBoxShadowHover'];
            $h = $s['horizontal'] ?? 0;
            $v = $s['vertical'] ?? 0;
            $blur = $s['blur'] ?? 0;
            $spread = $s['spread'] ?? 0;
            $color = $s['color'] ?? 'rgba(0,0,0,0.1)';
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-2:hover { box-shadow: {$h}px {$v}px {$blur}px {$spread}px {$color}; }";
        }

        // Primary button padding (dimensions, responsive)
        if ( ! empty( $attributes['primaryBtnPadding'] ) ) {
            $p = $attributes['primaryBtnPadding'];
            $unit = $p['unit'] ?? 'px';
            $top = floatval( $p['top'] ?? 0 );
            $right = floatval( $p['right'] ?? 0 );
            $bottom = floatval( $p['bottom'] ?? 0 );
            $left = floatval( $p['left'] ?? 0 );
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-2 { padding: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
        }
        if ( ! empty( $attributes['primaryBtnPadding_tablet'] ) ) {
            $p = $attributes['primaryBtnPadding_tablet'];
            $unit = $p['unit'] ?? 'px';
            $top = floatval( $p['top'] ?? 0 );
            $right = floatval( $p['right'] ?? 0 );
            $bottom = floatval( $p['bottom'] ?? 0 );
            $left = floatval( $p['left'] ?? 0 );
            $tablet_rules[] = "{$selector} .ts-plan-footer .ts-btn-2 { padding: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
        }
        if ( ! empty( $attributes['primaryBtnPadding_mobile'] ) ) {
            $p = $attributes['primaryBtnPadding_mobile'];
            $unit = $p['unit'] ?? 'px';
            $top = floatval( $p['top'] ?? 0 );
            $right = floatval( $p['right'] ?? 0 );
            $bottom = floatval( $p['bottom'] ?? 0 );
            $left = floatval( $p['left'] ?? 0 );
            $mobile_rules[] = "{$selector} .ts-plan-footer .ts-btn-2 { padding: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
        }

        // ============================================
        // STYLE TAB - Secondary Button Section (.ts-btn-1)
        // ============================================

        // Secondary button radius (responsive)
        if ( isset( $attributes['secondaryBtnRadius'] ) && $attributes['secondaryBtnRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-1 { border-radius: {$attributes['secondaryBtnRadius']}px; }";
        }
        if ( isset( $attributes['secondaryBtnRadius_tablet'] ) && $attributes['secondaryBtnRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-plan-footer .ts-btn-1 { border-radius: {$attributes['secondaryBtnRadius_tablet']}px; }";
        }
        if ( isset( $attributes['secondaryBtnRadius_mobile'] ) && $attributes['secondaryBtnRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-plan-footer .ts-btn-1 { border-radius: {$attributes['secondaryBtnRadius_mobile']}px; }";
        }

        // Secondary button height (responsive)
        if ( isset( $attributes['secondaryBtnHeight'] ) && $attributes['secondaryBtnHeight'] !== '' && floatval( $attributes['secondaryBtnHeight'] ) > 0 ) {
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-1 { height: {$attributes['secondaryBtnHeight']}px; }";
        }
        if ( isset( $attributes['secondaryBtnHeight_tablet'] ) && $attributes['secondaryBtnHeight_tablet'] !== '' && floatval( $attributes['secondaryBtnHeight_tablet'] ) > 0 ) {
            $tablet_rules[] = "{$selector} .ts-plan-footer .ts-btn-1 { height: {$attributes['secondaryBtnHeight_tablet']}px; }";
        }
        if ( isset( $attributes['secondaryBtnHeight_mobile'] ) && $attributes['secondaryBtnHeight_mobile'] !== '' && floatval( $attributes['secondaryBtnHeight_mobile'] ) > 0 ) {
            $mobile_rules[] = "{$selector} .ts-plan-footer .ts-btn-1 { height: {$attributes['secondaryBtnHeight_mobile']}px; }";
        }

        // Secondary button icon size (responsive)
        if ( isset( $attributes['secondaryBtnIconSize'] ) && $attributes['secondaryBtnIconSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-1 svg { width: {$attributes['secondaryBtnIconSize']}px; height: {$attributes['secondaryBtnIconSize']}px; }";
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-1 i { font-size: {$attributes['secondaryBtnIconSize']}px; }";
        }
        if ( isset( $attributes['secondaryBtnIconSize_tablet'] ) && $attributes['secondaryBtnIconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-plan-footer .ts-btn-1 svg { width: {$attributes['secondaryBtnIconSize_tablet']}px; height: {$attributes['secondaryBtnIconSize_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-plan-footer .ts-btn-1 i { font-size: {$attributes['secondaryBtnIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['secondaryBtnIconSize_mobile'] ) && $attributes['secondaryBtnIconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-plan-footer .ts-btn-1 svg { width: {$attributes['secondaryBtnIconSize_mobile']}px; height: {$attributes['secondaryBtnIconSize_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-plan-footer .ts-btn-1 i { font-size: {$attributes['secondaryBtnIconSize_mobile']}px; }";
        }

        // Secondary button icon padding (responsive)
        if ( isset( $attributes['secondaryBtnIconPad'] ) && $attributes['secondaryBtnIconPad'] !== '' ) {
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-1 svg { margin-left: {$attributes['secondaryBtnIconPad']}px; }";
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-1 i { margin-left: {$attributes['secondaryBtnIconPad']}px; }";
        }
        if ( isset( $attributes['secondaryBtnIconPad_tablet'] ) && $attributes['secondaryBtnIconPad_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-plan-footer .ts-btn-1 svg { margin-left: {$attributes['secondaryBtnIconPad_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-plan-footer .ts-btn-1 i { margin-left: {$attributes['secondaryBtnIconPad_tablet']}px; }";
        }
        if ( isset( $attributes['secondaryBtnIconPad_mobile'] ) && $attributes['secondaryBtnIconPad_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-plan-footer .ts-btn-1 svg { margin-left: {$attributes['secondaryBtnIconPad_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-plan-footer .ts-btn-1 i { margin-left: {$attributes['secondaryBtnIconPad_mobile']}px; }";
        }

        // Secondary button typography
        if ( ! empty( $attributes['secondaryBtnTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['secondaryBtnTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-1 { {$typo}; }";
            }
        }

        // Secondary button color
        if ( ! empty( $attributes['secondaryBtnColor'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-1 { color: {$attributes['secondaryBtnColor']}; }";
        }

        // Secondary button background
        if ( ! empty( $attributes['secondaryBtnBg'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-1 { background-color: {$attributes['secondaryBtnBg']}; }";
        }

        // Secondary button border
        if ( ! empty( $attributes['secondaryBtnBorderType'] ) && $attributes['secondaryBtnBorderType'] !== 'none' ) {
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-1 { border-style: {$attributes['secondaryBtnBorderType']}; }";

            if ( ! empty( $attributes['secondaryBtnBorderWidth'] ) ) {
                $w = $attributes['secondaryBtnBorderWidth'];
                $unit = $w['unit'] ?? 'px';
                $top = floatval( $w['top'] ?? 0 );
                $right = floatval( $w['right'] ?? 0 );
                $bottom = floatval( $w['bottom'] ?? 0 );
                $left = floatval( $w['left'] ?? 0 );
                $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-1 { border-width: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
            }

            if ( ! empty( $attributes['secondaryBtnBorderColor'] ) ) {
                $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-1 { border-color: {$attributes['secondaryBtnBorderColor']}; }";
            }
        }

        // Secondary button box shadow
        if ( ! empty( $attributes['secondaryBtnBoxShadow'] ) ) {
            $s = $attributes['secondaryBtnBoxShadow'];
            $h = $s['horizontal'] ?? 0;
            $v = $s['vertical'] ?? 0;
            $blur = $s['blur'] ?? 0;
            $spread = $s['spread'] ?? 0;
            $color = $s['color'] ?? 'rgba(0,0,0,0.1)';
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-1 { box-shadow: {$h}px {$v}px {$blur}px {$spread}px {$color}; }";
        }

        // Secondary button icon color
        if ( ! empty( $attributes['secondaryBtnIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-1 svg { fill: {$attributes['secondaryBtnIconColor']}; }";
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-1 i { color: {$attributes['secondaryBtnIconColor']}; }";
        }

        // Secondary button padding (dimensions, responsive)
        if ( ! empty( $attributes['secondaryBtnPadding'] ) ) {
            $p = $attributes['secondaryBtnPadding'];
            $unit = $p['unit'] ?? 'px';
            $top = floatval( $p['top'] ?? 0 );
            $right = floatval( $p['right'] ?? 0 );
            $bottom = floatval( $p['bottom'] ?? 0 );
            $left = floatval( $p['left'] ?? 0 );
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-1 { padding: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
        }
        if ( ! empty( $attributes['secondaryBtnPadding_tablet'] ) ) {
            $p = $attributes['secondaryBtnPadding_tablet'];
            $unit = $p['unit'] ?? 'px';
            $top = floatval( $p['top'] ?? 0 );
            $right = floatval( $p['right'] ?? 0 );
            $bottom = floatval( $p['bottom'] ?? 0 );
            $left = floatval( $p['left'] ?? 0 );
            $tablet_rules[] = "{$selector} .ts-plan-footer .ts-btn-1 { padding: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
        }
        if ( ! empty( $attributes['secondaryBtnPadding_mobile'] ) ) {
            $p = $attributes['secondaryBtnPadding_mobile'];
            $unit = $p['unit'] ?? 'px';
            $top = floatval( $p['top'] ?? 0 );
            $right = floatval( $p['right'] ?? 0 );
            $bottom = floatval( $p['bottom'] ?? 0 );
            $left = floatval( $p['left'] ?? 0 );
            $mobile_rules[] = "{$selector} .ts-plan-footer .ts-btn-1 { padding: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
        }

        // Secondary button hover states
        if ( ! empty( $attributes['secondaryBtnColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-1:hover { color: {$attributes['secondaryBtnColorHover']}; }";
        }
        if ( ! empty( $attributes['secondaryBtnBgHover'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-1:hover { background-color: {$attributes['secondaryBtnBgHover']}; }";
        }
        if ( ! empty( $attributes['secondaryBtnBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-1:hover { border-color: {$attributes['secondaryBtnBorderColorHover']}; }";
        }
        if ( ! empty( $attributes['secondaryBtnIconColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-1:hover svg { fill: {$attributes['secondaryBtnIconColorHover']}; }";
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-1:hover i { color: {$attributes['secondaryBtnIconColorHover']}; }";
        }
        if ( ! empty( $attributes['secondaryBtnBoxShadowHover'] ) ) {
            $s = $attributes['secondaryBtnBoxShadowHover'];
            $h = $s['horizontal'] ?? 0;
            $v = $s['vertical'] ?? 0;
            $blur = $s['blur'] ?? 0;
            $spread = $s['spread'] ?? 0;
            $color = $s['color'] ?? 'rgba(0,0,0,0.1)';
            $css_rules[] = "{$selector} .ts-plan-footer .ts-btn-1:hover { box-shadow: {$h}px {$v}px {$blur}px {$spread}px {$color}; }";
        }

        // ============================================
        // STYLE TAB - Featured Plan Section
        // ============================================

        // Featured plan border
        if ( ! empty( $attributes['featuredBorderType'] ) && $attributes['featuredBorderType'] !== 'none' ) {
            $css_rules[] = "{$selector} .ts-plan-container.ts-featured-plan { border-style: {$attributes['featuredBorderType']}; }";

            if ( ! empty( $attributes['featuredBorderWidth'] ) ) {
                $w = $attributes['featuredBorderWidth'];
                $unit = $w['unit'] ?? 'px';
                $top = floatval( $w['top'] ?? 0 );
                $right = floatval( $w['right'] ?? 0 );
                $bottom = floatval( $w['bottom'] ?? 0 );
                $left = floatval( $w['left'] ?? 0 );
                $css_rules[] = "{$selector} .ts-plan-container.ts-featured-plan { border-width: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
            }

            if ( ! empty( $attributes['featuredBorderColor'] ) ) {
                $css_rules[] = "{$selector} .ts-plan-container.ts-featured-plan { border-color: {$attributes['featuredBorderColor']}; }";
            }
        }

        // Featured plan box shadow
        if ( ! empty( $attributes['featuredBoxShadow'] ) ) {
            $s = $attributes['featuredBoxShadow'];
            $h = $s['horizontal'] ?? 0;
            $v = $s['vertical'] ?? 0;
            $blur = $s['blur'] ?? 0;
            $spread = $s['spread'] ?? 0;
            $color = $s['color'] ?? 'rgba(0,0,0,0.1)';
            $css_rules[] = "{$selector} .ts-plan-container.ts-featured-plan { box-shadow: {$h}px {$v}px {$blur}px {$spread}px {$color}; }";
        }

        // Featured badge background
        if ( ! empty( $attributes['featuredBadgeBg'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-container.ts-featured-plan .ts-featured-badge { background-color: {$attributes['featuredBadgeBg']}; }";
        }

        // Featured badge text color
        if ( ! empty( $attributes['featuredBadgeColor'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-container.ts-featured-plan .ts-featured-badge { color: {$attributes['featuredBadgeColor']}; }";
        }

        // Featured badge typography
        if ( ! empty( $attributes['featuredBadgeTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['featuredBadgeTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-plan-container.ts-featured-plan .ts-featured-badge { {$typo}; }";
            }
        }

        // ============================================
        // STYLE TAB - Dialog Section
        // ============================================

        // Dialog typography
        if ( ! empty( $attributes['dialogTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['dialogTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-popup-controller .ts-popup-head { {$typo}; }";
            }
        }

        // Dialog color
        if ( ! empty( $attributes['dialogColor'] ) ) {
            $css_rules[] = "{$selector} .ts-popup-controller .ts-popup-head { color: {$attributes['dialogColor']}; }";
        }

        // Dialog background
        if ( ! empty( $attributes['dialogBackground'] ) ) {
            $css_rules[] = "{$selector} .ts-popup-controller .ts-popup-head { background-color: {$attributes['dialogBackground']}; }";
        }

        // Dialog border
        if ( ! empty( $attributes['dialogBorderType'] ) && $attributes['dialogBorderType'] !== 'none' ) {
            $css_rules[] = "{$selector} .ts-popup-controller .ts-popup-head { border-style: {$attributes['dialogBorderType']}; }";

            if ( ! empty( $attributes['dialogBorderWidth'] ) ) {
                $w = $attributes['dialogBorderWidth'];
                $unit = $w['unit'] ?? 'px';
                $top = floatval( $w['top'] ?? 0 );
                $right = floatval( $w['right'] ?? 0 );
                $bottom = floatval( $w['bottom'] ?? 0 );
                $left = floatval( $w['left'] ?? 0 );
                $css_rules[] = "{$selector} .ts-popup-controller .ts-popup-head { border-width: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
            }

            if ( ! empty( $attributes['dialogBorderColor'] ) ) {
                $css_rules[] = "{$selector} .ts-popup-controller .ts-popup-head { border-color: {$attributes['dialogBorderColor']}; }";
            }
        }

        // Dialog box shadow
        if ( ! empty( $attributes['dialogBoxShadow'] ) ) {
            $s = $attributes['dialogBoxShadow'];
            $h = $s['horizontal'] ?? 0;
            $v = $s['vertical'] ?? 0;
            $blur = $s['blur'] ?? 0;
            $spread = $s['spread'] ?? 0;
            $color = $s['color'] ?? 'rgba(0,0,0,0.1)';
            $css_rules[] = "{$selector} .ts-popup-controller .ts-popup-head { box-shadow: {$h}px {$v}px {$blur}px {$spread}px {$color}; }";
        }

        // Dialog border radius (responsive)
        if ( isset( $attributes['dialogBorderRadius'] ) && $attributes['dialogBorderRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-popup-controller .ts-popup-head { border-radius: {$attributes['dialogBorderRadius']}px; }";
        }
        if ( isset( $attributes['dialogBorderRadius_tablet'] ) && $attributes['dialogBorderRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-popup-controller .ts-popup-head { border-radius: {$attributes['dialogBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['dialogBorderRadius_mobile'] ) && $attributes['dialogBorderRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-popup-controller .ts-popup-head { border-radius: {$attributes['dialogBorderRadius_mobile']}px; }";
        }

        // ============================================
        // STYLE TAB - Tabs Hover States Section
        // ============================================

        // Tab hover text color
        if ( ! empty( $attributes['tabsTextColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-tabs li a:hover { color: {$attributes['tabsTextColorHover']}; }";
        }

        // Tab active hover text color
        if ( ! empty( $attributes['tabsActiveTextColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-tabs li.ts-tab-active a:hover { color: {$attributes['tabsActiveTextColorHover']}; }";
        }

        // Tab hover border color
        if ( ! empty( $attributes['tabsBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-tabs li a:hover { border-color: {$attributes['tabsBorderColorHover']}; }";
        }

        // Tab active hover border color
        if ( ! empty( $attributes['tabsActiveBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-tabs li.ts-tab-active a:hover { border-color: {$attributes['tabsActiveBorderColorHover']}; }";
        }

        // Tab hover background color
        if ( ! empty( $attributes['tabsBgColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-tabs li a:hover { background-color: {$attributes['tabsBgColorHover']}; }";
        }

        // Tab active hover background color
        if ( ! empty( $attributes['tabsActiveBgColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-tabs li.ts-tab-active a:hover { background-color: {$attributes['tabsActiveBgColorHover']}; }";
        }

        // Tab border type
        if ( ! empty( $attributes['tabBorderType'] ) && $attributes['tabBorderType'] !== 'default' && $attributes['tabBorderType'] !== 'none' ) {
            $css_rules[] = "{$selector} .ts-plan-tabs li a { border-style: {$attributes['tabBorderType']}; }";
        }

        // ============================================
        // STYLE TAB - Responsive Dimensions
        // ============================================

        // Image padding responsive
        if ( ! empty( $attributes['imagePadding_tablet'] ) ) {
            $p = $attributes['imagePadding_tablet'];
            $unit = $p['unit'] ?? 'px';
            $top = floatval( $p['top'] ?? 0 );
            $right = floatval( $p['right'] ?? 0 );
            $bottom = floatval( $p['bottom'] ?? 0 );
            $left = floatval( $p['left'] ?? 0 );
            $tablet_rules[] = "{$selector} .ts-plan-image { padding: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
        }
        if ( ! empty( $attributes['imagePadding_mobile'] ) ) {
            $p = $attributes['imagePadding_mobile'];
            $unit = $p['unit'] ?? 'px';
            $top = floatval( $p['top'] ?? 0 );
            $right = floatval( $p['right'] ?? 0 );
            $bottom = floatval( $p['bottom'] ?? 0 );
            $left = floatval( $p['left'] ?? 0 );
            $mobile_rules[] = "{$selector} .ts-plan-image { padding: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
        }

        // Tabs padding responsive
        if ( ! empty( $attributes['tabsPadding_tablet'] ) ) {
            $p = $attributes['tabsPadding_tablet'];
            $unit = $p['unit'] ?? 'px';
            $top = floatval( $p['top'] ?? 0 );
            $right = floatval( $p['right'] ?? 0 );
            $bottom = floatval( $p['bottom'] ?? 0 );
            $left = floatval( $p['left'] ?? 0 );
            $tablet_rules[] = "{$selector} .ts-plan-tabs li a { padding: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
        }
        if ( ! empty( $attributes['tabsPadding_mobile'] ) ) {
            $p = $attributes['tabsPadding_mobile'];
            $unit = $p['unit'] ?? 'px';
            $top = floatval( $p['top'] ?? 0 );
            $right = floatval( $p['right'] ?? 0 );
            $bottom = floatval( $p['bottom'] ?? 0 );
            $left = floatval( $p['left'] ?? 0 );
            $mobile_rules[] = "{$selector} .ts-plan-tabs li a { padding: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
        }

        // Tabs margin responsive
        if ( ! empty( $attributes['tabsMargin_tablet'] ) ) {
            $p = $attributes['tabsMargin_tablet'];
            $unit = $p['unit'] ?? 'px';
            $top = floatval( $p['top'] ?? 0 );
            $right = floatval( $p['right'] ?? 15 );
            $bottom = floatval( $p['bottom'] ?? 15 );
            $left = floatval( $p['left'] ?? 0 );
            $tablet_rules[] = "{$selector} .ts-plan-tabs { margin: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
        }
        if ( ! empty( $attributes['tabsMargin_mobile'] ) ) {
            $p = $attributes['tabsMargin_mobile'];
            $unit = $p['unit'] ?? 'px';
            $top = floatval( $p['top'] ?? 0 );
            $right = floatval( $p['right'] ?? 15 );
            $bottom = floatval( $p['bottom'] ?? 15 );
            $left = floatval( $p['left'] ?? 0 );
            $mobile_rules[] = "{$selector} .ts-plan-tabs { margin: {$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}; }";
        }

        // Tabs border radius responsive
        if ( isset( $attributes['tabsBorderRadius_tablet'] ) && $attributes['tabsBorderRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-plan-tabs li a { border-radius: {$attributes['tabsBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['tabsBorderRadius_mobile'] ) && $attributes['tabsBorderRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-plan-tabs li a { border-radius: {$attributes['tabsBorderRadius_mobile']}px; }";
        }

        // ============================================
        // Combine CSS with media queries
        // ============================================
        $final_css = '';
        if ( ! empty( $css_rules ) ) {
            $final_css .= implode( "\n", $css_rules );
        }
        if ( ! empty( $tablet_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::TABLET_BREAKPOINT . "px) {\n" . implode( "\n", $tablet_rules ) . "\n}";
        }
        if ( ! empty( $mobile_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::MOBILE_BREAKPOINT . "px) {\n" . implode( "\n", $mobile_rules ) . "\n}";
        }

        return $final_css;
    }

    /**
     * Generate CSS for membership-plans block.
     *
     * Key differences from listing-plans:
     * - Uses grid-template-columns: repeat(N, 1fr) instead of CSS variables
     * - plansBg (not plansBackground), plansShadow (with position/inset)
     * - .ts-generic-tabs (not .ts-plan-tabs)
     * - .ts-btn-2/.ts-btn-1 WITHOUT .ts-plan-footer prefix
     * - .ts-plan-image img (not .ts-plan-image)
     * - bodyContentGap uses grid-gap
     * - generateBorderCSS format: border: Wpx type color
     * - listAlign uses align-items, listGap uses grid-gap on ul
     * - listTypography targets ul li (not ul li span)
     * - primaryBtnBgColor/primaryBtnTextColor attribute names
     * - primaryBtnIconPad uses grid-gap + padding-right: 0px
     * - listIconRightPad: padding-right for i, margin-right for svg
     * - Sticky positioning section
     *
     * @param array  $attributes Block attributes.
     * @param string $block_id   Unique block ID.
     * @return string Generated CSS.
     */
    public static function generate_membership_plans_css( $attributes, $block_id ) {
        $css_rules = [];
        $tablet_rules = [];
        $mobile_rules = [];
        $selector = ".voxel-fse-membership-plans-{$block_id}";

        // Helper: generate border CSS in "border: Wpx type color" format
        $generate_border = function( $border_type, $border_width, $border_color, $target_selector ) {
            if ( empty( $border_type ) || $border_type === 'none' || $border_type === '' ) {
                return null;
            }

            $width_value = '1px';
            if ( ! empty( $border_width ) && is_array( $border_width ) ) {
                $unit = $border_width['unit'] ?? 'px';
                $top = floatval( $border_width['top'] ?? 0 );
                $right = floatval( $border_width['right'] ?? 0 );
                $bottom = floatval( $border_width['bottom'] ?? 0 );
                $left = floatval( $border_width['left'] ?? 0 );

                if ( $top === $right && $right === $bottom && $bottom === $left ) {
                    $width_value = "{$top}{$unit}";
                } else {
                    $width_value = "{$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}";
                }
            }

            $color_value = ! empty( $border_color ) ? $border_color : '#000';
            return "{$target_selector} { border: {$width_value} {$border_type} {$color_value}; }";
        };

        // Helper: generate box shadow value (with position/inset support)
        $generate_shadow = function( $shadow ) {
            if ( empty( $shadow ) || ! is_array( $shadow ) ) {
                return null;
            }

            $h = $shadow['horizontal'] ?? 0;
            $v = $shadow['vertical'] ?? 0;
            $blur = $shadow['blur'] ?? 10;
            $spread = $shadow['spread'] ?? 0;
            $color = $shadow['color'] ?? 'rgba(0,0,0,0.5)';
            $position = ( isset( $shadow['position'] ) && $shadow['position'] === 'inset' ) ? 'inset ' : '';

            return "{$position}{$h}px {$v}px {$blur}px {$spread}px {$color}";
        };

        // Helper: parse dimensions to CSS shorthand
        $parse_dimensions = function( $dimensions ) {
            if ( empty( $dimensions ) || ! is_array( $dimensions ) ) {
                return null;
            }

            $unit = $dimensions['unit'] ?? 'px';
            $top = floatval( $dimensions['top'] ?? 0 );
            $right = floatval( $dimensions['right'] ?? 0 );
            $bottom = floatval( $dimensions['bottom'] ?? 0 );
            $left = floatval( $dimensions['left'] ?? 0 );

            if ( $top === 0.0 && $right === 0.0 && $bottom === 0.0 && $left === 0.0 ) {
                return null;
            }

            return "{$top}{$unit} {$right}{$unit} {$bottom}{$unit} {$left}{$unit}";
        };

        // ============================================
        // GENERAL TAB - Grid Layout
        // ============================================

        // Number of columns - uses grid-template-columns: repeat(N, 1fr)
        if ( isset( $attributes['plansColumns'] ) && $attributes['plansColumns'] !== '' ) {
            $css_rules[] = "{$selector} .ts-plans-list { grid-template-columns: repeat({$attributes['plansColumns']}, 1fr); }";
        }
        if ( isset( $attributes['plansColumns_tablet'] ) && $attributes['plansColumns_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-plans-list { grid-template-columns: repeat({$attributes['plansColumns_tablet']}, 1fr); }";
        }
        if ( isset( $attributes['plansColumns_mobile'] ) && $attributes['plansColumns_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-plans-list { grid-template-columns: repeat({$attributes['plansColumns_mobile']}, 1fr); }";
        }

        // Item gap - uses grid-gap
        if ( isset( $attributes['plansGap'] ) && $attributes['plansGap'] !== '' ) {
            $css_rules[] = "{$selector} .ts-plans-list { grid-gap: {$attributes['plansGap']}px; }";
        }
        if ( isset( $attributes['plansGap_tablet'] ) && $attributes['plansGap_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-plans-list { grid-gap: {$attributes['plansGap_tablet']}px; }";
        }
        if ( isset( $attributes['plansGap_mobile'] ) && $attributes['plansGap_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-plans-list { grid-gap: {$attributes['plansGap_mobile']}px; }";
        }

        // Border radius (responsive)
        if ( isset( $attributes['plansBorderRadius'] ) && $attributes['plansBorderRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-plan-container { border-radius: {$attributes['plansBorderRadius']}px; }";
        }
        if ( isset( $attributes['plansBorderRadius_tablet'] ) && $attributes['plansBorderRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-plan-container { border-radius: {$attributes['plansBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['plansBorderRadius_mobile'] ) && $attributes['plansBorderRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-plan-container { border-radius: {$attributes['plansBorderRadius_mobile']}px; }";
        }

        // Card border - uses generateBorderCSS format
        if ( ! empty( $attributes['plansBorderType'] ) ) {
            $border_css = $generate_border(
                $attributes['plansBorderType'],
                $attributes['plansBorderWidth'] ?? null,
                $attributes['plansBorderColor'] ?? null,
                "{$selector} .ts-plan-container"
            );
            if ( $border_css ) {
                $css_rules[] = $border_css;
            }
        }

        // Card background - uses plansBg
        if ( ! empty( $attributes['plansBg'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-container { background-color: {$attributes['plansBg']}; }";
        }

        // Card box shadow - uses plansShadow with generateBoxShadowValue
        if ( ! empty( $attributes['plansShadow'] ) ) {
            $shadow_val = $generate_shadow( $attributes['plansShadow'] );
            if ( $shadow_val ) {
                $css_rules[] = "{$selector} .ts-plan-container { box-shadow: {$shadow_val}; }";
            }
        }

        // ============================================
        // GENERAL TAB - Plan Body
        // ============================================

        // Body padding (responsive)
        if ( isset( $attributes['bodyPadding'] ) && $attributes['bodyPadding'] !== '' ) {
            $css_rules[] = "{$selector} .ts-plan-body { padding: {$attributes['bodyPadding']}px; }";
        }
        if ( isset( $attributes['bodyPadding_tablet'] ) && $attributes['bodyPadding_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-plan-body { padding: {$attributes['bodyPadding_tablet']}px; }";
        }
        if ( isset( $attributes['bodyPadding_mobile'] ) && $attributes['bodyPadding_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-plan-body { padding: {$attributes['bodyPadding_mobile']}px; }";
        }

        // Body content gap - uses grid-gap (not gap)
        if ( isset( $attributes['bodyContentGap'] ) && $attributes['bodyContentGap'] !== '' ) {
            $css_rules[] = "{$selector} .ts-plan-body { grid-gap: {$attributes['bodyContentGap']}px; }";
        }
        if ( isset( $attributes['bodyContentGap_tablet'] ) && $attributes['bodyContentGap_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-plan-body { grid-gap: {$attributes['bodyContentGap_tablet']}px; }";
        }
        if ( isset( $attributes['bodyContentGap_mobile'] ) && $attributes['bodyContentGap_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-plan-body { grid-gap: {$attributes['bodyContentGap_mobile']}px; }";
        }

        // ============================================
        // GENERAL TAB - Plan Image
        // Selector: .ts-plan-image img (NOT .ts-plan-image)
        // ============================================

        // Image padding (dimensions, responsive) - targets .ts-plan-image img
        if ( ! empty( $attributes['imagePadding'] ) ) {
            $dim = $parse_dimensions( $attributes['imagePadding'] );
            if ( $dim ) {
                $css_rules[] = "{$selector} .ts-plan-image img { padding: {$dim}; }";
            }
        }
        if ( ! empty( $attributes['imagePadding_tablet'] ) ) {
            $dim = $parse_dimensions( $attributes['imagePadding_tablet'] );
            if ( $dim ) {
                $tablet_rules[] = "{$selector} .ts-plan-image img { padding: {$dim}; }";
            }
        }
        if ( ! empty( $attributes['imagePadding_mobile'] ) ) {
            $dim = $parse_dimensions( $attributes['imagePadding_mobile'] );
            if ( $dim ) {
                $mobile_rules[] = "{$selector} .ts-plan-image img { padding: {$dim}; }";
            }
        }

        // Image height (responsive) - targets .ts-plan-image img
        if ( isset( $attributes['imageHeight'] ) && $attributes['imageHeight'] !== '' && floatval( $attributes['imageHeight'] ) > 0 ) {
            $css_rules[] = "{$selector} .ts-plan-image img { height: {$attributes['imageHeight']}px; }";
        }
        if ( isset( $attributes['imageHeight_tablet'] ) && $attributes['imageHeight_tablet'] !== '' && floatval( $attributes['imageHeight_tablet'] ) > 0 ) {
            $tablet_rules[] = "{$selector} .ts-plan-image img { height: {$attributes['imageHeight_tablet']}px; }";
        }
        if ( isset( $attributes['imageHeight_mobile'] ) && $attributes['imageHeight_mobile'] !== '' && floatval( $attributes['imageHeight_mobile'] ) > 0 ) {
            $mobile_rules[] = "{$selector} .ts-plan-image img { height: {$attributes['imageHeight_mobile']}px; }";
        }

        // ============================================
        // GENERAL TAB - Plan Pricing
        // Selector: .ts-plan-pricing .ts-price-amount (not .ts-plan-price)
        // ============================================

        // Pricing alignment
        if ( ! empty( $attributes['pricingAlign'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-pricing { justify-content: {$attributes['pricingAlign']}; }";
        }

        // Price typography
        if ( ! empty( $attributes['priceTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['priceTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-plan-pricing .ts-price-amount { {$typo}; }";
            }
        }

        // Price color
        if ( ! empty( $attributes['priceColor'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-pricing .ts-price-amount { color: {$attributes['priceColor']}; }";
        }

        // Period typography
        if ( ! empty( $attributes['periodTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['periodTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-plan-pricing .ts-price-period { {$typo}; }";
            }
        }

        // Period color
        if ( ! empty( $attributes['periodColor'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-pricing .ts-price-period { color: {$attributes['periodColor']}; }";
        }

        // ============================================
        // GENERAL TAB - Plan Name / Content
        // Selector: .ts-plan-details .ts-plan-name
        // ============================================

        // Content alignment
        if ( ! empty( $attributes['contentAlign'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-details { justify-content: {$attributes['contentAlign']}; }";
        }

        // Name typography
        if ( ! empty( $attributes['nameTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['nameTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-plan-details .ts-plan-name { {$typo}; }";
            }
        }

        // Name color
        if ( ! empty( $attributes['nameColor'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-details .ts-plan-name { color: {$attributes['nameColor']}; }";
        }

        // ============================================
        // GENERAL TAB - Plan Description
        // ============================================

        // Description alignment
        if ( ! empty( $attributes['descAlign'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-desc p { text-align: {$attributes['descAlign']}; }";
        }

        // Description typography
        if ( ! empty( $attributes['descTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['descTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-plan-desc p { {$typo}; }";
            }
        }

        // Description color
        if ( ! empty( $attributes['descColor'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-desc p { color: {$attributes['descColor']}; }";
        }

        // ============================================
        // GENERAL TAB - Plan Features
        // listAlign uses align-items (not justify-content)
        // listGap uses grid-gap on .ts-plan-features ul (not margin-bottom on li)
        // listTypography targets .ts-plan-features ul li (not ul li span)
        // listIconRightPad: padding-right for i, margin-right for svg
        // ============================================

        // List alignment - uses align-items
        if ( ! empty( $attributes['listAlign'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-features ul { align-items: {$attributes['listAlign']}; }";
        }

        // List typography - targets .ts-plan-features ul li
        if ( ! empty( $attributes['listTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['listTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-plan-features ul li { {$typo}; }";
            }
        }

        // List text color - targets .ts-plan-features ul li
        if ( ! empty( $attributes['listColor'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-features ul li { color: {$attributes['listColor']}; }";
        }

        // List icon color
        if ( ! empty( $attributes['listIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-plan-features ul li i { color: {$attributes['listIconColor']}; }";
            $css_rules[] = "{$selector} .ts-plan-features ul li svg { fill: {$attributes['listIconColor']}; }";
        }

        // List gap - uses grid-gap on .ts-plan-features ul
        if ( isset( $attributes['listGap'] ) && $attributes['listGap'] !== '' ) {
            $css_rules[] = "{$selector} .ts-plan-features ul { grid-gap: {$attributes['listGap']}px; }";
        }
        if ( isset( $attributes['listGap_tablet'] ) && $attributes['listGap_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-plan-features ul { grid-gap: {$attributes['listGap_tablet']}px; }";
        }
        if ( isset( $attributes['listGap_mobile'] ) && $attributes['listGap_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-plan-features ul { grid-gap: {$attributes['listGap_mobile']}px; }";
        }

        // List icon size (responsive)
        if ( isset( $attributes['listIconSize'] ) && $attributes['listIconSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-plan-features ul li i { font-size: {$attributes['listIconSize']}px; }";
            $css_rules[] = "{$selector} .ts-plan-features ul li svg { width: {$attributes['listIconSize']}px; height: {$attributes['listIconSize']}px; }";
        }
        if ( isset( $attributes['listIconSize_tablet'] ) && $attributes['listIconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-plan-features ul li i { font-size: {$attributes['listIconSize_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-plan-features ul li svg { width: {$attributes['listIconSize_tablet']}px; height: {$attributes['listIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['listIconSize_mobile'] ) && $attributes['listIconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-plan-features ul li i { font-size: {$attributes['listIconSize_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-plan-features ul li svg { width: {$attributes['listIconSize_mobile']}px; height: {$attributes['listIconSize_mobile']}px; }";
        }

        // List icon right padding - padding-right for i, margin-right for svg
        if ( isset( $attributes['listIconRightPad'] ) && $attributes['listIconRightPad'] !== '' ) {
            $css_rules[] = "{$selector} .ts-plan-features ul li i { padding-right: {$attributes['listIconRightPad']}px; }";
            $css_rules[] = "{$selector} .ts-plan-features ul li svg { margin-right: {$attributes['listIconRightPad']}px; }";
        }
        if ( isset( $attributes['listIconRightPad_tablet'] ) && $attributes['listIconRightPad_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-plan-features ul li i { padding-right: {$attributes['listIconRightPad_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-plan-features ul li svg { margin-right: {$attributes['listIconRightPad_tablet']}px; }";
        }
        if ( isset( $attributes['listIconRightPad_mobile'] ) && $attributes['listIconRightPad_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-plan-features ul li i { padding-right: {$attributes['listIconRightPad_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-plan-features ul li svg { margin-right: {$attributes['listIconRightPad_mobile']}px; }";
        }

        // ============================================
        // TABS ACCORDION - Normal State
        // Selector: .ts-generic-tabs (NOT .ts-plan-tabs)
        // Margin targets li (not the tab container)
        // ============================================

        // Tabs justify
        if ( ! empty( $attributes['tabsJustify'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs { justify-content: {$attributes['tabsJustify']}; }";
        }

        // Tabs padding (dimensions, responsive) - targets .ts-generic-tabs li a
        if ( ! empty( $attributes['tabsPadding'] ) ) {
            $dim = $parse_dimensions( $attributes['tabsPadding'] );
            if ( $dim ) {
                $css_rules[] = "{$selector} .ts-generic-tabs li a { padding: {$dim}; }";
            }
        }
        if ( ! empty( $attributes['tabsPadding_tablet'] ) ) {
            $dim = $parse_dimensions( $attributes['tabsPadding_tablet'] );
            if ( $dim ) {
                $tablet_rules[] = "{$selector} .ts-generic-tabs li a { padding: {$dim}; }";
            }
        }
        if ( ! empty( $attributes['tabsPadding_mobile'] ) ) {
            $dim = $parse_dimensions( $attributes['tabsPadding_mobile'] );
            if ( $dim ) {
                $mobile_rules[] = "{$selector} .ts-generic-tabs li a { padding: {$dim}; }";
            }
        }

        // Tabs margin (dimensions, responsive) - targets .ts-generic-tabs li
        if ( ! empty( $attributes['tabsMargin'] ) ) {
            $dim = $parse_dimensions( $attributes['tabsMargin'] );
            if ( $dim ) {
                $css_rules[] = "{$selector} .ts-generic-tabs li { margin: {$dim}; }";
            }
        }
        if ( ! empty( $attributes['tabsMargin_tablet'] ) ) {
            $dim = $parse_dimensions( $attributes['tabsMargin_tablet'] );
            if ( $dim ) {
                $tablet_rules[] = "{$selector} .ts-generic-tabs li { margin: {$dim}; }";
            }
        }
        if ( ! empty( $attributes['tabsMargin_mobile'] ) ) {
            $dim = $parse_dimensions( $attributes['tabsMargin_mobile'] );
            if ( $dim ) {
                $mobile_rules[] = "{$selector} .ts-generic-tabs li { margin: {$dim}; }";
            }
        }

        // Tab typography
        if ( ! empty( $attributes['tabTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['tabTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-generic-tabs li a { {$typo}; }";
            }
        }

        // Tab active typography
        if ( ! empty( $attributes['tabActiveTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['tabActiveTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-generic-tabs li.ts-tab-active a { {$typo}; }";
            }
        }

        // Tab text color
        if ( ! empty( $attributes['tabTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li a { color: {$attributes['tabTextColor']}; }";
        }

        // Active tab text color
        if ( ! empty( $attributes['tabActiveTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li.ts-tab-active a { color: {$attributes['tabActiveTextColor']}; }";
        }

        // Tab background
        if ( ! empty( $attributes['tabBackground'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li a { background-color: {$attributes['tabBackground']}; }";
        }

        // Active tab background
        if ( ! empty( $attributes['tabActiveBackground'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li.ts-tab-active a { background-color: {$attributes['tabActiveBackground']}; }";
        }

        // Tab border - uses generateBorderCSS format
        if ( ! empty( $attributes['tabBorderType'] ) ) {
            $border_css = $generate_border(
                $attributes['tabBorderType'],
                $attributes['tabBorderWidth'] ?? null,
                $attributes['tabBorderColor'] ?? null,
                "{$selector} .ts-generic-tabs li a"
            );
            if ( $border_css ) {
                $css_rules[] = $border_css;
            }
        }

        // Active tab border color
        if ( ! empty( $attributes['tabActiveBorderColor'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li.ts-tab-active a { border-color: {$attributes['tabActiveBorderColor']}; }";
        }

        // Tab border radius (responsive)
        if ( isset( $attributes['tabsBorderRadius'] ) && $attributes['tabsBorderRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li a { border-radius: {$attributes['tabsBorderRadius']}px; }";
        }
        if ( isset( $attributes['tabsBorderRadius_tablet'] ) && $attributes['tabsBorderRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-generic-tabs li a { border-radius: {$attributes['tabsBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['tabsBorderRadius_mobile'] ) && $attributes['tabsBorderRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-generic-tabs li a { border-radius: {$attributes['tabsBorderRadius_mobile']}px; }";
        }

        // ============================================
        // TABS ACCORDION - Hover State
        // ============================================

        // Tab text color hover
        if ( ! empty( $attributes['tabTextColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li a:hover { color: {$attributes['tabTextColorHover']}; }";
        }

        // Active tab text color hover
        if ( ! empty( $attributes['tabActiveTextColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li.ts-tab-active a:hover { color: {$attributes['tabActiveTextColorHover']}; }";
        }

        // Tab border color hover
        if ( ! empty( $attributes['tabBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li a:hover { border-color: {$attributes['tabBorderColorHover']}; }";
        }

        // Active tab border color hover
        if ( ! empty( $attributes['tabActiveBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li.ts-tab-active a:hover { border-color: {$attributes['tabActiveBorderColorHover']}; }";
        }

        // Tab background hover
        if ( ! empty( $attributes['tabBackgroundHover'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li a:hover { background-color: {$attributes['tabBackgroundHover']}; }";
        }

        // Active tab background hover
        if ( ! empty( $attributes['tabActiveBackgroundHover'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li.ts-tab-active a:hover { background-color: {$attributes['tabActiveBackgroundHover']}; }";
        }

        // ============================================
        // PRIMARY BUTTON ACCORDION - Normal State
        // Selector: .ts-btn-2 (WITHOUT .ts-plan-footer prefix)
        // Uses primaryBtnBgColor/primaryBtnTextColor attribute names
        // Icon padding uses grid-gap + padding-right: 0px
        // ============================================

        // Primary button typography
        if ( ! empty( $attributes['primaryBtnTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['primaryBtnTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-btn-2 { {$typo}; }";
            }
        }

        // Primary button border radius (responsive)
        if ( isset( $attributes['primaryBtnRadius'] ) && $attributes['primaryBtnRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-btn-2 { border-radius: {$attributes['primaryBtnRadius']}px; }";
        }
        if ( isset( $attributes['primaryBtnRadius_tablet'] ) && $attributes['primaryBtnRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-btn-2 { border-radius: {$attributes['primaryBtnRadius_tablet']}px; }";
        }
        if ( isset( $attributes['primaryBtnRadius_mobile'] ) && $attributes['primaryBtnRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-btn-2 { border-radius: {$attributes['primaryBtnRadius_mobile']}px; }";
        }

        // Primary button text color - uses primaryBtnTextColor
        if ( ! empty( $attributes['primaryBtnTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-2 { color: {$attributes['primaryBtnTextColor']}; }";
        }

        // Primary button padding (dimensions, responsive)
        if ( ! empty( $attributes['primaryBtnPadding'] ) ) {
            $dim = $parse_dimensions( $attributes['primaryBtnPadding'] );
            if ( $dim ) {
                $css_rules[] = "{$selector} .ts-btn-2 { padding: {$dim}; }";
            }
        }
        if ( ! empty( $attributes['primaryBtnPadding_tablet'] ) ) {
            $dim = $parse_dimensions( $attributes['primaryBtnPadding_tablet'] );
            if ( $dim ) {
                $tablet_rules[] = "{$selector} .ts-btn-2 { padding: {$dim}; }";
            }
        }
        if ( ! empty( $attributes['primaryBtnPadding_mobile'] ) ) {
            $dim = $parse_dimensions( $attributes['primaryBtnPadding_mobile'] );
            if ( $dim ) {
                $mobile_rules[] = "{$selector} .ts-btn-2 { padding: {$dim}; }";
            }
        }

        // Primary button height (responsive)
        if ( isset( $attributes['primaryBtnHeight'] ) && $attributes['primaryBtnHeight'] !== '' && floatval( $attributes['primaryBtnHeight'] ) > 0 ) {
            $css_rules[] = "{$selector} .ts-btn-2 { height: {$attributes['primaryBtnHeight']}px; }";
        }
        if ( isset( $attributes['primaryBtnHeight_tablet'] ) && $attributes['primaryBtnHeight_tablet'] !== '' && floatval( $attributes['primaryBtnHeight_tablet'] ) > 0 ) {
            $tablet_rules[] = "{$selector} .ts-btn-2 { height: {$attributes['primaryBtnHeight_tablet']}px; }";
        }
        if ( isset( $attributes['primaryBtnHeight_mobile'] ) && $attributes['primaryBtnHeight_mobile'] !== '' && floatval( $attributes['primaryBtnHeight_mobile'] ) > 0 ) {
            $mobile_rules[] = "{$selector} .ts-btn-2 { height: {$attributes['primaryBtnHeight_mobile']}px; }";
        }

        // Primary button background - uses primaryBtnBgColor and 'background' property
        if ( ! empty( $attributes['primaryBtnBgColor'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-2 { background: {$attributes['primaryBtnBgColor']}; }";
        }

        // Primary button border - uses generateBorderCSS format
        if ( ! empty( $attributes['primaryBtnBorderType'] ) ) {
            $border_css = $generate_border(
                $attributes['primaryBtnBorderType'],
                $attributes['primaryBtnBorderWidth'] ?? null,
                $attributes['primaryBtnBorderColor'] ?? null,
                "{$selector} .ts-btn-2"
            );
            if ( $border_css ) {
                $css_rules[] = $border_css;
            }
        }

        // Primary button icon size (responsive)
        if ( isset( $attributes['primaryBtnIconSize'] ) && $attributes['primaryBtnIconSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-btn-2 i { font-size: {$attributes['primaryBtnIconSize']}px; }";
            $css_rules[] = "{$selector} .ts-btn-2 svg { width: {$attributes['primaryBtnIconSize']}px; height: {$attributes['primaryBtnIconSize']}px; }";
        }
        if ( isset( $attributes['primaryBtnIconSize_tablet'] ) && $attributes['primaryBtnIconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-btn-2 i { font-size: {$attributes['primaryBtnIconSize_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-btn-2 svg { width: {$attributes['primaryBtnIconSize_tablet']}px; height: {$attributes['primaryBtnIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['primaryBtnIconSize_mobile'] ) && $attributes['primaryBtnIconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-btn-2 i { font-size: {$attributes['primaryBtnIconSize_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-btn-2 svg { width: {$attributes['primaryBtnIconSize_mobile']}px; height: {$attributes['primaryBtnIconSize_mobile']}px; }";
        }

        // Primary button icon padding - uses grid-gap + padding-right: 0px
        if ( isset( $attributes['primaryBtnIconPad'] ) && $attributes['primaryBtnIconPad'] !== '' ) {
            $css_rules[] = "{$selector} .ts-btn-2 { grid-gap: {$attributes['primaryBtnIconPad']}px; padding-right: 0px; }";
        }
        if ( isset( $attributes['primaryBtnIconPad_tablet'] ) && $attributes['primaryBtnIconPad_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-btn-2 { grid-gap: {$attributes['primaryBtnIconPad_tablet']}px; padding-right: 0px; }";
        }
        if ( isset( $attributes['primaryBtnIconPad_mobile'] ) && $attributes['primaryBtnIconPad_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-btn-2 { grid-gap: {$attributes['primaryBtnIconPad_mobile']}px; padding-right: 0px; }";
        }

        // Primary button icon color
        if ( ! empty( $attributes['primaryBtnIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-2 i { color: {$attributes['primaryBtnIconColor']}; }";
            $css_rules[] = "{$selector} .ts-btn-2 svg { fill: {$attributes['primaryBtnIconColor']}; }";
        }

        // ============================================
        // PRIMARY BUTTON ACCORDION - Hover State
        // ============================================

        // Primary button text color hover
        if ( ! empty( $attributes['primaryBtnTextColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-2:hover { color: {$attributes['primaryBtnTextColorHover']}; }";
        }

        // Primary button background hover
        if ( ! empty( $attributes['primaryBtnBgColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-2:hover { background: {$attributes['primaryBtnBgColorHover']}; }";
        }

        // Primary button border color hover
        if ( ! empty( $attributes['primaryBtnBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-2:hover { border-color: {$attributes['primaryBtnBorderColorHover']}; }";
        }

        // Primary button icon color hover
        if ( ! empty( $attributes['primaryBtnIconColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-2:hover i { color: {$attributes['primaryBtnIconColorHover']}; }";
            $css_rules[] = "{$selector} .ts-btn-2:hover svg { fill: {$attributes['primaryBtnIconColorHover']}; }";
        }

        // ============================================
        // SECONDARY BUTTON ACCORDION - Normal State
        // Selector: .ts-btn-1 (WITHOUT .ts-plan-footer prefix)
        // Same pattern differences as primary
        // ============================================

        // Secondary button typography
        if ( ! empty( $attributes['secondaryBtnTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['secondaryBtnTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-btn-1 { {$typo}; }";
            }
        }

        // Secondary button border radius (responsive)
        if ( isset( $attributes['secondaryBtnRadius'] ) && $attributes['secondaryBtnRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-btn-1 { border-radius: {$attributes['secondaryBtnRadius']}px; }";
        }
        if ( isset( $attributes['secondaryBtnRadius_tablet'] ) && $attributes['secondaryBtnRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-btn-1 { border-radius: {$attributes['secondaryBtnRadius_tablet']}px; }";
        }
        if ( isset( $attributes['secondaryBtnRadius_mobile'] ) && $attributes['secondaryBtnRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-btn-1 { border-radius: {$attributes['secondaryBtnRadius_mobile']}px; }";
        }

        // Secondary button text color - uses secondaryBtnTextColor
        if ( ! empty( $attributes['secondaryBtnTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-1 { color: {$attributes['secondaryBtnTextColor']}; }";
        }

        // Secondary button padding (dimensions, responsive)
        if ( ! empty( $attributes['secondaryBtnPadding'] ) ) {
            $dim = $parse_dimensions( $attributes['secondaryBtnPadding'] );
            if ( $dim ) {
                $css_rules[] = "{$selector} .ts-btn-1 { padding: {$dim}; }";
            }
        }
        if ( ! empty( $attributes['secondaryBtnPadding_tablet'] ) ) {
            $dim = $parse_dimensions( $attributes['secondaryBtnPadding_tablet'] );
            if ( $dim ) {
                $tablet_rules[] = "{$selector} .ts-btn-1 { padding: {$dim}; }";
            }
        }
        if ( ! empty( $attributes['secondaryBtnPadding_mobile'] ) ) {
            $dim = $parse_dimensions( $attributes['secondaryBtnPadding_mobile'] );
            if ( $dim ) {
                $mobile_rules[] = "{$selector} .ts-btn-1 { padding: {$dim}; }";
            }
        }

        // Secondary button height (responsive)
        if ( isset( $attributes['secondaryBtnHeight'] ) && $attributes['secondaryBtnHeight'] !== '' && floatval( $attributes['secondaryBtnHeight'] ) > 0 ) {
            $css_rules[] = "{$selector} .ts-btn-1 { height: {$attributes['secondaryBtnHeight']}px; }";
        }
        if ( isset( $attributes['secondaryBtnHeight_tablet'] ) && $attributes['secondaryBtnHeight_tablet'] !== '' && floatval( $attributes['secondaryBtnHeight_tablet'] ) > 0 ) {
            $tablet_rules[] = "{$selector} .ts-btn-1 { height: {$attributes['secondaryBtnHeight_tablet']}px; }";
        }
        if ( isset( $attributes['secondaryBtnHeight_mobile'] ) && $attributes['secondaryBtnHeight_mobile'] !== '' && floatval( $attributes['secondaryBtnHeight_mobile'] ) > 0 ) {
            $mobile_rules[] = "{$selector} .ts-btn-1 { height: {$attributes['secondaryBtnHeight_mobile']}px; }";
        }

        // Secondary button background - uses secondaryBtnBgColor and 'background' property
        if ( ! empty( $attributes['secondaryBtnBgColor'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-1 { background: {$attributes['secondaryBtnBgColor']}; }";
        }

        // Secondary button border - uses generateBorderCSS format
        if ( ! empty( $attributes['secondaryBtnBorderType'] ) ) {
            $border_css = $generate_border(
                $attributes['secondaryBtnBorderType'],
                $attributes['secondaryBtnBorderWidth'] ?? null,
                $attributes['secondaryBtnBorderColor'] ?? null,
                "{$selector} .ts-btn-1"
            );
            if ( $border_css ) {
                $css_rules[] = $border_css;
            }
        }

        // Secondary button icon size (responsive)
        if ( isset( $attributes['secondaryBtnIconSize'] ) && $attributes['secondaryBtnIconSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-btn-1 i { font-size: {$attributes['secondaryBtnIconSize']}px; }";
            $css_rules[] = "{$selector} .ts-btn-1 svg { width: {$attributes['secondaryBtnIconSize']}px; height: {$attributes['secondaryBtnIconSize']}px; }";
        }
        if ( isset( $attributes['secondaryBtnIconSize_tablet'] ) && $attributes['secondaryBtnIconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-btn-1 i { font-size: {$attributes['secondaryBtnIconSize_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-btn-1 svg { width: {$attributes['secondaryBtnIconSize_tablet']}px; height: {$attributes['secondaryBtnIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['secondaryBtnIconSize_mobile'] ) && $attributes['secondaryBtnIconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-btn-1 i { font-size: {$attributes['secondaryBtnIconSize_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-btn-1 svg { width: {$attributes['secondaryBtnIconSize_mobile']}px; height: {$attributes['secondaryBtnIconSize_mobile']}px; }";
        }

        // Secondary button icon padding - uses grid-gap + padding-right: 0px
        if ( isset( $attributes['secondaryBtnIconPad'] ) && $attributes['secondaryBtnIconPad'] !== '' ) {
            $css_rules[] = "{$selector} .ts-btn-1 { grid-gap: {$attributes['secondaryBtnIconPad']}px; padding-right: 0px; }";
        }
        if ( isset( $attributes['secondaryBtnIconPad_tablet'] ) && $attributes['secondaryBtnIconPad_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-btn-1 { grid-gap: {$attributes['secondaryBtnIconPad_tablet']}px; padding-right: 0px; }";
        }
        if ( isset( $attributes['secondaryBtnIconPad_mobile'] ) && $attributes['secondaryBtnIconPad_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-btn-1 { grid-gap: {$attributes['secondaryBtnIconPad_mobile']}px; padding-right: 0px; }";
        }

        // Secondary button icon color
        if ( ! empty( $attributes['secondaryBtnIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-1 i { color: {$attributes['secondaryBtnIconColor']}; }";
            $css_rules[] = "{$selector} .ts-btn-1 svg { fill: {$attributes['secondaryBtnIconColor']}; }";
        }

        // ============================================
        // SECONDARY BUTTON ACCORDION - Hover State
        // ============================================

        // Secondary button text color hover
        if ( ! empty( $attributes['secondaryBtnTextColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-1:hover { color: {$attributes['secondaryBtnTextColorHover']}; }";
        }

        // Secondary button background hover
        if ( ! empty( $attributes['secondaryBtnBgColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-1:hover { background: {$attributes['secondaryBtnBgColorHover']}; }";
        }

        // Secondary button border color hover
        if ( ! empty( $attributes['secondaryBtnBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-1:hover { border-color: {$attributes['secondaryBtnBorderColorHover']}; }";
        }

        // Secondary button icon color hover
        if ( ! empty( $attributes['secondaryBtnIconColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-btn-1:hover i { color: {$attributes['secondaryBtnIconColorHover']}; }";
            $css_rules[] = "{$selector} .ts-btn-1:hover svg { fill: {$attributes['secondaryBtnIconColorHover']}; }";
        }

        // ============================================
        // STICKY POSITIONING
        // ============================================
        if ( ! empty( $attributes['stickyEnabled'] ) ) {
            // Desktop
            $sticky_desktop = $attributes['stickyDesktop'] ?? 'sticky';
            if ( $sticky_desktop === 'sticky' ) {
                $css_rules[] = "{$selector} { position: sticky; z-index: 100; }";
                if ( isset( $attributes['stickyTop'] ) ) {
                    $unit = $attributes['stickyTopUnit'] ?? 'px';
                    $css_rules[] = "{$selector} { top: {$attributes['stickyTop']}{$unit}; }";
                }
                if ( isset( $attributes['stickyRight'] ) ) {
                    $unit = $attributes['stickyTopUnit'] ?? 'px';
                    $css_rules[] = "{$selector} { right: {$attributes['stickyRight']}{$unit}; }";
                }
                if ( isset( $attributes['stickyBottom'] ) ) {
                    $unit = $attributes['stickyTopUnit'] ?? 'px';
                    $css_rules[] = "{$selector} { bottom: {$attributes['stickyBottom']}{$unit}; }";
                }
                if ( isset( $attributes['stickyLeft'] ) ) {
                    $unit = $attributes['stickyTopUnit'] ?? 'px';
                    $css_rules[] = "{$selector} { left: {$attributes['stickyLeft']}{$unit}; }";
                }
            } else {
                $css_rules[] = "{$selector} { position: initial; }";
            }

            // Tablet
            $sticky_tablet = $attributes['stickyTablet'] ?? 'sticky';
            if ( $sticky_tablet === 'sticky' ) {
                $tablet_rules[] = "{$selector} { position: sticky; z-index: 100; }";
                $unit = $attributes['stickyTopUnit'] ?? 'px';
                $top = $attributes['stickyTop_tablet'] ?? $attributes['stickyTop'] ?? null;
                $right_val = $attributes['stickyRight_tablet'] ?? $attributes['stickyRight'] ?? null;
                $bottom = $attributes['stickyBottom_tablet'] ?? $attributes['stickyBottom'] ?? null;
                $left_val = $attributes['stickyLeft_tablet'] ?? $attributes['stickyLeft'] ?? null;
                if ( $top !== null ) {
                    $tablet_rules[] = "{$selector} { top: {$top}{$unit}; }";
                }
                if ( $right_val !== null ) {
                    $tablet_rules[] = "{$selector} { right: {$right_val}{$unit}; }";
                }
                if ( $bottom !== null ) {
                    $tablet_rules[] = "{$selector} { bottom: {$bottom}{$unit}; }";
                }
                if ( $left_val !== null ) {
                    $tablet_rules[] = "{$selector} { left: {$left_val}{$unit}; }";
                }
            } else {
                $tablet_rules[] = "{$selector} { position: initial; }";
            }

            // Mobile
            $sticky_mobile = $attributes['stickyMobile'] ?? 'sticky';
            if ( $sticky_mobile === 'sticky' ) {
                $mobile_rules[] = "{$selector} { position: sticky; z-index: 100; }";
                $unit = $attributes['stickyTopUnit'] ?? 'px';
                $top = $attributes['stickyTop_mobile'] ?? $attributes['stickyTop'] ?? null;
                $right_val = $attributes['stickyRight_mobile'] ?? $attributes['stickyRight'] ?? null;
                $bottom = $attributes['stickyBottom_mobile'] ?? $attributes['stickyBottom'] ?? null;
                $left_val = $attributes['stickyLeft_mobile'] ?? $attributes['stickyLeft'] ?? null;
                if ( $top !== null ) {
                    $mobile_rules[] = "{$selector} { top: {$top}{$unit}; }";
                }
                if ( $right_val !== null ) {
                    $mobile_rules[] = "{$selector} { right: {$right_val}{$unit}; }";
                }
                if ( $bottom !== null ) {
                    $mobile_rules[] = "{$selector} { bottom: {$bottom}{$unit}; }";
                }
                if ( $left_val !== null ) {
                    $mobile_rules[] = "{$selector} { left: {$left_val}{$unit}; }";
                }
            } else {
                $mobile_rules[] = "{$selector} { position: initial; }";
            }
        }

        // ============================================
        // Combine CSS with media queries
        // ============================================
        $final_css = '';
        if ( ! empty( $css_rules ) ) {
            $final_css .= implode( "\n", $css_rules );
        }
        if ( ! empty( $tablet_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::TABLET_BREAKPOINT . "px) {\n" . implode( "\n", $tablet_rules ) . "\n}";
        }
        if ( ! empty( $mobile_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::MOBILE_BREAKPOINT . "px) {\n" . implode( "\n", $mobile_rules ) . "\n}";
        }

        return $final_css;
    }

    /**
     * Generate CSS for Flex Container Block
     *
     * Translates both generateResponsiveCSS() (outer container) and
     * generateInnerResponsiveCSS() (inner .e-con-inner) from styles.ts into
     * a single PHP method that outputs scoped, responsive CSS.
     *
     * Evidence: flex-container/styles.ts
     *
     * Outer container (.voxel-fse-flex-container-{id}):
     *   - position (relative / sticky), min-height, overflow, z-index
     *   - calc min/max height, scrollbar, backdrop blur
     *   - transforms (normal + hover), box-shadow, transition
     *
     * Inner container (.voxel-fse-flex-container-{id} > .e-con-inner):
     *   - display flex/grid, content width (boxed/full/custom)
     *   - flex props (direction, justify, align, wrap, alignContent)
     *   - grid props (template columns/rows, auto-flow)
     *   - column/row gap, inline-flex
     *
     * @param array  $attributes Block attributes from Gutenberg.
     * @param string $block_id   Unique block ID for scoped selector.
     * @return string Generated CSS.
     */
    public static function generate_flex_container_css( $attributes, $block_id ) {
        if ( empty( $block_id ) ) {
            return '';
        }

        $css_rules    = [];
        $tablet_rules = [];
        $mobile_rules = [];

        $selector = '.voxel-fse-flex-container-' . $block_id;
        $inner    = $selector . ' > .e-con-inner';

        $is_grid = ( ! empty( $attributes['containerLayout'] ) && $attributes['containerLayout'] === 'grid' );

        // ============================================
        // OUTER CONTAINER - Desktop
        // Evidence: styles.ts generateResponsiveCSS() lines 577-810
        // ============================================

        $desktop_outer = [
            'width: 100%',
            'flex: 1 1 0%',
            'min-width: 0',
        ];

        // Sticky vs relative position
        $is_sticky_desktop = ! empty( $attributes['stickyEnabled'] )
            && ( $attributes['stickyDesktop'] ?? 'sticky' ) === 'sticky';

        if ( $is_sticky_desktop ) {
            $desktop_outer[] = 'position: sticky';
            $desktop_outer[] = 'align-self: flex-start';
            if ( isset( $attributes['stickyTop'] ) && $attributes['stickyTop'] !== '' ) {
                $unit = $attributes['stickyTopUnit'] ?? 'px';
                $desktop_outer[] = "top: {$attributes['stickyTop']}{$unit}";
            }
            if ( isset( $attributes['stickyLeft'] ) && $attributes['stickyLeft'] !== '' ) {
                $unit = $attributes['stickyLeftUnit'] ?? 'px';
                $desktop_outer[] = "left: {$attributes['stickyLeft']}{$unit}";
            }
            if ( isset( $attributes['stickyRight'] ) && $attributes['stickyRight'] !== '' ) {
                $unit = $attributes['stickyRightUnit'] ?? 'px';
                $desktop_outer[] = "right: {$attributes['stickyRight']}{$unit}";
            }
            if ( isset( $attributes['stickyBottom'] ) && $attributes['stickyBottom'] !== '' ) {
                $unit = $attributes['stickyBottomUnit'] ?? 'px';
                $desktop_outer[] = "bottom: {$attributes['stickyBottom']}{$unit}";
            }
        } else {
            $desktop_outer[] = 'position: relative';
        }

        // Min Height
        if ( ( $attributes['minHeightUnit'] ?? '' ) === 'custom' && ! empty( $attributes['minHeightCustom'] ) ) {
            $desktop_outer[] = "min-height: {$attributes['minHeightCustom']}";
        } elseif ( ! empty( $attributes['minHeight'] ) ) {
            $unit = $attributes['minHeightUnit'] ?? 'px';
            $desktop_outer[] = "min-height: {$attributes['minHeight']}{$unit}";
        }

        // Overflow
        if ( ! empty( $attributes['overflow'] ) && $attributes['overflow'] !== 'visible' ) {
            $desktop_outer[] = "overflow: {$attributes['overflow']}";
        }

        // Z-Index
        if ( isset( $attributes['zIndex'] ) && $attributes['zIndex'] !== '' ) {
            $desktop_outer[] = "z-index: {$attributes['zIndex']}";
        }

        // Calc min height
        if ( ! empty( $attributes['enableCalcMinHeight'] ) && ! empty( $attributes['calcMinHeight'] ) ) {
            $desktop_outer[] = "min-height: {$attributes['calcMinHeight']}";
        }

        // Calc max height with scrollbar
        if ( ! empty( $attributes['enableCalcMaxHeight'] ) && ! empty( $attributes['calcMaxHeight'] ) ) {
            $desktop_outer[] = "max-height: {$attributes['calcMaxHeight']}";
            $desktop_outer[] = 'overflow-y: overlay';
            $desktop_outer[] = 'overflow-x: hidden';
            if ( ! empty( $attributes['scrollbarColor'] ) ) {
                $desktop_outer[] = "--ts-scroll-color: {$attributes['scrollbarColor']}";
            }
        }

        // Backdrop blur
        if ( ! empty( $attributes['enableBackdropBlur'] ) && isset( $attributes['backdropBlurStrength'] ) && $attributes['backdropBlurStrength'] !== '' ) {
            $desktop_outer[] = "backdrop-filter: blur({$attributes['backdropBlurStrength']}px)";
            $desktop_outer[] = "-webkit-backdrop-filter: blur({$attributes['backdropBlurStrength']}px)";
        }

        // Transform CSS - Desktop Normal
        $transform_desktop = self::build_transform_css( $attributes, '', false );
        if ( ! empty( $transform_desktop['transform'] ) ) {
            $desktop_outer[] = "transform: {$transform_desktop['transform']}";
        }
        if ( ! empty( $transform_desktop['transformOrigin'] ) && $transform_desktop['transformOrigin'] !== '50% 50%' ) {
            $desktop_outer[] = "transform-origin: {$transform_desktop['transformOrigin']}";
        }
        if ( ! empty( $transform_desktop['perspective'] ) ) {
            $desktop_outer[] = "perspective: {$transform_desktop['perspective']}";
        }

        // Transform transition duration
        if ( isset( $attributes['transformTransitionDuration'] ) && $attributes['transformTransitionDuration'] !== '' ) {
            $desktop_outer[] = "transition: transform {$attributes['transformTransitionDuration']}ms ease";
        }

        // Box Shadow
        if ( ! empty( $attributes['boxShadow'] ) ) {
            $box_shadow = self::generate_box_shadow_css( $attributes['boxShadow'] );
            if ( $box_shadow ) {
                $desktop_outer[] = "box-shadow: {$box_shadow}";
            }
        }

        // Border - Normal state
        if ( ! empty( $attributes['borderType'] ) && $attributes['borderType'] !== 'none' ) {
            $desktop_outer[] = "border-style: {$attributes['borderType']}";
            if ( ! empty( $attributes['borderWidth'] ) ) {
                $border_width = self::generate_dimensions_css( $attributes['borderWidth'], 'border-width' );
                if ( $border_width ) {
                    $desktop_outer[] = $border_width;
                }
            }
            if ( ! empty( $attributes['borderColor'] ) ) {
                $desktop_outer[] = "border-color: {$attributes['borderColor']}";
            }
        }

        // Border Radius - Normal (always applies, even without border)
        if ( ! empty( $attributes['borderRadiusDimensions'] ) ) {
            $border_radius = self::generate_dimensions_css( $attributes['borderRadiusDimensions'], 'border-radius' );
            if ( $border_radius ) {
                $desktop_outer[] = $border_radius;
            }
        }

        $css_rules[] = "{$selector} { " . implode( '; ', $desktop_outer ) . "; }";

        // Desktop Hover state
        $hover_styles = [];

        // Transform hover
        $transform_desktop_hover = self::build_transform_css( $attributes, '', true );
        if ( ! empty( $transform_desktop_hover['transform'] ) ) {
            $hover_styles[] = "transform: {$transform_desktop_hover['transform']}";
            if ( ! empty( $transform_desktop_hover['transformOrigin'] ) && $transform_desktop_hover['transformOrigin'] !== '50% 50%' ) {
                $hover_styles[] = "transform-origin: {$transform_desktop_hover['transformOrigin']}";
            }
            if ( ! empty( $transform_desktop_hover['perspective'] ) ) {
                $hover_styles[] = "perspective: {$transform_desktop_hover['perspective']}";
            }
        }

        // Border hover
        if ( ! empty( $attributes['borderTypeHover'] ) && $attributes['borderTypeHover'] !== 'none' ) {
            $hover_styles[] = "border-style: {$attributes['borderTypeHover']}";
            if ( ! empty( $attributes['borderWidthHover'] ) ) {
                $border_width_hover = self::generate_dimensions_css( $attributes['borderWidthHover'], 'border-width' );
                if ( $border_width_hover ) {
                    $hover_styles[] = $border_width_hover;
                }
            }
            if ( ! empty( $attributes['borderColorHover'] ) ) {
                $hover_styles[] = "border-color: {$attributes['borderColorHover']}";
            }
        }
        if ( ! empty( $attributes['borderRadiusHover'] ) ) {
            $border_radius_hover = self::generate_dimensions_css( $attributes['borderRadiusHover'], 'border-radius' );
            if ( $border_radius_hover ) {
                $hover_styles[] = $border_radius_hover;
            }
        }

        if ( ! empty( $hover_styles ) ) {
            $css_rules[] = "{$selector}:hover { " . implode( '; ', $hover_styles ) . "; }";
        }

        // ============================================
        // INNER CONTAINER - Desktop
        // Evidence: styles.ts generateInnerResponsiveCSS() lines 816-1017
        // ============================================

        $desktop_inner = [
            $is_grid ? 'display: grid' : 'display: flex',
            'width: 100%',
            'min-height: inherit', // Inherit parent's min-height so justify-content/align-items work correctly
        ];

        // Content Width - boxed vs full vs custom
        if ( ( $attributes['contentWidthUnit'] ?? '' ) === 'custom' && ! empty( $attributes['contentWidthCustom'] ) ) {
            $desktop_inner[] = "width: {$attributes['contentWidthCustom']}";
            $desktop_inner[] = 'max-width: none';
            $desktop_inner[] = 'margin-left: auto';
            $desktop_inner[] = 'margin-right: auto';
        } elseif ( ( $attributes['contentWidthType'] ?? '' ) === 'full' ) {
            if ( ! empty( $attributes['contentWidth'] ) && $attributes['contentWidth'] < 100 ) {
                $unit = $attributes['contentWidthUnit'] ?? '%';
                $desktop_inner[] = "width: {$attributes['contentWidth']}{$unit}";
                $desktop_inner[] = 'margin-left: auto';
                $desktop_inner[] = 'margin-right: auto';
            }
            $desktop_inner[] = 'max-width: none';
        } elseif ( ! empty( $attributes['contentWidth'] ) ) {
            $unit = $attributes['contentWidthUnit'] ?? 'px';
            $desktop_inner[] = "max-width: {$attributes['contentWidth']}{$unit}";
            $desktop_inner[] = 'margin-left: auto';
            $desktop_inner[] = 'margin-right: auto';
        }

        // Grid-specific properties
        if ( $is_grid ) {
            if ( ! empty( $attributes['gridColumns'] ) ) {
                $unit = $attributes['gridColumnsUnit'] ?? 'fr';
                $col_val = $unit === 'auto' ? 'auto' : "1{$unit}";
                $desktop_inner[] = "grid-template-columns: repeat({$attributes['gridColumns']}, {$col_val})";
            }
            if ( ! empty( $attributes['gridRows'] ) ) {
                $unit = $attributes['gridRowsUnit'] ?? 'fr';
                $row_val = $unit === 'auto' ? 'auto' : "1{$unit}";
                $desktop_inner[] = "grid-template-rows: repeat({$attributes['gridRows']}, {$row_val})";
            }
            if ( ! empty( $attributes['gridAutoFlow'] ) ) {
                $desktop_inner[] = "grid-auto-flow: {$attributes['gridAutoFlow']}";
            }
        } else {
            // Flex-specific properties
            if ( ! empty( $attributes['flexDirection'] ) ) {
                $desktop_inner[] = "flex-direction: {$attributes['flexDirection']}";
            }
            if ( ! empty( $attributes['justifyContent'] ) ) {
                $desktop_inner[] = "justify-content: {$attributes['justifyContent']}";
            }
            if ( ! empty( $attributes['alignItems'] ) ) {
                $desktop_inner[] = "align-items: {$attributes['alignItems']}";
            }
            if ( ! empty( $attributes['flexWrap'] ) ) {
                $desktop_inner[] = "flex-wrap: {$attributes['flexWrap']}";
            }
            if ( ! empty( $attributes['alignContent'] ) ) {
                $desktop_inner[] = "align-content: {$attributes['alignContent']}";
            }
        }

        // Gaps
        if ( isset( $attributes['columnGap'] ) && $attributes['columnGap'] !== '' ) {
            $unit = $attributes['columnGapUnit'] ?? $attributes['gapUnit'] ?? 'px';
            $desktop_inner[] = "column-gap: {$attributes['columnGap']}{$unit}";
        }
        if ( isset( $attributes['rowGap'] ) && $attributes['rowGap'] !== '' ) {
            $unit = $attributes['rowGapUnit'] ?? $attributes['gapUnit'] ?? 'px';
            $desktop_inner[] = "row-gap: {$attributes['rowGap']}{$unit}";
        }

        // Inline Flex
        if ( ! empty( $attributes['enableInlineFlex'] ) ) {
            $desktop_inner[] = 'display: inline-flex';
            $desktop_inner[] = 'width: auto';
        }

        $css_rules[] = "{$inner} { " . implode( '; ', $desktop_inner ) . "; }";

        // ============================================
        // OUTER CONTAINER - Tablet
        // ============================================

        $tablet_outer = [];

        if ( ! empty( $attributes['minHeight_tablet'] ) ) {
            $unit = $attributes['minHeightUnit'] ?? 'px';
            $tablet_outer[] = "min-height: {$attributes['minHeight_tablet']}{$unit}";
        }

        // Sticky - Tablet
        if ( ! empty( $attributes['stickyEnabled'] ) ) {
            if ( ( $attributes['stickyTablet'] ?? '' ) === 'sticky' ) {
                $tablet_outer[] = 'position: sticky';
                $tablet_outer[] = 'align-self: flex-start';
                if ( isset( $attributes['stickyTop_tablet'] ) && $attributes['stickyTop_tablet'] !== '' ) {
                    $unit = $attributes['stickyTopUnit'] ?? 'px';
                    $tablet_outer[] = "top: {$attributes['stickyTop_tablet']}{$unit}";
                }
            } elseif ( ( $attributes['stickyTablet'] ?? '' ) === 'initial' ) {
                $tablet_outer[] = 'position: relative';
                $tablet_outer[] = 'align-self: stretch';
            }
        }

        if ( ! empty( $attributes['enableCalcMinHeight'] ) && ! empty( $attributes['calcMinHeight_tablet'] ) ) {
            $tablet_outer[] = "min-height: {$attributes['calcMinHeight_tablet']}";
        }
        if ( ! empty( $attributes['enableCalcMaxHeight'] ) && ! empty( $attributes['calcMaxHeight_tablet'] ) ) {
            $tablet_outer[] = "max-height: {$attributes['calcMaxHeight_tablet']}";
        }
        if ( ! empty( $attributes['enableBackdropBlur'] ) && isset( $attributes['backdropBlurStrength_tablet'] ) && $attributes['backdropBlurStrength_tablet'] !== '' ) {
            $tablet_outer[] = "backdrop-filter: blur({$attributes['backdropBlurStrength_tablet']}px)";
        }

        // Transform CSS - Tablet Normal
        $transform_tablet = self::build_transform_css( $attributes, '_tablet', false );
        if ( ! empty( $transform_tablet['transform'] ) ) {
            $tablet_outer[] = "transform: {$transform_tablet['transform']}";
        }
        if ( ! empty( $transform_tablet['transformOrigin'] ) && $transform_tablet['transformOrigin'] !== '50% 50%' ) {
            $tablet_outer[] = "transform-origin: {$transform_tablet['transformOrigin']}";
        }
        if ( ! empty( $transform_tablet['perspective'] ) ) {
            $tablet_outer[] = "perspective: {$transform_tablet['perspective']}";
        }

        if ( ! empty( $tablet_outer ) ) {
            $tablet_rules[] = "{$selector} { " . implode( '; ', $tablet_outer ) . "; }";
        }

        // Tablet Hover transforms
        $transform_tablet_hover = self::build_transform_css( $attributes, '_tablet', true );
        if ( ! empty( $transform_tablet_hover['transform'] ) ) {
            $hover_styles = [ "transform: {$transform_tablet_hover['transform']}" ];
            if ( ! empty( $transform_tablet_hover['transformOrigin'] ) && $transform_tablet_hover['transformOrigin'] !== '50% 50%' ) {
                $hover_styles[] = "transform-origin: {$transform_tablet_hover['transformOrigin']}";
            }
            if ( ! empty( $transform_tablet_hover['perspective'] ) ) {
                $hover_styles[] = "perspective: {$transform_tablet_hover['perspective']}";
            }
            $tablet_rules[] = "{$selector}:hover { " . implode( '; ', $hover_styles ) . "; }";
        }

        // ============================================
        // INNER CONTAINER - Tablet
        // ============================================

        $tablet_inner = [];

        if ( ! empty( $attributes['contentWidth_tablet'] ) ) {
            $unit = $attributes['contentWidthUnit'] ?? 'px';
            $tablet_inner[] = "max-width: {$attributes['contentWidth_tablet']}{$unit}";
        }

        if ( $is_grid ) {
            if ( ! empty( $attributes['gridColumns_tablet'] ) ) {
                $unit = $attributes['gridColumnsUnit'] ?? 'fr';
                $col_val = $unit === 'auto' ? 'auto' : "1{$unit}";
                $tablet_inner[] = "grid-template-columns: repeat({$attributes['gridColumns_tablet']}, {$col_val})";
            }
            if ( ! empty( $attributes['gridRows_tablet'] ) ) {
                $unit = $attributes['gridRowsUnit'] ?? 'fr';
                $row_val = $unit === 'auto' ? 'auto' : "1{$unit}";
                $tablet_inner[] = "grid-template-rows: repeat({$attributes['gridRows_tablet']}, {$row_val})";
            }
        } else {
            if ( ! empty( $attributes['flexDirection_tablet'] ) ) {
                $tablet_inner[] = "flex-direction: {$attributes['flexDirection_tablet']}";
            }
            if ( ! empty( $attributes['justifyContent_tablet'] ) ) {
                $tablet_inner[] = "justify-content: {$attributes['justifyContent_tablet']}";
            }
            if ( ! empty( $attributes['alignItems_tablet'] ) ) {
                $tablet_inner[] = "align-items: {$attributes['alignItems_tablet']}";
            }
            if ( ! empty( $attributes['flexWrap_tablet'] ) ) {
                $tablet_inner[] = "flex-wrap: {$attributes['flexWrap_tablet']}";
            }
            if ( ! empty( $attributes['alignContent_tablet'] ) ) {
                $tablet_inner[] = "align-content: {$attributes['alignContent_tablet']}";
            }
        }

        if ( isset( $attributes['columnGap_tablet'] ) && $attributes['columnGap_tablet'] !== '' ) {
            $unit = $attributes['columnGapUnit'] ?? $attributes['gapUnit'] ?? 'px';
            $tablet_inner[] = "column-gap: {$attributes['columnGap_tablet']}{$unit}";
        }
        if ( isset( $attributes['rowGap_tablet'] ) && $attributes['rowGap_tablet'] !== '' ) {
            $unit = $attributes['rowGapUnit'] ?? $attributes['gapUnit'] ?? 'px';
            $tablet_inner[] = "row-gap: {$attributes['rowGap_tablet']}{$unit}";
        }

        if ( isset( $attributes['enableInlineFlex_tablet'] ) ) {
            if ( $attributes['enableInlineFlex_tablet'] ) {
                $tablet_inner[] = 'display: inline-flex';
                $tablet_inner[] = 'width: auto';
            } else {
                $tablet_inner[] = $is_grid ? 'display: grid' : 'display: flex';
                $tablet_inner[] = 'width: 100%';
            }
        }

        if ( ! empty( $tablet_inner ) ) {
            $tablet_rules[] = "{$inner} { " . implode( '; ', $tablet_inner ) . "; }";
        }

        // ============================================
        // OUTER CONTAINER - Mobile
        // ============================================

        $mobile_outer = [];

        if ( ! empty( $attributes['minHeight_mobile'] ) ) {
            $unit = $attributes['minHeightUnit'] ?? 'px';
            $mobile_outer[] = "min-height: {$attributes['minHeight_mobile']}{$unit}";
        }

        // Sticky - Mobile
        if ( ! empty( $attributes['stickyEnabled'] ) ) {
            if ( ( $attributes['stickyMobile'] ?? '' ) === 'sticky' ) {
                $mobile_outer[] = 'position: sticky';
                $mobile_outer[] = 'align-self: flex-start';
                if ( isset( $attributes['stickyTop_mobile'] ) && $attributes['stickyTop_mobile'] !== '' ) {
                    $unit = $attributes['stickyTopUnit'] ?? 'px';
                    $mobile_outer[] = "top: {$attributes['stickyTop_mobile']}{$unit}";
                }
            } elseif ( ( $attributes['stickyMobile'] ?? '' ) === 'initial' ) {
                $mobile_outer[] = 'position: relative';
                $mobile_outer[] = 'align-self: stretch';
            }
        }

        if ( ! empty( $attributes['enableCalcMinHeight'] ) && ! empty( $attributes['calcMinHeight_mobile'] ) ) {
            $mobile_outer[] = "min-height: {$attributes['calcMinHeight_mobile']}";
        }
        if ( ! empty( $attributes['enableCalcMaxHeight'] ) && ! empty( $attributes['calcMaxHeight_mobile'] ) ) {
            $mobile_outer[] = "max-height: {$attributes['calcMaxHeight_mobile']}";
        }
        if ( ! empty( $attributes['enableBackdropBlur'] ) && isset( $attributes['backdropBlurStrength_mobile'] ) && $attributes['backdropBlurStrength_mobile'] !== '' ) {
            $mobile_outer[] = "backdrop-filter: blur({$attributes['backdropBlurStrength_mobile']}px)";
        }

        // Transform CSS - Mobile Normal
        $transform_mobile = self::build_transform_css( $attributes, '_mobile', false );
        if ( ! empty( $transform_mobile['transform'] ) ) {
            $mobile_outer[] = "transform: {$transform_mobile['transform']}";
        }
        if ( ! empty( $transform_mobile['transformOrigin'] ) && $transform_mobile['transformOrigin'] !== '50% 50%' ) {
            $mobile_outer[] = "transform-origin: {$transform_mobile['transformOrigin']}";
        }
        if ( ! empty( $transform_mobile['perspective'] ) ) {
            $mobile_outer[] = "perspective: {$transform_mobile['perspective']}";
        }

        if ( ! empty( $mobile_outer ) ) {
            $mobile_rules[] = "{$selector} { " . implode( '; ', $mobile_outer ) . "; }";
        }

        // Mobile Hover transforms
        $transform_mobile_hover = self::build_transform_css( $attributes, '_mobile', true );
        if ( ! empty( $transform_mobile_hover['transform'] ) ) {
            $hover_styles = [ "transform: {$transform_mobile_hover['transform']}" ];
            if ( ! empty( $transform_mobile_hover['transformOrigin'] ) && $transform_mobile_hover['transformOrigin'] !== '50% 50%' ) {
                $hover_styles[] = "transform-origin: {$transform_mobile_hover['transformOrigin']}";
            }
            if ( ! empty( $transform_mobile_hover['perspective'] ) ) {
                $hover_styles[] = "perspective: {$transform_mobile_hover['perspective']}";
            }
            $mobile_rules[] = "{$selector}:hover { " . implode( '; ', $hover_styles ) . "; }";
        }

        // ============================================
        // INNER CONTAINER - Mobile
        // ============================================

        $mobile_inner = [];

        if ( ! empty( $attributes['contentWidth_mobile'] ) ) {
            $unit = $attributes['contentWidthUnit'] ?? 'px';
            $mobile_inner[] = "max-width: {$attributes['contentWidth_mobile']}{$unit}";
        }

        if ( $is_grid ) {
            if ( ! empty( $attributes['gridColumns_mobile'] ) ) {
                $unit = $attributes['gridColumnsUnit'] ?? 'fr';
                $col_val = $unit === 'auto' ? 'auto' : "1{$unit}";
                $mobile_inner[] = "grid-template-columns: repeat({$attributes['gridColumns_mobile']}, {$col_val})";
            }
            if ( ! empty( $attributes['gridRows_mobile'] ) ) {
                $unit = $attributes['gridRowsUnit'] ?? 'fr';
                $row_val = $unit === 'auto' ? 'auto' : "1{$unit}";
                $mobile_inner[] = "grid-template-rows: repeat({$attributes['gridRows_mobile']}, {$row_val})";
            }
        } else {
            if ( ! empty( $attributes['flexDirection_mobile'] ) ) {
                $mobile_inner[] = "flex-direction: {$attributes['flexDirection_mobile']}";
            }
            if ( ! empty( $attributes['justifyContent_mobile'] ) ) {
                $mobile_inner[] = "justify-content: {$attributes['justifyContent_mobile']}";
            }
            if ( ! empty( $attributes['alignItems_mobile'] ) ) {
                $mobile_inner[] = "align-items: {$attributes['alignItems_mobile']}";
            }
            if ( ! empty( $attributes['flexWrap_mobile'] ) ) {
                $mobile_inner[] = "flex-wrap: {$attributes['flexWrap_mobile']}";
            }
            if ( ! empty( $attributes['alignContent_mobile'] ) ) {
                $mobile_inner[] = "align-content: {$attributes['alignContent_mobile']}";
            }
        }

        if ( isset( $attributes['columnGap_mobile'] ) && $attributes['columnGap_mobile'] !== '' ) {
            $unit = $attributes['columnGapUnit'] ?? $attributes['gapUnit'] ?? 'px';
            $mobile_inner[] = "column-gap: {$attributes['columnGap_mobile']}{$unit}";
        }
        if ( isset( $attributes['rowGap_mobile'] ) && $attributes['rowGap_mobile'] !== '' ) {
            $unit = $attributes['rowGapUnit'] ?? $attributes['gapUnit'] ?? 'px';
            $mobile_inner[] = "row-gap: {$attributes['rowGap_mobile']}{$unit}";
        }

        if ( isset( $attributes['enableInlineFlex_mobile'] ) ) {
            if ( $attributes['enableInlineFlex_mobile'] ) {
                $mobile_inner[] = 'display: inline-flex';
                $mobile_inner[] = 'width: auto';
            } else {
                $mobile_inner[] = $is_grid ? 'display: grid' : 'display: flex';
                $mobile_inner[] = 'width: 100%';
            }
        }

        if ( ! empty( $mobile_inner ) ) {
            $mobile_rules[] = "{$inner} { " . implode( '; ', $mobile_inner ) . "; }";
        }

        // ============================================
        // Combine CSS with media queries
        // ============================================

        $final_css = '';
        if ( ! empty( $css_rules ) ) {
            $final_css .= implode( "\n", $css_rules );
        }
        if ( ! empty( $tablet_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::TABLET_BREAKPOINT . "px) {\n" . implode( "\n", $tablet_rules ) . "\n}";
        }
        if ( ! empty( $mobile_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::MOBILE_BREAKPOINT . "px) {\n" . implode( "\n", $mobile_rules ) . "\n}";
        }

        return $final_css;
    }

    /**
     * Build transform CSS string from flex-container attributes.
     *
     * Translates generateTransformCSS() from styles.ts.
     * Handles: rotate, 3D rotate, translate, scale, skew, flip, transform-origin, perspective.
     *
     * @param array  $attributes Block attributes.
     * @param string $suffix     Device suffix: '' (desktop), '_tablet', '_mobile'.
     * @param bool   $is_hover   Whether generating for hover state.
     * @return array { transform: string, transformOrigin: string, perspective: string }
     */
    private static function build_transform_css( $attributes, $suffix = '', $is_hover = false ) {
        $transforms = [];
        $hover_key  = $is_hover ? 'Hover' : '';

        // Helper to read numeric value with device suffix
        $get_value = function ( $base_name ) use ( $attributes, $hover_key, $suffix ) {
            $attr_name = $base_name . $hover_key . $suffix;
            return isset( $attributes[ $attr_name ] ) && $attributes[ $attr_name ] !== '' ? $attributes[ $attr_name ] : null;
        };

        // Helper to read string value with device suffix
        $get_string = function ( $base_name ) use ( $attributes, $hover_key, $suffix ) {
            $attr_name = $base_name . $hover_key . $suffix;
            return ! empty( $attributes[ $attr_name ] ) ? $attributes[ $attr_name ] : null;
        };

        // Rotate
        $rotate = $get_value( 'transformRotate' );
        if ( $rotate !== null ) {
            $transforms[] = "rotate({$rotate}deg)";
        }

        // 3D Rotate
        $is_3d = $is_hover
            ? ! empty( $attributes['transformRotate3DHover'] )
            : ! empty( $attributes['transformRotate3D'] );

        if ( $is_3d ) {
            $rotate_x = $get_value( 'transformRotateX' );
            $rotate_y = $get_value( 'transformRotateY' );
            if ( $rotate_x !== null ) {
                $transforms[] = "rotateX({$rotate_x}deg)";
            }
            if ( $rotate_y !== null ) {
                $transforms[] = "rotateY({$rotate_y}deg)";
            }
        }

        // Translate
        $translate_x = $get_value( 'transformTranslateX' );
        $translate_x_unit = $is_hover
            ? ( $attributes['transformTranslateXHoverUnit'] ?? 'px' )
            : ( $attributes['transformTranslateXUnit'] ?? 'px' );
        if ( $translate_x !== null ) {
            $transforms[] = "translateX({$translate_x}{$translate_x_unit})";
        }

        $translate_y = $get_value( 'transformTranslateY' );
        $translate_y_unit = $is_hover
            ? ( $attributes['transformTranslateYHoverUnit'] ?? 'px' )
            : ( $attributes['transformTranslateYUnit'] ?? 'px' );
        if ( $translate_y !== null ) {
            $transforms[] = "translateY({$translate_y}{$translate_y_unit})";
        }

        // Scale
        $keep_proportions = $is_hover
            ? ( $attributes['transformScaleProportionsHover'] ?? true )
            : ( $attributes['transformScaleProportions'] ?? true );

        if ( $keep_proportions ) {
            $scale = $get_value( 'transformScale' );
            if ( $scale !== null ) {
                $transforms[] = "scale({$scale})";
            }
        } else {
            $scale_x = $get_value( 'transformScaleX' );
            $scale_y = $get_value( 'transformScaleY' );
            if ( $scale_x !== null ) {
                $transforms[] = "scaleX({$scale_x})";
            }
            if ( $scale_y !== null ) {
                $transforms[] = "scaleY({$scale_y})";
            }
        }

        // Skew
        $skew_x = $get_value( 'transformSkewX' );
        if ( $skew_x !== null ) {
            $transforms[] = "skewX({$skew_x}deg)";
        }
        $skew_y = $get_value( 'transformSkewY' );
        if ( $skew_y !== null ) {
            $transforms[] = "skewY({$skew_y}deg)";
        }

        // Flip (scaleX/Y with -1)
        $flip_x = $is_hover
            ? ! empty( $attributes['transformFlipXHover'] )
            : ! empty( $attributes['transformFlipX'] );
        $flip_y = $is_hover
            ? ! empty( $attributes['transformFlipYHover'] )
            : ! empty( $attributes['transformFlipY'] );

        if ( $flip_x ) {
            $transforms[] = 'scaleX(-1)';
        }
        if ( $flip_y ) {
            $transforms[] = 'scaleY(-1)';
        }

        // Transform Origin
        $origin_x = $get_string( 'transformOriginX' ) ?? 'center';
        $origin_y = $get_string( 'transformOriginY' ) ?? 'center';
        $transform_origin = self::anchor_to_percent( $origin_x ) . ' ' . self::anchor_to_percent( $origin_y );

        // Perspective
        $perspective = $get_value( 'transformPerspective' );
        $perspective_css = $perspective !== null ? "{$perspective}px" : '';

        return [
            'transform'       => implode( ' ', $transforms ),
            'transformOrigin' => $transform_origin,
            'perspective'     => $perspective_css,
        ];
    }

    /**
     * Convert anchor point value to CSS percentage.
     *
     * Translates anchorToPercent() from styles.ts.
     *
     * @param string $anchor Anchor value: 'left', 'top', 'center', 'right', 'bottom'.
     * @return string CSS percentage value.
     */
    private static function anchor_to_percent( $anchor ) {
        switch ( $anchor ) {
            case 'left':
            case 'top':
                return '0%';
            case 'right':
            case 'bottom':
                return '100%';
            case 'center':
            default:
                return '50%';
        }
    }

    /**
     * Generate CSS for Visit Chart Block
     *
     * @param array  $attributes Block attributes.
     * @param string $block_id   Unique block ID.
     * @return string Generated CSS.
     */
    public static function generate_visit_chart_css( $attributes, $block_id ) {
        if ( empty( $block_id ) ) {
            return '';
        }

        $selector = '.voxel-fse-visit-chart-frontend.voxel-fse-visit-chart-' . $block_id;
        $css_rules = [];
        $tablet_rules = [];
        $mobile_rules = [];

        // ============================================
        // SECTION: Chart
        // ============================================

        // Content height (responsive)
        if ( isset( $attributes['chartHeight'] ) && $attributes['chartHeight'] !== '' ) {
            $css_rules[] = "{$selector} .ts-chart .ts-no-posts, {$selector} .ts-chart .chart-content { height: {$attributes['chartHeight']}px; }";
        }
        if ( isset( $attributes['chartHeight_tablet'] ) && $attributes['chartHeight_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-chart .ts-no-posts, {$selector} .ts-chart .chart-content { height: {$attributes['chartHeight_tablet']}px; }";
        }
        if ( isset( $attributes['chartHeight_mobile'] ) && $attributes['chartHeight_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-chart .ts-no-posts, {$selector} .ts-chart .chart-content { height: {$attributes['chartHeight_mobile']}px; }";
        }

        // Axis Typography
        if ( ! empty( $attributes['axisTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['axisTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .chart-content span { {$typo}; }";
            }
        }

        // Axis Text Color
        if ( ! empty( $attributes['axisTextColor'] ) ) {
            $css_rules[] = "{$selector} .chart-content span { color: {$attributes['axisTextColor']}; }";
        }

        // Vertical axis width (responsive)
        if ( isset( $attributes['verticalAxisWidth'] ) && $attributes['verticalAxisWidth'] !== '' ) {
            $css_rules[] = "{$selector} .chart-content.min-scroll { margin-left: {$attributes['verticalAxisWidth']}px; }";
        }
        if ( isset( $attributes['verticalAxisWidth_tablet'] ) && $attributes['verticalAxisWidth_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .chart-content.min-scroll { margin-left: {$attributes['verticalAxisWidth_tablet']}px; }";
        }
        if ( isset( $attributes['verticalAxisWidth_mobile'] ) && $attributes['verticalAxisWidth_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .chart-content.min-scroll { margin-left: {$attributes['verticalAxisWidth_mobile']}px; }";
        }

        // Chart lines border type
        if ( ! empty( $attributes['chartLineBorderType'] ) && $attributes['chartLineBorderType'] !== 'default' ) {
            if ( $attributes['chartLineBorderType'] === 'none' ) {
                $css_rules[] = "{$selector} .chart-content .bar-values span { border-top-style: none; }";
            } else {
                $css_rules[] = "{$selector} .chart-content .bar-values span { border-top-style: {$attributes['chartLineBorderType']}; }";
            }
        }

        // Bar gap (responsive)
        if ( isset( $attributes['barGap'] ) && $attributes['barGap'] !== '' ) {
            $css_rules[] = "{$selector} .chart-content { grid-gap: {$attributes['barGap']}px; }";
        }
        if ( isset( $attributes['barGap_tablet'] ) && $attributes['barGap_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .chart-content { grid-gap: {$attributes['barGap_tablet']}px; }";
        }
        if ( isset( $attributes['barGap_mobile'] ) && $attributes['barGap_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .chart-content { grid-gap: {$attributes['barGap_mobile']}px; }";
        }

        // Bar width (responsive)
        if ( isset( $attributes['barWidth'] ) && $attributes['barWidth'] !== '' ) {
            $css_rules[] = "{$selector} .chart-content .bar-item { width: {$attributes['barWidth']}px; }";
        }
        if ( isset( $attributes['barWidth_tablet'] ) && $attributes['barWidth_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .chart-content .bar-item { width: {$attributes['barWidth_tablet']}px; }";
        }
        if ( isset( $attributes['barWidth_mobile'] ) && $attributes['barWidth_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .chart-content .bar-item { width: {$attributes['barWidth_mobile']}px; }";
        }

        // Bar radius (responsive)
        if ( isset( $attributes['barRadius'] ) && $attributes['barRadius'] !== '' ) {
            $css_rules[] = "{$selector} .chart-content .bar-item { border-radius: {$attributes['barRadius']}px; }";
        }
        if ( isset( $attributes['barRadius_tablet'] ) && $attributes['barRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .chart-content .bar-item { border-radius: {$attributes['barRadius_tablet']}px; }";
        }
        if ( isset( $attributes['barRadius_mobile'] ) && $attributes['barRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .chart-content .bar-item { border-radius: {$attributes['barRadius_mobile']}px; }";
        }

        // Bar background (BackgroundControl)
        if ( ! empty( $attributes['barBackground'] ) ) {
            $bg = $attributes['barBackground'];
            $bg_type = $bg['backgroundType'] ?? 'classic';
            if ( $bg_type === 'gradient' && ! empty( $bg['backgroundGradient'] ) ) {
                $css_rules[] = "{$selector} .chart-content .bar-item { background-image: {$bg['backgroundGradient']}; }";
            } elseif ( ! empty( $bg['backgroundColor'] ) ) {
                $css_rules[] = "{$selector} .chart-content .bar-item { background-color: {$bg['backgroundColor']}; }";
            }
        }

        // Bar background hover
        if ( ! empty( $attributes['barBackgroundHover'] ) ) {
            $css_rules[] = "{$selector} .chart-content .bar-item:hover { background-color: {$attributes['barBackgroundHover']}; }";
        }

        // Bar box shadow
        if ( ! empty( $attributes['barBoxShadow'] ) && ! empty( $attributes['barBoxShadow']['enable'] ) ) {
            $s = $attributes['barBoxShadow'];
            $h = $s['horizontal'] ?? 0;
            $v = $s['vertical'] ?? 0;
            $blur = $s['blur'] ?? 0;
            $spread = $s['spread'] ?? 0;
            $color = $s['color'] ?? 'rgba(0,0,0,0.1)';
            $inset = ( $s['position'] ?? 'outline' ) === 'inset' ? 'inset ' : '';
            $css_rules[] = "{$selector} .chart-content .bar-item { box-shadow: {$inset}{$h}px {$v}px {$blur}px {$spread}px {$color}; }";
        }

        // Bar popup background
        if ( ! empty( $attributes['barPopupBackground'] ) ) {
            $css_rules[] = "{$selector} .bar-item-data { background-color: {$attributes['barPopupBackground']}; }";
        }

        // Bar popup border
        if ( ! empty( $attributes['barPopupBorderType'] ) && $attributes['barPopupBorderType'] !== 'none' ) {
            $border_css = "border-style: {$attributes['barPopupBorderType']};";
            if ( ! empty( $attributes['barPopupBorderWidth'] ) ) {
                $w = $attributes['barPopupBorderWidth'];
                $t = floatval( $w['top'] ?? 0 );
                $r = floatval( $w['right'] ?? 0 );
                $b = floatval( $w['bottom'] ?? 0 );
                $l = floatval( $w['left'] ?? 0 );
                $border_css .= " border-width: {$t}px {$r}px {$b}px {$l}px;";
            }
            if ( ! empty( $attributes['barPopupBorderColor'] ) ) {
                $border_css .= " border-color: {$attributes['barPopupBorderColor']};";
            }
            $css_rules[] = "{$selector} .bar-item-data { {$border_css} }";
        }

        // Bar popup radius (responsive)
        if ( isset( $attributes['barPopupRadius'] ) && $attributes['barPopupRadius'] !== '' ) {
            $css_rules[] = "{$selector} .bar-item-data { border-radius: {$attributes['barPopupRadius']}px; }";
        }
        if ( isset( $attributes['barPopupRadius_tablet'] ) && $attributes['barPopupRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .bar-item-data { border-radius: {$attributes['barPopupRadius_tablet']}px; }";
        }
        if ( isset( $attributes['barPopupRadius_mobile'] ) && $attributes['barPopupRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .bar-item-data { border-radius: {$attributes['barPopupRadius_mobile']}px; }";
        }

        // Bar popup box shadow
        if ( ! empty( $attributes['barPopupBoxShadow'] ) && ! empty( $attributes['barPopupBoxShadow']['enable'] ) ) {
            $s = $attributes['barPopupBoxShadow'];
            $h = $s['horizontal'] ?? 0;
            $v = $s['vertical'] ?? 0;
            $blur = $s['blur'] ?? 0;
            $spread = $s['spread'] ?? 0;
            $color = $s['color'] ?? 'rgba(0,0,0,0.1)';
            $inset = ( $s['position'] ?? 'outline' ) === 'inset' ? 'inset ' : '';
            $css_rules[] = "{$selector} .bar-item-data { box-shadow: {$inset}{$h}px {$v}px {$blur}px {$spread}px {$color}; }";
        }

        // Bar popup value typography
        if ( ! empty( $attributes['barPopupValueTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['barPopupValueTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .bar-item-data li { {$typo}; }";
            }
        }

        // Bar popup value color
        if ( ! empty( $attributes['barPopupValueColor'] ) ) {
            $css_rules[] = "{$selector} .bar-item-data li { color: {$attributes['barPopupValueColor']}; }";
        }

        // Bar popup label typography
        if ( ! empty( $attributes['barPopupLabelTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['barPopupLabelTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .bar-item-data li small { {$typo}; }";
            }
        }

        // Bar popup label color
        if ( ! empty( $attributes['barPopupLabelColor'] ) ) {
            $css_rules[] = "{$selector} .bar-item-data li small { color: {$attributes['barPopupLabelColor']}; }";
        }

        // ============================================
        // SECTION: Tabs
        // ============================================

        // Tabs justify
        if ( ! empty( $attributes['tabsJustify'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs { justify-content: {$attributes['tabsJustify']}; }";
        }

        // Tabs padding
        if ( ! empty( $attributes['tabsPadding'] ) ) {
            $p = $attributes['tabsPadding'];
            $unit = $p['unit'] ?? 'px';
            $t = floatval( $p['top'] ?? 0 );
            $r = floatval( $p['right'] ?? 0 );
            $b = floatval( $p['bottom'] ?? 0 );
            $l = floatval( $p['left'] ?? 0 );
            $css_rules[] = "{$selector} .ts-generic-tabs li a { padding: {$t}{$unit} {$r}{$unit} {$b}{$unit} {$l}{$unit}; }";
        }

        // Tabs margin
        if ( ! empty( $attributes['tabsMargin'] ) ) {
            $m = $attributes['tabsMargin'];
            $unit = $m['unit'] ?? 'px';
            $t = floatval( $m['top'] ?? 0 );
            $r = floatval( $m['right'] ?? 0 );
            $b = floatval( $m['bottom'] ?? 0 );
            $l = floatval( $m['left'] ?? 0 );
            $css_rules[] = "{$selector} .ts-generic-tabs li { margin: {$t}{$unit} {$r}{$unit} {$b}{$unit} {$l}{$unit}; }";
        }

        // Tab typography
        if ( ! empty( $attributes['tabsTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['tabsTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-generic-tabs li a { {$typo}; }";
            }
        }

        // Active tab typography
        if ( ! empty( $attributes['tabsActiveTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['tabsActiveTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-generic-tabs li.ts-tab-active a { {$typo}; }";
            }
        }

        // Text color
        if ( ! empty( $attributes['tabsTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li a { color: {$attributes['tabsTextColor']}; }";
        }

        // Active text color
        if ( ! empty( $attributes['tabsActiveTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li.ts-tab-active a { color: {$attributes['tabsActiveTextColor']}; }";
        }

        // Background
        if ( ! empty( $attributes['tabsBackground'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li a { background-color: {$attributes['tabsBackground']}; }";
        }

        // Active background
        if ( ! empty( $attributes['tabsActiveBackground'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li.ts-tab-active a { background-color: {$attributes['tabsActiveBackground']}; }";
        }

        // Border type
        if ( ! empty( $attributes['tabsBorderType'] ) && $attributes['tabsBorderType'] !== 'default' ) {
            if ( $attributes['tabsBorderType'] === 'none' ) {
                $css_rules[] = "{$selector} .ts-generic-tabs li a { border-style: none; }";
            } else {
                $css_rules[] = "{$selector} .ts-generic-tabs li a { border-style: {$attributes['tabsBorderType']}; }";
            }
        }

        // Active border color
        if ( ! empty( $attributes['tabsActiveBorderColor'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li.ts-tab-active a { border-color: {$attributes['tabsActiveBorderColor']}; }";
        }

        // Border radius (responsive)
        if ( isset( $attributes['tabsBorderRadius'] ) && $attributes['tabsBorderRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li a { border-radius: {$attributes['tabsBorderRadius']}px; }";
        }
        if ( isset( $attributes['tabsBorderRadius_tablet'] ) && $attributes['tabsBorderRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-generic-tabs li a { border-radius: {$attributes['tabsBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['tabsBorderRadius_mobile'] ) && $attributes['tabsBorderRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-generic-tabs li a { border-radius: {$attributes['tabsBorderRadius_mobile']}px; }";
        }

        // HOVER STATES
        if ( ! empty( $attributes['tabsTextColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li a:hover { color: {$attributes['tabsTextColorHover']}; }";
        }
        if ( ! empty( $attributes['tabsActiveTextColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li.ts-tab-active a:hover { color: {$attributes['tabsActiveTextColorHover']}; }";
        }
        if ( ! empty( $attributes['tabsBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li a:hover { border-color: {$attributes['tabsBorderColorHover']}; }";
        }
        if ( ! empty( $attributes['tabsActiveBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li.ts-tab-active a:hover { border-color: {$attributes['tabsActiveBorderColorHover']}; }";
        }
        if ( ! empty( $attributes['tabsBackgroundHover'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li a:hover { background-color: {$attributes['tabsBackgroundHover']}; }";
        }
        if ( ! empty( $attributes['tabsActiveBackgroundHover'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li.ts-tab-active a:hover { background-color: {$attributes['tabsActiveBackgroundHover']}; }";
        }

        // ============================================
        // SECTION: Week Buttons
        // ============================================

        // Range typography
        if ( ! empty( $attributes['weekRangeTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['weekRangeTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-chart-nav p { {$typo}; }";
            }
        }

        // Range text color
        if ( ! empty( $attributes['weekRangeTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-chart-nav p { color: {$attributes['weekRangeTextColor']}; }";
        }

        // Button icon color
        if ( ! empty( $attributes['weekButtonIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-chart-nav .ts-icon-btn i { color: {$attributes['weekButtonIconColor']}; }";
            $css_rules[] = "{$selector} .ts-chart-nav .ts-icon-btn svg { fill: {$attributes['weekButtonIconColor']}; }";
        }

        // Button icon size (responsive)
        if ( isset( $attributes['weekButtonIconSize'] ) && $attributes['weekButtonIconSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-chart-nav .ts-icon-btn i { font-size: {$attributes['weekButtonIconSize']}px; }";
            $css_rules[] = "{$selector} .ts-chart-nav .ts-icon-btn svg { width: {$attributes['weekButtonIconSize']}px; height: {$attributes['weekButtonIconSize']}px; }";
        }
        if ( isset( $attributes['weekButtonIconSize_tablet'] ) && $attributes['weekButtonIconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-chart-nav .ts-icon-btn i { font-size: {$attributes['weekButtonIconSize_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-chart-nav .ts-icon-btn svg { width: {$attributes['weekButtonIconSize_tablet']}px; height: {$attributes['weekButtonIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['weekButtonIconSize_mobile'] ) && $attributes['weekButtonIconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-chart-nav .ts-icon-btn i { font-size: {$attributes['weekButtonIconSize_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-chart-nav .ts-icon-btn svg { width: {$attributes['weekButtonIconSize_mobile']}px; height: {$attributes['weekButtonIconSize_mobile']}px; }";
        }

        // Button background
        if ( ! empty( $attributes['weekButtonBackground'] ) ) {
            $css_rules[] = "{$selector} .ts-chart-nav .ts-icon-btn { background-color: {$attributes['weekButtonBackground']}; }";
        }

        // Button border
        if ( ! empty( $attributes['weekButtonBorderType'] ) && $attributes['weekButtonBorderType'] !== 'none' ) {
            $border_css = "border-style: {$attributes['weekButtonBorderType']};";
            if ( ! empty( $attributes['weekButtonBorderWidth'] ) ) {
                $w = $attributes['weekButtonBorderWidth'];
                $t = floatval( $w['top'] ?? 0 );
                $r = floatval( $w['right'] ?? 0 );
                $b = floatval( $w['bottom'] ?? 0 );
                $l = floatval( $w['left'] ?? 0 );
                $border_css .= " border-width: {$t}px {$r}px {$b}px {$l}px;";
            }
            if ( ! empty( $attributes['weekButtonBorderColor'] ) ) {
                $border_css .= " border-color: {$attributes['weekButtonBorderColor']};";
            }
            $css_rules[] = "{$selector} .ts-chart-nav .ts-icon-btn { {$border_css} }";
        }

        // Button border radius (responsive)
        if ( isset( $attributes['weekButtonBorderRadius'] ) && $attributes['weekButtonBorderRadius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-chart-nav .ts-icon-btn { border-radius: {$attributes['weekButtonBorderRadius']}px; }";
        }
        if ( isset( $attributes['weekButtonBorderRadius_tablet'] ) && $attributes['weekButtonBorderRadius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-chart-nav .ts-icon-btn { border-radius: {$attributes['weekButtonBorderRadius_tablet']}px; }";
        }
        if ( isset( $attributes['weekButtonBorderRadius_mobile'] ) && $attributes['weekButtonBorderRadius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-chart-nav .ts-icon-btn { border-radius: {$attributes['weekButtonBorderRadius_mobile']}px; }";
        }

        // Button size (responsive)
        if ( isset( $attributes['weekButtonSize'] ) && $attributes['weekButtonSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-chart-nav .ts-icon-btn { width: {$attributes['weekButtonSize']}px; height: {$attributes['weekButtonSize']}px; min-width: {$attributes['weekButtonSize']}px; }";
        }
        if ( isset( $attributes['weekButtonSize_tablet'] ) && $attributes['weekButtonSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-chart-nav .ts-icon-btn { width: {$attributes['weekButtonSize_tablet']}px; height: {$attributes['weekButtonSize_tablet']}px; min-width: {$attributes['weekButtonSize_tablet']}px; }";
        }
        if ( isset( $attributes['weekButtonSize_mobile'] ) && $attributes['weekButtonSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-chart-nav .ts-icon-btn { width: {$attributes['weekButtonSize_mobile']}px; height: {$attributes['weekButtonSize_mobile']}px; min-width: {$attributes['weekButtonSize_mobile']}px; }";
        }

        // HOVER STATES
        if ( ! empty( $attributes['weekButtonIconColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-chart-nav .ts-icon-btn:hover i { color: {$attributes['weekButtonIconColorHover']}; }";
            $css_rules[] = "{$selector} .ts-chart-nav .ts-icon-btn:hover svg { fill: {$attributes['weekButtonIconColorHover']}; }";
        }
        if ( ! empty( $attributes['weekButtonBackgroundHover'] ) ) {
            $css_rules[] = "{$selector} .ts-chart-nav .ts-icon-btn:hover { background-color: {$attributes['weekButtonBackgroundHover']}; }";
        }
        if ( ! empty( $attributes['weekButtonBorderColorHover'] ) ) {
            $css_rules[] = "{$selector} .ts-chart-nav .ts-icon-btn:hover { border-color: {$attributes['weekButtonBorderColorHover']}; }";
        }

        // ============================================
        // SECTION: No Activity
        // ============================================

        // Content gap (responsive)
        if ( isset( $attributes['noActivityContentGap'] ) && $attributes['noActivityContentGap'] !== '' ) {
            $css_rules[] = "{$selector} .ts-no-posts { grid-gap: {$attributes['noActivityContentGap']}px; }";
        }
        if ( isset( $attributes['noActivityContentGap_tablet'] ) && $attributes['noActivityContentGap_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-no-posts { grid-gap: {$attributes['noActivityContentGap_tablet']}px; }";
        }
        if ( isset( $attributes['noActivityContentGap_mobile'] ) && $attributes['noActivityContentGap_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-no-posts { grid-gap: {$attributes['noActivityContentGap_mobile']}px; }";
        }

        // Icon size (responsive)
        if ( isset( $attributes['noActivityIconSize'] ) && $attributes['noActivityIconSize'] !== '' ) {
            $css_rules[] = "{$selector} .ts-no-posts i { font-size: {$attributes['noActivityIconSize']}px; }";
            $css_rules[] = "{$selector} .ts-no-posts svg { width: {$attributes['noActivityIconSize']}px; height: {$attributes['noActivityIconSize']}px; }";
        }
        if ( isset( $attributes['noActivityIconSize_tablet'] ) && $attributes['noActivityIconSize_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-no-posts i { font-size: {$attributes['noActivityIconSize_tablet']}px; }";
            $tablet_rules[] = "{$selector} .ts-no-posts svg { width: {$attributes['noActivityIconSize_tablet']}px; height: {$attributes['noActivityIconSize_tablet']}px; }";
        }
        if ( isset( $attributes['noActivityIconSize_mobile'] ) && $attributes['noActivityIconSize_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-no-posts i { font-size: {$attributes['noActivityIconSize_mobile']}px; }";
            $mobile_rules[] = "{$selector} .ts-no-posts svg { width: {$attributes['noActivityIconSize_mobile']}px; height: {$attributes['noActivityIconSize_mobile']}px; }";
        }

        // Icon color
        if ( ! empty( $attributes['noActivityIconColor'] ) ) {
            $css_rules[] = "{$selector} .ts-no-posts i { color: {$attributes['noActivityIconColor']}; }";
            $css_rules[] = "{$selector} .ts-no-posts svg { fill: {$attributes['noActivityIconColor']}; }";
        }

        // Typography
        if ( ! empty( $attributes['noActivityTypography'] ) ) {
            $typo = self::generate_typography_css( $attributes['noActivityTypography'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-no-posts p { {$typo}; }";
            }
        }

        // Text color
        if ( ! empty( $attributes['noActivityTextColor'] ) ) {
            $css_rules[] = "{$selector} .ts-no-posts p { color: {$attributes['noActivityTextColor']}; }";
        }

        // ============================================
        // Combine CSS with media queries
        // ============================================
        $final_css = '';
        if ( ! empty( $css_rules ) ) {
            $final_css .= implode( "\n", $css_rules );
        }
        if ( ! empty( $tablet_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::TABLET_BREAKPOINT . "px) {\n" . implode( "\n", $tablet_rules ) . "\n}";
        }
        if ( ! empty( $mobile_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::MOBILE_BREAKPOINT . "px) {\n" . implode( "\n", $mobile_rules ) . "\n}";
        }

        return $final_css;
    }

    /**
     * Generate CSS for Sales Chart Block
     *
     * Note: Uses snake_case attribute names.
     *
     * @param array  $attributes Block attributes.
     * @param string $block_id   Unique block ID.
     * @return string Generated CSS.
     */
    public static function generate_sales_chart_css( $attributes, $block_id ) {
        if ( empty( $block_id ) ) {
            return '';
        }

        $selector = '.voxel-fse-sales-chart-' . $block_id;
        $css_rules = [];
        $tablet_rules = [];
        $mobile_rules = [];

        // ============================================
        // SECTION: Chart
        // ============================================

        // Content height (responsive)
        if ( isset( $attributes['ts_chart_height'] ) && $attributes['ts_chart_height'] !== '' ) {
            $css_rules[] = "{$selector} .ts-chart .ts-no-posts, {$selector} .ts-chart .chart-content { height: {$attributes['ts_chart_height']}px; }";
        }
        if ( isset( $attributes['ts_chart_height_tablet'] ) && $attributes['ts_chart_height_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .ts-chart .ts-no-posts, {$selector} .ts-chart .chart-content { height: {$attributes['ts_chart_height_tablet']}px; }";
        }
        if ( isset( $attributes['ts_chart_height_mobile'] ) && $attributes['ts_chart_height_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .ts-chart .ts-no-posts, {$selector} .ts-chart .chart-content { height: {$attributes['ts_chart_height_mobile']}px; }";
        }

        // Axis Typography
        if ( ! empty( $attributes['axis_typo'] ) ) {
            $typo = self::generate_typography_css( $attributes['axis_typo'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .chart-content span { {$typo}; }";
            }
        }

        // Axis text color
        if ( ! empty( $attributes['ts_axis_typo_col'] ) ) {
            $css_rules[] = "{$selector} .chart-content span { color: {$attributes['ts_axis_typo_col']}; }";
        }

        // Vertical axis width (responsive)
        if ( isset( $attributes['vertical_axis_width'] ) && $attributes['vertical_axis_width'] !== '' ) {
            $css_rules[] = "{$selector} .chart-content.min-scroll { margin-left: {$attributes['vertical_axis_width']}px; }";
        }
        if ( isset( $attributes['vertical_axis_width_tablet'] ) && $attributes['vertical_axis_width_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .chart-content.min-scroll { margin-left: {$attributes['vertical_axis_width_tablet']}px; }";
        }
        if ( isset( $attributes['vertical_axis_width_mobile'] ) && $attributes['vertical_axis_width_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .chart-content.min-scroll { margin-left: {$attributes['vertical_axis_width_mobile']}px; }";
        }

        // Chart lines border
        if ( ! empty( $attributes['chart_line_border_type'] ) && $attributes['chart_line_border_type'] !== 'none' ) {
            $border_css = "border-style: {$attributes['chart_line_border_type']};";
            if ( ! empty( $attributes['chart_line_border_width'] ) ) {
                $w = $attributes['chart_line_border_width'];
                $t = floatval( $w['top'] ?? 0 );
                $r = floatval( $w['right'] ?? 0 );
                $b = floatval( $w['bottom'] ?? 0 );
                $l = floatval( $w['left'] ?? 0 );
                $border_css .= " border-width: {$t}px {$r}px {$b}px {$l}px;";
            }
            if ( ! empty( $attributes['chart_line_border_color'] ) ) {
                $border_css .= " border-color: {$attributes['chart_line_border_color']};";
            }
            $css_rules[] = "{$selector} .chart-content .bar-values span { {$border_css} }";
        }

        // Bar gap (responsive)
        if ( isset( $attributes['chart_col_gap'] ) && $attributes['chart_col_gap'] !== '' ) {
            $css_rules[] = "{$selector} .chart-content { grid-gap: {$attributes['chart_col_gap']}px; }";
        }
        if ( isset( $attributes['chart_col_gap_tablet'] ) && $attributes['chart_col_gap_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .chart-content { grid-gap: {$attributes['chart_col_gap_tablet']}px; }";
        }
        if ( isset( $attributes['chart_col_gap_mobile'] ) && $attributes['chart_col_gap_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .chart-content { grid-gap: {$attributes['chart_col_gap_mobile']}px; }";
        }

        // Bar width (responsive)
        if ( isset( $attributes['bar_width'] ) && $attributes['bar_width'] !== '' ) {
            $css_rules[] = "{$selector} .chart-content .bar-item { width: {$attributes['bar_width']}px; }";
        }
        if ( isset( $attributes['bar_width_tablet'] ) && $attributes['bar_width_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .chart-content .bar-item { width: {$attributes['bar_width_tablet']}px; }";
        }
        if ( isset( $attributes['bar_width_mobile'] ) && $attributes['bar_width_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .chart-content .bar-item { width: {$attributes['bar_width_mobile']}px; }";
        }

        // Bar radius (responsive)
        if ( isset( $attributes['bar_radius'] ) && $attributes['bar_radius'] !== '' ) {
            $css_rules[] = "{$selector} .chart-content .bar-item { border-radius: {$attributes['bar_radius']}px; }";
        }
        if ( isset( $attributes['bar_radius_tablet'] ) && $attributes['bar_radius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .chart-content .bar-item { border-radius: {$attributes['bar_radius_tablet']}px; }";
        }
        if ( isset( $attributes['bar_radius_mobile'] ) && $attributes['bar_radius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .chart-content .bar-item { border-radius: {$attributes['bar_radius_mobile']}px; }";
        }

        // Bar background (BackgroundControl)
        if ( ! empty( $attributes['bar_bg'] ) ) {
            $bg = $attributes['bar_bg'];
            $bg_type = $bg['backgroundType'] ?? 'classic';
            if ( $bg_type === 'gradient' && ! empty( $bg['backgroundGradient'] ) ) {
                $css_rules[] = "{$selector} .chart-content .bar-item { background-image: {$bg['backgroundGradient']}; }";
            } elseif ( ! empty( $bg['backgroundColor'] ) ) {
                $css_rules[] = "{$selector} .chart-content .bar-item { background-color: {$bg['backgroundColor']}; }";
            }
        }

        // Bar hover
        if ( ! empty( $attributes['bar_bg_hover'] ) ) {
            $css_rules[] = "{$selector} .chart-content .bar-item:hover { background-color: {$attributes['bar_bg_hover']}; }";
        }

        // Bar shadow
        if ( ! empty( $attributes['bar_sh_shadow'] ) && ! empty( $attributes['bar_sh_shadow']['enable'] ) ) {
            $s = $attributes['bar_sh_shadow'];
            $h = $s['horizontal'] ?? 0;
            $v = $s['vertical'] ?? 0;
            $blur = $s['blur'] ?? 0;
            $spread = $s['spread'] ?? 0;
            $color = $s['color'] ?? 'rgba(0,0,0,0.1)';
            $inset = ( $s['position'] ?? 'outline' ) === 'inset' ? 'inset ' : '';
            $css_rules[] = "{$selector} .chart-content .bar-item { box-shadow: {$inset}{$h}px {$v}px {$blur}px {$spread}px {$color}; }";
        }

        // ============================================
        // SECTION: Bar Popup
        // ============================================

        // Popup background
        if ( ! empty( $attributes['bar_pop_bg'] ) ) {
            $css_rules[] = "{$selector} .bar-item-data { background-color: {$attributes['bar_pop_bg']}; }";
        }

        // Popup border
        if ( ! empty( $attributes['bar_pop_border_type'] ) && $attributes['bar_pop_border_type'] !== 'none' ) {
            $border_css = "border-style: {$attributes['bar_pop_border_type']};";
            if ( ! empty( $attributes['bar_pop_border_width'] ) ) {
                $w = $attributes['bar_pop_border_width'];
                $t = floatval( $w['top'] ?? 0 );
                $r = floatval( $w['right'] ?? 0 );
                $b = floatval( $w['bottom'] ?? 0 );
                $l = floatval( $w['left'] ?? 0 );
                $border_css .= " border-width: {$t}px {$r}px {$b}px {$l}px;";
            }
            if ( ! empty( $attributes['bar_pop_border_color'] ) ) {
                $border_css .= " border-color: {$attributes['bar_pop_border_color']};";
            }
            $css_rules[] = "{$selector} .bar-item-data { {$border_css} }";
        }

        // Popup radius (responsive)
        if ( isset( $attributes['bar_pop_radius'] ) && $attributes['bar_pop_radius'] !== '' ) {
            $css_rules[] = "{$selector} .bar-item-data { border-radius: {$attributes['bar_pop_radius']}px; }";
        }
        if ( isset( $attributes['bar_pop_radius_tablet'] ) && $attributes['bar_pop_radius_tablet'] !== '' ) {
            $tablet_rules[] = "{$selector} .bar-item-data { border-radius: {$attributes['bar_pop_radius_tablet']}px; }";
        }
        if ( isset( $attributes['bar_pop_radius_mobile'] ) && $attributes['bar_pop_radius_mobile'] !== '' ) {
            $mobile_rules[] = "{$selector} .bar-item-data { border-radius: {$attributes['bar_pop_radius_mobile']}px; }";
        }

        // Popup shadow
        if ( ! empty( $attributes['bar_pop_shadow'] ) && ! empty( $attributes['bar_pop_shadow']['enable'] ) ) {
            $s = $attributes['bar_pop_shadow'];
            $h = $s['horizontal'] ?? 0;
            $v = $s['vertical'] ?? 0;
            $blur = $s['blur'] ?? 0;
            $spread = $s['spread'] ?? 0;
            $color = $s['color'] ?? 'rgba(0,0,0,0.1)';
            $inset = ( $s['position'] ?? 'outline' ) === 'inset' ? 'inset ' : '';
            $css_rules[] = "{$selector} .bar-item-data { box-shadow: {$inset}{$h}px {$v}px {$blur}px {$spread}px {$color}; }";
        }

        // Popup value typography
        if ( ! empty( $attributes['ts_primary_typo'] ) ) {
            $typo = self::generate_typography_css( $attributes['ts_primary_typo'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .bar-item-data li { {$typo}; }";
            }
        }

        // Popup value color
        if ( ! empty( $attributes['ts_primary_color'] ) ) {
            $css_rules[] = "{$selector} .bar-item-data li { color: {$attributes['ts_primary_color']}; }";
        }

        // Popup label typography
        if ( ! empty( $attributes['ts_secondary_typo'] ) ) {
            $typo = self::generate_typography_css( $attributes['ts_secondary_typo'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .bar-item-data li small { {$typo}; }";
            }
        }

        // Popup label color
        if ( ! empty( $attributes['ts_secondary_color'] ) ) {
            $css_rules[] = "{$selector} .bar-item-data li small { color: {$attributes['ts_secondary_color']}; }";
        }

        // ============================================
        // SECTION: Tabs
        // ============================================

        // Tabs justify
        if ( ! empty( $attributes['ts_tabs_justify'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs { justify-content: {$attributes['ts_tabs_justify']}; }";
        }

        // Tab margin
        if ( ! empty( $attributes['ts_tabs_margin'] ) ) {
            $m = $attributes['ts_tabs_margin'];
            $unit = $m['unit'] ?? 'px';
            $t = floatval( $m['top'] ?? 0 );
            $r = floatval( $m['right'] ?? 0 );
            $b = floatval( $m['bottom'] ?? 0 );
            $l = floatval( $m['left'] ?? 0 );
            $css_rules[] = "{$selector} .ts-generic-tabs li { margin: {$t}{$unit} {$r}{$unit} {$b}{$unit} {$l}{$unit}; }";
        }

        // Tab padding
        if ( ! empty( $attributes['ts_tabs_padding'] ) ) {
            $p = $attributes['ts_tabs_padding'];
            $unit = $p['unit'] ?? 'px';
            $t = floatval( $p['top'] ?? 0 );
            $r = floatval( $p['right'] ?? 0 );
            $b = floatval( $p['bottom'] ?? 0 );
            $l = floatval( $p['left'] ?? 0 );
            $css_rules[] = "{$selector} .ts-generic-tabs li a { padding: {$t}{$unit} {$r}{$unit} {$b}{$unit} {$l}{$unit}; }";
        }

        // Tab typography
        if ( ! empty( $attributes['ts_tabs_text'] ) ) {
            $typo = self::generate_typography_css( $attributes['ts_tabs_text'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-generic-tabs li a { {$typo}; }";
            }
        }

        // Tab text color
        if ( ! empty( $attributes['ts_tabs_text_color'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li a { color: {$attributes['ts_tabs_text_color']}; }";
        }

        // Tab background
        if ( ! empty( $attributes['ts_tabs_bg_color'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li a { background-color: {$attributes['ts_tabs_bg_color']}; }";
        }

        // Tab border
        if ( ! empty( $attributes['ts_tabs_border_type'] ) && $attributes['ts_tabs_border_type'] !== 'none' ) {
            $border_css = "border-style: {$attributes['ts_tabs_border_type']};";
            if ( ! empty( $attributes['ts_tabs_border_width'] ) ) {
                $w = $attributes['ts_tabs_border_width'];
                $t = floatval( $w['top'] ?? 0 );
                $r = floatval( $w['right'] ?? 0 );
                $b = floatval( $w['bottom'] ?? 0 );
                $l = floatval( $w['left'] ?? 0 );
                $border_css .= " border-width: {$t}px {$r}px {$b}px {$l}px;";
            }
            if ( ! empty( $attributes['ts_tabs_border_color'] ) ) {
                $border_css .= " border-color: {$attributes['ts_tabs_border_color']};";
            }
            $css_rules[] = "{$selector} .ts-generic-tabs li a { {$border_css} }";
        }

        // Tab radius
        if ( isset( $attributes['ts_tabs_radius'] ) && $attributes['ts_tabs_radius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li a { border-radius: {$attributes['ts_tabs_radius']}px; }";
        }

        // Active tab typography
        if ( ! empty( $attributes['ts_tabs_text_active'] ) ) {
            $typo = self::generate_typography_css( $attributes['ts_tabs_text_active'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-generic-tabs li.ts-tab-active a { {$typo}; }";
            }
        }

        // Active text color
        if ( ! empty( $attributes['ts_active_text_color'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li.ts-tab-active a { color: {$attributes['ts_active_text_color']}; }";
        }

        // Active background
        if ( ! empty( $attributes['ts_tabs_bg_active_color'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li.ts-tab-active a { background-color: {$attributes['ts_tabs_bg_active_color']}; }";
        }

        // Active border color
        if ( ! empty( $attributes['ts_tabs_border_active'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li.ts-tab-active a { border-color: {$attributes['ts_tabs_border_active']}; }";
        }

        // Hover states
        if ( ! empty( $attributes['ts_tabs_text_color_h'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li a:hover { color: {$attributes['ts_tabs_text_color_h']}; }";
        }
        if ( ! empty( $attributes['ts_tabs_border_color_h'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li a:hover { border-color: {$attributes['ts_tabs_border_color_h']}; }";
        }
        if ( ! empty( $attributes['ts_tabs_bg_color_h'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li a:hover { background-color: {$attributes['ts_tabs_bg_color_h']}; }";
        }

        // Active hover
        if ( ! empty( $attributes['ts_tabs_active_text_color_h'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li.ts-tab-active a:hover { color: {$attributes['ts_tabs_active_text_color_h']}; }";
        }
        if ( ! empty( $attributes['ts_tabs_border_h_active'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li.ts-tab-active a:hover { border-color: {$attributes['ts_tabs_border_h_active']}; }";
        }
        if ( ! empty( $attributes['ts_bg_active_color_h'] ) ) {
            $css_rules[] = "{$selector} .ts-generic-tabs li.ts-tab-active a:hover { background-color: {$attributes['ts_bg_active_color_h']}; }";
        }

        // ============================================
        // SECTION: Week Buttons
        // ============================================

        // Range typography
        if ( ! empty( $attributes['week_range_typo'] ) ) {
            $typo = self::generate_typography_css( $attributes['week_range_typo'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-chart-nav p { {$typo}; }";
            }
        }

        // Range color
        if ( ! empty( $attributes['week_range_col'] ) ) {
            $css_rules[] = "{$selector} .ts-chart-nav p { color: {$attributes['week_range_col']}; }";
        }

        // Button icon color
        if ( ! empty( $attributes['ts_week_btn_color'] ) ) {
            $css_rules[] = "{$selector} .ts-chart-nav .ts-icon-btn i { color: {$attributes['ts_week_btn_color']}; }";
            $css_rules[] = "{$selector} .ts-chart-nav .ts-icon-btn svg { fill: {$attributes['ts_week_btn_color']}; }";
        }

        // Button icon size
        if ( isset( $attributes['ts_week_btn_icon_size'] ) && $attributes['ts_week_btn_icon_size'] !== '' ) {
            $css_rules[] = "{$selector} .ts-chart-nav .ts-icon-btn i { font-size: {$attributes['ts_week_btn_icon_size']}px; }";
            $css_rules[] = "{$selector} .ts-chart-nav .ts-icon-btn svg { width: {$attributes['ts_week_btn_icon_size']}px; height: {$attributes['ts_week_btn_icon_size']}px; }";
        }

        // Button size
        if ( isset( $attributes['ts_week_btn_size'] ) && $attributes['ts_week_btn_size'] !== '' ) {
            $css_rules[] = "{$selector} .ts-chart-nav .ts-icon-btn { width: {$attributes['ts_week_btn_size']}px; height: {$attributes['ts_week_btn_size']}px; min-width: {$attributes['ts_week_btn_size']}px; }";
        }

        // Button background
        if ( ! empty( $attributes['ts_week_btn_bg'] ) ) {
            $css_rules[] = "{$selector} .ts-chart-nav .ts-icon-btn { background-color: {$attributes['ts_week_btn_bg']}; }";
        }

        // Button border
        if ( ! empty( $attributes['ts_week_btn_border_type'] ) && $attributes['ts_week_btn_border_type'] !== 'none' ) {
            $border_css = "border-style: {$attributes['ts_week_btn_border_type']};";
            if ( ! empty( $attributes['ts_week_btn_border_width'] ) ) {
                $w = $attributes['ts_week_btn_border_width'];
                $t = floatval( $w['top'] ?? 0 );
                $r = floatval( $w['right'] ?? 0 );
                $b = floatval( $w['bottom'] ?? 0 );
                $l = floatval( $w['left'] ?? 0 );
                $border_css .= " border-width: {$t}px {$r}px {$b}px {$l}px;";
            }
            if ( ! empty( $attributes['ts_week_btn_border_color'] ) ) {
                $border_css .= " border-color: {$attributes['ts_week_btn_border_color']};";
            }
            $css_rules[] = "{$selector} .ts-chart-nav .ts-icon-btn { {$border_css} }";
        }

        // Button radius
        if ( isset( $attributes['ts_week_btn_radius'] ) && $attributes['ts_week_btn_radius'] !== '' ) {
            $css_rules[] = "{$selector} .ts-chart-nav .ts-icon-btn { border-radius: {$attributes['ts_week_btn_radius']}px; }";
        }

        // Hover states
        if ( ! empty( $attributes['ts_week_btn_h'] ) ) {
            $css_rules[] = "{$selector} .ts-chart-nav .ts-icon-btn:hover i { color: {$attributes['ts_week_btn_h']}; }";
            $css_rules[] = "{$selector} .ts-chart-nav .ts-icon-btn:hover svg { fill: {$attributes['ts_week_btn_h']}; }";
        }
        if ( ! empty( $attributes['ts_week_btn_bg_h'] ) ) {
            $css_rules[] = "{$selector} .ts-chart-nav .ts-icon-btn:hover { background-color: {$attributes['ts_week_btn_bg_h']}; }";
        }
        if ( ! empty( $attributes['ts_week_border_c_h'] ) ) {
            $css_rules[] = "{$selector} .ts-chart-nav .ts-icon-btn:hover { border-color: {$attributes['ts_week_border_c_h']}; }";
        }

        // ============================================
        // SECTION: No Activity
        // ============================================

        // Content gap
        if ( isset( $attributes['ts_nopost_content_Gap'] ) && $attributes['ts_nopost_content_Gap'] !== '' ) {
            $css_rules[] = "{$selector} .ts-no-posts { grid-gap: {$attributes['ts_nopost_content_Gap']}px; }";
        }

        // Icon size
        if ( isset( $attributes['ts_nopost_ico_size'] ) && $attributes['ts_nopost_ico_size'] !== '' ) {
            $css_rules[] = "{$selector} .ts-no-posts i, {$selector} .ts-no-posts svg { font-size: {$attributes['ts_nopost_ico_size']}px; width: {$attributes['ts_nopost_ico_size']}px; height: {$attributes['ts_nopost_ico_size']}px; }";
        }

        // Icon color
        if ( ! empty( $attributes['ts_nopost_ico_col'] ) ) {
            $css_rules[] = "{$selector} .ts-no-posts i, {$selector} .ts-no-posts svg { color: {$attributes['ts_nopost_ico_col']}; fill: {$attributes['ts_nopost_ico_col']}; }";
        }

        // Typography
        if ( ! empty( $attributes['ts_nopost_typo'] ) ) {
            $typo = self::generate_typography_css( $attributes['ts_nopost_typo'] );
            if ( $typo ) {
                $css_rules[] = "{$selector} .ts-no-posts p { {$typo}; }";
            }
        }

        // Text color
        if ( ! empty( $attributes['ts_nopost_typo_col'] ) ) {
            $css_rules[] = "{$selector} .ts-no-posts p { color: {$attributes['ts_nopost_typo_col']}; }";
        }

        // ============================================
        // Combine CSS with media queries
        // ============================================
        $final_css = '';
        if ( ! empty( $css_rules ) ) {
            $final_css .= implode( "\n", $css_rules );
        }
        if ( ! empty( $tablet_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::TABLET_BREAKPOINT . "px) {\n" . implode( "\n", $tablet_rules ) . "\n}";
        }
        if ( ! empty( $mobile_rules ) ) {
            $final_css .= "\n@media (max-width: " . self::MOBILE_BREAKPOINT . "px) {\n" . implode( "\n", $mobile_rules ) . "\n}";
        }

        return $final_css;
    }
}
