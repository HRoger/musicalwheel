var VoxelFSEWorkHours=(function(b,C){"use strict";function x(e,t){return e&&e.value?e.library==="svg"?e.value.startsWith("<svg")||e.value.startsWith("<?xml")?React.createElement("span",{className:"ts-icon-svg",dangerouslySetInnerHTML:{__html:e.value}}):React.createElement("img",{src:e.value,alt:"",className:"ts-icon-svg"}):React.createElement("i",{className:e.value}):null}const T=()=>{const e={mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday",sun:"Sunday"},t={mon:{status:"hours",hours:[{from:"09:00",to:"17:00"}]},tue:{status:"hours",hours:[{from:"09:00",to:"17:00"}]},wed:{status:"hours",hours:[{from:"09:00",to:"17:00"}]},thu:{status:"hours",hours:[{from:"09:00",to:"17:00"}]},fri:{status:"hours",hours:[{from:"09:00",to:"17:00"}]},sat:{status:"closed"},sun:{status:"closed"}},r="mon",o=!0,c=new Date().toLocaleString();return{weekdays:e,schedule:t,today:r,isOpenNow:o,localTime:c}},B="M2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12.75 6.49996C12.75 6.08575 12.4141 5.74998 11.9999 5.75C11.5857 5.75002 11.25 6.08582 11.25 6.50004L11.2502 11.25H8.00024C7.58603 11.25 7.25024 11.5858 7.25024 12C7.25024 12.4142 7.58603 12.75 8.00024 12.75H12.0002C12.1992 12.75 12.3899 12.671 12.5306 12.5303C12.6712 12.3897 12.7503 12.1989 12.7502 12L12.75 6.49996Z",E="M12.7461 3.99951C12.7461 3.5853 12.4103 3.24951 11.9961 3.24951C11.5819 3.24951 11.2461 3.5853 11.2461 3.99951L11.2461 13.2548H6.00002C5.69663 13.2548 5.42312 13.4376 5.30707 13.7179C5.19101 13.9982 5.25526 14.3208 5.46986 14.5353L11.4228 20.4844C11.5604 20.6474 11.7662 20.7509 11.9961 20.7509C12.0038 20.7509 12.0114 20.7508 12.019 20.7505C12.2045 20.7458 12.3884 20.6727 12.53 20.5313L18.5302 14.5353C18.7448 14.3208 18.809 13.9982 18.693 13.7179C18.5769 13.4376 18.3034 13.2548 18 13.2548H12.7461L12.7461 3.99951Z",f=(e,t)=>{if(t)return t;const[r,o]=e.split(":"),c=parseInt(r,10),n=c>=12?"PM":"AM";return`${c%12||12}:${o} ${n}`};function R({attributes:e,scheduleData:t,isOpenNow:r,weekdays:o,today:c,localTime:n,isPreview:a=!1}){const s=C.useRef(null),[y,z]=C.useState(e.collapse==="wh-expanded"),w=a?T():{},v=t||w.schedule,I=r!==void 0?r:w.isOpenNow,L=o||w.weekdays,A=c||w.today,M=n||w.localTime,O=i=>{i.preventDefault(),z(!y)},l=v?.[A];let p="not-available",d=e.notAvailableIcon,_=e.notAvailableText,u=e.notAvailableIconColor;e.notAvailableTextColor,l&&(l.status==="hours"&&I?(p="open",d=e.openIcon,_=e.openText,u=e.openIconColor,e.openTextColor):l.status==="hours"&&!I?(p="closed",d=e.closedIcon,_=e.closedText,u=e.closedIconColor,e.closedTextColor):l.status==="open"?(p="open",d=e.openIcon,_=e.openText,u=e.openIconColor,e.openTextColor):l.status==="closed"?(p="closed",d=e.closedIcon,_=e.closedText,u=e.closedIconColor,e.closedTextColor):l.status==="appointments_only"&&(p="appt-only",d=e.appointmentIcon,_=e.appointmentText,u=e.appointmentIconColor,e.appointmentTextColor));const P=()=>{if(!l)return"Not available";switch(l.status){case"open":return"Open all day";case"closed":return"Closed all day";case"appointments_only":return"Appointments only";case"hours":return!l.hours||l.hours.length===0?"Closed all day":l.hours.map(i=>`${f(i.from,i.fromFormatted)} - ${f(i.to,i.toFormatted)}`).join(", ");default:return"Not available"}},$=["ts-work-hours",e.collapse||"wh-default",y?"active":""].filter(Boolean).join(" ");return React.createElement("div",{ref:s},React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify({attributes:e,postId:window.__post_id,fieldKey:e.sourceField})}}),React.createElement("div",{className:$},React.createElement("div",{className:"ts-hours-today flexify"},React.createElement("div",{className:`flexify ts-open-status ${p}`},d&&d.value?x(d):React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},React.createElement("path",{d:B,fill:u||"#343C54"})),React.createElement("p",null,_)),React.createElement("p",{className:"ts-current-period"},React.createElement("span",null,P())),React.createElement("a",{href:"#",className:"ts-expand-hours ts-icon-btn ts-smaller vx-event-expand",onClick:O,style:y?{transform:"rotate(180deg)"}:void 0},e.downIcon&&e.downIcon.value?x(e.downIcon):React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:E,fill:e.accordionButtonColor||"#343C54"})))),React.createElement("div",{className:"ts-work-hours-list"},React.createElement("ul",{className:"simplify-ul flexify"},Object.entries(L||{}).map(([i,j])=>{const m=v?.[i],D=()=>{if(!m)return"Not available";switch(m.status){case"open":return"Open all day";case"closed":return"Closed all day";case"appointments_only":return"Appointments only";case"hours":return!m.hours||m.hours.length===0?"Closed all day":m.hours.map(g=>`${f(g.from,g.fromFormatted)} - ${f(g.to,g.toFormatted)}`).join(", ");default:return"Not available"}};return React.createElement("li",{key:i},React.createElement("p",{className:"ts-day"},j),React.createElement("small",{className:"ts-hours"},React.createElement("span",null,D())))}),React.createElement("li",null,React.createElement("p",{className:"ts-timezone"},"Local time "),React.createElement("small",null,React.createElement("span",null,M||new Date().toLocaleTimeString())))))))}function k(){if(typeof window<"u"&&window.wpApiSettings?.root)return window.wpApiSettings.root;if(typeof document<"u"){const e=document.querySelector('link[rel="https://api.w.org/"]');if(e){const t=e.getAttribute("href");if(t)return t}}if(typeof window<"u"&&window.location?.origin){const e=window.location.pathname.split("/").filter(Boolean),t=["wp-admin","wp-content","wp-includes","wp-json"];return e.length>0&&!t.includes(e[0])?window.location.origin+"/"+e[0]+"/wp-json/":window.location.origin+"/wp-json/"}return"/wp-json/"}function N(e){const t=(n,a)=>typeof n=="string"?n:typeof n=="number"?String(n):a,r=(n,a)=>{if(typeof n=="number")return n;if(typeof n=="string"){const s=parseInt(n,10);if(!isNaN(s))return s}return a},o=e.attributes??{};return{attributes:{blockId:t(o.blockId??o.block_id,""),fieldKey:t(o.fieldKey??o.field_key??o.ts_source_field,""),collapseMode:t(o.collapseMode??o.collapse_mode??o.ts_wh_collapse,"full"),wrapperBorder:o.wrapperBorder??o.wrapper_border??o.wh_wrapper_border,wrapperBorderRadius:o.wrapperBorderRadius??o.wrapper_border_radius??o.wh_wrapper_border_radius,wrapperShadow:o.wrapperShadow??o.wrapper_shadow??o.wh_wrapper_shadow,statusBg:t(o.statusBg??o.status_bg??o.wh_status_bg,""),statusIconSize:o.statusIconSize??o.status_icon_size??o.wh_status_icon_size,labelTypo:o.labelTypo??o.label_typo??o.wh_status_label_typo,labelColor:t(o.labelColor??o.label_color??o.wh_status_label_color,""),currentHoursTypo:o.currentHoursTypo??o.current_hours_typo??o.wh_current_hours_typo,currentHoursColor:t(o.currentHoursColor??o.current_hours_color??o.wh_current_hours_color,""),topPadding:o.topPadding??o.top_padding??o.wh_top_padding,bodyBg:t(o.bodyBg??o.body_bg??o.wh_body_bg,""),separatorColor:t(o.separatorColor??o.separator_color??o.wh_separator_color,""),dayTypo:o.dayTypo??o.day_typo??o.wh_day_typo,dayColor:t(o.dayColor??o.day_color??o.wh_day_color,""),hoursTypo:o.hoursTypo??o.hours_typo??o.wh_hours_typo,hoursColor:t(o.hoursColor??o.hours_color??o.wh_hours_color,""),bodyPadding:o.bodyPadding??o.body_padding??o.wh_body_padding,openIcon:o.openIcon??o.open_icon??o.wh_open_icon,openText:t(o.openText??o.open_text??o.wh_open_text,"Open now"),openIconColor:t(o.openIconColor??o.open_icon_color??o.wh_open_icon_color,""),openTextColor:t(o.openTextColor??o.open_text_color??o.wh_open_text_color,""),openBg:t(o.openBg??o.open_bg??o.wh_open_bg,""),closedIcon:o.closedIcon??o.closed_icon??o.wh_closed_icon,closedText:t(o.closedText??o.closed_text??o.wh_closed_text,"Closed now"),closedIconColor:t(o.closedIconColor??o.closed_icon_color??o.wh_closed_icon_color,""),closedTextColor:t(o.closedTextColor??o.closed_text_color??o.wh_closed_text_color,""),closedBg:t(o.closedBg??o.closed_bg??o.wh_closed_bg,""),appointmentIcon:o.appointmentIcon??o.appointment_icon??o.wh_appointment_icon,appointmentText:t(o.appointmentText??o.appointment_text??o.wh_appointment_text,"By appointment only"),appointmentIconColor:t(o.appointmentIconColor??o.appointment_icon_color??o.wh_appointment_icon_color,""),appointmentTextColor:t(o.appointmentTextColor??o.appointment_text_color??o.wh_appointment_text_color,""),appointmentBg:t(o.appointmentBg??o.appointment_bg??o.wh_appointment_bg,""),naIcon:o.naIcon??o.na_icon??o.wh_na_icon,naText:t(o.naText??o.na_text??o.wh_na_text,""),naIconColor:t(o.naIconColor??o.na_icon_color??o.wh_na_icon_color,""),naTextColor:t(o.naTextColor??o.na_text_color??o.wh_na_text_color,""),naBg:t(o.naBg??o.na_bg??o.wh_na_bg,""),downIcon:o.downIcon??o.down_icon??o.wh_down_icon,accBtnSize:o.accBtnSize??o.acc_btn_size??o.wh_acc_btn_size,accBtnIconSize:o.accBtnIconSize??o.acc_btn_icon_size??o.wh_acc_btn_icon_size,accBtnIconColor:t(o.accBtnIconColor??o.acc_btn_icon_color??o.wh_acc_btn_icon_color,""),accBtnIconColorHover:t(o.accBtnIconColorHover??o.acc_btn_icon_color_hover??o.wh_acc_btn_icon_color_hover,""),accBtnBg:t(o.accBtnBg??o.acc_btn_bg??o.wh_acc_btn_bg,""),accBtnBgHover:t(o.accBtnBgHover??o.acc_btn_bg_hover??o.wh_acc_btn_bg_hover,""),accBtnBorder:o.accBtnBorder??o.acc_btn_border??o.wh_acc_btn_border,accBtnBorderHover:o.accBtnBorderHover??o.acc_btn_border_hover??o.wh_acc_btn_border_hover,accBtnBorderRadius:o.accBtnBorderRadius??o.acc_btn_border_radius??o.wh_acc_btn_border_radius},postId:r(e.postId??e.post_id,0),fieldKey:t(e.fieldKey??e.field_key??o.fieldKey??o.field_key,"")}}function S(e){const t=e.querySelector("script.vxconfig");if(t&&t.textContent)try{const r=JSON.parse(t.textContent);return N(r)}catch(r){return console.error("Failed to parse vxconfig:",r),null}return null}async function H(e,t){try{const r=k(),o={},c=window.wpApiSettings?.nonce;c&&(o["X-WP-Nonce"]=c);const n=await fetch(`${r}voxel-fse/v1/work-hours/${e}?field=${encodeURIComponent(t)}`,{credentials:"same-origin",headers:o});return n.ok?await n.json():(console.error("Failed to fetch work-hours data:",n.statusText),null)}catch(r){return console.error("Error fetching work-hours data:",r),null}}function h(){document.querySelectorAll(".wp-block-voxel-fse-work-hours").forEach(t=>{if(t.dataset.reactMounted==="true")return;const r=S(t);if(!r){console.warn("No vxconfig found for work-hours block");return}const{attributes:o,postId:c,fieldKey:n}=r;let a=t.querySelector(".voxel-fse-work-hours-placeholder");if(a||(a=document.createElement("div"),a.className="voxel-fse-work-hours-placeholder",t.appendChild(a)),c&&n)H(c,n).then(s=>{s&&(b.createRoot(a).render(React.createElement(R,{attributes:o,scheduleData:s.schedule,isOpenNow:s.isOpenNow,weekdays:s.weekdays,today:s.today,localTime:s.localTime,isPreview:!1})),t.dataset.reactMounted="true")}).catch(s=>{console.error("Failed to initialize work-hours block:",s)});else return})}return document.readyState==="loading"?document.addEventListener("DOMContentLoaded",h):h(),window.Turbo&&document.addEventListener("turbo:load",h),document.addEventListener("voxel:blocks:init",h),h})(ReactDOM,React);
