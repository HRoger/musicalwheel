(function(kr,e,Pe){"use strict";const _r=({field:t,value:n,onChange:r,onBlur:s})=>{const[l,o]=e.useState(""),a=t.props?.suffix!==void 0?String(t.props.suffix):void 0,i=t.props?.pattern,c=m=>{if(r(m),m&&m.length>0){const f=Number(t.props?.minlength??0),p=Number(t.props?.maxlength??0);if(f&&m.length<f)o(`Value cannot be shorter than ${f} characters`);else if(p&&m.length>p)o(`Value cannot be longer than ${p} characters`);else if(i)try{new RegExp(i).test(m)?o(""):o("Please enter a value in the correct format")}catch{o("")}else o("")}else o("")},u=t.validation?.errors?.[0]||l,d=u.length>0;return e.createElement("div",{className:`ts-form-group field-key-${t.key} ${d?"ts-has-errors":""} ${t.css_class||""} ${t.hidden?"hidden":""}`},e.createElement("label",null,t.label,d?e.createElement("span",{className:"is-required"},u):!t.required&&e.createElement("span",{className:"is-required"},"Optional"),t.description&&e.createElement("div",{className:"vx-dialog"},e.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M8 0C3.6 0 0 3.6 0 8C0 12.4 3.6 16 8 16C12.4 16 16 12.4 16 8C16 3.6 12.4 0 8 0ZM8 12C7.4 12 7 11.6 7 11C7 10.4 7.4 10 8 10C8.6 10 9 10.4 9 11C9 11.6 8.6 12 8 12ZM9 9H7V4H9V9Z",fill:"currentColor"})),e.createElement("div",{className:"vx-dialog-content min-scroll"},e.createElement("p",null,t.description)))),e.createElement("div",{className:"input-container"},e.createElement("input",{type:"text",className:"ts-filter",value:n||"",onChange:m=>c(m.target.value),onBlur:s,placeholder:String(t.props?.placeholder??t.placeholder??t.label??""),required:t.required,title:t.label}),a&&e.createElement("span",{className:"input-suffix"},String(a))))},we=()=>e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},e.createElement("path",{d:"M2 12.3906C2 6.86778 6.47715 2.39062 12 2.39062C17.5228 2.39062 22 6.86778 22 12.3906C22 17.9135 17.5228 22.3906 12 22.3906C6.47715 22.3906 2 17.9135 2 12.3906ZM11.9993 9.96045C12.4964 9.96045 12.9001 9.5575 12.9001 9.06045C12.9001 8.56339 12.4971 8.16045 12.0001 8.16045C11.503 8.16045 11.0993 8.56339 11.0993 9.06045C11.0993 9.5575 11.5023 9.96045 11.9993 9.96045ZM11.2501 15.8298C11.2501 16.244 11.5859 16.5798 12.0001 16.5798C12.4143 16.5798 12.7501 16.244 12.7501 15.8298V11.6054C12.7501 11.1912 12.4143 10.8554 12.0001 10.8554C11.5858 10.8554 11.2501 11.1912 11.2501 11.6054V15.8298Z",fill:"#343C54"})),Sr=({field:t,value:n,onChange:r,onBlur:s})=>{const l=e.useRef(null),o=e.useRef(null),a=e.useRef(null),[i,c]=e.useState(null),u=e.useRef(`texteditor-${t.key}-${Math.random().toString(36).substr(2,9)}`),[d,m]=e.useState(""),f=t.props?.editorType||"plain-text",p=f==="plain-text",h=f==="wp-editor-basic",v=f==="wp-editor-advanced",x=(()=>{if(p)return n?n.length:0;const w=document.createElement("div");return w.innerHTML=n||"",w.textContent?.length||0})(),_=t.props?.maxlength,C=w=>{if(w&&w.length>0){const E=t.props?.minlength,T=t.props?.maxlength;let b;if(p)b=w.length;else{const N=document.createElement("div");N.innerHTML=w,b=N.textContent?.length||0}E&&b<Number(E)?m(`Value cannot be shorter than ${E} characters`):T&&b>Number(T)?m(`Value cannot be longer than ${T} characters`):m("")}else m("")},D=()=>{if(!p||!o.current||!a.current)return;const w=o.current,E=a.current;E.value=w.value;const T=E.scrollHeight;w.style.height=`${T}px`};e.useEffect(()=>{if(p||!l.current)return;const w=()=>{const b=window.wp,N=b?.oldEditor||b?.editor;if(!N){console.warn("WordPress editor API is not loaded. Make sure WordPress editor assets are enqueued.");return}const M=u.current;l.current&&(l.current.innerHTML=n||"");const F={wpautop:!0,paste_as_text:!1,paste_auto_cleanup_on_paste:!0,paste_remove_spans:!0,paste_remove_styles:!0,paste_remove_styles_if_webkit:!0,paste_strip_class_attributes:!0,autoresize_min_height:150,autoresize_max_height:800,wp_autoresize_on:!0,content_style:`
					body > :first-child { margin-top: 0; }
					body > :last-child { margin-bottom: 0; }
					a[data-wplink-url-error], a[data-wplink-url-error]:hover, a[data-wplink-url-error]:focus {
						outline: none;
					}
				`};h&&(F.plugins="lists,paste,tabfocus,wplink,wordpress,wpautoresize",F.toolbar="bold,italic,bullist,numlist,link,unlink"),v&&(F.plugins="lists,paste,tabfocus,wplink,wordpress,colorpicker,hr,wpautoresize",F.toolbar="formatselect,bold,italic,bullist,numlist,link,unlink,strikethrough,alignleft,aligncenter,alignright,underline,hr"),N.remove(M),N.initialize(M,{tinymce:F,quicktags:!1,mediaButtons:!1});const q=setInterval(()=>{if(window.tinymce){const I=window.tinymce.get(M);I&&(clearInterval(q),c(I),I.on("change",(L=>{const j=L.target?.getContent?.()||I.getContent();r(j),C(j)})),I.on("keyup",()=>{I.save()}),I.on("input",()=>{I.save()}),I.on("blur",()=>{s&&s()}))}},100);setTimeout(()=>clearInterval(q),5e3)},E=window.wp;if(E?.oldEditor||E?.editor)w();else{const b=setInterval(()=>{const N=window.wp;(N?.oldEditor||N?.editor)&&(clearInterval(b),w())},100);setTimeout(()=>clearInterval(b),5e3)}return()=>{const b=u.current,N=window.wp,M=N?.oldEditor||N?.editor;M&&M.remove(b)}},[p,h,v]),e.useEffect(()=>{p&&D()},[n,p]);const g=w=>{const E=w.target.value;r(E),C(E),D()},S=t.validation?.errors?.[0]||d,A=S.length>0;return e.createElement("div",{className:`ts-form-group field-key-${t.key} ${A?"ts-has-errors":""} ${t.css_class||""} ${t.hidden?"hidden":""}`},e.createElement("label",null,t.label,A?e.createElement("span",{className:"is-required"},S):e.createElement(e.Fragment,null,!t.required&&x===0&&e.createElement("span",{className:"is-required"},"Optional"),_&&x>0&&e.createElement("span",{className:"is-required ts-char-counter"},x,"/",String(_))),t.description&&e.createElement("div",{className:"vx-dialog"},e.createElement(we,null),e.createElement("div",{className:"vx-dialog-content min-scroll"},e.createElement("p",null,t.description)))),p&&e.createElement(e.Fragment,null,e.createElement("textarea",{ref:o,value:n||"",onChange:g,onBlur:s,placeholder:String(t.props?.placeholder??t.placeholder??""),className:"ts-filter",required:t.required}),e.createElement("textarea",{ref:a,className:"ts-filter",disabled:!0,style:{height:"5px",position:"fixed",top:"-9999px",left:"-9999px",visibility:"hidden"},"aria-hidden":"true",tabIndex:-1})),!p&&e.createElement("div",{ref:l,id:u.current,className:"editor-container mce-content-body"},n||""))};function me(t,n=""){return!t||!t.value?n:t.library==="icon"?`<i aria-hidden="true" class="${t.value}"></i>`:t.library==="svg"?`<img src="${t.value}" alt="" style="width: 24px; height: 24px;" aria-hidden="true" />`:n}const ln='<svg width="80" height="80" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" transform="rotate(0 0 0)"><path d="M2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12.75 6.49996C12.75 6.08575 12.4141 5.74998 11.9999 5.75C11.5857 5.75002 11.25 6.08582 11.25 6.50004L11.2502 11.25H8.00024C7.58603 11.25 7.25024 11.5858 7.25024 12C7.25024 12.4142 7.58603 12.75 8.00024 12.75H12.0002C12.1992 12.75 12.3899 12.671 12.5306 12.5303C12.6712 12.3897 12.7503 12.1989 12.7502 12L12.75 6.49996Z" fill="#343C54"/></svg>',ft='<svg width="80" height="80" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg" transform="rotate(0 0 0)"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.25 2.75C6.14154 2.75 2 6.89029 2 11.998C2 17.1056 6.14154 21.2459 11.25 21.2459C13.5335 21.2459 15.6238 20.4187 17.2373 19.0475L20.7182 22.5287C21.011 22.8216 21.4859 22.8217 21.7788 22.5288C22.0717 22.2359 22.0718 21.761 21.7789 21.4681L18.2983 17.9872C19.6714 16.3736 20.5 14.2826 20.5 11.998C20.5 6.89029 16.3585 2.75 11.25 2.75ZM3.5 11.998C3.5 7.71905 6.96962 4.25 11.25 4.25C15.5304 4.25 19 7.71905 19 11.998C19 16.2769 15.5304 19.7459 11.25 19.7459C6.96962 19.7459 3.5 16.2769 3.5 11.998Z" fill="#343C54"/></svg>',Mr='<svg width="80" height="80" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" transform="rotate(0 0 0)"><path d="M8.75 2.75C8.75 2.33579 8.41421 2 8 2C7.58579 2 7.25 2.33579 7.25 2.75V3.75H5.5C4.25736 3.75 3.25 4.75736 3.25 6V8.25H20.75V6C20.75 4.75736 19.7426 3.75 18.5 3.75H16.75V2.75C16.75 2.33579 16.4142 2 16 2C15.5858 2 15.25 2.33579 15.25 2.75V3.75H8.75V2.75Z" fill="#343C54"/><path d="M3.25 19V9.75H20.75V19C20.75 20.2426 19.7426 21.25 18.5 21.25H5.5C4.25736 21.25 3.25 20.2426 3.25 19ZM7.98438 11.95C7.54255 11.95 7.18438 12.3082 7.18438 12.75C7.18438 13.1918 7.54255 13.55 7.98438 13.55H7.99438C8.4362 13.55 8.79437 13.1918 8.79437 12.75C8.79437 12.3082 8.4362 11.95 7.99438 11.95H7.98438ZM11.9941 11.95C11.5523 11.95 11.1941 12.3082 11.1941 12.75C11.1941 13.1918 11.5523 13.55 11.9941 13.55H12.0041C12.446 13.55 12.8041 13.1918 12.8041 12.75C12.8041 12.3082 12.446 11.95 12.0041 11.95H11.9941ZM16.0039 11.95C15.5621 11.95 15.2039 12.3082 15.2039 12.75C15.2039 13.1918 15.5621 13.55 16.0039 13.55H16.0139C16.4557 13.55 16.8139 13.1918 16.8139 12.75C16.8139 12.3082 16.4557 11.95 16.0139 11.95H16.0039ZM7.98438 15.95C7.54255 15.95 7.18438 16.3082 7.18438 16.75C7.18438 17.1918 7.54255 17.55 7.98438 17.55H7.99438C8.4362 17.55 8.79437 17.1918 8.79437 16.75C8.79437 16.3082 8.4362 15.95 7.99438 15.95H7.98438ZM11.9941 15.95C11.5523 15.95 11.1941 16.3082 11.1941 16.75C11.1941 17.1918 11.5523 17.55 11.9941 17.55H12.0041C12.446 17.55 12.8041 17.1918 12.8041 16.75C12.8041 16.3082 12.446 15.95 12.0041 15.95H11.9941ZM16.0039 15.95C15.5621 15.95 15.2039 16.3082 15.2039 16.75C15.2039 17.1918 15.5621 17.55 16.0039 17.55H16.0139C16.4557 17.55 16.8139 17.1918 16.8139 16.75C16.8139 16.3082 16.4557 15.95 16.0139 15.95H16.0039Z" fill="#343C54"/></svg>',Ir='<svg width="80" height="80" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" transform="rotate(0 0 0)"><path d="M12.7461 3.99951C12.7461 3.5853 12.4103 3.24951 11.9961 3.24951C11.5819 3.24951 11.2461 3.5853 11.2461 3.99951L11.2461 13.2548H6.00002C5.69663 13.2548 5.42312 13.4376 5.30707 13.7179C5.19101 13.9982 5.25526 14.3208 5.46986 14.5353L11.4228 20.4844C11.5604 20.6474 11.7662 20.7509 11.9961 20.7509C12.0038 20.7509 12.0114 20.7508 12.019 20.7505C12.2045 20.7458 12.3884 20.6727 12.53 20.5313L18.5302 14.5353C18.7448 14.3208 18.809 13.9982 18.693 13.7179C18.5769 13.4376 18.3034 13.2548 18 13.2548H12.7461L12.7461 3.99951Z" fill="#343C54"/></svg>',on='<svg width="80" height="80" viewBox="0 0 25 24" xmlns="http://www.w3.org/2000/svg" transform="rotate(0 0 0)"><path d="M3.5625 6C3.5625 5.58579 3.89829 5.25 4.3125 5.25H20.3125C20.7267 5.25 21.0625 5.58579 21.0625 6C21.0625 6.41421 20.7267 6.75 20.3125 6.75L4.3125 6.75C3.89829 6.75 3.5625 6.41422 3.5625 6Z"/><path d="M3.5625 18C3.5625 17.5858 3.89829 17.25 4.3125 17.25L20.3125 17.25C20.7267 17.25 21.0625 17.5858 21.0625 18C21.0625 18.4142 20.7267 18.75 20.3125 18.75L4.3125 18.75C3.89829 18.75 3.5625 18.4142 3.5625 18Z"/><path d="M4.3125 11.25C3.89829 11.25 3.5625 11.5858 3.5625 12C3.5625 12.4142 3.89829 12.75 4.3125 12.75L20.3125 12.75C20.7267 12.75 21.0625 12.4142 21.0625 12C21.0625 11.5858 20.7267 11.25 20.3125 11.25L4.3125 11.25Z"/></svg>',Lr='<svg width="80" height="80" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" transform="rotate(0 0 0)"><path d="M8.44505 4.01545C7.69841 2.37284 5.54096 1.98162 4.2651 3.25746L3.1969 4.32559C2.67056 4.85191 2.39683 5.6117 2.53555 6.38117C2.90066 8.40653 3.60119 10.3839 4.63739 12.2237C5.45607 13.6773 6.48379 15.0442 7.71982 16.2802C8.95586 17.5163 10.3227 18.544 11.7764 19.3627C13.6162 20.3989 15.5936 21.0994 17.6189 21.4645C18.3884 21.6032 19.1482 21.3295 19.6745 20.8032L20.7427 19.735C22.0185 18.4592 21.6273 16.3017 19.9847 15.555L16.4179 13.9338C15.9032 13.6998 15.2898 13.646 14.734 13.7735C14.1735 13.902 13.5945 14.2368 13.2766 14.8569L11.841 17.6571C10.7543 16.9778 9.72637 16.1655 8.78048 15.2196C7.8346 14.2737 7.02225 13.2458 6.34302 12.1591L9.14316 10.7236C9.76326 10.4057 10.0981 9.82666 10.2266 9.26608C10.3541 8.71028 10.3003 8.09692 10.0663 7.58226L8.44505 4.01545Z" fill="#343C54"/></svg>',Dr='<svg width="80" height="80" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" transform="rotate(0 0 0)"><path d="M3.73592 4.5C2.77726 4.5 2.00014 5.27724 2.00031 6.2359L2.00031 6.26829C2.01064 6.81904 2.28199 7.33272 2.732 7.65165L2.74287 7.65929L10.7131 13.2171C11.3897 13.689 12.2609 13.7479 12.9861 13.3941C13.0897 13.3435 13.1904 13.2845 13.287 13.2171L21.2569 7.65949C21.7225 7.33485 21.9999 6.8031 21.9998 6.23554C21.9997 5.27702 21.2229 4.5 20.2644 4.5H3.73592Z" fill="#343C54"/><path d="M22.0001 8.96994L14.145 14.4475C12.8562 15.3462 11.1438 15.3462 9.85507 14.4475L2.00023 8.97012L2 17.25C2 18.4926 3.00736 19.5 4.25 19.5H19.75C20.9926 19.5 22 18.4926 22 17.25L22.0001 8.96994Z" fill="#343C54"/></svg>',Ar='<svg width="80" height="80" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg" transform="rotate(0 0 0)"><path d="M12.4889 2.92383C8.95113 2.92383 6.08319 5.79177 6.08319 9.32956C6.08319 11.6495 6.94359 13.7621 7.97903 15.4696C9.01631 17.18 10.2563 18.5287 11.0825 19.3353C11.8807 20.1145 13.1282 20.1132 13.9244 19.3314C14.7468 18.5241 15.9797 17.1754 17.0107 15.4655C18.04 13.7585 18.8947 11.6473 18.8947 9.32956C18.8947 5.79177 16.0267 2.92383 12.4889 2.92383ZM9.48926 9.32812C9.48926 7.67127 10.8324 6.32812 12.4893 6.32812C14.1461 6.32812 15.4893 7.67127 15.4893 9.32812C15.4893 10.985 14.1461 12.3281 12.4893 12.3281C10.8324 12.3281 9.48926 10.985 9.48926 9.32812Z" fill="#343C54"/><path d="M7.31371 17.1784C6.76303 17.2689 6.24955 17.3736 5.78108 17.4908C4.91231 17.7082 4.15604 17.9791 3.59889 18.3087C3.09172 18.6088 2.50391 19.1072 2.50391 19.8553C2.50391 20.6034 3.09172 21.1018 3.59889 21.4019C4.15604 21.7316 4.91231 22.0024 5.78108 22.2198C7.53015 22.6576 9.90669 22.9203 12.5039 22.9203C15.1011 22.9203 17.4777 22.6576 19.2267 22.2198C20.0955 22.0024 20.8518 21.7316 21.4089 21.4019C21.9161 21.1018 22.5039 20.6034 22.5039 19.8553C22.5039 19.1072 21.9161 18.6088 21.4089 18.3087C20.8518 17.9791 20.0955 17.7082 19.2267 17.4908C18.7614 17.3743 18.2516 17.2703 17.7051 17.1802C17.3665 17.6735 17.0202 18.13 16.6821 18.5456C17.4948 18.6518 18.2296 18.7875 18.8626 18.9459C19.6677 19.1474 20.2661 19.3754 20.6451 19.5997C20.8474 19.7194 20.9387 19.8073 20.9787 19.8553C20.9387 19.9033 20.8474 19.9912 20.6451 20.111C20.2661 20.3352 19.6677 20.5632 18.8626 20.7647C17.2638 21.1648 15.0153 21.4203 12.5039 21.4203C9.99249 21.4203 7.74403 21.1648 6.14526 20.7647C5.3401 20.5632 4.74175 20.3352 4.36274 20.111C4.16036 19.9912 4.06907 19.9033 4.02909 19.8553C4.06907 19.8073 4.16036 19.7194 4.36274 19.5997C4.74175 19.3754 5.3401 19.1474 6.14526 18.9459C6.78223 18.7865 7.52232 18.6501 8.34109 18.5436C8.00146 18.128 7.65369 17.6715 7.31371 17.1784Z" fill="#343C54"/></svg>',Tr='<svg width="80" height="80" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg" transform="rotate(0 0 0)"><path d="M12.4025 9.44141C10.884 9.44141 9.65283 10.6727 9.65283 12.1914C9.65283 13.7101 10.884 14.9414 12.4025 14.9414C13.921 14.9414 15.1522 13.7101 15.1522 12.1914C15.1522 10.6727 13.921 9.44141 12.4025 9.44141Z" fill="#343C54"/><path d="M13.1523 2.19141C13.1523 1.77719 12.8166 1.44141 12.4023 1.44141C11.9881 1.44141 11.6523 1.77719 11.6523 2.19141V3.72405C7.5566 4.0822 4.29367 7.34575 3.93549 11.4414H2.40234C1.98813 11.4414 1.65234 11.7772 1.65234 12.1914C1.65234 12.6056 1.98813 12.9414 2.40234 12.9414H3.93545C4.29344 17.0373 7.55645 20.301 11.6523 20.6592V22.1914C11.6523 22.6056 11.9881 22.9414 12.4023 22.9414C12.8166 22.9414 13.1523 22.6056 13.1523 22.1914V20.6592C17.2482 20.301 20.5113 17.0373 20.8692 12.9414H22.4023C22.8166 12.9414 23.1523 12.6056 23.1523 12.1914C23.1523 11.7772 22.8166 11.4414 22.4023 11.4414H20.8692C20.511 7.34575 17.2481 4.0822 13.1523 3.72405V2.19141ZM12.4025 7.94141C14.7496 7.94141 16.6522 9.84446 16.6522 12.1914C16.6522 14.5383 14.7496 16.4414 12.4025 16.4414C10.0554 16.4414 8.15283 14.5384 8.15283 12.1914C8.15283 9.84446 10.0554 7.94141 12.4025 7.94141ZM12.4025 9.44141C10.884 9.44141 9.65283 10.6727 9.65283 12.1914C9.65283 13.7101 10.884 14.9414 12.4025 14.9414C13.921 14.9414 15.1522 13.7101 15.1522 12.1914C15.1522 10.6727 13.921 9.44141 12.4025 9.44141Z" fill="#343C54"/></svg>',Hr='<svg width="80" height="80" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" transform="rotate(0 0 0)"><path d="M9.5 2C9.08579 2 8.75 2.33579 8.75 2.75C8.75 3.16421 9.08579 3.5 9.5 3.5H14.5C14.9142 3.5 15.25 3.16421 15.25 2.75C15.25 2.33579 14.9142 2 14.5 2H9.5Z" fill="#343C54"/><path d="M4 5C3.74924 5 3.51506 5.12533 3.37597 5.33397C3.23687 5.54262 3.21125 5.80699 3.3077 6.03846L4.44231 8.76154C4.4804 8.85294 4.5 8.95098 4.5 9.05V19.75C4.5 20.9926 5.50736 22 6.75 22H17.25C18.4926 22 19.5 20.9926 19.5 19.75V9.04978C19.5 8.95083 19.5196 8.85286 19.5576 8.76151L20.6914 6.03827C20.7878 5.8068 20.7621 5.54249 20.623 5.33389C20.4839 5.12529 20.2498 5 19.999 5H4ZM10.75 10.5V16.5C10.75 16.9142 10.4142 17.25 10 17.25C9.58579 17.25 9.25 16.9142 9.25 16.5V10.5C9.25 10.0858 9.58579 9.75 10 9.75C10.4142 9.75 10.75 10.0858 10.75 10.5ZM14.75 10.5V16.5C14.75 16.9142 14.4142 17.25 14 17.25C13.5858 17.25 13.25 16.9142 13.25 16.5V10.5C13.25 10.0858 13.5858 9.75 14 9.75C14.4142 9.75 14.75 10.0858 14.75 10.5Z" fill="#343C54"/></svg>',an='<svg width="80" height="80" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" transform="rotate(0 0 0)"><path d="M12.0002 4.875C12.6216 4.875 13.1252 5.37868 13.1252 6V10.8752H18.0007C18.622 10.8752 19.1257 11.3789 19.1257 12.0002C19.1257 12.6216 18.622 13.1252 18.0007 13.1252H13.1252V18.0007C13.1252 18.622 12.6216 19.1257 12.0002 19.1257C11.3789 19.1257 10.8752 18.622 10.8752 18.0007V13.1252H6C5.37868 13.1252 4.875 12.6216 4.875 12.0002C4.875 11.3789 5.37868 10.8752 6 10.8752H10.8752V6C10.8752 5.37868 11.3789 4.875 12.0002 4.875Z" fill="#343C54"/></svg>',Vr='<svg width="80" height="80" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" transform="rotate(0 0 0)"><path d="M4.875 12C4.875 11.3787 5.37868 10.875 6 10.875H18.0007C18.622 10.875 19.1257 11.3787 19.1257 12C19.1257 12.6213 18.622 13.125 18.0007 13.125H6C5.37868 13.125 4.875 12.6213 4.875 12Z" fill="#343C54"/></svg>',Fr='<svg width="80" height="80" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg" transform="rotate(0 0 0)"><path d="M21.6009 10.4593C22.001 10.3521 22.2384 9.94088 22.1312 9.54078C21.59 7.52089 20.3974 5.73603 18.7384 4.46302C17.0793 3.19001 15.0466 2.5 12.9555 2.5C10.8644 2.5 8.83164 3.19001 7.17262 4.46302C6.12405 5.26762 5.26179 6.2767 4.63257 7.42036L2.86504 6.92617C2.76093 6.89707 2.65423 6.89133 2.55153 6.9068C2.46222 6.91962 2.37374 6.94889 2.29039 6.99582C1.92945 7.19903 1.80158 7.65636 2.00479 8.0173L3.73942 11.0983C3.83701 11.2717 3.99946 11.3991 4.19104 11.4527C4.30333 11.4841 4.42023 11.4886 4.53266 11.4673C4.61373 11.4524 4.69254 11.4242 4.7657 11.383L7.84641 9.64831C8.11073 9.49948 8.25936 9.20608 8.22302 8.90493C8.18668 8.60378 7.9725 8.35417 7.68037 8.27249L6.1241 7.83737C6.6343 6.99996 7.29751 6.2579 8.08577 5.65305C9.48282 4.58106 11.1946 4 12.9555 4C14.7164 4 16.4282 4.58106 17.8252 5.65305C19.2223 6.72504 20.2266 8.22807 20.6823 9.92901C20.7895 10.3291 21.2008 10.5665 21.6009 10.4593Z" fill="#343C54"/><path d="M4.30739 13.5387C3.90729 13.6459 3.66985 14.0572 3.77706 14.4573C4.31829 16.4771 5.51089 18.262 7.16991 19.535C8.82892 20.808 10.8616 21.498 12.9528 21.498C15.0439 21.498 17.0766 20.808 18.7356 19.535C19.7859 18.7291 20.6493 17.7181 21.2787 16.5722L23.0083 17.0557C23.1218 17.0961 23.2447 17.1091 23.3661 17.0917C23.5554 17.0658 23.7319 16.968 23.8546 16.8116C24.0419 16.573 24.0669 16.245 23.9181 15.9807L22.1835 12.8996C22.0859 12.7263 21.9234 12.5988 21.7319 12.5453C21.64 12.5196 21.5451 12.5119 21.4521 12.5216C21.3493 12.5317 21.2488 12.5629 21.1571 12.6146L18.0764 14.3493C17.7155 14.5525 17.5876 15.0099 17.7909 15.3708C17.9016 15.5675 18.0879 15.695 18.2929 15.7373L19.7875 16.1552C19.2768 16.9949 18.6125 17.7388 17.8225 18.345C16.4255 19.417 14.7137 19.998 12.9528 19.998C11.1918 19.998 9.4801 19.417 8.08305 18.345C6.686 17.273 5.68171 15.77 5.22595 14.069C5.11874 13.6689 4.70749 13.4315 4.30739 13.5387Z" fill="#343C54"/></svg>',Pr=({field:t,value:n,onChange:r,onBlur:s,icons:l})=>{const o=t.props?.min,a=t.props?.max,i=t.props?.step||1,c=t.props?.display||"input",u=t.props?.suffix,d=t.props?.precision,m=me(l?.tsMinusIcon,Vr),f=me(l?.tsPlusIcon,an),p=w=>d!==void 0&&d>0?parseFloat(w.toFixed(d)):w,h=typeof n=="string"?parseFloat(n)||0:n||0,[v,k]=e.useState(""),x=w=>{if(t.required&&(w===""||w===null||w===void 0))return"Required";if(w===""||w===null||w===void 0)return"";const E=typeof w=="string"?parseFloat(w):w;return isNaN(E)?"Required":o!==void 0&&E<o?`Value cannot be less than ${o}`:a!==void 0&&E>a?`Value cannot be more than ${a}`:""},_=()=>{let w=p(h+i);o!==void 0&&h<o&&(w=o),a!==void 0&&w>a&&(w=a),r(w),k("")},C=()=>{let w=p(h-i);a!==void 0&&h>a&&(w=a),o!==void 0&&w<o&&(w=o),r(w),k("")},D=w=>{r(w);const E=x(w);k(E)},g=()=>{const w=parseFloat(n);if(!isNaN(w)){const E=p(w);o!==void 0&&E<o?(r(o),k("")):a!==void 0&&E>a?(r(a),k("")):E!==w&&(r(E),k(""))}s&&s()},S=v||(t.validation?.errors?.length>0?t.validation.errors[0]:""),A=S.length>0;return c==="stepper"?e.createElement("div",{className:`ts-form-group field-key-${t.key} ${A?"ts-has-errors":""} ${t.css_class||""} ${t.hidden?"hidden":""}`},e.createElement("label",null,t.label,A?e.createElement("span",{className:"is-required"},S):!t.required&&e.createElement("span",{className:"is-required"},"Optional"),t.description&&e.createElement("div",{className:"vx-dialog"},e.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M8 0C3.6 0 0 3.6 0 8C0 12.4 3.6 16 8 16C12.4 16 16 12.4 16 8C16 3.6 12.4 0 8 0ZM8 12C7.4 12 7 11.6 7 11C7 10.4 7.4 10 8 10C8.6 10 9 10.4 9 11C9 11.6 8.6 12 8 12ZM9 9H7V4H9V9Z",fill:"currentColor"})),e.createElement("div",{className:"vx-dialog-content min-scroll"},e.createElement("p",null,t.description)))),e.createElement("div",{className:"ts-stepper-input flexify"},e.createElement("button",{type:"button",className:"ts-stepper-left ts-icon-btn",onClick:C,disabled:o!==void 0&&h<=o},e.createElement("span",{dangerouslySetInnerHTML:{__html:m}})),e.createElement("input",{type:"number",className:"ts-input-box",value:n||"",onChange:w=>D(w.target.value),onBlur:g,placeholder:String(t.props?.placeholder??t.placeholder??""),required:t.required,min:o,max:a,step:i}),e.createElement("button",{type:"button",className:"ts-stepper-right ts-icon-btn",onClick:_,disabled:a!==void 0&&h>=a},e.createElement("span",{dangerouslySetInnerHTML:{__html:f}})))):e.createElement("div",{className:`ts-form-group field-key-${t.key} ${A?"ts-has-errors":""} ${t.css_class||""} ${t.hidden?"hidden":""}`},e.createElement("label",null,t.label,A?e.createElement("span",{className:"is-required"},S):!t.required&&e.createElement("span",{className:"is-required"},"Optional"),t.description&&e.createElement("div",{className:"vx-dialog"},e.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M8 0C3.6 0 0 3.6 0 8C0 12.4 3.6 16 8 16C12.4 16 16 12.4 16 8C16 3.6 12.4 0 8 0ZM8 12C7.4 12 7 11.6 7 11C7 10.4 7.4 10 8 10C8.6 10 9 10.4 9 11C9 11.6 8.6 12 8 12ZM9 9H7V4H9V9Z",fill:"currentColor"})),e.createElement("div",{className:"vx-dialog-content min-scroll"},e.createElement("p",null,t.description)))),u?e.createElement("div",{className:"input-container"},e.createElement("input",{type:"number",className:"ts-filter",value:n||"",onChange:w=>D(w.target.value),onBlur:g,placeholder:String(t.props?.placeholder??t.placeholder??""),required:t.required,min:o,max:a,step:i,title:t.label}),e.createElement("span",{className:"input-suffix"},String(u??""))):e.createElement("input",{type:"number",className:"ts-filter",value:n||"",onChange:w=>D(w.target.value),onBlur:g,placeholder:String(t.props?.placeholder??t.placeholder??""),required:t.required,min:o,max:a,step:i,title:t.label}))},Or=({field:t,value:n,onChange:r,onBlur:s,icons:l})=>{const[o,a]=e.useState(""),i=m=>{r(m),m&&m.length>0?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m)?a(""):a("You must provide a valid email address"):a("")},c=t.validation?.errors?.[0]||o,u=c.length>0,d=me(l?.tsEmailIcon,Dr);return e.createElement("div",{className:`ts-form-group field-key-${t.key} ${u?"ts-has-errors":""} ${t.css_class||""} ${t.hidden?"hidden":""}`},e.createElement("label",null,t.label,u?e.createElement("span",{className:"is-required"},c):!t.required&&e.createElement("span",{className:"is-required"},"Optional"),t.description&&e.createElement("div",{className:"vx-dialog"},e.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M8 0C3.6 0 0 3.6 0 8C0 12.4 3.6 16 8 16C12.4 16 16 12.4 16 8C16 3.6 12.4 0 8 0ZM8 12C7.4 12 7 11.6 7 11C7 10.4 7.4 10 8 10C8.6 10 9 10.4 9 11C9 11.6 8.6 12 8 12ZM9 9H7V4H9V9Z",fill:"currentColor"})),e.createElement("div",{className:"vx-dialog-content min-scroll"},e.createElement("p",null,t.description)))),e.createElement("div",{className:"ts-input-icon flexify"},e.createElement("span",{dangerouslySetInnerHTML:{__html:d}}),e.createElement("input",{type:"email",className:"ts-filter",value:n||"",onChange:m=>i(m.target.value),onBlur:s,placeholder:String(t.props?.placeholder??t.label??""),required:t.required,title:t.label})))},Zr=({field:t,value:n,onChange:r,onBlur:s})=>{const[l,o]=e.useState(""),a=u=>{if(r(u),u&&u.length>0)try{new URL(u),o("")}catch{o("You must provide a valid URL")}else o("")},i=t.validation?.errors?.[0]||l,c=i.length>0;return e.createElement("div",{className:`ts-form-group field-key-${t.key} ${c?"ts-has-errors":""} ${t.css_class||""} ${t.hidden?"hidden":""}`},e.createElement("label",null,t.label,c?e.createElement("span",{className:"is-required"},i):!t.required&&e.createElement("span",{className:"is-required"},"Optional"),t.description&&e.createElement("div",{className:"vx-dialog"},e.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M8 0C3.6 0 0 3.6 0 8C0 12.4 3.6 16 8 16C12.4 16 16 12.4 16 8C16 3.6 12.4 0 8 0ZM8 12C7.4 12 7 11.6 7 11C7 10.4 7.4 10 8 10C8.6 10 9 10.4 9 11C9 11.6 8.6 12 8 12ZM9 9H7V4H9V9Z",fill:"currentColor"})),e.createElement("div",{className:"vx-dialog-content min-scroll"},e.createElement("p",null,t.description)))),e.createElement("div",{className:"ts-input-icon flexify"},e.createElement("svg",{width:"20",height:"20",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M16.3378 6.36719C19.7411 6.36719 22.5 9.12608 22.5 12.5294C22.5 15.9326 19.7411 18.6915 16.3378 18.6915H13.5338V16.4415H16.3378C18.4985 16.4415 20.25 14.69 20.25 12.5294C20.25 10.3687 18.4985 8.61719 16.3378 8.61719H13.5338V6.36719L16.3378 6.36719ZM16.5034 12.5294C16.5034 13.1507 15.9997 13.6544 15.3784 13.6544L9.62162 13.6543C9.0003 13.6543 8.49662 13.1507 8.49662 12.5293C8.49662 11.908 9.0003 11.4043 9.62162 11.4043L15.3784 11.4044C15.9997 11.4044 16.5034 11.908 16.5034 12.5294ZM11.47 8.61719L8.66216 8.61719C6.50153 8.61719 4.75 10.3687 4.75 12.5293C4.75 14.69 6.50153 16.4415 8.66216 16.4415H11.47V18.6915H8.66216C5.25889 18.6915 2.5 15.9326 2.5 12.5293C2.5 9.12608 5.25889 6.36719 8.66216 6.36719L11.47 6.36719V8.61719Z",fill:"currentColor"})),e.createElement("input",{type:"url",className:"ts-filter",value:n||"",onChange:u=>a(u.target.value),onBlur:s,placeholder:String(t.props?.placeholder??t.label??""),required:t.required,title:t.label})))},qr=({field:t,value:n,onChange:r,onBlur:s,icons:l})=>{const o=t.validation?.errors?.[0]||"",a=o.length>0,i=me(l?.tsPhoneIcon,Lr);return e.createElement("div",{className:`ts-form-group field-key-${t.key} ${a?"ts-has-errors":""} ${t.css_class||""} ${t.hidden?"hidden":""}`},e.createElement("label",null,t.label,a?e.createElement("span",{className:"is-required"},o):!t.required&&e.createElement("span",{className:"is-required"},"Optional"),t.description&&e.createElement("div",{className:"vx-dialog"},e.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M8 0C3.6 0 0 3.6 0 8C0 12.4 3.6 16 8 16C12.4 16 16 12.4 16 8C16 3.6 12.4 0 8 0ZM8 12C7.4 12 7 11.6 7 11C7 10.4 7.4 10 8 10C8.6 10 9 10.4 9 11C9 11.6 8.6 12 8 12ZM9 9H7V4H9V9Z",fill:"currentColor"})),e.createElement("div",{className:"vx-dialog-content min-scroll"},e.createElement("p",null,t.description)))),e.createElement("div",{className:"ts-input-icon flexify"},e.createElement("span",{dangerouslySetInnerHTML:{__html:i}}),e.createElement("input",{type:"tel",className:"ts-filter",value:n||"",onChange:c=>r(c.target.value),onBlur:s,placeholder:String(t.props?.placeholder??t.label??""),required:t.required,title:t.label})))},Br=({field:t,value:n,onChange:r,onBlur:s})=>{const l=t.props?.display_as||"popup",o=t.props?.choices||[],a=t.validation?.errors?.[0]||"",i=a.length>0;return l==="inline"?(console.group("SelectField - Data Structure Debug (inline mode)"),console.log("Field label:",t.label),console.log("Field props:",t.props),console.log("Choices array length:",o.length),console.log("All choices:",o),o.length>0&&(console.log("First choice:",o[0]),console.log("First choice.value:",o[0].value),console.log("First choice.label:",o[0].label),console.log("First choice.icon:",o[0].icon),console.log("First choice.icon type:",typeof o[0].icon),console.log("First choice keys:",Object.keys(o[0]))),console.groupEnd(),e.createElement("div",{className:`ts-form-group inline-terms-wrapper ts-inline-filter field-key-${t.key} ${i?"ts-has-errors":""} ${t.css_class||""} ${t.hidden?"hidden":""}`},e.createElement("label",null,t.label,i?e.createElement("span",{className:"is-required"},a):!t.required&&e.createElement("span",{className:"is-required"},"Optional"),t.description&&e.createElement("div",{className:"vx-dialog"},e.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M8 0C3.6 0 0 3.6 0 8C0 12.4 3.6 16 8 16C12.4 16 16 12.4 16 8C16 3.6 12.4 0 8 0ZM8 12C7.4 12 7 11.6 7 11C7 10.4 7.4 10 8 10C8.6 10 9 10.4 9 11C9 11.6 8.6 12 8 12ZM9 9H7V4H9V9Z",fill:"currentColor"})),e.createElement("div",{className:"vx-dialog-content min-scroll"},e.createElement("p",null,t.description)))),e.createElement("div",{className:"ts-term-dropdown ts-md-group ts-multilevel-dropdown inline-multilevel min-scroll"},e.createElement("ul",{className:"simplify-ul ts-term-dropdown-list"},o.map(c=>e.createElement("li",{key:c.value,className:c.value===n?"ts-selected":""},e.createElement("a",{href:"#",className:"flexify",onClick:u=>{u.preventDefault(),r(c.value===n?null:c.value)}},e.createElement("div",{className:"ts-radio-container"},e.createElement("label",{className:"container-radio"},e.createElement("input",{type:"radio",value:c.value,checked:n===c.value,disabled:!0,hidden:!0}),e.createElement("span",{className:"checkmark"}))),e.createElement("span",null,c.label),e.createElement("div",{className:"ts-term-icon"},e.createElement("span",{dangerouslySetInnerHTML:{__html:c.icon||""}}))))))))):e.createElement("div",{className:`ts-form-group inline-terms-wrapper ts-inline-filter field-key-${t.key} ${i?"ts-has-errors":""} ${t.css_class||""} ${t.hidden?"hidden":""}`},e.createElement("label",null,t.label,i?e.createElement("span",{className:"is-required"},a):!t.required&&e.createElement("span",{className:"is-required"},"Optional"),t.description&&e.createElement("div",{className:"vx-dialog"},e.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M8 0C3.6 0 0 3.6 0 8C0 12.4 3.6 16 8 16C12.4 16 16 12.4 16 8C16 3.6 12.4 0 8 0ZM8 12C7.4 12 7 11.6 7 11C7 10.4 7.4 10 8 10C8.6 10 9 10.4 9 11C9 11.6 8.6 12 8 12ZM9 9H7V4H9V9Z",fill:"currentColor"})),e.createElement("div",{className:"vx-dialog-content min-scroll"},e.createElement("p",null,t.description)))),e.createElement("div",{className:"ts-filter"},e.createElement("select",{value:n||"",onChange:c=>r(c.target.value||null),onBlur:s,required:t.required,title:t.label,"aria-label":t.label},!t.required&&e.createElement("option",{value:""},String(t.props?.placeholder??t.label)),o.map(c=>e.createElement("option",{key:c.value,value:c.value},c.label))),e.createElement("div",{className:"ts-down-icon"})))};function jr({field:t,value:n,onChange:r,onBlur:s}){const[l,o]=e.useState(!!n),a=`switcher-${t.key}`,i=t.validation?.errors?.[0]||"",c=i.length>0;e.useEffect(()=>{o(!!n)},[n]);const u=d=>{o(d),r(d)};return React.createElement("div",{className:`ts-form-group switcher-label field-key-${t.key} ${c?"ts-has-errors":""} ${t.css_class||""} ${t.hidden?"hidden":""}`},React.createElement("label",{onClick:d=>{const m=d.currentTarget.querySelector(".switch-slider");m&&!m.contains(d.target)&&d.preventDefault()}},React.createElement("div",{className:"switch-slider"},React.createElement("div",{className:"onoffswitch"},React.createElement("input",{id:a,type:"checkbox",className:"onoffswitch-checkbox",checked:l,onChange:d=>u(d.target.checked),onBlur:s}),React.createElement("label",{className:"onoffswitch-label",htmlFor:a})))," ",t.label," ",c?React.createElement("span",{className:"is-required"},i):!t.required&&React.createElement("span",{className:"is-required"},"Optional"),t.description&&React.createElement("div",{className:"vx-dialog"},React.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M8 0C3.6 0 0 3.6 0 8C0 12.4 3.6 16 8 16C12.4 16 16 12.4 16 8C16 3.6 12.4 0 8 0ZM8 12C7.4 12 7 11.6 7 11C7 10.4 7.4 10 8 10C8.6 10 9 10.4 9 11C9 11.6 8.6 12 8 12ZM9 9H7V4H9V9Z",fill:"currentColor"})),React.createElement("div",{className:"vx-dialog-content min-scroll"},React.createElement("p",null,t.description)))))}function Ne({isOpen:t,target:n,title:r="",icon:s,saveLabel:l="Save",clearLabel:o="Clear",showClear:a=!0,showSave:i=!0,onSave:c,onClear:u,onClose:d,children:m,className:f="",popupStyle:p}){const h=e.useRef(null),v=e.useRef(null),[k,x]=e.useState({position:"absolute",top:"-9999px",left:"-9999px"}),_=e.useRef(""),C=e.useCallback((w=!1)=>{if(!v.current||!n.current||!h.current)return;const E=n.current,T=h.current,b=v.current,N=document.querySelector('iframe[name="editor-canvas"]'),M=!!N;let F=0,q=0;if(M&&N){const X=N.getBoundingClientRect();F=X.top,q=X.left}const I=M?N?.contentDocument?.documentElement.clientWidth??document.body.clientWidth:document.body.clientWidth,L=E.getBoundingClientRect(),j=E.offsetWidth,Y=window.pageXOffset||document.documentElement.scrollLeft,J=window.pageYOffset||document.documentElement.scrollTop,se={left:L.left+Y+q,top:L.top+J+F},Q=T.getBoundingClientRect(),R=window.getComputedStyle(b),oe=parseFloat(R.minWidth)||0,te=b.querySelector(".pika-single");let O;if(te){const X=te.classList.contains("is-range")||te.querySelectorAll(".pika-lendar").length>1||b.closest(".ts-booking-date-range")!==null;O=Math.max(X?640:420,oe)}else O=Math.max(L.width,oe);const P=se.left+j/2,y=(I+q)/2;let H;P>y+1?H=se.left-O+j:H=se.left;const Z=window.innerHeight,V=Q.height;let z=se.top+L.height;const W=L.bottom+F,K=L.top+F,$=W+V>Z,B=K-V>=0;$&&B&&(z=se.top-V);const U={top:`${z}px`,left:`${H}px`,width:`${O}px`,position:"absolute"},G=JSON.stringify(U);G!==_.current&&(_.current=G,w?x(U):requestAnimationFrame(()=>x(U)))},[n]),D=!!document.querySelector('iframe[name="editor-canvas"]');if(e.useEffect(()=>{if(!t)return;const w=document.querySelector('iframe[name="editor-canvas"]'),E=w?.contentDocument,T=M=>{const F=M.target;if(!v.current?.contains(F)&&!(n.current&&n.current.contains(F))){if(w){const q=[".interface-interface-skeleton__sidebar",".block-editor-block-inspector",".components-popover",".components-modal__screen-overlay",".edit-post-sidebar",".interface-interface-skeleton__header",".interface-interface-skeleton__secondary-sidebar"];for(const I of q)if(F.closest(I))return}d()}},b=M=>{const F=M.target;n.current&&n.current.contains(F)||d()},N=requestAnimationFrame(()=>{document.addEventListener("mousedown",T),w&&E?.addEventListener("mousedown",b)});return()=>{cancelAnimationFrame(N),document.removeEventListener("mousedown",T),E?.removeEventListener("mousedown",b)}},[t,d]),e.useEffect(()=>{if(!t)return;const w=E=>{E.key==="Escape"&&d()};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[t,d]),e.useEffect(()=>{if(!t)return;C(!0);const w=()=>C();window.addEventListener("scroll",w,!0);const E=()=>C();window.addEventListener("resize",E,!0);let T=null;return v.current&&(T=new ResizeObserver(()=>C(!0)),T.observe(v.current)),()=>{window.removeEventListener("scroll",w,!0),window.removeEventListener("resize",E,!0),T?.disconnect()}},[t,C]),!t)return null;const g=()=>React.createElement("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M14 1.41L12.59 0L7 5.59L1.41 0L0 1.41L5.59 7L0 12.59L1.41 14L7 8.41L12.59 14L14 12.59L8.41 7L14 1.41Z",fill:"currentColor"})),S=()=>React.createElement("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z",fill:"currentColor"})),A=document.body;return Pe.createPortal(React.createElement("div",{className:`elementor vx-popup ${f}`.trim()},D&&React.createElement("style",null,".vx-popup .ts-popup-root > div::after { pointer-events: none !important; }"),React.createElement("div",{className:"ts-popup-root elementor-element"},React.createElement("div",{className:"ts-form elementor-element",style:k,ref:h},React.createElement("div",{className:"ts-field-popup-container"},React.createElement("div",{className:"ts-field-popup triggers-blur",ref:v,style:p},r&&React.createElement("div",{className:"ts-popup-head flexify ts-sticky-top"},React.createElement("div",{className:"ts-popup-name flexify"},s&&React.createElement("span",{dangerouslySetInnerHTML:{__html:s}}),React.createElement("span",null,r)),React.createElement("ul",{className:"flexify simplify-ul"},React.createElement("li",{className:"flexify ts-popup-close"},React.createElement("a",{href:"#",onClick:w=>{w.preventDefault(),d()},className:"ts-icon-btn","aria-label":"Close"},React.createElement(g,null))))),React.createElement("div",{className:"ts-popup-content-wrapper min-scroll"},m),i||a?React.createElement("div",{className:"ts-popup-controller"},React.createElement("ul",{className:"flexify simplify-ul"},React.createElement("li",{className:"flexify ts-popup-close"},React.createElement("a",{href:"#",onClick:w=>{w.preventDefault(),d()},className:"ts-icon-btn","aria-label":"Close"},React.createElement(g,null))),a&&u&&React.createElement("li",{className:"flexify hide-d",onClick:w=>{w.preventDefault(),u()}},React.createElement("a",{href:"#",className:"ts-icon-btn"},React.createElement(S,null))),a&&u&&React.createElement("li",{className:"flexify hide-m",onClick:w=>{w.preventDefault(),u()}},React.createElement("a",{href:"#",className:"ts-btn ts-btn-1"},o)),i&&React.createElement("li",{className:"flexify"},React.createElement("a",{href:"#",onClick:w=>{w.preventDefault(),c()},className:"ts-btn ts-btn-2"},l)))):React.createElement("div",{className:"ts-popup-controller hide-d"},React.createElement("ul",{className:"flexify simplify-ul"},React.createElement("li",{className:"flexify ts-popup-close"},React.createElement("a",{href:"#",onClick:w=>{w.preventDefault(),d()},className:"ts-icon-btn","aria-label":"Close"},React.createElement(g,null)))))))))),A)}const Xe=({isOpen:t,popupId:n,target:r,title:s="",icon:l="",saveLabel:o="Save",clearLabel:a="Clear",clearButton:i=!0,showHeader:c=!0,showFooter:u=!0,onSave:d,onClear:m,onClose:f,children:p,popupClass:h="",minWidth:v,headerActions:k})=>{const x=e.useRef(null),_=e.useRef(null),[C,D]=e.useState({position:"absolute",left:"-9999px"}),g=e.useRef(""),S=e.useCallback(()=>{if(!_.current||!r||!x.current)return;const T=r,b=x.current,N=_.current,M=document.querySelector('iframe[name="editor-canvas"]'),F=!!M;let q=0,I=0;if(F&&M){const U=M.getBoundingClientRect();q=U.top,I=U.left}const L=F?M?.contentDocument?.documentElement.clientWidth??document.body.clientWidth:document.body.clientWidth,j=T.getBoundingClientRect(),Y=T.offsetWidth,J=window.pageXOffset||document.documentElement.scrollLeft,se=window.pageYOffset||document.documentElement.scrollTop,Q={left:j.left+J+I,top:j.top+se+q},R=b.getBoundingClientRect(),oe=window.getComputedStyle(N),te=parseFloat(oe.minWidth)||0,O=v||te,P=Math.min(1140,L-40),y=Math.max(j.width,O||P),H=Q.left+Y/2>(L+I)/2+1;let Z;H?Z=Q.left-y+Y:Z=Q.left,Z<0&&(Z=10),Z+y>L+I&&(Z=L+I-y-10);let V=Q.top+j.height;const z=window.innerHeight,W=j.bottom+q,K=j.top+q;W+R.height>z&&K-R.height>=0&&(V=Q.top-R.height);const $={top:`${V}px`,left:`${Z}px`,width:`${y}px`,position:"absolute"},B=JSON.stringify($);B!==g.current&&(g.current=B,D($))},[r,v]);e.useEffect(()=>{if(!t)return;const T=b=>{b.key==="Escape"&&f()};return document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)},[t,f]);const A=!!document.querySelector('iframe[name="editor-canvas"]');if(e.useEffect(()=>{if(!t)return;const T=document.querySelector('iframe[name="editor-canvas"]'),b=T?.contentDocument,N=q=>{const I=q.target;if(!_.current?.contains(I)&&!(r&&r.contains(I))){if(T){const L=[".interface-interface-skeleton__sidebar",".block-editor-block-inspector",".components-popover",".components-modal__screen-overlay",".edit-post-sidebar",".interface-interface-skeleton__header",".interface-interface-skeleton__secondary-sidebar"];for(const j of L)if(I.closest(j))return}f()}},M=q=>{const I=q.target;r&&r.contains(I)||f()},F=requestAnimationFrame(()=>{document.addEventListener("mousedown",N),T&&b?.addEventListener("mousedown",M)});return()=>{cancelAnimationFrame(F),document.removeEventListener("mousedown",N),b?.removeEventListener("mousedown",M)}},[t,f,r]),e.useEffect(()=>{if(!t)return;requestAnimationFrame(()=>{requestAnimationFrame(()=>{S()})});const T=()=>S();window.addEventListener("scroll",T,!0);const b=()=>S();window.addEventListener("resize",b,!0);let N=null;return _.current&&(N=new ResizeObserver(()=>{requestAnimationFrame(()=>S())}),N.observe(_.current)),()=>{window.removeEventListener("scroll",T,!0),window.removeEventListener("resize",b,!0),N?.disconnect()}},[t,S]),!t)return null;const w=()=>e.createElement("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M14 1.41L12.59 0L7 5.59L1.41 0L0 1.41L5.59 7L0 12.59L1.41 14L7 8.41L12.59 14L14 12.59L8.41 7L14 1.41Z",fill:"currentColor"})),E=document.body;return Pe.createPortal(e.createElement("div",{className:`elementor vx-popup ${h}`.trim()},A&&e.createElement("style",null,".vx-popup .ts-popup-root > div::after { pointer-events: none !important; }"),e.createElement("div",{className:"ts-popup-root elementor-element"},e.createElement("div",{ref:x,className:"ts-form elementor-element",style:C},e.createElement("div",{className:"ts-field-popup-container"},e.createElement("div",{id:n,ref:_,className:"ts-field-popup triggers-blur"},c&&e.createElement("div",{className:"ts-popup-head flexify ts-sticky-top"},e.createElement("div",{className:"ts-popup-name flexify"},l&&e.createElement("span",{dangerouslySetInnerHTML:{__html:l}}),e.createElement("span",null,s)),e.createElement("ul",{className:"flexify simplify-ul"},k,e.createElement("li",{className:"flexify ts-popup-close"},e.createElement("a",{href:"#",onClick:T=>{T.preventDefault(),f()},className:"ts-icon-btn","aria-label":"Close"},e.createElement(w,null))))),e.createElement("div",{className:"ts-popup-content-wrapper min-scroll"},p),u&&e.createElement("div",{className:"ts-popup-controller"},e.createElement("ul",{className:"flexify simplify-ul"},e.createElement("li",{className:"flexify ts-popup-close"},e.createElement("a",{href:"#",onClick:T=>{T.preventDefault(),f()},className:"ts-icon-btn","aria-label":"Close"},e.createElement(w,null))),i&&m&&e.createElement("li",{className:"flexify"},e.createElement("a",{href:"#",onClick:T=>{T.preventDefault(),m()},className:"ts-btn ts-btn-1"},a)),d&&e.createElement("li",{className:"flexify"},e.createElement("a",{href:"#",onClick:T=>{T.preventDefault(),d()},className:"ts-btn ts-btn-2"},o))))))))),E)},zr=({value:t,onChange:n,onSelect:r,pickerConfig:s,onPickerReady:l})=>{const o=e.useRef(null),a=e.useRef(null),i=e.useRef(null),c=e.useRef(n),u=e.useRef(r);c.current=n,u.current=r,e.useEffect(()=>{if(!o.current||!a.current)return;const m=window.Pikaday;if(!m){console.error("Pikaday not loaded - window.Pikaday is undefined");return}const f=requestAnimationFrame(()=>{i.current=new m({field:a.current,container:o.current,bound:!1,firstDay:1,keyboardInput:!1,defaultDate:t||void 0,onSelect:p=>{c.current(p),u.current&&u.current(p)},...s}),l&&i.current&&l(i.current)});return()=>{cancelAnimationFrame(f),setTimeout(()=>{i.current?.destroy(),i.current=null},200)}},[]),e.useEffect(()=>{i.current&&(t&&i.current.setDate(t,!0),i.current.draw(!0))},[t]);const d=s?.numberOfMonths>=2;return e.createElement("div",{className:`ts-booking-date ts-form-group${d?" ts-booking-date-range":""}`,ref:o},e.createElement("input",{type:"hidden",ref:a}))};function ht(){if(typeof window<"u"&&window.wpApiSettings?.root)return window.wpApiSettings.root.replace(/\/wp-json\/?$/,"")+"?vx=1";if(typeof document<"u"){const t=document.querySelector('link[rel="https://api.w.org/"]');if(t){const n=t.getAttribute("href");if(n)return n.replace(/\/wp-json\/?$/,"")+"?vx=1"}}return typeof window<"u"?window.location.origin+"?vx=1":"/?vx=1"}function Ur(){if(typeof window<"u"&&window.wpApiSettings?.root)return window.wpApiSettings.root;if(typeof document<"u"){const t=document.querySelector('link[rel="https://api.w.org/"]');if(t){const n=t.getAttribute("href");if(n)return n}}if(typeof window<"u"&&window.location?.origin){const t=window.location.pathname.split("/").filter(Boolean),n=["wp-admin","wp-content","wp-includes","wp-json"];return t.length>0&&!n.includes(t[0])?window.location.origin+"/"+t[0]+"/wp-json/":window.location.origin+"/wp-json/"}return"/wp-json/"}let cn=!1;function At(){if(cn)return!0;if(!window.Voxel?.mixins?.base)return!1;const t=window.Voxel.mixins.base;return t.mounted&&!t._originalMounted?(t._originalMounted=t.mounted,t.mounted=function(){try{const n=this.$root?.$options?.el||this.$el;if(n){const r=n.closest?.(".elementor-element");if(r)this.widget_id=r.dataset?.id||"";else{const l=n.closest?.("[data-block-id]");this.widget_id=l&&l.dataset?.blockId||""}const s=n.closest?.(".elementor");if(s)this.post_id=s.dataset?.elementorId||"";else{const l=document.body.className.match(/postid-(\d+)/);this.post_id=l?l[1]:""}}t._originalMounted&&t._originalMounted!==t.mounted&&t._originalMounted.call(this)}catch(n){console.warn("[VoxelShim] Error in patched mounted():",n),this.widget_id="",this.post_id=""}},cn=!0,console.log("[VoxelShim] Successfully patched Voxel.mixins.base.mounted"),!0):!1}function un(){if(At())return;let t=0;const n=50,s=setInterval(()=>{if(t++,At()){clearInterval(s);return}t>=n&&(clearInterval(s),console.warn("[VoxelShim] Voxel.mixins.base not found after 5 seconds"))},100);typeof document<"u"&&document.addEventListener("voxel:ready",()=>{At(),clearInterval(s)},{once:!0})}typeof window<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",un,{once:!0}):un());function dn(){return window.voxelFseCreatePost?.ajaxUrl?window.voxelFseCreatePost.ajaxUrl:window.Voxel_Config?.ajax_url?String(window.Voxel_Config.ajax_url):window.wpApiSettings?.root?`${window.wpApiSettings.root.replace(/\/wp-json\/?$/,"")}/?vx=1`:`${window.location.origin}/?vx=1`}typeof window<"u"&&typeof window._vx_file_upload_cache>"u"&&(window._vx_file_upload_cache=[]);function Tt({onBlur:t,onSave:n,multiple:r=!1,saveLabel:s="Save",children:l,minWidth:o=450,target:a}){const[i,c]=e.useState(!1),u=e.useRef(null),d=e.useRef(null),[m,f]=e.useState([]),[p,h]=e.useState(!0),[v,k]=e.useState(!1),[x,_]=e.useState(0),[C,D]=e.useState({}),[g,S]=e.useState(""),[A,w]=e.useState([]),[E,T]=e.useState(!1),[b,N]=e.useState(!1),[M,F]=e.useState(0),[q,I]=e.useState(!1),L=async(V=0)=>{V>0?I(!0):h(!0);try{const W=dn(),K=new URLSearchParams({action:"list_media",offset:V.toString()}),$=`${W}&${K.toString()}`,B=await fetch($,{method:"GET",credentials:"same-origin"});if(!B.ok)throw new Error(`HTTP error! status: ${B.status}`);const U=await B.json();U.success&&(f(G=>V>0?[...G,...U.data]:U.data),k(U.has_more),_(V+U.data.length))}catch(W){console.error("[MediaPopup] Error loading files:",W)}finally{h(!1),I(!1)}},j=async(V=!1)=>{if(!g.trim()){w([]);return}try{const z=V?M:0;T(!V),I(V);const W=dn(),K=new URLSearchParams({action:"list_media",search:g,offset:z.toString()}),$=`${W}&${K.toString()}`,B=await fetch($,{method:"GET",credentials:"same-origin"});if(!B.ok)throw new Error(`HTTP error! status: ${B.status}`);const U=await B.json();U.success?(w(G=>V?[...G,...U.data]:U.data),N(U.has_more),F(z+U.data.length)):w([])}catch{w([])}finally{T(!1),I(!1)}},Y=V=>{D(r?z=>{const W={...z};return W[V.id]?delete W[V.id]:W[V.id]=V,W}:{[V.id]:V})},J=()=>{const V=Object.values(C).map(z=>"_id"in z&&z._id?{source:"new_upload",_id:z._id,file:z.item,name:z.name,type:z.type,preview:z.preview}:{source:"existing",id:z.id,name:z.name,type:z.type,preview:z.preview});n&&n(V),c(!1),D({})},se=()=>{c(!1),D({}),t&&t()},Q=()=>{D({})},R=V=>V.type.startsWith("image/")&&V.preview?{backgroundImage:`url(${V.preview})`}:{},oe=V=>V.type.startsWith("image/"),te=()=>{const V=window._vx_file_upload_cache;return Array.isArray(V)?[...V]:(window._vx_file_upload_cache=[],[])},O=V=>{const z=V._id||`upload-${V.name}`;D(W=>{const K={...W};if(K[z])delete K[z];else{if(!r)return{[z]:V};K[z]=V}return K})};e.useEffect(()=>{if(!g.trim()){w([]),F(0);return}const V=setTimeout(()=>{j(!1)},300);return()=>clearTimeout(V)},[g]),e.useEffect(()=>{i&&d.current&&setTimeout(()=>{d.current?.focus()},100)},[i]),e.useEffect(()=>{L(0)},[]);const P=g.trim()?A:m,y=g.trim()?b:v,H=g.trim()?E:p,Z=V=>{V.preventDefault(),c(!0)};return React.createElement(React.Fragment,null,React.createElement("span",{ref:u,onMouseDown:Z,style:{cursor:"pointer"}},l||React.createElement("a",{href:"#",onClick:V=>V.preventDefault(),className:"ts-btn ts-btn-4 form-btn"},React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M5.5 3.25C4.25736 3.25 3.25 4.25736 3.25 5.5V18.5C3.25 19.7426 4.25736 20.75 5.5 20.75H18.5C19.7426 20.75 20.75 19.7426 20.75 18.5V5.5C20.75 4.25736 19.7426 3.25 18.5 3.25H5.5ZM6.20103 13.6808C7.10463 12.4977 8.88749 12.5025 9.78466 13.6905L11.0002 15.3001C11.3508 15.7643 12.0734 15.6701 12.2931 15.1315L14.2708 10.2852C14.9381 8.65008 17.1428 8.3859 18.1774 9.81704L18.9656 10.9072C19.1505 11.1629 19.25 11.4705 19.25 11.786V13.8608V18.5C19.25 18.9142 18.9142 19.25 18.5 19.25H5.5C5.08579 19.25 4.75 18.9142 4.75 18.5V18.0031V16.088C4.75 15.7589 4.85819 15.439 5.05792 15.1775L6.20103 13.6808ZM7.01953 8.55957C7.01953 7.66211 7.74707 6.93457 8.64453 6.93457H8.65453C9.55199 6.93457 10.2795 7.66211 10.2795 8.55957C10.2795 9.45703 9.55199 10.1846 8.65453 10.1846H8.64453C7.74707 10.1846 7.01953 9.45703 7.01953 8.55957Z",fill:"#343C54"})),React.createElement("span",null,"Media library"))),i&&React.createElement(Xe,{isOpen:i,popupId:"media-library-popup",target:a||u.current,onClose:se,onSave:J,onClear:Q,saveLabel:s,popupClass:"ts-media-library prmr-popup",showHeader:!1,minWidth:o},React.createElement("div",{className:"ts-sticky-top uib b-bottom"},React.createElement("div",{className:"ts-input-icon flexify"},React.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M12.5 11H11.71L11.43 10.73C12.41 9.59 13 8.11 13 6.5C13 2.91 10.09 0 6.5 0C2.91 0 0 2.91 0 6.5C0 10.09 2.91 13 6.5 13C8.11 13 9.59 12.41 10.73 11.43L11 11.71V12.5L16 17.49L17.49 16L12.5 11ZM6.5 11C4.01 11 2 8.99 2 6.5C2 4.01 4.01 2 6.5 2C8.99 2 11 4.01 11 6.5C11 8.99 8.99 11 6.5 11Z",fill:"currentColor"})),React.createElement("input",{ref:d,type:"text",className:"autofocus",placeholder:"Search files",value:g,onChange:V=>S(V.target.value)}))),React.createElement("div",{className:`ts-form-group min-scroll ts-list-container ${H?"vx-disabled":""}`},P.length>0||te().length>0?React.createElement(React.Fragment,null,React.createElement("div",{className:"ts-file-list"},te().map(V=>{const z=V._id||`upload-${V.name}`;return React.createElement("div",{key:z,className:`ts-file ${C[z]?"selected":""} ${oe(V)?"ts-file-img":""}`,style:R(V),onClick:()=>O(V)},React.createElement("div",{className:"ts-file-info"},React.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M9 0L0 5V13L9 18L18 13V5L9 0ZM16 12L9 16L2 12V6L9 2L16 6V12Z",fill:"currentColor"})),React.createElement("code",null,V.name)),React.createElement("div",{className:"ts-remove-file"},React.createElement("svg",{width:"20",height:"20",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M12.4239 3.25C12.2079 3.25 11.9908 3.33022 11.8251 3.49073L7.30978 7.88732C6.97375 8.21414 6.97375 8.74449 7.30978 9.07131C7.64581 9.39812 8.19149 9.39812 8.52752 9.07131L11.6739 6.00692L11.6739 15.9C11.6739 16.3556 12.0525 16.725 12.5197 16.725C12.9869 16.725 13.3655 16.3556 13.3655 15.9L13.3655 6.00692L16.5119 9.07131C16.8479 9.39812 17.3936 9.39812 17.7296 9.07131C18.0657 8.74449 18.0657 8.21414 17.7296 7.88732L13.2143 3.49073C13.0486 3.33022 12.8316 3.25 12.6156 3.25L12.4239 3.25Z",fill:"currentColor"}),React.createElement("path",{d:"M5.17188 16C5.17188 15.5858 4.84402 15.25 4.43948 15.25C4.03495 15.25 3.70709 15.5858 3.70709 16V16.0549C3.70703 16.8531 3.70698 17.5055 3.76469 18.0316C3.82466 18.5774 3.95363 19.0607 4.24635 19.4857C4.54794 19.9226 4.94971 20.2516 5.44348 20.4865C5.91891 20.7134 6.47396 20.8128 7.08817 20.857C7.68568 20.9 8.42494 20.9 9.33715 20.9H15.7023C16.6145 20.9 17.3538 20.9 17.9513 20.857C18.5655 20.8128 19.1206 20.7134 19.596 20.4865C20.0898 20.2516 20.4915 19.9226 20.7931 19.4857C21.0858 19.0607 21.2148 18.5774 21.2748 18.0316C21.3325 17.5055 21.3325 16.8531 21.3324 16.0549V16C21.3324 15.5858 21.0046 15.25 20.6 15.25C20.1955 15.25 19.8676 15.5858 19.8676 16C19.8676 16.8631 19.8666 17.4573 19.818 17.9105C19.7703 18.355 19.6812 18.5956 19.5524 18.7816C19.4153 18.9782 19.2355 19.1296 19.0087 19.2351C18.7906 19.3355 18.4991 19.4049 17.9944 19.4431C17.4776 19.4821 16.8019 19.4833 15.7397 19.4833H9.29978C8.23757 19.4833 7.56186 19.4821 7.04512 19.4431C6.54041 19.4049 6.24886 19.3355 6.03081 19.2351C5.80404 19.1296 5.62416 18.9782 5.48711 18.7816C5.35829 18.5956 5.26921 18.355 5.22145 17.9105C5.17292 17.4573 5.17188 16.8631 5.17188 16Z",fill:"currentColor"}))),React.createElement("div",{className:"ts-remove-file ts-select-file"},React.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M19.5455 6.4965C19.9848 6.93584 19.9848 7.64815 19.5455 8.08749L10.1286 17.5043C9.6893 17.9437 8.97699 17.9437 8.53765 17.5043L4.45451 13.4212C4.01517 12.9819 4.01516 12.2695 4.4545 11.8302C4.89384 11.3909 5.60616 11.3909 6.0455 11.8302L9.33315 15.1179L17.9545 6.4965C18.3938 6.05716 19.1062 6.05716 19.5455 6.4965Z",fill:"#343C54"}))))}),P.map(V=>React.createElement("div",{key:V.id,className:`ts-file ${C[V.id]?"selected":""} ${oe(V)?"ts-file-img":""}`,style:R(V),onClick:()=>Y(V)},React.createElement("div",{className:"ts-file-info"},React.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M9 0L0 5V13L9 18L18 13V5L9 0ZM16 12L9 16L2 12V6L9 2L16 6V12Z",fill:"currentColor"})),React.createElement("code",null,V.name)),React.createElement("div",{className:"ts-remove-file ts-select-file"},React.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M19.5455 6.4965C19.9848 6.93584 19.9848 7.64815 19.5455 8.08749L10.1286 17.5043C9.6893 17.9437 8.97699 17.9437 8.53765 17.5043L4.45451 13.4212C4.01517 12.9819 4.01516 12.2695 4.4545 11.8302C4.89384 11.3909 5.60616 11.3909 6.0455 11.8302L9.33315 15.1179L17.9545 6.4965C18.3938 6.05716 19.1062 6.05716 19.5455 6.4965Z",fill:"#343C54"})))))),y&&React.createElement("div",null,React.createElement("a",{href:"#",onClick:V=>{V.preventDefault(),V.stopPropagation(),g.trim()?j(!0):L(x)},className:`ts-btn ts-btn-4 ${q?"vx-pending":""}`},React.createElement("svg",{width:"18",height:"18",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M21.6009 10.4593C22.001 10.3521 22.2384 9.94088 22.1312 9.54078C21.59 7.52089 20.3974 5.73603 18.7384 4.46302C17.0793 3.19001 15.0466 2.5 12.9555 2.5C10.8644 2.5 8.83164 3.19001 7.17262 4.46302C6.12405 5.26762 5.26179 6.2767 4.63257 7.42036L2.86504 6.92617C2.76093 6.89707 2.65423 6.89133 2.55153 6.9068C2.46222 6.91962 2.37374 6.94889 2.29039 6.99582C1.92945 7.19903 1.80158 7.65636 2.00479 8.0173L3.73942 11.0983C3.83701 11.2717 3.99946 11.3991 4.19104 11.4527C4.30333 11.4841 4.42023 11.4886 4.53266 11.4673C4.61373 11.4524 4.69254 11.4242 4.7657 11.383L7.84641 9.64831C8.11073 9.49948 8.25936 9.20608 8.22302 8.90493C8.18668 8.60378 7.9725 8.35417 7.68037 8.27249L6.1241 7.83737C6.6343 6.99996 7.29751 6.2579 8.08577 5.65305C9.48282 4.58106 11.1946 4 12.9555 4C14.7164 4 16.4282 4.58106 17.8252 5.65305C19.2223 6.72504 20.2266 8.22807 20.6823 9.92901C20.7895 10.3291 21.2008 10.5665 21.6009 10.4593Z",fill:"#343C54"}),React.createElement("path",{d:"M4.30739 13.5387C3.90729 13.6459 3.66985 14.0572 3.77706 14.4573C4.31829 16.4771 5.51089 18.262 7.16991 19.535C8.82892 20.808 10.8616 21.498 12.9528 21.498C15.0439 21.498 17.0766 20.808 18.7356 19.535C19.7859 18.7291 20.6493 17.7181 21.2787 16.5722L23.0083 17.0557C23.1218 17.0961 23.2447 17.1091 23.3661 17.0917C23.5554 17.0658 23.7319 16.968 23.8546 16.8116C24.0419 16.573 24.0669 16.245 23.9181 15.9807L22.1835 12.8996C22.0859 12.7263 21.9234 12.5988 21.7319 12.5453C21.64 12.5196 21.5451 12.5119 21.4521 12.5216C21.3493 12.5317 21.2488 12.5629 21.1571 12.6146L18.0764 14.3493C17.7155 14.5525 17.5876 15.0099 17.7909 15.3708C17.9016 15.5675 18.0879 15.695 18.2929 15.7373L19.7875 16.1552C19.2768 16.9949 18.6125 17.7388 17.8225 18.345C16.4255 19.417 14.7137 19.998 12.9528 19.998C11.1918 19.998 9.4801 19.417 8.08305 18.345C6.686 17.273 5.68171 15.77 5.22595 14.069C5.11874 13.6689 4.70749 13.4315 4.30739 13.5387Z",fill:"#343C54"})),"Load more"))):React.createElement("div",{className:"ts-empty-user-tab"},React.createElement("p",null,H?"Loading files...":"No files found")))))}function Wr(t){return t==null?!0:typeof t=="string"?t.trim()==="":Array.isArray(t)?t.length===0:typeof t=="object"?Object.keys(t).length===0:!1}const Me=({field:t,value:n,errors:r=[],contentLength:s,className:l=""})=>{const o=Wr(n),a=t.props?.maxlength;return e.createElement("label",{className:l},t.label,r.length>0?e.createElement("span",{className:"is-required"},r[0]):e.createElement(e.Fragment,null,!t.required&&o&&e.createElement("span",{className:"is-required"},"Optional"),a&&!o&&s!==void 0&&e.createElement("span",{className:"is-required ts-char-counter"},s,"/",String(t.props?.maxlength??""))),t.description&&e.createElement("div",{className:"vx-dialog"},e.createElement(we,null),e.createElement("div",{className:"vx-dialog-content min-scroll"},e.createElement("p",null,t.description))))},mn=t=>Object.values(t||{}).filter(Boolean).length,Yr=(t,n)=>!t||mn(t)===0?"":n.filter(s=>t[s.value]).map(s=>s.label).join(", "),Gr=({field:t,value:n,onChange:r,onBlur:s,icons:l})=>{const o=t.props?.display_as||"popup",a=t.props?.choices||[],i=e.useRef(null),[c,u]=e.useState(!1),[d,m]=e.useState(""),f=e.useRef(null),p=n||{},v=(t.validation?.errors?.[0]||"").length>0,k=e.useCallback(()=>{m(""),u(!0)},[]),x=e.useCallback(()=>{u(!1),m("")},[]),_=e.useCallback(N=>{const M={...p};M[N.value]?delete M[N.value]:M[N.value]=!0,r(M)},[p,r]),C=e.useCallback(()=>{s?.(),x()},[s,x]),D=e.useCallback(()=>{r({}),m("")},[r]),g=a.length>=15,S=e.useMemo(()=>d.trim()?a.filter(N=>N.label.toLowerCase().includes(d.toLowerCase())):null,[d,a]),A=S||a,w=e.useMemo(()=>Yr(p,a),[p,a]),E=me(l?.popup_icon,on),T=me(l?.tsSearchIcon,ft),b=(N=!1)=>(console.group("MultiselectField - Data Structure Debug"),console.log("Field label:",t.label),console.log("Field props:",t.props),console.log("Choices array length:",a.length),console.log("All choices:",a),A.length>0&&(console.log("First choice:",A[0]),console.log("First choice.value:",A[0].value),console.log("First choice.label:",A[0].label),console.log("First choice.icon:",A[0].icon),console.log("First choice.icon type:",typeof A[0].icon),console.log("First choice keys:",Object.keys(A[0]))),console.groupEnd(),e.createElement("div",{className:`ts-term-dropdown ts-md-group ts-multilevel-dropdown ${N?"inline-multilevel min-scroll":""}`},e.createElement("ul",{className:"simplify-ul ts-term-dropdown-list"},A.map(M=>e.createElement("li",{key:M.value,className:p[M.value]?"ts-selected":""},e.createElement("a",{href:"#",className:"flexify",onClick:F=>{F.preventDefault(),_(M)}},e.createElement("div",{className:"ts-checkbox-container"},e.createElement("label",{className:"container-checkbox"},e.createElement("input",{type:"checkbox",value:M.value,checked:!!p[M.value],disabled:!0,hidden:!0}),e.createElement("span",{className:"checkmark"}))),e.createElement("span",null,M.label),e.createElement("div",{className:"ts-term-icon"},e.createElement("span",{dangerouslySetInnerHTML:{__html:M.icon||""}})))))),S&&S.length===0&&e.createElement("div",{className:"ts-empty-user-tab"},e.createElement("span",{dangerouslySetInnerHTML:{__html:T}}),e.createElement("p",null,"No results found"))));return o==="inline"?e.createElement("div",{className:`ts-form-group inline-terms-wrapper ts-inline-filter field-key-${t.key} ${v?"ts-has-errors":""} ${t.css_class||""} ${t.hidden?"hidden":""}`},e.createElement(Me,{field:t,value:null,className:"ts-form-label"}),b(!0)):e.createElement("div",{className:`ts-form-group field-key-${t.key} ${v?"ts-has-errors":""} ${t.css_class||""} ${t.hidden?"hidden":""}`},e.createElement(Me,{field:t,value:mn(p)>0?w:null,className:"ts-form-label"}),e.createElement("div",{ref:i,className:`ts-filter ts-popup-target ${w?"ts-filled":""}`,role:"button",tabIndex:0,onClick:k,onKeyDown:N=>{(N.key==="Enter"||N.key===" ")&&(N.preventDefault(),k())},"aria-label":`Select options: ${w||t.props?.placeholder}`},e.createElement("span",{dangerouslySetInnerHTML:{__html:E}}),e.createElement("div",{className:"ts-filter-text"},w?e.createElement("span",null,w):e.createElement("span",null,String(t.props?.placeholder||""))),e.createElement("div",{className:"ts-down-icon"})),e.createElement(Ne,{isOpen:c,target:i,title:"",icon:E,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:C,onClear:D,onClose:x},g&&e.createElement("div",{className:"ts-sticky-top uib b-bottom"},e.createElement("div",{className:"ts-input-icon flexify"},e.createElement("span",{dangerouslySetInnerHTML:{__html:T}}),e.createElement("input",{ref:f,type:"text",className:"autofocus",placeholder:"Search",value:d,onChange:N=>m(N.target.value)}))),b()))},pn=10,gt=({terms:t,value:n,multiple:r,onSelectTerm:s,activeList:l,setActiveList:o,parentTerm:a,previousList:i,listKey:c})=>{const[u,d]=e.useState(1),m=e.useCallback(v=>n[v.slug]?!0:v.children&&v.children.length>0?v.children.some(m):!1,[n]),f=e.useCallback(v=>{v.children&&v.children.length>0?o(`terms_${v.id}`):s(v)},[s,o]),p=e.useCallback(()=>{i&&o(i)},[i,o]),h=t.filter(v=>v.children&&v.children.length>0);return l!==c?e.createElement(e.Fragment,null,h.map(v=>e.createElement(gt,{key:`terms_${v.id}`,terms:v.children||[],value:n,multiple:r,onSelectTerm:s,activeList:l,setActiveList:o,parentTerm:v,previousList:c,listKey:`terms_${v.id}`}))):e.createElement(e.Fragment,null,e.createElement("ul",{className:"simplify-ul ts-term-dropdown-list"},c!=="toplevel"&&e.createElement("li",{className:"ts-term-centered"},e.createElement("a",{href:"#",className:"flexify",onClick:v=>{v.preventDefault(),p()}},e.createElement("div",{className:"ts-left-icon"}),e.createElement("span",null,"Go back"))),a&&e.createElement("li",{className:"ts-parent-item"},e.createElement("a",{href:"#",className:"flexify",onClick:v=>{v.preventDefault(),s(a)}},e.createElement("div",{className:"ts-checkbox-container"},e.createElement("label",{className:r?"container-checkbox":"container-radio"},e.createElement("input",{type:r?"checkbox":"radio",value:a.slug,checked:!!n[a.slug],disabled:!0,hidden:!0}),e.createElement("span",{className:"checkmark"}))),e.createElement("span",null,a.label),e.createElement("div",{className:"ts-term-icon"},e.createElement("span",{dangerouslySetInnerHTML:{__html:a.icon||""}})))),t.slice(0,u*pn).map(v=>e.createElement("li",{key:v.slug,className:n[v.slug]||m(v)?"ts-selected":""},e.createElement("a",{href:"#",className:"flexify",onClick:k=>{k.preventDefault(),f(v)}},e.createElement("div",{className:"ts-checkbox-container"},e.createElement("label",{className:r?"container-checkbox":"container-radio"},e.createElement("input",{type:r?"checkbox":"radio",value:v.slug,checked:!!n[v.slug],disabled:!0,hidden:!0}),e.createElement("span",{className:"checkmark"}))),e.createElement("span",null,v.label),v.children&&v.children.length>0&&e.createElement("div",{className:"ts-right-icon"}),e.createElement("div",{className:"ts-term-icon"},e.createElement("span",{dangerouslySetInnerHTML:{__html:v.icon||""}}))))),u*pn<t.length&&e.createElement("li",{className:"ts-term-centered"},e.createElement("a",{href:"#",onClick:v=>{v.preventDefault(),d(u+1)},className:"flexify"},e.createElement("div",{className:"ts-term-icon"},e.createElement("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z",fill:"currentColor"}))),e.createElement("span",null,"Load more")))),h.map(v=>e.createElement(gt,{key:`terms_${v.id}`,terms:v.children||[],value:n,multiple:r,onSelectTerm:s,activeList:l,setActiveList:o,parentTerm:v,previousList:c,listKey:`terms_${v.id}`})))},Ht=t=>{const n=[],r=s=>{s.forEach(l=>{n.push(l),l.children&&l.children.length>0&&r(l.children)})};return r(t),n},Vt=t=>Object.values(t||{}).filter(Boolean).length,Xr=(t,n)=>!t||Vt(t)===0?"":Ht(n).filter(l=>t[l.slug]).map(l=>l.label).join(", "),Jr=({field:t,value:n,onChange:r,onBlur:s,icons:l})=>{const o=t.props?.display_as||"popup",a=t.props?.multiple===!0,i=t.props?.terms||[],c=t.props?.min,u=t.props?.max,d=e.useRef(null),[m,f]=e.useState(!1),[p,h]=e.useState("toplevel"),[v,k]=e.useState(""),x=e.useRef(null),_=n||{},D=(t.validation?.errors?.[0]||"").length>0,g=e.useMemo(()=>Ht(i).length,[i]),S=e.useCallback(()=>{k(""),h("toplevel"),f(!0)},[]),A=e.useCallback(()=>{f(!1),k(""),h("toplevel")},[]),w=e.useCallback(L=>{const j={..._};if(a){if(j[L.slug])delete j[L.slug];else{if(u&&u>0&&Object.values(j).filter(Boolean).length>=u){t.validation&&(t.validation.errors=[`You can select up to ${u} items`]);return}j[L.slug]=!0}if(t.validation?.errors?.length){const Y=Object.values(j).filter(Boolean).length;(!u||Y<=u)&&(t.validation.errors=[])}}else Object.keys(j).forEach(Y=>delete j[Y]),j[L.slug]=!0;r(j)},[_,a,u,r,t.validation]),E=e.useCallback(()=>{if(c&&c>0&&Vt(_)<c){t.validation&&(t.validation.errors=[`Please select at least ${c} items`]);return}s?.(),A()},[s,A,c,_,t.validation]),T=e.useCallback(()=>{r({}),k(""),h("toplevel")},[r]),b=g>=15,N=e.useMemo(()=>v.trim()?Ht(i).filter(j=>j.label.toLowerCase().includes(v.toLowerCase())):null,[v,i]),M=e.useMemo(()=>Xr(_,i),[_,i]),F=me(l?.popup_icon,on),q=me(l?.tsSearchIcon,ft),I=()=>!N||N.length===0?e.createElement("div",{className:"ts-empty-user-tab"},e.createElement("span",{dangerouslySetInnerHTML:{__html:q}}),e.createElement("p",null,"No results found")):e.createElement("div",{className:"ts-term-dropdown ts-md-group ts-multilevel-dropdown"},e.createElement("ul",{className:"simplify-ul ts-term-dropdown-list"},N.map(L=>e.createElement("li",{key:L.slug,className:_[L.slug]?"ts-selected":""},e.createElement("a",{href:"#",className:"flexify",onClick:j=>{j.preventDefault(),w(L)}},e.createElement("div",{className:"ts-checkbox-container"},e.createElement("label",{className:a?"container-checkbox":"container-radio"},e.createElement("input",{type:a?"checkbox":"radio",value:L.slug,checked:!!_[L.slug],disabled:!0,hidden:!0}),e.createElement("span",{className:"checkmark"}))),e.createElement("span",null,L.label),e.createElement("div",{className:"ts-term-icon"},e.createElement("span",{dangerouslySetInnerHTML:{__html:L.icon||""}})))))));return o==="inline"?e.createElement("div",{className:`ts-form-group inline-terms-wrapper ts-inline-filter field-key-${t.key} ${D?"ts-has-errors":""} ${t.css_class||""} ${t.hidden?"hidden":""}`},e.createElement(Me,{field:t,value:null,className:"ts-form-label"}),N?I():e.createElement("div",{className:"ts-term-dropdown ts-md-group ts-multilevel-dropdown inline-multilevel min-scroll"},e.createElement(gt,{terms:i,value:_,multiple:a,onSelectTerm:w,activeList:p,setActiveList:h,listKey:"toplevel"}))):e.createElement("div",{className:`ts-form-group field-key-${t.key} ${D?"ts-has-errors":""} ${t.css_class||""} ${t.hidden?"hidden":""}`},e.createElement(Me,{field:t,value:Vt(_)>0?M:null,className:"ts-form-label"}),e.createElement("div",{ref:d,className:`ts-filter ts-popup-target ${M?"ts-filled":""}`,role:"button",tabIndex:0,onClick:S,onKeyDown:L=>{(L.key==="Enter"||L.key===" ")&&(L.preventDefault(),S())},"aria-label":`Select ${t.props?.taxonomy?.label||"terms"}: ${M||t.props?.placeholder}`},e.createElement("span",{dangerouslySetInnerHTML:{__html:F}}),e.createElement("div",{className:"ts-filter-text"},M?e.createElement("span",null,M):e.createElement("span",null,String(t.props?.placeholder||""))),e.createElement("div",{className:"ts-down-icon"})),e.createElement(Ne,{isOpen:m,target:d,title:"",icon:F,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:E,onClear:T,onClose:A},b&&e.createElement("div",{className:"ts-sticky-top uib b-bottom"},e.createElement("div",{className:"ts-input-icon flexify"},e.createElement("span",{dangerouslySetInnerHTML:{__html:q}}),e.createElement("input",{ref:x,type:"text",className:"autofocus",placeholder:`Search ${t.props?.taxonomy?.label||""}`,value:v,onChange:L=>k(L.target.value)}))),N?I():e.createElement("div",{className:"ts-term-dropdown ts-md-group ts-multilevel-dropdown"},e.createElement(gt,{terms:i,value:_,multiple:a,onSelectTerm:w,activeList:p,setActiveList:h,listKey:"toplevel"}))))},Kr=({value:t,onChange:n,onSelect:r,onBlur:s,placeholder:l="Enter address",className:o="ts-filter",iconHtml:a})=>{const i=e.useRef(null),c=e.useRef(null);e.useEffect(()=>{if(!i.current)return;let d=0,m=null,f=!1,p=!1;console.log("[AddressAutocomplete] Initializing autocomplete..."),console.log("[AddressAutocomplete] window.Voxel:",window.Voxel),console.log("[AddressAutocomplete] window.Voxel?.Maps:",window.Voxel?.Maps),console.log("[AddressAutocomplete] window.Voxel?.Maps?.Autocomplete:",window.Voxel?.Maps?.Autocomplete);const h=()=>{if(!i.current||p)return;if(!window.Voxel?.Maps?.Autocomplete){console.error("[AddressAutocomplete] ERROR: Voxel.Maps.Autocomplete not available");return}p=!0,m&&(clearInterval(m),m=null);const x=new window.Voxel.Maps.Autocomplete(i.current,_=>{if(_){const C=_.address,D=_.latlng.getLatitude(),g=_.latlng.getLongitude();n(C),r(C,D,g)}},{});c.current=x,console.log("[AddressAutocomplete] Autocomplete initialized successfully")},v=()=>{if(!p){if(d++,!f&&window.Voxel?.Maps?.await&&(f=!0,console.log("[AddressAutocomplete] Registering Voxel.Maps.await callback..."),window.Voxel.Maps.await(()=>{console.log("[AddressAutocomplete] Voxel.Maps.await callback fired!"),window.Voxel?.Maps?.Autocomplete&&h()})),window.Voxel?.Maps?.Autocomplete){console.log("[AddressAutocomplete] Autocomplete class available, initializing..."),h();return}d>=100?(m&&(clearInterval(m),m=null),console.error("[AddressAutocomplete] ERROR: Voxel.Maps.Autocomplete not available after 100 retries (10 seconds)")):d%20===0&&console.log(`[AddressAutocomplete] Still waiting for Autocomplete... (${d}/100 retries)`)}};m=setInterval(v,100),v();const k=()=>{console.log("[AddressAutocomplete] maps:loaded event received"),window.Voxel?.Maps?.Autocomplete&&h()};return document.addEventListener("maps:loaded",k),()=>{m&&clearInterval(m),document.removeEventListener("maps:loaded",k),c.current=null}},[]);const u=d=>{n(d.target.value)};return e.createElement(e.Fragment,null,e.createElement("div",{className:"ts-input-icon flexify"},a&&e.createElement("span",{dangerouslySetInnerHTML:{__html:a}}),e.createElement("input",{ref:i,type:"text",value:t,onChange:u,onBlur:s,className:o,placeholder:l,autoComplete:"off"})))},Qr=({latitude:t,longitude:n,onLocationChange:r,zoom:s=13})=>{const l=e.useRef(null),o=e.useRef(null),a=e.useRef(null),i=e.useRef(null),c=e.useCallback((d,m)=>new Promise(f=>{if(!window.Voxel?.Maps){f(void 0);return}window.Voxel.Maps.getGeocoder().geocode({lat:d,lng:m},h=>{f(h.address)},()=>{f(void 0)})}),[]),u=e.useCallback(()=>!window.Voxel?.Maps||typeof t!="number"||typeof n!="number"?null:new window.Voxel.Maps.LatLng(t,n),[t,n]);return e.useEffect(()=>{if(l.current)return console.log("[MapPicker] Initializing map..."),console.log("[MapPicker] window.Voxel:",window.Voxel),console.log("[MapPicker] window.Voxel?.Maps:",window.Voxel?.Maps),console.log("[MapPicker] window.Voxel?.Maps?.await:",window.Voxel?.Maps?.await),console.log("[MapPicker] window.Voxel?.alert:",window.Voxel?.alert),window.Voxel?.Maps?.await?.(()=>{if(console.log("[MapPicker] Voxel.Maps.await callback fired!"),!l.current||o.current)return;if(!window.Voxel?.Maps){console.error("[MapPicker] ERROR: Voxel.Maps not available even after await()");return}const d=new window.Voxel.Maps.Map({el:l.current,zoom:s}),m=i.current?.innerHTML||`
				<div class="map-marker marker-type-icon mi-static">
					<svg width="80" height="80" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M12.4889 2.92383C8.95113 2.92383 6.08319 5.79177 6.08319 9.32956C6.08319 11.6495 6.94359 13.7621 7.97903 15.4696C9.01631 17.18 10.2563 18.5287 11.0825 19.3353C11.8807 20.1145 13.1282 20.1132 13.9244 19.3314C14.7468 18.5241 15.9797 17.1754 17.0107 15.4655C18.04 13.7585 18.8947 11.6473 18.8947 9.32956C18.8947 5.79177 16.0267 2.92383 12.4889 2.92383ZM9.48926 9.32812C9.48926 7.67127 10.8324 6.32812 12.4893 6.32812C14.1461 6.32812 15.4893 7.67127 15.4893 9.32812C15.4893 10.985 14.1461 12.3281 12.4893 12.3281C10.8324 12.3281 9.48926 10.985 9.48926 9.32812Z" fill="#343C54"/>
					</svg>
				</div>
			`,f=new window.Voxel.Maps.Marker({template:m}),p=u();p&&(d.setCenter(p),f.setPosition(p),f.setMap(d)),d.addListener("click",async h=>{const v=d.getClickPosition(h);f.getPosition()?f.setPosition(v):(f.setPosition(v),f.setMap(d));const k=v.getLatitude(),x=v.getLongitude(),_=await c(k,x);r(k,x,_)}),o.current=d,a.current=f}),()=>{o.current=null,a.current=null}},[]),e.useEffect(()=>{if(!o.current||!a.current||!window.Voxel?.Maps)return;const d=u();d&&(a.current.setPosition(d),o.current.setCenter(d))},[t,n,u]),e.createElement(e.Fragment,null,e.createElement("div",{ref:l,className:"location-field-map"}),e.createElement("div",{ref:i,className:"hidden",style:{display:"none"}},e.createElement("div",{className:"map-marker marker-type-icon mi-static"},e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M12.4889 2.92383C8.95113 2.92383 6.08319 5.79177 6.08319 9.32956C6.08319 11.6495 6.94359 13.7621 7.97903 15.4696C9.01631 17.18 10.2563 18.5287 11.0825 19.3353C11.8807 20.1145 13.1282 20.1132 13.9244 19.3314C14.7468 18.5241 15.9797 17.1754 17.0107 15.4655C18.04 13.7585 18.8947 11.6473 18.8947 9.32956C18.8947 5.79177 16.0267 2.92383 12.4889 2.92383ZM9.48926 9.32812C9.48926 7.67127 10.8324 6.32812 12.4893 6.32812C14.1461 6.32812 15.4893 7.67127 15.4893 9.32812C15.4893 10.985 14.1461 12.3281 12.4893 12.3281C10.8324 12.3281 9.48926 10.985 9.48926 9.32812Z",fill:"#343C54"})))))},Rr=({field:t,value:n,onChange:r,onBlur:s,icons:l})=>{const[o,a]=e.useState(n?.address||""),[i,c]=e.useState(n?.latitude||null),[u,d]=e.useState(n?.longitude||null),[m,f]=e.useState(n?.map_picker||!1),[p,h]=e.useState(!1),v=t.validation?.errors?.[0]||"",k=v.length>0,x=me(l?.tsLocationIcon,Ar),_=me(l?.tsMylocationIcon,Tr),C=e.useCallback(b=>{r({address:o,latitude:i,longitude:u,map_picker:m,...b})},[o,i,u,m,r]),D=b=>{a(b),C({address:b})},g=(b,N,M)=>{a(b),c(N),d(M),C({address:b,latitude:N,longitude:M})},S=()=>{const b=!m;f(b),C({map_picker:b})},A=b=>{const N=parseFloat(b.target.value)||null;c(N),C({latitude:N})},w=b=>{const N=parseFloat(b.target.value)||null;d(N),C({longitude:N})},E=(b,N,M)=>{c(b),d(N),M?(a(M),C({latitude:b,longitude:N,address:M})):C({latitude:b,longitude:N})},T=async()=>{if(!("geolocation"in navigator)){window.Voxel?.alert?.("Could not determine your location.","error");return}h(!0),navigator.geolocation.getCurrentPosition(async b=>{const N=b.coords.latitude,M=b.coords.longitude;window.Voxel?.Maps?(window.Voxel?.Maps?.getGeocoder?.()).geocode({lat:N,lng:M},q=>{const I=q.address||"";a(I),c(N),d(M),C({address:I,latitude:N,longitude:M}),h(!1)},()=>{window.Voxel?.alert?.("Could not determine your address.","error"),c(N),d(M),C({latitude:N,longitude:M}),h(!1)}):(window.Voxel?.alert?.("Could not determine your address.","error"),c(N),d(M),C({latitude:N,longitude:M}),h(!1))},b=>{h(!1),window.Voxel?.alert?.("Could not determine your location.","error")},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})};return e.createElement("div",{className:`ts-form-group ts-location-field form-field-grid field-key-${t.key} ${k?"ts-has-errors":""} ${t.css_class||""} ${t.hidden?"hidden":""}`},e.createElement("div",{className:"ts-form-group"},e.createElement("label",null,t.label,k?e.createElement("span",{className:"is-required"},v):!t.required&&e.createElement("span",{className:"is-required"},"Optional"),t.description&&e.createElement("div",{className:"vx-dialog"},e.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M8 0C3.6 0 0 3.6 0 8C0 12.4 3.6 16 8 16C12.4 16 16 12.4 16 8C16 3.6 12.4 0 8 0ZM8 12C7.4 12 7 11.6 7 11C7 10.4 7.4 10 8 10C8.6 10 9 10.4 9 11C9 11.6 8.6 12 8 12ZM9 9H7V4H9V9Z",fill:"currentColor"})),e.createElement("div",{className:"vx-dialog-content min-scroll"},e.createElement("p",null,t.description)))),e.createElement("div",{style:{position:"relative"}},e.createElement(Kr,{value:o,onChange:D,onSelect:g,onBlur:s,placeholder:String(t.props?.placeholder??"Enter address"),iconHtml:x}))),e.createElement("div",{className:"ts-form-group"},e.createElement("a",{href:"#",className:"ts-btn ts-btn-4 form-btn ts-btn-large",onClick:b=>{b.preventDefault(),T()}},e.createElement("span",{dangerouslySetInnerHTML:{__html:_}}),e.createElement("p",null,p?"Locating...":"Geolocate my address"))),e.createElement("div",{className:"ts-form-group switcher-label"},e.createElement("label",null,e.createElement("div",{className:"switch-slider"},e.createElement("div",{className:"onoffswitch"},e.createElement("input",{type:"checkbox",checked:m,onChange:S,className:"onoffswitch-checkbox"}),e.createElement("label",{className:"onoffswitch-label",onClick:b=>{b.preventDefault(),S()}}))),"Pick the location manually?")),m&&e.createElement(e.Fragment,null,e.createElement("div",{className:"ts-form-group"},e.createElement("label",null,"Pick on the map"),e.createElement(Qr,{latitude:i||40.7128,longitude:u||-74.006,onLocationChange:E,zoom:Number(t.props?.default_zoom??13)})),e.createElement("div",{className:"ts-form-group vx-1-2"},e.createElement("label",null,"Latitude"),e.createElement("div",{className:"ts-input-icon flexify"},e.createElement("span",{dangerouslySetInnerHTML:{__html:x}}),e.createElement("input",{type:"number",value:i||"",onChange:A,onBlur:s,max:90,min:-90,className:"ts-filter",placeholder:"Latitude",step:"any"}))),e.createElement("div",{className:"ts-form-group vx-1-2"},e.createElement("label",null,"Longitude"),e.createElement("div",{className:"ts-input-icon flexify"},e.createElement("span",{dangerouslySetInnerHTML:{__html:x}}),e.createElement("input",{type:"number",value:u||"",onChange:w,onBlur:s,max:180,min:-180,className:"ts-filter",placeholder:"Longitude",step:"any"})))))},$r=t=>{if(!t)return"";try{const n=new Date(t+"T00:00:00");return isFinite(n.getTime())?n.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):""}catch{return t}},fn=t=>{if(!t)return null;try{const n=new Date(t+"T00:00:00");return isFinite(n.getTime())?n:null}catch{return null}},es=t=>{if(!t)return null;const n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0");return`${n}-${r}-${s}`},ts=({field:t,value:n,onChange:r,onBlur:s,icons:l})=>{const o=t.props?.enable_timepicker===!0,a=e.useRef(null),i=typeof n=="string"?{date:n,time:null}:n||{date:null,time:null},[c,u]=e.useState(!1),[d,m]=e.useState(()=>fn(i.date)),p=(t.validation?.errors?.[0]||"").length>0,h=e.useCallback(()=>{m(fn(i.date)),u(!0)},[i.date]),v=e.useCallback(()=>{u(!1)},[]),k=e.useCallback(A=>{m(A)},[]),x=e.useCallback(A=>{const E=es(A!==void 0?A:d);r(o?{date:E,time:i.time}:E||""),s?.(),v()},[d,o,i.time,r,s,v]),_=e.useCallback(()=>{m(null),r(o?{date:null,time:null}:"")},[o,r]),C=e.useCallback(A=>{const w=A.target.value;r({date:i.date,time:w})},[i.date,r]),D=e.useMemo(()=>$r(i.date)||String(t.props?.placeholder||"")||t.label,[i.date,t.props,t.label]),g=me(l?.tsCalendarIcon,Mr),S=me(l?.tsClockIcon,ln);return e.createElement("div",{className:`ts-form-group field-key-${t.key} ${p?"ts-has-errors":""} ${t.css_class||""} ${t.hidden?"hidden":""}`},e.createElement(Me,{field:t,value:i.date,className:"ts-form-label"}),e.createElement("div",{ref:a,className:`ts-filter ts-popup-target ${i.date?"ts-filled":""}`,role:"button",tabIndex:0,onClick:h,onKeyDown:A=>{(A.key==="Enter"||A.key===" ")&&(A.preventDefault(),h())},"aria-label":`Select date: ${D}`},e.createElement("span",{dangerouslySetInnerHTML:{__html:g}}),e.createElement("div",{className:"ts-filter-text"},D)),e.createElement(Ne,{isOpen:c,target:a,title:"",icon:g,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:x,onClear:_,onClose:v},e.createElement(zr,{value:d,onChange:k,onSelect:x})),o&&e.createElement("div",{className:"ts-form-group",style:{marginTop:"12px"}},e.createElement(Me,{field:{...t,label:"Time",required:!1},value:i.time}),e.createElement("div",{className:"ts-input-icon flexify"},e.createElement("span",{dangerouslySetInnerHTML:{__html:S}}),e.createElement("input",{type:"time",value:i.time||"",onChange:C,className:"ts-filter",placeholder:"HH:MM"}))))},ns=({field:t,value:n,onChange:r,onBlur:s})=>{const l=t.validation?.errors?.[0]||"",o=l.length>0;return e.createElement("div",{className:`ts-form-group vx-text-field field-key-${t.key} ${o?"ts-has-errors":""} ${t.css_class||""} ${t.hidden?"hidden":""}`},e.createElement("label",null,t.label,o?e.createElement("span",{className:"is-required"},l):!t.required&&e.createElement("span",{className:"is-required"},"Optional"),t.description&&e.createElement("div",{className:"vx-dialog"},e.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M8 0C3.6 0 0 3.6 0 8C0 12.4 3.6 16 8 16C12.4 16 16 12.4 16 8C16 3.6 12.4 0 8 0ZM8 12C7.4 12 7 11.6 7 11C7 10.4 7.4 10 8 10C8.6 10 9 10.4 9 11C9 11.6 8.6 12 8 12ZM9 9H7V4H9V9Z",fill:"currentColor"})),e.createElement("div",{className:"vx-dialog-content min-scroll"},e.createElement("p",null,t.description)))),e.createElement("div",{className:"input-container"},e.createElement("input",{placeholder:String(t.props?.placeholder??"Time"),type:"time",value:n||"",onChange:a=>r(a.target.value),onBlur:s,onFocus:a=>{try{a.target.showPicker?.()}catch{}},className:"ts-filter",required:t.required,title:t.label})))},rs=({field:t,value:n,onChange:r,onBlur:s,icons:l})=>{const[o,a]=e.useState(n),[i,c]=e.useState(""),u=Array.isArray(t.props?.list)?t.props.list:[],d=String(t.props?.default??"+00:00 (site default)"),f=(t.validation?.errors?.[0]||"").length>0,p=e.useMemo(()=>i.trim()?u.filter(w=>w.toLowerCase().includes(i.toLowerCase())):u,[i,u]),h=w=>{a(w),r(w),s?.()},v=()=>{a(null),r(null)},k=o||d,[x,_]=e.useState(!1),C=e.useRef(null),D=()=>{c(""),_(!0)},g=()=>{_(!1),c("")},S=me(l?.tsClockIcon,ln),A=me(l?.tsSearchIcon,ft);return e.createElement("div",{className:`ts-form-group field-key-${t.key} ${f?"ts-has-errors":""} ${t.css_class||""} ${t.hidden?"hidden":""}`},e.createElement(Me,{field:t,value:o,errors:t.validation?.errors||[]}),e.createElement("div",{ref:C,className:`ts-filter ts-popup-target ${o?"ts-filled":""}`,role:"button",tabIndex:0,onClick:D,onKeyDown:w=>{(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),D())},"aria-label":`Select timezone: ${k}`},e.createElement("span",{dangerouslySetInnerHTML:{__html:S}}),e.createElement("div",{className:"ts-filter-text"},e.createElement("span",null,k))),e.createElement(Ne,{isOpen:x,target:C,title:"",icon:S,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:()=>{r(o),s?.(),g()},onClear:v,onClose:g},e.createElement("div",{className:"ts-sticky-top uib b-bottom"},e.createElement("div",{className:"ts-input-icon flexify"},e.createElement("span",{dangerouslySetInnerHTML:{__html:A}}),e.createElement("input",{type:"text",value:i,onChange:w=>c(w.target.value),placeholder:"Search timezones",className:"autofocus"}))),e.createElement("div",{className:"ts-term-dropdown ts-md-group ts-multilevel-dropdown"},e.createElement("ul",{className:"simplify-ul ts-term-dropdown-list min-scroll"},p.length>0?p.map(w=>e.createElement("li",{key:w},e.createElement("a",{href:"#",className:"flexify",onClick:E=>{E.preventDefault(),h(w)}},e.createElement("div",{className:"ts-radio-container"},e.createElement("label",{className:"container-radio"},e.createElement("input",{type:"radio",value:w,checked:o===w,disabled:!0,hidden:!0}),e.createElement("span",{className:"checkmark"}))),e.createElement("span",null,w)))):e.createElement("div",{className:"ts-empty-user-tab"},e.createElement("span",{dangerouslySetInnerHTML:{__html:A}}),e.createElement("p",null,"No timezones found"))))))},Je=({checked:t,onChange:n,label:r,className:s=""})=>e.createElement("div",{className:`ts-form-group switcher-label ${s}`},e.createElement("label",null,e.createElement("div",{className:"switch-slider"},e.createElement("div",{className:"onoffswitch"},e.createElement("input",{type:"checkbox",className:"onoffswitch-checkbox",checked:t,onChange:l=>n(l.target.checked)}),e.createElement("label",{className:"onoffswitch-label",onClick:l=>{l.preventDefault(),n(!t)}}))),r&&e.createElement("span",null,r))),hn=({value:t,onChange:n,onSelect:r,minDate:s,maxDate:l})=>{const o=e.useRef(null),a=e.useRef(null),i=e.useRef(null);return e.useEffect(()=>{if(!(!o.current||!a.current||!window.Pikaday))return i.current=new window.Pikaday({field:a.current,container:o.current,bound:!1,format:"YYYY-MM-DD",firstDay:1,minDate:s,maxDate:l,defaultDate:t?new Date(t):new Date,setDefaultDate:!!t,showDaysInNextAndPreviousMonths:!0,enableSelectionDaysInNextAndPreviousMonths:!0,onSelect:function(c){const u=c.getFullYear(),d=String(c.getMonth()+1).padStart(2,"0"),m=String(c.getDate()).padStart(2,"0"),f=`${u}-${d}-${m}`;n(f),r&&r()}}),t&&i.current.setDate(new Date(t),!0),()=>{i.current&&(i.current.destroy(),i.current=null)}},[]),e.useEffect(()=>{if(i.current&&t){const c=i.current.getDate(),u=new Date(t);(!c||c.getTime()!==u.getTime())&&i.current.setDate(u,!0)}},[t]),e.createElement("div",{className:"ts-form-group ts-booking-date ts-booking-date-single",ref:o},e.createElement("input",{type:"hidden",ref:a}))},ss=()=>e.createElement("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M8.75 2.75C8.75 2.33579 8.41421 2 8 2C7.58579 2 7.25 2.33579 7.25 2.75V3.75H5.5C4.25736 3.75 3.25 4.75736 3.25 6V8.25H20.75V6C20.75 4.75736 19.7426 3.75 18.5 3.75H16.75V2.75C16.75 2.33579 16.4142 2 16 2C15.5858 2 15.25 2.33579 15.25 2.75V3.75H8.75V2.75Z",fill:"currentColor"}),e.createElement("path",{d:"M3.25 19V9.75H20.75V19C20.75 20.2426 19.7426 21.25 18.5 21.25H5.5C4.25736 21.25 3.25 20.2426 3.25 19ZM7.98438 11.95C7.54255 11.95 7.18438 12.3082 7.18438 12.75C7.18438 13.1918 7.54255 13.55 7.98438 13.55H7.99438C8.4362 13.55 8.79437 13.1918 8.79437 12.75C8.79437 12.3082 8.4362 11.95 7.99438 11.95H7.98438ZM11.9941 11.95C11.5523 11.95 11.1941 12.3082 11.1941 12.75C11.1941 13.1918 11.5523 13.55 11.9941 13.55H12.0041C12.446 13.55 12.8041 13.1918 12.8041 12.75C12.8041 12.3082 12.446 11.95 12.0041 11.95H11.9941ZM16.0039 11.95C15.5621 11.95 15.2039 12.3082 15.2039 12.75C15.2039 13.1918 15.5621 13.55 16.0039 13.55H16.0139C16.4557 13.55 16.8139 13.1918 16.8139 12.75C16.8139 12.3082 16.4557 11.95 16.0139 11.95H16.0039ZM7.98438 15.95C7.54255 15.95 7.18438 16.3082 7.18438 16.75C7.18438 17.1918 7.54255 17.55 7.98438 17.55H7.99438C8.4362 17.55 8.79437 17.1918 8.79437 16.75C8.79437 16.3082 8.4362 15.95 7.99438 15.95H7.98438ZM11.9941 15.95C11.5523 15.95 11.1941 16.3082 11.1941 16.75C11.1941 17.1918 11.5523 17.55 11.9941 17.55H12.0041C12.446 17.55 12.8041 17.1918 12.8041 16.75C12.8041 16.3082 12.446 15.95 12.0041 15.95H11.9941ZM16.0039 15.95C15.5621 15.95 15.2039 16.3082 15.2039 16.75C15.2039 17.1918 15.5621 17.55 16.0039 17.55H16.0139C16.4557 17.55 16.8139 17.1918 16.8139 16.75C16.8139 16.3082 16.4557 15.95 16.0139 15.95H16.0039Z",fill:"currentColor"})),ls=({startDate:t,endDate:n,onChange:r,onSave:s,l10n:l={from:"From",to:"To"}})=>{const[o,a]=e.useState("start"),i=e.useRef(null),c=e.useRef(null),u=e.useRef(null),d=p=>p?new Date(p).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",m=t?d(t):l.from,f=n?d(n):l.to;return e.useEffect(()=>{if(!i.current||!c.current||!window.Pikaday)return;const p=o==="start"?t:n,h=o==="end"&&t?new Date(t):void 0;u.current&&u.current.destroy();const v=t?new Date(t):null,k=n?new Date(n):null;return u.current=new window.Pikaday({field:c.current,container:i.current,bound:!1,format:"YYYY-MM-DD",firstDay:1,minDate:h,defaultDate:p?new Date(p):new Date,setDefaultDate:!!p,showDaysInNextAndPreviousMonths:!0,enableSelectionDaysInNextAndPreviousMonths:!0,numberOfMonths:2,startRange:v,endRange:k,onSelect:function(x){const _=x.getFullYear(),C=String(x.getMonth()+1).padStart(2,"0"),D=String(x.getDate()).padStart(2,"0"),g=`${_}-${C}-${D}`;o==="start"?(r(g,n),a("end")):(r(t,g),s&&s())}}),()=>{u.current&&(u.current.destroy(),u.current=null)}},[o,t,n]),e.createElement(e.Fragment,null,e.createElement("div",{className:"ts-popup-head flexify"},e.createElement("div",{className:"ts-popup-name flexify"},e.createElement(ss,null),e.createElement("span",null,e.createElement("span",{className:o==="start"?"chosen":"",onClick:()=>a("start"),style:{cursor:"pointer"}},m),t&&e.createElement("span",null,"  "),t&&e.createElement("span",{className:o==="end"?"chosen":"",onClick:()=>a("end"),style:{cursor:"pointer"}},f)))),e.createElement("div",{className:"ts-booking-date ts-booking-date-range ts-form-group",ref:i},e.createElement("input",{type:"hidden",ref:c})))},os=()=>`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,as={multiday:!1,startDate:null,startTime:"09:00",endDate:null,endTime:"10:00",allday:!1,repeat:!1,frequency:1,unit:"week",until:null},Ft={day:"Day(s)",week:"Week(s)",month:"Month(s)",year:"Year(s)"},gn=()=>e.createElement("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M8.75 2.75C8.75 2.33579 8.41421 2 8 2C7.58579 2 7.25 2.33579 7.25 2.75V3.75H5.5C4.25736 3.75 3.25 4.75736 3.25 6V8.25H20.75V6C20.75 4.75736 19.7426 3.75 18.5 3.75H16.75V2.75C16.75 2.33579 16.4142 2 16 2C15.5858 2 15.25 2.33579 15.25 2.75V3.75H8.75V2.75Z",fill:"currentColor"}),e.createElement("path",{d:"M3.25 19V9.75H20.75V19C20.75 20.2426 19.7426 21.25 18.5 21.25H5.5C4.25736 21.25 3.25 20.2426 3.25 19ZM7.98438 11.95C7.54255 11.95 7.18438 12.3082 7.18438 12.75C7.18438 13.1918 7.54255 13.55 7.98438 13.55H7.99438C8.4362 13.55 8.79437 13.1918 8.79437 12.75C8.79437 12.3082 8.4362 11.95 7.99438 11.95H7.98438ZM11.9941 11.95C11.5523 11.95 11.1941 12.3082 11.1941 12.75C11.1941 13.1918 11.5523 13.55 11.9941 13.55H12.0041C12.446 13.55 12.8041 13.1918 12.8041 12.75C12.8041 12.3082 12.446 11.95 12.0041 11.95H11.9941ZM16.0039 11.95C15.5621 11.95 15.2039 16.3082 15.2039 12.75C15.2039 13.1918 15.5621 13.55 16.0039 13.55H16.0139C16.4557 13.55 16.8139 13.1918 16.8139 12.75C16.8139 12.3082 16.4557 11.95 16.0139 11.95H16.0039ZM7.98438 15.95C7.54255 15.95 7.18438 16.3082 7.18438 16.75C7.18438 17.1918 7.54255 17.55 7.98438 17.55H7.99438C8.4362 17.55 8.79437 17.1918 8.79437 16.75C8.79437 16.3082 8.4362 15.95 7.99438 15.95H7.98438ZM11.9941 15.95C11.5523 15.95 11.1941 16.3082 11.1941 16.75C11.1941 17.1918 11.5523 17.55 11.9941 17.55H12.0041C12.446 17.55 12.8041 17.1918 12.8041 16.75C12.8041 16.3082 12.446 15.95 12.0041 15.95H11.9941ZM16.0039 15.95C15.5621 15.95 15.2039 16.3082 15.2039 16.75C15.2039 17.1918 15.5621 17.55 16.0039 17.55H16.0139C16.4557 17.55 16.8139 17.1918 16.8139 16.75C16.8139 16.3082 16.4557 15.95 16.0139 15.95H16.0039Z",fill:"currentColor"})),is=()=>e.createElement("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M9.5 2C9.08579 2 8.75 2.33579 8.75 2.75C8.75 3.16421 9.08579 3.5 9.5 3.5H14.5C14.9142 3.5 15.25 3.16421 15.25 2.75C15.25 2.33579 14.9142 2 14.5 2H9.5Z",fill:"currentColor"}),e.createElement("path",{d:"M4 5C3.74924 5 3.51506 5.12533 3.37597 5.33397C3.23687 5.54262 3.21125 5.80699 3.3077 6.03846L4.44231 8.76154C4.4804 8.85294 4.5 8.95098 4.5 9.05V19.75C4.5 20.9926 5.50736 22 6.75 22H17.25C18.4926 22 19.5 20.9926 19.5 19.75V9.04978C19.5 8.95083 19.5196 8.85286 19.5576 8.76151L20.6914 6.03827C20.7878 5.8068 20.7621 5.54249 20.623 5.33389C20.4839 5.12529 20.2498 5 19.999 5H4ZM10.75 10.5V16.5C10.75 16.9142 10.4142 17.25 10 17.25C9.58579 17.25 9.25 16.9142 9.25 16.5V10.5C9.25 10.0858 9.58579 9.75 10 9.75C10.4142 9.75 10.75 10.0858 10.75 10.5ZM14.75 10.5V16.5C14.75 16.9142 14.4142 17.25 14 17.25C13.5858 17.25 13.25 16.9142 13.25 16.5V10.5C13.25 10.0858 13.5858 9.75 14 9.75C14.4142 9.75 14.75 10.0858 14.75 10.5Z",fill:"currentColor"})),cs=()=>e.createElement("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M12.7461 3.99951C12.7461 3.5853 12.4103 3.24951 11.9961 3.24951C11.5819 3.24951 11.2461 3.5853 11.2461 3.99951L11.2461 13.2548H6.00002C5.69663 13.2548 5.42312 13.4376 5.30707 13.7179C5.19101 13.9982 5.25526 14.3208 5.46986 14.5353L11.4228 20.4844C11.5604 20.6474 11.7662 20.7509 11.9961 20.7509C12.0038 20.7509 12.0114 20.7508 12.019 20.7505C12.2045 20.7458 12.3884 20.6727 12.53 20.5313L18.5302 14.5353C18.7448 14.3208 18.809 13.9982 18.693 13.7179C18.5769 13.4376 18.3034 13.2548 18 13.2548H12.7461L12.7461 3.99951Z",fill:"currentColor"})),us=()=>e.createElement("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M12.0002 4.875C12.6216 4.875 13.1252 5.37868 13.1252 6V10.8752H18.0007C18.622 10.8752 19.1257 11.3789 19.1257 12.0002C19.1257 12.6216 18.622 13.1252 18.0007 13.1252H13.1252V18.0007C13.1252 18.622 12.6216 19.1257 12.0002 19.1257C11.3789 19.1257 10.8752 18.622 10.8752 18.0007V13.1252H6C5.37868 13.1252 4.875 12.6216 4.875 12.0002C4.875 11.3789 5.37868 10.8752 6 10.8752H10.8752V6C10.8752 5.37868 11.3789 4.875 12.0002 4.875Z",fill:"currentColor"})),ds=({date:t,index:n,field:r,onUpdate:s,onRemove:l,props:o})=>{const[a,i]=e.useState(!0),[c,u]=e.useState(!1),[d,m]=e.useState(!1),[f,p]=e.useState(!1),h=e.useRef(null),v=e.useRef(null),k=e.useRef(null),x=e.useMemo(()=>os(),[]),_=`recurring-date-picker-${x}-${n}`,C=`recurring-period-${x}-${n}`,D=`recurring-until-${x}-${n}`,g=e.useCallback(b=>b?new Date(b).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",[]),S=()=>{if(t.multiday){if(!t.startDate&&!t.endDate)return"Select dates";const b=t.startDate?g(t.startDate):o.l10n?.from||"From",N=t.endDate?g(t.endDate):o.l10n?.to||"To";return`${b}  ${N}`}else return t.startDate?g(t.startDate):"Select date"},A=()=>{s(n,{startDate:null,endDate:null})},w=b=>{s(n,{startDate:b,endDate:b}),u(!1)},E=(b,N)=>{s(n,{startDate:b,endDate:N})},T=()=>{s(n,{until:null})};return e.createElement("div",{className:"ts-repeater-container"},e.createElement("div",{className:"ts-field-repeater"},e.createElement("div",{className:"ts-repeater-head",onClick:()=>i(!a)},e.createElement("label",null,"Date"),e.createElement("div",{className:"ts-repeater-controller"},e.createElement("a",{href:"#",onClick:b=>{b.preventDefault(),b.stopPropagation(),l(n)},className:"ts-icon-btn ts-smaller"},e.createElement(is,null)),e.createElement("a",{href:"#",className:"ts-icon-btn ts-smaller",onClick:b=>b.preventDefault()},e.createElement(cs,null)))),a&&e.createElement("div",{className:"medium form-field-grid"},e.createElement(Je,{checked:t.multiday,onChange:b=>s(n,{multiday:b,endDate:b?t.endDate:t.startDate}),label:"Multi-day?",className:"vx-1-3"}),e.createElement("div",{className:"ts-form-group vx-1-1"},e.createElement("div",{ref:h,className:`ts-filter ts-popup-target ${t.startDate?"ts-filled":""}`,onClick:()=>u(!0)},e.createElement(gn,null),e.createElement("div",{className:"ts-filter-text"},S()))),e.createElement(Xe,{isOpen:c,popupId:_,target:h.current,title:"Select date",showHeader:!1,onSave:()=>u(!1),onClear:A,onClose:()=>u(!1),popupClass:t.multiday?"ts-availability-wrapper xl-width xl-height":"md-width xl-height"},t.multiday?e.createElement(ls,{startDate:t.startDate,endDate:t.endDate,onChange:E,onSave:()=>u(!1),l10n:o.l10n}):e.createElement(hn,{value:t.startDate,onChange:w,onSelect:()=>u(!1)})),o.enable_timepicker&&e.createElement(Je,{checked:t.allday,onChange:b=>s(n,{allday:b}),label:"All-day event"}),o.enable_timepicker&&!t.allday&&e.createElement(e.Fragment,null,e.createElement("div",{className:"ts-form-group vx-1-2"},e.createElement("label",null,"Start time"),e.createElement("input",{type:"time",value:t.startTime,onChange:b=>s(n,{startTime:b.target.value}),className:"ts-filter",onFocus:b=>b.target.showPicker?.()})),e.createElement("div",{className:"ts-form-group vx-1-2"},e.createElement("label",null,"End time"),e.createElement("input",{type:"time",value:t.endTime,onChange:b=>s(n,{endTime:b.target.value}),className:"ts-filter",onFocus:b=>b.target.showPicker?.()}))),o.allow_recurrence&&e.createElement(Je,{checked:t.repeat,onChange:b=>s(n,{repeat:b}),label:"Recurring event?"}),o.allow_recurrence&&t.repeat&&e.createElement(e.Fragment,null,e.createElement("div",{className:"ts-form-group vx-1-3"},e.createElement("label",null,"Repeats every"),e.createElement("input",{type:"number",value:t.frequency,min:1,onChange:b=>s(n,{frequency:parseInt(b.target.value)||1}),className:"ts-filter"})),e.createElement("div",{className:"ts-form-group vx-1-3"},e.createElement("label",null,"Period"),e.createElement("div",{ref:v,className:"ts-filter ts-filled",onClick:()=>m(!0)},e.createElement("div",{className:"ts-filter-text"},o.units?.[t.unit]||Ft[t.unit]))),e.createElement(Xe,{isOpen:d,popupId:C,target:v.current,showHeader:!1,clearButton:!1,onSave:()=>m(!1),onClose:()=>m(!1)},e.createElement("div",{className:"ts-term-dropdown ts-md-group"},e.createElement("ul",{className:"simplify-ul ts-term-dropdown-list min-scroll"},Object.entries(o.units||Ft).map(([b,N])=>e.createElement("li",{key:b},e.createElement("a",{href:"#",className:"flexify",onClick:M=>{M.preventDefault(),s(n,{unit:b}),m(!1)}},e.createElement("div",{className:"ts-checkbox-container"},e.createElement("label",{className:"container-radio"},e.createElement("input",{type:"radio",checked:t.unit===b,disabled:!0,hidden:!0,readOnly:!0}),e.createElement("span",{className:"checkmark"}))),e.createElement("span",null,N))))))),e.createElement("div",{className:"ts-form-group vx-1-3"},e.createElement("label",null,"Until"),e.createElement("div",{ref:k,className:`ts-filter ts-popup-target ${t.until?"ts-filled":""}`,onClick:()=>p(!0)},e.createElement(gn,null),e.createElement("div",{className:"ts-filter-text"},t.until?g(t.until):"Date"))),e.createElement(Xe,{isOpen:f,popupId:D,target:k.current,showHeader:!1,onSave:()=>p(!1),onClear:T,onClose:()=>p(!1),popupClass:"xl-height md-width"},e.createElement(hn,{value:t.until,onChange:b=>{s(n,{until:b}),p(!1)},onSelect:()=>p(!1),minDate:t.startDate?new Date(t.startDate):void 0}))))))},ms=({field:t,value:n,onChange:r,onBlur:s,icons:l})=>{const o={max_date_count:t.props?.max_date_count??1,allow_recurrence:t.props?.allow_recurrence??!0,enable_timepicker:t.props?.enable_timepicker??!0,units:t.props?.units??Ft,l10n:t.props?.l10n??{from:"From",to:"To"}},a=n||[],i=e.useCallback(()=>{a.length<o.max_date_count&&r([...a,{...as}])},[a,o.max_date_count,r]),c=e.useCallback((f,p)=>{const h=[...a];h[f]={...h[f],...p},r(h)},[a,r]),u=e.useCallback(f=>{const p=a.filter((h,v)=>v!==f);r(p)},[a,r]),m=(t.validation?.errors?.[0]||"").length>0;return e.createElement("div",{className:`ts-form-group field-key-${t.key} ${m?"ts-has-errors":""} ${t.css_class||""} ${t.hidden?"hidden":""}`},e.createElement(Me,{field:t}),a.map((f,p)=>e.createElement(ds,{key:p,date:f,index:p,field:t,onUpdate:c,onRemove:u,props:o})),a.length<o.max_date_count&&e.createElement("a",{href:"#",onClick:f=>{f.preventDefault(),i()},className:"ts-repeater-add ts-btn ts-btn-4 form-btn"},e.createElement(us,null),"Add date"))},ps=()=>`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,fs={mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday",sun:"Sunday"},hs={hours:"Enter hours",open:"Open all day",closed:"Closed all day",appointments_only:"Appointments only"},gs=()=>e.createElement("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12.75 6.49996C12.75 6.08575 12.4141 5.74998 11.9999 5.75C11.5857 5.75002 11.25 6.08582 11.25 6.50004L11.2502 11.25H8.00024C7.58603 11.25 7.25024 11.5858 7.25024 12C7.25024 12.4142 7.58603 12.75 8.00024 12.75H12.0002C12.1992 12.75 12.3899 12.671 12.5306 12.5303C12.6712 12.3897 12.7503 12.1989 12.7502 12L12.75 6.49996Z",fill:"currentColor"})),vn=()=>e.createElement("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M9.5 2C9.08579 2 8.75 2.33579 8.75 2.75C8.75 3.16421 9.08579 3.5 9.5 3.5H14.5C14.9142 3.5 15.25 3.16421 15.25 2.75C15.25 2.33579 14.9142 2 14.5 2H9.5Z",fill:"currentColor"}),e.createElement("path",{d:"M4 5C3.74924 5 3.51506 5.12533 3.37597 5.33397C3.23687 5.54262 3.21125 5.80699 3.3077 6.03846L4.44231 8.76154C4.4804 8.85294 4.5 8.95098 4.5 9.05V19.75C4.5 20.9926 5.50736 22 6.75 22H17.25C18.4926 22 19.5 20.9926 19.5 19.75V9.04978C19.5 8.95083 19.5196 8.85286 19.5576 8.76151L20.6914 6.03827C20.7878 5.8068 20.7621 5.54249 20.623 5.33389C20.4839 5.12529 20.2498 5 19.999 5H4ZM10.75 10.5V16.5C10.75 16.9142 10.4142 17.25 10 17.25C9.58579 17.25 9.25 16.9142 9.25 16.5V10.5C9.25 10.0858 9.58579 9.75 10 9.75C10.4142 9.75 10.75 10.0858 10.75 10.5ZM14.75 10.5V16.5C14.75 16.9142 14.4142 17.25 14 17.25C13.5858 17.25 13.25 16.9142 13.25 16.5V10.5C13.25 10.0858 13.5858 9.75 14 9.75C14.4142 9.75 14.75 10.0858 14.75 10.5Z",fill:"currentColor"})),vs=()=>e.createElement("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M12.7461 3.99951C12.7461 3.5853 12.4103 3.24951 11.9961 3.24951C11.5819 3.24951 11.2461 3.5853 11.2461 3.99951L11.2461 13.2548H6.00002C5.69663 13.2548 5.42312 13.4376 5.30707 13.7179C5.19101 13.9982 5.25526 14.3208 5.46986 14.5353L11.4228 20.4844C11.5604 20.6474 11.7662 20.7509 11.9961 20.7509C12.0038 20.7509 12.0114 20.7508 12.019 20.7505C12.2045 20.7458 12.3884 20.6727 12.53 20.5313L18.5302 14.5353C18.7448 14.3208 18.809 13.9982 18.693 13.7179C18.5769 13.4376 18.3034 13.2548 18 13.2548H12.7461L12.7461 3.99951Z",fill:"currentColor"})),Cn=()=>e.createElement("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M12.0002 4.875C12.6216 4.875 13.1252 5.37868 13.1252 6V10.8752H18.0007C18.622 10.8752 19.1257 11.3789 19.1257 12.0002C19.1257 12.6216 18.622 13.1252 18.0007 13.1252H13.1252V18.0007C13.1252 18.622 12.6216 19.1257 12.0002 19.1257C11.3789 19.1257 10.8752 18.622 10.8752 18.0007V13.1252H6C5.37868 13.1252 4.875 12.6216 4.875 12.0002C4.875 11.3789 5.37868 10.8752 6 10.8752H10.8752V6C10.8752 5.37868 11.3789 4.875 12.0002 4.875Z",fill:"currentColor"})),Cs=({slot:t,index:n,onUpdate:r,onRemove:s})=>e.createElement(e.Fragment,null,e.createElement("div",{className:"ts-form-group vx-1-3"},e.createElement("input",{type:"time",className:"ts-filter",value:t.from||"",onChange:l=>r(n,"from",l.target.value),onFocus:l=>{try{l.target.showPicker?.()}catch{}}})),e.createElement("div",{className:"ts-form-group vx-1-3"},e.createElement("input",{type:"time",className:"ts-filter",value:t.to||"",onChange:l=>r(n,"to",l.target.value),onFocus:l=>{try{l.target.showPicker?.()}catch{}}})),e.createElement("div",{className:"ts-form-group vx-1-3 vx-center-right"},e.createElement("a",{href:"#",onClick:l=>{l.preventDefault(),s(n)},className:"ts-btn ts-btn-1 form-btn"},e.createElement(vn,null)," Remove"))),Es=({selectedDays:t,availableDays:n,onToggleDay:r,weekdays:s})=>e.createElement("div",{className:"ts-term-dropdown ts-md-group ts-multilevel-dropdown"},e.createElement("ul",{className:"simplify-ul ts-term-dropdown-list min-scroll"},Object.entries(s).map(([l,o])=>{const a=n.includes(l),i=t.includes(l);return a?e.createElement("li",{key:l},e.createElement("a",{href:"#",onClick:c=>{c.preventDefault(),r(l)},className:"flexify"},e.createElement("div",{className:"ts-checkbox-container"},e.createElement("label",{className:"container-checkbox"},e.createElement("input",{type:"checkbox",checked:i,disabled:!0,hidden:!0,readOnly:!0}),e.createElement("span",{className:"checkmark"}))),e.createElement("span",null,o))):null}))),ws=({group:t,index:n,allUsedDays:r,onUpdate:s,onRemove:l,weekdays:o,statusOptions:a})=>{const[i,c]=e.useState(!0),[u,d]=e.useState(!1),m=e.useRef(null),p=`work-hours-days-${e.useMemo(()=>ps(),[])}-${n}`,h=Object.keys(o).filter(g=>!r.includes(g)||t.days.includes(g)),v=g=>g.length===0?"Select day(s)":g.length===Object.keys(o).length?"Every day":g.map(S=>o[S]).filter(Boolean).join(", "),k=e.useCallback(g=>{const S=t.days.includes(g)?t.days.filter(A=>A!==g):[...t.days,g];s({days:S})},[t.days,s]),x=e.useCallback((g,S,A)=>{const w=[...t.hours];w[g]={...w[g],[S]:A},s({hours:w})},[t.hours,s]),_=e.useCallback(g=>{const S=t.hours.filter((A,w)=>w!==g);s({hours:S})},[t.hours,s]),C=e.useCallback(()=>{const g=[...t.hours,{from:"09:00",to:"17:00"}];s({hours:g})},[t.hours,s]),D=e.useCallback(g=>{g.preventDefault(),c(S=>!S)},[]);return e.createElement("div",{className:"work-hours-field ts-repeater-container"},e.createElement("div",{className:"ts-field-repeater"},e.createElement("div",{className:"ts-repeater-head",onClick:D},e.createElement(gs,null),e.createElement("label",null,"Schedule"),e.createElement("div",{className:"ts-repeater-controller"},e.createElement("a",{href:"#",onClick:g=>{g.preventDefault(),g.stopPropagation(),l()},className:"ts-icon-btn ts-smaller"},e.createElement(vn,null)),e.createElement("a",{href:"#",className:"ts-icon-btn ts-smaller",onClick:g=>{g.preventDefault(),g.stopPropagation(),D(g)},style:{transform:i?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"}},e.createElement(vs,null)))),i&&e.createElement("div",{className:"elementor-row medium form-field-grid"},e.createElement("div",{className:"ts-form-group"},e.createElement("label",null,"Select days with this schedule"),e.createElement("div",{ref:m,className:`ts-filter ts-popup-target ts-datepicker-input ${t.days.length?"ts-filled":""}`,onClick:()=>d(!0)},e.createElement("div",{className:"ts-filter-text"},v(t.days)),e.createElement("div",{className:"ts-down-icon"}))),e.createElement(Xe,{isOpen:u,popupId:p,target:m.current,title:"Select days",showHeader:!1,saveLabel:"Save",clearLabel:"Clear",clearButton:!0,onSave:()=>d(!1),onClear:()=>{s({days:[]}),d(!1)},onClose:()=>d(!1)},e.createElement(Es,{selectedDays:t.days,availableDays:h,onToggleDay:k,weekdays:o})),t.days.length>0&&e.createElement(e.Fragment,null,e.createElement("div",{className:"ts-form-group"},e.createElement("label",null,"Set availability"),e.createElement("div",{className:"ts-filter"},e.createElement("select",{value:t.status,onChange:g=>s({status:g.target.value,hours:g.target.value==="hours"&&t.hours.length===0?[{from:"09:00",to:"17:00"}]:t.hours})},Object.entries(a).map(([g,S])=>e.createElement("option",{key:g,value:g},S))),e.createElement("div",{className:"ts-down-icon"}))),t.status==="hours"&&e.createElement("div",{className:"ts-form-group"},e.createElement("label",null,"Add work hours"),e.createElement("div",{className:"form-field-grid medium"},t.hours.length>0&&e.createElement("div",{className:"ts-form-group"},e.createElement("div",{className:"form-field-grid medium"},t.hours.map((g,S)=>e.createElement(Cs,{key:S,slot:g,index:S,onUpdate:x,onRemove:_})))),e.createElement("div",{className:"ts-form-group"},e.createElement("a",{href:"#",onClick:g=>{g.preventDefault(),C()},className:"ts-repeater-add add-hours form-btn ts-btn ts-btn-4"},e.createElement(Cn,null)," Add hours"))))))))},ys=({field:t,value:n,onChange:r})=>{const s=t.props?.weekdays&&typeof t.props.weekdays=="object"?t.props.weekdays:fs,l=t.props?.statuses&&typeof t.props.statuses=="object"?t.props.statuses:hs,o=Array.isArray(n)?n:[],a=e.useCallback(()=>o.flatMap(p=>p.days),[o]),i=e.useCallback(()=>{const p=a();return Object.keys(s).some(h=>!p.includes(h))},[a,s]),c=e.useCallback(()=>{const p={days:[],status:"hours",hours:[]};r([...o,p])},[o,r]),u=e.useCallback(p=>{const h=o.filter((v,k)=>k!==p);r(h)},[o,r]),d=e.useCallback((p,h)=>{const v=[...o];v[p]={...v[p],...h},r(v)},[o,r]),f=(t.validation?.errors?.[0]||"").length>0;return e.createElement("div",{className:`ts-work-hours-field ts-form-group field-key-${t.key} ${f?"ts-has-errors":""} ${t.css_class||""} ${t.hidden?"hidden":""}`},e.createElement(Me,{field:t}),o.map((p,h)=>e.createElement(ws,{key:h,group:p,index:h,allUsedDays:a().filter(v=>!p.days.includes(v)),onUpdate:v=>d(h,v),onRemove:()=>u(h),weekdays:s,statusOptions:l})),i()&&e.createElement("a",{href:"#",onClick:p=>{p.preventDefault(),c()},className:"ts-repeater-add ts-btn form-btn ts-btn-4"},e.createElement(Cn,null)," Create schedule"),t.validation?.errors?.length>0&&e.createElement("span",{className:"is-required error"},t.validation.errors[0]))},Ie=(t,n)=>!t||!t.value?n||e.createElement(e.Fragment,null):t.library==="icon"?e.createElement("i",{className:t.value,"aria-hidden":"true"}):t.library==="svg"?e.createElement("img",{src:t.value,alt:"",style:{width:"24px",height:"24px"},"aria-hidden":"true"}):n||e.createElement(e.Fragment,null),Oe={next:e.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M14.5359 5.46986C14.3214 5.25526 13.9988 5.19101 13.7185 5.30707C13.4382 5.42312 13.2554 5.69663 13.2554 6.00002V11.2466L4 11.2466C3.58579 11.2466 3.25 11.5824 3.25 11.9966C3.25 12.4108 3.58579 12.7466 4 12.7466L13.2554 12.7466V18C13.2554 18.3034 13.4382 18.5769 13.7185 18.693C13.9988 18.809 14.3214 18.7448 14.5359 18.5302L20.5319 12.53C20.6786 12.3831 20.7518 12.1905 20.7514 11.9981L20.7514 11.9966C20.7514 11.7685 20.6495 11.5642 20.4888 11.4266L14.5359 5.46986Z",fill:"currentColor"})),prev:e.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M14.5359 5.46986C14.3214 5.25526 13.9988 5.19101 13.7185 5.30707C13.4382 5.42312 13.2554 5.69663 13.2554 6.00002V11.2466L4 11.2466C3.58579 11.2466 3.25 11.5824 3.25 11.9966C3.25 12.4108 3.58579 12.7466 4 12.7466L13.2554 12.7466V18C13.2554 18.3034 13.4382 18.5769 13.7185 18.693C13.9988 18.809 14.3214 18.7448 14.5359 18.5302L20.5319 12.53C20.6786 12.3831 20.7518 12.1905 20.7514 11.9981L20.7514 11.9966C20.7514 11.7685 20.6495 11.5642 20.4888 11.4266L14.5359 5.46986Z",fill:"currentColor",transform:"scale(-1, 1) translate(-24, 0)"})),draft:e.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M3.25 5.5C3.25 4.25736 4.25736 3.25 5.5 3.25H15.3809C15.977 3.25 16.5488 3.48658 16.9707 3.90779L20.0897 7.02197C20.5124 7.44403 20.7499 8.01685 20.7499 8.61418L20.7499 18.5C20.7499 19.7426 19.7425 20.75 18.4999 20.75H16.75V16.25C16.75 15.0074 15.7426 14 14.5 14L9.5 14C8.25736 14 7.25 15.0074 7.25 16.25L7.25001 20.75H5.5C4.25736 20.75 3.25 19.7426 3.25 18.5V5.5ZM8 6.25C7.58579 6.25 7.25 6.58579 7.25 7C7.25 7.41421 7.58579 7.75 8 7.75H12C12.4142 7.75 12.75 7.41421 12.75 7C12.75 6.58579 12.4142 6.25 12 6.25H8Z",fill:"currentColor"}),e.createElement("path",{d:"M8.75001 20.75L15.25 20.75V16.25C15.25 15.8358 14.9142 15.5 14.5 15.5L9.5 15.5C9.08579 15.5 8.75 15.8358 8.75 16.25L8.75001 20.75Z",fill:"currentColor"})),plus:e.createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M6 0V12M0 6H12",stroke:"currentColor",strokeWidth:"2"})),minus:e.createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M0 6H12",stroke:"currentColor",strokeWidth:"2"})),calendar:e.createElement("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M8.75 2.75C8.75 2.33579 8.41421 2 8 2C7.58579 2 7.25 2.33579 7.25 2.75V3.75H5.5C4.25736 3.75 3.25 4.75736 3.25 6V8.25H20.75V6C20.75 4.75736 19.7426 3.75 18.5 3.75H16.75V2.75C16.75 2.33579 16.4142 2 16 2C15.5858 2 15.25 2.33579 15.25 2.75V3.75H8.75V2.75Z",fill:"currentColor"}),e.createElement("path",{d:"M3.25 19V9.75H20.75V19C20.75 20.2426 19.7426 21.25 18.5 21.25H5.5C4.25736 21.25 3.25 20.2426 3.25 19Z",fill:"currentColor"})),clock:e.createElement("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",stroke:"currentColor",strokeWidth:"2"}),e.createElement("path",{d:"M12 6V12L16 14",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})),email:e.createElement("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M3.73592 4.5C2.77726 4.5 2.00014 5.27724 2.00031 6.2359L2.00031 6.26829C2.01064 6.81904 2.28199 7.33272 2.732 7.65165L2.74287 7.65929L10.7131 13.2171C11.3897 13.689 12.2609 13.7479 12.9861 13.3941C13.0897 13.3435 13.1904 13.2845 13.287 13.2171L21.2569 7.65949C21.7225 7.33485 21.9999 6.8031 21.9998 6.23554C21.9997 5.27702 21.2229 4.5 20.2644 4.5H3.73592Z",fill:"currentColor"}),e.createElement("path",{d:"M22.0001 8.96994L14.145 14.4475C12.8562 15.3462 11.1438 15.3462 9.85507 14.4475L2.00023 8.97012L2 17.25C2 18.4926 3.00736 19.5 4.25 19.5H19.75C20.9926 19.5 22 18.4926 22 17.25L22.0001 8.96994Z",fill:"currentColor"})),phone:e.createElement("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z",fill:"currentColor"})),upload:e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M12.4239 3.25C12.2079 3.25 12.0132 3.34131 11.8763 3.48744L7.26675 8.0941C6.97376 8.3869 6.97361 8.86177 7.26641 9.15476C7.55921 9.44775 8.03408 9.4479 8.32707 9.1551L11.6739 5.81043L11.6739 16C11.6739 16.4142 12.0096 16.75 12.4239 16.75C12.8381 16.75 13.1739 16.4142 13.1739 16L13.1739 5.81455L16.5168 9.15511C16.8098 9.4479 17.2846 9.44774 17.5774 9.15474C17.8702 8.86175 17.87 8.38687 17.5771 8.09408L13.0021 3.52236C12.8646 3.356 12.6566 3.25 12.4239 3.25Z",fill:"currentColor"}),e.createElement("path",{d:"M5.17188 16C5.17188 15.5858 4.83609 15.25 4.42188 15.25C4.00766 15.25 3.67188 15.5858 3.67188 16V18.5C3.67188 19.7426 4.67923 20.75 5.92188 20.75H18.9227C20.1654 20.75 21.1727 19.7426 21.1727 18.5V16C21.1727 15.5858 20.837 15.25 20.4227 15.25C20.0085 15.25 19.6727 15.5858 19.6727 16V18.5C19.6727 18.9142 19.337 19.25 18.9227 19.25H5.92188C5.50766 19.25 5.17188 18.9142 5.17188 18.5V16Z",fill:"currentColor"})),location:e.createElement("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M12 21C15.5 17.4 19 14.1764 19 10.2C19 6.22355 15.866 3 12 3C8.13401 3 5 6.22355 5 10.2C5 14.1764 8.5 17.4 12 21Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.createElement("path",{d:"M12 13C13.6569 13 15 11.6569 15 10C15 8.34315 13.6569 7 12 7C10.3431 7 9 8.34315 9 10C9 11.6569 10.3431 13 12 13Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))},bs=(t,n,r)=>n&&r&&n[r]?Ie(n[r],Oe[t]):Oe[t],xs=t=>bs("upload",t,"tsUploadIco");typeof window<"u"&&typeof window._vx_file_upload_cache>"u"&&(window._vx_file_upload_cache=[]);const Ns=()=>Math.random().toString(36).substring(2,10),ks=t=>{Array.isArray(window._vx_file_upload_cache)||(window._vx_file_upload_cache=[]);const n=window._vx_file_upload_cache.find(l=>l.name===t.name&&l.type===t.type&&l.size===t.size&&l.item.lastModified===t.lastModified);if(n)return n._id??"";const r=Ns(),s={source:"new_upload",name:t.name,type:t.type,size:t.size,preview:URL.createObjectURL(t),item:t,_id:r};return window._vx_file_upload_cache.unshift(s),r},En=({field:t,value:n,onChange:r,onBlur:s,icons:l})=>{const o=e.useRef(null),[a,i]=e.useState(!1),[c,u]=e.useState(null),d=Array.isArray(n)?n:[];e.useEffect(()=>()=>{d.forEach(E=>{E.source==="new_upload"&&E.preview?.startsWith("blob:")&&URL.revokeObjectURL(E.preview)})},[]);const m=t.props?.["max-count"]||t.props?.maxCount||1,f=t.props?.sortable===!0,p=t.type==="image"||t.type==="profile-avatar"||t.type==="logo"||t.type==="cover-image"||t.type==="gallery",h=()=>{if(p)return"image/*";const E=t.props?.allowedTypes||t.props?.["allowed-types"]||[];return Array.isArray(E)&&E.length>0?E.join(","):"*"},v=t.validation?.errors?.[0]||"",k=v.length>0,x=async E=>{if(!E)return;const T=[],b=Number(t.props?.["max-size"]||t.props?.maxSize||2e3)*1e3,N=[],M=t.props?.allowedTypes||t.props?.["allowed-types"]||[],F=Array.isArray(M)?M:[];for(let I=0;I<E.length;I++){const L=E[I];if(F.length>0&&!F.some(J=>J.endsWith("/*")?L.type.startsWith(J.replace("/*","/")):L.type===J)){N.push(`${L.name}: file type not allowed`);continue}const j=ks(L),Y={source:"new_upload",file:L,name:L.name,type:L.type,_id:j};if(L.type.startsWith("image/")&&(Y.preview=URL.createObjectURL(L)),T.push(Y),L.size>b){const J=b/1e6;N.push(`${L.name} is over the ${J} MB limit`)}}const q=[...d,...T];r(q),q.length>Number(m)&&N.push(`You cannot pick more than ${Number(m)} ${Number(m)===1?"file":"files"}`),t.validation&&(t.validation.errors=N)},_=E=>{if(E.preventDefault(),i(!1),E.dataTransfer.items&&E.dataTransfer.items.length>0){const T=new DataTransfer;for(let b=0;b<E.dataTransfer.items.length;b++){const N=E.dataTransfer.items[b];if(N.kind==="file"){const M=N.getAsFile();M&&T.items.add(M)}}x(T.files)}else x(E.dataTransfer.files)},C=E=>{const T=[...d];T.splice(E,1),r(T)},D=E=>{u(E)},g=(E,T)=>{if(E.preventDefault(),c===null||c===T)return;const b=[...d],[N]=b.splice(c,1);b.splice(T,0,N),r(b),u(T)},S=()=>{u(null)},A=E=>{const T=E.map(M=>M.source==="new_upload"&&M._id&&M.file?{source:"new_upload",_id:M._id,file:M.file,name:M.name,type:M.type,preview:M.preview}:{source:"existing",id:M.id,name:M.name,type:M.type,preview:M.preview}),b=[...d,...T];r(b);const N=[];b.length>Number(m)&&N.push(`You cannot pick more than ${Number(m)} ${Number(m)===1?"file":"files"}`),t.validation&&(t.validation.errors=N)},w=E=>{const T=E.preview||E.url;return T?{backgroundImage:`url(${T})`,backgroundSize:"cover",backgroundPosition:"center"}:{}};return e.createElement("div",{className:`ts-form-group ts-file-upload inline-file-field field-key-${t.key} ${k?"ts-has-errors":""} ${t.css_class||""} ${t.hidden?"hidden":""}`,onDragEnter:()=>i(!0)},a&&e.createElement("div",{className:"drop-mask",onDragLeave:E=>{E.preventDefault(),i(!1)},onDrop:_,onDragEnter:E=>E.preventDefault(),onDragOver:E=>E.preventDefault()}),e.createElement("label",null,t.label,k?e.createElement("span",{className:"is-required"},v):!t.required&&e.createElement("span",{className:"is-required"},"Optional"),t.description&&e.createElement("div",{className:"vx-dialog"},e.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M8 0C3.6 0 0 3.6 0 8C0 12.4 3.6 16 8 16C12.4 16 16 12.4 16 8C16 3.6 12.4 0 8 0ZM8 12C7.4 12 7 11.6 7 11C7 10.4 7.4 10 8 10C8.6 10 9 10.4 9 11C9 11.6 8.6 12 8 12ZM9 9H7V4H9V9Z",fill:"currentColor"})),e.createElement("div",{className:"vx-dialog-content min-scroll"},e.createElement("p",null,t.description)))),e.createElement("div",{className:"ts-file-list"},e.createElement("div",{className:"pick-file-input"},e.createElement("a",{href:"#",onClick:E=>{E.preventDefault(),o.current?.click()}},xs(l),"Upload")),d.map((E,T)=>e.createElement("div",{key:T,className:`ts-file ${E.type.startsWith("image/")?"ts-file-img":""} ${c===T?"ts-dragging":""}`,style:w(E),...f?{draggable:!0,onDragStart:()=>D(T),onDragOver:b=>g(b,T),onDragEnd:S}:{}},e.createElement("div",{className:"ts-file-info"},e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M6.84487 8.0941L11.4545 3.48744C11.5913 3.34131 11.786 3.25 12.002 3.25C12.2347 3.25 12.4427 3.356 12.5802 3.52235L17.1552 8.09408C17.3698 8.30854 17.434 8.63117 17.318 8.91149C17.2019 9.19181 16.9284 9.3746 16.625 9.3746H12.752L12.752 16C12.752 16.4142 12.4162 16.75 12.002 16.75C11.5878 16.75 11.252 16.4142 11.252 16L11.252 9.3746L7.37503 9.3746C7.07164 9.3746 6.79813 9.19181 6.68208 8.9115C6.56602 8.63119 6.63027 8.30856 6.84487 8.0941Z",fill:"#343C54"}),e.createElement("path",{d:"M4.75 16C4.75 15.5858 4.41421 15.25 4 15.25C3.58579 15.25 3.25 15.5858 3.25 16V18.5C3.25 19.7426 4.25736 20.75 5.5 20.75H18.5009C19.7435 20.75 20.7509 19.7426 20.7509 18.5V16C20.7509 15.5858 20.4151 15.25 20.0009 15.25C19.5867 15.25 19.2509 15.5858 19.2509 16V18.5C19.2509 18.9142 18.9151 19.25 18.5009 19.25H5.5C5.08579 19.25 4.75 18.9142 4.75 18.5V16Z",fill:"#343C54"})),e.createElement("code",null,E.name)),e.createElement("a",{href:"#",onClick:b=>{b.preventDefault(),C(T)},className:"ts-remove-file flexify"},e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M9.5 2C9.08579 2 8.75 2.33579 8.75 2.75C8.75 3.16421 9.08579 3.5 9.5 3.5H14.5C14.9142 3.5 15.25 3.16421 15.25 2.75C15.25 2.33579 14.9142 2 14.5 2H9.5Z",fill:"#343C54"}),e.createElement("path",{d:"M4 5C3.74924 5 3.51506 5.12533 3.37597 5.33397C3.23687 5.54262 3.21125 5.80699 3.3077 6.03846L4.44231 8.76154C4.4804 8.85294 4.5 8.95098 4.5 9.05V19.75C4.5 20.9926 5.50736 22 6.75 22H17.25C18.4926 22 19.5 20.9926 19.5 19.75V9.04978C19.5 8.95083 19.5196 8.85286 19.5576 8.76151L20.6914 6.03827C20.7878 5.8068 20.7621 5.54249 20.623 5.33389C20.4839 5.12529 20.2498 5 19.999 5H4ZM10.75 10.5V16.5C10.75 16.9142 10.4142 17.25 10 17.25C9.58579 17.25 9.25 16.9142 9.25 16.5V10.5C9.25 10.0858 9.58579 9.75 10 9.75C10.4142 9.75 10.75 10.0858 10.75 10.5ZM14.75 10.5V16.5C14.75 16.9142 14.4142 17.25 14 17.25C13.5858 17.25 13.25 16.9142 13.25 16.5V10.5C13.25 10.0858 13.5858 9.75 14 9.75C14.4142 9.75 14.75 10.0858 14.75 10.5Z",fill:"#343C54"})))))),e.createElement("div",{style:{textAlign:"center",marginTop:"15px"}},e.createElement(Tt,{onSave:A,multiple:Number(m)>1,saveLabel:"Save"})),e.createElement("input",{ref:o,type:"file",className:"hidden",multiple:Number(m)>1,accept:h(),onChange:E=>x(E.target.files),onBlur:s,style:{display:"none"}}))},_s=({field:t})=>{switch(t.type){case"ui-heading":return e.createElement("div",{className:`ts-form-group field-key-${t.key} ui-heading-field ${t.css_class||""} ${t.hidden?"hidden":""}`},e.createElement("label",null,t.label,t.description&&e.createElement("div",{className:"vx-dialog"},e.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M8 0C3.6 0 0 3.6 0 8C0 12.4 3.6 16 8 16C12.4 16 16 12.4 16 8C16 3.6 12.4 0 8 0ZM8 12C7.4 12 7 11.6 7 11C7 10.4 7.4 10 8 10C8.6 10 9 10.4 9 11C9 11.6 8.6 12 8 12ZM9 9H7V4H9V9Z",fill:"currentColor"})),e.createElement("div",{className:"vx-dialog-content min-scroll"},e.createElement("p",null,t.description)))));case"ui-html":const n=t.props?.content||"";return e.createElement("div",{className:`ts-form-group field-key-${t.key} ui-html-field ${t.css_class||""} ${t.hidden?"hidden":""}`},e.createElement("label",null,t.label),e.createElement("div",{className:"ui-html-content",dangerouslySetInnerHTML:{__html:n}}));case"ui-image":const r=t.props?.url!==void 0?String(t.props.url):void 0,s=String(t.props?.alt??"");return r?e.createElement("div",{className:`ts-form-group field-key-${t.key} ui-image-field ${t.css_class||""} ${t.hidden?"hidden":""}`},e.createElement("img",{src:r,alt:s})):null;case"ui-step":return null;default:return null}};function Ss(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.useMemo(()=>s=>{n.forEach(l=>l(s))},n)}const vt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function qe(t){const n=Object.prototype.toString.call(t);return n==="[object Window]"||n==="[object global]"}function Pt(t){return"nodeType"in t}function he(t){var n,r;return t?qe(t)?t:Pt(t)&&(n=(r=t.ownerDocument)==null?void 0:r.defaultView)!=null?n:window:window}function Ot(t){const{Document:n}=he(t);return t instanceof n}function Ke(t){return qe(t)?!1:t instanceof he(t).HTMLElement}function wn(t){return t instanceof he(t).SVGElement}function Be(t){return t?qe(t)?t.document:Pt(t)?Ot(t)?t:Ke(t)||wn(t)?t.ownerDocument:document:document:document}const ke=vt?e.useLayoutEffect:e.useEffect;function Zt(t){const n=e.useRef(t);return ke(()=>{n.current=t}),e.useCallback(function(){for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return n.current==null?void 0:n.current(...s)},[])}function Ms(){const t=e.useRef(null),n=e.useCallback((s,l)=>{t.current=setInterval(s,l)},[]),r=e.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[n,r]}function Qe(t,n){n===void 0&&(n=[t]);const r=e.useRef(t);return ke(()=>{r.current!==t&&(r.current=t)},n),r}function Re(t,n){const r=e.useRef();return e.useMemo(()=>{const s=t(r.current);return r.current=s,s},[...n])}function Ct(t){const n=Zt(t),r=e.useRef(null),s=e.useCallback(l=>{l!==r.current&&n?.(l,r.current),r.current=l},[]);return[r,s]}function qt(t){const n=e.useRef();return e.useEffect(()=>{n.current=t},[t]),n.current}let Bt={};function $e(t,n){return e.useMemo(()=>{if(n)return n;const r=Bt[t]==null?0:Bt[t]+1;return Bt[t]=r,t+"-"+r},[t,n])}function yn(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),l=1;l<r;l++)s[l-1]=arguments[l];return s.reduce((o,a)=>{const i=Object.entries(a);for(const[c,u]of i){const d=o[c];d!=null&&(o[c]=d+t*u)}return o},{...n})}}const je=yn(1),et=yn(-1);function Is(t){return"clientX"in t&&"clientY"in t}function jt(t){if(!t)return!1;const{KeyboardEvent:n}=he(t.target);return n&&t instanceof n}function Ls(t){if(!t)return!1;const{TouchEvent:n}=he(t.target);return n&&t instanceof n}function zt(t){if(Ls(t)){if(t.touches&&t.touches.length){const{clientX:n,clientY:r}=t.touches[0];return{x:n,y:r}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:n,clientY:r}=t.changedTouches[0];return{x:n,y:r}}}return Is(t)?{x:t.clientX,y:t.clientY}:null}const Le=Object.freeze({Translate:{toString(t){if(!t)return;const{x:n,y:r}=t;return"translate3d("+(n?Math.round(n):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:n,scaleY:r}=t;return"scaleX("+n+") scaleY("+r+")"}},Transform:{toString(t){if(t)return[Le.Translate.toString(t),Le.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:n,duration:r,easing:s}=t;return n+" "+r+"ms "+s}}}),bn="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Ds(t){return t.matches(bn)?t:t.querySelector(bn)}const As={display:"none"};function Ts(t){let{id:n,value:r}=t;return e.createElement("div",{id:n,style:As},r)}function Hs(t){let{id:n,announcement:r,ariaLiveType:s="assertive"}=t;const l={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return e.createElement("div",{id:n,style:l,role:"status","aria-live":s,"aria-atomic":!0},r)}function Vs(){const[t,n]=e.useState("");return{announce:e.useCallback(s=>{s!=null&&n(s)},[]),announcement:t}}const xn=e.createContext(null);function Fs(t){const n=e.useContext(xn);e.useEffect(()=>{if(!n)throw new Error("useDndMonitor must be used within a children of <DndContext>");return n(t)},[t,n])}function Ps(){const[t]=e.useState(()=>new Set),n=e.useCallback(s=>(t.add(s),()=>t.delete(s)),[t]);return[e.useCallback(s=>{let{type:l,event:o}=s;t.forEach(a=>{var i;return(i=a[l])==null?void 0:i.call(a,o)})},[t]),n]}const Os={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Zs={onDragStart(t){let{active:n}=t;return"Picked up draggable item "+n.id+"."},onDragOver(t){let{active:n,over:r}=t;return r?"Draggable item "+n.id+" was moved over droppable area "+r.id+".":"Draggable item "+n.id+" is no longer over a droppable area."},onDragEnd(t){let{active:n,over:r}=t;return r?"Draggable item "+n.id+" was dropped over droppable area "+r.id:"Draggable item "+n.id+" was dropped."},onDragCancel(t){let{active:n}=t;return"Dragging was cancelled. Draggable item "+n.id+" was dropped."}};function qs(t){let{announcements:n=Zs,container:r,hiddenTextDescribedById:s,screenReaderInstructions:l=Os}=t;const{announce:o,announcement:a}=Vs(),i=$e("DndLiveRegion"),[c,u]=e.useState(!1);if(e.useEffect(()=>{u(!0)},[]),Fs(e.useMemo(()=>({onDragStart(m){let{active:f}=m;o(n.onDragStart({active:f}))},onDragMove(m){let{active:f,over:p}=m;n.onDragMove&&o(n.onDragMove({active:f,over:p}))},onDragOver(m){let{active:f,over:p}=m;o(n.onDragOver({active:f,over:p}))},onDragEnd(m){let{active:f,over:p}=m;o(n.onDragEnd({active:f,over:p}))},onDragCancel(m){let{active:f,over:p}=m;o(n.onDragCancel({active:f,over:p}))}}),[o,n])),!c)return null;const d=e.createElement(e.Fragment,null,e.createElement(Ts,{id:s,value:l.draggable}),e.createElement(Hs,{id:i,announcement:a}));return r?Pe.createPortal(d,r):d}var ce;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(ce||(ce={}));function Et(){}function Nn(t,n){return e.useMemo(()=>({sensor:t,options:n??{}}),[t,n])}function Bs(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.useMemo(()=>[...n].filter(s=>s!=null),[...n])}const xe=Object.freeze({x:0,y:0});function kn(t,n){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function _n(t,n){let{data:{value:r}}=t,{data:{value:s}}=n;return r-s}function js(t,n){let{data:{value:r}}=t,{data:{value:s}}=n;return s-r}function Sn(t){let{left:n,top:r,height:s,width:l}=t;return[{x:n,y:r},{x:n+l,y:r},{x:n,y:r+s},{x:n+l,y:r+s}]}function Mn(t,n){if(!t||t.length===0)return null;const[r]=t;return r[n]}function In(t,n,r){return n===void 0&&(n=t.left),r===void 0&&(r=t.top),{x:n+t.width*.5,y:r+t.height*.5}}const tt=t=>{let{collisionRect:n,droppableRects:r,droppableContainers:s}=t;const l=In(n,n.left,n.top),o=[];for(const a of s){const{id:i}=a,c=r.get(i);if(c){const u=kn(In(c),l);o.push({id:i,data:{droppableContainer:a,value:u}})}}return o.sort(_n)},zs=t=>{let{collisionRect:n,droppableRects:r,droppableContainers:s}=t;const l=Sn(n),o=[];for(const a of s){const{id:i}=a,c=r.get(i);if(c){const u=Sn(c),d=l.reduce((f,p,h)=>f+kn(u[h],p),0),m=Number((d/4).toFixed(4));o.push({id:i,data:{droppableContainer:a,value:m}})}}return o.sort(_n)};function Us(t,n){const r=Math.max(n.top,t.top),s=Math.max(n.left,t.left),l=Math.min(n.left+n.width,t.left+t.width),o=Math.min(n.top+n.height,t.top+t.height),a=l-s,i=o-r;if(s<l&&r<o){const c=n.width*n.height,u=t.width*t.height,d=a*i,m=d/(c+u-d);return Number(m.toFixed(4))}return 0}const Ws=t=>{let{collisionRect:n,droppableRects:r,droppableContainers:s}=t;const l=[];for(const o of s){const{id:a}=o,i=r.get(a);if(i){const c=Us(i,n);c>0&&l.push({id:a,data:{droppableContainer:o,value:c}})}}return l.sort(js)};function Ys(t,n,r){return{...t,scaleX:n&&r?n.width/r.width:1,scaleY:n&&r?n.height/r.height:1}}function Ln(t,n){return t&&n?{x:t.left-n.left,y:t.top-n.top}:xe}function Gs(t){return function(r){for(var s=arguments.length,l=new Array(s>1?s-1:0),o=1;o<s;o++)l[o-1]=arguments[o];return l.reduce((a,i)=>({...a,top:a.top+t*i.y,bottom:a.bottom+t*i.y,left:a.left+t*i.x,right:a.right+t*i.x}),{...r})}}const Xs=Gs(1);function Js(t){if(t.startsWith("matrix3d(")){const n=t.slice(9,-1).split(/, /);return{x:+n[12],y:+n[13],scaleX:+n[0],scaleY:+n[5]}}else if(t.startsWith("matrix(")){const n=t.slice(7,-1).split(/, /);return{x:+n[4],y:+n[5],scaleX:+n[0],scaleY:+n[3]}}return null}function Ks(t,n,r){const s=Js(n);if(!s)return t;const{scaleX:l,scaleY:o,x:a,y:i}=s,c=t.left-a-(1-l)*parseFloat(r),u=t.top-i-(1-o)*parseFloat(r.slice(r.indexOf(" ")+1)),d=l?t.width/l:t.width,m=o?t.height/o:t.height;return{width:d,height:m,top:u,right:c+d,bottom:u+m,left:c}}const Qs={ignoreTransform:!1};function ze(t,n){n===void 0&&(n=Qs);let r=t.getBoundingClientRect();if(n.ignoreTransform){const{transform:u,transformOrigin:d}=he(t).getComputedStyle(t);u&&(r=Ks(r,u,d))}const{top:s,left:l,width:o,height:a,bottom:i,right:c}=r;return{top:s,left:l,width:o,height:a,bottom:i,right:c}}function Dn(t){return ze(t,{ignoreTransform:!0})}function Rs(t){const n=t.innerWidth,r=t.innerHeight;return{top:0,left:0,right:n,bottom:r,width:n,height:r}}function $s(t,n){return n===void 0&&(n=he(t).getComputedStyle(t)),n.position==="fixed"}function el(t,n){n===void 0&&(n=he(t).getComputedStyle(t));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(l=>{const o=n[l];return typeof o=="string"?r.test(o):!1})}function wt(t,n){const r=[];function s(l){if(n!=null&&r.length>=n||!l)return r;if(Ot(l)&&l.scrollingElement!=null&&!r.includes(l.scrollingElement))return r.push(l.scrollingElement),r;if(!Ke(l)||wn(l)||r.includes(l))return r;const o=he(t).getComputedStyle(l);return l!==t&&el(l,o)&&r.push(l),$s(l,o)?r:s(l.parentNode)}return t?s(t):r}function An(t){const[n]=wt(t,1);return n??null}function Ut(t){return!vt||!t?null:qe(t)?t:Pt(t)?Ot(t)||t===Be(t).scrollingElement?window:Ke(t)?t:null:null}function Tn(t){return qe(t)?t.scrollX:t.scrollLeft}function Hn(t){return qe(t)?t.scrollY:t.scrollTop}function Wt(t){return{x:Tn(t),y:Hn(t)}}var ue;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(ue||(ue={}));function Vn(t){return!vt||!t?!1:t===document.scrollingElement}function Fn(t){const n={x:0,y:0},r=Vn(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},s={x:t.scrollWidth-r.width,y:t.scrollHeight-r.height},l=t.scrollTop<=n.y,o=t.scrollLeft<=n.x,a=t.scrollTop>=s.y,i=t.scrollLeft>=s.x;return{isTop:l,isLeft:o,isBottom:a,isRight:i,maxScroll:s,minScroll:n}}const tl={x:.2,y:.2};function nl(t,n,r,s,l){let{top:o,left:a,right:i,bottom:c}=r;s===void 0&&(s=10),l===void 0&&(l=tl);const{isTop:u,isBottom:d,isLeft:m,isRight:f}=Fn(t),p={x:0,y:0},h={x:0,y:0},v={height:n.height*l.y,width:n.width*l.x};return!u&&o<=n.top+v.height?(p.y=ue.Backward,h.y=s*Math.abs((n.top+v.height-o)/v.height)):!d&&c>=n.bottom-v.height&&(p.y=ue.Forward,h.y=s*Math.abs((n.bottom-v.height-c)/v.height)),!f&&i>=n.right-v.width?(p.x=ue.Forward,h.x=s*Math.abs((n.right-v.width-i)/v.width)):!m&&a<=n.left+v.width&&(p.x=ue.Backward,h.x=s*Math.abs((n.left+v.width-a)/v.width)),{direction:p,speed:h}}function rl(t){if(t===document.scrollingElement){const{innerWidth:o,innerHeight:a}=window;return{top:0,left:0,right:o,bottom:a,width:o,height:a}}const{top:n,left:r,right:s,bottom:l}=t.getBoundingClientRect();return{top:n,left:r,right:s,bottom:l,width:t.clientWidth,height:t.clientHeight}}function Pn(t){return t.reduce((n,r)=>je(n,Wt(r)),xe)}function sl(t){return t.reduce((n,r)=>n+Tn(r),0)}function ll(t){return t.reduce((n,r)=>n+Hn(r),0)}function ol(t,n){if(n===void 0&&(n=ze),!t)return;const{top:r,left:s,bottom:l,right:o}=n(t);An(t)&&(l<=0||o<=0||r>=window.innerHeight||s>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const al=[["x",["left","right"],sl],["y",["top","bottom"],ll]];class Yt{constructor(n,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=wt(r),l=Pn(s);this.rect={...n},this.width=n.width,this.height=n.height;for(const[o,a,i]of al)for(const c of a)Object.defineProperty(this,c,{get:()=>{const u=i(s),d=l[o]-u;return this.rect[c]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class nt{constructor(n){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...r)})},this.target=n}add(n,r,s){var l;(l=this.target)==null||l.addEventListener(n,r,s),this.listeners.push([n,r,s])}}function il(t){const{EventTarget:n}=he(t);return t instanceof n?t:Be(t)}function Gt(t,n){const r=Math.abs(t.x),s=Math.abs(t.y);return typeof n=="number"?Math.sqrt(r**2+s**2)>n:"x"in n&&"y"in n?r>n.x&&s>n.y:"x"in n?r>n.x:"y"in n?s>n.y:!1}var ye;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(ye||(ye={}));function On(t){t.preventDefault()}function cl(t){t.stopPropagation()}var ee;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(ee||(ee={}));const Zn={start:[ee.Space,ee.Enter],cancel:[ee.Esc],end:[ee.Space,ee.Enter,ee.Tab]},ul=(t,n)=>{let{currentCoordinates:r}=n;switch(t.code){case ee.Right:return{...r,x:r.x+25};case ee.Left:return{...r,x:r.x-25};case ee.Down:return{...r,y:r.y+25};case ee.Up:return{...r,y:r.y-25}}};class Xt{constructor(n){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=n;const{event:{target:r}}=n;this.props=n,this.listeners=new nt(Be(r)),this.windowListeners=new nt(he(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ye.Resize,this.handleCancel),this.windowListeners.add(ye.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ye.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:n,onStart:r}=this.props,s=n.node.current;s&&ol(s),r(xe)}handleKeyDown(n){if(jt(n)){const{active:r,context:s,options:l}=this.props,{keyboardCodes:o=Zn,coordinateGetter:a=ul,scrollBehavior:i="smooth"}=l,{code:c}=n;if(o.end.includes(c)){this.handleEnd(n);return}if(o.cancel.includes(c)){this.handleCancel(n);return}const{collisionRect:u}=s.current,d=u?{x:u.left,y:u.top}:xe;this.referenceCoordinates||(this.referenceCoordinates=d);const m=a(n,{active:r,context:s.current,currentCoordinates:d});if(m){const f=et(m,d),p={x:0,y:0},{scrollableAncestors:h}=s.current;for(const v of h){const k=n.code,{isTop:x,isRight:_,isLeft:C,isBottom:D,maxScroll:g,minScroll:S}=Fn(v),A=rl(v),w={x:Math.min(k===ee.Right?A.right-A.width/2:A.right,Math.max(k===ee.Right?A.left:A.left+A.width/2,m.x)),y:Math.min(k===ee.Down?A.bottom-A.height/2:A.bottom,Math.max(k===ee.Down?A.top:A.top+A.height/2,m.y))},E=k===ee.Right&&!_||k===ee.Left&&!C,T=k===ee.Down&&!D||k===ee.Up&&!x;if(E&&w.x!==m.x){const b=v.scrollLeft+f.x,N=k===ee.Right&&b<=g.x||k===ee.Left&&b>=S.x;if(N&&!f.y){v.scrollTo({left:b,behavior:i});return}N?p.x=v.scrollLeft-b:p.x=k===ee.Right?v.scrollLeft-g.x:v.scrollLeft-S.x,p.x&&v.scrollBy({left:-p.x,behavior:i});break}else if(T&&w.y!==m.y){const b=v.scrollTop+f.y,N=k===ee.Down&&b<=g.y||k===ee.Up&&b>=S.y;if(N&&!f.x){v.scrollTo({top:b,behavior:i});return}N?p.y=v.scrollTop-b:p.y=k===ee.Down?v.scrollTop-g.y:v.scrollTop-S.y,p.y&&v.scrollBy({top:-p.y,behavior:i});break}}this.handleMove(n,je(et(m,this.referenceCoordinates),p))}}}handleMove(n,r){const{onMove:s}=this.props;n.preventDefault(),s(r)}handleEnd(n){const{onEnd:r}=this.props;n.preventDefault(),this.detach(),r()}handleCancel(n){const{onCancel:r}=this.props;n.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Xt.activators=[{eventName:"onKeyDown",handler:(t,n,r)=>{let{keyboardCodes:s=Zn,onActivation:l}=n,{active:o}=r;const{code:a}=t.nativeEvent;if(s.start.includes(a)){const i=o.activatorNode.current;return i&&t.target!==i?!1:(t.preventDefault(),l?.({event:t.nativeEvent}),!0)}return!1}}];function qn(t){return!!(t&&"distance"in t)}function Bn(t){return!!(t&&"delay"in t)}class Jt{constructor(n,r,s){var l;s===void 0&&(s=il(n.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=n,this.events=r;const{event:o}=n,{target:a}=o;this.props=n,this.events=r,this.document=Be(a),this.documentListeners=new nt(this.document),this.listeners=new nt(s),this.windowListeners=new nt(he(a)),this.initialCoordinates=(l=zt(o))!=null?l:xe,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:n,props:{options:{activationConstraint:r,bypassActivationConstraint:s}}}=this;if(this.listeners.add(n.move.name,this.handleMove,{passive:!1}),this.listeners.add(n.end.name,this.handleEnd),n.cancel&&this.listeners.add(n.cancel.name,this.handleCancel),this.windowListeners.add(ye.Resize,this.handleCancel),this.windowListeners.add(ye.DragStart,On),this.windowListeners.add(ye.VisibilityChange,this.handleCancel),this.windowListeners.add(ye.ContextMenu,On),this.documentListeners.add(ye.Keydown,this.handleKeydown),r){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Bn(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(qn(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(n,r){const{active:s,onPending:l}=this.props;l(s,n,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:n}=this,{onStart:r}=this.props;n&&(this.activated=!0,this.documentListeners.add(ye.Click,cl,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ye.SelectionChange,this.removeTextSelection),r(n))}handleMove(n){var r;const{activated:s,initialCoordinates:l,props:o}=this,{onMove:a,options:{activationConstraint:i}}=o;if(!l)return;const c=(r=zt(n))!=null?r:xe,u=et(l,c);if(!s&&i){if(qn(i)){if(i.tolerance!=null&&Gt(u,i.tolerance))return this.handleCancel();if(Gt(u,i.distance))return this.handleStart()}if(Bn(i)&&Gt(u,i.tolerance))return this.handleCancel();this.handlePending(i,u);return}n.cancelable&&n.preventDefault(),a(c)}handleEnd(){const{onAbort:n,onEnd:r}=this.props;this.detach(),this.activated||n(this.props.active),r()}handleCancel(){const{onAbort:n,onCancel:r}=this.props;this.detach(),this.activated||n(this.props.active),r()}handleKeydown(n){n.code===ee.Esc&&this.handleCancel()}removeTextSelection(){var n;(n=this.document.getSelection())==null||n.removeAllRanges()}}const dl={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Kt extends Jt{constructor(n){const{event:r}=n,s=Be(r.target);super(n,dl,s)}}Kt.activators=[{eventName:"onPointerDown",handler:(t,n)=>{let{nativeEvent:r}=t,{onActivation:s}=n;return!r.isPrimary||r.button!==0?!1:(s?.({event:r}),!0)}}];const ml={move:{name:"mousemove"},end:{name:"mouseup"}};var Qt;(function(t){t[t.RightClick=2]="RightClick"})(Qt||(Qt={}));class pl extends Jt{constructor(n){super(n,ml,Be(n.event.target))}}pl.activators=[{eventName:"onMouseDown",handler:(t,n)=>{let{nativeEvent:r}=t,{onActivation:s}=n;return r.button===Qt.RightClick?!1:(s?.({event:r}),!0)}}];const Rt={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class fl extends Jt{constructor(n){super(n,Rt)}static setup(){return window.addEventListener(Rt.move.name,n,{capture:!1,passive:!1}),function(){window.removeEventListener(Rt.move.name,n)};function n(){}}}fl.activators=[{eventName:"onTouchStart",handler:(t,n)=>{let{nativeEvent:r}=t,{onActivation:s}=n;const{touches:l}=r;return l.length>1?!1:(s?.({event:r}),!0)}}];var rt;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(rt||(rt={}));var yt;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(yt||(yt={}));function hl(t){let{acceleration:n,activator:r=rt.Pointer,canScroll:s,draggingRect:l,enabled:o,interval:a=5,order:i=yt.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:d,delta:m,threshold:f}=t;const p=vl({delta:m,disabled:!o}),[h,v]=Ms(),k=e.useRef({x:0,y:0}),x=e.useRef({x:0,y:0}),_=e.useMemo(()=>{switch(r){case rt.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case rt.DraggableRect:return l}},[r,l,c]),C=e.useRef(null),D=e.useCallback(()=>{const S=C.current;if(!S)return;const A=k.current.x*x.current.x,w=k.current.y*x.current.y;S.scrollBy(A,w)},[]),g=e.useMemo(()=>i===yt.TreeOrder?[...u].reverse():u,[i,u]);e.useEffect(()=>{if(!o||!u.length||!_){v();return}for(const S of g){if(s?.(S)===!1)continue;const A=u.indexOf(S),w=d[A];if(!w)continue;const{direction:E,speed:T}=nl(S,w,_,n,f);for(const b of["x","y"])p[b][E[b]]||(T[b]=0,E[b]=0);if(T.x>0||T.y>0){v(),C.current=S,h(D,a),k.current=T,x.current=E;return}}k.current={x:0,y:0},x.current={x:0,y:0},v()},[n,D,s,v,o,a,JSON.stringify(_),JSON.stringify(p),h,u,g,d,JSON.stringify(f)])}const gl={x:{[ue.Backward]:!1,[ue.Forward]:!1},y:{[ue.Backward]:!1,[ue.Forward]:!1}};function vl(t){let{delta:n,disabled:r}=t;const s=qt(n);return Re(l=>{if(r||!s||!l)return gl;const o={x:Math.sign(n.x-s.x),y:Math.sign(n.y-s.y)};return{x:{[ue.Backward]:l.x[ue.Backward]||o.x===-1,[ue.Forward]:l.x[ue.Forward]||o.x===1},y:{[ue.Backward]:l.y[ue.Backward]||o.y===-1,[ue.Forward]:l.y[ue.Forward]||o.y===1}}},[r,n,s])}function Cl(t,n){const r=n!=null?t.get(n):void 0,s=r?r.node.current:null;return Re(l=>{var o;return n==null?null:(o=s??l)!=null?o:null},[s,n])}function El(t,n){return e.useMemo(()=>t.reduce((r,s)=>{const{sensor:l}=s,o=l.activators.map(a=>({eventName:a.eventName,handler:n(a.handler,s)}));return[...r,...o]},[]),[t,n])}var st;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(st||(st={}));var $t;(function(t){t.Optimized="optimized"})($t||($t={}));const jn=new Map;function wl(t,n){let{dragging:r,dependencies:s,config:l}=n;const[o,a]=e.useState(null),{frequency:i,measure:c,strategy:u}=l,d=e.useRef(t),m=k(),f=Qe(m),p=e.useCallback(function(x){x===void 0&&(x=[]),!f.current&&a(_=>_===null?x:_.concat(x.filter(C=>!_.includes(C))))},[f]),h=e.useRef(null),v=Re(x=>{if(m&&!r)return jn;if(!x||x===jn||d.current!==t||o!=null){const _=new Map;for(let C of t){if(!C)continue;if(o&&o.length>0&&!o.includes(C.id)&&C.rect.current){_.set(C.id,C.rect.current);continue}const D=C.node.current,g=D?new Yt(c(D),D):null;C.rect.current=g,g&&_.set(C.id,g)}return _}return x},[t,o,r,m,c]);return e.useEffect(()=>{d.current=t},[t]),e.useEffect(()=>{m||p()},[r,m]),e.useEffect(()=>{o&&o.length>0&&a(null)},[JSON.stringify(o)]),e.useEffect(()=>{m||typeof i!="number"||h.current!==null||(h.current=setTimeout(()=>{p(),h.current=null},i))},[i,m,p,...s]),{droppableRects:v,measureDroppableContainers:p,measuringScheduled:o!=null};function k(){switch(u){case st.Always:return!1;case st.BeforeDragging:return r;default:return!r}}}function zn(t,n){return Re(r=>t?r||(typeof n=="function"?n(t):t):null,[n,t])}function yl(t,n){return zn(t,n)}function bl(t){let{callback:n,disabled:r}=t;const s=Zt(n),l=e.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(s)},[s,r]);return e.useEffect(()=>()=>l?.disconnect(),[l]),l}function bt(t){let{callback:n,disabled:r}=t;const s=Zt(n),l=e.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(s)},[r]);return e.useEffect(()=>()=>l?.disconnect(),[l]),l}function xl(t){return new Yt(ze(t),t)}function Un(t,n,r){n===void 0&&(n=xl);const[s,l]=e.useState(null);function o(){l(c=>{if(!t)return null;if(t.isConnected===!1){var u;return(u=c??r)!=null?u:null}const d=n(t);return JSON.stringify(c)===JSON.stringify(d)?c:d})}const a=bl({callback(c){if(t)for(const u of c){const{type:d,target:m}=u;if(d==="childList"&&m instanceof HTMLElement&&m.contains(t)){o();break}}}}),i=bt({callback:o});return ke(()=>{o(),t?(i?.observe(t),a?.observe(document.body,{childList:!0,subtree:!0})):(i?.disconnect(),a?.disconnect())},[t]),s}function Nl(t){const n=zn(t);return Ln(t,n)}const Wn=[];function kl(t){const n=e.useRef(t),r=Re(s=>t?s&&s!==Wn&&t&&n.current&&t.parentNode===n.current.parentNode?s:wt(t):Wn,[t]);return e.useEffect(()=>{n.current=t},[t]),r}function _l(t){const[n,r]=e.useState(null),s=e.useRef(t),l=e.useCallback(o=>{const a=Ut(o.target);a&&r(i=>i?(i.set(a,Wt(a)),new Map(i)):null)},[]);return e.useEffect(()=>{const o=s.current;if(t!==o){a(o);const i=t.map(c=>{const u=Ut(c);return u?(u.addEventListener("scroll",l,{passive:!0}),[u,Wt(u)]):null}).filter(c=>c!=null);r(i.length?new Map(i):null),s.current=t}return()=>{a(t),a(o)};function a(i){i.forEach(c=>{const u=Ut(c);u?.removeEventListener("scroll",l)})}},[l,t]),e.useMemo(()=>t.length?n?Array.from(n.values()).reduce((o,a)=>je(o,a),xe):Pn(t):xe,[t,n])}function Yn(t,n){n===void 0&&(n=[]);const r=e.useRef(null);return e.useEffect(()=>{r.current=null},n),e.useEffect(()=>{const s=t!==xe;s&&!r.current&&(r.current=t),!s&&r.current&&(r.current=null)},[t]),r.current?et(t,r.current):xe}function Sl(t){e.useEffect(()=>{if(!vt)return;const n=t.map(r=>{let{sensor:s}=r;return s.setup==null?void 0:s.setup()});return()=>{for(const r of n)r?.()}},t.map(n=>{let{sensor:r}=n;return r}))}function Ml(t,n){return e.useMemo(()=>t.reduce((r,s)=>{let{eventName:l,handler:o}=s;return r[l]=a=>{o(a,n)},r},{}),[t,n])}function Gn(t){return e.useMemo(()=>t?Rs(t):null,[t])}const Xn=[];function Il(t,n){n===void 0&&(n=ze);const[r]=t,s=Gn(r?he(r):null),[l,o]=e.useState(Xn);function a(){o(()=>t.length?t.map(c=>Vn(c)?s:new Yt(n(c),c)):Xn)}const i=bt({callback:a});return ke(()=>{i?.disconnect(),a(),t.forEach(c=>i?.observe(c))},[t]),l}function Ll(t){if(!t)return null;if(t.children.length>1)return t;const n=t.children[0];return Ke(n)?n:t}function Dl(t){let{measure:n}=t;const[r,s]=e.useState(null),l=e.useCallback(u=>{for(const{target:d}of u)if(Ke(d)){s(m=>{const f=n(d);return m?{...m,width:f.width,height:f.height}:f});break}},[n]),o=bt({callback:l}),a=e.useCallback(u=>{const d=Ll(u);o?.disconnect(),d&&o?.observe(d),s(d?n(d):null)},[n,o]),[i,c]=Ct(a);return e.useMemo(()=>({nodeRef:i,rect:r,setRef:c}),[r,i,c])}const Al=[{sensor:Kt,options:{}},{sensor:Xt,options:{}}],Tl={current:{}},xt={draggable:{measure:Dn},droppable:{measure:Dn,strategy:st.WhileDragging,frequency:$t.Optimized},dragOverlay:{measure:ze}};class lt extends Map{get(n){var r;return n!=null&&(r=super.get(n))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(n=>{let{disabled:r}=n;return!r})}getNodeFor(n){var r,s;return(r=(s=this.get(n))==null?void 0:s.node.current)!=null?r:void 0}}const Hl={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new lt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Et},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:xt,measureDroppableContainers:Et,windowRect:null,measuringScheduled:!1},Vl={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Et,draggableNodes:new Map,over:null,measureDroppableContainers:Et},Nt=e.createContext(Vl),Jn=e.createContext(Hl);function Fl(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new lt}}}function Pl(t,n){switch(n.type){case ce.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:n.initialCoordinates,active:n.active}};case ce.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:n.coordinates.x-t.draggable.initialCoordinates.x,y:n.coordinates.y-t.draggable.initialCoordinates.y}}};case ce.DragEnd:case ce.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case ce.RegisterDroppable:{const{element:r}=n,{id:s}=r,l=new lt(t.droppable.containers);return l.set(s,r),{...t,droppable:{...t.droppable,containers:l}}}case ce.SetDroppableDisabled:{const{id:r,key:s,disabled:l}=n,o=t.droppable.containers.get(r);if(!o||s!==o.key)return t;const a=new lt(t.droppable.containers);return a.set(r,{...o,disabled:l}),{...t,droppable:{...t.droppable,containers:a}}}case ce.UnregisterDroppable:{const{id:r,key:s}=n,l=t.droppable.containers.get(r);if(!l||s!==l.key)return t;const o=new lt(t.droppable.containers);return o.delete(r),{...t,droppable:{...t.droppable,containers:o}}}default:return t}}function Ol(t){let{disabled:n}=t;const{active:r,activatorEvent:s,draggableNodes:l}=e.useContext(Nt),o=qt(s),a=qt(r?.id);return e.useEffect(()=>{if(!n&&!s&&o&&a!=null){if(!jt(o)||document.activeElement===o.target)return;const i=l.get(a);if(!i)return;const{activatorNode:c,node:u}=i;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[c.current,u.current]){if(!d)continue;const m=Ds(d);if(m){m.focus();break}}})}},[s,n,l,a,o]),null}function Zl(t,n){let{transform:r,...s}=n;return t!=null&&t.length?t.reduce((l,o)=>o({transform:l,...s}),r):r}function ql(t){return e.useMemo(()=>({draggable:{...xt.draggable,...t?.draggable},droppable:{...xt.droppable,...t?.droppable},dragOverlay:{...xt.dragOverlay,...t?.dragOverlay}}),[t?.draggable,t?.droppable,t?.dragOverlay])}function Bl(t){let{activeNode:n,measure:r,initialRect:s,config:l=!0}=t;const o=e.useRef(!1),{x:a,y:i}=typeof l=="boolean"?{x:l,y:l}:l;ke(()=>{if(!a&&!i||!n){o.current=!1;return}if(o.current||!s)return;const u=n?.node.current;if(!u||u.isConnected===!1)return;const d=r(u),m=Ln(d,s);if(a||(m.x=0),i||(m.y=0),o.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const f=An(u);f&&f.scrollBy({top:m.y,left:m.x})}},[n,a,i,s,r])}const Kn=e.createContext({...xe,scaleX:1,scaleY:1});var Ae;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Ae||(Ae={}));const ot=e.memo(function(n){var r,s,l,o;let{id:a,accessibility:i,autoScroll:c=!0,children:u,sensors:d=Al,collisionDetection:m=Ws,measuring:f,modifiers:p,...h}=n;const v=e.useReducer(Pl,void 0,Fl),[k,x]=v,[_,C]=Ps(),[D,g]=e.useState(Ae.Uninitialized),S=D===Ae.Initialized,{draggable:{active:A,nodes:w,translate:E},droppable:{containers:T}}=k,b=A!=null?w.get(A):null,N=e.useRef({initial:null,translated:null}),M=e.useMemo(()=>{var fe;return A!=null?{id:A,data:(fe=b?.data)!=null?fe:Tl,rect:N}:null},[A,b]),F=e.useRef(null),[q,I]=e.useState(null),[L,j]=e.useState(null),Y=Qe(h,Object.values(h)),J=$e("DndDescribedBy",a),se=e.useMemo(()=>T.getEnabled(),[T]),Q=ql(f),{droppableRects:R,measureDroppableContainers:oe,measuringScheduled:te}=wl(se,{dragging:S,dependencies:[E.x,E.y],config:Q.droppable}),O=Cl(w,A),P=e.useMemo(()=>L?zt(L):null,[L]),y=pi(),H=yl(O,Q.draggable.measure);Bl({activeNode:A!=null?w.get(A):null,config:y.layoutShiftCompensation,initialRect:H,measure:Q.draggable.measure});const Z=Un(O,Q.draggable.measure,H),V=Un(O?O.parentElement:null),z=e.useRef({activatorEvent:null,active:null,activeNode:O,collisionRect:null,collisions:null,droppableRects:R,draggableNodes:w,draggingNode:null,draggingNodeRect:null,droppableContainers:T,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),W=T.getNodeFor((r=z.current.over)==null?void 0:r.id),K=Dl({measure:Q.dragOverlay.measure}),$=(s=K.nodeRef.current)!=null?s:O,B=S?(l=K.rect)!=null?l:Z:null,U=!!(K.nodeRef.current&&K.rect),G=Nl(U?null:Z),X=Gn($?he($):null),le=kl(S?W??O:null),ie=Il(le),ne=Zl(p,{transform:{x:E.x-G.x,y:E.y-G.y,scaleX:1,scaleY:1},activatorEvent:L,active:M,activeNodeRect:Z,containerNodeRect:V,draggingNodeRect:B,over:z.current.over,overlayNodeRect:K.rect,scrollableAncestors:le,scrollableAncestorRects:ie,windowRect:X}),ae=P?je(P,E):null,pe=_l(le),oi=Yn(pe),ai=Yn(pe,[Z]),We=je(ne,oi),Ye=B?Xs(B,ne):null,ut=M&&Ye?m({active:M,collisionRect:Ye,droppableRects:R,droppableContainers:se,pointerCoordinates:ae}):null,yr=Mn(ut,"id"),[Te,br]=e.useState(null),ii=U?ne:je(ne,ai),ci=Ys(ii,(o=Te?.rect)!=null?o:null,Z),rn=e.useRef(null),xr=e.useCallback((fe,ve)=>{let{sensor:Ce,options:He}=ve;if(F.current==null)return;const be=w.get(F.current);if(!be)return;const Ee=fe.nativeEvent,_e=new Ce({active:F.current,activeNode:be,event:Ee,options:He,context:z,onAbort(de){if(!w.get(de))return;const{onDragAbort:Se}=Y.current,De={id:de};Se?.(De),_({type:"onDragAbort",event:De})},onPending(de,Ve,Se,De){if(!w.get(de))return;const{onDragPending:mt}=Y.current,Fe={id:de,constraint:Ve,initialCoordinates:Se,offset:De};mt?.(Fe),_({type:"onDragPending",event:Fe})},onStart(de){const Ve=F.current;if(Ve==null)return;const Se=w.get(Ve);if(!Se)return;const{onDragStart:De}=Y.current,dt={activatorEvent:Ee,active:{id:Ve,data:Se.data,rect:N}};Pe.unstable_batchedUpdates(()=>{De?.(dt),g(Ae.Initializing),x({type:ce.DragStart,initialCoordinates:de,active:Ve}),_({type:"onDragStart",event:dt}),I(rn.current),j(Ee)})},onMove(de){x({type:ce.DragMove,coordinates:de})},onEnd:Ge(ce.DragEnd),onCancel:Ge(ce.DragCancel)});rn.current=_e;function Ge(de){return async function(){const{active:Se,collisions:De,over:dt,scrollAdjustedTranslate:mt}=z.current;let Fe=null;if(Se&&mt){const{cancelDrop:pt}=Y.current;Fe={activatorEvent:Ee,active:Se,collisions:De,delta:mt,over:dt},de===ce.DragEnd&&typeof pt=="function"&&await Promise.resolve(pt(Fe))&&(de=ce.DragCancel)}F.current=null,Pe.unstable_batchedUpdates(()=>{x({type:de}),g(Ae.Uninitialized),br(null),I(null),j(null),rn.current=null;const pt=de===ce.DragEnd?"onDragEnd":"onDragCancel";if(Fe){const sn=Y.current[pt];sn?.(Fe),_({type:pt,event:Fe})}})}}},[w]),ui=e.useCallback((fe,ve)=>(Ce,He)=>{const be=Ce.nativeEvent,Ee=w.get(He);if(F.current!==null||!Ee||be.dndKit||be.defaultPrevented)return;const _e={active:Ee};fe(Ce,ve.options,_e)===!0&&(be.dndKit={capturedBy:ve.sensor},F.current=He,xr(Ce,ve))},[w,xr]),Nr=El(d,ui);Sl(d),ke(()=>{Z&&D===Ae.Initializing&&g(Ae.Initialized)},[Z,D]),e.useEffect(()=>{const{onDragMove:fe}=Y.current,{active:ve,activatorEvent:Ce,collisions:He,over:be}=z.current;if(!ve||!Ce)return;const Ee={active:ve,activatorEvent:Ce,collisions:He,delta:{x:We.x,y:We.y},over:be};Pe.unstable_batchedUpdates(()=>{fe?.(Ee),_({type:"onDragMove",event:Ee})})},[We.x,We.y]),e.useEffect(()=>{const{active:fe,activatorEvent:ve,collisions:Ce,droppableContainers:He,scrollAdjustedTranslate:be}=z.current;if(!fe||F.current==null||!ve||!be)return;const{onDragOver:Ee}=Y.current,_e=He.get(yr),Ge=_e&&_e.rect.current?{id:_e.id,rect:_e.rect.current,data:_e.data,disabled:_e.disabled}:null,de={active:fe,activatorEvent:ve,collisions:Ce,delta:{x:be.x,y:be.y},over:Ge};Pe.unstable_batchedUpdates(()=>{br(Ge),Ee?.(de),_({type:"onDragOver",event:de})})},[yr]),ke(()=>{z.current={activatorEvent:L,active:M,activeNode:O,collisionRect:Ye,collisions:ut,droppableRects:R,draggableNodes:w,draggingNode:$,draggingNodeRect:B,droppableContainers:T,over:Te,scrollableAncestors:le,scrollAdjustedTranslate:We},N.current={initial:B,translated:Ye}},[M,O,ut,Ye,w,$,B,R,T,Te,le,We]),hl({...y,delta:E,draggingRect:Ye,pointerCoordinates:ae,scrollableAncestors:le,scrollableAncestorRects:ie});const di=e.useMemo(()=>({active:M,activeNode:O,activeNodeRect:Z,activatorEvent:L,collisions:ut,containerNodeRect:V,dragOverlay:K,draggableNodes:w,droppableContainers:T,droppableRects:R,over:Te,measureDroppableContainers:oe,scrollableAncestors:le,scrollableAncestorRects:ie,measuringConfiguration:Q,measuringScheduled:te,windowRect:X}),[M,O,Z,L,ut,V,K,w,T,R,Te,oe,le,ie,Q,te,X]),mi=e.useMemo(()=>({activatorEvent:L,activators:Nr,active:M,activeNodeRect:Z,ariaDescribedById:{draggable:J},dispatch:x,draggableNodes:w,over:Te,measureDroppableContainers:oe}),[L,Nr,M,Z,x,J,w,Te,oe]);return e.createElement(xn.Provider,{value:C},e.createElement(Nt.Provider,{value:mi},e.createElement(Jn.Provider,{value:di},e.createElement(Kn.Provider,{value:ci},u)),e.createElement(Ol,{disabled:i?.restoreFocus===!1})),e.createElement(qs,{...i,hiddenTextDescribedById:J}));function pi(){const fe=q?.autoScrollEnabled===!1,ve=typeof c=="object"?c.enabled===!1:c===!1,Ce=S&&!fe&&!ve;return typeof c=="object"?{...c,enabled:Ce}:{enabled:Ce}}}),jl=e.createContext(null),Qn="button",zl="Draggable";function Ul(t){let{id:n,data:r,disabled:s=!1,attributes:l}=t;const o=$e(zl),{activators:a,activatorEvent:i,active:c,activeNodeRect:u,ariaDescribedById:d,draggableNodes:m,over:f}=e.useContext(Nt),{role:p=Qn,roleDescription:h="draggable",tabIndex:v=0}=l??{},k=c?.id===n,x=e.useContext(k?Kn:jl),[_,C]=Ct(),[D,g]=Ct(),S=Ml(a,n),A=Qe(r);ke(()=>(m.set(n,{id:n,key:o,node:_,activatorNode:D,data:A}),()=>{const E=m.get(n);E&&E.key===o&&m.delete(n)}),[m,n]);const w=e.useMemo(()=>({role:p,tabIndex:v,"aria-disabled":s,"aria-pressed":k&&p===Qn?!0:void 0,"aria-roledescription":h,"aria-describedby":d.draggable}),[s,p,v,k,h,d.draggable]);return{active:c,activatorEvent:i,activeNodeRect:u,attributes:w,isDragging:k,listeners:s?void 0:S,node:_,over:f,setNodeRef:C,setActivatorNodeRef:g,transform:x}}function Wl(){return e.useContext(Jn)}const Yl="Droppable",Gl={timeout:25};function Xl(t){let{data:n,disabled:r=!1,id:s,resizeObserverConfig:l}=t;const o=$e(Yl),{active:a,dispatch:i,over:c,measureDroppableContainers:u}=e.useContext(Nt),d=e.useRef({disabled:r}),m=e.useRef(!1),f=e.useRef(null),p=e.useRef(null),{disabled:h,updateMeasurementsFor:v,timeout:k}={...Gl,...l},x=Qe(v??s),_=e.useCallback(()=>{if(!m.current){m.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{u(Array.isArray(x.current)?x.current:[x.current]),p.current=null},k)},[k]),C=bt({callback:_,disabled:h||!a}),D=e.useCallback((w,E)=>{C&&(E&&(C.unobserve(E),m.current=!1),w&&C.observe(w))},[C]),[g,S]=Ct(D),A=Qe(n);return e.useEffect(()=>{!C||!g.current||(C.disconnect(),m.current=!1,C.observe(g.current))},[g,C]),e.useEffect(()=>(i({type:ce.RegisterDroppable,element:{id:s,key:o,disabled:r,node:g,rect:f,data:A}}),()=>i({type:ce.UnregisterDroppable,key:o,id:s})),[s]),e.useEffect(()=>{r!==d.current.disabled&&(i({type:ce.SetDroppableDisabled,id:s,key:o,disabled:r}),d.current.disabled=r)},[s,o,r,i]),{active:a,rect:f,isOver:c?.id===s,node:g,over:c,setNodeRef:S}}function Ze(t,n,r){const s=t.slice();return s.splice(r<0?s.length+r:r,0,s.splice(n,1)[0]),s}function Jl(t,n){return t.reduce((r,s,l)=>{const o=n.get(s);return o&&(r[l]=o),r},Array(t.length))}function kt(t){return t!==null&&t>=0}function Kl(t,n){if(t===n)return!0;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==n[r])return!1;return!0}function Ql(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const Rn=t=>{let{rects:n,activeIndex:r,overIndex:s,index:l}=t;const o=Ze(n,s,r),a=n[l],i=o[l];return!i||!a?null:{x:i.left-a.left,y:i.top-a.top,scaleX:i.width/a.width,scaleY:i.height/a.height}},_t={scaleX:1,scaleY:1},at=t=>{var n;let{activeIndex:r,activeNodeRect:s,index:l,rects:o,overIndex:a}=t;const i=(n=o[r])!=null?n:s;if(!i)return null;if(l===r){const u=o[a];return u?{x:0,y:r<a?u.top+u.height-(i.top+i.height):u.top-i.top,..._t}:null}const c=Rl(o,l,r);return l>r&&l<=a?{x:0,y:-i.height-c,..._t}:l<r&&l>=a?{x:0,y:i.height+c,..._t}:{x:0,y:0,..._t}};function Rl(t,n,r){const s=t[n],l=t[n-1],o=t[n+1];return s?r<n?l?s.top-(l.top+l.height):o?o.top-(s.top+s.height):0:o?o.top-(s.top+s.height):l?s.top-(l.top+l.height):0:0}const $n="Sortable",er=e.createContext({activeIndex:-1,containerId:$n,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Rn,disabled:{draggable:!1,droppable:!1}});function it(t){let{children:n,id:r,items:s,strategy:l=Rn,disabled:o=!1}=t;const{active:a,dragOverlay:i,droppableRects:c,over:u,measureDroppableContainers:d}=Wl(),m=$e($n,r),f=i.rect!==null,p=e.useMemo(()=>s.map(S=>typeof S=="object"&&"id"in S?S.id:S),[s]),h=a!=null,v=a?p.indexOf(a.id):-1,k=u?p.indexOf(u.id):-1,x=e.useRef(p),_=!Kl(p,x.current),C=k!==-1&&v===-1||_,D=Ql(o);ke(()=>{_&&h&&d(p)},[_,p,h,d]),e.useEffect(()=>{x.current=p},[p]);const g=e.useMemo(()=>({activeIndex:v,containerId:m,disabled:D,disableTransforms:C,items:p,overIndex:k,useDragOverlay:f,sortedRects:Jl(p,c),strategy:l}),[v,m,D.draggable,D.droppable,C,p,k,c,f,l]);return e.createElement(er.Provider,{value:g},n)}const $l=t=>{let{id:n,items:r,activeIndex:s,overIndex:l}=t;return Ze(r,s,l).indexOf(n)},eo=t=>{let{containerId:n,isSorting:r,wasDragging:s,index:l,items:o,newIndex:a,previousItems:i,previousContainerId:c,transition:u}=t;return!u||!s||i!==o&&l===a?!1:r?!0:a!==l&&n===c},to={duration:200,easing:"ease"},tr="transform",no=Le.Transition.toString({property:tr,duration:0,easing:"linear"}),ro={roleDescription:"sortable"};function so(t){let{disabled:n,index:r,node:s,rect:l}=t;const[o,a]=e.useState(null),i=e.useRef(r);return ke(()=>{if(!n&&r!==i.current&&s.current){const c=l.current;if(c){const u=ze(s.current,{ignoreTransform:!0}),d={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(d.x||d.y)&&a(d)}}r!==i.current&&(i.current=r)},[n,r,s,l]),e.useEffect(()=>{o&&a(null)},[o]),o}function ct(t){let{animateLayoutChanges:n=eo,attributes:r,disabled:s,data:l,getNewIndex:o=$l,id:a,strategy:i,resizeObserverConfig:c,transition:u=to}=t;const{items:d,containerId:m,activeIndex:f,disabled:p,disableTransforms:h,sortedRects:v,overIndex:k,useDragOverlay:x,strategy:_}=e.useContext(er),C=lo(s,p),D=d.indexOf(a),g=e.useMemo(()=>({sortable:{containerId:m,index:D,items:d},...l}),[m,l,D,d]),S=e.useMemo(()=>d.slice(d.indexOf(a)),[d,a]),{rect:A,node:w,isOver:E,setNodeRef:T}=Xl({id:a,data:g,disabled:C.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...c}}),{active:b,activatorEvent:N,activeNodeRect:M,attributes:F,setNodeRef:q,listeners:I,isDragging:L,over:j,setActivatorNodeRef:Y,transform:J}=Ul({id:a,data:g,attributes:{...ro,...r},disabled:C.draggable}),se=Ss(T,q),Q=!!b,R=Q&&!h&&kt(f)&&kt(k),oe=!x&&L,te=oe&&R?J:null,P=R?te??(i??_)({rects:v,activeNodeRect:M,activeIndex:f,overIndex:k,index:D}):null,y=kt(f)&&kt(k)?o({id:a,items:d,activeIndex:f,overIndex:k}):D,H=b?.id,Z=e.useRef({activeId:H,items:d,newIndex:y,containerId:m}),V=d!==Z.current.items,z=n({active:b,containerId:m,isDragging:L,isSorting:Q,id:a,index:D,items:d,newIndex:Z.current.newIndex,previousItems:Z.current.items,previousContainerId:Z.current.containerId,transition:u,wasDragging:Z.current.activeId!=null}),W=so({disabled:!z,index:D,node:w,rect:A});return e.useEffect(()=>{Q&&Z.current.newIndex!==y&&(Z.current.newIndex=y),m!==Z.current.containerId&&(Z.current.containerId=m),d!==Z.current.items&&(Z.current.items=d)},[Q,y,m,d]),e.useEffect(()=>{if(H===Z.current.activeId)return;if(H!=null&&Z.current.activeId==null){Z.current.activeId=H;return}const $=setTimeout(()=>{Z.current.activeId=H},50);return()=>clearTimeout($)},[H]),{active:b,activeIndex:f,attributes:F,data:g,rect:A,index:D,newIndex:y,items:d,isOver:E,isSorting:Q,isDragging:L,listeners:I,node:w,overIndex:k,over:j,setNodeRef:se,setActivatorNodeRef:Y,setDroppableNodeRef:T,setDraggableNodeRef:q,transform:W??P,transition:K()};function K(){if(W||V&&Z.current.newIndex===D)return no;if(!(oe&&!jt(N)||!u)&&(Q||z))return Le.Transition.toString({...u,property:tr})}}function lo(t,n){var r,s;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(r=t?.draggable)!=null?r:n.draggable,droppable:(s=t?.droppable)!=null?s:n.droppable}}function St(t){if(!t)return!1;const n=t.data.current;return!!(n&&"sortable"in n&&typeof n.sortable=="object"&&"containerId"in n.sortable&&"items"in n.sortable&&"index"in n.sortable)}const oo=[ee.Down,ee.Right,ee.Up,ee.Left],ao=(t,n)=>{let{context:{active:r,collisionRect:s,droppableRects:l,droppableContainers:o,over:a,scrollableAncestors:i}}=n;if(oo.includes(t.code)){if(t.preventDefault(),!r||!s)return;const c=[];o.getEnabled().forEach(m=>{if(!m||m!=null&&m.disabled)return;const f=l.get(m.id);if(f)switch(t.code){case ee.Down:s.top<f.top&&c.push(m);break;case ee.Up:s.top>f.top&&c.push(m);break;case ee.Left:s.left>f.left&&c.push(m);break;case ee.Right:s.left<f.left&&c.push(m);break}});const u=zs({collisionRect:s,droppableRects:l,droppableContainers:c});let d=Mn(u,"id");if(d===a?.id&&u.length>1&&(d=u[1].id),d!=null){const m=o.get(r.id),f=o.get(d),p=f?l.get(f.id):null,h=f?.node.current;if(h&&p&&m&&f){const k=wt(h).some((S,A)=>i[A]!==S),x=nr(m,f),_=io(m,f),C=k||!x?{x:0,y:0}:{x:_?s.width-p.width:0,y:_?s.height-p.height:0},D={x:p.left,y:p.top};return C.x&&C.y?D:et(D,C)}}}};function nr(t,n){return!St(t)||!St(n)?!1:t.data.current.sortable.containerId===n.data.current.sortable.containerId}function io(t,n){return!St(t)||!St(n)||!nr(t,n)?!1:t.data.current.sortable.index<n.data.current.sortable.index}const co=({field:t,value:n,onChange:r,onBlur:s,icons:l,postTypeKey:o})=>{const a=t.props||{},i=Array.isArray(a.fields)?a.fields:a.fields&&typeof a.fields=="object"?Object.values(a.fields).filter(N=>N!==null&&typeof N=="object"&&"key"in N&&N.key!=="meta:state"):[],c=a.row_label||"",u={item:a.l10n?.item||"Item",add_row:a.l10n?.add_row||"Add row"},d=a.min_rows||0,m=a.max_rows||0,f=()=>`${t.key}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,p=N=>{const M={"meta:state":{_uid:f(),collapsed:!1,label:`${u.item} ${N+1}`}};return i.forEach(F=>{M[F.key]={...F,value:F.value??null}}),M},[h,v]=e.useState(()=>{const N=a.rows;return Array.isArray(N)&&N.length>0?N.map((M,F)=>{const q=M["meta:state"]||{};return{...M,"meta:state":{...q,_uid:q._uid||f(),collapsed:q.collapsed??!0,label:q.label||`${u.item} ${F+1}`}}}):Array.isArray(n)&&n.length>0?n.map((M,F)=>M["meta:state"]&&M["meta:state"]._uid?M:{...M,"meta:state":{_uid:f(),collapsed:!0,label:M[c]||`${u.item} ${F+1}`}}):d&&d>0?Array.from({length:d},(M,F)=>p(F)):[]}),[k,x]=e.useState(null),_=()=>{if(m&&h.length>=m){t.validation.errors=[`Cannot add more than ${m} items`];return}t.validation.errors=[];const N=p(h.length),M=[...h,N];v(M),r(M),x(N["meta:state"]._uid)},C=N=>{const M=[...h];M.splice(N,1),d&&M.length<d?t.validation.errors=[`Must contain at least ${d} items`]:t.validation.errors=[],v(M),r(M)},D=N=>{x(k===N?null:N)},g=N=>{const{active:M,over:F}=N;if(!F||M.id===F.id)return;const q=h.findIndex(j=>j["meta:state"]._uid===M.id),I=h.findIndex(j=>j["meta:state"]._uid===F.id),L=Ze(h,q,I);v(L),r(L)},S=(N,M,F)=>{const q=[...h],I=q[N][M];if(I&&typeof I=="object"&&"type"in I?q[N][M]={...I,value:F}:q[N][M]=F,M===c){const L=i.find(Y=>Y.key===M);let j=F;switch(L?.type){case"select":case"taxonomy":j=L.props?.choices?.find(Q=>Q.value===F)?.label||String(F);break;case"multiselect":const J=F;j=`${Object.keys(J||{}).filter(Q=>J?.[Q]).length} selected`;break;case"date":j=F?new Date(F).toLocaleDateString():"";break}q[N]["meta:state"].label=String(j||`${u.item} ${N+1}`)}v(q),r(q)},A=(N,M)=>(()=>{const q=Object.entries(N).filter(([I])=>I!=="meta:state");return q.length>0&&q[0][1]&&typeof q[0][1]=="object"&&"type"in q[0][1]?q.map(([I,L])=>L):i.map(I=>({...I,value:N[I.key]??I.value??null}))})().map(q=>{const I={...q,repeater_index:M,repeater_id:t.key,key:`${t.key}[${M}][${q.key}]`};return e.createElement(Cr,{key:I.key,field:I,value:I.value,onChange:L=>S(M,q.key,L),onBlur:s,icons:l,postTypeKey:o})}),w=N=>i.some(M=>(N[M.key],{...M}.validation?.errors?.length>0)),E=t.validation?.errors?.[0]||"",T=E.length>0,b=({row:N,index:M})=>{const{attributes:F,listeners:q,setNodeRef:I,transform:L,transition:j,isDragging:Y}=ct({id:N["meta:state"]._uid}),J={transform:Le.Transform.toString(L),transition:j,opacity:Y?.5:1},se=k!==N["meta:state"]._uid,Q=w(N);return e.createElement("div",{ref:I,style:J,className:`ts-field-repeater ${se?"collapsed":""}`},e.createElement("div",{className:"ts-repeater-head",onClick:()=>D(N["meta:state"]._uid)},e.createElement("svg",{...F,...q,onClick:R=>R.stopPropagation(),id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 288 480"},e.createElement("path",{d:"M48,96A48,48,0,1,0,0,48,48,48,0,0,0,48,96Zm0,192A48,48,0,1,0,0,240,48,48,0,0,0,48,288ZM96,432a48,48,0,1,1-48-48A48,48,0,0,1,96,432ZM240,96a48,48,0,1,0-48-48A48,48,0,0,0,240,96Zm48,144a48,48,0,1,1-48-48A48,48,0,0,1,288,240ZM240,480a48,48,0,1,0-48-48A48,48,0,0,0,240,480Z",style:{fillRule:"evenodd"}})),e.createElement("label",null,N["meta:state"].label,Q&&e.createElement("span",{className:"ts-row-error",style:{display:"none"}})),e.createElement("div",{className:"ts-repeater-controller"},e.createElement("a",{href:"#",onClick:R=>{R.preventDefault(),R.stopPropagation(),C(M)},className:"ts-icon-btn ts-smaller no-drag",draggable:!1},Ie(l?.trashIcon,e.createElement("span",{style:{display:"contents"},dangerouslySetInnerHTML:{__html:Hr}}))),e.createElement("a",{href:"#",className:"ts-icon-btn ts-smaller no-drag",draggable:!1,onClick:R=>{R.preventDefault()}},Ie(l?.downIcon,e.createElement("span",{style:{display:"contents"},dangerouslySetInnerHTML:{__html:Ir}}))))),!se&&e.createElement("div",{className:"medium form-field-grid"},A(N,M)))};return e.createElement("div",{className:`ts-form-group ts-repeater field-key-${t.key} ${T?"ts-has-errors":""} ${t.css_class||""} ${t.hidden?"hidden":""}`},e.createElement("label",null,t.label,T?e.createElement("span",{className:"is-required"},E):!t.required&&e.createElement("span",{className:"is-required"},"Optional"),t.description&&e.createElement("div",{className:"vx-dialog"},e.createElement("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor"},e.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})),e.createElement("div",{className:"vx-dialog-content min-scroll"},e.createElement("p",null,t.description)))),e.createElement(ot,{onDragEnd:g,collisionDetection:tt},e.createElement(it,{items:h.map(N=>N["meta:state"]._uid),strategy:at},e.createElement("div",{className:"ts-repeater-container"},h.map((N,M)=>e.createElement(b,{key:N["meta:state"]._uid,row:N,index:M}))))),(!m||h.length<m)&&e.createElement("a",{href:"#",className:"ts-repeater-add ts-btn ts-btn-4 form-btn",onClick:N=>{N.preventDefault(),_()}},Ie(l?.tsAddIcon,e.createElement("span",{style:{display:"contents"},dangerouslySetInnerHTML:{__html:an}})),u.add_row))},uo=({field:t,value:n,onChange:r})=>{const s=n||{amount:null,discount_amount:null},l=t.props?.discount_price?.enabled||!1,o=window.Voxel_Config?.currency||"USD";return e.createElement(e.Fragment,null,e.createElement("div",{className:`ts-form-group ${l?"vx-1-2":""}`},e.createElement("label",null,t.label||"Price",t.description&&e.createElement("div",{className:"vx-dialog"},e.createElement(we,null),e.createElement("div",{className:"vx-dialog-content min-scroll"},e.createElement("p",{dangerouslySetInnerHTML:{__html:t.description}})))),e.createElement("div",{className:"input-container"},e.createElement("input",{type:"number",className:"ts-filter",value:s.amount||"",onChange:a=>r({...s,amount:a.target.value?parseFloat(a.target.value):null}),min:"0",placeholder:"Add price"}),e.createElement("span",{className:"input-suffix"},o))),l&&e.createElement("div",{className:"ts-form-group vx-1-2"},e.createElement("label",null,"Discount price"),e.createElement("div",{className:"input-container"},e.createElement("input",{type:"number",className:"ts-filter",value:s.discount_amount||"",onChange:a=>r({...s,discount_amount:a.target.value?parseFloat(a.target.value):null}),min:"0",placeholder:"Add price"}),e.createElement("span",{className:"input-suffix"},o))))},mo=({field:t,value:n,onChange:r})=>{const s=n||{enabled:!1,quantity:null,sku:"",sold_individually:!1},l=t.props?.sku?.enabled||!1,o=()=>{r({...s,enabled:!s.enabled})},a=()=>{r({...s,sold_individually:!s.sold_individually})};return e.createElement("div",{className:"ts-form-group switcher-label"},e.createElement("label",null,e.createElement("div",{className:"switch-slider"},e.createElement("div",{className:"onoffswitch"},e.createElement("input",{type:"checkbox",className:"onoffswitch-checkbox",checked:s.enabled||!1,onChange:o}),e.createElement("label",{className:"onoffswitch-label",onClick:i=>{i.preventDefault(),o()}}))),t.label||"Manage stock",t.description&&e.createElement("div",{className:"vx-dialog"},e.createElement(we,null),e.createElement("div",{className:"vx-dialog-content min-scroll"},e.createElement("p",{dangerouslySetInnerHTML:{__html:t.description}})))),s.enabled&&e.createElement("div",{className:"ts-field-repeater"},e.createElement("div",{className:"medium form-field-grid"},e.createElement("div",{className:"ts-form-group vx-1-2"},e.createElement("label",null,"Stock"),e.createElement("input",{type:"number",className:"ts-filter",value:s.quantity||"",onChange:i=>r({...s,quantity:i.target.value?parseInt(i.target.value):null}),min:"0",placeholder:"Set quantity"})),l&&e.createElement("div",{className:"ts-form-group vx-1-2"},e.createElement("label",null,"SKU"),e.createElement("input",{type:"text",className:"ts-filter",value:s.sku||"",onChange:i=>r({...s,sku:i.target.value}),placeholder:"Stock-keeping unit"})),e.createElement("div",{className:"ts-form-group switcher-label"},e.createElement("label",null,e.createElement("div",{className:"switch-slider"},e.createElement("div",{className:"onoffswitch"},e.createElement("input",{type:"checkbox",className:"onoffswitch-checkbox",checked:s.sold_individually||!1,onChange:a}),e.createElement("label",{className:"onoffswitch-label",onClick:i=>{i.preventDefault(),a()}}))),"Limit purchases to 1 item per order")))))},po=({field:t,value:n,onChange:r})=>{const s=n||{enabled:t.props?.required||!1,shipping_class:""},l=t.props?.shipping_classes||{},o=t.props?.default_shipping_class||"",a=t.props?.required||!1,i=()=>{r({...s,enabled:!s.enabled})},c=s.enabled||a;return e.createElement("div",{className:"ts-form-group switcher-label"},!a&&e.createElement("label",null,e.createElement("div",{className:"switch-slider"},e.createElement("div",{className:"onoffswitch"},e.createElement("input",{type:"checkbox",className:"onoffswitch-checkbox",checked:s.enabled||!1,onChange:i}),e.createElement("label",{className:"onoffswitch-label",onClick:u=>{u.preventDefault(),i()}}))),t.label||"Enable shipping",t.description&&e.createElement("div",{className:"vx-dialog"},e.createElement(we,null),e.createElement("div",{className:"vx-dialog-content min-scroll"},e.createElement("p",{dangerouslySetInnerHTML:{__html:t.description}})))),c&&e.createElement("div",{className:"ts-form-group"},e.createElement("label",null,"Shipping class"),e.createElement("div",{className:"ts-filter"},e.createElement("select",{value:s.shipping_class||"",onChange:u=>r({...s,shipping_class:u.target.value})},e.createElement("option",{value:""},o&&l[o]?"Default":"None"),Object.keys(l).map(u=>{const d=l[u];return e.createElement("option",{key:u,value:u},d.label||u)})),e.createElement("div",{className:"ts-down-icon"}))))},fo=({field:t,value:n,onChange:r})=>{const s=e.useMemo(()=>typeof n=="object"&&n!==null?{frequency:n.frequency||1,unit:n.unit||"month"}:{frequency:1,unit:"month"},[n]),l=t.props?.max_frequency??999,o=e.useCallback(i=>{const c=parseInt(i.target.value,10)||1;r({...s,frequency:Math.max(1,Math.min(c,l))})},[s,r,l]),a=e.useCallback(i=>{r({...s,unit:i.target.value})},[s,r]);return e.createElement("div",{className:"ts-form-group"},e.createElement("label",null,t.label||"Subscription interval",t.description&&e.createElement("div",{className:"vx-dialog"},e.createElement(we,null),e.createElement("div",{className:"vx-dialog-content min-scroll"},e.createElement("p",{dangerouslySetInnerHTML:{__html:t.description}})))),e.createElement("div",{className:"form-field-grid"},e.createElement("div",{className:"ts-form-group vx-1-2"},e.createElement("input",{type:"number",className:"ts-filter",value:s.frequency,onChange:o,min:1,max:l})),e.createElement("div",{className:"ts-form-group vx-1-2"},e.createElement("div",{className:"ts-filter"},e.createElement("select",{value:s.unit,onChange:a},e.createElement("option",{value:"day"},"Day(s)"),e.createElement("option",{value:"week"},"Week(s)"),e.createElement("option",{value:"month"},"Month(s)"),e.createElement("option",{value:"year"},"Year(s)")),e.createElement("div",{className:"ts-down-icon"})))))},ho=({field:t,value:n,onChange:r})=>{const s={...t,label:t.label||"Upload files"};return e.createElement(En,{field:s,value:n,onChange:r,onBlur:()=>{},icons:void 0})},go=({days:t,onChange:n,weekdays:r,popupKey:s})=>{const[l,o]=e.useState(!1),[a,i]=e.useState(t),c=e.useRef(null);e.useEffect(()=>{i(t)},[t]);const u=e.useCallback(x=>{i(_=>_.includes(x)?_.filter(C=>C!==x):[..._,x])},[]),d=e.useCallback(()=>{n(a)},[a,n]),m=e.useCallback(()=>{i([]),n([])},[n]),p=t.length===0?"":t.map(x=>r[x]).filter(Boolean).join(", "),h=t.length>0,v={1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday",0:"Sunday"},k=Object.keys(r).length>0?r:v;return e.createElement("div",{className:"ts-form-group vx-1-3"},e.createElement("div",{ref:c,className:`ts-filter ts-popup-target${h?" ts-filled":""}`,onClick:()=>o(!l)},e.createElement("div",{className:"ts-filter-text"},p||"Select day(s)"),e.createElement("div",{className:"ts-down-icon"})),e.createElement(Ne,{isOpen:l,target:c,onSave:d,onClear:m,onClose:()=>o(!1),showClear:!0},e.createElement("div",{className:"ts-term-dropdown ts-md-group ts-multilevel-dropdown"},e.createElement("ul",{className:"simplify-ul ts-term-dropdown-list min-scroll"},Object.entries(k).map(([x,_])=>e.createElement("li",{key:x},e.createElement("a",{href:"#",className:"flexify",onClick:C=>{C.preventDefault(),u(x)}},e.createElement("div",{className:"ts-checkbox-container"},e.createElement("label",{className:"container-checkbox"},e.createElement("input",{type:"checkbox",checked:a.includes(x),disabled:!0,hidden:!0,readOnly:!0}),e.createElement("span",{className:"checkmark"}))),e.createElement("span",null,_))))))))},vo=()=>e.createElement("svg",{fill:"#1C2033",width:"52",height:"52",version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{enableBackground:"new 0 0 64 64"}},e.createElement("path",{d:"M56,29.8H13.3l17-17.3c0.9-0.9,0.9-2.3,0-3.2c-0.9-0.9-2.3-0.9-3.2,0l-20.7,21c-0.9,0.9-0.9,2.3,0,3.2l20.7,21c0.4,0.4,1,0.7,1.6,0.7c0.6,0,1.1-0.2,1.6-0.6c0.9-0.9,0.9-2.3,0-3.2L13.4,34.3H56c1.2,0,2.2-1,2.2-2.2C58.2,30.8,57.2,29.8,56,29.8z"})),Co=()=>e.createElement("svg",{fill:"#1C2033",width:"52",height:"52",version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{enableBackground:"new 0 0 64 64"}},e.createElement("path",{d:"M57.6,30.4l-20.7-21c-0.9-0.9-2.3-0.9-3.2,0c-0.9,0.9-0.9,2.3,0,3.2l16.8,17.1H8c-1.2,0-2.2,1-2.2,2.2s1,2.3,2.2,2.3h42.7l-17,17.3c-0.9,0.9-0.9,2.3,0,3.2c0.4,0.4,1,0.6,1.6,0.6c0.6,0,1.2-0.2,1.6-0.7l20.7-21C58.5,32.7,58.5,31.3,57.6,30.4z"})),Eo={Mon:"Monday",Tue:"Tuesday",Wed:"Wednesday",Thu:"Thursday",Fri:"Friday",Sat:"Saturday",Sun:"Sunday"},wo=({selectedDate:t,onChange:n,minDate:r})=>{const s=new Date,[l,o]=e.useState(t?new Date(t+"T00:00:00").getMonth():s.getMonth()),[a,i]=e.useState(t?new Date(t+"T00:00:00").getFullYear():s.getFullYear()),c=["January","February","March","April","May","June","July","August","September","October","November","December"],u=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],d=e.useMemo(()=>{const g=[];for(let S=s.getFullYear()-50;S<=s.getFullYear()+10;S++)g.push(S);return g},[]),m=(g,S)=>new Date(S,g+1,0).getDate(),f=(g,S)=>{const A=new Date(S,g,1).getDay();return A===0?6:A-1},p=e.useMemo(()=>{const g=m(l,a),S=f(l,a),A=[];for(let w=0;w<S;w++)A.push(null);for(let w=1;w<=g;w++)A.push(w);return A},[l,a]),h=g=>r?new Date(a,l,g)<r:!1,v=g=>{if(!t)return!1;const S=new Date(t+"T00:00:00");return S.getDate()===g&&S.getMonth()===l&&S.getFullYear()===a},k=g=>s.getDate()===g&&s.getMonth()===l&&s.getFullYear()===a,x=g=>{if(h(g))return;const S=`${a}-${String(l+1).padStart(2,"0")}-${String(g).padStart(2,"0")}`;n(S)},_=()=>{l===0?(o(11),i(a-1)):o(l-1)},C=()=>{l===11?(o(0),i(a+1)):o(l+1)},D=g=>{if(g===null)return"is-empty";const S=[];return h(g)&&S.push("is-disabled"),k(g)&&S.push("is-today"),v(g)&&S.push("is-selected"),S.join(" ")};return e.createElement("div",null,e.createElement("input",{type:"hidden"}),e.createElement("div",{className:"pika-single"},e.createElement("div",{className:"pika-lendar"},e.createElement("div",{className:"pika-title",role:"heading","aria-live":"assertive"},e.createElement("div",{className:"pika-label"},c[l],e.createElement("select",{value:l,onChange:g=>o(parseInt(g.target.value)),className:"pika-select pika-select-month",tabIndex:-1},c.map((g,S)=>e.createElement("option",{key:S,value:S},g)))),e.createElement("div",{className:"pika-label"},a,e.createElement("select",{value:a,onChange:g=>i(parseInt(g.target.value)),className:"pika-select pika-select-year",tabIndex:-1},d.map(g=>e.createElement("option",{key:g,value:g},g)))),e.createElement("button",{type:"button",className:"pika-prev ts-icon-btn",onClick:_},e.createElement(vo,null)),e.createElement("button",{type:"button",className:"pika-next ts-icon-btn",onClick:C},e.createElement(Co,null))),e.createElement("table",{cellPadding:0,cellSpacing:0,className:"pika-table",role:"grid"},e.createElement("thead",null,e.createElement("tr",null,u.map(g=>e.createElement("th",{key:g,scope:"col"},e.createElement("abbr",{title:Eo[g]},g))))),e.createElement("tbody",null,Array.from({length:Math.ceil(p.length/7)}).map((g,S)=>e.createElement("tr",{key:S,className:"pika-row"},p.slice(S*7,S*7+7).map((A,w)=>e.createElement("td",{key:w,"data-day":A||void 0,className:D(A),"aria-selected":A!==null&&v(A)},A!==null&&e.createElement("button",{type:"button",className:"pika-button pika-day",onClick:()=>x(A),"data-pika-year":a,"data-pika-month":l,"data-pika-day":A},A))))))))))},yo=({date:t,onChange:n,popupKey:r})=>{const[s,l]=e.useState(!1),[o,a]=e.useState(t),i=e.useRef(null);e.useEffect(()=>{a(t)},[t]);const c=e.useCallback(()=>{n(o)},[o,n]),u=e.useCallback(()=>{a(null),n(null)},[n]),m=t||"",f=!!t,p=new Date;return p.setDate(p.getDate()-1),e.createElement("div",{className:"ts-form-group vx-1-3"},e.createElement("div",{ref:i,className:`ts-filter ts-popup-target${f?" ts-filled":""}`,onClick:()=>l(!s)},e.createElement("div",{className:"ts-filter-text"},m||"Select date"),e.createElement("div",{className:"ts-down-icon"})),e.createElement(Ne,{isOpen:s,target:i,onSave:c,onClear:u,onClose:()=>l(!1),showClear:!0,className:"lg-width md-height"},e.createElement("div",{className:"ts-form-group"},e.createElement(wo,{selectedDate:o,onChange:a,minDate:p}))))},bo=()=>e.createElement("svg",{fill:"#1C2033",width:"52",height:"52",version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{enableBackground:"new 0 0 64 64"}},e.createElement("path",{d:"M56,29.8H13.3l17-17.3c0.9-0.9,0.9-2.3,0-3.2c-0.9-0.9-2.3-0.9-3.2,0l-20.7,21c-0.9,0.9-0.9,2.3,0,3.2l20.7,21c0.4,0.4,1,0.7,1.6,0.7c0.6,0,1.1-0.2,1.6-0.6c0.9-0.9,0.9-2.3,0-3.2L13.4,34.3H56c1.2,0,2.2-1,2.2-2.2C58.2,30.8,57.2,29.8,56,29.8z"})),xo=()=>e.createElement("svg",{fill:"#1C2033",width:"52",height:"52",version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",style:{enableBackground:"new 0 0 64 64"}},e.createElement("path",{d:"M57.6,30.4l-20.7-21c-0.9-0.9-2.3-0.9-3.2,0c-0.9,0.9-0.9,2.3,0,3.2l16.8,17.1H8c-1.2,0-2.2,1-2.2,2.2s1,2.3,2.2,2.3h42.7l-17,17.3c-0.9,0.9-0.9,2.3,0,3.2c0.4,0.4,1,0.6,1.6,0.6c0.6,0,1.2-0.2,1.6-0.7l20.7-21C58.5,32.7,58.5,31.3,57.6,30.4z"})),No={Mon:"Monday",Tue:"Tuesday",Wed:"Wednesday",Thu:"Thursday",Fri:"Friday",Sat:"Saturday",Sun:"Sunday"},ko=({startDate:t,endDate:n,onStartChange:r,onEndChange:s,minDate:l})=>{const o=new Date,[a,i]=e.useState(t?new Date(t+"T00:00:00").getMonth():o.getMonth()),[c,u]=e.useState(t?new Date(t+"T00:00:00").getFullYear():o.getFullYear()),d=a===11?0:a+1,m=a===11?c+1:c,f=["January","February","March","April","May","June","July","August","September","October","November","December"],p=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],h=e.useMemo(()=>{const F=[];for(let q=o.getFullYear()-50;q<=o.getFullYear()+10;q++)F.push(q);return F},[]),v=(F,q)=>new Date(q,F+1,0).getDate(),k=(F,q)=>{const I=new Date(q,F,1).getDay();return I===0?6:I-1},x=(F,q)=>{const I=v(F,q),L=k(F,q),j=[];for(let Y=0;Y<L;Y++)j.push(null);for(let Y=1;Y<=I;Y++)j.push(Y);return j},_=e.useMemo(()=>x(a,c),[a,c]),C=e.useMemo(()=>x(d,m),[d,m]),D=(F,q,I)=>l?new Date(I,q,F)<l:!1,g=(F,q,I)=>{if(!t||!n)return!1;const L=new Date(I,q,F),j=new Date(t+"T00:00:00"),Y=new Date(n+"T00:00:00");return L>=j&&L<=Y},S=(F,q,I)=>{if(!t)return!1;const L=new Date(t+"T00:00:00");return L.getDate()===F&&L.getMonth()===q&&L.getFullYear()===I},A=(F,q,I)=>{if(!n)return!1;const L=new Date(n+"T00:00:00");return L.getDate()===F&&L.getMonth()===q&&L.getFullYear()===I},w=(F,q,I)=>o.getDate()===F&&o.getMonth()===q&&o.getFullYear()===I,E=(F,q,I)=>{if(D(F,q,I))return;const L=`${I}-${String(q+1).padStart(2,"0")}-${String(F).padStart(2,"0")}`;!t||t&&new Date(L+"T00:00:00")<new Date(t+"T00:00:00")?(r(L),n&&new Date(L+"T00:00:00")>new Date(n+"T00:00:00")&&s("")):s(L)},T=()=>{a===0?(i(11),u(c-1)):i(a-1)},b=()=>{a===11?(i(0),u(c+1)):i(a+1)},N=(F,q,I)=>{if(F===null)return"is-empty";const L=[];return D(F,q,I)&&L.push("is-disabled"),w(F,q,I)&&L.push("is-today"),(S(F,q,I)||A(F,q,I))&&L.push("is-selected"),g(F,q,I)&&!S(F,q,I)&&!A(F,q,I)&&L.push("is-inrange"),L.join(" ")},M=(F,q,I,L)=>e.createElement("div",{className:"pika-lendar"},e.createElement("div",{className:"pika-title",role:"heading","aria-live":"assertive"},e.createElement("div",{className:"pika-label"},f[F],e.createElement("select",{value:F,onChange:j=>{const Y=parseInt(j.target.value);(L==="left"||L==="none")&&i(Y)},className:"pika-select pika-select-month",tabIndex:-1,disabled:L==="right"},f.map((j,Y)=>e.createElement("option",{key:Y,value:Y},j)))),e.createElement("div",{className:"pika-label"},q,e.createElement("select",{value:q,onChange:j=>{const Y=parseInt(j.target.value);(L==="left"||L==="none")&&u(Y)},className:"pika-select pika-select-year",tabIndex:-1,disabled:L==="right"},h.map(j=>e.createElement("option",{key:j,value:j},j)))),L==="left"&&e.createElement("button",{type:"button",className:"pika-prev ts-icon-btn",onClick:T},e.createElement(bo,null)),L==="right"&&e.createElement("button",{type:"button",className:"pika-next ts-icon-btn",onClick:b},e.createElement(xo,null))),e.createElement("table",{cellPadding:0,cellSpacing:0,className:"pika-table",role:"grid"},e.createElement("thead",null,e.createElement("tr",null,p.map(j=>e.createElement("th",{key:j,scope:"col"},e.createElement("abbr",{title:No[j]},j))))),e.createElement("tbody",null,Array.from({length:Math.ceil(I.length/7)}).map((j,Y)=>e.createElement("tr",{key:Y,className:"pika-row"},I.slice(Y*7,Y*7+7).map((J,se)=>e.createElement("td",{key:se,"data-day":J||void 0,className:N(J,F,q),"aria-selected":J!==null&&(S(J,F,q)||A(J,F,q))},J!==null&&e.createElement("button",{type:"button",className:"pika-button pika-day",onClick:()=>E(J,F,q),"data-pika-year":q,"data-pika-month":F,"data-pika-day":J},J))))))));return e.createElement("div",{className:"ts-booking-date ts-booking-date-range"},e.createElement("input",{type:"hidden"}),e.createElement("div",{className:"pika-single pika-range"},M(a,c,_,"left"),M(d,m,C,"right")))},_o=({from:t,to:n,onChange:r,popupKey:s})=>{const[l,o]=e.useState(!1),[a,i]=e.useState(t),[c,u]=e.useState(n),d=e.useRef(null);e.useEffect(()=>{i(t),u(n)},[t,n]);const m=e.useCallback(()=>{r(a,c)},[a,c,r]),f=e.useCallback(()=>{i(null),u(null),r(null,null)},[r]),h=!t||!n?"":`${t} to ${n}`,v=!!t&&!!n,k=new Date;return k.setDate(k.getDate()-1),e.createElement("div",{className:"ts-form-group vx-1-3"},e.createElement("div",{ref:d,className:`ts-filter ts-popup-target${v?" ts-filled":""}`,onClick:()=>o(!l)},e.createElement("div",{className:"ts-filter-text"},h||"Select dates"),e.createElement("div",{className:"ts-down-icon"})),e.createElement(Ne,{isOpen:l,target:d,onSave:m,onClear:f,onClose:()=>o(!1),showClear:!0,className:"xl-width xl-height"},e.createElement("div",{className:"ts-form-group"},e.createElement(ko,{startDate:a,endDate:c,onStartChange:i,onEndChange:u,minDate:k}))))},So=()=>e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M9.5 2C9.08579 2 8.75 2.33579 8.75 2.75C8.75 3.16421 9.08579 3.5 9.5 3.5H14.5C14.9142 3.5 15.25 3.16421 15.25 2.75C15.25 2.33579 14.9142 2 14.5 2H9.5Z",fill:"#343C54"}),e.createElement("path",{d:"M4 5C3.74924 5 3.51506 5.12533 3.37597 5.33397C3.23687 5.54262 3.21125 5.80699 3.3077 6.03846L4.44231 8.76154C4.4804 8.85294 4.5 8.95098 4.5 9.05V19.75C4.5 20.9926 5.50736 22 6.75 22H17.25C18.4926 22 19.5 20.9926 19.5 19.75V9.04978C19.5 8.95083 19.5196 8.85286 19.5576 8.76151L20.6914 6.03827C20.7878 5.8068 20.7621 5.54249 20.623 5.33389C20.4839 5.12529 20.2498 5 19.999 5H4ZM10.75 10.5V16.5C10.75 16.9142 10.4142 17.25 10 17.25C9.58579 17.25 9.25 16.9142 9.25 16.5V10.5C9.25 10.0858 9.58579 9.75 10 9.75C10.4142 9.75 10.75 10.0858 10.75 10.5ZM14.75 10.5V16.5C14.75 16.9142 14.4142 17.25 14 17.25C13.5858 17.25 13.25 16.9142 13.25 16.5V10.5C13.25 10.0858 13.5858 9.75 14 9.75C14.4142 9.75 14.75 10.0858 14.75 10.5Z",fill:"#343C54"})),Mo=({condition:t,onChange:n,onDelete:r,weekdays:s,popupKeyPrefix:l})=>{const o=u=>{n({...t,type:u,days:u==="day_of_week"?t.days:[],date:u==="date"?t.date:null,range:u==="date_range"?t.range:{from:null,to:null}})},a=u=>{n({...t,days:u})},i=u=>{n({...t,date:u})},c=(u,d)=>{n({...t,range:{from:u,to:d}})};return e.createElement(e.Fragment,null,e.createElement("div",{className:"ts-form-group vx-1-3"},e.createElement("div",{className:"ts-filter"},e.createElement("select",{value:t.type,onChange:u=>o(u.target.value)},e.createElement("option",{value:"day_of_week"},"Week day is"),e.createElement("option",{value:"date"},"Date is"),e.createElement("option",{value:"date_range"},"Date range is")),e.createElement("div",{className:"ts-down-icon"}))),t.type==="day_of_week"&&e.createElement(go,{days:t.days||[],onChange:a,weekdays:s,popupKey:`${l}-dow`}),t.type==="date"&&e.createElement(yo,{date:t.date,onChange:i,popupKey:`${l}-date`}),t.type==="date_range"&&e.createElement(_o,{from:t.range?.from||null,to:t.range?.to||null,onChange:c,popupKey:`${l}-range`}),e.createElement("div",{className:"ts-form-group vx-1-3 vx-center-right"},e.createElement("a",{href:"#",className:"ts-btn ts-btn-1 form-btn",onClick:u=>{u.preventDefault(),r()}},e.createElement(So,null),"Remove")))},Io=()=>e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M12.0002 4.875C12.6216 4.875 13.1252 5.37868 13.1252 6V10.8752H18.0007C18.622 10.8752 19.1257 11.3789 19.1257 12.0002C19.1257 12.6216 18.622 13.1252 18.0007 13.1252H13.1252V18.0007C13.1252 18.622 12.6216 19.1257 12.0002 19.1257C11.3789 19.1257 10.8752 18.622 10.8752 18.0007V13.1252H6C5.37868 13.1252 4.875 12.6216 4.875 12.0002C4.875 11.3789 5.37868 10.8752 6 10.8752H10.8752V6C10.8752 5.37868 11.3789 4.875 12.0002 4.875Z",fill:"#343C54"})),Lo=()=>`${Date.now()}-${Math.random().toString(36).substr(2,9)}`;function Do(t){return t?Array.isArray(t)?t:typeof t=="object"?Object.entries(t).map(([n,r])=>({...r,key:r.key||n})):[]:[]}const Ao=()=>({_uid:Lo(),type:"day_of_week",days:[],date:null,range:{from:null,to:null}}),To=({pricing:t,onChange:n,field:r,productType:s,productFieldValue:l})=>{const o=r.props?.base_price?.enabled??!1,a=r.props?.base_price?.discount_price?.enabled??!1,i=r.props?.addons?.enabled??!1,c=r.props?.weekdays??{},u=r.props?.limits?.custom_price_conditions??10,d=Do(s?.fields?.addons?.props?.addons),m=e.useCallback(()=>{if(!l||typeof l!="object")return null;const E=l.addons;return!E||typeof E!="object"?null:E},[l]),f=e.useCallback(E=>{if(d.find(M=>M.key===E)?.required)return!0;const b=m();if(!b)return!1;const N=b[E];return N?N.enabled!==!1:!1},[m,d]),p=e.useCallback((E,T)=>{const b=m();if(!b)return!1;const N=b[T];return N?N.choices?N.choices[E]!==void 0:N.list?N.list.some(M=>M.value===E&&M.enabled!==!1):!1:!1},[m]),h=e.useCallback(E=>{const T=m();if(!T)return null;const b=T[E];return b&&b.choices&&typeof b.choices=="object"?{list:Object.entries(b.choices).map(([M,F])=>({value:M,label:M,enabled:!0}))}:null},[m]),v=e.useCallback(E=>{n({...t,label:E})},[t,n]),k=e.useCallback(E=>{n({...t,prices:{...t.prices,base_price:{...t.prices.base_price,amount:E}}})},[t,n]),x=e.useCallback(E=>{n({...t,prices:{...t.prices,base_price:{amount:t.prices.base_price?.amount??null,...t.prices.base_price,discount_amount:E}}})},[t,n]),_=e.useCallback((E,T)=>{const b=t.prices.addons||{};n({...t,prices:{...t.prices,addons:{...b,[E]:{...b[E],price:T}}}})},[t,n]),C=e.useCallback((E,T,b)=>{const N=t.prices.addons||{},M=N[E]||{};n({...t,prices:{...t.prices,addons:{...N,[E]:{...M,[T]:{...M[T]||{},price:b}}}}})},[t,n]),D=e.useCallback(()=>{if((t.conditions?.length||0)>=u)return;const E=Ao();n({...t,conditions:[...t.conditions||[],E]})},[t,u,n]),g=e.useCallback(E=>{n({...t,conditions:(t.conditions||[]).filter(T=>T._uid!==E)})},[t,n]),S=e.useCallback((E,T)=>{n({...t,conditions:(t.conditions||[]).map(b=>b._uid===E?{...T,_uid:E}:b)})},[t,n]),A=(t.conditions?.length||0)<u,w=window.Voxel_Config?.stripe?.currency?.toUpperCase()||"USD";return e.createElement(e.Fragment,null,e.createElement("div",{className:"ts-form-group ts-pricing-label vx-1-1"},e.createElement("label",null,"Set name"),e.createElement("div",{className:"input-container"},e.createElement("input",{type:"text",className:"ts-filter",placeholder:"Name your custom price",value:t.label||"",onChange:E=>v(E.target.value)}))),e.createElement("div",{className:"ts-form-group"},e.createElement("div",{className:"form-field-grid medium"},e.createElement("div",{className:"ts-form-group vx-1-1 ui-heading-field"},e.createElement("label",null,"Conditions")),(t.conditions||[]).map((E,T)=>e.createElement(Mo,{key:E._uid||T,condition:E,onChange:b=>S(E._uid,b),onDelete:()=>g(E._uid),weekdays:c,popupKeyPrefix:`${t._uid}-cond-${T}`})),e.createElement("div",{className:"ts-form-group"},A?e.createElement("a",{href:"#",className:"ts-btn ts-btn-4 form-btn",onClick:E=>{E.preventDefault(),D()}},e.createElement(Io,null),"Add condition"):e.createElement("p",{className:"ts-form-note"},"Maximum of ",u," conditions reached.")),e.createElement("div",{className:"ts-form-group vx-1-1"},e.createElement("div",{className:"form-field-grid medium custom-price-table"},e.createElement("div",{className:"ts-form-group vx-1-1 ui-heading-field"},e.createElement("label",null,"Set prices")),o&&e.createElement(e.Fragment,null,e.createElement("div",{className:"ts-form-group vx-1-2"},e.createElement("label",null,"Price"),e.createElement("div",{className:"input-container"},e.createElement("input",{type:"number",className:"ts-filter",min:"0",step:"0.01",placeholder:"Add price",value:t.prices?.base_price?.amount??"",onChange:E=>k(E.target.value?parseFloat(E.target.value):null)}),e.createElement("span",{className:"input-suffix"},w))),a&&e.createElement("div",{className:"ts-form-group vx-1-2"},e.createElement("label",null,"Discount price"),e.createElement("div",{className:"input-container"},e.createElement("input",{type:"number",className:"ts-filter",min:"0",step:"0.01",placeholder:"Add price",value:t.prices?.base_price?.discount_amount??"",onChange:E=>x(E.target.value?parseFloat(E.target.value):null)}),e.createElement("span",{className:"input-suffix"},w)))),i&&e.createElement(e.Fragment,null,d.map(E=>{if(!f(E.key)||E.type!=="numeric"&&E.type!=="switcher")return null;const T=t.prices?.addons?.[E.key]?.price??null;return e.createElement("div",{key:E.key,className:"ts-form-group vx-1-2"},e.createElement("label",null,E.label),e.createElement("div",{className:"input-container"},e.createElement("input",{type:"number",className:"ts-filter",min:"0",step:"0.01",placeholder:"Add price",value:T??"",onChange:b=>_(E.key,b.target.value?parseFloat(b.target.value):null)}),e.createElement("span",{className:"input-suffix"},w)))}),d.map(E=>{if(!f(E.key)||E.type!=="custom-select"&&E.type!=="custom-multiselect")return null;const b=h(E.key)?.list||[];return e.createElement("div",{key:E.key,className:"ts-form-group vx-1-1"},e.createElement("div",{className:"form-field-grid medium"},e.createElement("div",{className:"ts-form-group ui-heading-field"},e.createElement("label",null,E.label)),b.map(N=>{if(!p(N.value,E.key))return null;const M=t.prices?.addons?.[E.key]?.[N.value]?.price??null;return e.createElement("div",{key:N.value,className:"ts-form-group vx-1-2"},e.createElement("label",null,N.value),e.createElement("div",{className:"input-container"},e.createElement("input",{type:"number",className:"ts-filter",min:"0",step:"0.01",placeholder:"Add price",value:M??"",onChange:F=>C(E.key,N.value,F.target.value?parseFloat(F.target.value):null)}),e.createElement("span",{className:"input-suffix"},w)))})))}),d.map(E=>{if(!f(E.key)||E.type!=="select"&&E.type!=="multiselect")return null;const T=E.props?.choices||[];return e.createElement("div",{key:E.key,className:"ts-form-group vx-1-1"},e.createElement("div",{className:"form-field-grid medium custom-price-table"},e.createElement("div",{className:"ts-form-group ui-heading-field"},e.createElement("label",null,E.label)),T.map(b=>{if(!p(b.value,E.key))return null;const N=t.prices?.addons?.[E.key]?.[b.value]?.price??null;return e.createElement("div",{key:b.value,className:"ts-form-group vx-1-2"},e.createElement("label",null,b.label),e.createElement("div",{className:"input-container"},e.createElement("input",{type:"number",className:"ts-filter",min:"0",step:"0.01",placeholder:"Add price",value:N??"",onChange:M=>C(E.key,b.value,M.target.value?parseFloat(M.target.value):null)}),e.createElement("span",{className:"input-suffix"},w)))})))})))))))},rr=()=>e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M12.0002 4.875C12.6216 4.875 13.1252 5.37868 13.1252 6V10.8752H18.0007C18.622 10.8752 19.1257 11.3789 19.1257 12.0002C19.1257 12.6216 18.622 13.1252 18.0007 13.1252H13.1252V18.0007C13.1252 18.622 12.6216 19.1257 12.0002 19.1257C11.3789 19.1257 10.8752 18.622 10.8752 18.0007V13.1252H6C5.37868 13.1252 4.875 12.6216 4.875 12.0002C4.875 11.3789 5.37868 10.8752 6 10.8752H10.8752V6C10.8752 5.37868 11.3789 4.875 12.0002 4.875Z",fill:"currentColor"})),Ho=()=>e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M4.875 12C4.875 11.3787 5.37868 10.875 6 10.875H18.0007C18.622 10.875 19.1257 11.3787 19.1257 12C19.1257 12.6213 18.622 13.125 18.0007 13.125H6C5.37868 13.125 4.875 12.6213 4.875 12Z",fill:"currentColor"})),Vo=()=>e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M9.5 2C9.08579 2 8.75 2.33579 8.75 2.75C8.75 3.16421 9.08579 3.5 9.5 3.5H14.5C14.9142 3.5 15.25 3.16421 15.25 2.75C15.25 2.33579 14.9142 2 14.5 2H9.5Z",fill:"currentColor"}),e.createElement("path",{d:"M4 5C3.74924 5 3.51506 5.12533 3.37597 5.33397C3.23687 5.54262 3.21125 5.80699 3.3077 6.03846L4.44231 8.76154C4.4804 8.85294 4.5 8.95098 4.5 9.05V19.75C4.5 20.9926 5.50736 22 6.75 22H17.25C18.4926 22 19.5 20.9926 19.5 19.75V9.04978C19.5 8.95083 19.5196 8.85286 19.5576 8.76151L20.6914 6.03827C20.7878 5.8068 20.7621 5.54249 20.623 5.33389C20.4839 5.12529 20.2498 5 19.999 5H4ZM10.75 10.5V16.5C10.75 16.9142 10.4142 17.25 10 17.25C9.58579 17.25 9.25 16.9142 9.25 16.5V10.5C9.25 10.0858 9.58579 9.75 10 9.75C10.4142 9.75 10.75 10.0858 10.75 10.5ZM14.75 10.5V16.5C14.75 16.9142 14.4142 17.25 14 17.25C13.5858 17.25 13.25 16.9142 13.25 16.5V10.5C13.25 10.0858 13.5858 9.75 14 9.75C14.4142 9.75 14.75 10.0858 14.75 10.5Z",fill:"currentColor"})),Fo=()=>e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},e.createElement("path",{d:"M12.7461 3.99951C12.7461 3.5853 12.4103 3.24951 11.9961 3.24951C11.5819 3.24951 11.2461 3.5853 11.2461 3.99951L11.2461 13.2548H6.00002C5.69663 13.2548 5.42312 13.4376 5.30707 13.7179C5.19101 13.9982 5.25526 14.3208 5.46986 14.5353L11.4228 20.4844C11.5604 20.6474 11.7662 20.7509 11.9961 20.7509C12.0038 20.7509 12.0114 20.7508 12.019 20.7505C12.2045 20.7458 12.3884 20.6727 12.53 20.5313L18.5302 14.5353C18.7448 14.3208 18.809 13.9982 18.693 13.7179C18.5769 13.4376 18.3034 13.2548 18 13.2548H12.7461L12.7461 3.99951Z",fill:"currentColor"})),Po=()=>e.createElement("svg",{fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm-.5 5a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm1.5 10.5a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-6a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v6z",fill:"currentColor"})),sr=()=>`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,Oo=()=>({_uid:sr(),enabled:!0,label:"",conditions:[],prices:{base_price:{amount:null,discount_amount:null},addons:{}}}),Zo=({pricing:t,index:n,isActive:r,onToggleActive:s,onToggleEnabled:l,onDelete:o,onUpdate:a,field:i,productType:c,productFieldValue:u})=>{const{attributes:d,listeners:m,setNodeRef:f,transform:p,transition:h,isDragging:v}=ct({id:t._uid||`pricing-${n}`}),k={transform:Le.Transform.toString(p),transition:h,...v&&{opacity:.5},pointerEvents:"all"},x=["ts-field-repeater"];return r||x.push("collapsed"),t.enabled||x.push("disabled"),e.createElement("div",{ref:f,style:k,className:x.join(" ")},e.createElement("div",{className:"ts-repeater-head",onClick:s},e.createElement("svg",{...d,...m,id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 288 480",fill:"currentColor",style:{cursor:"grab"},onClick:_=>_.stopPropagation()},e.createElement("path",{d:"M48,96A48,48,0,1,0,0,48,48,48,0,0,0,48,96Zm0,192A48,48,0,1,0,0,240,48,48,0,0,0,48,288ZM96,432a48,48,0,1,1-48-48A48,48,0,0,1,96,432ZM240,96a48,48,0,1,0-48-48A48,48,0,0,0,240,96Zm48,144a48,48,0,1,1-48-48A48,48,0,0,1,288,240ZM240,480a48,48,0,1,0-48-48A48,48,0,0,0,240,480Z",style:{fillRule:"evenodd"}})),e.createElement("label",null,t.label||"(untitled)"),e.createElement("div",{className:"ts-repeater-controller"},t.enabled?e.createElement("a",{href:"#",onClick:_=>{_.stopPropagation(),_.preventDefault(),l()},className:"ts-icon-btn ts-smaller no-drag",title:"Disable pricing rule"},e.createElement(Ho,null)):e.createElement("a",{href:"#",onClick:_=>{_.stopPropagation(),_.preventDefault(),l()},className:"ts-icon-btn ts-smaller no-drag",title:"Enable pricing rule"},e.createElement(rr,null)),e.createElement("a",{href:"#",onClick:_=>{_.stopPropagation(),_.preventDefault(),o()},className:"ts-icon-btn ts-smaller no-drag",title:"Delete pricing rule"},e.createElement(Vo,null)),e.createElement("a",{href:"#",className:"ts-icon-btn ts-smaller no-drag",onClick:_=>{_.stopPropagation(),_.preventDefault(),s()}},e.createElement(Fo,null)))),r&&e.createElement("div",{className:"form-field-grid medium"},e.createElement(To,{pricing:t,onChange:a,field:i,productType:c,productFieldValue:u})))},qo=({field:t,value:n,onChange:r,productType:s,productFieldValue:l,productFieldKey:o})=>{const[a,i]=e.useState(null),c=e.useMemo(()=>!n||typeof n!="object"?{enabled:!1,list:[]}:{enabled:n.enabled??!1,list:Array.isArray(n.list)?n.list.map(C=>({...C,_uid:C._uid||sr()})):[]},[n]),u=Bs(Nn(Kt,{activationConstraint:{distance:8}}),Nn(Xt,{coordinateGetter:ao})),d=e.useCallback(C=>{const{active:D,over:g}=C;if(g&&D.id!==g.id){const S=c.list.findIndex(w=>w._uid===D.id),A=c.list.findIndex(w=>w._uid===g.id);if(S!==-1&&A!==-1){const w=Ze(c.list,S,A);r({...c,list:w})}}},[c,r]),m=e.useCallback(()=>{r({...c,enabled:!c.enabled})},[c,r]),f=e.useCallback(()=>{const C=t.props?.limits?.custom_prices??5;if(c.list.length>=C)return;const D=Oo(),g=[...c.list,D];r({...c,list:g}),i(D._uid)},[c,t.props?.limits?.custom_prices,r]),p=e.useCallback(C=>{const D=c.list.filter(g=>g._uid!==C);r({...c,list:D}),a===C&&i(null)},[c,a,r]),h=e.useCallback(C=>{const D=c.list.map(g=>g._uid===C?{...g,enabled:!g.enabled}:g);r({...c,list:D})},[c,r]),v=e.useCallback(C=>{i(D=>D===C?null:C)},[]),k=e.useCallback((C,D)=>{const g=c.list.map(S=>S._uid===C?{...D,_uid:C}:S);r({...c,list:g})},[c,r]),x=t.props?.limits?.custom_prices??5,_=c.list.length<x;return e.createElement("div",{className:"ts-form-group"},e.createElement("div",{className:"ts-form-group switcher-label"},e.createElement("label",null,e.createElement("div",{className:"switch-slider"},e.createElement("div",{className:"onoffswitch"},e.createElement("input",{type:"checkbox",className:"onoffswitch-checkbox",checked:c.enabled,onChange:m}),e.createElement("label",{className:"onoffswitch-label",onClick:C=>{C.preventDefault(),m()}}))),t.label||"Custom prices",!!t.description&&e.createElement("div",{className:"vx-dialog"},e.createElement(Po,null),e.createElement("div",{className:"vx-dialog-content min-scroll"},e.createElement("p",{dangerouslySetInnerHTML:{__html:t.description}})))),c.enabled&&e.createElement(e.Fragment,null,e.createElement(ot,{sensors:u,collisionDetection:tt,onDragEnd:d},e.createElement(it,{items:c.list.map(C=>C._uid||""),strategy:at},e.createElement("div",{className:"ts-repeater-container",style:{marginTop:"15px"}},c.list.map((C,D)=>e.createElement(Zo,{key:C._uid,pricing:C,index:D,isActive:a===C._uid,onToggleActive:()=>v(C._uid),onToggleEnabled:()=>h(C._uid),onDelete:()=>p(C._uid),onUpdate:g=>k(C._uid,g),field:t,productType:s,productFieldValue:l}))))),_&&e.createElement("a",{href:"#",className:"ts-repeater-add ts-btn ts-btn-4 form-btn",onClick:C=>{C.preventDefault(),f()}},e.createElement(rr,null),"Create custom pricing"),!_&&e.createElement("p",{className:"ts-form-note"},"Maximum of ",x," custom pricing rules reached."))))},Mt=({addon:t,enabled:n,onToggleEnabled:r,children:s,descriptionStyle:l="tooltip"})=>{const o=t.required||n,a=()=>t.description?l==="inline"?e.createElement("small",null,t.description):e.createElement("div",{className:"vx-dialog"},e.createElement(we,null),e.createElement("div",{className:"vx-dialog-content min-scroll"},e.createElement("p",null,t.description))):null;return e.createElement("div",{className:"ts-form-group switcher-label"},t.required?e.createElement("label",null,t.label,a()):e.createElement("label",null,e.createElement("div",{className:"switch-slider"},e.createElement("div",{className:"onoffswitch"},e.createElement("input",{type:"checkbox",className:"onoffswitch-checkbox",checked:n,onChange:i=>r(i.target.checked)}),e.createElement("label",{className:"onoffswitch-label",onClick:i=>{i.preventDefault(),r(!n)}}))),t.label,a()),o&&s)};function Bo(){return{enabled:!1,price:null,min:null,max:null}}const jo=({addon:t,value:n,onChange:r})=>{const s=window.Voxel_Config?.currency||"USD",l=n||Bo(),o=d=>{r({...l,enabled:d})},a=d=>{const m=d===""?null:parseFloat(d);r({...l,price:isNaN(m)?null:m})},i=d=>{const m=d===""?null:parseInt(d);r({...l,min:isNaN(m)?null:m})},c=d=>{const m=d===""?null:parseInt(d);r({...l,max:isNaN(m)?null:m})},u=t.required||l.enabled===!0;return e.createElement(Mt,{addon:t,enabled:u,onToggleEnabled:o},e.createElement("div",{className:"ts-field-repeater"},e.createElement("div",{className:"medium form-field-grid"},e.createElement("div",{className:"ts-form-group"},e.createElement("label",null,"Price",e.createElement("div",{className:"vx-dialog"},e.createElement(we,null))),e.createElement("div",{className:"input-container"},e.createElement("input",{type:"number",className:"ts-filter",value:l.price??"",onChange:d=>a(d.target.value),placeholder:"Add price",min:"0"}),e.createElement("span",{className:"input-suffix"},s))),e.createElement("div",{className:"ts-form-group vx-1-2"},e.createElement("label",null,"Min number"),e.createElement("div",{className:"input-container"},e.createElement("input",{type:"number",className:"ts-filter",value:l.min??"",onChange:d=>i(d.target.value),placeholder:"Min",min:"0"}))),e.createElement("div",{className:"ts-form-group vx-1-2"},e.createElement("label",null,"Max number"),e.createElement("div",{className:"input-container"},e.createElement("input",{type:"number",className:"ts-filter",value:l.max??"",onChange:d=>c(d.target.value),placeholder:"Max",min:"0"}))))))};function zo(){return{enabled:!1,price:null}}const Uo=({addon:t,value:n,onChange:r})=>{const s=window.Voxel_Config?.currency||"USD",l=n||zo(),o=c=>{r({...l,enabled:c})},a=c=>{const u=c===""?null:parseFloat(c);r({...l,price:isNaN(u)?null:u})},i=t.required||l.enabled===!0;return e.createElement(Mt,{addon:t,enabled:i,onToggleEnabled:o,descriptionStyle:"inline"},e.createElement("div",{className:"ts-field-repeater"},e.createElement("div",{className:"medium form-field-grid"},e.createElement("div",{className:"ts-form-group"},e.createElement("label",null,"Enter price for this add-on"),e.createElement("div",{className:"input-container"},e.createElement("input",{type:"number",className:"ts-filter",value:l.price??"",onChange:c=>a(c.target.value),placeholder:"Add price",min:"0"}),e.createElement("span",{className:"input-suffix"},s))))))};function Wo(t,n="USD"){return`${n}${t.toFixed(2)}`}function Yo(t){const n={};return Array.isArray(t)?(t.forEach(r=>{n[r.value]={enabled:!1,price:null}}),{enabled:!1,choices:n}):{enabled:!1,choices:{}}}const Go=({addon:t,value:n,onChange:r})=>{const s=window.Voxel_Config?.currency||"USD",l=t.props?.choices,o=Array.isArray(l)?l:[],a=n||Yo(o),[i,c]=e.useState(null),u=h=>{r({...a,enabled:h})},d=(h,v)=>{const k=v===""?null:parseFloat(v);r({...a,choices:{...a.choices,[h]:{...a.choices[h],price:isNaN(k)?null:k}}})},m=h=>{c(i===h?null:h)},f=h=>a.choices[h]?.price??null,p=t.required||a.enabled===!0;return e.createElement(Mt,{addon:t,enabled:p,onToggleEnabled:u},e.createElement("div",{className:"ts-repeater-container"},o.map(h=>{const v=i===h.value,k=f(h.value),x=typeof k=="number";return e.createElement("div",{key:h.value,className:`ts-field-repeater ${v?"":"collapsed"}`},e.createElement("div",{className:"ts-repeater-head",onClick:()=>m(h.value)},e.createElement("svg",{id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 288 480"},e.createElement("path",{d:"M48,96A48,48,0,1,0,0,48,48,48,0,0,0,48,96Zm0,192A48,48,0,1,0,0,240,48,48,0,0,0,48,288ZM96,432a48,48,0,1,1-48-48A48,48,0,0,1,96,432ZM240,96a48,48,0,1,0-48-48A48,48,0,0,0,240,96Zm48,144a48,48,0,1,1-48-48A48,48,0,0,1,288,240ZM240,480a48,48,0,1,0-48-48A48,48,0,0,0,240,480Z",style:{fillRule:"evenodd"}})),e.createElement("label",null,h.label),x?e.createElement("em",null,Wo(k,s)):e.createElement("em",null,"No price added"),e.createElement("div",{className:"ts-repeater-controller"},e.createElement("a",{href:"#",className:"ts-icon-btn ts-smaller",onClick:_=>_.preventDefault()},e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M12.7461 3.99951C12.7461 3.5853 12.4103 3.24951 11.9961 3.24951C11.5819 3.24951 11.2461 3.5853 11.2461 3.99951L11.2461 13.2548H6.00002C5.69663 13.2548 5.42312 13.4376 5.30707 13.7179C5.19101 13.9982 5.25526 14.3208 5.46986 14.5353L11.4228 20.4844C11.5604 20.6474 11.7662 20.7509 11.9961 20.7509C12.0038 20.7509 12.0114 20.7508 12.019 20.7505C12.2045 20.7458 12.3884 20.6727 12.53 20.5313L18.5302 14.5353C18.7448 14.3208 18.809 13.9982 18.693 13.7179C18.5769 13.4376 18.3034 13.2548 18 13.2548H12.7461L12.7461 3.99951Z",fill:"#343C54"}))))),v&&e.createElement("div",{className:"medium form-field-grid"},e.createElement("div",{className:"ts-form-group"},e.createElement("label",null,"Price"),e.createElement("div",{className:"input-container"},e.createElement("input",{type:"number",className:"ts-filter",value:k??"",onChange:_=>d(h.value,_.target.value),min:"0",placeholder:"Add price"}),e.createElement("span",{className:"input-suffix"},s)))))})))};function en(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function Xo(t,n="USD"){return`${n}${t.toFixed(2)}`}function Jo(){return{enabled:!1,choices:{}}}function lr(t){return!t||typeof t!="object"?[]:Object.entries(t).map(([n,r])=>({_uid:en(),value:n,...r}))}function It(t){const n={};return t.forEach(r=>{n[r.value]={price:r.price,quantity:r.quantity,image:r.image,subheading:r.subheading}}),n}const Ko=({choice:t,isActive:n,displayMode:r,currency:s,onToggle:l,onUpdate:o,onDelete:a})=>{const{attributes:i,listeners:c,setNodeRef:u,transform:d,transition:m}=ct({id:t._uid}),f={transform:Le.Transform.toString(d),transition:m},p=typeof t.price=="number",h=r==="cards",v=r==="cards"||r==="images",k=["cards","radio","checkboxes"].includes(r);return e.createElement("div",{ref:u,style:f,className:`ts-field-repeater ${n?"":"collapsed"}`},e.createElement("div",{className:"ts-repeater-head",onClick:l},e.createElement("svg",{...i,...c,id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 288 480",style:{cursor:"grab"}},e.createElement("path",{d:"M48,96A48,48,0,1,0,0,48,48,48,0,0,0,48,96Zm0,192A48,48,0,1,0,0,240,48,48,0,0,0,48,288ZM96,432a48,48,0,1,1-48-48A48,48,0,0,1,96,432ZM240,96a48,48,0,1,0-48-48A48,48,0,0,0,240,96Zm48,144a48,48,0,1,1-48-48A48,48,0,0,1,288,240ZM240,480a48,48,0,1,0-48-48A48,48,0,0,0,240,480Z",style:{fillRule:"evenodd"}})),e.createElement("label",null,t.value||"Untitled"),p?e.createElement("em",null,Xo(t.price,s)):e.createElement("em",null,"No price added"),e.createElement("div",{className:"ts-repeater-controller"},e.createElement("a",{href:"#",onClick:x=>{x.preventDefault(),x.stopPropagation(),a()},className:"ts-icon-btn ts-smaller no-drag"},e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M9.5 2C9.08579 2 8.75 2.33579 8.75 2.75C8.75 3.16421 9.08579 3.5 9.5 3.5H14.5C14.9142 3.5 15.25 3.16421 15.25 2.75C15.25 2.33579 14.9142 2 14.5 2H9.5Z",fill:"#343C54"}),e.createElement("path",{d:"M4 5C3.74924 5 3.51506 5.12533 3.37597 5.33397C3.23687 5.54262 3.21125 5.80699 3.3077 6.03846L4.44231 8.76154C4.4804 8.85294 4.5 8.95098 4.5 9.05V19.75C4.5 20.9926 5.50736 22 6.75 22H17.25C18.4926 22 19.5 20.9926 19.5 19.75V9.04978C19.5 8.95083 19.5196 8.85286 19.5576 8.76151L20.6914 6.03827C20.7878 5.8068 20.7621 5.54249 20.623 5.33389C20.4839 5.12529 20.2498 5 19.999 5H4ZM10.75 10.5V16.5C10.75 16.9142 10.4142 17.25 10 17.25C9.58579 17.25 9.25 16.9142 9.25 16.5V10.5C9.25 10.0858 9.58579 9.75 10 9.75C10.4142 9.75 10.75 10.0858 10.75 10.5ZM14.75 10.5V16.5C14.75 16.9142 14.4142 17.25 14 17.25C13.5858 17.25 13.25 16.9142 13.25 16.5V10.5C13.25 10.0858 13.5858 9.75 14 9.75C14.4142 9.75 14.75 10.0858 14.75 10.5Z",fill:"#343C54"}))),e.createElement("a",{href:"#",className:"ts-icon-btn ts-smaller no-drag",onClick:x=>x.preventDefault()},e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M12.7461 3.99951C12.7461 3.5853 12.4103 3.24951 11.9961 3.24951C11.5819 3.24951 11.2461 3.5853 11.2461 3.99951L11.2461 13.2548H6.00002C5.69663 13.2548 5.42312 13.4376 5.30707 13.7179C5.19101 13.9982 5.25526 14.3208 5.46986 14.5353L11.4228 20.4844C11.5604 20.6474 11.7662 20.7509 11.9961 20.7509C12.0038 20.7509 12.0114 20.7508 12.019 20.7505C12.2045 20.7458 12.3884 20.6727 12.53 20.5313L18.5302 14.5353C18.7448 14.3208 18.809 13.9982 18.693 13.7179C18.5769 13.4376 18.3034 13.2548 18 13.2548H12.7461L12.7461 3.99951Z",fill:"#343C54"}))))),n&&e.createElement("div",{className:"medium form-field-grid"},e.createElement("div",{className:"ts-form-group ts-choice-label vx-1-2"},e.createElement("label",null,"Label"),e.createElement("div",{className:"input-container"},e.createElement("input",{type:"text",className:"ts-filter",value:t.value,onChange:x=>o({value:x.target.value})}))),e.createElement("div",{className:"ts-form-group vx-1-2"},e.createElement("label",null,"Price"),e.createElement("div",{className:"input-container"},e.createElement("input",{type:"number",className:"ts-filter",value:t.price??"",onChange:x=>{const _=x.target.value===""?null:parseFloat(x.target.value);o({price:isNaN(_)?null:_})},min:"0",placeholder:"Add price"}),e.createElement("span",{className:"input-suffix"},s))),h&&e.createElement("div",{className:"ts-form-group"},e.createElement("label",null,"Subheading"),e.createElement("div",{className:"input-container"},e.createElement("input",{type:"text",className:"ts-filter",value:t.subheading||"",onChange:x=>o({subheading:x.target.value})}))),v&&e.createElement("div",{className:"ts-form-group"},e.createElement("label",null,"Image"),e.createElement("div",{className:"ts-alert ts-info",style:{fontSize:"0.85em"}},"Image upload for addons will be available in a future update.")),k&&e.createElement("div",{className:"ts-form-group vx-1-1 switcher-label"},e.createElement("label",null,e.createElement("div",{className:"switch-slider"},e.createElement("div",{className:"onoffswitch"},e.createElement("input",{type:"checkbox",className:"onoffswitch-checkbox",checked:t.quantity?.enabled||!1,onChange:x=>o({quantity:{...t.quantity,enabled:x.target.checked,min:t.quantity?.min??null,max:t.quantity?.max??null}})}),e.createElement("label",{className:"onoffswitch-label",onClick:x=>{x.preventDefault(),o({quantity:{...t.quantity,enabled:!t.quantity?.enabled,min:t.quantity?.min??null,max:t.quantity?.max??null}})}}))),"Sold in bulk",e.createElement("div",{className:"vx-dialog"},e.createElement(we,null),e.createElement("div",{className:"vx-dialog-content min-scroll"},e.createElement("p",null,"Multiple units of this item can be purchased in the same order")))),t.quantity?.enabled&&e.createElement("div",{className:"ts-field-repeater"},e.createElement("div",{className:"medium form-field-grid"},e.createElement("div",{className:"ts-form-group vx-1-2"},e.createElement("label",null,"Minimum"),e.createElement("input",{type:"number",className:"ts-filter",value:t.quantity?.min??"",onChange:x=>{const _=x.target.value===""?null:parseInt(x.target.value);o({quantity:{...t.quantity,min:isNaN(_)?null:_}})},min:"0",placeholder:"Min"})),e.createElement("div",{className:"ts-form-group vx-1-2"},e.createElement("label",null,"Maximum"),e.createElement("input",{type:"number",className:"ts-filter",value:t.quantity?.max??"",onChange:x=>{const _=x.target.value===""?null:parseInt(x.target.value);o({quantity:{...t.quantity,max:isNaN(_)?null:_}})},min:"0",placeholder:"Max"})))))))},Qo=({addon:t,value:n,onChange:r})=>{const s=window.Voxel_Config?.currency||"USD",l=t.props?.display_mode||"dropdown",o=n||Jo(),[a,i]=e.useState(()=>lr(o.choices)),c=e.useRef(!1),u=e.useRef(!1);e.useEffect(()=>{if(c.current){c.current=!1;return}const C=n?.choices||{},D=Object.keys(C);if(!u.current&&D.length>0){const A=lr(C);i(A),u.current=!0;return}u.current||(u.current=!0);const g=new Set(a.map(A=>A.value).filter(A=>A!=="")),S=D.filter(A=>A!==""&&!g.has(A));if(S.length>0){const A=S.map(w=>({_uid:en(),value:w,...C[w]}));i(w=>[...w,...A])}},[n?.choices]);const[d,m]=e.useState(null),f=C=>{r({...o,enabled:C})},p=C=>{const{active:D,over:g}=C;if(!g||D.id===g.id)return;const S=a.findIndex(E=>E._uid===D.id),A=a.findIndex(E=>E._uid===g.id),w=Ze(a,S,A);i(w),c.current=!0,r({...o,choices:It(w)})},h=()=>{const C={_uid:en(),value:"",price:null,quantity:{enabled:!1,min:null,max:null}},D=[...a,C];i(D),c.current=!0,r({...o,choices:It(D)}),m(C._uid)},v=C=>{const D=a.filter(g=>g._uid!==C);i(D),c.current=!0,r({...o,choices:It(D)}),d===C&&m(null)},k=(C,D)=>{const g=a.map(S=>S._uid===C?{...S,...D}:S);i(g),c.current=!0,r({...o,choices:It(g)})},x=C=>{m(d===C?null:C)},_=t.required||o.enabled===!0;return e.createElement(Mt,{addon:t,enabled:_,onToggleEnabled:f},e.createElement(ot,{collisionDetection:tt,onDragEnd:p},e.createElement(it,{items:a.map(C=>C._uid),strategy:at},e.createElement("div",{className:"ts-repeater-container"},a.map(C=>e.createElement(Ko,{key:C._uid,choice:C,isActive:d===C._uid,displayMode:l,currency:s,onToggle:()=>x(C._uid),onUpdate:D=>k(C._uid,D),onDelete:()=>v(C._uid)}))))),e.createElement("a",{href:"#",onClick:C=>{C.preventDefault(),h()},className:"ts-repeater-add ts-btn ts-btn-4 form-btn"},e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M12.0002 4.875C12.6216 4.875 13.1252 5.37868 13.1252 6V10.8752H18.0007C18.622 10.8752 19.1257 11.3789 19.1257 12.0002C19.1257 12.6216 18.622 13.1252 18.0007 13.1252H13.1252V18.0007C13.1252 18.622 12.6216 19.1257 12.0002 19.1257C11.3789 19.1257 10.8752 18.622 10.8752 18.0007V13.1252H6C5.37868 13.1252 4.875 12.6216 4.875 12.0002C4.875 11.3789 5.37868 10.8752 6 10.8752H10.8752V6C10.8752 5.37868 11.3789 4.875 12.0002 4.875Z",fill:"#343C54"})),"Add option"))};function Ro(t){return t?Array.isArray(t)?t:typeof t=="object"?Object.entries(t).map(([n,r])=>({...r,key:r.key||n})):[]:[]}function $o(t){switch(t){case"numeric":return jo;case"switcher":return Uo;case"select":case"multiselect":return Go;case"custom-select":case"custom-multiselect":return Qo;default:return null}}function ea(t,n){const r={addons:{}};if(!t)return r;const s=new Set(n.map(o=>o.key)),l=t;if(l.addons&&typeof l.addons=="object"){const o=l.addons;if(o.addons&&typeof o.addons=="object"){const a=o.addons;Object.entries(a).forEach(([i,c])=>{s.has(i)&&(r.addons[i]=c)})}Object.entries(o).forEach(([a,i])=>{a!=="addons"&&s.has(a)&&!r.addons[a]&&(r.addons[a]=i)})}return Object.entries(l).forEach(([o,a])=>{o!=="addons"&&s.has(o)&&!r.addons[o]&&(r.addons[o]=a)}),r}const ta=({field:t,value:n,onChange:r})=>{const s=Ro(t.props?.addons),l=ea(n,s),o=(a,i)=>{const c={...l.addons,[a]:i};r(c)};return s.length===0?e.createElement("div",{className:"ts-form-group"},e.createElement("label",null,t.label||"Product Addons"),e.createElement("div",{className:"ts-alert ts-info",style:{marginTop:"10px"}},e.createElement(we,null),e.createElement("div",null,e.createElement("p",null,"No addons have been configured for this product type."),e.createElement("p",{style:{fontSize:"0.9em",marginTop:"4px",opacity:.8}},"Addons can be configured in the Product Type settings.")))):e.createElement(e.Fragment,null,s.map(a=>{const i=$o(a.type);if(!i)return console.warn(`Unknown addon type: ${a.type}`),null;const c=l.addons[a.key];return e.createElement(i,{key:a.key,addon:a,value:c,onChange:u=>o(a.key,u)})}))},ge={availability:{max_days:365,buffer:{amount:0,unit:"days"}},quantity_per_slot:1,timeslots:{groups:[]},excluded_days_enabled:!1,excluded_days:[],booking_mode:"date_range",date_range:{set_custom_limits:!1,min_length:1,max_length:365},excluded_weekdays:[]},or={monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",sunday:"Sunday"},na={monday:"Mon",tuesday:"Tue",wednesday:"Wed",thursday:"Thu",friday:"Fri",saturday:"Sat",sunday:"Sun"},ar=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],Lt=50,ir=({value:t,onChange:n})=>{const r=s=>{n({...t,excluded_days_enabled:s,excluded_days:s?t.excluded_days:[]})};return e.createElement(Je,{checked:t.excluded_days_enabled,onChange:r,label:"Exclude specific dates"})},Ue=t=>{const[n,r]=t.split(":").map(Number);return n*60+r},cr=t=>{const n=Math.floor(t/60)%24,r=t%60;return`${String(n).padStart(2,"0")}:${String(r).padStart(2,"0")}`},ur=(t,n)=>t.days.length?t.days.map(r=>n[r]||r).join(", "):"",ra=(t,n)=>{const r=new Set(t.flatMap(s=>s.days));return n.filter(s=>!r.has(s))},sa=(t,n,r)=>n.days.includes(t)?!0:!r.filter(l=>l!==n).some(l=>l.days.includes(t)),la=t=>{const n=Ue(t.from);return Ue(t.to)>n},oa=t=>[...t].sort((n,r)=>{const s=Ue(n.from),l=Ue(r.from);return s-l}),aa=t=>t.filter((n,r,s)=>r===s.findIndex(l=>l.from===n.from&&l.to===n.to)),ia=t=>{const n=t.filter(la),r=aa(n);return oa(r)},ca=t=>{const{from:n,to:r,length:s,gap:l}=t;if(!n||!r||s<1)return[];const o=[],a=Ue(n),i=Ue(r);let c=a;for(;c+s<=i&&o.length<Lt;)o.push({from:cr(c),to:cr(c+s)}),c+=s+l;return o},ua=t=>t===0?"No slots":t===1?"1 slot":`${t} slots`,da=()=>({days:[],slots:[]}),ma=()=>({from:"09:00",to:"10:00"}),pa=t=>{const n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0");return`${n}-${r}-${s}`},fa=t=>{const[n,r,s]=t.split("-").map(Number);return new Date(n,r-1,s)},ha=(t,n)=>t.getFullYear()===n.getFullYear()&&t.getMonth()===n.getMonth()&&t.getDate()===n.getDate(),dr={from:"09:00",to:"17:00",length:60,gap:0},mr=({value:t,onChange:n})=>{const r=e.useRef(null),s=e.useRef(null),l=e.useRef(null),o=t.excluded_days.map(fa),a=e.useCallback(u=>o.some(d=>ha(d,u)),[o]),i=e.useCallback(u=>{const d=pa(u),f=t.excluded_days.includes(d)?t.excluded_days.filter(p=>p!==d):[...t.excluded_days,d].sort();n({...t,excluded_days:f})},[t,n]),c=e.useCallback(()=>{if(!r.current)return;r.current.querySelectorAll(".pika-button").forEach(d=>{const m=d.closest("td");if(!m)return;const f=parseInt(d.getAttribute("data-pika-year")||"",10),p=parseInt(d.getAttribute("data-pika-month")||"",10),h=parseInt(d.getAttribute("data-pika-day")||"",10);if(isNaN(f)||isNaN(p)||isNaN(h))return;const v=new Date(f,p,h);a(v)?m.classList.add("is-selected"):m.classList.remove("is-selected")})},[a]);return e.useEffect(()=>{if(!(!r.current||!s.current||!window.Pikaday))return l.current=new window.Pikaday({field:s.current,container:r.current,bound:!1,format:"YYYY-MM-DD",firstDay:1,showDaysInNextAndPreviousMonths:!0,enableSelectionDaysInNextAndPreviousMonths:!0,onSelect:function(u){i(u),setTimeout(c,0)},onDraw:function(){setTimeout(c,0)}}),c(),()=>{l.current&&(l.current.destroy(),l.current=null)}},[i,c]),e.useEffect(()=>{c()},[t.excluded_days,c]),e.createElement("div",{className:"ts-form-group"},e.createElement("label",null,"Calendar"," ",e.createElement("div",{className:"vx-dialog"},e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},e.createElement("path",{d:"M2 12.3906C2 6.86778 6.47715 2.39062 12 2.39062C17.5228 2.39062 22 6.86778 22 12.3906C22 17.9135 17.5228 22.3906 12 22.3906C6.47715 22.3906 2 17.9135 2 12.3906ZM11.9993 9.96045C12.4964 9.96045 12.9001 9.5575 12.9001 9.06045C12.9001 8.56339 12.4971 8.16045 12.0001 8.16045C11.503 8.16045 11.0993 8.56339 11.0993 9.06045C11.0993 9.5575 11.5023 9.96045 11.9993 9.96045ZM11.2501 15.8298C11.2501 16.244 11.5859 16.5798 12.0001 16.5798C12.4143 16.5798 12.7501 16.244 12.7501 15.8298V11.6054C12.7501 11.1912 12.4143 10.8554 12.0001 10.8554C11.5858 10.8554 11.2501 11.1912 11.2501 11.6054V15.8298Z",fill:"#343C54"})),e.createElement("div",{className:"vx-dialog-content min-scroll"},e.createElement("p",null,"Availability visualization based on your settings. Click to exclude specific days")))),e.createElement("div",{className:"ts-calendar-wrapper ts-availability-calendar",ref:r},e.createElement("input",{type:"hidden",ref:s})))},pr='<svg width="80" height="80" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" transform="rotate(0 0 0)"><path d="M9.5 2C9.08579 2 8.75 2.33579 8.75 2.75C8.75 3.16421 9.08579 3.5 9.5 3.5H14.5C14.9142 3.5 15.25 3.16421 15.25 2.75C15.25 2.33579 14.9142 2 14.5 2H9.5Z" fill="#343C54"/><path d="M4 5C3.74924 5 3.51506 5.12533 3.37597 5.33397C3.23687 5.54262 3.21125 5.80699 3.3077 6.03846L4.44231 8.76154C4.4804 8.85294 4.5 8.95098 4.5 9.05V19.75C4.5 20.9926 5.50736 22 6.75 22H17.25C18.4926 22 19.5 20.9926 19.5 19.75V9.04978C19.5 8.95083 19.5196 8.85286 19.5576 8.76151L20.6914 6.03827C20.7878 5.8068 20.7621 5.54249 20.623 5.33389C20.4839 5.12529 20.2498 5 19.999 5H4ZM10.75 10.5V16.5C10.75 16.9142 10.4142 17.25 10 17.25C9.58579 17.25 9.25 16.9142 9.25 16.5V10.5C9.25 10.0858 9.58579 9.75 10 9.75C10.4142 9.75 10.75 10.0858 10.75 10.5ZM14.75 10.5V16.5C14.75 16.9142 14.4142 17.25 14 17.25C13.5858 17.25 13.25 16.9142 13.25 16.5V10.5C13.25 10.0858 13.5858 9.75 14 9.75C14.4142 9.75 14.75 10.0858 14.75 10.5Z" fill="#343C54"/></svg>',ga='<svg width="80" height="80" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" transform="rotate(0 0 0)"><path d="M12.7461 3.99951C12.7461 3.5853 12.4103 3.24951 11.9961 3.24951C11.5819 3.24951 11.2461 3.5853 11.2461 3.99951L11.2461 13.2548H6.00002C5.69663 13.2548 5.42312 13.4376 5.30707 13.7179C5.19101 13.9982 5.25526 14.3208 5.46986 14.5353L11.4228 20.4844C11.5604 20.6474 11.7662 20.7509 11.9961 20.7509C12.0038 20.7509 12.0114 20.7508 12.019 20.7505C12.2045 20.7458 12.3884 20.6727 12.53 20.5313L18.5302 14.5353C18.7448 14.3208 18.809 13.9982 18.693 13.7179C18.5769 13.4376 18.3034 13.2548 18 13.2548H12.7461L12.7461 3.99951Z" fill="#343C54"/></svg>',va='<svg width="80" height="80" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" transform="rotate(0 0 0)"><path d="M12.0002 4.875C12.6216 4.875 13.1252 5.37868 13.1252 6V10.8752H18.0007C18.622 10.8752 19.1257 11.3789 19.1257 12.0002C19.1257 12.6216 18.622 13.1252 18.0007 13.1252H13.1252V18.0007C13.1252 18.622 12.6216 19.1257 12.0002 19.1257C11.3789 19.1257 10.8752 18.622 10.8752 18.0007V13.1252H6C5.37868 13.1252 4.875 12.6216 4.875 12.0002C4.875 11.3789 5.37868 10.8752 6 10.8752H10.8752V6C10.8752 5.37868 11.3789 4.875 12.0002 4.875Z" fill="#343C54"/></svg>',Ca='<svg width="80" height="80" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg" transform="rotate(0 0 0)"><path d="M3.39854 12.1458C2.33012 11.5289 1.96404 10.1627 2.5809 9.09428L4.09689 6.4685C4.71388 5.39984 6.08042 5.03388 7.14894 5.65079C7.63842 5.9334 8.25011 5.58009 8.25011 5.01524C8.25011 3.78144 9.2503 2.78125 10.4841 2.78125H13.5165C14.7502 2.78125 15.7501 3.78149 15.7501 5.01502C15.7501 5.57981 16.3615 5.93263 16.8503 5.65041C17.9185 5.03366 19.2845 5.39967 19.9012 6.46792L21.4176 9.09435C22.0345 10.1628 21.6684 11.5289 20.6 12.1458C20.1108 12.4282 20.1108 13.1343 20.6 13.4167C21.6684 14.0336 22.0344 15.3998 21.4176 16.4682L19.9012 19.0946C19.2845 20.1629 17.9185 20.5289 16.8503 19.9121C16.3615 19.6299 15.7501 19.9827 15.7501 20.5475C15.7501 21.781 14.7502 22.7812 13.5165 22.7812H10.4841C9.2503 22.7812 8.25011 21.7811 8.25011 20.5473C8.25011 19.9824 7.63844 19.6291 7.14896 19.9117C6.08044 20.5286 4.71391 20.1627 4.09692 19.094L2.58092 16.4682C1.96407 15.3998 2.33013 14.0336 3.39856 13.4168C3.88776 13.1343 3.88777 12.4282 3.39854 12.1458ZM11.9992 8.94618C9.88118 8.94618 8.16419 10.6632 8.16419 12.7812C8.16419 14.8992 9.88118 16.6162 11.9992 16.6162C14.1172 16.6162 15.8342 14.8992 15.8342 12.7812C15.8342 10.6632 14.1172 8.94618 11.9992 8.94618Z" fill="#343C54"/></svg>',fr='<svg width="80" height="80" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg" transform="rotate(0 0 0)"><path d="M15.9059 6.21988C15.6915 6.00527 15.3688 5.94101 15.0885 6.05706C14.8082 6.17312 14.6254 6.44663 14.6254 6.75002V10.6231L4 10.6231C3.58579 10.6231 3.25 10.9589 3.25 11.3731C3.25 11.7873 3.58579 12.1231 4 12.1231L19.941 12.1231C20.1259 12.1369 20.3149 12.0825 20.4671 11.9599C20.6395 11.8225 20.75 11.6107 20.75 11.3731C20.75 11.1403 20.644 10.9324 20.4776 10.7948L15.9059 6.21988Z" fill="#343C54"/><path d="M3.25 14.377C3.25 14.1801 3.32589 14.0009 3.45002 13.867C3.4571 13.8594 3.46436 13.8518 3.47181 13.8444C3.63257 13.6837 3.84809 13.6113 4.05824 13.627L20 13.627C20.4142 13.627 20.75 13.9628 20.75 14.377C20.75 14.7912 20.4142 15.127 20 15.127L9.37386 15.127V19C9.37386 19.3034 9.19108 19.5769 8.91076 19.693C8.63044 19.809 8.30781 19.7448 8.09335 19.5302L3.51797 14.9516C3.35414 14.814 3.25 14.6076 3.25 14.377Z" fill="#343C54"/></svg>',hr='<svg width="80" height="80" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" transform="rotate(0 0 0)"><path d="M8 2C8.41421 2 8.75 2.33579 8.75 2.75V3.75H15.25V2.75C15.25 2.33579 15.5858 2 16 2C16.4142 2 16.75 2.33579 16.75 2.75V3.75H18.5C19.7426 3.75 20.75 4.75736 20.75 6V8.25H3.25V6C3.25 4.75736 4.25736 3.75 5.5 3.75H7.25V2.75C7.25 2.33579 7.58579 2 8 2Z" fill="#343C54"/><path d="M3.25 9.75V19C3.25 20.2426 4.25736 21.25 5.5 21.25H11.5382C10.4272 20.0288 9.75 18.406 9.75 16.625C9.75 12.828 12.828 9.75 16.625 9.75C18.1727 9.75 19.601 10.2614 20.75 11.1245V9.75H16.625H3.25Z" fill="#343C54"/><path d="M11.25 16.625C11.25 13.6565 13.6565 11.25 16.625 11.25C19.5935 11.25 22 13.6565 22 16.625C22 19.5935 19.5935 22 16.625 22C13.6565 22 11.25 19.5935 11.25 16.625ZM19.0002 16.6248C19.0002 16.2105 18.6644 15.8748 18.2502 15.8748H15C14.5858 15.8748 14.25 16.2105 14.25 16.6248C14.25 17.039 14.5858 17.3748 15 17.3748H18.2502C18.6644 17.3748 19.0002 17.039 19.0002 16.6248Z" fill="#343C54"/></svg>',Ea=({value:t,onChange:n,quantityEnabled:r})=>{const s=()=>{const c=t.availability.buffer.unit==="days"?"hours":"days";n({...t,availability:{...t.availability,buffer:{...t.availability.buffer,unit:c}}})},l=c=>{const u=parseInt(c.target.value,10)||0;n({...t,availability:{...t.availability,max_days:Math.max(0,u)}})},o=c=>{const u=parseInt(c.target.value,10)||0;n({...t,availability:{...t.availability,buffer:{...t.availability.buffer,amount:Math.max(0,u)}}})},a=c=>{const u=parseInt(c.target.value,10)||1;n({...t,quantity_per_slot:Math.max(1,u)})},i=r?"vx-1-3":"vx-1-2";return e.createElement(e.Fragment,null,e.createElement("div",{className:`ts-form-group ${i}`},e.createElement("label",null,"Availability"),e.createElement("div",{className:"input-container"},e.createElement("input",{type:"number",value:t.availability.max_days,onChange:l,min:0,className:"ts-filter"}),e.createElement("span",{className:"input-suffix"},"Days"))),e.createElement("div",{className:`ts-form-group ${i}`},e.createElement("label",null,"Buffer period"),e.createElement("div",{className:"input-container"},e.createElement("input",{type:"number",value:t.availability.buffer.amount,onChange:o,min:0,className:"ts-filter"}),e.createElement("span",{className:"input-suffix suffix-action",onClick:s,role:"button",tabIndex:0,onKeyDown:c=>{(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),s())}},e.createElement("span",{dangerouslySetInnerHTML:{__html:fr}}),t.availability.buffer.unit==="days"?"Days":"Hours"))),r&&e.createElement("div",{className:"ts-form-group vx-1-3"},e.createElement("label",null,"Quantity per slot"),e.createElement("input",{type:"number",value:t.quantity_per_slot||1,onChange:a,min:1,className:"ts-filter"})))},wa=({group:t,allGroups:n,weekdays:r,weekdaysShort:s,onDaysChange:l})=>{const[o,a]=e.useState(!1),[i,c]=e.useState([]),u=e.useRef(null),d=()=>{c([...t.days]),a(!0)},m=x=>{c(_=>_.includes(x)?_.filter(C=>C!==x):[..._,x])},f=()=>{l(i),a(!1)},p=()=>{c([])},h=()=>{a(!1)},v=ur(t,s)||"Choose day(s)",k=t.days.length>0;return e.createElement("div",{className:"ts-form-group"},e.createElement("label",null,"Select days with this schedule"),e.createElement("div",{ref:u,className:`ts-filter ts-popup-target${k?" ts-filled":""}`,onClick:d,role:"button",tabIndex:0,onKeyDown:x=>{(x.key==="Enter"||x.key===" ")&&(x.preventDefault(),d())}},e.createElement("div",{className:"ts-filter-text"},v),e.createElement("div",{className:"ts-down-icon"})),e.createElement(Ne,{isOpen:o,target:u,onSave:f,onClear:p,onClose:h,showClear:!0,className:"md-width md-height"},e.createElement("div",{className:"ts-term-dropdown ts-md-group ts-multilevel-dropdown"},e.createElement("ul",{className:"simplify-ul ts-term-dropdown-list min-scroll"},ar.map(x=>{const _=r[x]||or[x],C=i.includes(x),D=sa(x,t,n),g=!C&&!D;return e.createElement("li",{key:x},e.createElement("a",{href:"#",onClick:S=>{S.preventDefault(),g||m(x)},className:`flexify${g?" vx-disabled":""}`},e.createElement("div",{className:"ts-checkbox-container"},e.createElement("label",{className:"container-checkbox"},e.createElement("input",{type:"checkbox",checked:C,onChange:()=>{g||m(x)},disabled:g}),e.createElement("span",{className:"checkmark"}))),e.createElement("span",null,_),e.createElement("div",{className:"ts-term-icon"})))})))))},ya=({slots:t,onSlotsChange:n})=>{const[r,s]=e.useState(!1),[l,o]=e.useState(dr),a=()=>{if(t.length>=Lt)return;const f=ma();n([...t,f])},i=f=>{const p=t.filter((h,v)=>v!==f);n(p)},c=(f,p,h)=>{const v=[...t];v[f]={...v[f],[p]:h},n(v)},u=()=>{const f=ca(l),p=ia([...t,...f]);n(p.slice(0,Lt)),s(!1)},d=()=>{s(!1),o(dr)},m=t.length<Lt;return r?e.createElement("div",{className:"form-field-grid medium"},e.createElement("div",{className:"ts-form-group ui-heading-field"},e.createElement("label",null,"Generate timeslots")),e.createElement("div",{className:"ts-form-group"},e.createElement("label",null,"Time range"),e.createElement("div",{className:"form-field-grid medium"},e.createElement("div",{className:"ts-form-group vx-1-2"},e.createElement("input",{type:"time",value:l.from,onChange:f=>o({...l,from:f.target.value}),onFocus:f=>{try{f.target.showPicker?.()}catch{}},className:"ts-filter"})),e.createElement("div",{className:"ts-form-group vx-1-2"},e.createElement("input",{type:"time",value:l.to,onChange:f=>o({...l,to:f.target.value}),onFocus:f=>{try{f.target.showPicker?.()}catch{}},className:"ts-filter"})))),e.createElement("div",{className:"ts-form-group vx-1-2"},e.createElement("label",null,"Slot length (Minutes)"),e.createElement("input",{type:"number",value:l.length,onChange:f=>o({...l,length:Math.max(5,parseInt(f.target.value)||5)}),min:5,className:"ts-filter"})),e.createElement("div",{className:"ts-form-group vx-1-2"},e.createElement("label",null,"Time between slots (Minutes)"),e.createElement("input",{type:"number",value:l.gap,onChange:f=>o({...l,gap:Math.max(0,parseInt(f.target.value)||0)}),min:0,className:"ts-filter"})),e.createElement("div",{className:"ts-form-group vx-2-3"},e.createElement("a",{href:"#",onClick:f=>{f.preventDefault(),u()},className:"ts-repeater-add ts-btn ts-btn-2 form-btn"},"Generate")),e.createElement("div",{className:"ts-form-group vx-1-3"},e.createElement("a",{href:"#",onClick:f=>{f.preventDefault(),d()},className:"ts-btn ts-btn-1 form-btn"},"Cancel"))):e.createElement("div",{className:"form-field-grid medium"},e.createElement("div",{className:"ts-form-group ui-heading-field"},e.createElement("label",null,"Time slots")),t.map((f,p)=>e.createElement(e.Fragment,{key:p},e.createElement("div",{className:"ts-form-group vx-1-3"},e.createElement("input",{type:"time",value:f.from,onChange:h=>c(p,"from",h.target.value),onFocus:h=>{try{h.target.showPicker?.()}catch{}},className:"ts-filter"})),e.createElement("div",{className:"ts-form-group vx-1-3"},e.createElement("input",{type:"time",value:f.to,onChange:h=>c(p,"to",h.target.value),onFocus:h=>{try{h.target.showPicker?.()}catch{}},className:"ts-filter"})),e.createElement("div",{className:"ts-form-group vx-1-3 vx-center-right"},e.createElement("a",{href:"#",onClick:h=>{h.preventDefault(),i(p)},className:"ts-btn ts-btn-1 form-btn"},e.createElement("span",{style:{display:"contents"},dangerouslySetInnerHTML:{__html:pr}}),"Remove")))),e.createElement("div",{className:`ts-form-group vx-1-2${m?"":" vx-disabled"}`},e.createElement("a",{href:"#",onClick:f=>{f.preventDefault(),m&&a()},className:"ts-repeater-add ts-btn ts-btn-4 form-btn"},e.createElement("span",{style:{display:"contents"},dangerouslySetInnerHTML:{__html:va}}),"Create timeslot")),e.createElement("div",{className:"ts-form-group vx-1-2"},e.createElement("a",{href:"#",onClick:f=>{f.preventDefault(),s(!0)},className:"ts-repeater-add ts-btn ts-btn-4 form-btn"},e.createElement("span",{style:{display:"contents"},dangerouslySetInnerHTML:{__html:Ca}}),"Generate timeslots")))},ba=({value:t,onChange:n,weekdays:r,weekdaysShort:s})=>{const[l,o]=e.useState(null),a=t.timeslots.groups,i=()=>{const p=da(),h=[...a,p];n({...t,timeslots:{...t.timeslots,groups:h}}),o(h.length-1)},c=(p,h)=>{h.stopPropagation();const v=a.filter((k,x)=>x!==p);n({...t,timeslots:{...t.timeslots,groups:v}}),l===p?o(null):l!==null&&l>p&&o(l-1)},u=(p,h)=>{h.stopPropagation(),o(l===p?null:p)},d=(p,h)=>{const v=[...a];v[p]={...v[p],days:h},n({...t,timeslots:{...t.timeslots,groups:v}})},m=(p,h)=>{const v=[...a];v[p]={...v[p],slots:h},n({...t,timeslots:{...t.timeslots,groups:v}})},f=ra(a,ar);return e.createElement("div",{className:"ts-form-group"},e.createElement("label",null,"Timeslots"),e.createElement("div",{className:"ts-repeater-container"},a.map((p,h)=>{const v=l===h,k=ur(p,s)||"Schedule",x=ua(p.slots.length);return e.createElement("div",{key:h,className:`ts-field-repeater${v?"":" collapsed"}`},e.createElement("div",{className:"ts-repeater-head",onClick:_=>u(h,_)},e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},e.createElement("path",{d:"M2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12.75 6.49996C12.75 6.08575 12.4141 5.74998 11.9999 5.75C11.5857 5.75002 11.25 6.08582 11.25 6.50004L11.2502 11.25H8.00024C7.58603 11.25 7.25024 11.5858 7.25024 12C7.25024 12.4142 7.58603 12.75 8.00024 12.75H12.0002C12.1992 12.75 12.3899 12.671 12.5306 12.5303C12.6712 12.3897 12.7503 12.1989 12.7502 12L12.75 6.49996Z",fill:"#343C54"})),e.createElement("label",null,k),e.createElement("em",null,x),e.createElement("div",{className:"ts-repeater-controller"},e.createElement("a",{href:"#",onClick:_=>{_.preventDefault(),c(h,_)},className:"ts-icon-btn ts-smaller",dangerouslySetInnerHTML:{__html:pr}}),e.createElement("a",{href:"#",onClick:_=>{_.preventDefault(),u(h,_)},className:"ts-icon-btn ts-smaller",dangerouslySetInnerHTML:{__html:ga}}))),v&&e.createElement("div",{className:"elementor-row medium form-field-grid"},e.createElement(wa,{group:p,allGroups:a,weekdays:r,weekdaysShort:s,onDaysChange:_=>d(h,_)}),e.createElement("div",{className:"ts-form-group"},e.createElement(ya,{slots:p.slots,onSlotsChange:_=>m(h,_)}))))})),f.length>0&&e.createElement("a",{href:"#",onClick:p=>{p.preventDefault(),i()},className:"ts-repeater-add ts-btn ts-btn-4 form-btn"},e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},e.createElement("path",{d:"M12.0002 4.875C12.6216 4.875 13.1252 5.37868 13.1252 6V10.8752H18.0007C18.622 10.8752 19.1257 11.3789 19.1257 12.0002C19.1257 12.6216 18.622 13.1252 18.0007 13.1252H13.1252V18.0007C13.1252 18.622 12.6216 19.1257 12.0002 19.1257C11.3789 19.1257 10.8752 18.622 10.8752 18.0007V13.1252H6C5.37868 13.1252 4.875 12.6216 4.875 12.0002C4.875 11.3789 5.37868 10.8752 6 10.8752H10.8752V6C10.8752 5.37868 11.3789 4.875 12.0002 4.875Z",fill:"#343C54"})),"Add schedule"))},xa=({value:t,onChange:n,quantityEnabled:r})=>{const s=()=>{const c=t.availability.buffer.unit==="days"?"hours":"days";n({...t,availability:{...t.availability,buffer:{...t.availability.buffer,unit:c}}})},l=c=>{const u=parseInt(c.target.value,10)||0;n({...t,availability:{...t.availability,max_days:Math.max(0,u)}})},o=c=>{const u=parseInt(c.target.value,10)||0;n({...t,availability:{...t.availability,buffer:{...t.availability.buffer,amount:Math.max(0,u)}}})},a=c=>{const u=parseInt(c.target.value,10)||1;n({...t,quantity_per_slot:Math.max(1,u)})},i=r?"ts-form-group":"ts-form-group vx-1-2";return e.createElement(e.Fragment,null,e.createElement("div",{className:i},e.createElement("label",null,"Availability"),e.createElement("div",{className:"input-container"},e.createElement("input",{type:"number",value:t.availability.max_days,onChange:l,min:0,className:"ts-filter"}),e.createElement("span",{className:"input-suffix"},"Days"))),e.createElement("div",{className:"ts-form-group vx-1-2"},e.createElement("label",null,"Buffer period"),e.createElement("div",{className:"input-container"},e.createElement("input",{type:"number",value:t.availability.buffer.amount,onChange:o,min:0,className:"ts-filter"}),e.createElement("span",{className:"input-suffix suffix-action",onClick:s,role:"button",tabIndex:0,onKeyDown:c=>{(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),s())}},e.createElement("span",{dangerouslySetInnerHTML:{__html:fr}}),t.availability.buffer.unit==="hours"?"Hours":"Days"))),r&&e.createElement("div",{className:"ts-form-group vx-1-2"},e.createElement("label",null,"Quantity per day"),e.createElement("input",{type:"number",value:t.quantity_per_slot||1,onChange:a,min:1,className:"ts-filter"})))},Na=({value:t,onChange:n})=>{const r=l=>{n({...t,booking_mode:l?"single_day":"date_range"})},s=t.booking_mode==="single_day";return e.createElement(Je,{checked:s,onChange:r,label:"Dates are booked individually"})},ka=({value:t,onChange:n})=>{const r=()=>{n({...t,date_range:{...t.date_range,set_custom_limits:!t.date_range?.set_custom_limits}})},s=c=>{const u=parseInt(c.target.value,10)||0;n({...t,date_range:{...t.date_range,min_length:Math.max(0,u)}})},l=c=>{const u=parseInt(c.target.value,10)||0;n({...t,date_range:{...t.date_range,max_length:Math.max(0,u)}})},o=t.date_range?.set_custom_limits??!1,a=t.date_range?.min_length??1,i=t.date_range?.max_length??365;return e.createElement(e.Fragment,null,e.createElement("div",{className:"ts-form-group switcher-label"},e.createElement("label",{onClick:r},e.createElement("div",{className:"switch-slider"},e.createElement("div",{className:"onoffswitch"},e.createElement("input",{type:"checkbox",className:"onoffswitch-checkbox",checked:o,onChange:r}),e.createElement("label",{className:"onoffswitch-label",onClick:c=>{c.preventDefault(),r()}}))),"Set minimum and maximum range length")),o&&e.createElement(e.Fragment,null,e.createElement("div",{className:"ts-form-group vx-1-2"},e.createElement("label",null,"Minimum range length"),e.createElement("div",{className:"input-container"},e.createElement("input",{type:"number",value:a,onChange:s,min:0,className:"ts-filter"}),e.createElement("span",{className:"input-suffix"},"Days"))),e.createElement("div",{className:"ts-form-group vx-1-2"},e.createElement("label",null,"Maximum range length"),e.createElement("div",{className:"input-container"},e.createElement("input",{type:"number",value:i,onChange:l,min:0,className:"ts-filter"}),e.createElement("span",{className:"input-suffix"},"Days")))))},_a=({value:t,onChange:n,weekdays:r})=>{const[s,l]=e.useState(!1),o=e.useRef(null),a=d=>{const m=t.excluded_weekdays||[],f=m.includes(d)?m.filter(p=>p!==d):[...m,d];n({...t,excluded_weekdays:f})},i=()=>{const d=t.excluded_weekdays||[];return d.length===0?"Click to exclude weekdays":d.map(m=>r[m]).join(", ")},c=()=>{n({...t,excluded_weekdays:[]})},u=(t.excluded_weekdays||[]).length>0;return e.createElement("div",{className:"ts-form-group"},e.createElement("label",null,"Exclude days of week"),e.createElement("div",{ref:o,className:`ts-filter ts-popup-target ${u?"ts-filled":""}`,onClick:()=>l(!s)},e.createElement("span",{className:"ts-filter-icon ts-smaller",dangerouslySetInnerHTML:{__html:hr}}),e.createElement("div",{className:"ts-filter-text"},i()),e.createElement("div",{className:"ts-down-icon"})),e.createElement(Ne,{isOpen:s,target:o,onSave:()=>l(!1),onClear:c,onClose:()=>l(!1),saveLabel:"Save",showClear:!0},e.createElement("div",{className:"ts-term-dropdown ts-md-group ts-multilevel-dropdown"},e.createElement("ul",{className:"simplify-ul ts-term-dropdown-list min-scroll"},Object.entries(r).map(([d,m])=>{const f=(t.excluded_weekdays||[]).includes(d);return e.createElement("li",{key:d},e.createElement("a",{href:"#",className:"flexify",onClick:p=>{p.preventDefault(),a(d)}},e.createElement("div",{className:"ts-checkbox-container"},e.createElement("label",{className:"container-checkbox"},e.createElement("input",{type:"checkbox",checked:f,disabled:!0,hidden:!0,readOnly:!0}),e.createElement("span",{className:"checkmark"}))),e.createElement("span",null,m),e.createElement("div",{className:"ts-term-icon"},e.createElement("span",{dangerouslySetInnerHTML:{__html:hr}}))))})))))},Sa=({field:t,value:n,onChange:r})=>{const s=e.useRef(!1),l={...ge,...n||{},availability:{...ge.availability,...n?.availability||{},buffer:{...ge.availability.buffer,...n?.availability?.buffer||{}}},timeslots:{...ge.timeslots,...n?.timeslots||{}},date_range:{set_custom_limits:n?.date_range?.set_custom_limits??ge.date_range?.set_custom_limits??!1,min_length:n?.date_range?.min_length??ge.date_range?.min_length??1,max_length:n?.date_range?.max_length??ge.date_range?.max_length??365}};e.useEffect(()=>{if(!s.current&&(!n||!n.availability)){s.current=!0;const m={...ge,...n||{},availability:{...ge.availability,...n?.availability||{},buffer:{...ge.availability.buffer,...n?.availability?.buffer||{}}},timeslots:{...ge.timeslots,...n?.timeslots||{}},date_range:{set_custom_limits:n?.date_range?.set_custom_limits??ge.date_range?.set_custom_limits??!1,min_length:n?.date_range?.min_length??ge.date_range?.min_length??1,max_length:n?.date_range?.max_length??ge.date_range?.max_length??365}};console.log("[BookingField] Initializing default booking value",m),r(m)}},[n,r]);const o=t.props.weekdays||or,a=t.props.weekdays_short||na,i=t.props.quantity_per_slot?.enabled??!1;return t.props.booking_type==="days"?e.createElement(e.Fragment,null,e.createElement(xa,{value:l,onChange:r,quantityEnabled:i}),e.createElement(Na,{value:l,onChange:r}),l.booking_mode!=="single_day"&&e.createElement(ka,{value:l,onChange:r}),e.createElement(_a,{value:l,onChange:r,weekdays:o}),e.createElement(ir,{value:l,onChange:r}),l.excluded_days_enabled&&e.createElement(mr,{value:l,onChange:r})):e.createElement(e.Fragment,null,e.createElement(Ea,{value:l,onChange:r,quantityEnabled:i}),e.createElement(ba,{value:l,onChange:r,weekdays:o,weekdaysShort:a}),e.createElement(ir,{value:l,onChange:r}),l.excluded_days_enabled&&e.createElement(mr,{value:l,onChange:r}))};typeof window<"u"&&typeof window._vx_file_upload_cache>"u"&&(window._vx_file_upload_cache=[]);const Ma=()=>Math.random().toString(36).substring(2,10),Ia=t=>{Array.isArray(window._vx_file_upload_cache)||(window._vx_file_upload_cache=[]);const n=window._vx_file_upload_cache.find(l=>l.name===t.name&&l.type===t.type&&l.size===t.size&&l.item.lastModified===t.lastModified);if(n)return n._id;const r=Ma(),s={source:"new_upload",name:t.name,type:t.type,size:t.size,preview:URL.createObjectURL(t),item:t,_id:r};return window._vx_file_upload_cache.unshift(s),r},La=({choice:t,displayMode:n,isActive:r,needsColor:s,needsSubheading:l,needsImage:o,onToggle:a,onUpdate:i,onRemove:c,onCreateNext:u})=>{const d=e.useRef(null),[m,f]=e.useState(!1),{attributes:p,listeners:h,setNodeRef:v,transform:k,transition:x,isDragging:_}=ct({id:t._uid}),C={transform:Le.Transform.toString(k),transition:x,opacity:_?.5:1},D=!!t.image,g=I=>{if(!I||I.length===0)return;const L=I[0];if(!L.type.startsWith("image/"))return;const Y={source:"new_upload",_id:Ia(L),file:L,name:L.name,type:L.type,preview:URL.createObjectURL(L)};i({image:Y})},S=I=>{I.preventDefault(),f(!1),g(I.dataTransfer.files)},A=I=>{if(I.length===0)return;const L=I[0];if(L.source==="new_upload"&&L._id&&L.file){const j={source:"new_upload",_id:L._id,file:L.file,name:L.name,type:L.type,preview:L.preview};i({image:j})}else if(L.source==="existing"){const j={source:"existing",id:L.id,url:L.url,name:L.name,type:L.type,preview:L.url};i({image:j})}},w=()=>{i({image:void 0})},E=()=>{const I=t.image;if(!I)return{};if(typeof I=="string")return{backgroundImage:`url(${I})`,backgroundSize:"cover",backgroundPosition:"center"};const L=I.source==="new_upload"?I.preview:I.preview||I.url;return L?{backgroundImage:`url(${L})`,backgroundSize:"cover",backgroundPosition:"center"}:{}},T=()=>{const I=t.image;return!I||typeof I=="string"?"Image":I.name||"Image"},b=I=>{const L=I.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");i({label:I,value:L})},N=I=>{I.key==="Enter"&&t.label?.length&&u()},M=t.label||"Untitled",F=["ts-field-repeater",r?"":"collapsed"].filter(Boolean).join(" "),q=s?"ts-form-group ts-choice-label vx-2-3":"ts-form-group ts-choice-label";return e.createElement("div",{ref:v,style:C,className:F},e.createElement("div",{className:"ts-repeater-head",onClick:a},e.createElement("svg",{...p,...h,id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 288 480",style:{cursor:"grab"}},e.createElement("path",{d:"M48,96A48,48,0,1,0,0,48,48,48,0,0,0,48,96Zm0,192A48,48,0,1,0,0,240,48,48,0,0,0,48,288ZM96,432a48,48,0,1,1-48-48A48,48,0,0,1,96,432ZM240,96a48,48,0,1,0-48-48A48,48,0,0,0,240,96Zm48,144a48,48,0,1,1-48-48A48,48,0,0,1,288,240ZM240,480a48,48,0,1,0-48-48A48,48,0,0,0,240,480Z",style:{fillRule:"evenodd"}})),e.createElement("label",null,M),e.createElement("div",{className:"ts-repeater-controller"},e.createElement("a",{href:"#",onClick:I=>{I.preventDefault(),I.stopPropagation(),c()},className:"ts-icon-btn ts-smaller no-drag"},e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M9.5 2C9.08579 2 8.75 2.33579 8.75 2.75C8.75 3.16421 9.08579 3.5 9.5 3.5H14.5C14.9142 3.5 15.25 3.16421 15.25 2.75C15.25 2.33579 14.9142 2 14.5 2H9.5Z",fill:"#343C54"}),e.createElement("path",{d:"M4 5C3.74924 5 3.51506 5.12533 3.37597 5.33397C3.23687 5.54262 3.21125 5.80699 3.3077 6.03846L4.44231 8.76154C4.4804 8.85294 4.5 8.95098 4.5 9.05V19.75C4.5 20.9926 5.50736 22 6.75 22H17.25C18.4926 22 19.5 20.9926 19.5 19.75V9.04978C19.5 8.95083 19.5196 8.85286 19.5576 8.76151L20.6914 6.03827C20.7878 5.8068 20.7621 5.54249 20.623 5.33389C20.4839 5.12529 20.2498 5 19.999 5H4ZM10.75 10.5V16.5C10.75 16.9142 10.4142 17.25 10 17.25C9.58579 17.25 9.25 16.9142 9.25 16.5V10.5C9.25 10.0858 9.58579 9.75 10 9.75C10.4142 9.75 10.75 10.0858 10.75 10.5ZM14.75 10.5V16.5C14.75 16.9142 14.4142 17.25 14 17.25C13.5858 17.25 13.25 16.9142 13.25 16.5V10.5C13.25 10.0858 13.5858 9.75 14 9.75C14.4142 9.75 14.75 10.0858 14.75 10.5Z",fill:"#343C54"}))),e.createElement("a",{href:"#",className:"ts-icon-btn ts-smaller no-drag",onClick:I=>I.preventDefault()},e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M12.7461 3.99951C12.7461 3.5853 12.4103 3.24951 11.9961 3.24951C11.5819 3.24951 11.2461 3.5853 11.2461 3.99951L11.2461 13.2548H6.00002C5.69663 13.2548 5.42312 13.4376 5.30707 13.7179C5.19101 13.9982 5.25526 14.3208 5.46986 14.5353L11.4228 20.4844C11.5604 20.6474 11.7662 20.7509 11.9961 20.7509C12.0038 20.7509 12.0114 20.7508 12.019 20.7505C12.2045 20.7458 12.3884 20.6727 12.53 20.5313L18.5302 14.5353C18.7448 14.3208 18.809 13.9982 18.693 13.7179C18.5769 13.4376 18.3034 13.2548 18 13.2548H12.7461L12.7461 3.99951Z",fill:"#343C54"}))))),r&&e.createElement("div",{className:"medium form-field-grid"},e.createElement("div",{className:q},e.createElement("label",null,"Label"),e.createElement("div",{className:"input-container"},e.createElement("input",{type:"text",value:t.label,onChange:I=>b(I.target.value),onKeyUp:N,className:"ts-filter"}))),s&&e.createElement("div",{className:"ts-form-group vx-1-3"},e.createElement("label",null,"Color"),e.createElement("div",{className:"ts-cp-con"},e.createElement("input",{type:"color",value:t.color||"#000000",onChange:I=>i({color:I.target.value}),className:"ts-color-picker"}),e.createElement("input",{type:"text",placeholder:"Pick color",value:t.color||"",onChange:I=>i({color:I.target.value}),className:"color-picker-input"}))),l&&e.createElement("div",{className:"ts-form-group"},e.createElement("label",null,"Subheading"),e.createElement("div",{className:"input-container"},e.createElement("input",{type:"text",value:t.subheading||"",onChange:I=>i({subheading:I.target.value}),className:"ts-filter"}))),o&&e.createElement("div",{className:"ts-form-group ts-file-upload inline-file-field",onDragEnter:()=>f(!0)},m&&e.createElement("div",{className:"drop-mask",onDragLeave:I=>{I.preventDefault(),f(!1)},onDrop:S,onDragEnter:I=>I.preventDefault(),onDragOver:I=>I.preventDefault()}),e.createElement("label",null,"Image"),e.createElement("div",{className:"ts-file-list"},e.createElement("div",{className:"pick-file-input"},e.createElement("a",{href:"#",onClick:I=>{I.preventDefault(),d.current?.click()}},e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M6.84487 8.0941L11.4545 3.48744C11.5913 3.34131 11.786 3.25 12.002 3.25C12.2347 3.25 12.4427 3.356 12.5802 3.52235L17.1552 8.09408C17.3698 8.30854 17.434 8.63117 17.318 8.91149C17.2019 9.19181 16.9284 9.3746 16.625 9.3746H12.752L12.752 16C12.752 16.4142 12.4162 16.75 12.002 16.75C11.5878 16.75 11.252 16.4142 11.252 16L11.252 9.3746L7.37503 9.3746C7.07164 9.3746 6.79813 9.19181 6.68208 8.9115C6.56602 8.63119 6.63027 8.30856 6.84487 8.0941Z",fill:"#343C54"}),e.createElement("path",{d:"M4.75 16C4.75 15.5858 4.41421 15.25 4 15.25C3.58579 15.25 3.25 15.5858 3.25 16V18.5C3.25 19.7426 4.25736 20.75 5.5 20.75H18.5009C19.7435 20.75 20.7509 19.7426 20.7509 18.5V16C20.7509 15.5858 20.4151 15.25 20.0009 15.25C19.5867 15.25 19.2509 15.5858 19.2509 16V18.5C19.2509 18.9142 18.9151 19.25 18.5009 19.25H5.5C5.08579 19.25 4.75 18.9142 4.75 18.5V16Z",fill:"#343C54"})),"Upload")),D&&e.createElement("div",{className:"ts-file ts-file-img",style:E()},e.createElement("div",{className:"ts-file-info"},e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M6.84487 8.0941L11.4545 3.48744C11.5913 3.34131 11.786 3.25 12.002 3.25C12.2347 3.25 12.4427 3.356 12.5802 3.52235L17.1552 8.09408C17.3698 8.30854 17.434 8.63117 17.318 8.91149C17.2019 9.19181 16.9284 9.3746 16.625 9.3746H12.752L12.752 16C12.752 16.4142 12.4162 16.75 12.002 16.75C11.5878 16.75 11.252 16.4142 11.252 16L11.252 9.3746L7.37503 9.3746C7.07164 9.3746 6.79813 9.19181 6.68208 8.9115C6.56602 8.63119 6.63027 8.30856 6.84487 8.0941Z",fill:"#343C54"}),e.createElement("path",{d:"M4.75 16C4.75 15.5858 4.41421 15.25 4 15.25C3.58579 15.25 3.25 15.5858 3.25 16V18.5C3.25 19.7426 4.25736 20.75 5.5 20.75H18.5009C19.7435 20.75 20.7509 19.7426 20.7509 18.5V16C20.7509 15.5858 20.4151 15.25 20.0009 15.25C19.5867 15.25 19.2509 15.5858 19.2509 16V18.5C19.2509 18.9142 18.9151 19.25 18.5009 19.25H5.5C5.08579 19.25 4.75 18.9142 4.75 18.5V16Z",fill:"#343C54"})),e.createElement("code",null,T())),e.createElement("a",{href:"#",onClick:I=>{I.preventDefault(),w()},className:"ts-remove-file flexify"},e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M9.5 2C9.08579 2 8.75 2.33579 8.75 2.75C8.75 3.16421 9.08579 3.5 9.5 3.5H14.5C14.9142 3.5 15.25 3.16421 15.25 2.75C15.25 2.33579 14.9142 2 14.5 2H9.5Z",fill:"#343C54"}),e.createElement("path",{d:"M4 5C3.74924 5 3.51506 5.12533 3.37597 5.33397C3.23687 5.54262 3.21125 5.80699 3.3077 6.03846L4.44231 8.76154C4.4804 8.85294 4.5 8.95098 4.5 9.05V19.75C4.5 20.9926 5.50736 22 6.75 22H17.25C18.4926 22 19.5 20.9926 19.5 19.75V9.04978C19.5 8.95083 19.5196 8.85286 19.5576 8.76151L20.6914 6.03827C20.7878 5.8068 20.7621 5.54249 20.623 5.33389C20.4839 5.12529 20.2498 5 19.999 5H4ZM10.75 10.5V16.5C10.75 16.9142 10.4142 17.25 10 17.25C9.58579 17.25 9.25 16.9142 9.25 16.5V10.5C9.25 10.0858 9.58579 9.75 10 9.75C10.4142 9.75 10.75 10.0858 10.75 10.5ZM14.75 10.5V16.5C14.75 16.9142 14.4142 17.25 14 17.25C13.5858 17.25 13.25 16.9142 13.25 16.5V10.5C13.25 10.0858 13.5858 9.75 14 9.75C14.4142 9.75 14.75 10.0858 14.75 10.5Z",fill:"#343C54"}))))),e.createElement("div",{style:{textAlign:"center",marginTop:"15px"}},e.createElement(Tt,{onSave:A,multiple:!1,saveLabel:"Save"})),e.createElement("input",{ref:d,type:"file",className:"hidden",accept:"image/*",onChange:I=>g(I.target.files),style:{display:"none"}}))))};function Da(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}const Aa=({choices:t,displayMode:n,onChange:r})=>{const s=Array.isArray(t)?t:[],[l,o]=e.useState(null),a=h=>{const{active:v,over:k}=h;if(!k||v.id===k.id)return;const x=s.findIndex(C=>C._uid===v.id),_=s.findIndex(C=>C._uid===k.id);r(Ze(s,x,_))},i=()=>{const h={_uid:Da(),label:"",value:""};r([...s,h]),o(h._uid)},c=h=>{r(s.filter(v=>v._uid!==h)),l===h&&o(null)},u=(h,v)=>{r(s.map(k=>k._uid===h?{...k,...v}:k))},d=h=>{o(l===h?null:h)},m=n==="colors",f=n==="cards",p=n==="cards"||n==="images";return e.createElement(e.Fragment,null,e.createElement(ot,{onDragEnd:a,collisionDetection:tt},e.createElement(it,{items:s.map(h=>h._uid),strategy:at},e.createElement("div",{className:"ts-repeater-container"},s.map((h,v)=>e.createElement(La,{key:h._uid,choice:h,displayMode:n,isActive:l===h._uid,needsColor:m,needsSubheading:f,needsImage:p,onToggle:()=>d(h._uid),onUpdate:k=>u(h._uid,k),onRemove:()=>c(h._uid),onCreateNext:i}))))),e.createElement("a",{href:"#",className:"ts-repeater-add ts-btn ts-btn-4 form-btn",onClick:h=>{h.preventDefault(),i()}},e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M12.0002 4.875C12.6216 4.875 13.1252 5.37868 13.1252 6V10.8752H18.0007C18.622 10.8752 19.1257 11.3789 19.1257 12.0002C19.1257 12.6216 18.622 13.1252 18.0007 13.1252H13.1252V18.0007C13.1252 18.622 12.6216 19.1257 12.0002 19.1257C11.3789 19.1257 10.8752 18.622 10.8752 18.0007V13.1252H6C5.37868 13.1252 4.875 12.6216 4.875 12.0002C4.875 11.3789 5.37868 10.8752 6 10.8752H10.8752V6C10.8752 5.37868 11.3789 4.875 12.0002 4.875Z",fill:"currentColor"}))," ","Add value"))},Ta=({attribute:t,onUpdate:n,preset:r})=>{const s=t.type==="custom"||!r,l=u=>{const d=u.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");n({label:u,key:d})},o=u=>{n({display_mode:u})},a=u=>{n({choices:u})},i=u=>{const d=t.choices&&typeof t.choices=="object"&&!Array.isArray(t.choices)?t.choices:{},m={...d,[u.value]:!d[u.value]};n({choices:m})},c=u=>!t.choices||Array.isArray(t.choices)?!1:!!t.choices[u.value];return e.createElement("div",{className:"ts-form-group _variation-box"},e.createElement("div",{className:"medium form-field-grid"},s?e.createElement(e.Fragment,null,e.createElement("div",{className:"ts-form-group ts-attribute-label vx-1-2"},e.createElement("label",null,"Label"),e.createElement("div",{className:"input-container"},e.createElement("input",{type:"text",value:t.label,onChange:u=>l(u.target.value),className:"ts-filter"}))),e.createElement("div",{className:"ts-form-group vx-1-2"},e.createElement("label",null,"Display mode"),e.createElement("div",{className:"ts-filter"},e.createElement("select",{value:t.display_mode,onChange:u=>o(u.target.value)},e.createElement("option",{value:"dropdown"},"Dropdown"),e.createElement("option",{value:"buttons"},"Buttons"),e.createElement("option",{value:"radio"},"Radio"),e.createElement("option",{value:"colors"},"Colors"),e.createElement("option",{value:"cards"},"Cards"),e.createElement("option",{value:"images"},"Images")),e.createElement("div",{className:"ts-down-icon"}))),e.createElement("div",{className:"ts-form-group vx-1-1"},e.createElement("label",null,"Values"),e.createElement(Aa,{choices:Array.isArray(t.choices)?t.choices:[],displayMode:t.display_mode,onChange:a}))):e.createElement(e.Fragment,null,e.createElement("div",{className:"ts-form-group vx-1-1"},e.createElement("label",null,"Select items"),e.createElement("div",{className:"ts-term-dropdown ts-md-group ts-multilevel-dropdown inline-multilevel min-scroll"},e.createElement("ul",{className:"simplify-ul ts-term-dropdown-list"},(r?.choices||[]).map(u=>e.createElement("li",{key:u.value,className:c(u)?"ts-selected":""},e.createElement("a",{href:"#",className:"flexify",onClick:d=>{d.preventDefault(),i(u)}},e.createElement("div",{className:"ts-checkbox-container"},e.createElement("label",{className:"container-checkbox"},e.createElement("input",{type:"checkbox",value:u.value,checked:c(u),disabled:!0,hidden:!0}),e.createElement("span",{className:"checkmark"}))),e.createElement("span",null,u.label))))))))))},Ha=({attribute:t,index:n,isActive:r,onToggle:s,onUpdate:l,onRemove:o,getPreset:a})=>{const{attributes:i,listeners:c,setNodeRef:u,transform:d,transition:m,isDragging:f}=ct({id:t._uid}),p={transform:Le.Transform.toString(d),transition:m,opacity:f?.5:1},h=Array.isArray(t.choices)?t.choices.length:Object.values(t.choices||{}).filter(Boolean).length,v=t.label||"Untitled",k=["ts-field-repeater",r?"":"collapsed"].filter(Boolean).join(" ");return e.createElement("div",{ref:u,style:p,className:k},e.createElement("div",{className:"ts-repeater-head",onClick:s},e.createElement("svg",{...i,...c,id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 288 480",style:{cursor:"grab"}},e.createElement("path",{d:"M48,96A48,48,0,1,0,0,48,48,48,0,0,0,48,96Zm0,192A48,48,0,1,0,0,240,48,48,0,0,0,48,288ZM96,432a48,48,0,1,1-48-48A48,48,0,0,1,96,432ZM240,96a48,48,0,1,0-48-48A48,48,0,0,0,240,96Zm48,144a48,48,0,1,1-48-48A48,48,0,0,1,288,240ZM240,480a48,48,0,1,0-48-48A48,48,0,0,0,240,480Z",style:{fillRule:"evenodd"}})),e.createElement("label",null,v),h>0?e.createElement("em",null,h," values"):e.createElement("em",null,"No values"),e.createElement("div",{className:"ts-repeater-controller"},e.createElement("a",{href:"#",onClick:x=>{x.preventDefault(),x.stopPropagation(),o()},className:"ts-icon-btn ts-smaller no-drag"},e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M9.5 2C9.08579 2 8.75 2.33579 8.75 2.75C8.75 3.16421 9.08579 3.5 9.5 3.5H14.5C14.9142 3.5 15.25 3.16421 15.25 2.75C15.25 2.33579 14.9142 2 14.5 2H9.5Z",fill:"#343C54"}),e.createElement("path",{d:"M4 5C3.74924 5 3.51506 5.12533 3.37597 5.33397C3.23687 5.54262 3.21125 5.80699 3.3077 6.03846L4.44231 8.76154C4.4804 8.85294 4.5 8.95098 4.5 9.05V19.75C4.5 20.9926 5.50736 22 6.75 22H17.25C18.4926 22 19.5 20.9926 19.5 19.75V9.04978C19.5 8.95083 19.5196 8.85286 19.5576 8.76151L20.6914 6.03827C20.7878 5.8068 20.7621 5.54249 20.623 5.33389C20.4839 5.12529 20.2498 5 19.999 5H4ZM10.75 10.5V16.5C10.75 16.9142 10.4142 17.25 10 17.25C9.58579 17.25 9.25 16.9142 9.25 16.5V10.5C9.25 10.0858 9.58579 9.75 10 9.75C10.4142 9.75 10.75 10.0858 10.75 10.5ZM14.75 10.5V16.5C14.75 16.9142 14.4142 17.25 14 17.25C13.5858 17.25 13.25 16.9142 13.25 16.5V10.5C13.25 10.0858 13.5858 9.75 14 9.75C14.4142 9.75 14.75 10.0858 14.75 10.5Z",fill:"#343C54"}))),e.createElement("a",{href:"#",className:"ts-icon-btn ts-smaller no-drag",onClick:x=>x.preventDefault()},e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M12.7461 3.99951C12.7461 3.5853 12.4103 3.24951 11.9961 3.24951C11.5819 3.24951 11.2461 3.5853 11.2461 3.99951L11.2461 13.2548H6.00002C5.69663 13.2548 5.42312 13.4376 5.30707 13.7179C5.19101 13.9982 5.25526 14.3208 5.46986 14.5353L11.4228 20.4844C11.5604 20.6474 11.7662 20.7509 11.9961 20.7509C12.0038 20.7509 12.0114 20.7508 12.019 20.7505C12.2045 20.7458 12.3884 20.6727 12.53 20.5313L18.5302 14.5353C18.7448 14.3208 18.809 13.9982 18.693 13.7179C18.5769 13.4376 18.3034 13.2548 18 13.2548H12.7461L12.7461 3.99951Z",fill:"#343C54"}))))),r&&e.createElement("div",{className:"form-field-grid medium"},e.createElement(Ta,{attribute:t,onUpdate:l,preset:a?.(t)})))};function gr(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}const Va=({attributes:t,onChange:n,presetAttributes:r=[],customAttributesEnabled:s=!0,existingAttributes:l,l10n:o})=>{const a=Array.isArray(t)?t:[],i=Array.isArray(r)?r:[],[c,u]=e.useState(null),d=C=>a.some(D=>D.key===C.key),m=C=>{if(d(C))return;if(a.length>=10){console.error("Maximum 10 attributes allowed");return}const D={_uid:gr(),label:C.label,key:C.key,display_mode:C.display_mode,choices:{},type:"preset"};n([...a,D]),u(D._uid)},f=C=>{const{active:D,over:g}=C;if(!g||D.id===g.id)return;const S=a.findIndex(E=>E._uid===D.id),A=a.findIndex(E=>E._uid===g.id),w=Ze(a,S,A);n(w)},p=()=>{if(a.length>=10){console.error("Maximum 10 attributes allowed");return}const C={_uid:gr(),label:"",key:"",display_mode:"dropdown",choices:[],type:"custom"};n([...a,C]),u(C._uid)},h=C=>{n(a.filter(D=>D._uid!==C)),c===C&&u(null)},v=(C,D)=>{n(a.map(g=>g._uid===C?{...g,...D}:g))},k=C=>{u(c===C?null:C)},x=C=>i.find(D=>D.key===C.key),_=i.length>0;return e.createElement("div",{className:"ts-form-group"},e.createElement("label",null,"Product attributes",e.createElement("div",{className:"vx-dialog"},e.createElement("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2"}),e.createElement("path",{d:"M12 16v-4M12 8h.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})),e.createElement("div",{className:"vx-dialog-content min-scroll"},e.createElement("p",null,"Create attributes which are used to generate variations for your product e.g Color, Size etc.")))),e.createElement(ot,{onDragEnd:f,collisionDetection:tt},e.createElement(it,{items:a.map(C=>C._uid),strategy:at},e.createElement("div",{className:"ts-repeater-container"},a.map((C,D)=>e.createElement(Ha,{key:C._uid,attribute:C,index:D,isActive:c===C._uid,onToggle:()=>k(C._uid),onUpdate:g=>v(C._uid,g),onRemove:()=>h(C._uid),getPreset:x}))))),_?e.createElement("div",{className:"flexify simplify-ul attribute-select"},i.map(C=>e.createElement("a",{key:C.key,href:"#",className:d(C)?"disabled":"",onClick:D=>{D.preventDefault(),m(C)}},C.label)),s&&e.createElement("a",{href:"#",onClick:C=>{C.preventDefault(),p()}},e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M12.0002 4.875C12.6216 4.875 13.1252 5.37868 13.1252 6V10.8752H18.0007C18.622 10.8752 19.1257 11.3789 19.1257 12.0002C19.1257 12.6216 18.622 13.1252 18.0007 13.1252H13.1252V18.0007C13.1252 18.622 12.6216 19.1257 12.0002 19.1257C11.3789 19.1257 10.8752 18.622 10.8752 18.0007V13.1252H6C5.37868 13.1252 4.875 12.6216 4.875 12.0002C4.875 11.3789 5.37868 10.8752 6 10.8752H10.8752V6C10.8752 5.37868 11.3789 4.875 12.0002 4.875Z",fill:"currentColor"}))," ","Add custom attribute")):s?e.createElement("a",{href:"#",className:"ts-repeater-add ts-btn ts-btn-4 form-btn",onClick:C=>{C.preventDefault(),p()}},e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M12.0002 4.875C12.6216 4.875 13.1252 5.37868 13.1252 6V10.8752H18.0007C18.622 10.8752 19.1257 11.3789 19.1257 12.0002C19.1257 12.6216 18.622 13.1252 18.0007 13.1252H13.1252V18.0007C13.1252 18.622 12.6216 19.1257 12.0002 19.1257C11.3789 19.1257 10.8752 18.622 10.8752 18.0007V13.1252H6C5.37868 13.1252 4.875 12.6216 4.875 12.0002C4.875 11.3789 5.37868 10.8752 6 10.8752H10.8752V6C10.8752 5.37868 11.3789 4.875 12.0002 4.875Z",fill:"currentColor"}))," ","Add custom attribute"):null)};typeof window<"u"&&typeof window._vx_file_upload_cache>"u"&&(window._vx_file_upload_cache=[]);const Fa=()=>Math.random().toString(36).substring(2,10),Pa=t=>{Array.isArray(window._vx_file_upload_cache)||(window._vx_file_upload_cache=[]);const n=window._vx_file_upload_cache.find(l=>l.name===t.name&&l.type===t.type&&l.size===t.size&&l.item.lastModified===t.lastModified);if(n)return n._id??"";const r=Fa(),s={source:"new_upload",name:t.name,type:t.type,size:t.size,preview:URL.createObjectURL(t),item:t,_id:r};return window._vx_file_upload_cache.unshift(s),r};function tn(t,n="$"){return`${n}${t.toFixed(2)}`}const Oa=({variation:t,isActive:n,stockEnabled:r=!1,skuEnabled:s=!1,discountEnabled:l=!0,currency:o="$",allVariations:a=[],attributes:i=[],onToggle:c,onUpdate:u,onToggleEnabled:d,onBulkApply:m})=>{const f=e.useRef(null),[p,h]=e.useState(!1),[v,k]=e.useState(!1),[x,_]=e.useState("price"),[C,D]=e.useState("all"),g=typeof t.base_price?.amount=="number",S=!r||!t.stock?.enabled||(t.stock?.quantity??0)>0,A=t.enabled&&g&&S,w=t.enabled&&(!g||!S),E=t.enabled&&r&&t.stock?.enabled&&!S,T=["ts-field-repeater",n?"":"collapsed",t.enabled?"":"disabled",A?"v-checked":"",w?"v-error":""].filter(Boolean).join(" "),b=t.label||"Unnamed variation",M=!!t.image,F=y=>{const H=parseFloat(y);u({base_price:{...t.base_price,amount:isNaN(H)?0:H}})},q=y=>{const H=parseFloat(y);u({base_price:{amount:t.base_price?.amount??0,discount_amount:isNaN(H)?void 0:H}})},I=y=>{if(!y||y.length===0)return;const H=y[0];if(!H.type.startsWith("image/"))return;const Z=Pa(H);u({image:{source:"new_upload",_id:Z,file:H,name:H.name,type:H.type,preview:URL.createObjectURL(H)}})},L=y=>{y.preventDefault(),h(!1),I(y.dataTransfer.files)},j=y=>{if(y.length===0)return;const H=y[0];H.source==="new_upload"&&H._id&&H.file?u({image:{source:"new_upload",_id:H._id,file:H.file,name:H.name,type:H.type,preview:H.preview}}):u({image:{source:"existing",id:H.id,name:H.name,type:H.type,preview:H.preview}})},Y=()=>{u({image:void 0})},J=()=>{u({stock:{enabled:!t.stock?.enabled,quantity:t.stock?.quantity??0,sku:t.stock?.sku,sold_individually:t.stock?.sold_individually??!1}})},se=y=>{const H=parseInt(y);u({stock:{enabled:t.stock?.enabled??!1,quantity:isNaN(H)?0:H,sku:t.stock?.sku,sold_individually:t.stock?.sold_individually??!1}})},Q=y=>{u({stock:{enabled:t.stock?.enabled??!1,quantity:t.stock?.quantity??0,sku:y,sold_individually:t.stock?.sold_individually??!1}})},R=()=>{u({stock:{enabled:t.stock?.enabled??!1,quantity:t.stock?.quantity??0,sku:t.stock?.sku,sold_individually:!t.stock?.sold_individually}})},oe=()=>{m&&m(x,C,t)},te=()=>{const y=[];return(i||[]).forEach(H=>{const Z=t.attributes?.[H.key];Z&&y.push({key:`${H.key}:${Z}`,label:`${H.label}: ${Z}`})}),y},O=()=>{const y=t.image;if(!y)return{};if(typeof y=="number")return{};if(typeof y=="string")return{backgroundImage:`url(${y})`,backgroundSize:"cover",backgroundPosition:"center"};const H=y.source==="new_upload"?y.preview:y.preview||y.url;return H?{backgroundImage:`url(${H})`,backgroundSize:"cover",backgroundPosition:"center"}:{}},P=()=>{const y=t.image;return!y||typeof y=="number"||typeof y=="string"?"Image":y.name||"Image"};return e.createElement("div",{className:T,style:{pointerEvents:"all"}},e.createElement("div",{className:"ts-repeater-head",onClick:c},A?e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22ZM16.5303 9.53033C16.8232 9.23744 16.8232 8.76256 16.5303 8.46967C16.2374 8.17678 15.7626 8.17678 15.4697 8.46967L10.5 13.4393L8.53033 11.4697C8.23744 11.1768 7.76256 11.1768 7.46967 11.4697C7.17678 11.7626 7.17678 12.2374 7.46967 12.5303L9.96967 15.0303C10.2626 15.3232 10.7374 15.3232 11.0303 15.0303L16.5303 9.53033Z",fill:"#343C54"})):e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22ZM12 7.25C12.4142 7.25 12.75 7.58579 12.75 8V8.01C12.75 8.42421 12.4142 8.76 12 8.76C11.5858 8.76 11.25 8.42421 11.25 8.01V8C11.25 7.58579 11.5858 7.25 12 7.25ZM12 10.25C12.4142 10.25 12.75 10.5858 12.75 11V16C12.75 16.4142 12.4142 16.75 12 16.75C11.5858 16.75 11.25 16.4142 11.25 16V11C11.25 10.5858 11.5858 10.25 12 10.25Z",fill:"#343C54"})),e.createElement("label",null,b),E?e.createElement("em",null,"Out of stock"):g?typeof t.base_price?.discount_amount=="number"?e.createElement("em",null,tn(t.base_price.discount_amount,o)," ",e.createElement("s",null,tn(t.base_price.amount,o))):e.createElement("em",null,tn(t.base_price.amount,o)):e.createElement("em",null,"No price added"),e.createElement("div",{className:"ts-repeater-controller"},!t.enabled&&e.createElement("a",{href:"#",onClick:y=>{y.preventDefault(),y.stopPropagation(),d(!0)},className:"ts-icon-btn ts-smaller"},e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M12.0002 4.875C12.6216 4.875 13.1252 5.37868 13.1252 6V10.8752H18.0007C18.622 10.8752 19.1257 11.3789 19.1257 12.0002C19.1257 12.6216 18.622 13.1252 18.0007 13.1252H13.1252V18.0007C13.1252 18.622 12.6216 19.1257 12.0002 19.1257C11.3789 19.1257 10.8752 18.622 10.8752 18.0007V13.1252H6C5.37868 13.1252 4.875 12.6216 4.875 12.0002C4.875 11.3789 5.37868 10.8752 6 10.8752H10.8752V6C10.8752 5.37868 11.3789 4.875 12.0002 4.875Z",fill:"#343C54"}))),t.enabled&&e.createElement("a",{href:"#",onClick:y=>{y.preventDefault(),y.stopPropagation(),d(!1)},className:"ts-icon-btn ts-smaller"},e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M9.5 2C9.08579 2 8.75 2.33579 8.75 2.75C8.75 3.16421 9.08579 3.5 9.5 3.5H14.5C14.9142 3.5 15.25 3.16421 15.25 2.75C15.25 2.33579 14.9142 2 14.5 2H9.5Z",fill:"#343C54"}),e.createElement("path",{d:"M4 5C3.74924 5 3.51506 5.12533 3.37597 5.33397C3.23687 5.54262 3.21125 5.80699 3.3077 6.03846L4.44231 8.76154C4.4804 8.85294 4.5 8.95098 4.5 9.05V19.75C4.5 20.9926 5.50736 22 6.75 22H17.25C18.4926 22 19.5 20.9926 19.5 19.75V9.04978C19.5 8.95083 19.5196 8.85286 19.5576 8.76151L20.6914 6.03827C20.7878 5.8068 20.7621 5.54249 20.623 5.33389C20.4839 5.12529 20.2498 5 19.999 5H4ZM10.75 10.5V16.5C10.75 16.9142 10.4142 17.25 10 17.25C9.58579 17.25 9.25 16.9142 9.25 16.5V10.5C9.25 10.0858 9.58579 9.75 10 9.75C10.4142 9.75 10.75 10.0858 10.75 10.5ZM14.75 10.5V16.5C14.75 16.9142 14.4142 17.25 14 17.25C13.5858 17.25 13.25 16.9142 13.25 16.5V10.5C13.25 10.0858 13.5858 9.75 14 9.75C14.4142 9.75 14.75 10.0858 14.75 10.5Z",fill:"#343C54"}))),e.createElement("a",{href:"#",className:"ts-icon-btn ts-smaller",onClick:y=>y.preventDefault()},e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M12.7461 3.99951C12.7461 3.5853 12.4103 3.24951 11.9961 3.24951C11.5819 3.24951 11.2461 3.5853 11.2461 3.99951L11.2461 13.2548H6.00002C5.69663 13.2548 5.42312 13.4376 5.30707 13.7179C5.19101 13.9982 5.25526 14.3208 5.46986 14.5353L11.4228 20.4844C11.5604 20.6474 11.7662 20.7509 11.9961 20.7509C12.0038 20.7509 12.0114 20.7508 12.019 20.7505C12.2045 20.7458 12.3884 20.6727 12.53 20.5313L18.5302 14.5353C18.7448 14.3208 18.809 13.9982 18.693 13.7179C18.5769 13.4376 18.3034 13.2548 18 13.2548H12.7461L12.7461 3.99951Z",fill:"#343C54"}))))),n&&e.createElement("div",{className:"medium form-field-grid"},e.createElement("div",{className:`ts-form-group ${l?"vx-1-2":""}`},e.createElement("label",null,"Price"),e.createElement("div",{className:"input-container"},e.createElement("input",{type:"number",className:"ts-filter",value:t.base_price?.amount??"",onChange:y=>F(y.target.value),min:"0",placeholder:"Add price"}),e.createElement("span",{className:"input-suffix"},o))),l&&e.createElement("div",{className:"ts-form-group vx-1-2"},e.createElement("label",null,"Discount price"),e.createElement("div",{className:"input-container"},e.createElement("input",{type:"number",className:"ts-filter",value:t.base_price?.discount_amount??"",onChange:y=>q(y.target.value),min:"0",placeholder:"Add price"}),e.createElement("span",{className:"input-suffix"},o))),e.createElement("div",{className:"ts-form-group ts-file-upload inline-file-field",onDragEnter:()=>h(!0)},p&&e.createElement("div",{className:"drop-mask",onDragLeave:y=>{y.preventDefault(),h(!1)},onDrop:L,onDragEnter:y=>y.preventDefault(),onDragOver:y=>y.preventDefault()}),e.createElement("label",null,"Image"),e.createElement("div",{className:"ts-file-list"},e.createElement("div",{className:"pick-file-input"},e.createElement("a",{href:"#",onClick:y=>{y.preventDefault(),f.current?.click()}},e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M6.84487 8.0941L11.4545 3.48744C11.5913 3.34131 11.786 3.25 12.002 3.25C12.2347 3.25 12.4427 3.356 12.5802 3.52235L17.1552 8.09408C17.3698 8.30854 17.434 8.63117 17.318 8.91149C17.2019 9.19181 16.9284 9.3746 16.625 9.3746H12.752L12.752 16C12.752 16.4142 12.4162 16.75 12.002 16.75C11.5878 16.75 11.252 16.4142 11.252 16L11.252 9.3746L7.37503 9.3746C7.07164 9.3746 6.79813 9.19181 6.68208 8.9115C6.56602 8.63119 6.63027 8.30856 6.84487 8.0941Z",fill:"#343C54"}),e.createElement("path",{d:"M4.75 16C4.75 15.5858 4.41421 15.25 4 15.25C3.58579 15.25 3.25 15.5858 3.25 16V18.5C3.25 19.7426 4.25736 20.75 5.5 20.75H18.5009C19.7435 20.75 20.7509 19.7426 20.7509 18.5V16C20.7509 15.5858 20.4151 15.25 20.0009 15.25C19.5867 15.25 19.2509 15.5858 19.2509 16V18.5C19.2509 18.9142 18.9151 19.25 18.5009 19.25H5.5C5.08579 19.25 4.75 18.9142 4.75 18.5V16Z",fill:"#343C54"})),"Upload")),M&&e.createElement("div",{className:"ts-file ts-file-img",style:O()},e.createElement("div",{className:"ts-file-info"},e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M6.84487 8.0941L11.4545 3.48744C11.5913 3.34131 11.786 3.25 12.002 3.25C12.2347 3.25 12.4427 3.356 12.5802 3.52235L17.1552 8.09408C17.3698 8.30854 17.434 8.63117 17.318 8.91149C17.2019 9.19181 16.9284 9.3746 16.625 9.3746H12.752L12.752 16C12.752 16.4142 12.4162 16.75 12.002 16.75C11.5878 16.75 11.252 16.4142 11.252 16L11.252 9.3746L7.37503 9.3746C7.07164 9.3746 6.79813 9.19181 6.68208 8.9115C6.56602 8.63119 6.63027 8.30856 6.84487 8.0941Z",fill:"#343C54"}),e.createElement("path",{d:"M4.75 16C4.75 15.5858 4.41421 15.25 4 15.25C3.58579 15.25 3.25 15.5858 3.25 16V18.5C3.25 19.7426 4.25736 20.75 5.5 20.75H18.5009C19.7435 20.75 20.7509 19.7426 20.7509 18.5V16C20.7509 15.5858 20.4151 15.25 20.0009 15.25C19.5867 15.25 19.2509 15.5858 19.2509 16V18.5C19.2509 18.9142 18.9151 19.25 18.5009 19.25H5.5C5.08579 19.25 4.75 18.9142 4.75 18.5V16Z",fill:"#343C54"})),e.createElement("code",null,P())),e.createElement("a",{href:"#",onClick:y=>{y.preventDefault(),Y()},className:"ts-remove-file flexify"},e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M9.5 2C9.08579 2 8.75 2.33579 8.75 2.75C8.75 3.16421 9.08579 3.5 9.5 3.5H14.5C14.9142 3.5 15.25 3.16421 15.25 2.75C15.25 2.33579 14.9142 2 14.5 2H9.5Z",fill:"#343C54"}),e.createElement("path",{d:"M4 5C3.74924 5 3.51506 5.12533 3.37597 5.33397C3.23687 5.54262 3.21125 5.80699 3.3077 6.03846L4.44231 8.76154C4.4804 8.85294 4.5 8.95098 4.5 9.05V19.75C4.5 20.9926 5.50736 22 6.75 22H17.25C18.4926 22 19.5 20.9926 19.5 19.75V9.04978C19.5 8.95083 19.5196 8.85286 19.5576 8.76151L20.6914 6.03827C20.7878 5.8068 20.7621 5.54249 20.623 5.33389C20.4839 5.12529 20.2498 5 19.999 5H4ZM10.75 10.5V16.5C10.75 16.9142 10.4142 17.25 10 17.25C9.58579 17.25 9.25 16.9142 9.25 16.5V10.5C9.25 10.0858 9.58579 9.75 10 9.75C10.4142 9.75 10.75 10.0858 10.75 10.5ZM14.75 10.5V16.5C14.75 16.9142 14.4142 17.25 14 17.25C13.5858 17.25 13.25 16.9142 13.25 16.5V10.5C13.25 10.0858 13.5858 9.75 14 9.75C14.4142 9.75 14.75 10.0858 14.75 10.5Z",fill:"#343C54"}))))),e.createElement("div",{style:{textAlign:"center",marginTop:"15px"}},e.createElement(Tt,{onSave:j,multiple:!1,saveLabel:"Save"})),e.createElement("input",{ref:f,type:"file",className:"hidden",accept:"image/*",onChange:y=>I(y.target.files),style:{display:"none"}})),r&&e.createElement("div",{className:"ts-form-group switcher-label"},e.createElement("label",null,e.createElement("div",{className:"switch-slider"},e.createElement("div",{className:"onoffswitch"},e.createElement("input",{type:"checkbox",className:"onoffswitch-checkbox",checked:t.stock?.enabled||!1,onChange:J}),e.createElement("label",{className:"onoffswitch-label",onClick:y=>{y.preventDefault(),J()}}))),"Manage stock"),t.stock?.enabled&&e.createElement("div",{className:"ts-field-repeater"},e.createElement("div",{className:"medium form-field-grid"},e.createElement("div",{className:"ts-form-group vx-1-2"},e.createElement("label",null,"Stock"),e.createElement("input",{type:"number",className:"ts-filter",value:t.stock?.quantity??"",onChange:y=>se(y.target.value),min:"0",placeholder:"Set quantity"})),s&&e.createElement("div",{className:"ts-form-group vx-1-2"},e.createElement("label",null,"SKU"),e.createElement("input",{type:"text",className:"ts-filter",value:t.stock?.sku||"",onChange:y=>Q(y.target.value),placeholder:"Stock-keeping unit"})),e.createElement("div",{className:"ts-form-group switcher-label"},e.createElement("label",null,e.createElement("div",{className:"switch-slider"},e.createElement("div",{className:"onoffswitch"},e.createElement("input",{type:"checkbox",className:"onoffswitch-checkbox",checked:t.stock?.sold_individually||!1,onChange:R}),e.createElement("label",{className:"onoffswitch-label",onClick:y=>{y.preventDefault(),R()}}))),"Limit purchases to 1 item per order"))))),e.createElement("div",{className:"ts-form-group"},e.createElement("a",{href:"#",className:"ts-btn ts-btn-4 form-btn",onClick:y=>{y.preventDefault(),k(!v)}},e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M3.39854 12.1458C2.33012 11.5289 1.96404 10.1627 2.5809 9.09428L4.09689 6.4685C4.71388 5.39984 6.08042 5.03388 7.14894 5.65079C7.63842 5.9334 8.25011 5.58009 8.25011 5.01524C8.25011 3.78144 9.2503 2.78125 10.4841 2.78125H13.5165C14.7502 2.78125 15.7501 3.78149 15.7501 5.01502C15.7501 5.57981 16.3615 5.93263 16.8503 5.65041C17.9185 5.03366 19.2845 5.39967 19.9012 6.46792L21.4176 9.09435C22.0345 10.1628 21.6684 11.5289 20.6 12.1458C20.1108 12.4282 20.1108 13.1343 20.6 13.4167C21.6684 14.0336 22.0344 15.3998 21.4176 16.4682L19.9012 19.0946C19.2845 20.1629 17.9185 20.5289 16.8503 19.9121C16.3615 19.6299 15.7501 19.9827 15.7501 20.5475C15.7501 21.781 14.7502 22.7812 13.5165 22.7812H10.4841C9.2503 22.7812 8.25011 21.7811 8.25011 20.5473C8.25011 19.9824 7.63844 19.6291 7.14896 19.9117C6.08044 20.5286 4.71391 20.1627 4.09692 19.094L2.58092 16.4682C1.96407 15.3998 2.33013 14.0336 3.39856 13.4168C3.88776 13.1343 3.88777 12.4282 3.39854 12.1458ZM11.9992 8.94618C9.88118 8.94618 8.16419 10.6632 8.16419 12.7812C8.16419 14.8992 9.88118 16.6162 11.9992 16.6162C14.1172 16.6162 15.8342 14.8992 15.8342 12.7812C15.8342 10.6632 14.1172 8.94618 11.9992 8.94618Z",fill:"#343C54"})),e.createElement("span",null,"Bulk apply settings"))),v&&e.createElement(e.Fragment,null,e.createElement("div",{className:"ts-form-group vx-1-2"},e.createElement("label",null,"Copy settings"),e.createElement("div",{className:"ts-filter"},e.createElement("select",{value:x,onChange:y=>_(y.target.value)},e.createElement("option",{value:"price"},"Price"),e.createElement("option",{value:"image"},"Image"),r&&e.createElement("option",{value:"stock"},"Stock"),e.createElement("option",{value:"all"},"All")),e.createElement("div",{className:"ts-down-icon"}))),e.createElement("div",{className:"ts-form-group vx-1-2"},e.createElement("label",null,"To variations"),e.createElement("div",{className:"ts-filter"},e.createElement("select",{value:C,onChange:y=>D(y.target.value)},te().map(y=>e.createElement("option",{key:y.key,value:y.key},"All in ",y.label)),e.createElement("option",{value:"all"},"All")),e.createElement("div",{className:"ts-down-icon"}))),e.createElement("div",{className:"ts-form-group vx-1-1"},e.createElement("a",{href:"#",onClick:y=>{y.preventDefault(),oe()},className:"ts-btn ts-btn-2 form-btn"},e.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22ZM16.5303 9.53033C16.8232 9.23744 16.8232 8.76256 16.5303 8.46967C16.2374 8.17678 15.7626 8.17678 15.4697 8.46967L10.5 13.4393L8.53033 11.4697C8.23744 11.1768 7.76256 11.1768 7.46967 11.4697C7.17678 11.7626 7.17678 12.2374 7.46967 12.5303L9.96967 15.0303C10.2626 15.3232 10.7374 15.3232 11.0303 15.0303L16.5303 9.53033Z",fill:"#343C54"})),"Apply")))))};function Za(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function vr(t){if(t.length===0)return[[]];const[n,...r]=t,s=vr(r);return n.flatMap(l=>s.map(o=>[l,...o]))}const qa=({variations:t,attributes:n,presetAttributes:r,onChange:s,onVariationChange:l,stockEnabled:o=!1,skuEnabled:a=!0,discountEnabled:i=!0,currency:c="$",l10n:u})=>{const d=Array.isArray(t)?t:[],m=Array.isArray(n)?n:[],f=Array.isArray(r)?r:[],[p,h]=e.useState(null),v=e.useCallback(g=>{if(g.type==="custom"||Array.isArray(g.choices))return Array.isArray(g.choices)?g.choices:[];const S=f?.find(w=>w.key===g.key);if(!S)return[];const A=g.choices;return(S.choices||[]).filter(w=>A[w.value])},[f]),k=e.useMemo(()=>(m||[]).map(g=>({...g,normalizedChoices:v(g)})).filter(g=>g.normalizedChoices.length>0),[m,v]),x=e.useCallback(()=>{const g=k;if(g.length===0){s([]);return}const S=g.reduce((E,T)=>E*T.normalizedChoices.length,1);if(S>100){console.error("Maximum 100 variations allowed. Current combination would create:",S);return}const w=vr(g.map(E=>E.normalizedChoices)).map(E=>{const T={};g.forEach((N,M)=>{T[N.key]=E[M].value});const b=d.find(N=>JSON.stringify(N.attributes)===JSON.stringify(T));return b||{_uid:Za(),label:E.map(N=>N.label).join(" / "),attributes:T,enabled:!0}});s(w)},[k,d,s]);e.useEffect(()=>{x()},[JSON.stringify(k.map(g=>({key:g.key,choices:g.normalizedChoices.map(S=>({value:S.value,label:S.label}))})))]);const _=g=>{h(p===g?null:g)};if(d.length===0)return null;const C=u?.variation||"Variations",D=u?.description||"Product variations are automatically generated based on your attributes.<br><br>An individual variation requires a price to be available for purchase.<br><br>Variations without a price, are automatically disabled upon saving changes";return e.createElement("div",{className:"ts-form-group"},e.createElement("label",null,C," (",d.length,")",e.createElement("div",{className:"vx-dialog"},e.createElement("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2"}),e.createElement("path",{d:"M12 16v-4M12 8h.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})),e.createElement("div",{className:"vx-dialog-content min-scroll"},e.createElement("p",{dangerouslySetInnerHTML:{__html:D}})))),e.createElement("div",{className:"ts-repeater-container"},d.map(g=>e.createElement(Oa,{key:g._uid,variation:g,isActive:p===g._uid,stockEnabled:o,skuEnabled:a,discountEnabled:i,currency:c,attributes:m,allVariations:d,onToggle:()=>_(g._uid),onUpdate:S=>l(g._uid,S),onToggleEnabled:S=>l(g._uid,{enabled:S})}))))},Ba=({field:t,value:n,onChange:r,onBlur:s,icons:l,postTypeKey:o})=>{const a=t.props||{attributeList:[],variations:[],l10n:{}},i=e.useMemo(()=>typeof n=="object"&&n!==null?{attributeList:n.attributeList||a.attributeList||[],variations:n.variations||a.variations||[]}:{attributeList:a.attributeList||[],variations:a.variations||[]},[n,a]),c=e.useCallback(m=>{const f={...i,attributeList:m};r(f),s&&s()},[i,r,s]),u=e.useCallback(m=>{const f={...i,variations:m};r(f),s&&s()},[i,r,s]),d=e.useCallback((m,f)=>{const p=i.variations.map(h=>h._uid===m?{...h,...f}:h);u(p)},[i.variations,u]);return e.createElement(e.Fragment,null,e.createElement(Va,{attributes:i.attributeList,onChange:c,presetAttributes:a.attributes,customAttributesEnabled:a.custom_attributes?.enabled??!0,existingAttributes:a.existingAttributes,l10n:a.l10n}),e.createElement(qa,{variations:i.variations,attributes:i.attributeList,presetAttributes:a.attributes,onChange:u,onVariationChange:d,stockEnabled:a.stock?.enabled??!1,skuEnabled:a.sku?.enabled??!0,discountEnabled:a.discount_price?.enabled??!0,currency:a.currency||"$",l10n:a.l10n}))},ja=({field:t,value:n,onChange:r})=>{e.useEffect(()=>{console.log("=".repeat(80)),console.log("ProductField: Mounted/Updated"),console.log("=".repeat(80)),console.log("field.key:",t.key),console.log("field.type:",t.type),console.log("field.label:",t.label),console.log("field.required:",t.required),console.log("field.props:",t.props),console.log("field.props.product_types:",t.props?.product_types),console.log("value:",n),console.log("=".repeat(80))},[t,n]);const s=e.useMemo(()=>{if(typeof n=="object"&&n!==null)return n;const p=t.props?.product_types||{},h=Object.keys(p)[0]||"";return console.log("ProductField: Creating default value",{productTypes:p,defaultType:h,enabled:!!t.required}),{enabled:!!t.required,product_type:h}},[n,t.required,t.props?.product_types]),l=t.validation?.errors?.[0]||"",o=l.length>0,a=t.props?.product_types||{},i=Object.keys(a),c=s.product_type||i[0]||"",u=a[c];console.log("ProductField: Product Type Config",{productTypes:a,productTypeKeys:i,selectedProductType:c,currentProductTypeConfig:u,currentProductTypeConfigFields:u?.fields,enabled:s.enabled});const d=e.useCallback(()=>{const p={...s,enabled:!s.enabled};r(p)},[s,r]),m=e.useCallback(p=>{const h=p.target.value,v={...s,product_type:h};r(v)},[s,r]),f=e.useCallback((p,h)=>{const v=p.replace(/-/g,"_"),k={...s,[v]:h};r(k)},[s,r]);return e.createElement("div",{className:`ts-form-group field-key-${t.key} ${o?"ts-has-errors":""} ${t.css_class||""} ${t.hidden?"hidden":""}`},e.createElement("div",{className:"form-field-grid"},t.required?e.createElement("div",{className:"ts-form-group"},e.createElement("label",null,t.label,o&&e.createElement("span",{className:"is-required"},l),t.description&&e.createElement("div",{className:"vx-dialog"},e.createElement(we,null),e.createElement("div",{className:"vx-dialog-content min-scroll"},e.createElement("p",{dangerouslySetInnerHTML:{__html:t.description}}))))):e.createElement("div",{className:"ts-form-group switcher-label"},e.createElement("label",null,e.createElement("div",{className:"switch-slider"},e.createElement("div",{className:"onoffswitch"},e.createElement("input",{type:"checkbox",className:"onoffswitch-checkbox",checked:s.enabled||!1,onChange:d}),e.createElement("label",{className:"onoffswitch-label",onClick:p=>{p.preventDefault(),d()}}))),t.label,o?e.createElement("span",{className:"is-required"},l):e.createElement("span",{className:"is-required"},"Optional"),t.description&&e.createElement("div",{className:"vx-dialog"},e.createElement(we,null),e.createElement("div",{className:"vx-dialog-content min-scroll"},e.createElement("p",{dangerouslySetInnerHTML:{__html:t.description}}))))),s.enabled&&i.length>=2&&e.createElement("div",{className:"ts-form-group"},e.createElement("label",null,"Product type"),e.createElement("div",{className:"ts-filter"},e.createElement("select",{value:c,onChange:m},i.map(p=>{const h=a[p];return e.createElement("option",{key:p,value:p},h?.label||p)})),e.createElement("div",{className:"ts-down-icon"}))),s.enabled&&u&&e.createElement(e.Fragment,null,Object.keys(u.fields||{}).map(p=>{const h=u.fields[p];if(!h)return console.log("ProductField: Sub-field is null/undefined",{subFieldKey:p}),null;const v=p.replace(/-/g,"_"),k=s[p]??s[v],x=`${c}:${p}`;switch(console.log("ProductField: Rendering sub-field",{subFieldKey:p,subField:h,subFieldValue:k,key:x}),p){case"base-price":case"base_price":return e.createElement(uo,{key:x,field:h,value:k,onChange:_=>f(p,_)});case"stock":return e.createElement(mo,{key:x,field:h,value:k,onChange:_=>f(p,_)});case"shipping":return e.createElement(po,{key:x,field:h,value:k,onChange:_=>f(p,_)});case"subscription-interval":case"subscription_interval":return e.createElement(fo,{key:x,field:h,value:k,onChange:_=>f(p,_)});case"deliverables":return e.createElement(ho,{key:x,field:h,value:k,onChange:_=>f(p,_)});case"custom-prices":case"custom_prices":return e.createElement(qo,{key:x,field:h,value:k,onChange:_=>f(p,_),productType:u,productFieldValue:s,productFieldKey:t.key});case"addons":return e.createElement(ta,{key:x,field:h,value:k,onChange:_=>f(p,_)});case"booking":return e.createElement(Sa,{key:x,field:h,value:k,onChange:_=>f(p,_)});case"variations":return e.createElement(Ba,{key:x,field:h,value:k,onChange:_=>f(p,_)});default:return e.createElement("div",{key:x,className:"ts-form-group"},e.createElement("div",{className:"ts-alert ts-warning"},e.createElement("i",{className:"las la-exclamation-triangle"}),e.createElement("p",null,'Product field type "',p,'" not yet implemented.')))}}))))},za=({field:t,value:n,onChange:r,onBlur:s,icons:l,postTypeKey:o})=>{const a=e.useRef(null),i=e.useRef(null),c=t.props?.multiple??!1,u=t.props?.placeholder||t.label,d=t.props?.max_count;t.props?.relation_type,t.props?.post_types;const m=t.props?.require_author_approval===!0,f=t.props?.pending_ids||[],p=t.validation?.errors?.[0]||"",h=p.length>0,[v,k]=e.useState(!1),[x,_]=e.useState(""),[C,D]=e.useState([]),[g,S]=e.useState(!1),[A,w]=e.useState(0),[E,T]=e.useState(!1),[b,N]=e.useState([]),[M,F]=e.useState(!1),[q,I]=e.useState(0),[L,j]=e.useState(!1),[Y,J]=e.useState({}),se=e.useRef(new Set),Q=e.useMemo(()=>new Set(f),[f]),R=me(l?.tsSearchIcon,ft),oe=me(l?.tsTimelineLoadIcon,Fr),te=e.useMemo(()=>{const B={};return Array.isArray(n)?n.forEach(U=>B[U]=!0):typeof n=="number"&&(B[n]=!0),B},[n]);e.useEffect(()=>{const B=`voxel_post_relation_${o}_${t.key}`;try{const X=sessionStorage.getItem(B);if(X){const le=JSON.parse(X);J(ie=>({...ie,...le})),console.log("[PostRelation] Restored from sessionStorage:",le)}}catch(X){console.error("[PostRelation] Error reading from sessionStorage:",X)}if(t.props?.selected&&typeof t.props.selected=="object"){const X=t.props.selected;J(le=>({...le,...X}));try{sessionStorage.setItem(B,JSON.stringify(X))}catch(le){console.error("[PostRelation] Error writing to sessionStorage:",le)}}const G=Object.keys(te).filter(X=>te[Number(X)]).filter(X=>{const le=Number(X),ie=se.current.has(le),ne=Y[le]?.title;return!ie&&!ne});if(G.length>0){console.log("[PostRelation] Fetching missing post titles for IDs:",G),G.forEach(ne=>se.current.add(Number(ne)));const X=new URLSearchParams({action:"create_post.relations.get_posts",post_type:o||"",field_key:t.key,ids:G.join(",")}),ie=`${window.Voxel_Config?.ajax_url||ht()}&${X.toString()}`;fetch(ie).then(ne=>ne.json()).then(ne=>{if(ne.success&&ne.data){console.log("[PostRelation] Fetched post details:",ne.data);const ae={};ne.data.forEach(pe=>{ae[pe.id]=pe}),J(pe=>({...pe,...ae}))}}).catch(ne=>{console.error("[PostRelation] Error fetching post details:",ne),G.forEach(ae=>se.current.delete(Number(ae)))})}},[t.props?.selected,o,t.key]);const O=e.useCallback(async(B="",U=0)=>{try{const G=Object.keys(te).filter(pe=>te[Number(pe)]),X=new URLSearchParams({action:"create_post.relations.get_posts",post_type:o||"",field_key:t.key,offset:U.toString()});B.trim()&&X.append("search",B.trim()),G.length>0&&X.append("exclude",G.join(","));const ie=`${window.Voxel_Config?.ajax_url||ht()}&${X.toString()}`;console.log("[PostRelation] Fetching:",{url:ie,post_type:o,field_key:t.key,offset:U});const ne=await fetch(ie);if(!ne.ok){const pe=await ne.text();throw console.error("[PostRelation] Server error:",{status:ne.status,statusText:ne.statusText,body:pe,params:{post_type:o,field_key:t.key,offset:U}}),new Error(`Server returned ${ne.status}: ${pe}`)}const ae=await ne.json();return console.log("[PostRelation] Response:",{success:ae.success,count:ae.data?.length,has_more:ae.has_more}),ae.success?ae:null}catch(G){return console.error("Error fetching posts:",G),null}},[t.key,o,te]),P=e.useMemo(()=>{const B=Object.keys(te).filter(G=>te[Number(G)]);return B.length===0?null:B.map(G=>Y[Number(G)]?.title||`Post ${G}`).join(", ")},[te,Y]);e.useEffect(()=>{(async()=>{if(C.length===0&&!E){T(!0);const U=await O("",0);U&&(D(U.data),S(U.has_more),w(10)),T(!1)}})()},[]);const y=e.useCallback(()=>{k(!0),setTimeout(()=>i.current?.focus(),100)},[]),H=e.useCallback(()=>{k(!1),_(""),N([]),I(0),s?.()},[s]),Z=e.useCallback(B=>{const U=`voxel_post_relation_${o}_${t.key}`;if(J(G=>{const X={...G,[B.id]:B};try{sessionStorage.setItem(U,JSON.stringify(X))}catch(le){console.error("[PostRelation] Error writing to sessionStorage:",le)}return X}),c){const G={...te};if(G[B.id])delete G[B.id];else{if(d&&d>0&&Object.values(G).filter(Boolean).length>=d){t.validation&&(t.validation.errors=[`You can select up to ${d} items`]);return}G[B.id]=!0}if(t.validation?.errors?.length){const le=Object.values(G).filter(Boolean).length;(!d||le<=d)&&(t.validation.errors=[])}const X=Object.keys(G).map(Number);r(X.length>0?X:null)}else r(B.id),H()},[c,te,r,H,o,t.key,d,t.validation]),V=e.useCallback(async B=>{const U=B.target.value;if(_(U),U.trim()){j(!0),I(0);const G=await O(U,0);G&&(N(G.data),F(G.has_more),I(10)),j(!1)}else N([]),I(0)},[O]),z=e.useCallback(async()=>{T(!0);const B=await O("",A);B&&(D(U=>[...U,...B.data]),S(B.has_more),w(U=>U+10)),T(!1)},[O,A]),W=e.useCallback(async()=>{j(!0);const B=await O(x,q);B&&(N(U=>[...U,...B.data]),F(B.has_more),I(U=>U+10)),j(!1)},[O,x,q]),K=e.useCallback(()=>{r(null)},[r]),$=e.useCallback(()=>{H()},[H]);return e.createElement("div",{className:`ts-form-group field-key-${t.key} ${h?"ts-has-errors":""} ${t.css_class||""} ${t.hidden?"hidden":""}`},e.createElement("label",null,t.label,h?e.createElement("span",{className:"is-required"},p):!t.required&&e.createElement("span",{className:"is-required"},"Optional"),t.description&&e.createElement("div",{className:"vx-dialog"},e.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M8 0C3.6 0 0 3.6 0 8C0 12.4 3.6 16 8 16C12.4 16 16 12.4 16 8C16 3.6 12.4 0 8 0ZM8 12C7.4 12 7 11.6 7 11C7 10.4 7.4 10 8 10C8.6 10 9 10.4 9 11C9 11.6 8.6 12 8 12ZM9 9H7V4H9V9Z",fill:"currentColor"})),e.createElement("div",{className:"vx-dialog-content min-scroll"},e.createElement("p",null,t.description)))),e.createElement("div",{ref:a,className:`ts-filter ts-popup-target ${P!==null?"ts-filled":""}`,onClick:y,role:"button",tabIndex:0,onKeyDown:B=>{(B.key==="Enter"||B.key===" ")&&(B.preventDefault(),y())}},e.createElement("div",{className:"ts-filter-text"},e.createElement("span",null,P!==null?P:u)),e.createElement("div",{className:"ts-down-icon"})),e.createElement(Ne,{isOpen:v,target:a,title:"",saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:$,onClear:K,onClose:H},e.createElement("div",{className:"ts-sticky-top uib b-bottom"},e.createElement("div",{className:"ts-input-icon flexify"},e.createElement("span",{dangerouslySetInnerHTML:{__html:R}}),e.createElement("input",{ref:i,type:"text",className:"autofocus",placeholder:"Search",value:x,onChange:V}))),x.trim()?e.createElement("div",{className:`ts-term-dropdown ts-md-group ts-multilevel-dropdown ${L?"vx-disabled":""}`},e.createElement("ul",{className:"simplify-ul ts-term-dropdown-list min-scroll"},b.length>0?e.createElement(e.Fragment,null,b.map(B=>e.createElement("li",{key:B.id,className:Q.has(B.id)?"ts-pending":""},e.createElement("a",{href:"#",className:"flexify",onClick:U=>{U.preventDefault(),Z(B)}},e.createElement("div",{className:"ts-checkbox-container"},e.createElement("label",{className:`container-${c?"checkbox":"radio"}`},e.createElement("input",{type:c?"checkbox":"radio",value:B.id,checked:te[B.id]||!1,disabled:!0,hidden:!0}),e.createElement("span",{className:"checkmark"}))),e.createElement("span",null,B.title),m&&Q.has(B.id)&&e.createElement("span",{className:"ts-status-badge",style:{fontSize:"11px",opacity:.7}},"Pending"),B.logo&&e.createElement("div",{className:"ts-term-image"},e.createElement("span",{dangerouslySetInnerHTML:{__html:B.logo}}))))),M&&e.createElement("li",null,e.createElement("a",{href:"#",onClick:B=>{B.preventDefault(),W()},className:`ts-btn ts-btn-4 ${L?"vx-pending":""}`},e.createElement("span",{dangerouslySetInnerHTML:{__html:oe}}),"Load more"))):e.createElement("li",{className:"ts-empty-user-tab"},e.createElement("span",{dangerouslySetInnerHTML:{__html:R}}),e.createElement("p",null,L?"Searching posts":"No posts found")))):e.createElement("div",{className:"ts-term-dropdown ts-md-group ts-multilevel-dropdown"},e.createElement("ul",{className:"simplify-ul ts-term-dropdown-list min-scroll"},C.length>0?e.createElement(e.Fragment,null,C.map(B=>e.createElement("li",{key:B.id,className:Q.has(B.id)?"ts-pending":""},e.createElement("a",{href:"#",className:"flexify",onClick:U=>{U.preventDefault(),Z(B)}},e.createElement("div",{className:"ts-checkbox-container"},e.createElement("label",{className:`container-${c?"checkbox":"radio"}`},e.createElement("input",{type:c?"checkbox":"radio",value:B.id,checked:te[B.id]||!1,disabled:!0,hidden:!0}),e.createElement("span",{className:"checkmark"}))),e.createElement("span",null,B.title),m&&Q.has(B.id)&&e.createElement("span",{className:"ts-status-badge",style:{fontSize:"11px",opacity:.7}},"Pending"),B.logo&&e.createElement("div",{className:"ts-term-image"},e.createElement("span",{dangerouslySetInnerHTML:{__html:B.logo}}))))),g&&e.createElement("li",null,e.createElement("a",{href:"#",onClick:B=>{B.preventDefault(),z()},className:`ts-btn ts-btn-4 ${E?"vx-pending":""}`},e.createElement("span",{dangerouslySetInnerHTML:{__html:oe}}),"Load more"))):e.createElement("li",{className:"ts-empty-user-tab"},E?e.createElement(e.Fragment,null,e.createElement("span",{dangerouslySetInnerHTML:{__html:oe}}),e.createElement("p",null,"Loading")):e.createElement(e.Fragment,null,e.createElement("span",{dangerouslySetInnerHTML:{__html:R}}),e.createElement("p",null,"No posts found")))))))};function Ua({field:t,value:n,onChange:r,onBlur:s}){const[l,o]=e.useState(n||""),a=t.validation?.errors?.[0]||"",i=a.length>0;e.useEffect(()=>{o(n||"")},[n]);const c=f=>f?(f=f.trim().toLowerCase(),f[0]!=="#"&&(f="#"+f),/^#([a-f0-9]{3}|[a-f0-9]{6})$/i.test(f)?f:""):"",u=f=>{o(f),r(f)},d=()=>{const f=c(l);o(f),r(f||l),s?.()},m=String(t.props?.placeholder??t.label??"");return React.createElement("div",{className:`ts-form-group field-key-${t.key} ${i?"ts-has-errors":""} ${t.css_class||""} ${t.hidden?"hidden":""}`},React.createElement("label",null,t.label,i?React.createElement("span",{className:"is-required"},a):!t.required&&React.createElement("span",{className:"is-required"},"Optional"),t.description&&React.createElement("div",{className:"vx-dialog"},React.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M8 0C3.6 0 0 3.6 0 8C0 12.4 3.6 16 8 16C12.4 16 16 12.4 16 8C16 3.6 12.4 0 8 0ZM8 12C7.4 12 7 11.6 7 11C7 10.4 7.4 10 8 10C8.6 10 9 10.4 9 11C9 11.6 8.6 12 8 12ZM9 9H7V4H9V9Z",fill:"currentColor"})),React.createElement("div",{className:"vx-dialog-content min-scroll"},React.createElement("p",null,t.description)))),React.createElement("div",{className:"ts-cp-con"},React.createElement("input",{type:"color",className:"ts-color-picker",value:l,onChange:f=>u(f.target.value),onBlur:d}),React.createElement("input",{type:"text",className:"color-picker-input",value:l,placeholder:m,onChange:f=>u(f.target.value),onBlur:d})))}const Cr=({field:t,value:n,onChange:r,onBlur:s,icons:l,postTypeKey:o})=>{const a=n,i=r;switch(t.type){case"text":case"title":case"profile-name":return e.createElement(_r,{field:t,value:a,onChange:i,onBlur:s,icons:l});case"email":return e.createElement(Or,{field:t,value:a,onChange:i,onBlur:s,icons:l});case"url":return e.createElement(Zr,{field:t,value:a,onChange:i,onBlur:s,icons:l});case"phone":return e.createElement(qr,{field:t,value:a,onChange:i,onBlur:s,icons:l});case"texteditor":case"description":return e.createElement(Sr,{field:t,value:a,onChange:i,onBlur:s,icons:l});case"number":return e.createElement(Pr,{field:t,value:a,onChange:i,onBlur:s,icons:l});case"color":return e.createElement(Ua,{field:t,value:a,onChange:i,onBlur:s,icons:l});case"location":return e.createElement(Rr,{field:t,value:a,onChange:i,onBlur:s,icons:l});case"select":return e.createElement(Br,{field:t,value:a,onChange:i,onBlur:s,icons:l});case"switcher":return e.createElement(jr,{field:t,value:a,onChange:i,onBlur:s,icons:l});case"multiselect":return e.createElement(Gr,{field:t,value:a,onChange:i,onBlur:s,icons:l});case"taxonomy":return e.createElement(Jr,{field:t,value:a,onChange:i,onBlur:s,icons:l});case"date":return e.createElement(ts,{field:t,value:a,onChange:i,onBlur:s,icons:l});case"time":return e.createElement(ns,{field:t,value:a,onChange:i,onBlur:s,icons:l});case"timezone":return e.createElement(rs,{field:t,value:a,onChange:i,onBlur:s,icons:l});case"recurring-date":return e.createElement(ms,{field:t,value:a,onChange:i,onBlur:s,icons:l});case"work-hours":return e.createElement(ys,{field:t,value:a,onChange:i,onBlur:s,icons:l});case"file":case"image":case"profile-avatar":case"logo":case"cover-image":case"gallery":return e.createElement(En,{field:t,value:a,onChange:i,onBlur:s,icons:l});case"repeater":return e.createElement(co,{field:t,value:a,onChange:i,onBlur:s,icons:l,postTypeKey:o});case"product":return e.createElement(ja,{field:t,value:a,onChange:i});case"post-relation":return e.createElement(za,{field:t,value:a,onChange:i,onBlur:s,icons:l,postTypeKey:o});case"ui-heading":case"ui-html":case"ui-image":case"ui-step":return e.createElement(_s,{field:t});default:return console.warn(`FieldRenderer: Unknown field type "${t.type}"`),e.createElement("div",{className:"ts-form-group field-placeholder"},e.createElement("p",{style:{color:"#c33",fontSize:"14px",padding:"10px"}},' Unknown field type: "',t.type,'"'),e.createElement("p",{style:{color:"#999",fontSize:"12px",padding:"0 10px 10px"}},"This field type is not yet implemented. Check FieldRenderer.tsx"))}},Wa={"text:equals":(t,n)=>n===t.value,"text:not_equals":(t,n)=>n!==t.value,"text:empty":(t,n)=>!n?.trim()?.length,"text:not_empty":(t,n)=>!!n?.trim()?.length,"text:contains":(t,n)=>!!n?.match(new RegExp(t.value,"i")),"switcher:checked":(t,n)=>!!n,"switcher:unchecked":(t,n)=>!n,"number:equals":(t,n)=>n===parseFloat(t.value),"number:not_equals":(t,n)=>n!==parseFloat(t.value),"number:greater_than":(t,n)=>n>parseFloat(t.value),"number:less_than":(t,n)=>n<parseFloat(t.value),"number:gte":(t,n)=>n>=parseFloat(t.value),"number:lte":(t,n)=>n<=parseFloat(t.value),"number:empty":(t,n)=>n==null,"number:not_empty":(t,n)=>n!=null,"select:equals":(t,n)=>n===t.value,"select:not_equals":(t,n)=>n!==t.value,"select:any_of":(t,n)=>t.value.includes(n),"select:none_of":(t,n)=>!t.value.includes(n),"select:empty":(t,n)=>!n,"select:not_empty":(t,n)=>!!n,"date:equals":(t,n)=>n===t.value,"date:not_equals":(t,n)=>n!==t.value,"date:after":(t,n)=>n>t.value,"date:before":(t,n)=>n<t.value,"date:empty":(t,n)=>!n,"date:not_empty":(t,n)=>!!n,"file:empty":(t,n)=>!Array.isArray(n)||!n.length,"file:not_empty":(t,n)=>Array.isArray(n)&&n.length>0,"taxonomy:contains":(t,n)=>Array.isArray(n)&&n.includes(t.value),"taxonomy:not_contains":(t,n)=>!(Array.isArray(n)&&n.includes(t.value)),"taxonomy:any_of":(t,n)=>!Array.isArray(n)||!n.length?!1:n.some(r=>t.value.includes(r)),"taxonomy:none_of":(t,n)=>!Array.isArray(n)||!n.length?!0:!n.some(r=>t.value.includes(r)),"taxonomy:empty":(t,n)=>!Array.isArray(n)||!n.length,"taxonomy:not_empty":(t,n)=>Array.isArray(n)&&n.length>0};function Ya(t,n,r,s,l){const o=Wa[t.type];return o?l(s)&&o(t,n,r,s):(console.warn(`Unknown condition type: ${t.type}`),!1)}function nn(t,n,r=!0){if(r&&t.type!=="ui-step"&&t.step){const l=n[t.step];if(l&&!nn(l,n,r))return!1}if(!t.conditions||!t.conditions.length)return!0;let s=!1;return t.conditions.forEach(l=>{if(l.length){let o=!0;l.forEach(a=>{a._passes||(o=!1)}),o&&(s=!0)}}),t.conditions_behavior==="hide"?!s:s}function Ga(t,n){const r=t.value;return n!==void 0?r?r[n]:null:r}function Xa(t,n=!0){const r=e.useRef(new Map);return e.useEffect(()=>{Object.values(t).forEach(l=>{l.conditions&&l.conditions.forEach(o=>{o.forEach(a=>{const[i,c]=a.source.split("."),u=t[i];if(u){const d=Ga(u,c),m=Ya(a,d,l,u,f=>nn(f,t,n));a._passes=m,r.current.set(a,m)}else a._passes=!1,r.current.set(a,!1)})})})},[t,n]),e.useMemo(()=>{const l={};return Object.entries(t).forEach(([o,a])=>{l[o]=nn(a,t,n)}),l},[t,n])}function Ja(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}function Ka(){return window.voxelFseCreatePost?.ajaxUrl?window.voxelFseCreatePost.ajaxUrl:window.Voxel_Config?.ajax_url?window.Voxel_Config.ajax_url:window.wpApiSettings?.root?`${window.wpApiSettings.root.replace(/\/wp-json\/?$/,"")}/?vx=1`:ht()}const Qa=({attributes:t,fieldsConfig:n,context:r,onSubmit:s,postId:l,postStatus:o,isAdminMode:a,postContext:i})=>{const[c,u]=e.useState({}),[d,m]=e.useState({processing:!1,done:!1,success:!1,message:""}),[f,p]=e.useState(0),[h,v]=e.useState([]),[k,x]=e.useState([]),_=e.useRef(null),C=e.useRef({}),D=h.reduce((O,P)=>(O[P.key]={...P,value:c[P.key]},O),{}),g=Xa(D,!0),S={ajaxUrl:Ka(),...window.voxelFseCreatePost||{}},A=t.postTypeKey||S?.postTypeKey||"",w=()=>{if(typeof window>"u")return 0;const P=new URLSearchParams(window.location.search).get("step");if(!P)return 0;if(P==="ui-step")return 1;const y=P.match(/^ui-step-(\d+)$/);return y?parseInt(y[1],10):0},E=O=>{if(typeof window>"u"||r!=="frontend"||a)return;const P=new URL(window.location.href);O===0?P.searchParams.delete("step"):O===1?P.searchParams.set("step","ui-step"):P.searchParams.set("step",`ui-step-${O}`),window.history.pushState({},"",P.toString())};e.useEffect(()=>{if(r==="frontend"&&k.length>0&&!a){const O=w();O>=0&&O<k.length&&p(O)}},[r,k.length,a]),e.useEffect(()=>{if(r!=="frontend"||k.length===0||a)return;const O=()=>{const P=w();P>=0&&P<k.length&&(p(P),window.scrollTo({top:0,behavior:"smooth"}))};return window.addEventListener("popstate",O),()=>window.removeEventListener("popstate",O)},[r,k.length]);const T=o||S?.postStatus||null,b=T&&T!=="draft";e.useEffect(()=>{if(n&&Array.isArray(n)&&n.length>0){const O=n.filter(H=>H.type==="ui-step"),P=n.filter(H=>H.type!=="ui-step");x(O),v(P);const y={};P.forEach(H=>{if(!(H.is_ui===1||H.is_ui===!0))if(H.type==="switcher")y[H.key]=H.value!==void 0?H.value:!1;else if(H.type==="multiselect"||H.type==="taxonomy")if(Array.isArray(H.value)){const Z={};H.value.forEach(V=>{Z[V]=!0}),y[H.key]=Z}else y[H.key]=H.value||{};else if(["file","image","profile-avatar","logo","cover-image","gallery"].includes(H.type)){const V=(Array.isArray(H.value)?H.value:[]).map(W=>{const K=W;return{source:K.source||"existing",id:K.id,name:K.name||"",type:K.type||"",preview:K.preview||K.url||""}});C.current[H.key]=V;const z=V.map(W=>({source:W.source,id:W.id,name:W.name,type:W.type,preview:W.preview}));y[H.key]=z}else y[H.key]=H.value||""}),u(y)}},[n,r]);const N=(O,P)=>P==null?!0:typeof P=="string"?P.trim()==="":Array.isArray(P)?P.length===0:O.type==="product"&&typeof P=="object"?!P.enabled:typeof P=="object"?Object.keys(P).length===0||!Object.values(P).some(y=>y===!0):typeof P=="boolean"?P===!1:!1,M=(O,P)=>{if(!Ja(P)||!P.enabled)return null;const y=P.product_type;if(!y)return null;const Z=(O.props?.product_types||{})[y];if(!Z||!Z.fields)return null;for(const V of Object.keys(Z.fields)){const z=Z.fields[V];if(!z||!(z.props?.required===!0||z.required===!0))continue;const K=V.replace(/-/g,"_"),$=P[V]||P[K];let B=!1;if(V==="base-price"||V==="base_price"?B=!$||$.amount===null||$.amount===void 0||$.amount==="":V==="stock"?B=!1:V==="shipping"?B=!$:B=$==null||$===""||typeof $=="object"&&Object.keys($).length===0,B)return{subFieldKey:V,error:`${z.label||V} is required`}}return null},F=(O,P)=>{const y=h.find(V=>V.key===O);if(y&&["file","image","profile-avatar","logo","cover-image","gallery"].includes(y.type)&&Array.isArray(P)){const V=P;C.current[O]=V;const z=V.map(W=>({source:W.source,id:W.id,name:W.name,type:W.type,preview:W.preview}));u(W=>({...W,[O]:z}))}else u(V=>({...V,[O]:P}));if(!y)return;const Z=[];if(y.required&&N(y,P))Z.push("Required");else{if(y.type==="email"&&P&&typeof P=="string"&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(P)||Z.push("You must provide a valid email address")),y.type==="url"&&P&&typeof P=="string")try{new URL(P)}catch{Z.push("You must provide a valid URL")}if(y.type==="number"&&P!==""&&P!==null&&P!==void 0){const V=typeof P=="string"?parseFloat(P):P;isNaN(V)||(y.props?.min!==void 0&&V<y.props.min&&Z.push(`Value cannot be less than ${y.props.min}`),y.props?.max!==void 0&&V>y.props.max&&Z.push(`Value cannot be more than ${y.props.max}`))}if((y.type==="texteditor"||y.type==="description")&&P&&typeof P=="string"){const V=y.props?.minlength;V!=null&&P.length<V&&Z.push(`Value cannot be shorter than ${V} characters`)}}y.validation=y.validation||{},y.validation.errors=Z,v([...h])},q=()=>{const O=j();let P=null;return O.forEach((y,H)=>{const Z=c[y.key],V=[];if(y.required&&N(y,Z)&&V.push("Required"),y.type==="product"&&V.length===0){const z=M(y,Z);z&&V.push(z.error)}if(y.type==="email"&&Z&&typeof Z=="string"&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Z)||V.push("You must provide a valid email address")),y.type==="url"&&Z&&typeof Z=="string")try{new URL(Z)}catch{V.push("You must provide a valid URL")}if(y.type==="number"&&Z!==""&&Z!==null&&Z!==void 0){const z=typeof Z=="string"?parseFloat(Z):Z;isNaN(z)||(y.props?.min!==void 0&&z<y.props.min&&V.push(`Value cannot be less than ${y.props.min}`),y.props?.max!==void 0&&z>y.props.max&&V.push(`Value cannot be more than ${y.props.max}`))}V.length>0&&P===null&&(P={field:y,index:H}),y.validation=y.validation||{},y.validation.errors=V}),O.length>0&&v([...h]),P},I=()=>{if(f<k.length-1){const O=q();if(O!==null){setTimeout(()=>{let y=document.querySelector(".ts-form-group.ts-has-errors");if(y||(y=document.querySelector(`.ts-form-group.field-key-${O.field.key}`)),y){y.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"});const H=y.querySelector("input, textarea, select");H&&H instanceof HTMLElement&&setTimeout(()=>{H.focus()},300)}},100);return}const P=f+1;p(P),E(P),window.scrollTo({top:0,behavior:"smooth"})}},L=()=>{if(f>0){const O=f-1;p(O),E(O),window.scrollTo({top:0,behavior:"smooth"})}},j=()=>{if(k.length===0)return h.filter(W=>g[W.key]!==!1);const O=n||[],P=k.map(W=>O.findIndex(K=>K.key===W.key));P.push(O.length);const y=P[f],H=P[f+1];return O.slice(y+1,H).filter(W=>W.type!=="ui-step").map(W=>h.find(K=>K.key===W.key)||W).filter(W=>g[W.key]!==!1)},Y=j(),J=k[f]||{label:"Form"},se=O=>{if(k.length<=1)return 0;const P=n||[],y=P.findIndex(Z=>Z.key===O);if(y===-1)return 0;const H=k.map(Z=>P.findIndex(V=>V.key===Z.key));H.push(P.length);for(let Z=0;Z<H.length-1;Z++){const V=H[Z],z=H[Z+1];if(y>V&&y<z)return Z}return 0},Q=()=>{const O={};if(h.forEach(y=>{const H=c[y.key];if(y.required&&N(y,H)&&(O[y.key]="Required"),y.type==="product"&&!O[y.key]){const Z=M(y,H);Z&&(O[y.key]=Z.error)}if(y.type==="email"&&H&&typeof H=="string"&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(H)||(O[y.key]="You must provide a valid email address")),y.type==="url"&&H&&typeof H=="string")try{new URL(H)}catch{O[y.key]="You must provide a valid URL"}}),Object.keys(O).length>0){const y=h.map(H=>({...H,validation:{errors:O[H.key]?[O[H.key]]:[]}}));return v(y),setTimeout(()=>{const H=Object.keys(O)[0],Z=se(H),V=k.length>1&&Z!==f;V&&(p(Z),E(Z),window.scrollTo({top:0,behavior:"instant"})),setTimeout(()=>{const z=document.querySelector(`.ts-form-group.field-key-${H}`);if(z){z.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"});const W=z.querySelector("input, textarea, select");W&&W instanceof HTMLElement&&setTimeout(()=>{W.focus()},300)}},V?300:100)},100),!1}const P=h.map(y=>({...y,validation:{errors:[]}}));return v(P),!0},R=async O=>{if(O&&"preventDefault"in O&&O.preventDefault(),!Q()){try{window.parent.postMessage("create-post:validation-failed","*")}catch(P){console.debug("postMessage failed (likely browser extension):",P)}return}m({...d,processing:!0});try{let P;if(s)P=await s(c);else{const y=a||t._admin_mode===!0,H={};Object.keys(c).forEach(U=>{const G=h.find(X=>X.key===U);G&&(G.is_ui===1||G.is_ui===!0)||(H[U]=c[U])});const Z=new FormData,V={},z={},W=new Set;Object.keys(H).forEach(U=>{let G=H[U];const X=h.find(ie=>ie.key===U);if(X&&X.type==="taxonomy"&&G&&typeof G=="object"&&!Array.isArray(G)){const ie=G;G=Object.keys(ie).filter(ne=>ie[ne]===!0)}if(X&&["file","image","profile-avatar","logo","cover-image","gallery"].includes(X.type)&&Array.isArray(G)){const ie=C.current[U]||[],ne=X.repeater_id?`files[${X.id}::row-${X.repeater_index}][]`:`files[${X.id}][]`;V[U]=[],ie.forEach(ae=>{if(ae.source==="new_upload"&&ae.file){const pe=JSON.stringify({name:ae.file.name,type:ae.file.type,size:ae.file.size,lastModified:ae.file.lastModified});W.has(pe)||(Z.append(ne,ae.file),W.add(pe),z[pe]=ne),V[U].push("uploaded_file")}else ae.source==="existing"&&ae.id&&V[U].push(ae.id)})}else V[U]=G}),Object.keys(z).length>0&&Z.append("_vx_file_aliases",JSON.stringify(z)),Z.append("postdata",JSON.stringify(V)),l&&l>0&&Z.append("post_id",l.toString());let K;if(y){const U=S.adminModeNonce||"",G=new URLSearchParams({action:"create_post__admin",post_type:A,post_id:(l||t._admin_post_id||"").toString(),admin_mode:U});K=`${S.ajaxUrl}&${G.toString()}`}else{const U=new URLSearchParams({action:"create_post",post_type:A});l&&l>0&&U.append("post_id",l.toString()),K=`${S.ajaxUrl}&${U.toString()}`}const $=await fetch(K,{method:"POST",body:Z,credentials:"same-origin",redirect:"manual"});if($.type==="opaqueredirect"||$.status>=300&&$.status<400)throw new Error("Server returned redirect. This should not happen with AJAX requests.");if(!$.ok)throw new Error(`HTTP error! status: ${$.status}`);const B=$.headers.get("content-type");if(!B||!B.includes("application/json"))throw new Error("Server returned non-JSON response. This might be a redirect or error page.");P=await $.json()}if(P.success){let y=P.edit_link,H=null;if(P.edit_link)try{H=new URL(P.edit_link,window.location.origin).searchParams.get("post_id")}catch{const V=P.edit_link.match(/[?&]post_id=(\d+)/);H=V?V[1]:null}if(H&&A&&(y=`${ht().replace("?vx=1","").replace(/\/$/,"")}/create-${A}/?post_id=${H}`),m({processing:!1,done:!0,success:!0,message:P.message||t.successMessage,viewLink:P.view_link,editLink:y,status:P.status}),a&&window.parent!==window)try{window.parent.postMessage("create-post:submitted","*")}catch(Z){console.debug("postMessage failed (likely browser extension):",Z)}requestAnimationFrame(()=>{window.scrollTo({top:0,behavior:"smooth"})}),t.redirectAfterSubmit&&!P.edit_link&&!P.view_link&&setTimeout(()=>{window.location.href=t.redirectAfterSubmit},500)}else{const y=P.errors&&Array.isArray(P.errors)?P.errors.join("<br>"):P.message||"Submission failed";m({processing:!1,done:!1,success:!1,message:y,errors:P.errors||[]}),requestAnimationFrame(()=>{window.scrollTo({top:0,behavior:"smooth"})}),window.Voxel?.alert&&window.Voxel.alert(y,"error")}}catch(P){console.error(`${r}: Form submission error`,P);const y="Network error. Please try again.";m({processing:!1,done:!1,success:!1,message:y,errors:[y]}),requestAnimationFrame(()=>{window.scrollTo({top:0,behavior:"smooth"})}),window.Voxel?.alert&&window.Voxel.alert(y,"error")}},oe=async()=>{m({...d,processing:!0});try{const O=new FormData;O.append("postdata",JSON.stringify(c)),O.append("save_as_draft","yes"),l&&O.append("post_id",l.toString());const P=`${S.ajaxUrl}&action=create_post&post_type=${A}${l?`&post_id=${l}`:""}`,H=await(await fetch(P,{method:"POST",body:O})).json();H.success?m({processing:!1,done:!0,success:!0,message:H.message||"Draft saved successfully!",editLink:H.edit_link}):m({processing:!1,done:!1,success:!1,message:H.message||"Failed to save draft"})}catch(O){console.error("Draft save error:",O),m({processing:!1,done:!1,success:!1,message:"Network error. Please try again."})}};e.useEffect(()=>{if(_.current&&(_.current.__vue_instance__={submit:R},_.current.voxelSubmit=R),window.voxelFseSubmit=R,window.parent!==window)try{window.parent.postMessage("create-post:mounted","*")}catch{}},[R,r]);const te={postTypeKey:t.postTypeKey||"",submitButtonText:t.submitButtonText||"Publish",successMessage:t.successMessage||"",redirectAfterSubmit:t.redirectAfterSubmit||"",showFormHead:t.showFormHead??!0,enableDraftSaving:t.enableDraftSaving??!0,icons:{popupIcon:t.popupIcon||null,infoIcon:t.infoIcon||null,tsMediaIco:t.tsMediaIco||null,nextIcon:t.nextIcon||null,prevIcon:t.prevIcon||null,downIcon:t.downIcon||null,trashIcon:t.trashIcon||null,draftIcon:t.draftIcon||null,publishIcon:t.publishIcon||null,saveIcon:t.saveIcon||null,successIcon:t.successIcon||null,viewIcon:t.viewIcon||null,tsCalendarIcon:t.tsCalendarIcon||null,tsCalminusIcon:t.tsCalminusIcon||null,tsAddIcon:t.tsAddIcon||null,tsEmailIcon:t.tsEmailIcon||null,tsPhoneIcon:t.tsPhoneIcon||null,tsLocationIcon:t.tsLocationIcon||null,tsMylocationIcon:t.tsMylocationIcon||null,tsMinusIcon:t.tsMinusIcon||null,tsPlusIcon:t.tsPlusIcon||null,tsListIcon:t.tsListIcon||null,tsSearchIcon:t.tsSearchIcon||null,tsClockIcon:t.tsClockIcon||null,tsLinkIcon:t.tsLinkIcon||null,tsRtimeslotIcon:t.tsRtimeslotIcon||null,tsUploadIco:t.tsUploadIco||null,tsLoadMore:t.tsLoadMore||null}};return React.createElement("div",{ref:_,className:"ts-form ts-create-post create-post-form"},React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(te)}}),d.done&&d.success?React.createElement("div",{className:"ts-edit-success flexify"},React.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z",fill:"currentColor"})),React.createElement("h4",null,d.message),React.createElement("div",{className:"es-buttons flexify"},d.status==="publish"&&d.viewLink&&React.createElement("a",{href:d.viewLink,className:"ts-btn ts-btn-2 ts-btn-large form-btn",target:"_blank",rel:"noopener noreferrer"},React.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z",fill:"currentColor"})),"View"),d.editLink&&React.createElement("a",{href:r==="editor"?"#":d.editLink,className:`ts-btn ts-btn-1 ts-btn-large form-btn ${r==="editor"?"disabled":""}`,onClick:r==="editor"?O=>O.preventDefault():void 0,style:r==="editor"?{pointerEvents:"none",opacity:.5}:void 0},React.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z",fill:"currentColor"})),"Back to Editing"))):React.createElement(React.Fragment,null,(t.showFormHead??!0)&&React.createElement("div",{className:"ts-form-progres"},k.length>1&&React.createElement("ul",{className:"step-percentage simplify-ul flexify"},k.map((O,P)=>React.createElement("li",{key:P,className:f>=P?"step-done":""}))),React.createElement("div",{className:"ts-active-step flexify"},React.createElement("div",{className:"active-step-details"},React.createElement("p",null,J.label||"Form")),React.createElement("div",{className:"step-nav flexify"},(t.enableDraftSaving??!0)&&!a&&(i?.canSaveDraft??!0)&&React.createElement("a",{href:"#",onClick:oe,className:`ts-icon-btn has-tooltip ts-save-draft ${d.processing?"vx-pending":""}`,"data-tooltip":"Save as draft","aria-label":"Save as draft"},Ie(t.draftIcon,Oe.draft)),k.length>1&&React.createElement(React.Fragment,null,React.createElement("a",{href:"#",onClick:O=>{O.preventDefault(),L()},className:`ts-icon-btn has-tooltip ${f===0?"disabled":""}`,"data-tooltip":"Previous step"},Ie(t.prevIcon,Oe.prev)),React.createElement("a",{href:"#",onClick:O=>{O.preventDefault(),I()},className:`ts-icon-btn has-tooltip ${f===k.length-1?"disabled":""}`,"data-tooltip":"Next step"},Ie(t.nextIcon,Oe.next)))))),React.createElement("div",{className:"create-form-step form-field-grid"},Y.map(O=>React.createElement(Cr,{key:O.key,field:O,value:c[O.key],onChange:P=>F(O.key,P),errors:O.validation?.errors||[],onBlur:()=>{},postTypeKey:A,icons:{tsCalendarIcon:t.tsCalendarIcon,tsClockIcon:t.tsClockIcon,tsMinusIcon:t.tsMinusIcon,tsPlusIcon:t.tsPlusIcon,tsEmailIcon:t.tsEmailIcon,tsPhoneIcon:t.tsPhoneIcon,tsLocationIcon:t.tsLocationIcon,tsMylocationIcon:t.tsMylocationIcon,tsSearchIcon:t.tsSearchIcon,tsListIcon:t.tsListIcon,tsLinkIcon:t.tsLinkIcon,tsAddIcon:t.tsAddIcon,tsUploadIco:t.tsUploadIco}}))),React.createElement("div",{className:"ts-form-footer flexify"},k.length>1&&React.createElement("ul",{className:"ts-nextprev simplify-ul flexify"},React.createElement("li",null,React.createElement("a",{href:"#",onClick:O=>{O.preventDefault(),L()},className:`ts-prev ts-btn ts-btn-1 ts-btn-large form-btn ${f===0?"disabled":""}`},Ie(t.prevIcon,Oe.prev),"Previous step")),React.createElement("li",null,React.createElement("a",{href:"#",onClick:O=>{O.preventDefault(),I()},className:`ts-next ts-btn ts-btn-1 ts-btn-large form-btn ${f===k.length-1?"disabled":""}`},"Next step",Ie(t.nextIcon,Oe.next)))),!S.isAdminMetabox&&React.createElement(React.Fragment,null,f===k.length-1&&(!l||T==="draft")&&React.createElement("a",{href:"#",className:`ts-btn ts-btn-2 form-btn ts-btn-large ts-save-changes ${d.processing?"vx-pending":""}`,onClick:O=>(O.preventDefault(),O.stopPropagation(),d.processing||R(O),!1),onMouseDown:O=>{d.processing&&O.preventDefault()}},d.processing?React.createElement("div",{className:"ts-loader-wrapper"},React.createElement("span",{className:"ts-loader"}),"Please wait..."):React.createElement(React.Fragment,null,t.submitButtonText||"Publish",React.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M14.5359 5.46986C14.3214 5.25526 13.9988 5.19101 13.7185 5.30707C13.4382 5.42312 13.2554 5.69663 13.2554 6.00002V11.2466L4 11.2466C3.58579 11.2466 3.25 11.5824 3.25 11.9966C3.25 12.4108 3.58579 12.7466 4 12.7466L13.2554 12.7466V18C13.2554 18.3034 13.4382 18.5769 13.7185 18.693C13.9988 18.809 14.3214 18.7448 14.5359 18.5302L20.5319 12.53C20.6786 12.3831 20.7518 12.1905 20.7514 11.9981L20.7514 11.9966C20.7514 11.7685 20.6495 11.5642 20.4888 11.4266L14.5359 5.46986Z",fill:"currentColor"})))),l&&b&&React.createElement("a",{href:"#",className:`ts-btn ts-btn-2 form-btn ts-btn-large ts-save-changes ${d.processing?"vx-pending":""}`,onClick:O=>(O.preventDefault(),O.stopPropagation(),d.processing||R(O),!1),onMouseDown:O=>{d.processing&&O.preventDefault()}},d.processing?React.createElement("div",{className:"ts-loader-wrapper"},React.createElement("span",{className:"ts-loader"}),"Please wait..."):React.createElement(React.Fragment,null,React.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M3.25 5.5C3.25 4.25736 4.25736 3.25 5.5 3.25H15.3809C15.977 3.25 16.5488 3.48658 16.9707 3.90779L20.0897 7.02197C20.5124 7.44403 20.7499 8.01685 20.7499 8.61418L20.7499 18.5C20.7499 19.7426 19.7425 20.75 18.4999 20.75H16.75V16.25C16.75 15.0074 15.7426 14 14.5 14L9.5 14C8.25736 14 7.25 15.0074 7.25 16.25L7.25001 20.75H5.5C4.25736 20.75 3.25 19.7426 3.25 18.5V5.5ZM8 6.25C7.58579 6.25 7.25 6.58579 7.25 7C7.25 7.41421 7.58579 7.75 8 7.75H12C12.4142 7.75 12.75 7.41421 12.75 7C12.75 6.58579 12.4142 6.25 12 6.25H8Z",fill:"currentColor"}),React.createElement("path",{d:"M8.75001 20.75L15.25 20.75V16.25C15.25 15.8358 14.9142 15.5 14.5 15.5L9.5 15.5C9.08579 15.5 8.75 15.8358 8.75 16.25L8.75001 20.75Z",fill:"currentColor"})),"Save changes"))))))};function Ra({context:t}){return React.createElement("div",{className:"ts-form ts-create-post"},React.createElement("div",{className:"ts-no-posts"},React.createElement("span",{className:"ts-icon-wrapper"},React.createElement("svg",{fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 52 52",width:"40",height:"40"},React.createElement("path",{d:"M26 5.85c11.13 0 20.15 9.02 20.15 20.15S37.13 46.15 26 46.15 5.85 37.13 5.85 26 14.87 5.85 26 5.85zM26 2C12.75 2 2 12.75 2 26s10.75 24 24 24 24-10.75 24-24S39.25 2 26 2z",fill:"currentColor"}),React.createElement("path",{d:"M26 17a2 2 0 00-2 2v10a2 2 0 104 0V19a2 2 0 00-2-2zm0 16a2 2 0 100 4 2 2 0 000-4z",fill:"currentColor"}))),React.createElement("p",null,t.noPermission.title)))}function Er(){return Ur()}async function $a(t,n=null,r=!1){const s=Er(),l=new URLSearchParams({post_type:t});n&&l.append("post_id",n.toString()),r&&l.append("is_admin_metabox","true");const o=`${s}voxel-fse/v1/create-post/fields-config?${l.toString()}`;try{const a={},i=window.wpApiSettings?.nonce;i&&(a["X-WP-Nonce"]=i);const c=await fetch(o,{credentials:"same-origin",headers:a});if(!c.ok){const d=await c.text();throw console.error("[Create Post DEBUG] fetchFieldsConfig - Error response:",d),new Error(`HTTP error! status: ${c.status}`)}return await c.json()}catch(a){return console.error("[Create Post DEBUG] fetchFieldsConfig - Caught error:",a),null}}async function ei(t,n=null){const r=Er(),s=new URLSearchParams({post_type:t});n&&s.append("post_id",n.toString());const l=`${r}voxel-fse/v1/create-post/post-context?${s.toString()}`;try{const o={},a=window.wpApiSettings?.nonce;a&&(o["X-WP-Nonce"]=a);const i=await fetch(l,{credentials:"same-origin",headers:o});return i.ok?await i.json():(console.error("[Create Post] fetchPostContext - Error status:",i.status),null)}catch(o){return console.error("[Create Post] fetchPostContext - Error:",o),null}}function re(t,n){if(!t)return n;try{return JSON.parse(t)}catch{return n}}function wr(t){return t==="true"}function ti(t){const n=t.dataset;return{postTypeKey:n.postType||"",submitButtonText:n.submitButtonText||"Publish",successMessage:n.successMessage||"",redirectAfterSubmit:n.redirectAfterSubmit||"",showFormHead:wr(n.showFormHead),enableDraftSaving:wr(n.enableDraftSaving),popupIcon:re(n.popupIcon,null),infoIcon:re(n.infoIcon,null),tsMediaIco:re(n.tsMediaIco,null),nextIcon:re(n.nextIcon,null),prevIcon:re(n.prevIcon,null),downIcon:re(n.downIcon,null),trashIcon:re(n.trashIcon,null),draftIcon:re(n.draftIcon,null),publishIcon:re(n.publishIcon,null),saveIcon:re(n.saveIcon,null),successIcon:re(n.successIcon,null),viewIcon:re(n.viewIcon,null),tsCalendarIcon:re(n.tsCalendarIcon,null),tsCalminusIcon:re(n.tsCalminusIcon,null),tsAddIcon:re(n.tsAddIcon,null),tsEmailIcon:re(n.tsEmailIcon,null),tsPhoneIcon:re(n.tsPhoneIcon,null),tsLocationIcon:re(n.tsLocationIcon,null),tsMylocationIcon:re(n.tsMylocationIcon,null),tsMinusIcon:re(n.tsMinusIcon,null),tsPlusIcon:re(n.tsPlusIcon,null),tsListIcon:re(n.tsListIcon,null),tsSearchIcon:re(n.tsSearchIcon,null),tsClockIcon:re(n.tsClockIcon,null),tsLinkIcon:re(n.tsLinkIcon,null),tsRtimeslotIcon:re(n.tsRtimeslotIcon,null),tsUploadIco:re(n.tsUploadIco,null),tsLoadMore:re(n.tsLoadMore,null)}}function ni(t){const n=(l,o)=>typeof l=="boolean"?l:l==="true"||l==="1"||l===1?!0:l==="false"||l==="0"||l===0?!1:o,r=l=>l&&typeof l=="object"?l:null,s=t.icons&&typeof t.icons=="object"?t.icons:{};return{postTypeKey:t.postTypeKey??t.post_type_key??t.post_type??"",submitButtonText:t.submitButtonText??t.submit_button_text??"Publish",successMessage:t.successMessage??t.success_message??"",redirectAfterSubmit:t.redirectAfterSubmit??t.redirect_after_submit??"",showFormHead:n(t.showFormHead??t.show_form_head,!0),enableDraftSaving:n(t.enableDraftSaving??t.enable_draft_saving,!0),popupIcon:r(s.popupIcon??s.popup_icon??t.popupIcon),infoIcon:r(s.infoIcon??s.info_icon??t.infoIcon),tsMediaIco:r(s.tsMediaIco??s.ts_media_ico??t.tsMediaIco),nextIcon:r(s.nextIcon??s.next_icon??t.nextIcon),prevIcon:r(s.prevIcon??s.prev_icon??t.prevIcon),downIcon:r(s.downIcon??s.down_icon??t.downIcon),trashIcon:r(s.trashIcon??s.trash_icon??t.trashIcon),draftIcon:r(s.draftIcon??s.draft_icon??t.draftIcon),publishIcon:r(s.publishIcon??s.publish_icon??t.publishIcon),saveIcon:r(s.saveIcon??s.save_icon??t.saveIcon),successIcon:r(s.successIcon??s.success_icon??t.successIcon),viewIcon:r(s.viewIcon??s.view_icon??t.viewIcon),tsCalendarIcon:r(s.tsCalendarIcon??s.ts_calendar_icon??t.tsCalendarIcon),tsCalminusIcon:r(s.tsCalminusIcon??s.ts_calminus_icon??t.tsCalminusIcon),tsAddIcon:r(s.tsAddIcon??s.ts_add_icon??t.tsAddIcon),tsEmailIcon:r(s.tsEmailIcon??s.ts_email_icon??t.tsEmailIcon),tsPhoneIcon:r(s.tsPhoneIcon??s.ts_phone_icon??t.tsPhoneIcon),tsLocationIcon:r(s.tsLocationIcon??s.ts_location_icon??t.tsLocationIcon),tsMylocationIcon:r(s.tsMylocationIcon??s.ts_mylocation_icon??t.tsMylocationIcon),tsMinusIcon:r(s.tsMinusIcon??s.ts_minus_icon??t.tsMinusIcon),tsPlusIcon:r(s.tsPlusIcon??s.ts_plus_icon??t.tsPlusIcon),tsListIcon:r(s.tsListIcon??s.ts_list_icon??t.tsListIcon),tsSearchIcon:r(s.tsSearchIcon??s.ts_search_icon??t.tsSearchIcon),tsClockIcon:r(s.tsClockIcon??s.ts_clock_icon??t.tsClockIcon),tsLinkIcon:r(s.tsLinkIcon??s.ts_link_icon??t.tsLinkIcon),tsRtimeslotIcon:r(s.tsRtimeslotIcon??s.ts_rtimeslot_icon??t.tsRtimeslotIcon),tsUploadIco:r(s.tsUploadIco??s.ts_upload_ico??t.tsUploadIco),tsLoadMore:r(s.tsLoadMore??s.ts_load_more??t.tsLoadMore)}}function ri(t){const n=t.querySelector("script.vxconfig");if(n&&n.textContent)try{const r=JSON.parse(n.textContent);return ni(r)}catch(r){console.error("[Create Post DEBUG] Failed to parse vxconfig:",r)}return ti(t)}function si(){if(typeof window>"u")return null;const n=new URLSearchParams(window.location.search).get("post_id");if(n){const r=parseInt(n,10);return isNaN(r)?null:r}return null}function li({attributes:t,isAdminMetabox:n=!1,inlineData:r}){const[s,l]=e.useState(r?.fieldsConfig?.fieldsConfig||[]),[o,a]=e.useState(r?.postContext||null),[i,c]=e.useState(!r),[u,d]=e.useState(null),m=si();return e.useEffect(()=>{if(r)return;let f=!1;async function p(){c(!0),d(null);try{const[h,v]=await Promise.all([ei(t.postTypeKey,m),$a(t.postTypeKey,m,n)]);if(f)return;h&&a(h),v?l(v.fieldsConfig):d("Failed to load form configuration")}catch(h){console.error("[Create Post] loadFormData error:",h),f||d(h instanceof Error?h.message:"Failed to load")}finally{f||c(!1)}}return p(),()=>{f=!0}},[r,t.postTypeKey,m,n]),i?React.createElement("div",{className:"ts-form ts-create-post"},React.createElement("div",{className:"ts-no-posts"},React.createElement("span",{className:"ts-loader","aria-label":"Loading form..."}))):u?React.createElement("div",{className:"ts-form ts-create-post voxel-fse-error"},React.createElement("div",{className:"error-placeholder",style:{textAlign:"center",padding:"40px",color:"#d32f2f"}},React.createElement("p",null,"Error loading form: ",u))):o&&!o.hasPermission?React.createElement(Ra,{context:o}):s.length===0?React.createElement("div",{className:"ts-form ts-create-post voxel-fse-empty"},React.createElement("div",{className:"empty-placeholder",style:{textAlign:"center",padding:"40px",color:"#666"}},React.createElement("p",null,"No fields configured for this post type."))):React.createElement(Qa,{attributes:t,fieldsConfig:s,context:"frontend",postId:o?.postId??null,postStatus:o?.postStatus??null,isAdminMode:n,postContext:o})}function Dt(){const t=document.querySelectorAll(".voxel-fse-create-post-frontend:not([data-react-mounted])");document.querySelectorAll(".ts-form").forEach((r,s)=>{}),t.forEach(r=>{r.setAttribute("data-react-mounted","true");const s=ri(r),l=r.dataset.adminMode==="1",o=r.querySelector("script.vxconfig-hydrate");let a=null;if(o?.textContent)try{a=JSON.parse(o.textContent)}catch{}r.innerHTML="",kr.createRoot(r).render(React.createElement(li,{attributes:s,isAdminMetabox:l,inlineData:a}))})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Dt):Dt(),window.addEventListener("turbo:load",Dt),window.addEventListener("pjax:complete",Dt)})(ReactDOM,React,ReactDOM);
