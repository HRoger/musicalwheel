(function(){"use strict";function D(r){const t=r.querySelectorAll(".voxel-fse-slideshow-slide");if(t.length<2)return;const n={duration:parseInt(r.dataset.duration||"5000",10),transition:r.dataset.transition||"fade",transitionDuration:parseInt(r.dataset.transitionDuration||"500",10),kenBurns:r.dataset.kenBurns==="true",infinite:r.dataset.infinite!=="false"};let i=0,u=n.infinite,l=null;const o={isDragging:!1,startX:0,startY:0,currentX:0,currentY:0},m=50;n.kenBurns&&t.forEach((e,a)=>{e.style.animation=`kenBurns ${n.duration+n.transitionDuration}ms ease-in-out infinite`,e.style.animationDelay=`${a*n.duration}ms`});function g(e,a){if(e===i||e<0||e>=t.length)return;const s=i;i=e,a||(a=e>s?"next":"prev"),n.transition==="fade"?(t[s].style.opacity="0",t[i].style.opacity="1"):n.transition==="slide_left"?a==="next"?(t[s].style.transform="translateX(-100%)",t[s].style.opacity="0",t[i].style.transform="translateX(0)",t[i].style.opacity="1",setTimeout(()=>{t[s].style.transform="translateX(100%)"},n.transitionDuration)):(t[s].style.transform="translateX(100%)",t[s].style.opacity="0",t[i].style.transform="translateX(0)",t[i].style.opacity="1",setTimeout(()=>{t[s].style.transform="translateX(100%)"},n.transitionDuration)):n.transition==="slide_right"?a==="next"?(t[s].style.transform="translateX(100%)",t[s].style.opacity="0",t[i].style.transform="translateX(0)",t[i].style.opacity="1",setTimeout(()=>{t[s].style.transform="translateX(-100%)"},n.transitionDuration)):(t[s].style.transform="translateX(-100%)",t[s].style.opacity="0",t[i].style.transform="translateX(0)",t[i].style.opacity="1",setTimeout(()=>{t[s].style.transform="translateX(-100%)"},n.transitionDuration)):n.transition==="slide_up"?a==="next"?(t[s].style.transform="translateY(-100%)",t[s].style.opacity="0",t[i].style.transform="translateY(0)",t[i].style.opacity="1",setTimeout(()=>{t[s].style.transform="translateY(100%)"},n.transitionDuration)):(t[s].style.transform="translateY(100%)",t[s].style.opacity="0",t[i].style.transform="translateY(0)",t[i].style.opacity="1",setTimeout(()=>{t[s].style.transform="translateY(100%)"},n.transitionDuration)):n.transition==="slide_down"&&(a==="next"?(t[s].style.transform="translateY(100%)",t[s].style.opacity="0",t[i].style.transform="translateY(0)",t[i].style.opacity="1",setTimeout(()=>{t[s].style.transform="translateY(-100%)"},n.transitionDuration)):(t[s].style.transform="translateY(-100%)",t[s].style.opacity="0",t[i].style.transform="translateY(0)",t[i].style.opacity="1",setTimeout(()=>{t[s].style.transform="translateY(-100%)"},n.transitionDuration)))}function f(){let e=i+1;if(e>=t.length)if(n.infinite)e=0;else{u=!1;return}g(e,"next")}function h(){let e=i-1;if(e<0)if(n.infinite)e=t.length-1;else return;g(e,"prev")}function p(e,a){o.isDragging=!0,o.startX=e,o.startY=a,o.currentX=e,o.currentY=a,l&&(clearInterval(l),l=null),r.style.cursor="grabbing"}function v(e,a){o.isDragging&&(o.currentX=e,o.currentY=a)}function c(){if(!o.isDragging)return;o.isDragging=!1,r.style.cursor="grab";const e=o.currentX-o.startX,a=o.currentY-o.startY;n.transition==="slide_left"||n.transition==="slide_right"||n.transition==="fade"?Math.abs(e)>m&&(e<0?f():h()):Math.abs(a)>m&&(a<0?f():h()),n.infinite&&u&&(l=setInterval(()=>{u&&f()},n.duration))}function X(e){e.button===0&&(e.preventDefault(),p(e.clientX,e.clientY))}function Y(e){o.isDragging&&(e.preventDefault(),v(e.clientX,e.clientY))}function x(e){c()}function E(e){o.isDragging&&c()}function S(e){if(e.touches.length!==1)return;const a=e.touches[0];p(a.clientX,a.clientY)}function T(e){if(!o.isDragging||e.touches.length!==1)return;const a=e.touches[0];v(a.clientX,a.clientY)}function L(e){c()}t.forEach((e,a)=>{e.style.transition=`opacity ${n.transitionDuration}ms ease, transform ${n.transitionDuration}ms ease`,a!==0&&(e.style.opacity="0",n.transition==="slide_left"?e.style.transform="translateX(100%)":n.transition==="slide_right"?e.style.transform="translateX(-100%)":n.transition==="slide_up"?e.style.transform="translateY(100%)":n.transition==="slide_down"&&(e.style.transform="translateY(-100%)"))}),r.style.cursor="grab",r.addEventListener("mousedown",X),document.addEventListener("mousemove",Y),document.addEventListener("mouseup",x),r.addEventListener("mouseleave",E),r.addEventListener("touchstart",S,{passive:!0}),r.addEventListener("touchmove",T,{passive:!0}),r.addEventListener("touchend",L,{passive:!0}),n.infinite&&(l=setInterval(()=>{u&&f()},n.duration))}function y(){console.log("[Flex Container] initAllSlideshows called");const r=document.querySelectorAll(".voxel-fse-slideshow-background");console.log("[Flex Container] Found slideshows:",r.length),r.forEach((t,n)=>{console.log(`[Flex Container] Initializing slideshow ${n}`,t),D(t)})}function d(){if(document.getElementById("voxel-fse-ken-burns-styles"))return;const r=document.createElement("style");r.id="voxel-fse-ken-burns-styles",r.textContent=`
		@keyframes kenBurns {
			0% {
				transform: scale(1) translate(0, 0);
			}
			50% {
				transform: scale(1.1) translate(-2%, -2%);
			}
			100% {
				transform: scale(1) translate(0, 0);
			}
		}
	`,document.head.appendChild(r)}console.log("[Flex Container] Frontend script loaded, readyState:",document.readyState),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{console.log("[Flex Container] DOMContentLoaded fired"),d(),y()}):(console.log("[Flex Container] DOM already loaded, initializing immediately"),d(),y())})();
