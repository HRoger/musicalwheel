(function(){"use strict";function X(i){const t=i.querySelectorAll(".voxel-fse-slideshow-slide");if(t.length<2)return;const n={duration:parseInt(i.dataset.duration||"5000",10),transition:i.dataset.transition||"fade",transitionDuration:parseInt(i.dataset.transitionDuration||"500",10),kenBurns:i.dataset.kenBurns==="true",infinite:i.dataset.infinite!=="false"};let a=0,l=n.infinite,u=null;const o={isDragging:!1,startX:0,startY:0,currentX:0,currentY:0},f=50;n.kenBurns&&t.forEach((e,r)=>{e.style.animation=`kenBurns ${n.duration+n.transitionDuration}ms ease-in-out infinite`,e.style.animationDelay=`${r*n.duration}ms`});function h(e,r){if(e===a||e<0||e>=t.length)return;const s=a;a=e,r||(r=e>s?"next":"prev"),n.transition==="fade"?(t[s].style.opacity="0",t[a].style.opacity="1"):n.transition==="slide_left"?r==="next"?(t[s].style.transform="translateX(-100%)",t[s].style.opacity="0",t[a].style.transform="translateX(0)",t[a].style.opacity="1",setTimeout(()=>{t[s].style.transform="translateX(100%)"},n.transitionDuration)):(t[s].style.transform="translateX(100%)",t[s].style.opacity="0",t[a].style.transform="translateX(0)",t[a].style.opacity="1",setTimeout(()=>{t[s].style.transform="translateX(100%)"},n.transitionDuration)):n.transition==="slide_right"?r==="next"?(t[s].style.transform="translateX(100%)",t[s].style.opacity="0",t[a].style.transform="translateX(0)",t[a].style.opacity="1",setTimeout(()=>{t[s].style.transform="translateX(-100%)"},n.transitionDuration)):(t[s].style.transform="translateX(-100%)",t[s].style.opacity="0",t[a].style.transform="translateX(0)",t[a].style.opacity="1",setTimeout(()=>{t[s].style.transform="translateX(-100%)"},n.transitionDuration)):n.transition==="slide_up"?r==="next"?(t[s].style.transform="translateY(-100%)",t[s].style.opacity="0",t[a].style.transform="translateY(0)",t[a].style.opacity="1",setTimeout(()=>{t[s].style.transform="translateY(100%)"},n.transitionDuration)):(t[s].style.transform="translateY(100%)",t[s].style.opacity="0",t[a].style.transform="translateY(0)",t[a].style.opacity="1",setTimeout(()=>{t[s].style.transform="translateY(100%)"},n.transitionDuration)):n.transition==="slide_down"&&(r==="next"?(t[s].style.transform="translateY(100%)",t[s].style.opacity="0",t[a].style.transform="translateY(0)",t[a].style.opacity="1",setTimeout(()=>{t[s].style.transform="translateY(-100%)"},n.transitionDuration)):(t[s].style.transform="translateY(-100%)",t[s].style.opacity="0",t[a].style.transform="translateY(0)",t[a].style.opacity="1",setTimeout(()=>{t[s].style.transform="translateY(-100%)"},n.transitionDuration)))}function c(){let e=a+1;if(e>=t.length)if(n.infinite)e=0;else{l=!1;return}h(e,"next")}function p(){let e=a-1;if(e<0)if(n.infinite)e=t.length-1;else return;h(e,"prev")}function v(e,r){o.isDragging=!0,o.startX=e,o.startY=r,o.currentX=e,o.currentY=r,u&&(clearInterval(u),u=null),i.style.cursor="grabbing"}function D(e,r){o.isDragging&&(o.currentX=e,o.currentY=r)}function d(){if(!o.isDragging)return;o.isDragging=!1,i.style.cursor="grab";const e=o.currentX-o.startX,r=o.currentY-o.startY;n.transition==="slide_left"||n.transition==="slide_right"||n.transition==="fade"?Math.abs(e)>f&&(e<0?c():p()):Math.abs(r)>f&&(r<0?c():p()),n.infinite&&l&&(u=setInterval(()=>{l&&c()},n.duration))}function Y(e){e.button===0&&(e.preventDefault(),v(e.clientX,e.clientY))}function x(e){o.isDragging&&(e.preventDefault(),D(e.clientX,e.clientY))}function E(e){d()}function S(e){o.isDragging&&d()}function T(e){if(e.touches.length!==1)return;const r=e.touches[0];v(r.clientX,r.clientY)}function b(e){if(!o.isDragging||e.touches.length!==1)return;const r=e.touches[0];D(r.clientX,r.clientY)}function L(e){d()}t.forEach((e,r)=>{e.style.transition=`opacity ${n.transitionDuration}ms ease, transform ${n.transitionDuration}ms ease`,r!==0&&(e.style.opacity="0",n.transition==="slide_left"?e.style.transform="translateX(100%)":n.transition==="slide_right"?e.style.transform="translateX(-100%)":n.transition==="slide_up"?e.style.transform="translateY(100%)":n.transition==="slide_down"&&(e.style.transform="translateY(-100%)"))}),i.style.cursor="grab",i.addEventListener("mousedown",Y),document.addEventListener("mousemove",x),document.addEventListener("mouseup",E),i.addEventListener("mouseleave",S),i.addEventListener("touchstart",T,{passive:!0}),i.addEventListener("touchmove",b,{passive:!0}),i.addEventListener("touchend",L,{passive:!0}),n.infinite&&(u=setInterval(()=>{l&&c()},n.duration))}function y(){console.log("[Flex Container] initAllSlideshows called");const i=document.querySelectorAll(".voxel-fse-slideshow-background");console.log("[Flex Container] Found slideshows:",i.length),i.forEach((t,n)=>{console.log(`[Flex Container] Initializing slideshow ${n}`,t),X(t)})}function m(){if(document.getElementById("voxel-fse-ken-burns-styles"))return;const i=document.createElement("style");i.id="voxel-fse-ken-burns-styles",i.textContent=`
		@keyframes kenBurns {
			0% {
				transform: scale(1) translate(0, 0);
			}
			50% {
				transform: scale(1.1) translate(-2%, -2%);
			}
			100% {
				transform: scale(1) translate(0, 0);
			}
		}
	`,document.head.appendChild(i)}function g(){const i=document.querySelectorAll(".voxel-fse-flex-container[data-animation]");if(!i.length)return;const t=new IntersectionObserver(n=>{n.forEach(a=>{if(a.isIntersecting){const l=a.target,u=l.dataset.animation,o=l.dataset.animationDuration,f=l.dataset.animationDelay;if(!u)return;f&&parseFloat(f)>0&&(l.style.animationDelay=`${f}ms`),o&&l.classList.add(`animated-${o}`),l.classList.add("animated",u),t.unobserve(l)}})},{threshold:.1});i.forEach(n=>{n.style.opacity="0",t.observe(n)})}console.log("[Flex Container] Frontend script loaded, readyState:",document.readyState),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{console.log("[Flex Container] DOMContentLoaded fired"),m(),y(),g()}):(console.log("[Flex Container] DOM already loaded, initializing immediately"),m(),y(),g())})();
