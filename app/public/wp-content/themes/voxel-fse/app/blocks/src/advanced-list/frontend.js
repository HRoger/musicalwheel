(function(H,f){"use strict";const P={id:"",actionType:"none",text:"Action",icon:null,enableTooltip:!1,tooltipText:"",link:null,scrollToId:"",additionId:"",calStartDate:"",calEndDate:"",calTitle:"",calDescription:"",calLocation:"",calUrl:"",cartOptsText:"Select options",cartOptsEnableTooltip:!1,cartOptsTooltipText:"",cartOptsIcon:null,activeText:"Action",activeIcon:null,activeEnableTooltip:!1,activeTooltipText:"",customStyle:!1,customIconColor:"",customIconColorActive:"",loopSource:"",loopProperty:"",loopLimit:"",loopOffset:"",rowVisibility:"show",visibilityRules:[]},G=["action_follow_post","action_follow","edit_post","delete_post","unpublish_post","publish_post","show_post_on_map","share_post","view_post_stats","add_to_cart","promote_post","select_addition","action_gcal","action_ical","action_save","direct_message","direct_message_user","relist_post","switch_listing_plan"],F=["action_follow","action_follow_post","select_addition","promote_post","action_save"],J=[{type:"facebook",label:"Facebook",icon:'<i class="fab fa-facebook"></i>'},{type:"twitter",label:"Twitter",icon:'<i class="fab fa-twitter"></i>'},{type:"linkedin",label:"LinkedIn",icon:'<i class="fab fa-linkedin"></i>'},{type:"pinterest",label:"Pinterest",icon:'<i class="fab fa-pinterest"></i>'},{type:"whatsapp",label:"WhatsApp",icon:'<i class="fab fa-whatsapp"></i>'},{type:"email",label:"Email",icon:'<i class="las la-envelope"></i>'},{type:"copy",label:"Copy link",icon:'<i class="las la-link"></i>'}];function M(o,t,l){const a=encodeURIComponent(t),i=encodeURIComponent(l);switch(o){case"facebook":return`https://www.facebook.com/sharer/sharer.php?u=${i}`;case"twitter":return`https://twitter.com/intent/tweet?text=${a}&url=${i}`;case"linkedin":return`https://www.linkedin.com/shareArticle?mini=true&url=${i}&title=${a}`;case"pinterest":return`https://pinterest.com/pin/create/button/?url=${i}&description=${a}`;case"whatsapp":return`https://wa.me/?text=${a}%20${i}`;case"email":return`mailto:?subject=${a}&body=${i}`;case"copy":return"#";default:return"#"}}function V({editSteps:o,icon:t,text:l,closeIcon:a,onClose:i,isOpen:c,targetRef:d}){const _=f.useRef(null);return f.useEffect(()=>{if(!c)return;const u=m=>{_.current&&!_.current.contains(m.target)&&d.current&&!d.current.contains(m.target)&&i()};return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[c,i,d]),c?React.createElement("div",{ref:_,className:"ts-popup ts-popup--edit-steps"},React.createElement("div",{className:"ts-popup-head ts-sticky-top flexify hide-d"},React.createElement("div",{className:"ts-popup-name flexify"},C(t),React.createElement("span",null,"Edit")),React.createElement("ul",{className:"flexify simplify-ul"},React.createElement("li",{className:"flexify ts-popup-close"},React.createElement("a",{role:"button",href:"#",className:"ts-icon-btn",onClick:u=>{u.preventDefault(),i()}},C(a))))),React.createElement("div",{className:"ts-term-dropdown ts-md-group"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list min-scroll"},o.map(u=>React.createElement("li",{key:u.key},React.createElement("a",{href:u.link,className:"flexify"},React.createElement("span",null,u.label))))))):null}function q({title:o,link:t,icon:l,closeIcon:a,onClose:i,isOpen:c,targetRef:d}){const _=f.useRef(null),[u,m]=f.useState(!1);f.useEffect(()=>{if(!c)return;const s=w=>{_.current&&!_.current.contains(w.target)&&d.current&&!d.current.contains(w.target)&&i()};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[c,i,d]);const b=async(s,w)=>{if(s.type==="copy"){w.preventDefault();try{await navigator.clipboard.writeText(t),m(!0),setTimeout(()=>m(!1),2e3)}catch{const y=document.createElement("textarea");y.value=t,document.body.appendChild(y),y.select(),document.execCommand("copy"),document.body.removeChild(y),m(!0),setTimeout(()=>m(!1),2e3)}return}};if(!c)return null;const v=J.map(s=>({...s,link:M(s.type,o,t)}));return React.createElement("div",{ref:_,className:"ts-popup ts-popup--share"},React.createElement("div",{className:"ts-popup-head ts-sticky-top flexify hide-d"},React.createElement("div",{className:"ts-popup-name flexify"},C(l),React.createElement("span",null,"Share post")),React.createElement("ul",{className:"flexify simplify-ul"},React.createElement("li",{className:"flexify ts-popup-close"},React.createElement("a",{role:"button",href:"#",className:"ts-icon-btn",onClick:s=>{s.preventDefault(),i()}},C(a))))),React.createElement("div",{className:"ts-term-dropdown ts-md-group"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list min-scroll ts-social-share"},v.map(s=>React.createElement("li",{key:s.type,className:`ts-share-${s.type}`},React.createElement("a",{href:s.link,target:s.type!=="copy"&&s.type!=="email"?"_blank":void 0,className:"flexify",rel:"nofollow",onClick:w=>b(s,w)},React.createElement("div",{className:"ts-term-icon"},React.createElement("span",{dangerouslySetInnerHTML:{__html:s.icon}})),React.createElement("span",null,s.type==="copy"&&u?"Copied!":s.label)))))))}function C(o){return!o||!o.value?null:o.library==="svg"||o.value.startsWith("<svg")?React.createElement("span",{dangerouslySetInnerHTML:{__html:o.value}}):o.library==="fa-solid"||o.library==="fa-regular"||o.library==="fa-brands"?React.createElement("i",{className:o.value}):o.value?React.createElement("i",{className:o.value}):null}function X(o){const t={};return o.enableCssGrid?(t.display="grid",o.gridColumns&&(t.gridTemplateColumns=`repeat(${o.gridColumns}, minmax(0, 1fr))`)):o.listJustify&&(t.justifyContent=o.listJustify),o.itemGap&&(t.gap=`${o.itemGap}${o.itemGapUnit||"px"}`),t}function Y(o){const t={};o.itemJustifyContent&&(t.justifyContent=o.itemJustifyContent),o.itemHeight&&(t.height=`${o.itemHeight}${o.itemHeightUnit||"px"}`);const l=o.itemPadding;if(l&&(l.top||l.right||l.bottom||l.left)){const i=o.itemPaddingUnit||"px";t.padding=`${l.top||0}${i} ${l.right||0}${i} ${l.bottom||0}${i} ${l.left||0}${i}`}if(o.itemBorderType&&o.itemBorderType!=="none"){t.borderStyle=o.itemBorderType,o.itemBorderColor&&(t.borderColor=o.itemBorderColor);const i=o.itemBorderWidth;if(i){const c=o.itemBorderWidthUnit||"px";t.borderWidth=`${i.top||1}${c} ${i.right||1}${c} ${i.bottom||1}${c} ${i.left||1}${c}`}}o.itemBorderRadius&&(t.borderRadius=`${o.itemBorderRadius}${o.itemBorderRadiusUnit||"px"}`),o.itemTextColor&&(t.color=o.itemTextColor),o.itemBackgroundColor&&(t.background=o.itemBackgroundColor);const a=o.itemBoxShadow;return a&&(a.horizontal||a.vertical||a.blur||a.spread)&&(t.boxShadow=`${a.horizontal}px ${a.vertical}px ${a.blur}px ${a.spread}px ${a.color||"rgba(0,0,0,0.1)"}`),o.iconTextSpacing&&(t.gap=`${o.iconTextSpacing}${o.iconTextSpacingUnit||"px"}`),o.iconOnTop&&(t.flexDirection="column"),t}function K(o){const t={};if(o.iconContainerSize){const l=`${o.iconContainerSize}${o.iconContainerSizeUnit||"px"}`;t.width=l,t.height=l}return o.iconContainerBackground&&(t.background=o.iconContainerBackground),o.iconContainerBorderRadius&&(t.borderRadius=`${o.iconContainerBorderRadius}${o.iconContainerBorderRadiusUnit||"px"}`),o.iconSize&&(t["--ts-icon-size"]=`${o.iconSize}${o.iconSizeUnit||"px"}`),o.iconColor&&(t["--ts-icon-color"]=o.iconColor),t}function Q(o){return!o.enableCssGrid&&o.itemWidth==="custom"&&o.customItemWidth?{width:`${o.customItemWidth}${o.customItemWidthUnit||"px"}`}:{}}function Z({item:o,index:t,attributes:l,context:a,postContext:i}){const[c,d]=f.useState(!1),[_,u]=f.useState(!1),m=f.useRef(null),b=G.includes(o.actionType),v=F.includes(o.actionType),s=f.useMemo(()=>a==="editor"?!0:!(!(o.visibilityRules&&o.visibilityRules.length>0)&&o.rowVisibility==="hide"||b&&!i||o.actionType==="edit_post"&&i&&!i.isEditable),[a,b,i,o.actionType,o.rowVisibility,o.visibilityRules]);if(!f.useMemo(()=>a==="editor"?!0:s?o.actionType==="delete_post"?i?.permissions?.delete??!1:o.actionType==="publish_post"?(i?.permissions?.publish??!1)&&i?.status==="unpublished":o.actionType==="unpublish_post"?(i?.permissions?.publish??!1)&&i?.status==="publish":o.actionType==="add_to_cart"?i?.product?.isEnabled??!1:o.actionType==="show_post_on_map"?i?.location?.mapLink!=null:o.actionType==="view_post_stats"?i?.postStatsLink!=null:o.actionType==="promote_post"?i?.promote?.isPromotable??!1:o.actionType==="action_follow"?i?.authorId!=null:!0:!1,[a,s,o.actionType,i]))return null;const k=Y(l),y=K(l),B=Q(l);o.customStyle&&o.customIconColor&&(y["--ts-icon-color"]=o.customIconColor);const x=o.enableTooltip?o.tooltipText:void 0,E=f.useMemo(()=>!v||!i?!1:o.actionType==="action_follow_post"?i.isFollowed:o.actionType==="action_follow"?i.isAuthorFollowed:o.actionType==="promote_post"?i.promote?.isActive??!1:!1,[v,i,o.actionType]),r=f.useMemo(()=>i?o.actionType==="action_follow_post"?i.isFollowRequested:o.actionType==="action_follow"?i.isAuthorFollowRequested:!1:!1,[i,o.actionType]),e=(p,W={})=>{if(!i)return"#";const U=new URLSearchParams;U.set("vx","1"),U.set("action",p),Object.entries(W).forEach(([po,uo])=>U.set(po,String(uo)));const O={"user.posts.delete_post":i.nonces?.delete_post||"","user.posts.republish_post":i.nonces?.modify_post||"","user.posts.unpublish_post":i.nonces?.modify_post||"","user.follow_post":i.nonces?.follow||"","user.follow_user":i.nonces?.follow||""};return O[p]&&U.set("_wpnonce",O[p]),`${window.wpApiSettings?.root||"/"}?${U.toString()}`},A=f.useCallback(()=>{if(!i&&a==="frontend"&&b)return{tag:"div"};switch(o.actionType){case"action_link":return{tag:"a",href:o.link?.url||"#",target:o.link?.isExternal?"_blank":void 0,rel:o.link?.nofollow?"nofollow":void 0};case"delete_post":return i?{tag:"a",href:e("user.posts.delete_post",{post_id:i.postId}),className:"ts-action-con","vx-action":"",rel:"nofollow","data-confirm":i.confirmMessages?.delete||"Are you sure?"}:{tag:"div"};case"publish_post":return i?{tag:"a",href:e("user.posts.republish_post",{post_id:i.postId}),className:"ts-action-con","vx-action":"",rel:"nofollow"}:{tag:"div"};case"unpublish_post":return i?{tag:"a",href:e("user.posts.unpublish_post",{post_id:i.postId}),className:"ts-action-con","vx-action":"",rel:"nofollow"}:{tag:"div"};case"add_to_cart":return i?i.product?.oneClick?{tag:"a",href:"#",target:"_blank",rel:"nofollow","data-product-id":i.product.productId,onClick:p=>{typeof window.Voxel<"u"&&window.Voxel.addToCartAction&&window.Voxel.addToCartAction(p,p.currentTarget)}}:{tag:"a",href:i.postLink}:{tag:"div"};case"select_addition":return{tag:"a",href:"#",role:"button",className:"ts-action-con ts-use-addition","data-id":o.additionId,onClick:p=>{p.preventDefault()}};case"action_follow_post":return i?{tag:"a",href:e("user.follow_post",{post_id:i.postId}),rel:"nofollow",role:"button"}:{tag:"div"};case"action_follow":return i?{tag:"a",href:e("user.follow_user",{user_id:i.authorId||0}),rel:"nofollow",role:"button"}:{tag:"div"};case"show_post_on_map":return i?.location?.mapLink?{tag:"a",href:i.location.mapLink,rel:"nofollow",className:"ts-action-con ts-action-show-on-map","data-post-id":i.postId}:{tag:"div"};case"view_post_stats":return i?.postStatsLink?{tag:"a",href:i.postStatsLink,rel:"nofollow"}:{tag:"div"};case"promote_post":if(i?.promote?.isPromotable){if(i.promote.isActive&&i.promote.orderLink)return{tag:"a",href:i.promote.orderLink,rel:"nofollow"};if(i.promote.promoteLink)return{tag:"a",href:i.promote.promoteLink,rel:"nofollow",role:"button"}}return{tag:"div"};case"back_to_top":return{tag:"a",href:"#",onClick:p=>{p.preventDefault(),typeof window<"u"&&window.scrollTo({top:0,behavior:"smooth"})}};case"go_back":return{tag:"a",href:"javascript:history.back();"};case"scroll_to_section":return{tag:"a",href:"#",onClick:p=>{if(p.preventDefault(),typeof window<"u"&&o.scrollToId){const W=document.getElementById(o.scrollToId);W&&W.scrollIntoView({behavior:"smooth"})}}};case"edit_post":return i?.editLink?i.editSteps&&i.editSteps.length>1?{tag:"a",href:"#",ref:m,role:"button",onClick:p=>{p.preventDefault(),d(!0)}}:{tag:"a",href:i.editLink}:{tag:"div"};case"share_post":return{tag:"a",href:"#",ref:m,role:"button",onClick:p=>{p.preventDefault(),u(!0)}};default:return{tag:"div"}}},[o,i,a,b])(),z=A.tag,N=()=>v&&E&&o.activeText?React.createElement(React.Fragment,null,React.createElement("span",{className:"ts-initial",style:{display:"none"}},React.createElement("div",{className:"ts-action-icon",style:y},C(o.icon)),o.text),React.createElement("span",{className:"ts-reveal"},React.createElement("div",{className:"ts-action-icon",style:y},C(o.activeIcon)),o.activeText)):React.createElement(React.Fragment,null,React.createElement("div",{className:"ts-action-icon",style:y},C(o.icon)),o.text),$=[`vxfse-repeater-item-${o.id||t}`,"flexify","ts-action"].join(" "),j=[A.className||"ts-action-con",["action_follow_post","action_follow"].includes(o.actionType)?"ts-action-follow":"",E?"active":"",r?"intermediate":""].filter(Boolean).join(" "),so=["action_follow_post","action_follow"].includes(o.actionType),R={};so?(o.enableTooltip&&o.tooltipText&&(R["tooltip-inactive"]=o.tooltipText),o.activeEnableTooltip&&o.activeTooltipText&&(R["tooltip-active"]=o.activeTooltipText)):x&&(R["data-tooltip"]=x);const D=o.actionType==="edit_post"&&i?.editSteps&&i.editSteps.length>1,L=o.actionType==="share_post";if(D||L){const p=L?"ts-action-wrap ts-share-post":"ts-action-wrap ts-popup-component";return React.createElement("li",{className:$,style:B,...R},React.createElement("div",{className:p},React.createElement(z,{...A,className:j,style:k,"aria-label":o.text||x,role:z==="a"?void 0:"button"},N()),D&&i&&React.createElement(V,{editSteps:i.editSteps,icon:o.icon,text:o.text,closeIcon:l.closeIcon,isOpen:c,onClose:()=>d(!1),targetRef:m}),L&&i&&React.createElement(q,{title:i.postTitle,link:i.postLink,icon:o.icon,closeIcon:l.closeIcon,isOpen:_,onClose:()=>u(!1),targetRef:m})))}return React.createElement("li",{className:$,style:B,...R},React.createElement(z,{...A,className:j,style:k,"aria-label":o.text||x,role:z==="a"?void 0:"button"},N()))}function oo({attributes:o,context:t,postContext:l}){const a=X(o),i=f.useMemo(()=>({items:o.items,icons:{closeIcon:o.closeIcon?.value?o.closeIcon:null,messageIcon:o.messageIcon?.value?o.messageIcon:null,linkIcon:o.linkIcon?.value?o.linkIcon:null,shareIcon:o.shareIcon?.value?o.shareIcon:null},list:{enableCssGrid:o.enableCssGrid,gridColumns:o.gridColumns,itemWidth:o.itemWidth,customItemWidth:o.customItemWidth,customItemWidthUnit:o.customItemWidthUnit,listJustify:o.listJustify,itemGap:o.itemGap,itemGapUnit:o.itemGapUnit},itemStyle:{justifyContent:o.itemJustifyContent,padding:o.itemPadding,paddingUnit:o.itemPaddingUnit,height:o.itemHeight,heightUnit:o.itemHeightUnit,borderType:o.itemBorderType,borderWidth:o.itemBorderWidth,borderWidthUnit:o.itemBorderWidthUnit,borderColor:o.itemBorderColor,borderRadius:o.itemBorderRadius,borderRadiusUnit:o.itemBorderRadiusUnit,boxShadow:o.itemBoxShadow,typography:o.itemTypography,textColor:o.itemTextColor,backgroundColor:o.itemBackgroundColor},iconContainer:{background:o.iconContainerBackground,size:o.iconContainerSize,sizeUnit:o.iconContainerSizeUnit,borderType:o.iconContainerBorderType,borderWidth:o.iconContainerBorderWidth,borderWidthUnit:o.iconContainerBorderWidthUnit,borderColor:o.iconContainerBorderColor,borderRadius:o.iconContainerBorderRadius,borderRadiusUnit:o.iconContainerBorderRadiusUnit,boxShadow:o.iconContainerBoxShadow,textSpacing:o.iconTextSpacing,textSpacingUnit:o.iconTextSpacingUnit},icon:{onTop:o.iconOnTop,size:o.iconSize,sizeUnit:o.iconSizeUnit,color:o.iconColor},hoverStyle:{boxShadow:o.itemBoxShadowHover,borderColor:o.itemBorderColorHover,textColor:o.itemTextColorHover,backgroundColor:o.itemBackgroundColorHover,iconContainerBackground:o.iconContainerBackgroundHover,iconContainerBorderColor:o.iconContainerBorderColorHover,iconColor:o.iconColorHover},activeStyle:{boxShadow:o.itemBoxShadowActive,textColor:o.itemTextColorActive,backgroundColor:o.itemBackgroundColorActive,borderColor:o.itemBorderColorActive,iconContainerBackground:o.iconContainerBackgroundActive,iconContainerBorderColor:o.iconContainerBorderColorActive,iconColor:o.iconColorActive},tooltip:{bottom:o.tooltipBottom,textColor:o.tooltipTextColor,typography:o.tooltipTypography,backgroundColor:o.tooltipBackgroundColor,borderRadius:o.tooltipBorderRadius,borderRadiusUnit:o.tooltipBorderRadiusUnit}}),[o]);return!o.items||o.items.length===0?React.createElement("ul",{className:"flexify simplify-ul ts-advanced-list voxel-fse-empty"},React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(i)}}),React.createElement("li",{className:"flexify ts-action"},React.createElement("div",{className:"ts-action-con",style:{padding:"16px 24px",color:"#666",background:"#f5f5f5",borderRadius:"8px"}},t==="editor"?'Click "+ Add Item" in the sidebar to add actions':"No actions configured"))):React.createElement("ul",{className:"flexify simplify-ul ts-advanced-list",style:a},React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(i)}}),o.items.map((c,d)=>React.createElement(Z,{key:c.id||d,item:c,index:d,attributes:o,context:t,postContext:l})))}function eo(){if(typeof window<"u"&&window.wpApiSettings?.root)return window.wpApiSettings.root;if(typeof document<"u"){const o=document.querySelector('link[rel="https://api.w.org/"]');if(o){const t=o.getAttribute("href");if(t)return t}}if(typeof window<"u"&&window.location?.origin){const o=window.location.pathname.split("/").filter(Boolean),t=["wp-admin","wp-content","wp-includes","wp-json"];return o.length>0&&!t.includes(o[0])?window.location.origin+"/"+o[0]+"/wp-json/":window.location.origin+"/wp-json/"}return"/wp-json/"}const S={top:"",right:"",bottom:"",left:""},g={horizontal:0,vertical:0,blur:0,spread:0,color:"rgba(0,0,0,0.1)"},T={},h={library:"",value:""};function to(o){const t=(r,e)=>typeof r=="string"?r:typeof r=="number"?String(r):e,l=(r,e)=>{if(typeof r=="number")return r;if(typeof r=="string"){const n=parseFloat(r);if(!isNaN(n))return n}return e},a=(r,e)=>typeof r=="boolean"?r:r==="yes"||r==="true"||r==="1"||r===1?!0:r===""||r==="no"||r==="false"||r==="0"||r===0?!1:e,i=r=>{if(!r||typeof r!="object")return null;const e=r;return!e.library&&!e.value?null:{library:t(e.library,""),value:t(e.value,"")}},c=r=>{if(!r||typeof r!="object")return S;const e=r;return{top:t(e.top,""),right:t(e.right,""),bottom:t(e.bottom,""),left:t(e.left,"")}},d=r=>{if(!r||typeof r!="object")return g;const e=r;return{horizontal:l(e.horizontal,0),vertical:l(e.vertical,0),blur:l(e.blur,0),spread:l(e.spread,0),color:t(e.color,"rgba(0,0,0,0.1)")}},_=r=>{if(!r||typeof r!="object")return T;const e=r;return{fontFamily:e.fontFamily!==void 0?t(e.fontFamily??e.font_family,""):void 0,fontSize:e.fontSize!==void 0?l(e.fontSize??e.font_size,14):void 0,fontSizeUnit:e.fontSizeUnit!==void 0?t(e.fontSizeUnit??e.font_size_unit,"px"):void 0,fontWeight:e.fontWeight!==void 0?t(e.fontWeight??e.font_weight,""):void 0,textTransform:e.textTransform!==void 0?t(e.textTransform??e.text_transform,""):void 0,fontStyle:e.fontStyle!==void 0?t(e.fontStyle??e.font_style,""):void 0,textDecoration:e.textDecoration!==void 0?t(e.textDecoration??e.text_decoration,""):void 0,lineHeight:e.lineHeight!==void 0?l(e.lineHeight??e.line_height,1.5):void 0,lineHeightUnit:e.lineHeightUnit!==void 0?t(e.lineHeightUnit??e.line_height_unit,"em"):void 0,letterSpacing:e.letterSpacing!==void 0?l(e.letterSpacing??e.letter_spacing,0):void 0,letterSpacingUnit:e.letterSpacingUnit!==void 0?t(e.letterSpacingUnit??e.letter_spacing_unit,"px"):void 0}},u=r=>{if(!r||typeof r!="object")return null;const e=r;return{url:t(e.url,""),isExternal:a(e.isExternal??e.is_external,!1),nofollow:a(e.nofollow,!1)}},m=r=>{if(!r||typeof r!="object")return{...P,id:crypto.randomUUID?.()||String(Date.now())};const e=r;return{id:t(e.id??e._id,crypto.randomUUID?.()||String(Date.now())),actionType:t(e.actionType??e.ts_action_type,"none"),text:t(e.text??e.ts_acw_initial_text,"Action"),icon:i(e.icon??e.ts_acw_initial_icon),enableTooltip:a(e.enableTooltip??e.ts_enable_tooltip,!1),tooltipText:t(e.tooltipText??e.ts_tooltip_text,""),link:u(e.link??e.ts_action_link),scrollToId:t(e.scrollToId??e.ts_scroll_to,""),additionId:t(e.additionId??e.ts_addition_id,""),calStartDate:t(e.calStartDate??e.ts_action_cal_start_date,""),calEndDate:t(e.calEndDate??e.ts_action_cal_end_date,""),calTitle:t(e.calTitle??e.ts_action_cal_title,""),calDescription:t(e.calDescription??e.ts_action_cal_desc,""),calLocation:t(e.calLocation??e.ts_action_cal_location,""),calUrl:t(e.calUrl??e.ts_action_cal_url,""),cartOptsText:t(e.cartOptsText??e.ts_cart_opts_text,"Select options"),cartOptsEnableTooltip:a(e.cartOptsEnableTooltip??e.ts_cart_opts_enable_tooltip,!1),cartOptsTooltipText:t(e.cartOptsTooltipText??e.ts_cart_opts_tooltip_text,""),cartOptsIcon:i(e.cartOptsIcon??e.ts_cart_opts_icon),activeText:t(e.activeText??e.ts_acw_reveal_text,"Action"),activeIcon:i(e.activeIcon??e.ts_acw_reveal_icon),activeEnableTooltip:a(e.activeEnableTooltip??e.ts_acw_enable_tooltip,!1),activeTooltipText:t(e.activeTooltipText??e.ts_acw_tooltip_text,""),customStyle:a(e.customStyle??e.ts_acw_custom_style,!1),customIconColor:t(e.customIconColor??e.ts_acw_icon_color_custom,""),customIconColorActive:t(e.customIconColorActive??e.ts_acw_icon_color_a_custom,""),loopSource:t(e.loopSource,""),loopProperty:t(e.loopProperty,""),loopLimit:t(e.loopLimit,""),loopOffset:t(e.loopOffset,""),rowVisibility:t(e.rowVisibility,"show"),visibilityRules:Array.isArray(e.visibilityRules)?e.visibilityRules:[]}},b=r=>r?Array.isArray(r)?r.map(m):typeof r=="object"?Object.values(r).map(m):[]:[],v=r=>{const e={closeIcon:h,messageIcon:h,linkIcon:h,shareIcon:h};if(!r||typeof r!="object")return e;const n=r;return{closeIcon:i(n.closeIcon??n.ts_close_ico)||h,messageIcon:i(n.messageIcon??n.ts_message_ico)||h,linkIcon:i(n.linkIcon??n.ts_link_ico)||h,shareIcon:i(n.shareIcon??n.ts_share_ico)||h}},s=r=>{const e={enableCssGrid:!1,gridColumns:3,itemWidth:"auto",customItemWidth:100,customItemWidthUnit:"px",listJustify:"left",itemGap:10,itemGapUnit:"px"};if(!r||typeof r!="object")return e;const n=r;return{enableCssGrid:a(n.enableCssGrid??n.csgrid_action_on,!1),gridColumns:l(n.gridColumns??n.ts_cgrid_columns,3),itemWidth:t(n.itemWidth??n.ts_al_columns_no,"auto"),customItemWidth:l(n.customItemWidth??n.ts_al_columns_cstm,100),customItemWidthUnit:t(n.customItemWidthUnit,"px"),listJustify:t(n.listJustify??n.ts_al_justify,"left"),itemGap:l(n.itemGap??n.ts_cgrid_gap,10),itemGapUnit:t(n.itemGapUnit,"px")}},w=r=>{const e={justifyContent:"flex-start",padding:S,paddingUnit:"px",height:48,heightUnit:"px",borderType:"none",borderWidth:S,borderWidthUnit:"px",borderColor:"",borderRadius:0,borderRadiusUnit:"px",boxShadow:g,typography:T,textColor:"",backgroundColor:""};if(!r||typeof r!="object")return e;const n=r;return{justifyContent:t(n.justifyContent??n.ts_al_align,"flex-start"),padding:c(n.padding??n.ts_action_padding),paddingUnit:t(n.paddingUnit,"px"),height:l(n.height??n.ts_acw_height,48),heightUnit:t(n.heightUnit,"px"),borderType:t(n.borderType??n.ts_acw_border,"none"),borderWidth:c(n.borderWidth),borderWidthUnit:t(n.borderWidthUnit,"px"),borderColor:t(n.borderColor,""),borderRadius:l(n.borderRadius??n.ts_acw_border_radius,0),borderRadiusUnit:t(n.borderRadiusUnit,"px"),boxShadow:d(n.boxShadow??n.ts_acw_border_shadow),typography:_(n.typography??n.ts_acw_typography),textColor:t(n.textColor??n.ts_acw_initial_color,""),backgroundColor:t(n.backgroundColor??n.ts_acw_initial_bg,"")}},k=r=>{const e={background:"",size:36,sizeUnit:"px",borderType:"solid",borderWidth:S,borderWidthUnit:"px",borderColor:"",borderRadius:50,borderRadiusUnit:"px",boxShadow:g,textSpacing:0,textSpacingUnit:"px"};if(!r||typeof r!="object")return e;const n=r;return{background:t(n.background??n.ts_acw_icon_con_bg,""),size:l(n.size??n.ts_acw_icon_con_size,36),sizeUnit:t(n.sizeUnit,"px"),borderType:t(n.borderType??n.ts_acw_icon_con_border,"solid"),borderWidth:c(n.borderWidth),borderWidthUnit:t(n.borderWidthUnit,"px"),borderColor:t(n.borderColor,""),borderRadius:l(n.borderRadius??n.ts_acw_icon_con_radius,50),borderRadiusUnit:t(n.borderRadiusUnit,"px"),boxShadow:d(n.boxShadow??n.ts_acw_con_shadow),textSpacing:l(n.textSpacing??n.ts_acw_icon_margin,0),textSpacingUnit:t(n.textSpacingUnit,"px")}},y=r=>{const e={onTop:!1,size:18,sizeUnit:"px",color:""};if(!r||typeof r!="object")return e;const n=r;return{onTop:a(n.onTop??n.ts_acw_icon_orient,!1),size:l(n.size??n.ts_acw_icon_size,18),sizeUnit:t(n.sizeUnit,"px"),color:t(n.color??n.ts_acw_icon_color,"")}},B=r=>{const e={boxShadow:g,borderColor:"",textColor:"",backgroundColor:"",iconContainerBackground:"",iconContainerBorderColor:"",iconColor:""};if(!r||typeof r!="object")return e;const n=r;return{boxShadow:d(n.boxShadow??n.ts_acw_border_shadow_h),borderColor:t(n.borderColor??n.ts_acw_border_h,""),textColor:t(n.textColor??n.ts_acw_initial_color_h,""),backgroundColor:t(n.backgroundColor??n.ts_acw_initial_bg_h,""),iconContainerBackground:t(n.iconContainerBackground??n.ts_acw_icon_con_bg_h,""),iconContainerBorderColor:t(n.iconContainerBorderColor??n.ts_acw_icon_con_bord_h,""),iconColor:t(n.iconColor??n.ts_acw_icon_color_h,"")}},x=r=>{const e={boxShadow:g,textColor:"",backgroundColor:"",borderColor:"",iconContainerBackground:"",iconContainerBorderColor:"",iconColor:""};if(!r||typeof r!="object")return e;const n=r;return{boxShadow:d(n.boxShadow??n.ts_acw_border_shadow_a),textColor:t(n.textColor??n.ts_acw_initial_color_a,""),backgroundColor:t(n.backgroundColor??n.ts_acw_initial_bg_a,""),borderColor:t(n.borderColor??n.ts_acw_initial_border_a,""),iconContainerBackground:t(n.iconContainerBackground??n.ts_acw_icon_con_bg_a,""),iconContainerBorderColor:t(n.iconContainerBorderColor??n.ts_acw_icon_con_bord_a,""),iconColor:t(n.iconColor??n.ts_acw_icon_color_a,"")}},E=r=>{const e={bottom:!1,textColor:"",typography:T,backgroundColor:"",borderRadius:0,borderRadiusUnit:"px"};if(!r||typeof r!="object")return e;const n=r;return{bottom:a(n.bottom??n.tooltip_bottom,!1),textColor:t(n.textColor??n.ts_tooltip_color,""),typography:_(n.typography??n.ts_tooltip_typo),backgroundColor:t(n.backgroundColor??n.ts_tooltip_bg,""),borderRadius:l(n.borderRadius??n.ts_tooltip_radius,0),borderRadiusUnit:t(n.borderRadiusUnit,"px")}};return{items:b(o.items??o.ts_actions),icons:v(o.icons),list:s(o.list),itemStyle:w(o.itemStyle??o.item_style),iconContainer:k(o.iconContainer??o.icon_container),icon:y(o.icon),hoverStyle:B(o.hoverStyle??o.hover_style),activeStyle:x(o.activeStyle??o.active_style),tooltip:E(o.tooltip)}}function no(o){const t=o.querySelector("script.vxconfig");if(!t?.textContent)return console.error("[Advanced List] No vxconfig found"),null;try{const l=JSON.parse(t.textContent);return to(l)}catch(l){return console.error("[Advanced List] Failed to parse vxconfig:",l),null}}function io(o){return{items:o.items||[],closeIcon:o.icons?.closeIcon||h,messageIcon:o.icons?.messageIcon||h,linkIcon:o.icons?.linkIcon||h,shareIcon:o.icons?.shareIcon||h,enableCssGrid:o.list?.enableCssGrid||!1,gridColumns:o.list?.gridColumns||3,itemWidth:o.list?.itemWidth||"auto",customItemWidth:o.list?.customItemWidth||100,customItemWidthUnit:o.list?.customItemWidthUnit||"px",listJustify:o.list?.listJustify||"left",itemGap:o.list?.itemGap||10,itemGapUnit:o.list?.itemGapUnit||"px",itemJustifyContent:o.itemStyle?.justifyContent||"flex-start",itemPadding:o.itemStyle?.padding||S,itemPaddingUnit:o.itemStyle?.paddingUnit||"px",itemHeight:o.itemStyle?.height||48,itemHeightUnit:o.itemStyle?.heightUnit||"px",itemBorderType:o.itemStyle?.borderType||"none",itemBorderWidth:o.itemStyle?.borderWidth||S,itemBorderWidthUnit:o.itemStyle?.borderWidthUnit||"px",itemBorderColor:o.itemStyle?.borderColor||"",itemBorderRadius:o.itemStyle?.borderRadius||0,itemBorderRadiusUnit:o.itemStyle?.borderRadiusUnit||"px",itemBoxShadow:o.itemStyle?.boxShadow||g,itemTypography:o.itemStyle?.typography||T,itemTextColor:o.itemStyle?.textColor||"",itemBackgroundColor:o.itemStyle?.backgroundColor||"",iconContainerBackground:o.iconContainer?.background||"",iconContainerSize:o.iconContainer?.size||36,iconContainerSizeUnit:o.iconContainer?.sizeUnit||"px",iconContainerBorderType:o.iconContainer?.borderType||"solid",iconContainerBorderWidth:o.iconContainer?.borderWidth||S,iconContainerBorderWidthUnit:o.iconContainer?.borderWidthUnit||"px",iconContainerBorderColor:o.iconContainer?.borderColor||"",iconContainerBorderRadius:o.iconContainer?.borderRadius||50,iconContainerBorderRadiusUnit:o.iconContainer?.borderRadiusUnit||"px",iconContainerBoxShadow:o.iconContainer?.boxShadow||g,iconTextSpacing:o.iconContainer?.textSpacing||0,iconTextSpacingUnit:o.iconContainer?.textSpacingUnit||"px",iconOnTop:o.icon?.onTop||!1,iconSize:o.icon?.size||18,iconSizeUnit:o.icon?.sizeUnit||"px",iconColor:o.icon?.color||"",itemBoxShadowHover:o.hoverStyle?.boxShadow||g,itemBorderColorHover:o.hoverStyle?.borderColor||"",itemTextColorHover:o.hoverStyle?.textColor||"",itemBackgroundColorHover:o.hoverStyle?.backgroundColor||"",iconContainerBackgroundHover:o.hoverStyle?.iconContainerBackground||"",iconContainerBorderColorHover:o.hoverStyle?.iconContainerBorderColor||"",iconColorHover:o.hoverStyle?.iconColor||"",itemBoxShadowActive:o.activeStyle?.boxShadow||g,itemTextColorActive:o.activeStyle?.textColor||"",itemBackgroundColorActive:o.activeStyle?.backgroundColor||"",itemBorderColorActive:o.activeStyle?.borderColor||"",iconContainerBackgroundActive:o.activeStyle?.iconContainerBackground||"",iconContainerBorderColorActive:o.activeStyle?.iconContainerBorderColor||"",iconColorActive:o.activeStyle?.iconColor||"",tooltipBottom:o.tooltip?.bottom||!1,tooltipTextColor:o.tooltip?.textColor||"",tooltipTypography:o.tooltip?.typography||T,tooltipBackgroundColor:o.tooltip?.backgroundColor||"",tooltipBorderRadius:o.tooltip?.borderRadius||0,tooltipBorderRadiusUnit:o.tooltip?.borderRadiusUnit||"px"}}function ro(){return window.voxelFseAdvancedList?.restUrl?window.voxelFseAdvancedList.restUrl:eo()}async function lo(){const o=document.querySelector('meta[name="vx-post-id"]'),t=o?.content?parseInt(o.content,10):null;if(!t)return null;try{const l=ro(),a=await fetch(`${l}voxel-fse/v1/advanced-list/post-context?post_id=${t}`);return a.ok?await a.json():(console.warn("[Advanced List] Failed to fetch post context"),null)}catch(l){return console.warn("[Advanced List] Error fetching post context:",l),null}}function ao(o){const t=["action_follow_post","action_follow","edit_post","delete_post","unpublish_post","publish_post","show_post_on_map","share_post","view_post_stats","add_to_cart","promote_post","select_addition","action_gcal","action_ical"];return o.some(l=>t.includes(l.actionType))}function co({attributes:o,postContext:t}){return React.createElement(oo,{attributes:o,context:"frontend",postContext:t})}async function I(){const o=document.querySelectorAll(".voxel-fse-advanced-list-frontend:not([data-react-mounted])");if(o.length===0)return;let t=null;const l=[];o.forEach(i=>{const c=no(i);c&&l.push({container:i,config:c})}),l.some(({config:i})=>ao(i.items))&&(t=await lo());for(const{container:i,config:c}of l){i.setAttribute("data-react-mounted","true");const d=io(c);i.innerHTML="",H.createRoot(i).render(React.createElement(co,{attributes:d,postContext:t}))}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",I):I(),window.addEventListener("turbo:load",I),window.addEventListener("pjax:complete",I)})(ReactDOM,React);
