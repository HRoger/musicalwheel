(function(H,_){"use strict";const P={id:"",actionType:"none",text:"Action",icon:null,enableTooltip:!1,tooltipText:"",link:null,scrollToId:"",additionId:"",calStartDate:"",calEndDate:"",calTitle:"",calDescription:"",calLocation:"",calUrl:"",cartOptsText:"Select options",cartOptsEnableTooltip:!1,cartOptsTooltipText:"",cartOptsIcon:null,activeText:"Action",activeIcon:null,activeEnableTooltip:!1,activeTooltipText:"",customStyle:!1,customIconColor:"",customIconColorActive:"",loopSource:"",loopProperty:"",loopLimit:"",loopOffset:"",rowVisibility:"show",visibilityRules:[]},G=["action_follow_post","action_follow","edit_post","delete_post","unpublish_post","publish_post","show_post_on_map","share_post","view_post_stats","add_to_cart","promote_post","select_addition","action_gcal","action_ical","action_save","direct_message","direct_message_user","relist_post","switch_listing_plan"],V=["action_follow","action_follow_post","select_addition","promote_post","action_save"],F=[{type:"facebook",label:"Facebook",icon:'<i class="fab fa-facebook"></i>'},{type:"twitter",label:"Twitter",icon:'<i class="fab fa-twitter"></i>'},{type:"linkedin",label:"LinkedIn",icon:'<i class="fab fa-linkedin"></i>'},{type:"pinterest",label:"Pinterest",icon:'<i class="fab fa-pinterest"></i>'},{type:"whatsapp",label:"WhatsApp",icon:'<i class="fab fa-whatsapp"></i>'},{type:"email",label:"Email",icon:'<i class="las la-envelope"></i>'},{type:"copy",label:"Copy link",icon:'<i class="las la-link"></i>'}];function M(o,e,a){const l=encodeURIComponent(e),n=encodeURIComponent(a);switch(o){case"facebook":return`https://www.facebook.com/sharer/sharer.php?u=${n}`;case"twitter":return`https://twitter.com/intent/tweet?text=${l}&url=${n}`;case"linkedin":return`https://www.linkedin.com/shareArticle?mini=true&url=${n}&title=${l}`;case"pinterest":return`https://pinterest.com/pin/create/button/?url=${n}&description=${l}`;case"whatsapp":return`https://wa.me/?text=${l}%20${n}`;case"email":return`mailto:?subject=${l}&body=${n}`;case"copy":return"#";default:return"#"}}function J(o){const e=o.start?new Date(o.start):null;if(!e||isNaN(e.getTime()))return null;let a=o.end?new Date(o.end):null;(!a||isNaN(a.getTime())||a<e)&&(a=e);const l=c=>c.toISOString().replace(/[-:]/g,"").split(".")[0],n=new URLSearchParams({action:"TEMPLATE",trp:"true",text:o.title||"",dates:`${l(e)}/${l(a)}`});if(o.description){const c=o.description.replace(/<[^>]*>/g,"");n.set("details",c)}return o.location&&n.set("location",o.location),o.timezone&&n.set("ctz",o.timezone),`https://calendar.google.com/calendar/render?${n.toString()}`}function q(o){const e=o.start?new Date(o.start):null;if(!e||isNaN(e.getTime()))return null;let a=o.end?new Date(o.end):null;(!a||isNaN(a.getTime())||a<e)&&(a=e);const l=h=>h.toISOString().replace(/[-:]/g,"").split(".")[0],n=l(e),c=l(a),p=(o.title||"event").replace(/[^\w\s-]/g,""),m=(o.description||"").replace(/<[^>]*>/g,"").replace(/\r\n|\r|\n/g,"\\n").replace(/&nbsp;/g,""),f=(o.location||"").replace(/[^\w\s,-]/g,""),u=o.url||"",w=l(new Date),b=`${window.location.origin}/?ics_uid=${btoa(JSON.stringify([p,n,c,u])).slice(0,20)}`,s=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//hacksw/handcal//NONSGML v1.0//EN","CALSCALE:GREGORIAN","BEGIN:VEVENT",`LOCATION:${f}`,`DESCRIPTION:${m}`,`DTSTART:${n}`,`DTEND:${c}`,`SUMMARY:${p}`,`URL;VALUE=URI:${u}`,`DTSTAMP:${w}`,`UID:${b}`,"END:VEVENT","END:VCALENDAR"].join(`\r
`),g=`data:text/calendar;base64,${btoa(s)}`,x=`${p||"event"}.ics`;return{dataUrl:g,filename:x}}function Y({editSteps:o,icon:e,text:a,closeIcon:l,onClose:n,isOpen:c,targetRef:p}){const m=_.useRef(null);return _.useEffect(()=>{if(!c)return;const f=u=>{m.current&&!m.current.contains(u.target)&&p.current&&!p.current.contains(u.target)&&n()};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[c,n,p]),c?React.createElement("div",{ref:m,className:"ts-popup ts-popup--edit-steps"},React.createElement("div",{className:"ts-popup-head ts-sticky-top flexify hide-d"},React.createElement("div",{className:"ts-popup-name flexify"},T(e),React.createElement("span",null,"Edit")),React.createElement("ul",{className:"flexify simplify-ul"},React.createElement("li",{className:"flexify ts-popup-close"},React.createElement("a",{role:"button",href:"#",className:"ts-icon-btn",onClick:f=>{f.preventDefault(),n()}},T(l))))),React.createElement("div",{className:"ts-term-dropdown ts-md-group"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list min-scroll"},o.map(f=>React.createElement("li",{key:f.key},React.createElement("a",{href:f.link,className:"flexify"},React.createElement("span",null,f.label))))))):null}function X({title:o,link:e,icon:a,closeIcon:l,onClose:n,isOpen:c,targetRef:p}){const m=_.useRef(null),[f,u]=_.useState(!1);_.useEffect(()=>{if(!c)return;const s=g=>{m.current&&!m.current.contains(g.target)&&p.current&&!p.current.contains(g.target)&&n()};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[c,n,p]);const w=async(s,g)=>{if(s.type==="copy"){g.preventDefault();try{await navigator.clipboard.writeText(e),u(!0),setTimeout(()=>u(!1),2e3)}catch{const h=document.createElement("textarea");h.value=e,document.body.appendChild(h),h.select(),document.execCommand("copy"),document.body.removeChild(h),u(!0),setTimeout(()=>u(!1),2e3)}return}};if(!c)return null;const b=F.map(s=>({...s,link:M(s.type,o,e)}));return React.createElement("div",{ref:m,className:"ts-popup ts-popup--share"},React.createElement("div",{className:"ts-popup-head ts-sticky-top flexify hide-d"},React.createElement("div",{className:"ts-popup-name flexify"},T(a),React.createElement("span",null,"Share post")),React.createElement("ul",{className:"flexify simplify-ul"},React.createElement("li",{className:"flexify ts-popup-close"},React.createElement("a",{role:"button",href:"#",className:"ts-icon-btn",onClick:s=>{s.preventDefault(),n()}},T(l))))),React.createElement("div",{className:"ts-term-dropdown ts-md-group"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list min-scroll ts-social-share"},b.map(s=>React.createElement("li",{key:s.type,className:`ts-share-${s.type}`},React.createElement("a",{href:s.link,target:s.type!=="copy"&&s.type!=="email"?"_blank":void 0,className:"flexify",rel:"nofollow",onClick:g=>w(s,g)},React.createElement("div",{className:"ts-term-icon"},React.createElement("span",{dangerouslySetInnerHTML:{__html:s.icon}})),React.createElement("span",null,s.type==="copy"&&f?"Copied!":s.label)))))))}function T(o){return!o||!o.value?null:o.library==="svg"||o.value.startsWith("<svg")?React.createElement("span",{dangerouslySetInnerHTML:{__html:o.value}}):o.library==="fa-solid"||o.library==="fa-regular"||o.library==="fa-brands"?React.createElement("i",{className:o.value}):o.value?React.createElement("i",{className:o.value}):null}function K(o){const e={};return o.enableCssGrid?(e.display="grid",o.gridColumns&&(e.gridTemplateColumns=`repeat(${o.gridColumns}, minmax(0, 1fr))`)):o.listJustify&&(e.justifyContent=o.listJustify),o.itemGap&&(e.gap=`${o.itemGap}${o.itemGapUnit||"px"}`),e}function Q(o){const e={};o.itemJustifyContent&&(e.justifyContent=o.itemJustifyContent),o.itemHeight&&(e.height=`${o.itemHeight}${o.itemHeightUnit||"px"}`);const a=o.itemPadding;if(a&&(a.top||a.right||a.bottom||a.left)){const n=o.itemPaddingUnit||"px";e.padding=`${a.top||0}${n} ${a.right||0}${n} ${a.bottom||0}${n} ${a.left||0}${n}`}if(o.itemBorderType&&o.itemBorderType!=="none"){e.borderStyle=o.itemBorderType,o.itemBorderColor&&(e.borderColor=o.itemBorderColor);const n=o.itemBorderWidth;if(n){const c=o.itemBorderWidthUnit||"px";e.borderWidth=`${n.top||1}${c} ${n.right||1}${c} ${n.bottom||1}${c} ${n.left||1}${c}`}}o.itemBorderRadius&&(e.borderRadius=`${o.itemBorderRadius}${o.itemBorderRadiusUnit||"px"}`),o.itemTextColor&&(e.color=o.itemTextColor),o.itemBackgroundColor&&(e.background=o.itemBackgroundColor);const l=o.itemBoxShadow;return l&&(l.horizontal||l.vertical||l.blur||l.spread)&&(e.boxShadow=`${l.horizontal}px ${l.vertical}px ${l.blur}px ${l.spread}px ${l.color||"rgba(0,0,0,0.1)"}`),o.iconTextSpacing&&(e.gap=`${o.iconTextSpacing}${o.iconTextSpacingUnit||"px"}`),o.iconOnTop&&(e.flexDirection="column"),e}function Z(o){const e={};if(o.iconContainerSize){const a=`${o.iconContainerSize}${o.iconContainerSizeUnit||"px"}`;e.width=a,e.height=a}return o.iconContainerBackground&&(e.background=o.iconContainerBackground),o.iconContainerBorderRadius&&(e.borderRadius=`${o.iconContainerBorderRadius}${o.iconContainerBorderRadiusUnit||"px"}`),o.iconSize&&(e["--ts-icon-size"]=`${o.iconSize}${o.iconSizeUnit||"px"}`),o.iconColor&&(e["--ts-icon-color"]=o.iconColor),e}function oo(o){return!o.enableCssGrid&&o.itemWidth==="custom"&&o.customItemWidth?{width:`${o.customItemWidth}${o.customItemWidthUnit||"px"}`}:{}}function eo({item:o,index:e,attributes:a,context:l,postContext:n}){const[c,p]=_.useState(!1),[m,f]=_.useState(!1),u=_.useRef(null),w=G.includes(o.actionType),b=V.includes(o.actionType),s=_.useMemo(()=>l==="editor"?!0:!(!(o.visibilityRules&&o.visibilityRules.length>0)&&o.rowVisibility==="hide"||w&&!n||o.actionType==="edit_post"&&n&&!n.isEditable),[l,w,n,o.actionType,o.rowVisibility,o.visibilityRules]);if(!_.useMemo(()=>l==="editor"?!0:s?o.actionType==="delete_post"?n?.permissions?.delete??!1:o.actionType==="publish_post"?(n?.permissions?.publish??!1)&&n?.status==="unpublished":o.actionType==="unpublish_post"?(n?.permissions?.publish??!1)&&n?.status==="publish":o.actionType==="add_to_cart"?n?.product?.isEnabled??!1:o.actionType==="show_post_on_map"?n?.location?.mapLink!=null:o.actionType==="view_post_stats"?n?.postStatsLink!=null:o.actionType==="promote_post"?n?.promote?.isPromotable??!1:o.actionType==="action_follow"?n?.authorId!=null:!0:!1,[l,s,o.actionType,n]))return null;const x=Q(a),h=Z(a),E=oo(a);o.customStyle&&o.customIconColor&&(h["--ts-icon-color"]=o.customIconColor);const R=o.enableTooltip?o.tooltipText:void 0,B=_.useMemo(()=>!b||!n?!1:o.actionType==="action_follow_post"?n.isFollowed:o.actionType==="action_follow"?n.isAuthorFollowed:o.actionType==="promote_post"?n.promote?.isActive??!1:!1,[b,n,o.actionType]),r=_.useMemo(()=>n?o.actionType==="action_follow_post"?n.isFollowRequested:o.actionType==="action_follow"?n.isAuthorFollowRequested:!1:!1,[n,o.actionType]),t=(d,z={})=>{if(!n)return"#";const k=new URLSearchParams;k.set("vx","1"),k.set("action",d),Object.entries(z).forEach(([mo,_o])=>k.set(mo,String(_o)));const O={"user.posts.delete_post":n.nonces?.delete_post||"","user.posts.republish_post":n.nonces?.modify_post||"","user.posts.unpublish_post":n.nonces?.modify_post||"","user.follow_post":n.nonces?.follow||"","user.follow_user":n.nonces?.follow||""};return O[d]&&k.set("_wpnonce",O[d]),`${window.wpApiSettings?.root||"/"}?${k.toString()}`},A=_.useCallback(()=>{if(!n&&l==="frontend"&&w)return{tag:"div"};switch(o.actionType){case"action_link":return{tag:"a",href:o.link?.url||"#",target:o.link?.isExternal?"_blank":void 0,rel:o.link?.nofollow?"nofollow":void 0};case"delete_post":return n?{tag:"a",href:t("user.posts.delete_post",{post_id:n.postId}),className:"ts-action-con","vx-action":"",rel:"nofollow","data-confirm":n.confirmMessages?.delete||"Are you sure?"}:{tag:"div"};case"publish_post":return n?{tag:"a",href:t("user.posts.republish_post",{post_id:n.postId}),className:"ts-action-con","vx-action":"",rel:"nofollow"}:{tag:"div"};case"unpublish_post":return n?{tag:"a",href:t("user.posts.unpublish_post",{post_id:n.postId}),className:"ts-action-con","vx-action":"",rel:"nofollow"}:{tag:"div"};case"add_to_cart":return n?n.product?.oneClick?{tag:"a",href:"#",target:"_blank",rel:"nofollow","data-product-id":n.product.productId,onClick:d=>{typeof window.Voxel<"u"&&window.Voxel.addToCartAction&&window.Voxel.addToCartAction(d,d.currentTarget)}}:{tag:"a",href:n.postLink}:{tag:"div"};case"select_addition":return{tag:"a",href:"#",role:"button",className:"ts-action-con ts-use-addition","data-id":o.additionId,onClick:d=>{d.preventDefault()}};case"action_follow_post":return n?{tag:"a",href:t("user.follow_post",{post_id:n.postId}),rel:"nofollow",role:"button"}:{tag:"div"};case"action_follow":return n?{tag:"a",href:t("user.follow_user",{user_id:n.authorId||0}),rel:"nofollow",role:"button"}:{tag:"div"};case"show_post_on_map":return n?.location?.mapLink?{tag:"a",href:n.location.mapLink,rel:"nofollow",className:"ts-action-con ts-action-show-on-map","data-post-id":n.postId}:{tag:"div"};case"view_post_stats":return n?.postStatsLink?{tag:"a",href:n.postStatsLink,rel:"nofollow"}:{tag:"div"};case"promote_post":if(n?.promote?.isPromotable){if(n.promote.isActive&&n.promote.orderLink)return{tag:"a",href:n.promote.orderLink,rel:"nofollow"};if(n.promote.promoteLink)return{tag:"a",href:n.promote.promoteLink,rel:"nofollow",role:"button"}}return{tag:"div"};case"back_to_top":return{tag:"a",href:"#",onClick:d=>{d.preventDefault(),typeof window<"u"&&window.scrollTo({top:0,behavior:"smooth"})}};case"go_back":return{tag:"a",href:"javascript:history.back();"};case"scroll_to_section":return{tag:"a",href:"#",onClick:d=>{if(d.preventDefault(),typeof window<"u"&&o.scrollToId){const z=document.getElementById(o.scrollToId);z&&z.scrollIntoView({behavior:"smooth"})}}};case"edit_post":return n?.editLink?n.editSteps&&n.editSteps.length>1?{tag:"a",href:"#",ref:u,role:"button",onClick:d=>{d.preventDefault(),p(!0)}}:{tag:"a",href:n.editLink}:{tag:"div"};case"share_post":return{tag:"a",href:"#",ref:u,role:"button",onClick:d=>{d.preventDefault(),f(!0)}};case"action_gcal":{const d=J({start:o.calStartDate,end:o.calEndDate,title:o.calTitle,description:o.calDescription,location:o.calLocation});return d?{tag:"a",href:d,target:"_blank",rel:"nofollow",className:"ts-action-con"}:{tag:"div"}}case"action_ical":{const d=q({start:o.calStartDate,end:o.calEndDate,title:o.calTitle,description:o.calDescription,location:o.calLocation,url:o.calUrl});return d?{tag:"a",href:d.dataUrl,download:d.filename,role:"button",rel:"nofollow",className:"ts-action-con"}:{tag:"div"}}default:return{tag:"div"}}},[o,n,l,w])(),N=A.tag,$=()=>b&&B&&o.activeText?React.createElement(React.Fragment,null,React.createElement("span",{className:"ts-initial",style:{display:"none"}},React.createElement("div",{className:"ts-action-icon",style:h},T(o.icon)),o.text),React.createElement("span",{className:"ts-reveal"},React.createElement("div",{className:"ts-action-icon",style:h},T(o.activeIcon)),o.activeText)):React.createElement(React.Fragment,null,React.createElement("div",{className:"ts-action-icon",style:h},T(o.icon)),o.text),L=[`vxfse-repeater-item-${o.id||e}`,"flexify","ts-action"].join(" "),W=[A.className||"ts-action-con",["action_follow_post","action_follow"].includes(o.actionType)?"ts-action-follow":"",B?"active":"",r?"intermediate":""].filter(Boolean).join(" "),uo=["action_follow_post","action_follow"].includes(o.actionType),fo=o.actionType==="select_addition",S={};uo?(o.enableTooltip&&o.tooltipText&&(S["tooltip-inactive"]=o.tooltipText),o.activeEnableTooltip&&o.activeTooltipText&&(S["tooltip-active"]=o.activeTooltipText)):fo?(o.enableTooltip&&o.tooltipText&&(S["data-tooltip"]=o.tooltipText,S["data-tooltip-default"]=o.tooltipText),o.activeEnableTooltip&&o.activeTooltipText&&(S["data-tooltip-active"]=o.activeTooltipText)):R&&(S["data-tooltip"]=R);const j=o.actionType==="edit_post"&&n?.editSteps&&n.editSteps.length>1,D=o.actionType==="share_post";if(j||D){const d=D?"ts-action-wrap ts-share-post":"ts-action-wrap ts-popup-component";return React.createElement("li",{className:L,style:E,...S},React.createElement("div",{className:d},React.createElement(N,{...A,className:W,style:x,"aria-label":o.text||R,role:N==="a"?void 0:"button"},$()),j&&n&&React.createElement(Y,{editSteps:n.editSteps,icon:o.icon,text:o.text,closeIcon:a.closeIcon,isOpen:c,onClose:()=>p(!1),targetRef:u}),D&&n&&React.createElement(X,{title:n.postTitle,link:n.postLink,icon:o.icon,closeIcon:a.closeIcon,isOpen:m,onClose:()=>f(!1),targetRef:u})))}return React.createElement("li",{className:L,style:E,...S},React.createElement(N,{...A,className:W,style:x,"aria-label":o.text||R,role:N==="a"?void 0:"button"},$()))}function to({attributes:o,context:e,postContext:a}){const l=K(o),n=_.useMemo(()=>({items:o.items,icons:{closeIcon:o.closeIcon?.value?o.closeIcon:null,messageIcon:o.messageIcon?.value?o.messageIcon:null,linkIcon:o.linkIcon?.value?o.linkIcon:null,shareIcon:o.shareIcon?.value?o.shareIcon:null},list:{enableCssGrid:o.enableCssGrid,gridColumns:o.gridColumns,itemWidth:o.itemWidth,customItemWidth:o.customItemWidth,customItemWidthUnit:o.customItemWidthUnit,listJustify:o.listJustify,itemGap:o.itemGap,itemGapUnit:o.itemGapUnit},itemStyle:{justifyContent:o.itemJustifyContent,padding:o.itemPadding,paddingUnit:o.itemPaddingUnit,height:o.itemHeight,heightUnit:o.itemHeightUnit,borderType:o.itemBorderType,borderWidth:o.itemBorderWidth,borderWidthUnit:o.itemBorderWidthUnit,borderColor:o.itemBorderColor,borderRadius:o.itemBorderRadius,borderRadiusUnit:o.itemBorderRadiusUnit,boxShadow:o.itemBoxShadow,typography:o.itemTypography,textColor:o.itemTextColor,backgroundColor:o.itemBackgroundColor},iconContainer:{background:o.iconContainerBackground,size:o.iconContainerSize,sizeUnit:o.iconContainerSizeUnit,borderType:o.iconContainerBorderType,borderWidth:o.iconContainerBorderWidth,borderWidthUnit:o.iconContainerBorderWidthUnit,borderColor:o.iconContainerBorderColor,borderRadius:o.iconContainerBorderRadius,borderRadiusUnit:o.iconContainerBorderRadiusUnit,boxShadow:o.iconContainerBoxShadow,textSpacing:o.iconTextSpacing,textSpacingUnit:o.iconTextSpacingUnit},icon:{onTop:o.iconOnTop,size:o.iconSize,sizeUnit:o.iconSizeUnit,color:o.iconColor},hoverStyle:{boxShadow:o.itemBoxShadowHover,borderColor:o.itemBorderColorHover,textColor:o.itemTextColorHover,backgroundColor:o.itemBackgroundColorHover,iconContainerBackground:o.iconContainerBackgroundHover,iconContainerBorderColor:o.iconContainerBorderColorHover,iconColor:o.iconColorHover},activeStyle:{boxShadow:o.itemBoxShadowActive,textColor:o.itemTextColorActive,backgroundColor:o.itemBackgroundColorActive,borderColor:o.itemBorderColorActive,iconContainerBackground:o.iconContainerBackgroundActive,iconContainerBorderColor:o.iconContainerBorderColorActive,iconColor:o.iconColorActive},tooltip:{bottom:o.tooltipBottom,textColor:o.tooltipTextColor,typography:o.tooltipTypography,backgroundColor:o.tooltipBackgroundColor,borderRadius:o.tooltipBorderRadius,borderRadiusUnit:o.tooltipBorderRadiusUnit}}),[o]);return!o.items||o.items.length===0?React.createElement("ul",{className:"flexify simplify-ul ts-advanced-list voxel-fse-empty"},React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(n)}}),React.createElement("li",{className:"flexify ts-action"},React.createElement("div",{className:"ts-action-con",style:{padding:"16px 24px",color:"#666",background:"#f5f5f5",borderRadius:"8px"}},e==="editor"?'Click "+ Add Item" in the sidebar to add actions':"No actions configured"))):React.createElement("ul",{className:"flexify simplify-ul ts-advanced-list",style:l},React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(n)}}),o.items.map((c,p)=>React.createElement(eo,{key:c.id||p,item:c,index:p,attributes:o,context:e,postContext:a})))}function no(){if(typeof window<"u"&&window.wpApiSettings?.root)return window.wpApiSettings.root;if(typeof document<"u"){const o=document.querySelector('link[rel="https://api.w.org/"]');if(o){const e=o.getAttribute("href");if(e)return e}}if(typeof window<"u"&&window.location?.origin){const o=window.location.pathname.split("/").filter(Boolean),e=["wp-admin","wp-content","wp-includes","wp-json"];return o.length>0&&!e.includes(o[0])?window.location.origin+"/"+o[0]+"/wp-json/":window.location.origin+"/wp-json/"}return"/wp-json/"}const v={top:"",right:"",bottom:"",left:""},C={horizontal:0,vertical:0,blur:0,spread:0,color:"rgba(0,0,0,0.1)"},U={},y={library:"",value:""};function io(o){const e=(r,t)=>typeof r=="string"?r:typeof r=="number"?String(r):t,a=(r,t)=>{if(typeof r=="number")return r;if(typeof r=="string"){const i=parseFloat(r);if(!isNaN(i))return i}return t},l=(r,t)=>typeof r=="boolean"?r:r==="yes"||r==="true"||r==="1"||r===1?!0:r===""||r==="no"||r==="false"||r==="0"||r===0?!1:t,n=r=>{if(!r||typeof r!="object")return null;const t=r;return!t.library&&!t.value?null:{library:e(t.library,""),value:e(t.value,"")}},c=r=>{if(!r||typeof r!="object")return v;const t=r;return{top:e(t.top,""),right:e(t.right,""),bottom:e(t.bottom,""),left:e(t.left,"")}},p=r=>{if(!r||typeof r!="object")return C;const t=r;return{horizontal:a(t.horizontal,0),vertical:a(t.vertical,0),blur:a(t.blur,0),spread:a(t.spread,0),color:e(t.color,"rgba(0,0,0,0.1)")}},m=r=>{if(!r||typeof r!="object")return U;const t=r;return{fontFamily:t.fontFamily!==void 0?e(t.fontFamily??t.font_family,""):void 0,fontSize:t.fontSize!==void 0?a(t.fontSize??t.font_size,14):void 0,fontSizeUnit:t.fontSizeUnit!==void 0?e(t.fontSizeUnit??t.font_size_unit,"px"):void 0,fontWeight:t.fontWeight!==void 0?e(t.fontWeight??t.font_weight,""):void 0,textTransform:t.textTransform!==void 0?e(t.textTransform??t.text_transform,""):void 0,fontStyle:t.fontStyle!==void 0?e(t.fontStyle??t.font_style,""):void 0,textDecoration:t.textDecoration!==void 0?e(t.textDecoration??t.text_decoration,""):void 0,lineHeight:t.lineHeight!==void 0?a(t.lineHeight??t.line_height,1.5):void 0,lineHeightUnit:t.lineHeightUnit!==void 0?e(t.lineHeightUnit??t.line_height_unit,"em"):void 0,letterSpacing:t.letterSpacing!==void 0?a(t.letterSpacing??t.letter_spacing,0):void 0,letterSpacingUnit:t.letterSpacingUnit!==void 0?e(t.letterSpacingUnit??t.letter_spacing_unit,"px"):void 0}},f=r=>{if(!r||typeof r!="object")return null;const t=r;return{url:e(t.url,""),isExternal:l(t.isExternal??t.is_external,!1),nofollow:l(t.nofollow,!1)}},u=r=>{if(!r||typeof r!="object")return{...P,id:crypto.randomUUID?.()||String(Date.now())};const t=r;return{id:e(t.id??t._id,crypto.randomUUID?.()||String(Date.now())),actionType:e(t.actionType??t.ts_action_type,"none"),text:e(t.text??t.ts_acw_initial_text,"Action"),icon:n(t.icon??t.ts_acw_initial_icon),enableTooltip:l(t.enableTooltip??t.ts_enable_tooltip,!1),tooltipText:e(t.tooltipText??t.ts_tooltip_text,""),link:f(t.link??t.ts_action_link),scrollToId:e(t.scrollToId??t.ts_scroll_to,""),additionId:e(t.additionId??t.ts_addition_id,""),calStartDate:e(t.calStartDate??t.ts_action_cal_start_date,""),calEndDate:e(t.calEndDate??t.ts_action_cal_end_date,""),calTitle:e(t.calTitle??t.ts_action_cal_title,""),calDescription:e(t.calDescription??t.ts_action_cal_desc,""),calLocation:e(t.calLocation??t.ts_action_cal_location,""),calUrl:e(t.calUrl??t.ts_action_cal_url,""),cartOptsText:e(t.cartOptsText??t.ts_cart_opts_text,"Select options"),cartOptsEnableTooltip:l(t.cartOptsEnableTooltip??t.ts_cart_opts_enable_tooltip,!1),cartOptsTooltipText:e(t.cartOptsTooltipText??t.ts_cart_opts_tooltip_text,""),cartOptsIcon:n(t.cartOptsIcon??t.ts_cart_opts_icon),activeText:e(t.activeText??t.ts_acw_reveal_text,"Action"),activeIcon:n(t.activeIcon??t.ts_acw_reveal_icon),activeEnableTooltip:l(t.activeEnableTooltip??t.ts_acw_enable_tooltip,!1),activeTooltipText:e(t.activeTooltipText??t.ts_acw_tooltip_text,""),customStyle:l(t.customStyle??t.ts_acw_custom_style,!1),customIconColor:e(t.customIconColor??t.ts_acw_icon_color_custom,""),customIconColorActive:e(t.customIconColorActive??t.ts_acw_icon_color_a_custom,""),loopSource:e(t.loopSource,""),loopProperty:e(t.loopProperty,""),loopLimit:e(t.loopLimit,""),loopOffset:e(t.loopOffset,""),rowVisibility:e(t.rowVisibility,"show"),visibilityRules:Array.isArray(t.visibilityRules)?t.visibilityRules:[]}},w=r=>r?Array.isArray(r)?r.map(u):typeof r=="object"?Object.values(r).map(u):[]:[],b=r=>{const t={closeIcon:y,messageIcon:y,linkIcon:y,shareIcon:y};if(!r||typeof r!="object")return t;const i=r;return{closeIcon:n(i.closeIcon??i.ts_close_ico)||y,messageIcon:n(i.messageIcon??i.ts_message_ico)||y,linkIcon:n(i.linkIcon??i.ts_link_ico)||y,shareIcon:n(i.shareIcon??i.ts_share_ico)||y}},s=r=>{const t={enableCssGrid:!1,gridColumns:3,itemWidth:"auto",customItemWidth:100,customItemWidthUnit:"px",listJustify:"left",itemGap:10,itemGapUnit:"px"};if(!r||typeof r!="object")return t;const i=r;return{enableCssGrid:l(i.enableCssGrid??i.csgrid_action_on,!1),gridColumns:a(i.gridColumns??i.ts_cgrid_columns,3),itemWidth:e(i.itemWidth??i.ts_al_columns_no,"auto"),customItemWidth:a(i.customItemWidth??i.ts_al_columns_cstm,100),customItemWidthUnit:e(i.customItemWidthUnit,"px"),listJustify:e(i.listJustify??i.ts_al_justify,"left"),itemGap:a(i.itemGap??i.ts_cgrid_gap,10),itemGapUnit:e(i.itemGapUnit,"px")}},g=r=>{const t={justifyContent:"flex-start",padding:v,paddingUnit:"px",height:48,heightUnit:"px",borderType:"none",borderWidth:v,borderWidthUnit:"px",borderColor:"",borderRadius:0,borderRadiusUnit:"px",boxShadow:C,typography:U,textColor:"",backgroundColor:""};if(!r||typeof r!="object")return t;const i=r;return{justifyContent:e(i.justifyContent??i.ts_al_align,"flex-start"),padding:c(i.padding??i.ts_action_padding),paddingUnit:e(i.paddingUnit,"px"),height:a(i.height??i.ts_acw_height,48),heightUnit:e(i.heightUnit,"px"),borderType:e(i.borderType??i.ts_acw_border,"none"),borderWidth:c(i.borderWidth),borderWidthUnit:e(i.borderWidthUnit,"px"),borderColor:e(i.borderColor,""),borderRadius:a(i.borderRadius??i.ts_acw_border_radius,0),borderRadiusUnit:e(i.borderRadiusUnit,"px"),boxShadow:p(i.boxShadow??i.ts_acw_border_shadow),typography:m(i.typography??i.ts_acw_typography),textColor:e(i.textColor??i.ts_acw_initial_color,""),backgroundColor:e(i.backgroundColor??i.ts_acw_initial_bg,"")}},x=r=>{const t={background:"",size:36,sizeUnit:"px",borderType:"solid",borderWidth:v,borderWidthUnit:"px",borderColor:"",borderRadius:50,borderRadiusUnit:"px",boxShadow:C,textSpacing:0,textSpacingUnit:"px"};if(!r||typeof r!="object")return t;const i=r;return{background:e(i.background??i.ts_acw_icon_con_bg,""),size:a(i.size??i.ts_acw_icon_con_size,36),sizeUnit:e(i.sizeUnit,"px"),borderType:e(i.borderType??i.ts_acw_icon_con_border,"solid"),borderWidth:c(i.borderWidth),borderWidthUnit:e(i.borderWidthUnit,"px"),borderColor:e(i.borderColor,""),borderRadius:a(i.borderRadius??i.ts_acw_icon_con_radius,50),borderRadiusUnit:e(i.borderRadiusUnit,"px"),boxShadow:p(i.boxShadow??i.ts_acw_con_shadow),textSpacing:a(i.textSpacing??i.ts_acw_icon_margin,0),textSpacingUnit:e(i.textSpacingUnit,"px")}},h=r=>{const t={onTop:!1,size:18,sizeUnit:"px",color:""};if(!r||typeof r!="object")return t;const i=r;return{onTop:l(i.onTop??i.ts_acw_icon_orient,!1),size:a(i.size??i.ts_acw_icon_size,18),sizeUnit:e(i.sizeUnit,"px"),color:e(i.color??i.ts_acw_icon_color,"")}},E=r=>{const t={boxShadow:C,borderColor:"",textColor:"",backgroundColor:"",iconContainerBackground:"",iconContainerBorderColor:"",iconColor:""};if(!r||typeof r!="object")return t;const i=r;return{boxShadow:p(i.boxShadow??i.ts_acw_border_shadow_h),borderColor:e(i.borderColor??i.ts_acw_border_h,""),textColor:e(i.textColor??i.ts_acw_initial_color_h,""),backgroundColor:e(i.backgroundColor??i.ts_acw_initial_bg_h,""),iconContainerBackground:e(i.iconContainerBackground??i.ts_acw_icon_con_bg_h,""),iconContainerBorderColor:e(i.iconContainerBorderColor??i.ts_acw_icon_con_bord_h,""),iconColor:e(i.iconColor??i.ts_acw_icon_color_h,"")}},R=r=>{const t={boxShadow:C,textColor:"",backgroundColor:"",borderColor:"",iconContainerBackground:"",iconContainerBorderColor:"",iconColor:""};if(!r||typeof r!="object")return t;const i=r;return{boxShadow:p(i.boxShadow??i.ts_acw_border_shadow_a),textColor:e(i.textColor??i.ts_acw_initial_color_a,""),backgroundColor:e(i.backgroundColor??i.ts_acw_initial_bg_a,""),borderColor:e(i.borderColor??i.ts_acw_initial_border_a,""),iconContainerBackground:e(i.iconContainerBackground??i.ts_acw_icon_con_bg_a,""),iconContainerBorderColor:e(i.iconContainerBorderColor??i.ts_acw_icon_con_bord_a,""),iconColor:e(i.iconColor??i.ts_acw_icon_color_a,"")}},B=r=>{const t={bottom:!1,textColor:"",typography:U,backgroundColor:"",borderRadius:0,borderRadiusUnit:"px"};if(!r||typeof r!="object")return t;const i=r;return{bottom:l(i.bottom??i.tooltip_bottom,!1),textColor:e(i.textColor??i.ts_tooltip_color,""),typography:m(i.typography??i.ts_tooltip_typo),backgroundColor:e(i.backgroundColor??i.ts_tooltip_bg,""),borderRadius:a(i.borderRadius??i.ts_tooltip_radius,0),borderRadiusUnit:e(i.borderRadiusUnit,"px")}};return{items:w(o.items??o.ts_actions),icons:b(o.icons),list:s(o.list),itemStyle:g(o.itemStyle??o.item_style),iconContainer:x(o.iconContainer??o.icon_container),icon:h(o.icon),hoverStyle:E(o.hoverStyle??o.hover_style),activeStyle:R(o.activeStyle??o.active_style),tooltip:B(o.tooltip)}}function ro(o){const e=o.querySelector("script.vxconfig");if(!e?.textContent)return console.error("[Advanced List] No vxconfig found"),null;try{const a=JSON.parse(e.textContent);return io(a)}catch(a){return console.error("[Advanced List] Failed to parse vxconfig:",a),null}}function ao(o){return{items:o.items||[],closeIcon:o.icons?.closeIcon||y,messageIcon:o.icons?.messageIcon||y,linkIcon:o.icons?.linkIcon||y,shareIcon:o.icons?.shareIcon||y,enableCssGrid:o.list?.enableCssGrid||!1,gridColumns:o.list?.gridColumns||3,itemWidth:o.list?.itemWidth||"auto",customItemWidth:o.list?.customItemWidth||100,customItemWidthUnit:o.list?.customItemWidthUnit||"px",listJustify:o.list?.listJustify||"left",itemGap:o.list?.itemGap||10,itemGapUnit:o.list?.itemGapUnit||"px",itemJustifyContent:o.itemStyle?.justifyContent||"flex-start",itemPadding:o.itemStyle?.padding||v,itemPaddingUnit:o.itemStyle?.paddingUnit||"px",itemHeight:o.itemStyle?.height||48,itemHeightUnit:o.itemStyle?.heightUnit||"px",itemBorderType:o.itemStyle?.borderType||"none",itemBorderWidth:o.itemStyle?.borderWidth||v,itemBorderWidthUnit:o.itemStyle?.borderWidthUnit||"px",itemBorderColor:o.itemStyle?.borderColor||"",itemBorderRadius:o.itemStyle?.borderRadius||0,itemBorderRadiusUnit:o.itemStyle?.borderRadiusUnit||"px",itemBoxShadow:o.itemStyle?.boxShadow||C,itemTypography:o.itemStyle?.typography||U,itemTextColor:o.itemStyle?.textColor||"",itemBackgroundColor:o.itemStyle?.backgroundColor||"",iconContainerBackground:o.iconContainer?.background||"",iconContainerSize:o.iconContainer?.size||36,iconContainerSizeUnit:o.iconContainer?.sizeUnit||"px",iconContainerBorderType:o.iconContainer?.borderType||"solid",iconContainerBorderWidth:o.iconContainer?.borderWidth||v,iconContainerBorderWidthUnit:o.iconContainer?.borderWidthUnit||"px",iconContainerBorderColor:o.iconContainer?.borderColor||"",iconContainerBorderRadius:o.iconContainer?.borderRadius||50,iconContainerBorderRadiusUnit:o.iconContainer?.borderRadiusUnit||"px",iconContainerBoxShadow:o.iconContainer?.boxShadow||C,iconTextSpacing:o.iconContainer?.textSpacing||0,iconTextSpacingUnit:o.iconContainer?.textSpacingUnit||"px",iconOnTop:o.icon?.onTop||!1,iconSize:o.icon?.size||18,iconSizeUnit:o.icon?.sizeUnit||"px",iconColor:o.icon?.color||"",itemBoxShadowHover:o.hoverStyle?.boxShadow||C,itemBorderColorHover:o.hoverStyle?.borderColor||"",itemTextColorHover:o.hoverStyle?.textColor||"",itemBackgroundColorHover:o.hoverStyle?.backgroundColor||"",iconContainerBackgroundHover:o.hoverStyle?.iconContainerBackground||"",iconContainerBorderColorHover:o.hoverStyle?.iconContainerBorderColor||"",iconColorHover:o.hoverStyle?.iconColor||"",itemBoxShadowActive:o.activeStyle?.boxShadow||C,itemTextColorActive:o.activeStyle?.textColor||"",itemBackgroundColorActive:o.activeStyle?.backgroundColor||"",itemBorderColorActive:o.activeStyle?.borderColor||"",iconContainerBackgroundActive:o.activeStyle?.iconContainerBackground||"",iconContainerBorderColorActive:o.activeStyle?.iconContainerBorderColor||"",iconColorActive:o.activeStyle?.iconColor||"",tooltipBottom:o.tooltip?.bottom||!1,tooltipTextColor:o.tooltip?.textColor||"",tooltipTypography:o.tooltip?.typography||U,tooltipBackgroundColor:o.tooltip?.backgroundColor||"",tooltipBorderRadius:o.tooltip?.borderRadius||0,tooltipBorderRadiusUnit:o.tooltip?.borderRadiusUnit||"px"}}function lo(){return window.voxelFseAdvancedList?.restUrl?window.voxelFseAdvancedList.restUrl:no()}async function co(){const o=document.querySelector('meta[name="vx-post-id"]'),e=o?.content?parseInt(o.content,10):null;if(!e)return null;try{const a=lo(),l=await fetch(`${a}voxel-fse/v1/advanced-list/post-context?post_id=${e}`);return l.ok?await l.json():(console.warn("[Advanced List] Failed to fetch post context"),null)}catch(a){return console.warn("[Advanced List] Error fetching post context:",a),null}}function so(o){const e=["action_follow_post","action_follow","edit_post","delete_post","unpublish_post","publish_post","show_post_on_map","share_post","view_post_stats","add_to_cart","promote_post","select_addition","action_gcal","action_ical"];return o.some(a=>e.includes(a.actionType))}function po({attributes:o,postContext:e}){return React.createElement(to,{attributes:o,context:"frontend",postContext:e})}async function I(){const o=document.querySelectorAll(".voxel-fse-advanced-list-frontend:not([data-react-mounted])");if(o.length===0)return;let e=null;const a=[];o.forEach(n=>{const c=ro(n);c&&a.push({container:n,config:c})}),a.some(({config:n})=>so(n.items))&&(e=await co());for(const{container:n,config:c}of a){n.setAttribute("data-react-mounted","true");const p=ao(c);n.innerHTML="",H.createRoot(n).render(React.createElement(po,{attributes:p,postContext:e}))}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",I):I(),window.addEventListener("turbo:load",I),window.addEventListener("pjax:complete",I)})(ReactDOM,React);
