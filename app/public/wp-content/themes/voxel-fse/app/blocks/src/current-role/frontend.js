(function(J,E){"use strict";var S,L,w,T;S={"(":9,"!":8,"*":7,"/":7,"%":7,"+":6,"-":6,"<":5,"<=":5,">":5,">=":5,"==":4,"!=":4,"&&":3,"||":2,"?":1,"?:":1},L=["(","?"],w={")":["("],":":["?","?:"]},T=/<=|>=|==|!=|&&|\|\||\?:|\(|!|\*|\/|%|\+|-|<|>|\?|\)|:/;function $(e){for(var t=[],n=[],r,i,l,a;r=e.match(T);){for(i=r[0],l=e.substr(0,r.index).trim(),l&&t.push(l);a=n.pop();){if(w[i]){if(w[i][0]===a){i=w[i][1]||i;break}}else if(L.indexOf(a)>=0||S[a]<S[i]){n.push(a);break}t.push(a)}w[i]||n.push(i),e=e.substr(r.index+i.length)}return e=e.trim(),e&&t.push(e),t.concat(n.reverse())}var K={"!":function(e){return!e},"*":function(e,t){return e*t},"/":function(e,t){return e/t},"%":function(e,t){return e%t},"+":function(e,t){return e+t},"-":function(e,t){return e-t},"<":function(e,t){return e<t},"<=":function(e,t){return e<=t},">":function(e,t){return e>t},">=":function(e,t){return e>=t},"==":function(e,t){return e===t},"!=":function(e,t){return e!==t},"&&":function(e,t){return e&&t},"||":function(e,t){return e||t},"?:":function(e,t,n){if(e)throw t;return n}};function Z(e,t){var n=[],r,i,l,a,s,f;for(r=0;r<e.length;r++){if(s=e[r],a=K[s],a){for(i=a.length,l=Array(i);i--;)l[i]=n.pop();try{f=a.apply(null,l)}catch(u){return u}}else t.hasOwnProperty(s)?f=t[s]:f=+s;n.push(f)}return n[0]}function q(e){var t=$(e);return function(n){return Z(t,n)}}function W(e){var t=q(e);return function(n){return+t({n})}}var D={contextDelimiter:"",onMissingKey:null};function X(e){var t,n,r;for(t=e.split(";"),n=0;n<t.length;n++)if(r=t[n].trim(),r.indexOf("plural=")===0)return r.substr(7)}function I(e,t){var n;this.data=e,this.pluralForms={},this.options={};for(n in D)this.options[n]=t!==void 0&&n in t?t[n]:D[n]}I.prototype.getPluralForm=function(e,t){var n=this.pluralForms[e],r,i,l;return n||(r=this.data[e][""],l=r["Plural-Forms"]||r["plural-forms"]||r.plural_forms,typeof l!="function"&&(i=X(r["Plural-Forms"]||r["plural-forms"]||r.plural_forms),l=W(i)),n=this.pluralForms[e]=l),n(t)},I.prototype.dcnpgettext=function(e,t,n,r,i){var l,a,s;return i===void 0?l=0:l=this.getPluralForm(e,i),a=n,t&&(a=t+this.options.contextDelimiter+n),s=this.data[e][a],s&&s[l]?s[l]:(this.options.onMissingKey&&this.options.onMissingKey(n,e),l===0?n:r)};var O={"":{plural_forms(e){return e===1?0:1}}},G=/^i18n\.(n?gettext|has_translation)(_|$)/,V=(e,t,n)=>{const r=new I({}),i=new Set,l=()=>{i.forEach(o=>o())},a=o=>(i.add(o),()=>i.delete(o)),s=(o="default")=>r.data[o],f=(o,c="default")=>{r.data[c]={...r.data[c],...o},r.data[c][""]={...O[""],...r.data[c]?.[""]},delete r.pluralForms[c]},u=(o,c)=>{f(o,c),l()},h=(o,c="default")=>{r.data[c]={...r.data[c],...o,"":{...O[""],...r.data[c]?.[""],...o?.[""]}},delete r.pluralForms[c],l()},R=(o,c)=>{r.data={},r.pluralForms={},u(o,c)},y=(o="default",c,d,v,m)=>(r.data[o]||f(void 0,o),r.dcnpgettext(o,c,d,v,m)),g=o=>o||"default",_e=(o,c)=>{let d=y(c,void 0,o);return n?(d=n.applyFilters("i18n.gettext",d,o,c),n.applyFilters("i18n.gettext_"+g(c),d,o,c)):d},B=(o,c,d)=>{let v=y(d,c,o);return n?(v=n.applyFilters("i18n.gettext_with_context",v,o,c,d),n.applyFilters("i18n.gettext_with_context_"+g(d),v,o,c,d)):v},ge=(o,c,d,v)=>{let m=y(v,void 0,o,c,d);return n?(m=n.applyFilters("i18n.ngettext",m,o,c,d,v),n.applyFilters("i18n.ngettext_"+g(v),m,o,c,d,v)):m},we=(o,c,d,v,m)=>{let F=y(m,v,o,c,d);return n?(F=n.applyFilters("i18n.ngettext_with_context",F,o,c,d,v,m),n.applyFilters("i18n.ngettext_with_context_"+g(m),F,o,c,d,v,m)):F},Ee=()=>B("ltr","text direction")==="rtl",Ae=(o,c,d)=>{const v=c?c+""+o:o;let m=!!r.data?.[d??"default"]?.[v];return n&&(m=n.applyFilters("i18n.has_translation",m,o,c,d),m=n.applyFilters("i18n.has_translation_"+g(d),m,o,c,d)),m};if(n){const o=c=>{G.test(c)&&l()};n.addAction("hookAdded","core/i18n",o),n.addAction("hookRemoved","core/i18n",o)}return{getLocaleData:s,setLocaleData:u,addLocaleData:h,resetLocaleData:R,subscribe:a,__:_e,_x:B,_n:ge,_nx:we,isRTL:Ee,hasTranslation:Ae}};function Y(e){return typeof e!="string"||e===""?(console.error("The namespace must be a non-empty string."),!1):/^[a-zA-Z][a-zA-Z0-9_.\-\/]*$/.test(e)?!0:(console.error("The namespace can only contain numbers, letters, dashes, periods, underscores and slashes."),!1)}var C=Y;function Q(e){return typeof e!="string"||e===""?(console.error("The hook name must be a non-empty string."),!1):/^__/.test(e)?(console.error("The hook name cannot begin with `__`."),!1):/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(e)?!0:(console.error("The hook name can only contain numbers, letters, dashes, periods and underscores."),!1)}var H=Q;function ee(e,t){return function(r,i,l,a=10){const s=e[t];if(!H(r)||!C(i))return;if(typeof l!="function"){console.error("The hook callback must be a function.");return}if(typeof a!="number"){console.error("If specified, the hook priority must be a number.");return}const f={callback:l,priority:a,namespace:i};if(s[r]){const u=s[r].handlers;let h;for(h=u.length;h>0&&!(a>=u[h-1].priority);h--);h===u.length?u[h]=f:u.splice(h,0,f),s.__current.forEach(R=>{R.name===r&&R.currentIndex>=h&&R.currentIndex++})}else s[r]={handlers:[f],runs:0};r!=="hookAdded"&&e.doAction("hookAdded",r,i,l,a)}}var P=ee;function te(e,t,n=!1){return function(i,l){const a=e[t];if(!H(i)||!n&&!C(l))return;if(!a[i])return 0;let s=0;if(n)s=a[i].handlers.length,a[i]={runs:a[i].runs,handlers:[]};else{const f=a[i].handlers;for(let u=f.length-1;u>=0;u--)f[u].namespace===l&&(f.splice(u,1),s++,a.__current.forEach(h=>{h.name===i&&h.currentIndex>=u&&h.currentIndex--}))}return i!=="hookRemoved"&&e.doAction("hookRemoved",i,l),s}}var A=te;function ne(e,t){return function(r,i){const l=e[t];return typeof i<"u"?r in l&&l[r].handlers.some(a=>a.namespace===i):r in l}}var j=ne;function re(e,t,n,r){return function(l,...a){const s=e[t];s[l]||(s[l]={handlers:[],runs:0}),s[l].runs++;const f=s[l].handlers;if(!f||!f.length)return n?a[0]:void 0;const u={name:l,currentIndex:0};async function h(){try{s.__current.add(u);let y=n?a[0]:void 0;for(;u.currentIndex<f.length;)y=await f[u.currentIndex].callback.apply(null,a),n&&(a[0]=y),u.currentIndex++;return n?y:void 0}finally{s.__current.delete(u)}}function R(){try{s.__current.add(u);let y=n?a[0]:void 0;for(;u.currentIndex<f.length;)y=f[u.currentIndex].callback.apply(null,a),n&&(a[0]=y),u.currentIndex++;return n?y:void 0}finally{s.__current.delete(u)}}return(r?h:R)()}}var b=re;function ie(e,t){return function(){const r=e[t];return Array.from(r.__current).at(-1)?.name??null}}var M=ie;function le(e,t){return function(r){const i=e[t];return typeof r>"u"?i.__current.size>0:Array.from(i.__current).some(l=>l.name===r)}}var k=le;function ae(e,t){return function(r){const i=e[t];if(H(r))return i[r]&&i[r].runs?i[r].runs:0}}var z=ae,oe=class{actions;filters;addAction;addFilter;removeAction;removeFilter;hasAction;hasFilter;removeAllActions;removeAllFilters;doAction;doActionAsync;applyFilters;applyFiltersAsync;currentAction;currentFilter;doingAction;doingFilter;didAction;didFilter;constructor(){this.actions=Object.create(null),this.actions.__current=new Set,this.filters=Object.create(null),this.filters.__current=new Set,this.addAction=P(this,"actions"),this.addFilter=P(this,"filters"),this.removeAction=A(this,"actions"),this.removeFilter=A(this,"filters"),this.hasAction=j(this,"actions"),this.hasFilter=j(this,"filters"),this.removeAllActions=A(this,"actions",!0),this.removeAllFilters=A(this,"filters",!0),this.doAction=b(this,"actions",!1,!1),this.doActionAsync=b(this,"actions",!1,!0),this.applyFilters=b(this,"filters",!0,!1),this.applyFiltersAsync=b(this,"filters",!0,!0),this.currentAction=M(this,"actions"),this.currentFilter=M(this,"filters"),this.doingAction=k(this,"actions"),this.doingFilter=k(this,"filters"),this.didAction=z(this,"actions"),this.didFilter=z(this,"filters")}};function ce(){return new oe}var se=ce,N=se(),{addAction:be,addFilter:xe,removeAction:Fe,removeFilter:Se,hasAction:Ie,hasFilter:He,removeAllActions:Le,removeAllFilters:Te,doAction:De,doActionAsync:Oe,applyFilters:Ce,applyFiltersAsync:Pe,currentAction:je,currentFilter:Me,doingAction:ke,doingFilter:ze,didAction:Ne,didFilter:Ue,actions:Be,filters:Je}=N,p=V(void 0,void 0,N);p.getLocaleData.bind(p),p.setLocaleData.bind(p),p.resetLocaleData.bind(p),p.subscribe.bind(p);var _=p.__.bind(p);p._x.bind(p),p._n.bind(p),p._nx.bind(p),p.isRTL.bind(p),p.hasTranslation.bind(p);function U(e){return!e||!e.value?null:e.library==="svg"?React.createElement("img",{src:e.value,alt:"",className:"voxel-icon-svg"}):e.library==="icon"?React.createElement("i",{className:e.value,"aria-hidden":"true"}):null}function ue(){return React.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},React.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"}))}function fe(){return React.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},React.createElement("path",{d:"M6.99 11L3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"}))}function de({attributes:e,roleData:t,isLoading:n,error:r,context:i}){const l={roleIcon:e.roleIcon??{library:"",value:""},switchIcon:e.switchIcon??{library:"",value:""}},a=U(e.roleIcon)??React.createElement(ue,null),s=U(e.switchIcon)??React.createElement(fe,null);if(n)return React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(l)}}),React.createElement("div",{className:"ts-panel active-plan role-panel"},React.createElement("div",{className:"ac-head"},a,React.createElement("b",null,_("User role","voxel-fse"))),React.createElement("div",{className:"ac-body"},React.createElement("p",null,_("Loading...","voxel-fse")))));if(r)return React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(l)}}),React.createElement("div",{className:"ts-panel active-plan role-panel"},React.createElement("div",{className:"ac-head"},a,React.createElement("b",null,_("User role","voxel-fse"))),React.createElement("div",{className:"ac-body"},React.createElement("p",null,r))));if(!t?.isLoggedIn)return React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(l)}}),React.createElement("div",{className:"ts-panel active-plan role-panel"},React.createElement("div",{className:"ac-head"},a,React.createElement("b",null,_("User role","voxel-fse"))),React.createElement("div",{className:"ac-body"},React.createElement("p",null,_("Please log in to view your role.","voxel-fse")))));const u=t.currentRoles&&t.currentRoles.length>0?t.rolesLabel:_("You do not have a role assigned currently.","voxel-fse"),h=()=>!t.canSwitch||!t.switchableRoles||t.switchableRoles.length===0?null:React.createElement("div",{className:"ac-bottom"},React.createElement("ul",{className:"simplify-ul current-plan-btn"},t.switchableRoles.map(R=>React.createElement("li",{key:R.key},React.createElement("a",{...i==="frontend"?{"vx-action":""}:{},className:"ts-btn ts-btn-1",href:R.switchUrl,onClick:i==="editor"?y=>y.preventDefault():void 0},s,_("Switch to ","voxel-fse"),R.label)))));return React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(l)}}),React.createElement("div",{className:"ts-panel active-plan role-panel"},React.createElement("div",{className:"ac-head"},a,React.createElement("b",null,_("User role","voxel-fse"))),React.createElement("div",{className:"ac-body"},React.createElement("p",null,u),h())))}function he(){if(typeof window<"u"&&window.wpApiSettings?.root)return window.wpApiSettings.root;if(typeof document<"u"){const e=document.querySelector('link[rel="https://api.w.org/"]');if(e){const t=e.getAttribute("href");if(t)return t}}if(typeof window<"u"&&window.location?.origin){const e=window.location.pathname.split("/").filter(Boolean),t=["wp-admin","wp-content","wp-includes","wp-json"];return e.length>0&&!t.includes(e[0])?window.location.origin+"/"+e[0]+"/wp-json/":window.location.origin+"/wp-json/"}return"/wp-json/"}function pe(e){const t=(i,l)=>typeof i=="string"?i:typeof i=="number"?String(i):l,n=(i,l)=>{if(i&&typeof i=="object"){const a=i;return{library:t(a.library,l.library),value:t(a.value,l.value)}}return l},r={library:"",value:""};return{roleIcon:n(e.roleIcon??e.role_icon??e.ts_role_ico,r),switchIcon:n(e.switchIcon??e.switch_icon??e.ts_switch_ico,r)}}function ve(){return he()}function me(e){const t=e.querySelector("script.vxconfig");if(t&&t.textContent)try{const n=JSON.parse(t.textContent);return pe(n)}catch(n){console.error("Failed to parse vxconfig:",n)}return null}async function ye(){const e=ve(),t={},n=window.wpApiSettings?.nonce;n&&(t["X-WP-Nonce"]=n);const r=await fetch(`${e}voxel-fse/v1/current-role`,{credentials:"same-origin",headers:t});if(!r.ok)throw new Error(`Failed to fetch role data: ${r.statusText}`);return await r.json()}function Re({config:e}){const[t,n]=E.useState(null),[r,i]=E.useState(!0),[l,a]=E.useState(null);E.useEffect(()=>{let f=!1;async function u(){i(!0),a(null);try{const h=await ye();f||n(h)}catch(h){f||a(h instanceof Error?h.message:"Failed to load role data")}finally{f||i(!1)}}return u(),()=>{f=!0}},[]);const s={blockId:"",roleIcon:e.roleIcon,switchIcon:e.switchIcon};return React.createElement(de,{attributes:s,roleData:t,isLoading:r,error:l,context:"frontend"})}function x(){document.querySelectorAll(".voxel-fse-current-role").forEach(t=>{if(t.dataset.hydrated==="true")return;const n=me(t);if(!n){console.error("No vxconfig found for current role block");return}t.dataset.hydrated="true",t.innerHTML="",J.createRoot(t).render(React.createElement(Re,{config:n}))})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",x):x(),window.addEventListener("turbo:load",x),window.addEventListener("pjax:complete",x)})(ReactDOM,React);
