(function(J,w){"use strict";var F,P,E,C;F={"(":9,"!":8,"*":7,"/":7,"%":7,"+":6,"-":6,"<":5,"<=":5,">":5,">=":5,"==":4,"!=":4,"&&":3,"||":2,"?":1,"?:":1},P=["(","?"],E={")":["("],":":["?","?:"]},C=/<=|>=|==|!=|&&|\|\||\?:|\(|!|\*|\/|%|\+|-|<|>|\?|\)|:/;function V(e){for(var t=[],n=[],r,c,l,a;r=e.match(C);){for(c=r[0],l=e.substr(0,r.index).trim(),l&&t.push(l);a=n.pop();){if(E[c]){if(E[c][0]===a){c=E[c][1]||c;break}}else if(P.indexOf(a)>=0||F[a]<F[c]){n.push(a);break}t.push(a)}E[c]||n.push(c),e=e.substr(r.index+c.length)}return e=e.trim(),e&&t.push(e),t.concat(n.reverse())}var $={"!":function(e){return!e},"*":function(e,t){return e*t},"/":function(e,t){return e/t},"%":function(e,t){return e%t},"+":function(e,t){return e+t},"-":function(e,t){return e-t},"<":function(e,t){return e<t},"<=":function(e,t){return e<=t},">":function(e,t){return e>t},">=":function(e,t){return e>=t},"==":function(e,t){return e===t},"!=":function(e,t){return e!==t},"&&":function(e,t){return e&&t},"||":function(e,t){return e||t},"?:":function(e,t,n){if(e)throw t;return n}};function K(e,t){var n=[],r,c,l,a,s,u;for(r=0;r<e.length;r++){if(s=e[r],a=$[s],a){for(c=a.length,l=Array(c);c--;)l[c]=n.pop();try{u=a.apply(null,l)}catch(d){return d}}else t.hasOwnProperty(s)?u=t[s]:u=+s;n.push(u)}return n[0]}function Z(e){var t=V(e);return function(n){return K(t,n)}}function q(e){var t=Z(e);return function(n){return+t({n})}}var T={contextDelimiter:"",onMissingKey:null};function W(e){var t,n,r;for(t=e.split(";"),n=0;n<t.length;n++)if(r=t[n].trim(),r.indexOf("plural=")===0)return r.substr(7)}function S(e,t){var n;this.data=e,this.pluralForms={},this.options={};for(n in T)this.options[n]=t!==void 0&&n in t?t[n]:T[n]}S.prototype.getPluralForm=function(e,t){var n=this.pluralForms[e],r,c,l;return n||(r=this.data[e][""],l=r["Plural-Forms"]||r["plural-forms"]||r.plural_forms,typeof l!="function"&&(c=W(r["Plural-Forms"]||r["plural-forms"]||r.plural_forms),l=q(c)),n=this.pluralForms[e]=l),n(t)},S.prototype.dcnpgettext=function(e,t,n,r,c){var l,a,s;return c===void 0?l=0:l=this.getPluralForm(e,c),a=n,t&&(a=t+this.options.contextDelimiter+n),s=this.data[e][a],s&&s[l]?s[l]:(this.options.onMissingKey&&this.options.onMissingKey(n,e),l===0?n:r)};var O={"":{plural_forms(e){return e===1?0:1}}},X=/^i18n\.(n?gettext|has_translation)(_|$)/,Y=(e,t,n)=>{const r=new S({}),c=new Set,l=()=>{c.forEach(i=>i())},a=i=>(c.add(i),()=>c.delete(i)),s=(i="default")=>r.data[i],u=(i,o="default")=>{r.data[o]={...r.data[o],...i},r.data[o][""]={...O[""],...r.data[o]?.[""]},delete r.pluralForms[o]},d=(i,o)=>{u(i,o),l()},f=(i,o="default")=>{r.data[o]={...r.data[o],...i,"":{...O[""],...r.data[o]?.[""],...i?.[""]}},delete r.pluralForms[o],l()},_=(i,o)=>{r.data={},r.pluralForms={},d(i,o)},g=(i="default",o,p,v,m)=>(r.data[i]||u(void 0,i),r.dcnpgettext(i,o,p,v,m)),R=i=>i||"default",Re=(i,o)=>{let p=g(o,void 0,i);return n?(p=n.applyFilters("i18n.gettext",p,i,o),n.applyFilters("i18n.gettext_"+R(o),p,i,o)):p},U=(i,o,p)=>{let v=g(p,o,i);return n?(v=n.applyFilters("i18n.gettext_with_context",v,i,o,p),n.applyFilters("i18n.gettext_with_context_"+R(p),v,i,o,p)):v},Ee=(i,o,p,v)=>{let m=g(v,void 0,i,o,p);return n?(m=n.applyFilters("i18n.ngettext",m,i,o,p,v),n.applyFilters("i18n.ngettext_"+R(v),m,i,o,p,v)):m},we=(i,o,p,v,m)=>{let x=g(m,v,i,o,p);return n?(x=n.applyFilters("i18n.ngettext_with_context",x,i,o,p,v,m),n.applyFilters("i18n.ngettext_with_context_"+R(m),x,i,o,p,v,m)):x},Ie=()=>U("ltr","text direction")==="rtl",be=(i,o,p)=>{const v=o?o+""+i:i;let m=!!r.data?.[p??"default"]?.[v];return n&&(m=n.applyFilters("i18n.has_translation",m,i,o,p),m=n.applyFilters("i18n.has_translation_"+R(p),m,i,o,p)),m};if(n){const i=o=>{X.test(o)&&l()};n.addAction("hookAdded","core/i18n",i),n.addAction("hookRemoved","core/i18n",i)}return{getLocaleData:s,setLocaleData:d,addLocaleData:f,resetLocaleData:_,subscribe:a,__:Re,_x:U,_n:Ee,_nx:we,isRTL:Ie,hasTranslation:be}};function G(e){return typeof e!="string"||e===""?(console.error("The namespace must be a non-empty string."),!1):/^[a-zA-Z][a-zA-Z0-9_.\-\/]*$/.test(e)?!0:(console.error("The namespace can only contain numbers, letters, dashes, periods, underscores and slashes."),!1)}var M=G;function Q(e){return typeof e!="string"||e===""?(console.error("The hook name must be a non-empty string."),!1):/^__/.test(e)?(console.error("The hook name cannot begin with `__`."),!1):/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(e)?!0:(console.error("The hook name can only contain numbers, letters, dashes, periods and underscores."),!1)}var H=Q;function ee(e,t){return function(r,c,l,a=10){const s=e[t];if(!H(r)||!M(c))return;if(typeof l!="function"){console.error("The hook callback must be a function.");return}if(typeof a!="number"){console.error("If specified, the hook priority must be a number.");return}const u={callback:l,priority:a,namespace:c};if(s[r]){const d=s[r].handlers;let f;for(f=d.length;f>0&&!(a>=d[f-1].priority);f--);f===d.length?d[f]=u:d.splice(f,0,u),s.__current.forEach(_=>{_.name===r&&_.currentIndex>=f&&_.currentIndex++})}else s[r]={handlers:[u],runs:0};r!=="hookAdded"&&e.doAction("hookAdded",r,c,l,a)}}var N=ee;function te(e,t,n=!1){return function(c,l){const a=e[t];if(!H(c)||!n&&!M(l))return;if(!a[c])return 0;let s=0;if(n)s=a[c].handlers.length,a[c]={runs:a[c].runs,handlers:[]};else{const u=a[c].handlers;for(let d=u.length-1;d>=0;d--)u[d].namespace===l&&(u.splice(d,1),s++,a.__current.forEach(f=>{f.name===c&&f.currentIndex>=d&&f.currentIndex--}))}return c!=="hookRemoved"&&e.doAction("hookRemoved",c,l),s}}var I=te;function ne(e,t){return function(r,c){const l=e[t];return typeof c<"u"?r in l&&l[r].handlers.some(a=>a.namespace===c):r in l}}var D=ne;function re(e,t,n,r){return function(l,...a){const s=e[t];s[l]||(s[l]={handlers:[],runs:0}),s[l].runs++;const u=s[l].handlers;if(!u||!u.length)return n?a[0]:void 0;const d={name:l,currentIndex:0};async function f(){try{s.__current.add(d);let g=n?a[0]:void 0;for(;d.currentIndex<u.length;)g=await u[d.currentIndex].callback.apply(null,a),n&&(a[0]=g),d.currentIndex++;return n?g:void 0}finally{s.__current.delete(d)}}function _(){try{s.__current.add(d);let g=n?a[0]:void 0;for(;d.currentIndex<u.length;)g=u[d.currentIndex].callback.apply(null,a),n&&(a[0]=g),d.currentIndex++;return n?g:void 0}finally{s.__current.delete(d)}}return(r?f:_)()}}var b=re;function ce(e,t){return function(){const r=e[t];return Array.from(r.__current).at(-1)?.name??null}}var j=ce;function le(e,t){return function(r){const c=e[t];return typeof r>"u"?c.__current.size>0:Array.from(c.__current).some(l=>l.name===r)}}var k=le;function ae(e,t){return function(r){const c=e[t];if(H(r))return c[r]&&c[r].runs?c[r].runs:0}}var z=ae,ie=class{actions;filters;addAction;addFilter;removeAction;removeFilter;hasAction;hasFilter;removeAllActions;removeAllFilters;doAction;doActionAsync;applyFilters;applyFiltersAsync;currentAction;currentFilter;doingAction;doingFilter;didAction;didFilter;constructor(){this.actions=Object.create(null),this.actions.__current=new Set,this.filters=Object.create(null),this.filters.__current=new Set,this.addAction=N(this,"actions"),this.addFilter=N(this,"filters"),this.removeAction=I(this,"actions"),this.removeFilter=I(this,"filters"),this.hasAction=D(this,"actions"),this.hasFilter=D(this,"filters"),this.removeAllActions=I(this,"actions",!0),this.removeAllFilters=I(this,"filters",!0),this.doAction=b(this,"actions",!1,!1),this.doActionAsync=b(this,"actions",!1,!0),this.applyFilters=b(this,"filters",!0,!1),this.applyFiltersAsync=b(this,"filters",!0,!0),this.currentAction=j(this,"actions"),this.currentFilter=j(this,"filters"),this.doingAction=k(this,"actions"),this.doingFilter=k(this,"filters"),this.didAction=z(this,"actions"),this.didFilter=z(this,"filters")}};function oe(){return new ie}var se=oe,B=se(),{addAction:Ae,addFilter:xe,removeAction:Fe,removeFilter:Se,hasAction:He,hasFilter:Le,removeAllActions:Pe,removeAllFilters:Ce,doAction:Te,doActionAsync:Oe,applyFilters:Me,applyFiltersAsync:Ne,currentAction:De,currentFilter:je,doingAction:ke,doingFilter:ze,didAction:Be,didFilter:Ue,actions:Je,filters:Ve}=B,h=Y(void 0,void 0,B);h.getLocaleData.bind(h),h.setLocaleData.bind(h),h.resetLocaleData.bind(h),h.subscribe.bind(h);var y=h.__.bind(h);h._x.bind(h),h._n.bind(h),h._nx.bind(h),h.isRTL.bind(h),h.hasTranslation.bind(h);function L(e){return!e||!e.value?null:e.library==="svg"?React.createElement("img",{src:e.value,alt:"",className:"voxel-icon-svg"}):e.library==="icon"?React.createElement("i",{className:e.value,"aria-hidden":"true"}):null}function ue(){return React.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},React.createElement("path",{d:"M20 7h-4V4c0-1.1-.9-2-2-2h-4c-1.1 0-2 .9-2 2v3H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2zM10 4h4v3h-4V4zm10 16H4V9h16v11zM12 12c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}))}function de(){return React.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},React.createElement("path",{d:"M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"}))}function fe(){return React.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},React.createElement("path",{d:"M6.99 11L3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"}))}function pe({attributes:e,planData:t,isLoading:n,error:r,context:c}){const l={planIcon:e.planIcon??{library:"",value:""},viewPlansIcon:e.viewPlansIcon??{library:"",value:""},configureIcon:e.configureIcon??{library:"",value:""},switchIcon:e.switchIcon??{library:"",value:""},cancelIcon:e.cancelIcon??{library:"",value:""},portalIcon:e.portalIcon??{library:"",value:""}},a=L(e.planIcon)??React.createElement(ue,null),s=L(e.configureIcon)??React.createElement(de,null),u=L(e.switchIcon)??React.createElement(fe,null);return n?React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(l)}}),React.createElement("div",{className:"ts-panel active-plan plan-panel"},React.createElement("div",{className:"ac-head"},a,React.createElement("b",null,y("Current plan","voxel-fse"))),React.createElement("div",{className:"ac-body"},React.createElement("p",null,y("Loading...","voxel-fse"))))):r?React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(l)}}),React.createElement("div",{className:"ts-panel active-plan plan-panel"},React.createElement("div",{className:"ac-head"},a,React.createElement("b",null,y("Current plan","voxel-fse"))),React.createElement("div",{className:"ac-body"},React.createElement("p",null,r)))):t?.isLoggedIn?t.membershipType==="order"&&t.orderLink&&!t.isSubscriptionCanceled&&t.pricing?React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(l)}}),React.createElement("div",{className:"ts-panel active-plan plan-panel"},React.createElement("div",{className:"ac-head"},a,React.createElement("b",null,y("Current plan","voxel-fse"))),React.createElement("div",{className:"ac-body"},React.createElement("div",{className:"ac-plan-pricing"},React.createElement("span",{className:"ac-plan-price"},t.pricing.formattedPrice),React.createElement("div",{className:"ac-price-period"},"/ ",t.pricing.formattedPeriod)),t.statusMessage&&React.createElement("p",null,t.statusMessage),React.createElement("p",null,y("Your current plan is ","voxel-fse"),t.planLabel),React.createElement("div",{className:"ac-bottom"},React.createElement("ul",{className:"simplify-ul current-plan-btn"},React.createElement("li",null,React.createElement("a",{href:t.orderLink??void 0,className:"ts-btn ts-btn-1",onClick:c==="editor"?f=>f.preventDefault():void 0},s,y("Manage subscription","voxel-fse"))),t.switchPlanUrl&&React.createElement("li",null,React.createElement("a",{href:t.switchPlanUrl,className:"ts-btn ts-btn-1",onClick:c==="editor"?f=>f.preventDefault():void 0},u,y("Switch plan","voxel-fse")))))))):React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(l)}}),React.createElement("div",{className:"ts-panel active-plan plan-panel"},React.createElement("div",{className:"ac-head"},a,React.createElement("b",null,y("Current plan","voxel-fse"))),React.createElement("div",{className:"ac-body"},React.createElement("p",null,y("Your current plan is ","voxel-fse"),t.planLabel),t.switchPlanUrl&&React.createElement("div",{className:"ac-bottom"},React.createElement("ul",{className:"simplify-ul current-plan-btn"},React.createElement("li",null,React.createElement("a",{href:t.switchPlanUrl,className:"ts-btn ts-btn-1",onClick:c==="editor"?f=>f.preventDefault():void 0},u,y("Switch plan","voxel-fse")))))))):React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(l)}}),React.createElement("div",{className:"ts-panel active-plan plan-panel"},React.createElement("div",{className:"ac-head"},a,React.createElement("b",null,y("Current plan","voxel-fse"))),React.createElement("div",{className:"ac-body"},React.createElement("p",null,y("Please log in to view your membership plan.","voxel-fse")))))}function he(){if(typeof window<"u"&&window.wpApiSettings?.root)return window.wpApiSettings.root;if(typeof document<"u"){const e=document.querySelector('link[rel="https://api.w.org/"]');if(e){const t=e.getAttribute("href");if(t)return t}}if(typeof window<"u"&&window.location?.origin){const e=window.location.pathname.split("/").filter(Boolean),t=["wp-admin","wp-content","wp-includes","wp-json"];return e.length>0&&!t.includes(e[0])?window.location.origin+"/"+e[0]+"/wp-json/":window.location.origin+"/wp-json/"}return"/wp-json/"}function ve(e){const t=(c,l)=>typeof c=="string"?c:typeof c=="number"?String(c):l,n=(c,l)=>{if(c&&typeof c=="object"){const a=c;return{library:t(a.library,l.library),value:t(a.value,l.value)}}return l},r={library:"",value:""};return{planIcon:n(e.planIcon??e.plan_icon??e.ts_plan_ico,r),viewPlansIcon:n(e.viewPlansIcon??e.view_plans_icon??e.ts_viewplan_ico,r),configureIcon:n(e.configureIcon??e.configure_icon??e.ts_configure_ico,r),switchIcon:n(e.switchIcon??e.switch_icon??e.ts_switch_ico,r),cancelIcon:n(e.cancelIcon??e.cancel_icon??e.ts_cancel_ico,r),portalIcon:n(e.portalIcon??e.portal_icon??e.ts_stripe_ico,r)}}function me(){return he()}function ye(e){const t=e.querySelector("script.vxconfig");if(t&&t.textContent)try{const n=JSON.parse(t.textContent);return ve(n)}catch(n){console.error("Failed to parse vxconfig:",n)}return null}async function ge(){const e=me(),t={},n=window.wpApiSettings?.nonce;n&&(t["X-WP-Nonce"]=n);const r=await fetch(`${e}voxel-fse/v1/current-plan`,{credentials:"same-origin",headers:t});if(!r.ok)throw new Error(`Failed to fetch plan data: ${r.statusText}`);return await r.json()}function _e({config:e}){const[t,n]=w.useState(null),[r,c]=w.useState(!0),[l,a]=w.useState(null);w.useEffect(()=>{let u=!1;async function d(){c(!0),a(null);try{const f=await ge();u||n(f)}catch(f){u||a(f instanceof Error?f.message:"Failed to load plan data")}finally{u||c(!1)}}return d(),()=>{u=!0}},[]);const s={blockId:"",planIcon:e.planIcon,viewPlansIcon:e.viewPlansIcon,configureIcon:e.configureIcon,switchIcon:e.switchIcon,cancelIcon:e.cancelIcon,portalIcon:e.portalIcon};return React.createElement(pe,{attributes:s,planData:t,isLoading:r,error:l,context:"frontend"})}function A(){document.querySelectorAll(".voxel-fse-current-plan").forEach(t=>{if(t.dataset.hydrated==="true")return;const n=ye(t);if(!n){console.error("No vxconfig found for current plan block");return}t.dataset.hydrated="true",t.innerHTML="",J.createRoot(t).render(React.createElement(_e,{config:n}))})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",A):A(),window.addEventListener("turbo:load",A),window.addEventListener("pjax:complete",A)})(ReactDOM,React);
