(function(ee,E){"use strict";var H,B,k,z;H={"(":9,"!":8,"*":7,"/":7,"%":7,"+":6,"-":6,"<":5,"<=":5,">":5,">=":5,"==":4,"!=":4,"&&":3,"||":2,"?":1,"?:":1},B=["(","?"],k={")":["("],":":["?","?:"]},z=/<=|>=|==|!=|&&|\|\||\?:|\(|!|\*|\/|%|\+|-|<|>|\?|\)|:/;function te(e){for(var t=[],r=[],s,i,a,l;s=e.match(z);){for(i=s[0],a=e.substr(0,s.index).trim(),a&&t.push(a);l=r.pop();){if(k[i]){if(k[i][0]===l){i=k[i][1]||i;break}}else if(B.indexOf(l)>=0||H[l]<H[i]){r.push(l);break}t.push(l)}k[i]||r.push(i),e=e.substr(s.index+i.length)}return e=e.trim(),e&&t.push(e),t.concat(r.reverse())}var ne={"!":function(e){return!e},"*":function(e,t){return e*t},"/":function(e,t){return e/t},"%":function(e,t){return e%t},"+":function(e,t){return e+t},"-":function(e,t){return e-t},"<":function(e,t){return e<t},"<=":function(e,t){return e<=t},">":function(e,t){return e>t},">=":function(e,t){return e>=t},"==":function(e,t){return e===t},"!=":function(e,t){return e!==t},"&&":function(e,t){return e&&t},"||":function(e,t){return e||t},"?:":function(e,t,r){if(e)throw t;return r}};function re(e,t){var r=[],s,i,a,l,u,f;for(s=0;s<e.length;s++){if(u=e[s],l=ne[u],l){for(i=l.length,a=Array(i);i--;)a[i]=r.pop();try{f=l.apply(null,a)}catch(d){return d}}else t.hasOwnProperty(u)?f=t[u]:f=+u;r.push(f)}return r[0]}function se(e){var t=te(e);return function(r){return re(t,r)}}function ie(e){var t=se(e);return function(r){return+t({n:r})}}var V={contextDelimiter:"",onMissingKey:null};function le(e){var t,r,s;for(t=e.split(";"),r=0;r<t.length;r++)if(s=t[r].trim(),s.indexOf("plural=")===0)return s.substr(7)}function j(e,t){var r;this.data=e,this.pluralForms={},this.options={};for(r in V)this.options[r]=t!==void 0&&r in t?t[r]:V[r]}j.prototype.getPluralForm=function(e,t){var r=this.pluralForms[e],s,i,a;return r||(s=this.data[e][""],a=s["Plural-Forms"]||s["plural-forms"]||s.plural_forms,typeof a!="function"&&(i=le(s["Plural-Forms"]||s["plural-forms"]||s.plural_forms),a=ie(i)),r=this.pluralForms[e]=a),r(t)},j.prototype.dcnpgettext=function(e,t,r,s,i){var a,l,u;return i===void 0?a=0:a=this.getPluralForm(e,i),l=r,t&&(l=t+this.options.contextDelimiter+r),u=this.data[e][l],u&&u[a]?u[a]:(this.options.onMissingKey&&this.options.onMissingKey(r,e),a===0?r:s)};var J={"":{plural_forms(e){return e===1?0:1}}},ae=/^i18n\.(n?gettext|has_translation)(_|$)/,oe=(e,t,r)=>{const s=new j({}),i=new Set,a=()=>{i.forEach(n=>n())},l=n=>(i.add(n),()=>i.delete(n)),u=(n="default")=>s.data[n],f=(n,c="default")=>{s.data[c]={...s.data[c],...n},s.data[c][""]={...J[""],...s.data[c]?.[""]},delete s.pluralForms[c]},d=(n,c)=>{f(n,c),a()},p=(n,c="default")=>{s.data[c]={...s.data[c],...n,"":{...J[""],...s.data[c]?.[""],...n?.[""]}},delete s.pluralForms[c],a()},b=(n,c)=>{s.data={},s.pluralForms={},d(n,c)},_=(n="default",c,m,w,x)=>(s.data[n]||f(void 0,n),s.dcnpgettext(n,c,m,w,x)),A=n=>n||"default",y=(n,c)=>{let m=_(c,void 0,n);return r?(m=r.applyFilters("i18n.gettext",m,n,c),r.applyFilters("i18n.gettext_"+A(c),m,n,c)):m},h=(n,c,m)=>{let w=_(m,c,n);return r?(w=r.applyFilters("i18n.gettext_with_context",w,n,c,m),r.applyFilters("i18n.gettext_with_context_"+A(m),w,n,c,m)):w},C=(n,c,m,w)=>{let x=_(w,void 0,n,c,m);return r?(x=r.applyFilters("i18n.ngettext",x,n,c,m,w),r.applyFilters("i18n.ngettext_"+A(w),x,n,c,m,w)):x},v=(n,c,m,w,x)=>{let L=_(x,w,n,c,m);return r?(L=r.applyFilters("i18n.ngettext_with_context",L,n,c,m,w,x),r.applyFilters("i18n.ngettext_with_context_"+A(x),L,n,c,m,w,x)):L},P=()=>h("ltr","text direction")==="rtl",o=(n,c,m)=>{const w=c?c+""+n:n;let x=!!s.data?.[m??"default"]?.[w];return r&&(x=r.applyFilters("i18n.has_translation",x,n,c,m),x=r.applyFilters("i18n.has_translation_"+A(m),x,n,c,m)),x};if(r){const n=c=>{ae.test(c)&&a()};r.addAction("hookAdded","core/i18n",n),r.addAction("hookRemoved","core/i18n",n)}return{getLocaleData:u,setLocaleData:d,addLocaleData:p,resetLocaleData:b,subscribe:l,__:y,_x:h,_n:C,_nx:v,isRTL:P,hasTranslation:o}};function ce(e){return typeof e!="string"||e===""?(console.error("The namespace must be a non-empty string."),!1):/^[a-zA-Z][a-zA-Z0-9_.\-\/]*$/.test(e)?!0:(console.error("The namespace can only contain numbers, letters, dashes, periods, underscores and slashes."),!1)}var K=ce;function ue(e){return typeof e!="string"||e===""?(console.error("The hook name must be a non-empty string."),!1):/^__/.test(e)?(console.error("The hook name cannot begin with `__`."),!1):/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(e)?!0:(console.error("The hook name can only contain numbers, letters, dashes, periods and underscores."),!1)}var T=ue;function de(e,t){return function(s,i,a,l=10){const u=e[t];if(!T(s)||!K(i))return;if(typeof a!="function"){console.error("The hook callback must be a function.");return}if(typeof l!="number"){console.error("If specified, the hook priority must be a number.");return}const f={callback:a,priority:l,namespace:i};if(u[s]){const d=u[s].handlers;let p;for(p=d.length;p>0&&!(l>=d[p-1].priority);p--);p===d.length?d[p]=f:d.splice(p,0,f),u.__current.forEach(b=>{b.name===s&&b.currentIndex>=p&&b.currentIndex++})}else u[s]={handlers:[f],runs:0};s!=="hookAdded"&&e.doAction("hookAdded",s,i,a,l)}}var U=de;function fe(e,t,r=!1){return function(i,a){const l=e[t];if(!T(i)||!r&&!K(a))return;if(!l[i])return 0;let u=0;if(r)u=l[i].handlers.length,l[i]={runs:l[i].runs,handlers:[]};else{const f=l[i].handlers;for(let d=f.length-1;d>=0;d--)f[d].namespace===a&&(f.splice(d,1),u++,l.__current.forEach(p=>{p.name===i&&p.currentIndex>=d&&p.currentIndex--}))}return i!=="hookRemoved"&&e.doAction("hookRemoved",i,a),u}}var F=fe;function pe(e,t){return function(s,i){const a=e[t];return typeof i<"u"?s in a&&a[s].handlers.some(l=>l.namespace===i):s in a}}var W=pe;function me(e,t,r,s){return function(a,...l){const u=e[t];u[a]||(u[a]={handlers:[],runs:0}),u[a].runs++;const f=u[a].handlers;if(!f||!f.length)return r?l[0]:void 0;const d={name:a,currentIndex:0};async function p(){try{u.__current.add(d);let _=r?l[0]:void 0;for(;d.currentIndex<f.length;)_=await f[d.currentIndex].callback.apply(null,l),r&&(l[0]=_),d.currentIndex++;return r?_:void 0}finally{u.__current.delete(d)}}function b(){try{u.__current.add(d);let _=r?l[0]:void 0;for(;d.currentIndex<f.length;)_=f[d.currentIndex].callback.apply(null,l),r&&(l[0]=_),d.currentIndex++;return r?_:void 0}finally{u.__current.delete(d)}}return(s?p:b)()}}var I=me;function he(e,t){return function(){const s=e[t];return Array.from(s.__current).at(-1)?.name??null}}var $=he;function ye(e,t){return function(s){const i=e[t];return typeof s>"u"?i.__current.size>0:Array.from(i.__current).some(a=>a.name===s)}}var Z=ye;function ge(e,t){return function(s){const i=e[t];if(T(s))return i[s]&&i[s].runs?i[s].runs:0}}var q=ge,_e=class{actions;filters;addAction;addFilter;removeAction;removeFilter;hasAction;hasFilter;removeAllActions;removeAllFilters;doAction;doActionAsync;applyFilters;applyFiltersAsync;currentAction;currentFilter;doingAction;doingFilter;didAction;didFilter;constructor(){this.actions=Object.create(null),this.actions.__current=new Set,this.filters=Object.create(null),this.filters.__current=new Set,this.addAction=U(this,"actions"),this.addFilter=U(this,"filters"),this.removeAction=F(this,"actions"),this.removeFilter=F(this,"filters"),this.hasAction=W(this,"actions"),this.hasFilter=W(this,"filters"),this.removeAllActions=F(this,"actions",!0),this.removeAllFilters=F(this,"filters",!0),this.doAction=I(this,"actions",!1,!1),this.doActionAsync=I(this,"actions",!1,!0),this.applyFilters=I(this,"filters",!0,!1),this.applyFiltersAsync=I(this,"filters",!0,!0),this.currentAction=$(this,"actions"),this.currentFilter=$(this,"filters"),this.doingAction=Z(this,"actions"),this.doingFilter=Z(this,"filters"),this.didAction=q(this,"actions"),this.didFilter=q(this,"filters")}};function ve(){return new _e}var be=ve,Q=be(),{addAction:Le,addFilter:He,removeAction:je,removeFilter:Te,hasAction:Ge,hasFilter:Ne,removeAllActions:Oe,removeAllFilters:De,doAction:Me,doActionAsync:Be,applyFilters:ze,applyFiltersAsync:Ve,currentAction:Je,currentFilter:Ke,doingAction:Ue,doingFilter:We,didAction:$e,didFilter:Ze,actions:qe,filters:Qe}=Q,g=oe(void 0,void 0,Q);g.getLocaleData.bind(g),g.setLocaleData.bind(g),g.resetLocaleData.bind(g),g.subscribe.bind(g);var R=g.__.bind(g);g._x.bind(g),g._n.bind(g),g._nx.bind(g),g.isRTL.bind(g),g.hasTranslation.bind(g);const G={library:"",value:""},we={image:null,features:[]};function N({text:e,icon:t="î —",className:r="",style:s={}}){return typeof window<"u"&&!window.wp?.blockEditor?null:E.createElement("div",{className:`voxel-empty-placeholder ${r}`,style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:e?"8px":"0",background:"rgb(213 216 220 / 80%)",borderRadius:"0",color:"#666",fontSize:"13px",height:"100%",minHeight:"45px",width:"100%",boxSizing:"border-box",...s}},E.createElement("span",{className:"placeholder-icon",style:{fontFamily:"eicons",fontSize:"24px",opacity:.3,lineHeight:1,fontStyle:"normal"}},t),e&&E.createElement("span",{className:"placeholder-text",style:{opacity:.6}},e))}function O(e,t,r){if(!e||!e.library||!e.value)return t??null;const{library:s,value:i}=e;return s==="icon"?React.createElement("i",{className:i,"aria-hidden":"true"}):s==="svg"?React.createElement("img",{src:i,alt:"",className:r,style:{width:"1em",height:"1em"}}):t??null}const D={checkmark:React.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M5 13l4 4L19 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})),crossCircle:React.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2"}),React.createElement("path",{d:"M15 9l-6 6M9 9l6 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})),chevronRightSmall:React.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M9 18l6-6-6-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))};function xe(){if(typeof window<"u"&&window.wpApiSettings?.root)return window.wpApiSettings.root;if(typeof document<"u"){const e=document.querySelector('link[rel="https://api.w.org/"]');if(e){const t=e.getAttribute("href");if(t)return t}}if(typeof window<"u"&&window.location?.origin){const e=window.location.pathname.split("/").filter(Boolean),t=["wp-admin","wp-content","wp-includes","wp-json"];return e.length>0&&!t.includes(e[0])?window.location.origin+"/"+e[0]+"/wp-json/":window.location.origin+"/wp-json/"}return"/wp-json/"}let X=!1;function M(){if(X)return!0;if(!window.Voxel?.mixins?.base)return!1;const e=window.Voxel.mixins.base;return e.mounted&&!e._originalMounted?(e._originalMounted=e.mounted,e.mounted=function(){try{const t=this.$root?.$options?.el||this.$el;if(t){const r=t.closest?.(".elementor-element");if(r)this.widget_id=r.dataset?.id||"";else{const i=t.closest?.("[data-block-id]");this.widget_id=i&&i.dataset?.blockId||""}const s=t.closest?.(".elementor");if(s)this.post_id=s.dataset?.elementorId||"";else{const i=document.body.className.match(/postid-(\d+)/);this.post_id=i?i[1]:""}}e._originalMounted&&e._originalMounted!==e.mounted&&e._originalMounted.call(this)}catch(t){console.warn("[VoxelShim] Error in patched mounted():",t),this.widget_id="",this.post_id=""}},X=!0,console.log("[VoxelShim] Successfully patched Voxel.mixins.base.mounted"),!0):!1}function Y(){if(M())return;let e=0;const t=50,s=setInterval(()=>{if(e++,M()){clearInterval(s);return}e>=t&&(clearInterval(s),console.warn("[VoxelShim] Voxel.mixins.base not found after 5 seconds"))},100);typeof document<"u"&&document.addEventListener("voxel:ready",()=>{M(),clearInterval(s)},{once:!0})}typeof window<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Y,{once:!0}):Y());function Ae(e,t){e.preventDefault();const r=e.currentTarget,s=t.current;if(!s){console.error("[ListingPlans] Plan container not found");return}s.classList.add("vx-pending");const i=r.href,a=window.jQuery;if(!a){console.error("[ListingPlans] jQuery not available"),s.classList.remove("vx-pending");return}a.get(i).always(function(l){if(l.success)l.type==="checkout"&&l.item&&l.checkout_link?(localStorage.setItem("voxel:direct_cart",JSON.stringify({[l.item.key]:l.item.value})),window.location.href=l.checkout_link):l.type==="redirect"&&l.redirect_to?window.location.href=l.redirect_to:l.redirect_url&&(window.location.href=l.redirect_url);else{const u=l.message||window.Voxel_Config?.l10n?.ajaxError||"An error occurred";window.Voxel?.alert?window.Voxel.alert(u,"error"):console.error("[ListingPlans] Error:",u)}s.classList.remove("vx-pending")})}function Ee(e,t){const r=t[e.planKey]||we;return{...e,image:r.image?.url||e.image,features:r.features.length>0?r.features:e.features}}function Re({price:e,groupId:t,isActiveGroup:r,attributes:s,apiData:i,context:a,arrowIconElement:l,planConfig:u,packageData:f,isCurrentPlan:d}){const p=E.useRef(null),b=u?.featured===!0,_=u?.featuredText||"",A=e.alreadyPurchased&&!f,y=["ts-plan-container",r?"":"hidden",b?"plan-featured":"",A?"plan-purchase-disabled":""].filter(Boolean).join(" "),h=(()=>{if(!i?.isLoggedIn)return{text:e.isFree?R("Pick plan","voxel-fse"):R("Buy plan","voxel-fse"),className:"ts-btn ts-btn-2 ts-btn-large vx-pick-plan",showArrow:!0,showCrossIcon:!1,disabled:!1,href:e.link||"#"};if(d)return{text:R("Current plan","voxel-fse"),className:"ts-btn ts-btn-1 ts-btn-large vx-disabled",showArrow:!1,showCrossIcon:!1,disabled:!0,href:"javascript:void(0)"};if(f){const v=e.link?`${e.link}${e.link.includes("?")?"&":"?"}package_id=${f.packageId}`:"#";return{text:R("Use available plan","voxel-fse"),className:"ts-btn ts-btn-1 ts-btn-large vx-pick-plan use-available-plan",showArrow:!0,showCrossIcon:!1,disabled:!1,href:v}}return e.alreadyPurchased?{text:R("Not available","voxel-fse"),className:"ts-btn ts-btn-1 ts-btn-large vx-pick-plan",showArrow:!1,showCrossIcon:!0,disabled:!1,href:e.link||"#"}:{text:e.isFree?R("Pick plan","voxel-fse"):R("Buy plan","voxel-fse"),className:"ts-btn ts-btn-2 ts-btn-large vx-pick-plan",showArrow:!0,showCrossIcon:!1,disabled:!1,href:e.link||"#"}})(),C=E.useCallback(v=>{if(a==="editor"||h.disabled){v.preventDefault();return}Ae(v,p)},[a,h.disabled]);return React.createElement("div",{ref:p,key:`${t}-${e.key}`,className:y,"data-group":t},b&&_&&React.createElement("span",{className:"ts-plan-featured-text"},_),React.createElement("div",{className:"ts-plan-body"},React.createElement("div",{className:"ts-plan-details"},React.createElement("span",{className:"ts-plan-name"},e.label)),React.createElement("div",{className:"ts-plan-pricing",style:{justifyContent:s.pricingAlign}},e.isFree?React.createElement("span",{className:"ts-plan-price"},R("Free","voxel-fse")):React.createElement(React.Fragment,null,e.discountAmount?React.createElement(React.Fragment,null,React.createElement("span",{className:"ts-plan-price"},e.discountAmount),React.createElement("span",{className:"ts-plan-price"},React.createElement("s",null,e.amount))):React.createElement("span",{className:"ts-plan-price"},e.amount),e.period&&React.createElement("div",{className:"ts-price-period"},"/ ",e.period))),e.image&&React.createElement("div",{className:"ts-plan-image flexify"},typeof e.image=="string"?e.image.startsWith("<")?React.createElement("span",{dangerouslySetInnerHTML:{__html:e.image}}):React.createElement("img",{src:e.image,alt:e.label}):null),e.description&&React.createElement("div",{className:"ts-plan-desc",style:{textAlign:s.descAlign}},React.createElement("p",{dangerouslySetInnerHTML:{__html:e.description.replace(/\n/g,"<br />")}})),e.features.length>0&&React.createElement("div",{className:"ts-plan-features",style:{justifyContent:s.listAlign}},React.createElement("ul",{className:"simplify-ul"},e.features.map((v,P)=>React.createElement("li",{key:P},O(v.icon,D.checkmark),React.createElement("span",null,v.text))))),React.createElement("div",{className:"ts-plan-footer"},React.createElement("a",{href:h.href,className:h.className,rel:"nofollow","data-redirect":s.directPurchaseRedirect,onClick:C},h.showCrossIcon&&O(G,D.crossCircle),h.text,h.showArrow&&l),f&&React.createElement("div",{className:"vx-dialog-content min-scroll"},R("You have used","voxel-fse")," ",f.used," ",R("out of","voxel-fse")," ",f.total," ",R("allowed submissions","voxel-fse")))))}function Ce({attributes:e,apiData:t,isLoading:r,error:s,context:i,onTabChange:a}){const[l,u]=E.useState("");E.useEffect(()=>{!l&&e.priceGroups.length>0&&u(e.priceGroups[0].id)},[l,e.priceGroups]);const f=E.useCallback((y,h)=>{y.preventDefault(),u(h),a?.(h)},[a]),d={priceGroups:e.priceGroups??[],planConfigs:e.planConfigs??{},arrowIcon:e.arrowIcon??G,directPurchaseRedirect:e.directPurchaseRedirect??"order",style:{plansColumns:e.plansColumns??3,plansColumns_tablet:e.plansColumns_tablet,plansColumns_mobile:e.plansColumns_mobile,plansGap:e.plansGap??20,tabsDisabled:e.tabsDisabled??!1,tabsJustify:e.tabsJustify??"flex-start",pricingAlign:e.pricingAlign??"flex-start",contentAlign:e.contentAlign??"flex-start",descAlign:e.descAlign??"left",listAlign:e.listAlign??"flex-start"}},p=O(e.arrowIcon,D.chevronRightSmall);if(r)return React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(d)}}),i==="editor"&&React.createElement(N,null));if(s)return React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(d)}}),i==="editor"&&React.createElement(N,null));if(e.priceGroups.length===0)return React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(d)}}),i==="editor"&&React.createElement(N,null));const b=y=>{if(!t)return[];const h=[];return y.prices.forEach(C=>{const P=t.priceGroups.find(o=>o.prices.some(n=>n.planKey===C))?.prices.find(o=>o.planKey===C);P&&h.push(Ee(P,e.planConfigs))}),h},_={"--ts-plans-columns":e.plansColumns,"--ts-plans-gap":`${e.plansGap}px`},A=l||(e.priceGroups[0]?.id??"");return React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(d)}}),!e.tabsDisabled&&e.priceGroups.length>1&&React.createElement("ul",{className:"ts-plan-tabs simplify-ul flexify ts-generic-tabs",style:{justifyContent:e.tabsJustify}},e.priceGroups.map(y=>React.createElement("li",{key:y.id,className:y.id===A?"ts-tab-active":""},React.createElement("a",{href:"#","data-id":y.id,onClick:h=>f(h,y.id)},y.label)))),React.createElement("div",{className:"ts-plans-list ts-paid-listings-plans",style:_},e.priceGroups.map(y=>{const h=b(y),C=y.id===A;return h.map(v=>{const P=e.planConfigs[v.planKey],o=t?.packagesByPlan?.[v.planKey],n=t?.process==="switch"&&t?.currentPlanKey===v.planKey;return React.createElement(Re,{key:`${y.id}-${v.key}`,price:v,groupId:y.id,isActiveGroup:C,attributes:e,apiData:t,context:i,arrowIconElement:p,planConfig:P,packageData:o,isCurrentPlan:n})})})))}function Pe(e){const t=(o,n)=>typeof o=="string"?o:typeof o=="number"?String(o):n,r=(o,n)=>{if(typeof o=="number")return o;if(typeof o=="string"){const c=parseFloat(o);return isNaN(c)?n:c}return n},s=(o,n)=>typeof o=="boolean"?o:o==="yes"||o==="1"||o===1?!0:o==="no"||o==="0"||o===0?!1:n,i=o=>{if(o&&typeof o=="object"&&!Array.isArray(o)){const n=o;return{library:t(n.library,""),value:t(n.value,"")}}return{library:"",value:""}},a=o=>{if(o&&typeof o=="object"&&!Array.isArray(o)){const n=o;return{id:t(n.id??n._id,""),text:t(n.text??n.feature_text,""),icon:i(n.icon??n.feature_ico)}}return{id:"",text:"",icon:{library:"",value:""}}},l=o=>{if(o&&typeof o=="object"&&!Array.isArray(o)){const n=o,c=n.image;return{image:c?{id:r(c.id,0),url:t(c.url,"")}:null,features:Array.isArray(n.features)?n.features.map(a):[],featured:s(n.featured,!1),featuredText:t(n.featuredText??n.featured_text,"")}}return{image:null,features:[]}},u=o=>{if(o&&typeof o=="object"&&!Array.isArray(o)){const n=o;return{id:t(n.id??n._id,""),label:t(n.label??n.group_label,""),icon:i(n.icon),prices:Array.isArray(n.prices)?n.prices.map(c=>t(c,"")):[]}}return{id:"",label:"",icon:{library:"",value:""},prices:[]}},f=o=>{const n=o&&typeof o=="object"&&!Array.isArray(o)?o:{};return{plansColumns:r(n.plansColumns??n.plans_columns??n.ts_plans_columns,3),plansColumns_tablet:n.plansColumns_tablet!==void 0?r(n.plansColumns_tablet,void 0):void 0,plansColumns_mobile:n.plansColumns_mobile!==void 0?r(n.plansColumns_mobile,void 0):void 0,plansGap:r(n.plansGap??n.plans_gap??n.pplans_gap,20),tabsDisabled:s(n.tabsDisabled??n.tabs_disabled??n.pltabs_disable,!1),tabsJustify:t(n.tabsJustify??n.tabs_justify??n.pltabs_justify,"flex-start"),pricingAlign:t(n.pricingAlign??n.pricing_align,"flex-start"),contentAlign:t(n.contentAlign??n.content_align,"flex-start"),descAlign:t(n.descAlign??n.desc_align,"left"),listAlign:t(n.listAlign??n.list_align,"flex-start")}},d=e.priceGroups??e.price_groups??e.ts_price_groups,p=Array.isArray(d)?d.map(u):[],b=e.planConfigs??e.plan_configs,_={};if(b&&typeof b=="object"&&!Array.isArray(b)){const o=b;for(const n of Object.keys(o))_[n]=l(o[n])}const A=i(e.arrowIcon??e.arrow_icon??e.ts_arrow_right),y=e.directPurchaseRedirect??e.direct_purchase_redirect??e.ts_direct_purchase_flow,h=y==="new_post"?"new_post":y==="custom"?"custom":"order",C=t(e.directPurchasePostType??e.direct_purchase_post_type??e.ts_direct_purchase_flow_post_type,"")||void 0,v=t(e.directPurchaseCustomUrl??e.direct_purchase_custom_url??e.ts_direct_purchase_flow_custom_redirect,"")||void 0,P=f(e.style);return{priceGroups:p,planConfigs:_,arrowIcon:A,directPurchaseRedirect:h,directPurchasePostType:C,directPurchaseCustomUrl:v,style:P}}function ke(){return xe()}function Fe(e){const t=e.querySelector("script.vxconfig");if(t&&t.textContent)try{const r=JSON.parse(t.textContent);return Pe(r)}catch(r){console.error("Failed to parse vxconfig:",r)}return null}async function Ie(){const e=ke(),t={},r=window.wpApiSettings?.nonce;r&&(t["X-WP-Nonce"]=r);const s=await fetch(`${e}voxel-fse/v1/listing-plans`,{credentials:"same-origin",headers:t});if(!s.ok)throw new Error(`Failed to fetch plans data: ${s.statusText}`);return await s.json()}function Se({config:e}){const[t,r]=E.useState(null),[s,i]=E.useState(!0),[a,l]=E.useState(null);E.useEffect(()=>{let f=!1;async function d(){i(!0),l(null);try{const p=await Ie();f||r(p)}catch(p){f||l(p instanceof Error?p.message:"Failed to load plans data")}finally{f||i(!1)}}return d(),()=>{f=!0}},[]);const u={blockId:"",priceGroups:e.priceGroups,planConfigs:e.planConfigs,arrowIcon:e.arrowIcon??G,directPurchaseRedirect:e.directPurchaseRedirect??"order",directPurchasePostType:e.directPurchasePostType,directPurchaseCustomUrl:e.directPurchaseCustomUrl,plansColumns:e.style.plansColumns??3,plansColumns_tablet:e.style.plansColumns_tablet,plansColumns_mobile:e.style.plansColumns_mobile,plansGap:e.style.plansGap??20,plansBorderRadius:0,bodyPadding:20,bodyContentGap:15,imagePadding:{top:"0",right:"0",bottom:"0",left:"0"},imageHeight:0,pricingAlign:e.style.pricingAlign??"flex-start",contentAlign:e.style.contentAlign??"flex-start",descAlign:e.style.descAlign??"left",listAlign:e.style.listAlign??"flex-start",listGap:10,listIconSize:18,listIconRightPad:8,tabsDisabled:e.style.tabsDisabled??!1,tabsJustify:e.style.tabsJustify??"flex-start",tabsPadding:{top:"0",right:"0",bottom:"0",left:"0"},tabsMargin:{top:"0",right:"15",bottom:"15",left:"0"},tabsBorderRadius:0,primaryBtnRadius:5,primaryBtnHeight:0,primaryBtnIconSize:18,primaryBtnIconPad:8,secondaryBtnRadius:5,secondaryBtnHeight:0,secondaryBtnIconSize:18,secondaryBtnIconPad:8};return React.createElement(Ce,{attributes:u,apiData:t,isLoading:s,error:a,context:"frontend"})}function S(){document.querySelectorAll(".voxel-fse-listing-plans").forEach(t=>{if(t.dataset.hydrated==="true")return;const r=Fe(t);if(!r){console.error("No vxconfig found for listing plans block");return}t.dataset.hydrated="true",t.innerHTML="",ee.createRoot(t).render(React.createElement(Se,{config:r}))})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",S):S(),window.addEventListener("turbo:load",S),window.addEventListener("pjax:complete",S)})(ReactDOM,React);
