var VoxelFSEMap=(function(y){"use strict";let C=!1;function b(){if(C)return!0;if(!window.Voxel?.mixins?.base)return!1;const e=window.Voxel.mixins.base;return e.mounted&&!e._originalMounted?(e._originalMounted=e.mounted,e.mounted=function(){try{const r=this.$root?.$options?.el||this.$el;if(r){const o=r.closest?.(".elementor-element");if(o)this.widget_id=o.dataset?.id||"";else{const n=r.closest?.("[data-block-id]");this.widget_id=n&&n.dataset?.blockId||""}const t=r.closest?.(".elementor");if(t)this.post_id=t.dataset?.elementorId||"";else{const n=document.body.className.match(/postid-(\d+)/);this.post_id=n?n[1]:""}}e._originalMounted&&e._originalMounted!==e.mounted&&e._originalMounted.call(this)}catch(r){console.warn("[VoxelShim] Error in patched mounted():",r),this.widget_id="",this.post_id=""}},C=!0,console.log("[VoxelShim] Successfully patched Voxel.mixins.base.mounted"),!0):!1}function k(){if(b())return;let e=0;const r=50,t=setInterval(()=>{if(e++,b()){clearInterval(t);return}e>=r&&(clearInterval(t),console.warn("[VoxelShim] Voxel.mixins.base not found after 5 seconds"))},100);typeof document<"u"&&document.addEventListener("voxel:ready",()=>{b(),clearInterval(t)},{once:!0})}typeof window<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",k,{once:!0}):k());function w(){if(typeof window>"u")return"desktop";const e=window.innerWidth;return e<768?"mobile":e<1024?"tablet":"desktop"}function s(e,r){if(!e)return r;const o=w();return o==="mobile"?e.mobile!==void 0?e.mobile:e.tablet!==void 0?e.tablet:e.desktop!==void 0?e.desktop:r:o==="tablet"&&e.tablet!==void 0?e.tablet:e.desktop!==void 0?e.desktop:r}function x(e){if(!e?.enable)return"none";const{horizontal:r=0,vertical:o=0,blur:t=0,spread:n=0,color:c="rgba(0,0,0,0.1)",position:i}=e;return`${i==="inset"?"inset ":""}${r}px ${o}px ${t}px ${n}px ${c}`}function _(e){if(!e)return{};const r={};return e.fontFamily&&(r["font-family"]=e.fontFamily),e.fontSize&&(r["font-size"]=`${e.fontSize}${e.fontSizeUnit||"px"}`),e.fontWeight&&(r["font-weight"]=e.fontWeight),e.fontStyle&&(r["font-style"]=e.fontStyle),e.textTransform&&(r["text-transform"]=e.textTransform),e.textDecoration&&(r["text-decoration"]=e.textDecoration),e.lineHeight&&(r["line-height"]=`${e.lineHeight}${e.lineHeightUnit||""}`),e.letterSpacing&&(r["letter-spacing"]=`${e.letterSpacing}${e.letterSpacingUnit||"px"}`),r}function M(e,r){e.style.width="100%";const o=r.styles;if(!o)return;const t=s(o.height,400),n=o.heightUnit||"px",c=s(o.enableCalcHeight,!1),i=s(o.calcHeight,"");c&&i?e.style.setProperty("--vx-map-height",i):e.style.setProperty("--vx-map-height",`${t}${n}`);const f=s(o.borderRadius,0);if(e.style.setProperty("--vx-map-radius",`${f}px`),o.cluster){const u=s(o.cluster.size,40);e.style.setProperty("--vx-cluster-size",`${u}px`);const m=s(o.cluster.bgColor,"");m&&e.style.setProperty("--vx-cluster-bg",m);const v=s(o.cluster.radius,50);e.style.setProperty("--vx-cluster-radius",`${v}%`);const h=s(o.cluster.textColor,"");if(h&&e.style.setProperty("--vx-cluster-text-color",h),e.style.setProperty("--vx-cluster-shadow",x(o.cluster.shadow)),o.cluster.typography){const d=_(o.cluster.typography);d["font-family"]&&e.style.setProperty("--vx-cluster-font-family",d["font-family"]),d["font-size"]&&e.style.setProperty("--vx-cluster-font-size",d["font-size"]),d["font-weight"]&&e.style.setProperty("--vx-cluster-font-weight",d["font-weight"]),d["font-style"]&&e.style.setProperty("--vx-cluster-font-style",d["font-style"]),d["line-height"]&&e.style.setProperty("--vx-cluster-line-height",d["line-height"]),d["letter-spacing"]&&e.style.setProperty("--vx-cluster-letter-spacing",d["letter-spacing"]),d["text-transform"]&&e.style.setProperty("--vx-cluster-text-transform",d["text-transform"]),d["text-decoration"]&&e.style.setProperty("--vx-cluster-text-decoration",d["text-decoration"])}}if(o.iconMarker){const u=s(o.iconMarker.size,42);e.style.setProperty("--vx-icon-marker-size",`${u}px`);const m=s(o.iconMarker.iconSize,24);e.style.setProperty("--vx-icon-marker-icon-size",`${m}px`);const v=s(o.iconMarker.radius,50);e.style.setProperty("--vx-icon-marker-radius",`${v}%`),e.style.setProperty("--vx-icon-marker-shadow",x(o.iconMarker.shadow));const h=s(o.iconMarker.staticBg,"");h&&e.style.setProperty("--vx-icon-marker-bg",h);const d=s(o.iconMarker.staticBgActive,"");d&&e.style.setProperty("--vx-icon-marker-bg-active",d);const l=s(o.iconMarker.staticIconColor,"");l&&e.style.setProperty("--vx-icon-marker-icon-color",l);const a=s(o.iconMarker.staticIconColorActive,"");a&&e.style.setProperty("--vx-icon-marker-icon-color-active",a)}if(o.textMarker){const u=s(o.textMarker.bgColor,"");u&&e.style.setProperty("--vx-text-marker-bg",u);const m=s(o.textMarker.bgColorActive,"");m&&e.style.setProperty("--vx-text-marker-bg-active",m);const v=s(o.textMarker.textColor,"");v&&e.style.setProperty("--vx-text-marker-text-color",v);const h=s(o.textMarker.textColorActive,"");h&&e.style.setProperty("--vx-text-marker-text-color-active",h);const d=s(o.textMarker.radius,4);if(e.style.setProperty("--vx-text-marker-radius",`${d}px`),e.style.setProperty("--vx-text-marker-shadow",x(o.textMarker.shadow)),o.textMarker.typography){const a=_(o.textMarker.typography);a["font-family"]&&e.style.setProperty("--vx-text-marker-font-family",a["font-family"]),a["font-size"]&&e.style.setProperty("--vx-text-marker-font-size",a["font-size"]),a["font-weight"]&&e.style.setProperty("--vx-text-marker-font-weight",a["font-weight"]),a["font-style"]&&e.style.setProperty("--vx-text-marker-font-style",a["font-style"]),a["line-height"]&&e.style.setProperty("--vx-text-marker-line-height",a["line-height"]),a["letter-spacing"]&&e.style.setProperty("--vx-text-marker-letter-spacing",a["letter-spacing"]),a["text-transform"]&&e.style.setProperty("--vx-text-marker-text-transform",a["text-transform"]),a["text-decoration"]&&e.style.setProperty("--vx-text-marker-text-decoration",a["text-decoration"])}const l=s(o.textMarker.padding,{});if(l){const a=l;a.top&&e.style.setProperty("--vx-text-marker-padding-top",a.top),a.right&&e.style.setProperty("--vx-text-marker-padding-right",a.right),a.bottom&&e.style.setProperty("--vx-text-marker-padding-bottom",a.bottom),a.left&&e.style.setProperty("--vx-text-marker-padding-left",a.left)}}if(o.imageMarker){const u=s(o.imageMarker.size,42);e.style.setProperty("--vx-image-marker-size",`${u}px`);const m=s(o.imageMarker.radius,50);e.style.setProperty("--vx-image-marker-radius",`${m}%`),e.style.setProperty("--vx-image-marker-shadow",x(o.imageMarker.shadow))}if(o.popup){const u=s(o.popup.cardWidth,320);e.style.setProperty("--vx-popup-card-width",`${u}px`),o.popup.loaderColor1&&e.style.setProperty("--vx-popup-loader-color1",o.popup.loaderColor1),o.popup.loaderColor2&&e.style.setProperty("--vx-popup-loader-color2",o.popup.loaderColor2)}if(o.searchBtn){const u=s(o.searchBtn.textColor,"");u&&e.style.setProperty("--vx-search-btn-text-color",u);const m=s(o.searchBtn.bgColor,"");m&&e.style.setProperty("--vx-search-btn-bg",m);const v=s(o.searchBtn.iconColor,"");v&&e.style.setProperty("--vx-search-btn-icon-color",v);const h=s(o.searchBtn.iconColorActive,"");h&&e.style.setProperty("--vx-search-btn-icon-color-active",h);const d=s(o.searchBtn.radius,4);if(e.style.setProperty("--vx-search-btn-radius",`${d}px`),o.searchBtn.typography){const l=_(o.searchBtn.typography);l["font-family"]&&e.style.setProperty("--vx-search-btn-font-family",l["font-family"]),l["font-size"]&&e.style.setProperty("--vx-search-btn-font-size",l["font-size"]),l["font-weight"]&&e.style.setProperty("--vx-search-btn-font-weight",l["font-weight"]),l["font-style"]&&e.style.setProperty("--vx-search-btn-font-style",l["font-style"]),l["line-height"]&&e.style.setProperty("--vx-search-btn-line-height",l["line-height"]),l["letter-spacing"]&&e.style.setProperty("--vx-search-btn-letter-spacing",l["letter-spacing"]),l["text-transform"]&&e.style.setProperty("--vx-search-btn-text-transform",l["text-transform"]),l["text-decoration"]&&e.style.setProperty("--vx-search-btn-text-decoration",l["text-decoration"])}if(o.searchBtn.checkmarkIcon){const l=o.searchBtn.checkmarkIcon;e.dataset.checkmarkIcon=JSON.stringify(l)}}if(o.navBtn){o.navBtn.iconColor&&e.style.setProperty("--vx-nav-btn-icon-color",o.navBtn.iconColor),o.navBtn.iconColorHover&&e.style.setProperty("--vx-nav-btn-icon-color-hover",o.navBtn.iconColorHover);const u=s(o.navBtn.iconSize,20);e.style.setProperty("--vx-nav-btn-icon-size",`${u}px`),o.navBtn.bgColor&&e.style.setProperty("--vx-nav-btn-bg",o.navBtn.bgColor),o.navBtn.bgColorHover&&e.style.setProperty("--vx-nav-btn-bg-hover",o.navBtn.bgColorHover);const m=s(o.navBtn.radius,4);e.style.setProperty("--vx-nav-btn-radius",`${m}px`);const v=s(o.navBtn.size,36);if(e.style.setProperty("--vx-nav-btn-size",`${v}px`),e.style.setProperty("--vx-nav-btn-shadow",x(o.navBtn.shadow)),o.navBtn.borderType&&o.navBtn.borderType!=="none"){e.style.setProperty("--vx-nav-btn-border-style",o.navBtn.borderType);const h=s(o.navBtn.borderWidth,0);e.style.setProperty("--vx-nav-btn-border-width",`${h}px`),o.navBtn.borderColor&&e.style.setProperty("--vx-nav-btn-border-color",o.navBtn.borderColor),o.navBtn.borderColorHover&&e.style.setProperty("--vx-nav-btn-border-color-hover",o.navBtn.borderColorHover)}}}function B(e){const r=e.center||{},o={lat:Number(e.lat||r.lat||r.latitude||51.492),lng:Number(e.lng||r.lng||r.longitude||-.13)},t=e.styles||{},n=(i,f)=>i?{desktop:i.desktop!==void 0?i.desktop:f,tablet:i.tablet!==void 0?i.tablet:i.desktop!==void 0?i.desktop:f,mobile:i.mobile!==void 0?i.mobile:i.tablet!==void 0?i.tablet:i.desktop!==void 0?i.desktop:f}:{desktop:f,tablet:f,mobile:f},c=i=>i?{enable:!!i.enable,horizontal:Number(i.horizontal||i.h||0),vertical:Number(i.vertical||i.v||0),blur:Number(i.blur||0),spread:Number(i.spread||0),color:String(i.color||"rgba(0,0,0,0.1)"),position:i.position||(i.inset?"inset":"outline")}:{enable:!1};return{source:e.source||"search-form",center:o,zoom:Number(e.zoom||e.initialZoom||11),minZoom:Number(e.minZoom||e.min_zoom||2),maxZoom:Number(e.maxZoom||e.max_zoom||18),dragSearch:e.dragSearch!==void 0?!!e.dragSearch:e.drag_search!==void 0?!!e.drag_search:!0,dragSearchMode:e.dragSearchMode||e.drag_search_mode||"manual",dragSearchDefault:e.dragSearchDefault||e.drag_search_default||"unchecked",searchFormId:String(e.searchFormId||e.search_form_id||""),styles:{height:n(t.height||t.mapHeight,400),heightUnit:String(t.heightUnit||t.height_unit||"px"),enableCalcHeight:n(t.enableCalcHeight||t.enable_calc_height,!1),calcHeight:n(t.calcHeight||t.calc_height,""),borderRadius:n(t.borderRadius||t.border_radius,0),cluster:t.cluster?{size:n(t.cluster.size,40),bgColor:n(t.cluster.bgColor||t.cluster.bg_color,""),radius:n(t.cluster.radius,50),textColor:n(t.cluster.textColor||t.cluster.text_color,""),shadow:c(t.cluster.shadow),typography:t.cluster.typography||{}}:{size:{desktop:40},bgColor:{desktop:""},radius:{desktop:50},textColor:{desktop:""},shadow:{enable:!1},typography:{}},iconMarker:t.iconMarker||t.icon_marker?{size:n((t.iconMarker||t.icon_marker).size,42),iconSize:n((t.iconMarker||t.icon_marker).iconSize||(t.iconMarker||t.icon_marker).icon_size,24),radius:n((t.iconMarker||t.icon_marker).radius,50),shadow:c((t.iconMarker||t.icon_marker).shadow),staticBg:n((t.iconMarker||t.icon_marker).staticBg||(t.iconMarker||t.icon_marker).static_bg,""),staticBgActive:n((t.iconMarker||t.icon_marker).staticBgActive||(t.iconMarker||t.icon_marker).static_bg_active,""),staticIconColor:n((t.iconMarker||t.icon_marker).staticIconColor||(t.iconMarker||t.icon_marker).static_icon_color,""),staticIconColorActive:n((t.iconMarker||t.icon_marker).staticIconColorActive||(t.iconMarker||t.icon_marker).static_icon_color_active,"")}:{size:{desktop:42},iconSize:{desktop:24},radius:{desktop:50},shadow:{enable:!1},staticBg:{desktop:""},staticBgActive:{desktop:""},staticIconColor:{desktop:""},staticIconColorActive:{desktop:""}},textMarker:t.textMarker||t.text_marker?{bgColor:n((t.textMarker||t.text_marker).bgColor||(t.textMarker||t.text_marker).bg_color,""),bgColorActive:n((t.textMarker||t.text_marker).bgColorActive||(t.textMarker||t.text_marker).bg_color_active,""),textColor:n((t.textMarker||t.text_marker).textColor||(t.textMarker||t.text_marker).text_color,""),textColorActive:n((t.textMarker||t.text_marker).textColorActive||(t.textMarker||t.text_marker).text_color_active,""),radius:n((t.textMarker||t.text_marker).radius,4),shadow:c((t.textMarker||t.text_marker).shadow),typography:(t.textMarker||t.text_marker).typography||{},padding:n((t.textMarker||t.text_marker).padding,{})}:{bgColor:{desktop:""},bgColorActive:{desktop:""},textColor:{desktop:""},textColorActive:{desktop:""},radius:{desktop:4},shadow:{enable:!1},typography:{},padding:{desktop:{}}},imageMarker:t.imageMarker||t.image_marker?{size:n((t.imageMarker||t.image_marker).size,42),radius:n((t.imageMarker||t.image_marker).radius,50),shadow:c((t.imageMarker||t.image_marker).shadow)}:{size:{desktop:42},radius:{desktop:50},shadow:{enable:!1}},popup:t.popup?{cardWidth:n(t.popup.cardWidth||t.popup.card_width,320),loaderColor1:String(t.popup.loaderColor1||t.popup.loader_color_1||""),loaderColor2:String(t.popup.loaderColor2||t.popup.loader_color_2||"")}:{cardWidth:{desktop:320},loaderColor1:"",loaderColor2:""},searchBtn:t.searchBtn||t.search_btn?{textColor:n((t.searchBtn||t.search_btn).textColor||(t.searchBtn||t.search_btn).text_color,""),bgColor:n((t.searchBtn||t.search_btn).bgColor||(t.searchBtn||t.search_btn).bg_color,""),iconColor:n((t.searchBtn||t.search_btn).iconColor||(t.searchBtn||t.search_btn).icon_color,""),iconColorActive:n((t.searchBtn||t.search_btn).iconColorActive||(t.searchBtn||t.search_btn).icon_color_active,""),radius:n((t.searchBtn||t.search_btn).radius||(t.searchBtn||t.search_btn).radius,4),typography:(t.searchBtn||t.search_btn).typography||{},checkmarkIcon:(t.searchBtn||t.search_btn).checkmarkIcon||{}}:{textColor:{desktop:""},bgColor:{desktop:""},iconColor:{desktop:""},iconColorActive:{desktop:""},radius:{desktop:4},typography:{},checkmarkIcon:{}},navBtn:t.navBtn||t.nav_btn?{iconColor:String((t.navBtn||t.nav_btn).iconColor||(t.navBtn||t.nav_btn).icon_color||""),iconColorHover:String((t.navBtn||t.nav_btn).iconColorHover||(t.navBtn||t.nav_btn).icon_color_hover||""),iconSize:n((t.navBtn||t.nav_btn).iconSize||(t.navBtn||t.nav_btn).icon_size,20),bgColor:String((t.navBtn||t.nav_btn).bgColor||(t.navBtn||t.nav_btn).bg_color||""),bgColorHover:String((t.navBtn||t.nav_btn).bgColorHover||(t.navBtn||t.nav_btn).bg_color_hover||""),radius:n((t.navBtn||t.nav_btn).radius,4),size:n((t.navBtn||t.nav_btn).size,36),shadow:c((t.navBtn||t.nav_btn).shadow),borderType:String((t.navBtn||t.nav_btn).borderType||(t.navBtn||t.nav_btn).border_type||"none"),borderWidth:n((t.navBtn||t.nav_btn).borderWidth||(t.navBtn||t.nav_btn).border_width,0),borderColor:String((t.navBtn||t.nav_btn).borderColor||(t.navBtn||t.nav_btn).border_color||""),borderColorHover:String((t.navBtn||t.nav_btn).borderColorHover||(t.navBtn||t.nav_btn).border_color_hover||"")}:{iconSize:{desktop:20},radius:{desktop:4},size:{desktop:36},shadow:{enable:!1},borderType:"none",borderWidth:{desktop:0}}}}}function I(){if(typeof window<"u"&&window.wpApiSettings?.root)return window.wpApiSettings.root.replace(/\/wp-json\/?$/,"")+"?vx=1";if(typeof document<"u"){const e=document.querySelector('link[rel="https://api.w.org/"]');if(e){const r=e.getAttribute("href");if(r)return r.replace(/\/wp-json\/?$/,"")+"?vx=1"}}return typeof window<"u"?window.location.origin+"?vx=1":"/?vx=1"}function A(){const e=I();try{return new URL(e).pathname.replace(/\/$/,"")}catch{return""}}function $(){if(typeof window<"u"&&window.wpApiSettings?.root)return window.wpApiSettings.root;if(typeof document<"u"){const r=document.querySelector('link[rel="https://api.w.org/"]');if(r){const o=r.getAttribute("href");if(o)return o}}const e=A();return typeof window<"u"?window.location.origin+e+"/wp-json/":"/wp-json/"}k();function H(){return $()}function S(e){const r=e.querySelector("script.vxconfig");if(r&&r.textContent)try{return JSON.parse(r.textContent)}catch(o){console.error("[Map Block] Failed to parse vxconfig:",o)}return null}function L(e,r){if(!e)return r;const o=typeof window<"u"?window.innerWidth:1200;let t="desktop";return o<768?t="mobile":o<1024&&(t="tablet"),t==="mobile"?e.mobile!==void 0?e.mobile:e.tablet!==void 0?e.tablet:e.desktop!==void 0?e.desktop:r:t==="tablet"&&e.tablet!==void 0?e.tablet:e.desktop!==void 0?e.desktop:r}function E(e,r){if(!r.dragSearch||r.source!=="search-form")return null;const o=document.createElement("div");if(o.className="ts-map-drag",r.dragSearchMode==="automatic"){const t=r.dragSearchDefault==="checked";o.innerHTML=`
			<a href="#" class="ts-map-btn ts-drag-toggle ${t?"active":""}">
				<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="ts-checkmark-icon">
					<path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
				</svg>
				Search as I move the map
			</a>
		`}else o.innerHTML=`
			<a href="#" class="ts-search-area hidden ts-map-btn">
				<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="ts-search-icon">
					<path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
				</svg>
				Search this area
			</a>
		`;return e.insertBefore(o,e.firstChild),o}function V(e){const r=document.createElement("a");return r.href="#",r.rel="nofollow",r.role="button",r.className="vx-geolocate-me hidden",r.setAttribute("aria-label","Share your location"),r.innerHTML=`
		<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
			<path d="M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"/>
		</svg>
	`,e.appendChild(r),r}function P(e,r,o){const t=document.createElement("div");return t.className=r.source==="current-post"?"ts-map ts-map-autoload":"ts-map",t.setAttribute("data-config",JSON.stringify(o)),e.appendChild(t),t}async function T(e,r){const o=D();if(!o){console.warn("[Map Block] No post ID found for current-post mode");return}const n=`${H()}voxel-fse/v1/map/post-location?post_id=${o}`;try{const c=await fetch(n);if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);const i=await c.json(),f={center:{lat:i.latitude,lng:i.longitude},zoom:r.zoom,minZoom:r.minZoom,maxZoom:r.maxZoom,markers:[{lat:i.latitude,lng:i.longitude,template:encodeURIComponent(i.marker),uriencoded:!0}]};e.innerHTML="",P(e,r,f).dispatchEvent(new CustomEvent("voxel:map-ready",{bubbles:!0}))}catch(c){console.error("[Map Block] Failed to fetch post location:",c)}}function U(e,r){e.innerHTML="";const o={center:r.center,zoom:r.zoom,minZoom:r.minZoom,maxZoom:r.maxZoom},t=E(e,r),n=P(e,r,o);V(e),N(n,o,e);const c=r.searchFormId;c&&window.addEventListener("voxel-search-submit",(i=>{i.detail.targetId===c&&R(e,n,i.detail)})),t&&Z(t,n)}function N(e,r,o){const t=window.Voxel;if(!t?.Maps){console.warn("[Map Block] Voxel.Maps not available");return}t.Maps.await(()=>{try{const c=o.style.getPropertyValue("--vx-map-height")||"400px";e.style.height=c;const i=new t.Maps.LatLng(r.center.lat,r.center.lng),f=new t.Maps.Map({el:e,center:i,zoom:r.zoom,minZoom:r.minZoom,maxZoom:r.maxZoom});e._voxelMap=f,console.log("[Map Block] Map initialized successfully")}catch(n){console.error("[Map Block] Failed to initialize map:",n)}})}function R(e,r,o,t){console.log("[Map Block] Search submitted:",o);const n=e.closest(".ts-map-widget");n&&n.dispatchEvent(new CustomEvent("search:updated",{detail:o,bubbles:!0}))}function Z(e,r,o){const t=e.querySelector(".ts-drag-toggle"),n=e.querySelector(".ts-search-area");t&&t.addEventListener("click",c=>{c.preventDefault(),t.classList.toggle("active")}),n&&n.addEventListener("click",c=>{c.preventDefault();const i=r.closest(".ts-map-widget");i&&i.dispatchEvent(new CustomEvent("search:area",{bubbles:!0}))})}function D(){const e=document.body.className.split(" ");for(const o of e){const t=o.match(/^postid-(\d+)$/);if(t)return parseInt(t[1],10)}const r=document.querySelector("[data-post-id]");if(r){const o=r.getAttribute("data-post-id");if(o)return parseInt(o,10)}if(typeof window<"u"){const o=window.wp_post_id;if(o)return o}return null}function g(){document.querySelectorAll(".voxel-fse-map").forEach(r=>{if(r.getAttribute("data-hydrated")==="true")return;const o=S(r);if(!o){console.warn("[Map Block] No vxconfig found for container:",r);return}const t=B(o);r.setAttribute("data-hydrated","true"),M(r,t),t.source==="current-post"?T(r,t):U(r,t),requestAnimationFrame(()=>{window.jQuery&&window.jQuery(document).trigger("voxel:markup-update")})})}function p(e){const r=window.Voxel;if(r?.Maps)r.Maps.await(e);else{document.addEventListener("maps:loaded",e,{once:!0});const o=setInterval(()=>{const t=window.Voxel;t?.Maps&&(clearInterval(o),t.Maps.await(e))},100);setTimeout(()=>{clearInterval(o),e()},1e4)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{p(g)}):p(g),window.addEventListener("turbo:load",()=>{p(g)}),window.addEventListener("pjax:complete",()=>{p(g)});let z;return window.addEventListener("resize",()=>{clearTimeout(z),z=setTimeout(()=>{document.querySelectorAll('.voxel-fse-map[data-hydrated="true"]').forEach(r=>{if(r.getAttribute("data-hydrated")!=="true")return;const t=S(r);if(t){const n=B(t);M(r,n)}})},250)}),y.getResponsiveValueClient=L,Object.defineProperty(y,Symbol.toStringTag,{value:"Module"}),y})({});
