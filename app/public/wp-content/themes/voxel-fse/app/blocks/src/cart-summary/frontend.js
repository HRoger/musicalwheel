(function(xe,v){"use strict";var ee,ae,q,ie;ee={"(":9,"!":8,"*":7,"/":7,"%":7,"+":6,"-":6,"<":5,"<=":5,">":5,">=":5,"==":4,"!=":4,"&&":3,"||":2,"?":1,"?:":1},ae=["(","?"],q={")":["("],":":["?","?:"]},ie=/<=|>=|==|!=|&&|\|\||\?:|\(|!|\*|\/|%|\+|-|<|>|\?|\)|:/;function ke(e){for(var t=[],o=[],r,n,l,i;r=e.match(ie);){for(n=r[0],l=e.substr(0,r.index).trim(),l&&t.push(l);i=o.pop();){if(q[n]){if(q[n][0]===i){n=q[n][1]||n;break}}else if(ae.indexOf(i)>=0||ee[i]<ee[n]){o.push(i);break}t.push(i)}q[n]||o.push(n),e=e.substr(r.index+n.length)}return e=e.trim(),e&&t.push(e),t.concat(o.reverse())}var Fe={"!":function(e){return!e},"*":function(e,t){return e*t},"/":function(e,t){return e/t},"%":function(e,t){return e%t},"+":function(e,t){return e+t},"-":function(e,t){return e-t},"<":function(e,t){return e<t},"<=":function(e,t){return e<=t},">":function(e,t){return e>t},">=":function(e,t){return e>=t},"==":function(e,t){return e===t},"!=":function(e,t){return e!==t},"&&":function(e,t){return e&&t},"||":function(e,t){return e||t},"?:":function(e,t,o){if(e)throw t;return o}};function Ne(e,t){var o=[],r,n,l,i,c,a;for(r=0;r<e.length;r++){if(c=e[r],i=Fe[c],i){for(n=i.length,l=Array(n);n--;)l[n]=o.pop();try{a=i.apply(null,l)}catch(s){return s}}else t.hasOwnProperty(c)?a=t[c]:a=+c;o.push(a)}return o[0]}function He(e){var t=ke(e);return function(o){return Ne(t,o)}}function Te(e){var t=He(e);return function(o){return+t({n:o})}}var se={contextDelimiter:"",onMissingKey:null};function Pe(e){var t,o,r;for(t=e.split(";"),o=0;o<t.length;o++)if(r=t[o].trim(),r.indexOf("plural=")===0)return r.substr(7)}function te(e,t){var o;this.data=e,this.pluralForms={},this.options={};for(o in se)this.options[o]=t!==void 0&&o in t?t[o]:se[o]}te.prototype.getPluralForm=function(e,t){var o=this.pluralForms[e],r,n,l;return o||(r=this.data[e][""],l=r["Plural-Forms"]||r["plural-forms"]||r.plural_forms,typeof l!="function"&&(n=Pe(r["Plural-Forms"]||r["plural-forms"]||r.plural_forms),l=Te(n)),o=this.pluralForms[e]=l),o(t)},te.prototype.dcnpgettext=function(e,t,o,r,n){var l,i,c;return n===void 0?l=0:l=this.getPluralForm(e,n),i=o,t&&(i=t+this.options.contextDelimiter+o),c=this.data[e][i],c&&c[l]?c[l]:(this.options.onMissingKey&&this.options.onMissingKey(o,e),l===0?o:r)};var de={"":{plural_forms(e){return e===1?0:1}}},ze=/^i18n\.(n?gettext|has_translation)(_|$)/,Ae=(e,t,o)=>{const r=new te({}),n=new Set,l=()=>{n.forEach(m=>m())},i=m=>(n.add(m),()=>n.delete(m)),c=(m="default")=>r.data[m],a=(m,y="default")=>{r.data[y]={...r.data[y],...m},r.data[y][""]={...de[""],...r.data[y]?.[""]},delete r.pluralForms[y]},s=(m,y)=>{a(m,y),l()},_=(m,y="default")=>{r.data[y]={...r.data[y],...m,"":{...de[""],...r.data[y]?.[""],...m?.[""]}},delete r.pluralForms[y],l()},f=(m,y)=>{r.data={},r.pluralForms={},s(m,y)},g=(m="default",y,k,z,P)=>(r.data[m]||a(void 0,m),r.dcnpgettext(m,y,k,z,P)),S=m=>m||"default",b=(m,y)=>{let k=g(y,void 0,m);return o?(k=o.applyFilters("i18n.gettext",k,m,y),o.applyFilters("i18n.gettext_"+S(y),k,m,y)):k},T=(m,y,k)=>{let z=g(k,y,m);return o?(z=o.applyFilters("i18n.gettext_with_context",z,m,y,k),o.applyFilters("i18n.gettext_with_context_"+S(k),z,m,y,k)):z},u=(m,y,k,z)=>{let P=g(z,void 0,m,y,k);return o?(P=o.applyFilters("i18n.ngettext",P,m,y,k,z),o.applyFilters("i18n.ngettext_"+S(z),P,m,y,k,z)):P},R=(m,y,k,z,P)=>{let M=g(P,z,m,y,k);return o?(M=o.applyFilters("i18n.ngettext_with_context",M,m,y,k,z,P),o.applyFilters("i18n.ngettext_with_context_"+S(P),M,m,y,k,z,P)):M},I=()=>T("ltr","text direction")==="rtl",D=(m,y,k)=>{const z=y?y+""+m:m;let P=!!r.data?.[k??"default"]?.[z];return o&&(P=o.applyFilters("i18n.has_translation",P,m,y,k),P=o.applyFilters("i18n.has_translation_"+S(k),P,m,y,k)),P};if(o){const m=y=>{ze.test(y)&&l()};o.addAction("hookAdded","core/i18n",m),o.addAction("hookRemoved","core/i18n",m)}return{getLocaleData:c,setLocaleData:s,addLocaleData:_,resetLocaleData:f,subscribe:i,__:b,_x:T,_n:u,_nx:R,isRTL:I,hasTranslation:D}};function Le(e){return typeof e!="string"||e===""?(console.error("The namespace must be a non-empty string."),!1):/^[a-zA-Z][a-zA-Z0-9_.\-\/]*$/.test(e)?!0:(console.error("The namespace can only contain numbers, letters, dashes, periods, underscores and slashes."),!1)}var ue=Le;function Oe(e){return typeof e!="string"||e===""?(console.error("The hook name must be a non-empty string."),!1):/^__/.test(e)?(console.error("The hook name cannot begin with `__`."),!1):/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(e)?!0:(console.error("The hook name can only contain numbers, letters, dashes, periods and underscores."),!1)}var oe=Oe;function je(e,t){return function(r,n,l,i=10){const c=e[t];if(!oe(r)||!ue(n))return;if(typeof l!="function"){console.error("The hook callback must be a function.");return}if(typeof i!="number"){console.error("If specified, the hook priority must be a number.");return}const a={callback:l,priority:i,namespace:n};if(c[r]){const s=c[r].handlers;let _;for(_=s.length;_>0&&!(i>=s[_-1].priority);_--);_===s.length?s[_]=a:s.splice(_,0,a),c.__current.forEach(f=>{f.name===r&&f.currentIndex>=_&&f.currentIndex++})}else c[r]={handlers:[a],runs:0};r!=="hookAdded"&&e.doAction("hookAdded",r,n,l,i)}}var pe=je;function De(e,t,o=!1){return function(n,l){const i=e[t];if(!oe(n)||!o&&!ue(l))return;if(!i[n])return 0;let c=0;if(o)c=i[n].handlers.length,i[n]={runs:i[n].runs,handlers:[]};else{const a=i[n].handlers;for(let s=a.length-1;s>=0;s--)a[s].namespace===l&&(a.splice(s,1),c++,i.__current.forEach(_=>{_.name===n&&_.currentIndex>=s&&_.currentIndex--}))}return n!=="hookRemoved"&&e.doAction("hookRemoved",n,l),c}}var X=De;function Me(e,t){return function(r,n){const l=e[t];return typeof n<"u"?r in l&&l[r].handlers.some(i=>i.namespace===n):r in l}}var me=Me;function $e(e,t,o,r){return function(l,...i){const c=e[t];c[l]||(c[l]={handlers:[],runs:0}),c[l].runs++;const a=c[l].handlers;if(!a||!a.length)return o?i[0]:void 0;const s={name:l,currentIndex:0};async function _(){try{c.__current.add(s);let g=o?i[0]:void 0;for(;s.currentIndex<a.length;)g=await a[s.currentIndex].callback.apply(null,i),o&&(i[0]=g),s.currentIndex++;return o?g:void 0}finally{c.__current.delete(s)}}function f(){try{c.__current.add(s);let g=o?i[0]:void 0;for(;s.currentIndex<a.length;)g=a[s.currentIndex].callback.apply(null,i),o&&(i[0]=g),s.currentIndex++;return o?g:void 0}finally{c.__current.delete(s)}}return(r?_:f)()}}var K=$e;function Ve(e,t){return function(){const r=e[t];return Array.from(r.__current).at(-1)?.name??null}}var _e=Ve;function Ue(e,t){return function(r){const n=e[t];return typeof r>"u"?n.__current.size>0:Array.from(n.__current).some(l=>l.name===r)}}var fe=Ue;function Ge(e,t){return function(r){const n=e[t];if(oe(r))return n[r]&&n[r].runs?n[r].runs:0}}var he=Ge,We=class{actions;filters;addAction;addFilter;removeAction;removeFilter;hasAction;hasFilter;removeAllActions;removeAllFilters;doAction;doActionAsync;applyFilters;applyFiltersAsync;currentAction;currentFilter;doingAction;doingFilter;didAction;didFilter;constructor(){this.actions=Object.create(null),this.actions.__current=new Set,this.filters=Object.create(null),this.filters.__current=new Set,this.addAction=pe(this,"actions"),this.addFilter=pe(this,"filters"),this.removeAction=X(this,"actions"),this.removeFilter=X(this,"filters"),this.hasAction=me(this,"actions"),this.hasFilter=me(this,"filters"),this.removeAllActions=X(this,"actions",!0),this.removeAllFilters=X(this,"filters",!0),this.doAction=K(this,"actions",!1,!1),this.doActionAsync=K(this,"actions",!1,!0),this.applyFilters=K(this,"filters",!0,!1),this.applyFiltersAsync=K(this,"filters",!0,!0),this.currentAction=_e(this,"actions"),this.currentFilter=_e(this,"filters"),this.doingAction=fe(this,"actions"),this.doingFilter=fe(this,"filters"),this.didAction=he(this,"actions"),this.didFilter=he(this,"filters")}};function we(){return new We}var qe=we,ve=qe(),{addAction:Tt,addFilter:Pt,removeAction:zt,removeFilter:At,hasAction:Lt,hasFilter:Ot,removeAllActions:jt,removeAllFilters:Dt,doAction:Mt,doActionAsync:$t,applyFilters:Vt,applyFiltersAsync:Ut,currentAction:Gt,currentFilter:Wt,doingAction:wt,doingFilter:qt,didAction:Zt,didFilter:Jt,actions:Yt,filters:Xt}=ve,L=Ae(void 0,void 0,ve);L.getLocaleData.bind(L),L.setLocaleData.bind(L),L.resetLocaleData.bind(L),L.subscribe.bind(L);var h=L.__.bind(L);L._x.bind(L),L._n.bind(L),L._nx.bind(L),L.isRTL.bind(L),L.hasTranslation.bind(L);const ye={user:"las la-user",lock:"las la-lock",eye:"las la-eye",envelope:"las la-envelope",google:"lab la-google",chevronLeft:"las la-chevron-left",info:"las la-info-circle",happy:"las la-smile",phone:"las la-phone",link:"las la-link",calendar:"las la-calendar",upload:"las la-upload",copy:"las la-copy",cloud:"las la-cloud",device:"las la-laptop",shield:"las la-shield-alt",privacy:"las la-database",trash:"las la-trash",logout:"las la-sign-out-alt"};function O(e,t){return e&&e.value?e.library==="svg"?e.value.startsWith("<svg")||e.value.startsWith("<?xml")?React.createElement("span",{className:"ts-icon-svg",dangerouslySetInnerHTML:{__html:e.value}}):React.createElement("img",{src:e.value,alt:"",className:"ts-icon-svg"}):React.createElement("i",{className:e.value}):t&&ye[t]?React.createElement("i",{className:ye[t]}):null}const Ze={boxRemove:React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},React.createElement("path",{d:"M11.2499 3.25586H7.87725C7.0644 3.25586 6.31475 3.69428 5.91623 4.40272L3.56133 8.58896H11.2499V3.25586Z",fill:"#343C54"}),React.createElement("path",{d:"M3.25 10.089V18.505C3.25 19.7477 4.25736 20.755 5.5 20.755H10.8908C10.1699 19.6676 9.75 18.3633 9.75 16.9609C9.75 13.2328 12.7174 10.1978 16.4191 10.089H3.25Z",fill:"#343C54"}),React.createElement("path",{d:"M18.0838 4.40272L20.4387 8.58896H12.7499V3.25586H16.1228C16.9356 3.25586 17.6852 3.69428 18.0838 4.40272Z",fill:"#343C54"}),React.createElement("path",{d:"M16.625 11.5859C13.6565 11.5859 11.25 13.9924 11.25 16.9609C11.25 19.9295 13.6565 22.3359 16.625 22.3359C19.5935 22.3359 22 19.9295 22 16.9609C22 13.9924 19.5935 11.5859 16.625 11.5859ZM14.6728 15.009C14.9657 14.7161 15.4406 14.7161 15.7335 15.009L16.6247 15.9003L17.516 15.009C17.8089 14.7161 18.2837 14.7161 18.5766 15.009C18.8695 15.3019 18.8695 15.7768 18.5766 16.0697L17.6854 16.9609L18.5766 17.8522C18.8695 18.1451 18.8695 18.6199 18.5766 18.9128C18.2837 19.2057 17.8089 19.2057 17.516 18.9128L16.6247 18.0216L15.7335 18.9129C15.4406 19.2058 14.9657 19.2058 14.6728 18.9129C14.3799 18.62 14.3799 18.1451 14.6728 17.8522L15.5641 16.9609L14.6728 16.0696C14.3799 15.7767 14.3799 15.3019 14.6728 15.009Z",fill:"#343C54"}))};function re(){if(typeof window<"u"&&window.wpApiSettings?.root)return window.wpApiSettings.root.replace(/\/wp-json\/?$/,"")+"?vx=1";if(typeof document<"u"){const e=document.querySelector('link[rel="https://api.w.org/"]');if(e){const t=e.getAttribute("href");if(t)return t.replace(/\/wp-json\/?$/,"")+"?vx=1"}}return typeof window<"u"?window.location.origin+"?vx=1":"/?vx=1"}function ge(){if(typeof window<"u"&&window.wpApiSettings?.root)return window.wpApiSettings.root;if(typeof document<"u"){const e=document.querySelector('link[rel="https://api.w.org/"]');if(e){const t=e.getAttribute("href");if(t)return t}}if(typeof window<"u"&&window.location?.origin){const e=window.location.pathname.split("/").filter(Boolean),t=["wp-admin","wp-content","wp-includes","wp-json"];return e.length>0&&!t.includes(e[0])?window.location.origin+"/"+e[0]+"/wp-json/":window.location.origin+"/wp-json/"}return"/wp-json/"}function Je(){const e=window;return typeof window<"u"&&e.Voxel_Config?.ajax_url?e.Voxel_Config.ajax_url:re().replace("?vx=1","")}async function Ye(e,t){if(!e)return null;const o=window.grecaptcha;return o?new Promise(r=>{o.ready(async()=>{try{const n=await o.execute(e,{action:t});r(n)}catch(n){console.error("reCAPTCHA error:",n),r(null)}})}):(console.warn("reCAPTCHA not loaded"),null)}function Xe({config:e,quickRegister:t,onQuickRegisterChange:o,authLink:r,requireVerification:n,loginIcon:l,emailIcon:i,context:c}){const a=v.useRef(null),s=v.useRef(null),_=/^\S+@\S+\.\S+$/.test(t.email),f=v.useCallback(async()=>{if(c!=="editor"&&!(t.sending_code||!_)){o({sending_code:!0});try{const b=Je(),T=new FormData;if(T.append("email",t.email),T.append("_wpnonce",e.nonce.checkout),e.recaptcha.enabled&&e.recaptcha.key){const I=await Ye(e.recaptcha.key,"quick_register_send_code");I&&T.append("_recaptcha",I)}const R=await(await fetch(`${b}?vx=1&action=products.quick_register.send_confirmation_code`,{method:"POST",credentials:"same-origin",body:T})).json();if(R.success)o({sending_code:!1,sent_code:!0}),setTimeout(()=>{s.current?.focus()},100);else if(R.status==="email_exists"){const I=window;I.Voxel?.alert?I.Voxel.alert(R.message||h("This email is already registered. Please sign in.","voxel-fse")):alert(R.message||h("This email is already registered. Please sign in.","voxel-fse")),o({sending_code:!1})}else{const I=window;I.Voxel?.alert?I.Voxel.alert(R.message||h("Failed to send verification code.","voxel-fse")):alert(R.message||h("Failed to send verification code.","voxel-fse")),o({sending_code:!1})}}catch(b){console.error("Failed to send verification code:",b),o({sending_code:!1})}}},[e,t.email,t.sending_code,_,c,o]),g=b=>{const u={email:b.target.value};t.sent_code&&(u.sent_code=!1),o(u)},S=b=>{b.key==="Enter"&&(b.preventDefault(),a.current?.click())};return React.createElement(React.Fragment,null,React.createElement("a",{href:r,className:"ts-btn ts-btn-1 form-btn"},O(l),h("Existing customer? Sign in","voxel-fse")),React.createElement("div",{className:"checkout-section form-field-grid"},React.createElement("div",{className:"ts-form-group"},React.createElement("div",{className:"or-group"},React.createElement("div",{className:"or-line"}),React.createElement("span",{className:"or-text"},h("Or continue as Guest","voxel-fse")),React.createElement("div",{className:"or-line"}))),React.createElement("div",{className:"ts-form-group vx-1-1"},React.createElement("label",null,h("Email address","voxel-fse")),React.createElement("div",{className:"ts-input-icon flexify"},O(i),React.createElement("input",{type:"email",value:t.email,onChange:g,onKeyDown:S,placeholder:h("Your email address","voxel-fse"),readOnly:t.sending_code||t.registered,className:"ts-filter"}))),n&&React.createElement(React.Fragment,null,!t.sent_code&&_&&React.createElement("div",{className:"ts-form-group vx-1-1"},React.createElement("div",{className:t.sending_code?"vx-disabled":""},React.createElement("a",{href:"#",className:"ts-btn ts-btn-1 form-btn",ref:a,onClick:b=>{b.preventDefault(),c==="frontend"&&f()}},O(i),h("Send confirmation code","voxel-fse")))),t.sent_code&&React.createElement("div",{className:"ts-form-group vx-1-1"},React.createElement("label",null,h("Confirmation code","voxel-fse")),React.createElement("input",{ref:s,type:"text",maxLength:6,placeholder:h("Type your 6 digit code","voxel-fse"),value:t.code,onChange:b=>o({code:b.target.value}),readOnly:t.registered,className:"ts-filter"})))))}function Ke(e,t){if(!(!t||!e[t]))return e[t].states}function Qe({shipping:e,onShippingChange:t,countries:o,context:r}){const n=Ke(o,e.country),l=n&&Object.keys(n).length>0,i=c=>{const a=c.target.value||null;t({country:a,state:"",zone:null,rate:null})};return e.status!=="completed"?React.createElement("div",{className:"checkout-section form-field-grid"},React.createElement("div",{className:"ts-form-group"},React.createElement("div",{className:"or-group"},React.createElement("div",{className:"or-line"}),React.createElement("span",{className:"or-text"},h("Shipping details","voxel-fse")),React.createElement("div",{className:"or-line"}))),React.createElement("div",{className:"ts-form-group vx-1-1"},React.createElement("div",{className:"vx-loading-screen"},React.createElement("div",{className:"ts-no-posts"},React.createElement("span",{className:"ts-loader"}))))):React.createElement("div",{className:"checkout-section form-field-grid"},React.createElement("div",{className:"ts-form-group"},React.createElement("div",{className:"or-group"},React.createElement("div",{className:"or-line"}),React.createElement("span",{className:"or-text"},h("Shipping details","voxel-fse")),React.createElement("div",{className:"or-line"}))),React.createElement("div",{className:"ts-form-group vx-1-2"},React.createElement("label",null,h("First name","voxel-fse")),React.createElement("input",{type:"text",value:e.first_name,onChange:c=>t({first_name:c.target.value}),placeholder:h("First name","voxel-fse"),className:"ts-filter"})),React.createElement("div",{className:"ts-form-group vx-1-2"},React.createElement("label",null,h("Last name","voxel-fse")),React.createElement("input",{type:"text",value:e.last_name,onChange:c=>t({last_name:c.target.value}),placeholder:h("Last name","voxel-fse"),className:"ts-filter"})),React.createElement("div",{className:`ts-form-group ${l?"vx-1-2":"vx-1-1"}`},React.createElement("label",null,h("Country","voxel-fse")),React.createElement("div",{className:"ts-filter"},React.createElement("select",{value:e.country||"",onChange:i},React.createElement("option",{value:""},h("Select country","voxel-fse")),Object.entries(o).map(([c,a])=>React.createElement("option",{key:c,value:c},a.name))),React.createElement("div",{className:"ts-down-icon"}))),l&&React.createElement("div",{className:"ts-form-group vx-1-2"},React.createElement("label",null,h("State / County","voxel-fse")),React.createElement("div",{className:"ts-filter"},React.createElement("select",{value:e.state,onChange:c=>t({state:c.target.value})},React.createElement("option",{value:""},h("Select state","voxel-fse")),Object.entries(n).map(([c,a])=>React.createElement("option",{key:c,value:c},a.name||c))),React.createElement("div",{className:"ts-down-icon"}))),React.createElement("div",{className:"ts-form-group vx-1-2"},React.createElement("label",null,h("Address","voxel-fse")),React.createElement("input",{type:"text",value:e.address,onChange:c=>t({address:c.target.value}),placeholder:h("Street address","voxel-fse"),className:"ts-filter"})),React.createElement("div",{className:"ts-form-group vx-1-2"},React.createElement("label",null,h("ZIP / Postal code","voxel-fse")),React.createElement("input",{type:"text",value:e.zip,onChange:c=>t({zip:c.target.value}),placeholder:h("ZIP / Postal code","voxel-fse"),className:"ts-filter"})))}function be(e,t){try{return new Intl.NumberFormat(void 0,{style:"currency",currency:t||"USD"}).format(e/100)}catch{return`${(e/100).toFixed(2)} ${t}`}}function et(e,t){return e.type==="free_shipping"&&e.requirements==="minimum_order_amount"?t>=(e.minimum_order_amount||0):!0}function tt(e,t){if(e.type==="free_shipping"||!e.amount_per_unit)return 0;switch(e.calculation_method||"per_order"){case"per_order":return e.amount_per_unit;case"per_item":{let r=0;return Object.values(t).forEach(n=>{if(n.shipping.is_shippable){const l=n.product_mode==="regular"?n.value.stock?.quantity||1:n.value.variations?.quantity||1;r+=l}}),e.amount_per_unit*r}case"per_class":{const r=e.shipping_classes||{};let n=e.amount_per_unit;return Object.values(t).forEach(l=>{if(l.shipping.is_shippable&&l.shipping.shipping_class){const i=r[l.shipping.shipping_class];if(i!==void 0){const c=l.product_mode==="regular"?l.value.stock?.quantity||1:l.value.variations?.quantity||1;n+=i*c}}}),n}default:return e.amount_per_unit}}function ot(e,t,o){if(!t.countries[o.country||""])return!1;if(t.regions&&t.regions.length>0){for(const r of t.regions)if(r.country===o.country&&!(r.states&&r.states.length>0&&!r.states.includes(o.state))){if(r.zip_codes_enabled&&r.zip_codes){const n=r.zip_codes.split(`
`).map(l=>l.trim());if(!rt(o.zip,n))continue}return!0}return!1}return!0}function rt(e,t){const o=e.toLowerCase().replace(/\s/g,"");for(const r of t){if(!r)continue;const n=r.toLowerCase().replace(/\s/g,"");if(n.includes("...")){const[l,i]=n.split("...");if(o>=l&&o<=i)return!0}else if(n.includes("*")){if(new RegExp("^"+n.replace(/\*/g,".*")+"$").test(o))return!0}else if(o===n)return!0}return!1}function nt(e,t,o,r){const n=[];return Object.values(e).forEach(l=>{Object.values(l.rates).forEach(i=>{ot(i,l,t)&&n.push({zone:l,rate:i})})}),r&&r.length>0&&n.sort((l,i)=>{const c=r.indexOf(l.rate.key),a=r.indexOf(i.rate.key);return c===-1&&a===-1?0:c===-1?1:a===-1?-1:c-a}),n}function lt({config:e,shipping:t,onShippingChange:o,items:r,shippingIcon:n,currency:l,l10n:i,context:c}){const a=v.useMemo(()=>{let S=0;return Object.values(r).forEach(b=>{S+=b.pricing.total_amount}),S},[r]),s=e.multivendor.enabled?e.shipping.responsibility:"platform_rates",_=v.useMemo(()=>s!=="platform_rates"?[]:nt(e.shipping.zones,t,r,e.shipping.shipping_rates_order||[]),[e.shipping.zones,t,r,e.shipping.shipping_rates_order,s]),f=_.length>0,g=(S,b)=>{c!=="editor"&&o({zone:S,rate:b})};return s!=="platform_rates"?null:React.createElement("div",{className:"checkout-section form-field-grid"},React.createElement("div",{className:"ts-form-group"},React.createElement("div",{className:"or-group"},React.createElement("div",{className:"or-line"}),React.createElement("span",{className:"or-text"},h("Shipping method","voxel-fse")),React.createElement("div",{className:"or-line"}))),React.createElement("div",{className:"ts-form-group vx-1-1"},f?React.createElement("ul",{className:"simplify-ul addon-cards flexify"},_.map(({zone:S,rate:b})=>{const T=t.zone===S.key&&t.rate===b.key,u=et(b,a),R=tt(b,r);return React.createElement("li",{key:`${S.key}-${b.key}`,className:`flexify ${T?"adc-selected":""} ${u?"":"vx-disabled"}`,onClick:()=>{u&&g(S.key,b.key)}},React.createElement("div",{className:"card-icn"},O(n)),React.createElement("div",{className:"addon-details"},React.createElement("span",{className:"adc-title"},b.label),b.delivery_estimate&&u&&React.createElement("span",{className:"adc-subtitle"},b.delivery_estimate),!u&&b.type==="free_shipping"&&b.requirements==="minimum_order_amount"&&React.createElement("span",{className:"adc-subtitle"},h("Minimum order amount:","voxel-fse")," ",be(b.minimum_order_amount||0,l)),React.createElement("span",{className:"vx-addon-price"},R===0?i.free:be(R,l))))})):React.createElement("label",null,h("No shipping rates available for your location. Please select a different address.","voxel-fse"))))}function Ce(e,t){try{return new Intl.NumberFormat(void 0,{style:"currency",currency:t||"USD"}).format(e/100)}catch{return`${(e/100).toFixed(2)} ${t}`}}function ct(e){return e.product_mode==="regular"?e.value.stock?.quantity||1:e.value.variations?.quantity||1}function at(e,t){const o=e.toLowerCase().replace(/\s/g,""),r=t.split(`
`).map(n=>n.trim());for(const n of r){if(!n)continue;const l=n.toLowerCase().replace(/\s/g,"");if(l.includes("...")){const[i,c]=l.split("...");if(o>=i&&o<=c)return!0}else if(l.includes("*")){if(new RegExp("^"+l.replace(/\*/g,".*")+"$").test(o))return!0}else if(o===l)return!0}return!1}function it(e,t){if(!t.countries[e.country||""])return!1;if(t.regions&&Array.isArray(t.regions)&&t.regions.length>0){const o=t.regions.find(r=>r.country===e.country);if(!o||o.states&&Array.isArray(o.states)&&o.states.length>0&&(!e.state||!o.states.includes(e.state))||o.zip_codes_enabled&&o.zip_codes&&o.zip_codes.trim()&&(!e.zip||!at(e.zip,o.zip_codes)))return!1}return!0}function st(e,t){let o=0;return Object.values(t).forEach(r=>{r.vendor.id===e.id&&(o+=r.pricing.total_amount)}),o}function dt(e,t,o){return t.type!=="free_shipping"?t.type==="fixed_rate"||t.type==="flat_rate":t.requirements!=="minimum_order_amount"?!0:st(e,o)>=(t.minimum_order_amount||0)}function ut(e,t,o){if(t.type==="free_shipping")return 0;if(t.type!=="fixed_rate"&&t.type!=="flat_rate")return null;const r=t.calculation_method||"per_item",n=Object.values(o).filter(i=>i.vendor.id===e.id&&i.shipping.is_shippable);if(r==="per_order")return t.amount_per_unit||0;if(r==="per_class"){let i=t.amount_per_unit||0;for(const c of n){let a=t.amount_per_unit||0;const s=c.shipping.shipping_class;s&&t.shipping_classes?.[s]&&(a=t.shipping_classes[s]),i=Math.max(i,a)}return i}let l=0;for(const i of n){let c=t.amount_per_unit||0;const a=i.shipping.shipping_class;a&&t.shipping_classes?.[a]&&(c=t.shipping_classes[a]);const s=ct(i);l+=c*s}return l}function Ie(e,t){if(!e||!e.shipping_zones||!t.country)return[];const o=[];Object.values(e.shipping_zones).forEach(n=>{n.countries[t.country||""]&&Object.values(n.rates).forEach(l=>{it(t,n)&&o.push({zone:n,rate:l})})});const r=e.shipping_rates_order;if(r&&Array.isArray(r)&&r.length>0){const n={};r.forEach((l,i)=>{n[l]=i}),o.sort((l,i)=>{const c=n[l.rate.key]!==void 0?n[l.rate.key]:1/0,a=n[i.rate.key]!==void 0?n[i.rate.key]:1/0;return c-a})}return o}function pt(e,t){return!e.has_shippable_products||!e.shipping_zones||!t.country?!1:Ie(e,t).length>0}function mt({config:e,shipping:t,onShippingChange:o,items:r,vendors:n,shippingIcon:l,currency:i,l10n:c,context:a}){const s=v.useMemo(()=>{const f={};return Object.values(n).forEach(g=>{g.has_shippable_products&&(f[g.key]=g)}),f},[n]),_=(f,g,S)=>{if(a==="editor")return;const b={...t.vendors};b[f]={zone:g,rate:S},o({vendors:b})};return t.country?React.createElement(React.Fragment,null,Object.values(s).map(f=>{const g=Ie(f,t),S=pt(f,t),b=t.vendors[f.key];return React.createElement("div",{key:f.key,className:"checkout-section form-field-grid"},React.createElement("div",{className:"ts-form-group"},React.createElement("div",{className:"or-group"},React.createElement("div",{className:"or-line"}),React.createElement("span",{className:"or-text"},h("Shipping method (Products sold by","voxel-fse")," ",f.display_name,")"),React.createElement("div",{className:"or-line"}))),React.createElement("div",{className:"ts-form-group vx-1-1"},S?React.createElement("ul",{className:"simplify-ul addon-cards flexify"},g.map(({zone:T,rate:u})=>{const R=b?.zone===T.key&&b?.rate===u.key,I=dt(f,u,r),D=ut(f,u,r);return React.createElement("li",{key:`${T.key}-${u.key}`,className:`flexify ${R?"adc-selected":""} ${I?"":"vx-disabled"}`,onClick:()=>{I&&_(f.key,T.key,u.key)}},React.createElement("div",{className:"card-icn"},O(l)),React.createElement("div",{className:"addon-details"},React.createElement("span",{className:"adc-title"},u.label),u.delivery_estimate&&I&&React.createElement("span",{className:"adc-subtitle"},u.delivery_estimate),!I&&u.type==="free_shipping"&&u.requirements==="minimum_order_amount"&&React.createElement("span",{className:"adc-subtitle"},h("Minimum order amount:","voxel-fse")," ",Ce(u.minimum_order_amount||0,i)),React.createElement("span",{className:"vx-addon-price"},D===0||D===null?c.free:Ce(D,i))))})):React.createElement("label",null,h("This vendor does not ship to your location. In order to proceed, remove products by this vendor from cart, or pick a different address.","voxel-fse"))))})):null}function _t(e=8){const t="abcdefghijklmnopqrstuvwxyz0123456789";let o="";for(let r=0;r<e;r++)o+=t.charAt(Math.floor(Math.random()*t.length));return o}function ft({field:e,value:t,onChange:o,uploadIcon:r,trashIcon:n,context:l}){const[i,c]=v.useState(!1),a=v.useRef(null),s=e.max_files||1,_=e.allowed_types||"",f=u=>u.type.startsWith("image/")?{backgroundImage:`url('${u.preview}')`}:{},g=v.useCallback(u=>{let R=[...t];s===1&&(R=[]);const I={source:"new_upload",name:u.name,type:u.type,size:u.size,preview:URL.createObjectURL(u),item:u,_id:_t(8)};if(typeof window<"u"){window._vx_file_upload_cache||(window._vx_file_upload_cache=[]);const D=window._vx_file_upload_cache.find(m=>m.item?.name===u.name&&m.item?.type===u.type&&m.item?.size===u.size&&m.item?.lastModified===u.lastModified);D?R.push(D):(R.push(I),window._vx_file_upload_cache.unshift(I))}else R.push(I);o(R)},[t,s,o]),S=v.useCallback(u=>{const R=u.target.files;if(R){for(let I=0;I<R.length;I++)g(R[I]);a.current&&(a.current.value="")}},[g]),b=v.useCallback(u=>{u.preventDefault(),c(!1),u.dataTransfer.items?Array.from(u.dataTransfer.items).forEach(R=>{if(R.kind==="file"){const I=R.getAsFile();I&&g(I)}}):Array.from(u.dataTransfer.files).forEach(R=>{g(R)})},[g]),T=u=>{if(l==="editor")return;const R=[...t],I=R.splice(u,1)[0];I.source==="new_upload"&&URL.revokeObjectURL(I.preview),o(R)};return v.useEffect(()=>()=>{setTimeout(()=>{t.forEach(u=>{u.source==="new_upload"&&URL.revokeObjectURL(u.preview)})},10)},[]),React.createElement("div",{className:"ts-form-group ts-file-upload inline-file-field vx-1-1",onDragEnter:()=>c(!0)},i&&React.createElement("div",{className:"drop-mask",onDragLeave:u=>{u.preventDefault(),c(!1)},onDrop:b,onDragEnter:u=>u.preventDefault(),onDragOver:u=>u.preventDefault()}),React.createElement("div",{className:"ts-file-list"},React.createElement("div",{className:"pick-file-input"},React.createElement("a",{href:"#",onClick:u=>{u.preventDefault(),l!=="editor"&&a.current?.click()}},O(r),h("Upload","voxel-fse"))),t.map((u,R)=>React.createElement("div",{key:u._id||u.id||R,className:`ts-file ${u.type.startsWith("image/")?"ts-file-img":""}`,style:f(u)},React.createElement("div",{className:"ts-file-info"},React.createElement("svg",{fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M12 16V4m0 0L8 8m4-4l4 4m-9 4v5a2 2 0 002 2h10a2 2 0 002-2v-5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"})),React.createElement("code",null,u.name)),React.createElement("a",{href:"#",onClick:I=>{I.preventDefault(),T(R)},className:"ts-remove-file flexify"},O(n))))),React.createElement("input",{ref:a,type:"file",className:"hidden",multiple:s>1,accept:_,onChange:S}))}const Re={library:"",value:""};function ne(e){return!!(e&&e.value)}function ht(e,t){return ne(e)?e:t}const Be={deleteIcon:{library:"line-awesome",value:"las la-trash-alt"},noProductsIcon:Re,loginIcon:{library:"line-awesome",value:"las la-sign-in-alt"},emailIcon:{library:"line-awesome",value:"las la-envelope"},userIcon:{library:"line-awesome",value:"las la-user"},uploadIcon:{library:"line-awesome",value:"las la-cloud-upload-alt"},shippingIcon:{library:"line-awesome",value:"las la-shipping-fast"},minusIcon:{library:"line-awesome",value:"las la-minus"},plusIcon:{library:"line-awesome",value:"las la-plus"},checkoutIcon:{library:"line-awesome",value:"las la-arrow-right"},continueIcon:{library:"line-awesome",value:"las la-arrow-right"}};function x(e,t){return ht(e,Be[t])}const vt="las la-box";function le(e,t){try{return new Intl.NumberFormat(void 0,{style:"currency",currency:t||"USD"}).format(e/100)}catch{return`${(e/100).toFixed(2)} ${t}`}}function Se(e){return e.product_mode==="regular"?e.value.stock?.quantity||1:e.value.variations?.quantity||1}function yt(e){const t=Se(e);return e.quantity.max===0||t<e.quantity.max}function Ee({item:e,attributes:t,onUpdateQuantity:o,onRemoveItem:r,context:n}){const l=Se(e),i=yt(e),c=()=>{l>1&&o?o(e.key,l-1):r&&r(e.key)},a=()=>{i&&o&&o(e.key,l+1)},s=()=>{r&&r(e.key)};return React.createElement("li",{className:`${e._disabled?"vx-disabled":""} ${e.custom_class||""}`},React.createElement("div",{className:"cart-image",dangerouslySetInnerHTML:{__html:e.logo}}),React.createElement("div",{className:"cart-item-details"},React.createElement("a",{href:e.link},e.title),e.subtitle&&React.createElement("span",null,e.subtitle),e.pricing.total_amount===0?React.createElement("span",null,h("Free","voxel-fse")):React.createElement("span",null,le(e.pricing.total_amount,e.currency))),e.quantity.enabled?React.createElement("div",{className:"cart-stepper"},React.createElement("a",{href:"#",className:"ts-icon-btn ts-smaller",onClick:_=>{_.preventDefault(),n==="frontend"&&c()}},O(x(t.minusIcon,"minusIcon"))),React.createElement("span",null,l),React.createElement("a",{href:"#",className:`ts-icon-btn ts-smaller ${i?"":"vx-disabled"}`,onClick:_=>{_.preventDefault(),n==="frontend"&&a()}},O(x(t.plusIcon,"plusIcon")))):React.createElement("div",{className:"cart-stepper"},React.createElement("a",{href:"#",className:"ts-icon-btn ts-smaller",onClick:_=>{_.preventDefault(),n==="frontend"&&s()}},O(x(t.deleteIcon,"deleteIcon")))))}function gt({enabled:e,content:t,onToggle:o,onChange:r,context:n}){const l=v.useRef(null),i=v.useRef(null),c=()=>{l.current&&i.current&&(i.current.value=l.current.value,l.current.style.height=`${i.current.scrollHeight}px`)};return v.useEffect(()=>{e&&(c(),l.current?.focus())},[e,t]),React.createElement(React.Fragment,null,React.createElement("div",{className:"tos-checkbox ts-form-group vx-1-1 switcher-label"},React.createElement("label",{onClick:a=>{a.preventDefault(),n==="frontend"&&o()}},React.createElement("div",{className:"ts-checkbox-container"},React.createElement("label",{className:"container-checkbox"},React.createElement("input",{type:"checkbox",tabIndex:0,className:"hidden",checked:e,readOnly:!0}),React.createElement("span",{className:"checkmark"}))),h("Add order notes?","voxel-fse"))),e&&React.createElement("div",{className:"ts-form-group vx-1-1"},React.createElement("textarea",{ref:l,value:t,onChange:a=>{r(a.target.value),c()},placeholder:h("Add notes about your order","voxel-fse"),className:"autofocus ts-filter"}),React.createElement("textarea",{ref:i,disabled:!0,style:{height:"5px",position:"fixed",top:"-9999px",left:"-9999px",visibility:"hidden"}})))}function bt({attributes:e,config:t,items:o,context:r,isLoading:n,error:l,onUpdateQuantity:i,onRemoveItem:c,onCheckout:a,shipping:s,onShippingChange:_,quickRegister:f,onQuickRegisterChange:g,orderNotes:S,onOrderNotesChange:b}){const T=v.useMemo(()=>({icons:{deleteIcon:x(e.deleteIcon,"deleteIcon"),noProductsIcon:x(e.noProductsIcon,"noProductsIcon"),loginIcon:x(e.loginIcon,"loginIcon"),emailIcon:x(e.emailIcon,"emailIcon"),userIcon:x(e.userIcon,"userIcon"),uploadIcon:x(e.uploadIcon,"uploadIcon"),shippingIcon:x(e.shippingIcon,"shippingIcon"),minusIcon:x(e.minusIcon,"minusIcon"),plusIcon:x(e.plusIcon,"plusIcon"),checkoutIcon:x(e.checkoutIcon,"checkoutIcon"),continueIcon:x(e.continueIcon,"continueIcon")},sectionSpacing:e.sectionSpacing||void 0,titleColor:e.titleColor||void 0}),[e]);v.useEffect(()=>{const d="voxel-product-summary-css";if(!document.getElementById(d)){const p=document.createElement("link");p.id=d,p.rel="stylesheet";const C=(window.Voxel_Config?.site_url||window.location.origin).replace(/\/$/,"");p.href=`${C}/wp-content/themes/voxel/assets/dist/product-summary.css?ver=1.7.5.2`,document.head.appendChild(p)}},[]);const u=v.useMemo(()=>{if(!o)return{};const d={};return Object.values(o).forEach(p=>{const E=p.vendor?.id,C=E?`vendor_${E}`:"platform";d[C]||(d[C]={id:E||null,display_name:p.vendor?.display_name||h("Platform","voxel-fse"),vendor_key:C,key:C,items:{},has_shippable_products:!1,shipping_zones:p.vendor?.shipping_zones||null,shipping_countries:p.vendor?.shipping_countries||null}),d[C].items[p.key]=p,p.shipping.is_shippable&&(d[C].has_shippable_products=!0)}),d},[o]),R=v.useMemo(()=>{if(!t?.multivendor.enabled)return!1;const d=Object.keys(u).length;return!(d<1||d===1&&u.platform)},[t,u]),I=()=>{if(!t?.multivendor.enabled||t.shipping.responsibility!=="vendor")return"platform_rates";const p=Object.keys(u).length;return p===1&&u.platform?"platform_rates":p>=1?"vendor_rates":null},D=v.useMemo(()=>{const d={...t?.shipping.countries};return I()==="vendor_rates"&&Object.values(u).forEach(p=>{p.shipping_countries&&Object.entries(p.shipping_countries).forEach(([E,C])=>{d[E]||(d[E]=C)})}),d},[t?.shipping.countries,u]),m=v.useMemo(()=>o?Object.values(o).some(d=>d.shipping.is_shippable):!1,[o]),y=v.useMemo(()=>{if(!o)return 0;let d=0;return Object.values(o).forEach(p=>{d+=p.pricing.total_amount}),d},[o]),k=v.useMemo(()=>{if(I()!=="vendor_rates")return!0;if(!s.country)return!1;const d=Object.values(u).filter(p=>p.has_shippable_products);for(const p of d){const E=s.vendors[p.key];if(!E?.zone||!E?.rate)return!1}return!0},[u,s]),z=v.useMemo(()=>{if(!s||!t)return null;if(I()==="platform_rates"){if(!s.zone||!s.rate)return null;const d=t.shipping.zones[s.zone];if(!d||!d.rates[s.rate])return null;const p=d.rates[s.rate];return p.type==="free_shipping"?0:p.amount_per_unit||0}else{if(!k)return null;let d=0;return Object.values(u).forEach(p=>{if(!p.has_shippable_products)return;const E=s.vendors[p.key];if(!E||!p.shipping_zones)return;const C=p.shipping_zones[E.zone];if(!C||!C.rates[E.rate])return;const F=C.rates[E.rate];F.type!=="free_shipping"&&(d+=F.amount_per_unit||0)}),d}},[s,t,u,k]),P=o&&Object.keys(o).length>0,M=t?.currency||"USD",$=t?.is_logged_in||!1,V=t?.guest_customers.behavior||"redirect_to_login",ce=!$&&V==="proceed_with_email",J=t?.guest_customers.proceed_with_email?.require_verification||!1,Y=t?.guest_customers.proceed_with_email?.require_tos||!1,Q=v.useMemo(()=>{if(!P||!$&&V==="proceed_with_email"&&(!f?.email||!/^\S+@\S+\.\S+$/.test(f.email)||J&&!f.registered&&(!f.sent_code||!f.code)||Y&&!f.terms_agreed))return!1;if(m&&s){if(!s.country)return!1;const d=I();if(d==="platform_rates"&&(!s.zone||!s.rate)||d==="vendor_rates"&&!k)return!1}return!0},[P,$,V,f,J,Y,m,s,t,k]),B=v.useMemo(()=>o?Object.values(o).every(d=>d.payment_method==="offline_payment"):!1,[o]);if(n)return React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(T)}}),React.createElement("div",{className:"vx-loading-screen ts-checkout-loading"},React.createElement("div",{className:"ts-no-posts"},React.createElement("span",{className:"ts-loader"}))));if(l)return React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(T)}}),React.createElement("div",{className:"ts-no-posts"},React.createElement("p",null,l)));if(r==="editor"||!P){const d=ne(e.noProductsIcon)?e.noProductsIcon:null;return React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(T)}}),React.createElement("div",{className:"ts-form ts-checkout ts-checkout-regular"},React.createElement("div",{className:"vx-loading-screen"},React.createElement("div",{className:"ts-form-group ts-no-posts"},d?O(d):Ze.boxRemove,React.createElement("p",null,h("No products selected for checkout","voxel-fse"))))))}return React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(T)}}),React.createElement("div",{className:"ts-form ts-checkout ts-checkout-regular"},ce&&f&&g&&t&&React.createElement(Xe,{config:t,quickRegister:f,onQuickRegisterChange:g,authLink:t.auth_link,requireVerification:J,loginIcon:x(e.loginIcon,"loginIcon"),emailIcon:x(e.emailIcon,"emailIcon"),context:r}),($||V!=="proceed_with_email")&&React.createElement("div",{className:"ts-cart-head"},React.createElement("h1",null,h("Order summary","voxel-fse"))),React.createElement("div",{className:"checkout-section form-field-grid"},R?Object.values(u).map(d=>React.createElement("div",{key:d.key},React.createElement("div",{className:"ts-form-group"},React.createElement("div",{className:"or-group"},React.createElement("div",{className:"or-line"}),React.createElement("span",{className:"or-text"},h("Sold by","voxel-fse")," ",d.display_name),React.createElement("div",{className:"or-line"}))),React.createElement("div",{className:"ts-form-group"},React.createElement("ul",{className:"ts-cart-list simplify-ul"},Object.values(d.items).map(p=>React.createElement(Ee,{key:p.key,item:p,attributes:e,onUpdateQuantity:i,onRemoveItem:c,context:r})))))):React.createElement(React.Fragment,null,React.createElement("div",{className:"ts-form-group"},React.createElement("div",{className:"or-group"},React.createElement("div",{className:"or-line"}),React.createElement("span",{className:"or-text"},h("Items","voxel-fse")),React.createElement("div",{className:"or-line"}))),React.createElement("div",{className:"ts-form-group"},React.createElement("ul",{className:"ts-cart-list simplify-ul"},Object.values(o).map(d=>React.createElement(Ee,{key:d.key,item:d,attributes:e,onUpdateQuantity:i,onRemoveItem:c,context:r})))))),m&&s&&_&&t&&React.createElement(React.Fragment,null,React.createElement(Qe,{shipping:s,onShippingChange:_,countries:D,context:r}),s.status==="completed"&&s.country&&React.createElement(React.Fragment,null,I()==="platform_rates"&&React.createElement(lt,{config:t,shipping:s,onShippingChange:_,items:o,shippingIcon:x(e.shippingIcon,"shippingIcon"),currency:M,l10n:t.l10n,context:r}),I()==="vendor_rates"&&React.createElement(mt,{config:t,shipping:s,onShippingChange:_,items:o,vendors:u,shippingIcon:x(e.shippingIcon,"shippingIcon"),currency:M,l10n:t.l10n,context:r}))),($||V==="proceed_with_email")&&React.createElement("div",{className:"checkout-section form-field-grid"},React.createElement("div",{className:"ts-form-group"},React.createElement("div",{className:"or-group"},React.createElement("div",{className:"or-line"}),React.createElement("span",{className:"or-text"},h("Details","voxel-fse")),React.createElement("div",{className:"or-line"}))),o&&Object.values(o).map(d=>d.components&&Object.entries(d.components).map(([p,E])=>{const C=E.data;return E.type==="file-upload"&&C?React.createElement(ft,{key:`${d.key}-${p}`,field:C.field||{key:p},value:C.value||[],onChange:()=>{},uploadIcon:x(e.uploadIcon,"uploadIcon"),trashIcon:x(e.deleteIcon,"deleteIcon"),context:r}):null})),S&&b&&React.createElement(gt,{enabled:S.enabled,content:S.content,onToggle:()=>b({enabled:!S.enabled}),onChange:d=>b({content:d}),context:r}),!$&&V==="proceed_with_email"&&Y&&f&&g&&React.createElement("div",{className:"tos-checkbox ts-form-group vx-1-1 switcher-label"},React.createElement("label",{onClick:d=>{d.preventDefault(),r==="frontend"&&g({terms_agreed:!f.terms_agreed})}},React.createElement("div",{className:"ts-checkbox-container"},React.createElement("label",{className:"container-checkbox"},React.createElement("input",{type:"checkbox",tabIndex:0,className:"hidden",checked:f.terms_agreed,readOnly:!0}),React.createElement("span",{className:"checkmark"}))),React.createElement("p",{className:"field-info"},h("I agree to the Terms and Conditions and Privacy Policy","voxel-fse"))))),React.createElement("div",{className:"checkout-section"},y!==0&&React.createElement("ul",{className:"ts-cost-calculator simplify-ul flexify"},z!==null&&React.createElement("li",null,React.createElement("div",{className:"ts-item-name"},React.createElement("p",null,h("Shipping","voxel-fse"))),React.createElement("div",{className:"ts-item-price"},React.createElement("p",null,le(z,M)))),React.createElement("li",{className:"ts-total"},React.createElement("div",{className:"ts-item-name"},React.createElement("p",null,h("Subtotal","voxel-fse"))),React.createElement("div",{className:"ts-item-price"},React.createElement("p",null,le(y+(z||0),M))))),$||V==="proceed_with_email"?React.createElement("a",{href:"#",className:`ts-btn ts-btn-2 form-btn ${Q?"":"vx-disabled"}`,onClick:d=>{d.preventDefault(),r==="frontend"&&Q&&a&&a()}},y===0||B?React.createElement(React.Fragment,null,h("Submit order","voxel-fse"),O(x(e.continueIcon,"continueIcon"))):React.createElement(React.Fragment,null,h("Proceed to payment","voxel-fse"),O(x(e.checkoutIcon,"checkoutIcon")))):React.createElement("a",{href:t?.auth_link||"#",className:"ts-btn ts-btn-2 form-btn"},O(x(e.userIcon,"userIcon")),h("Log in to continue","voxel-fse")))))}function Ct(e,t){try{return new Intl.NumberFormat(void 0,{style:"currency",currency:t}).format(e)}catch{return`${t} ${e.toFixed(2)}`}}function It(){const e=window;return typeof window<"u"&&e.Voxel_Config?.ajax_url?e.Voxel_Config.ajax_url:re().replace("?vx=1","")}function Rt({config:e,currency:t,checkoutIcon:o}){const r=Object.values(e.packages),[n,l]=v.useState(r.length>0?r[0]:null),[i,c]=v.useState(!1),a=v.useCallback(async()=>{if(!(!n||i)){c(!0);try{const s=It(),_=new FormData;_.append("post_id",String(e.post_id)),_.append("promotion_package",n.key);const g=await(await fetch(`${s}?vx=1&action=products.promotions.checkout&_wpnonce=${e.nonce.checkout}`,{method:"POST",credentials:"same-origin",body:_})).json();if(g.success&&g.redirect_url)window.location.href=g.redirect_url;else{const S=window;S.Voxel?.alert?S.Voxel.alert(g.message||"Checkout failed","error"):alert(g.message||"Checkout failed"),c(!1)}}catch(s){console.error("Promote checkout error:",s),c(!1)}}},[n,i,e]);return React.createElement("div",{className:"ts-form ts-checkout ts-checkout-promotion"},React.createElement("div",{className:"cart-head"},React.createElement("h1",null,h("Promote","voxel-fse")," ",e.post_title)),React.createElement("div",{className:"checkout-section form-field-grid"},React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,h("Select promotion package","voxel-fse")),React.createElement("ul",{className:"simplify-ul addon-cards flexify"},r.map(s=>React.createElement("li",{key:s.key,className:`flexify${s===n?" adc-selected":""}`,style:{"--ts-accent-1":s.color},onClick:_=>{_.preventDefault(),l(s)}},s.icon?React.createElement("div",{className:"card-icn",dangerouslySetInnerHTML:{__html:s.icon}}):React.createElement("div",{className:"card-icn"},React.createElement("i",{className:"las la-bolt"})),React.createElement("div",{className:"addon-details"},React.createElement("span",{className:"adc-title"},s.label),React.createElement("span",{className:"adc-subtitle"},s.description),React.createElement("div",{className:"vx-addon-price"},Ct(s.price_amount,t)))))))),React.createElement("div",{className:"checkout-section"},React.createElement("a",{href:"#",className:`ts-btn ts-btn-2 form-btn${i?" ts-loading-btn":""}`,onClick:s=>{s.preventDefault(),i||a()}},i&&React.createElement("div",{className:"ts-loader-wrapper"},React.createElement("span",{className:"ts-loader"})),O(o,"checkoutIcon"),h("Pay now","voxel-fse"))))}function Bt(e){const t=(c,a)=>typeof c=="string"?c:typeof c=="number"?String(c):a,o=(c,a)=>{if(typeof c=="number")return c;if(typeof c=="string"){const s=parseFloat(c);if(!isNaN(s))return s}return c==null,a},r=(c,a)=>typeof c=="boolean"?c:c==="true"||c==="1"||c===1?!0:c==="false"||c==="0"||c===0?!1:a,n=(c,a)=>{if(c&&typeof c=="object"){const s=c;return{library:t(s.library,a.library),value:t(s.value,a.value)}}return a},l=Re;return{icons:(c=>{if(!c||typeof c!="object")return{deleteIcon:l,noProductsIcon:l,loginIcon:l,emailIcon:l,userIcon:l,uploadIcon:l,shippingIcon:l,minusIcon:l,plusIcon:l,checkoutIcon:l,continueIcon:l};const a=c;return{deleteIcon:n(a.deleteIcon??a.delete_icon??a.ts_delete_icon,l),noProductsIcon:n(a.noProductsIcon??a.no_products_icon??a.nostock_ico,l),loginIcon:n(a.loginIcon??a.login_icon??a.ts_enter,l),emailIcon:n(a.emailIcon??a.email_icon??a.auth_email_ico,l),userIcon:n(a.userIcon??a.user_icon??a.auth_user_ico,l),uploadIcon:n(a.uploadIcon??a.upload_icon??a.ts_upload_ico,l),shippingIcon:n(a.shippingIcon??a.shipping_icon??a.ts_shipping_ico,l),minusIcon:n(a.minusIcon??a.minus_icon??a.ts_minus_icon,l),plusIcon:n(a.plusIcon??a.plus_icon??a.ts_plus_icon,l),checkoutIcon:n(a.checkoutIcon??a.checkout_icon??a.ts_checkout_icon,l),continueIcon:n(a.continueIcon??a.continue_icon??a.ts_continue_icon,l)}})(e.icons),sectionSpacing:o(e.sectionSpacing??e.section_spacing??e.field_spacing_value,null)??void 0,titleColor:t(e.titleColor??e.title_color??e.wt_color,"")||void 0,emptyCartGap:o(e.emptyCartGap??e.empty_cart_gap??e.ts_nopost_content_Gap,null)??void 0,emptyCartIconSize:o(e.emptyCartIconSize??e.empty_cart_icon_size??e.ts_nopost_ico_size,null)??void 0,emptyCartIconColor:t(e.emptyCartIconColor??e.empty_cart_icon_color??e.ts_nopost_ico_col,"")||void 0,emptyCartTextColor:t(e.emptyCartTextColor??e.empty_cart_text_color??e.ts_nopost_typo_col,"")||void 0,primaryBtnTextColor:t(e.primaryBtnTextColor??e.primary_btn_text_color??e.ts_sf_form_btn_c,"")||void 0,primaryBtnBgColor:t(e.primaryBtnBgColor??e.primary_btn_bg_color??e.ts_sf_form_btn_bg,"")||void 0,primaryBtnBorderColor:t(e.primaryBtnBorderColor??e.primary_btn_border_color,"")||void 0,primaryBtnRadius:o(e.primaryBtnRadius??e.primary_btn_radius??e.ts_sf_form_btn_radius,null)??void 0,primaryBtnIconSize:o(e.primaryBtnIconSize??e.primary_btn_icon_size??e.ts_sf_form_btn_icon_size,null)??void 0,primaryBtnIconColor:t(e.primaryBtnIconColor??e.primary_btn_icon_color??e.ts_sf_form_btn_icon_color,"")||void 0,primaryBtnIconSpacing:o(e.primaryBtnIconSpacing??e.primary_btn_icon_spacing??e.ts_sf_form_btn_icon_spacing,null)??void 0,primaryBtnTextColorHover:t(e.primaryBtnTextColorHover??e.primary_btn_text_color_hover??e.ts_sf_form_btn_c_h,"")||void 0,primaryBtnBgColorHover:t(e.primaryBtnBgColorHover??e.primary_btn_bg_color_hover??e.ts_sf_form_btn_bg_h,"")||void 0,primaryBtnBorderColorHover:t(e.primaryBtnBorderColorHover??e.primary_btn_border_color_hover??e.ts_sf_form_btn_border_h,"")||void 0,primaryBtnIconColorHover:t(e.primaryBtnIconColorHover??e.primary_btn_icon_color_hover??e.ts_sf_form_btn_icon_color_h,"")||void 0,secondaryBtnTextColor:t(e.secondaryBtnTextColor??e.secondary_btn_text_color??e.scnd_btn_c,"")||void 0,secondaryBtnBgColor:t(e.secondaryBtnBgColor??e.secondary_btn_bg_color??e.scnd_btn_bg,"")||void 0,secondaryBtnBorderColor:t(e.secondaryBtnBorderColor??e.secondary_btn_border_color,"")||void 0,secondaryBtnRadius:o(e.secondaryBtnRadius??e.secondary_btn_radius??e.scnd_btn_radius,null)??void 0,secondaryBtnIconSize:o(e.secondaryBtnIconSize??e.secondary_btn_icon_size??e.scnd_btn_icon_size,null)??void 0,secondaryBtnIconColor:t(e.secondaryBtnIconColor??e.secondary_btn_icon_color??e.scnd_btn_icon_color,"")||void 0,secondaryBtnIconSpacing:o(e.secondaryBtnIconSpacing??e.secondary_btn_icon_spacing??e.scnd_btn_icon_pad,null)??void 0,secondaryBtnTextColorHover:t(e.secondaryBtnTextColorHover??e.secondary_btn_text_color_hover??e.scnd_btn_c_h,"")||void 0,secondaryBtnBgColorHover:t(e.secondaryBtnBgColorHover??e.secondary_btn_bg_color_hover??e.scnd_btn_bg_h,"")||void 0,secondaryBtnBorderColorHover:t(e.secondaryBtnBorderColorHover??e.secondary_btn_border_color_hover??e.scnd_btn_border_h,"")||void 0,secondaryBtnIconColorHover:t(e.secondaryBtnIconColorHover??e.secondary_btn_icon_color_hover??e.scnd_btn_icon_color_h,"")||void 0,loaderColor1:t(e.loaderColor1??e.loader_color1??e.tm_color1,"")||void 0,loaderColor2:t(e.loaderColor2??e.loader_color2??e.tm_color2,"")||void 0,checkboxBorderColor:t(e.checkboxBorderColor??e.checkbox_border_color,"")||void 0,checkboxSelectedBgColor:t(e.checkboxSelectedBgColor??e.checkbox_selected_bg_color??e.ts_checkbox_checked,"")||void 0,cartItemSpacing:o(e.cartItemSpacing??e.cart_item_spacing??e.cart_spacing,null)??void 0,cartItemContentSpacing:o(e.cartItemContentSpacing??e.cart_item_content_spacing??e.cart_item_spacing,null)??void 0,cartPictureSize:o(e.cartPictureSize??e.cart_picture_size??e.ts_cart_img_size,null)??void 0,cartPictureRadius:o(e.cartPictureRadius??e.cart_picture_radius??e.ts_cart_img_radius,null)??void 0,cartTitleColor:t(e.cartTitleColor??e.cart_title_color??e.ts_cart_title_col,"")||void 0,cartSubtitleColor:t(e.cartSubtitleColor??e.cart_subtitle_color??e.ts_cart_sub_col,"")||void 0,iconBtnColor:t(e.iconBtnColor??e.icon_btn_color??e.ts_cart_btn_color,"")||void 0,iconBtnBgColor:t(e.iconBtnBgColor??e.icon_btn_bg_color??e.ts_cart_btn_bg,"")||void 0,iconBtnBorderColor:t(e.iconBtnBorderColor??e.icon_btn_border_color,"")||void 0,iconBtnRadius:o(e.iconBtnRadius??e.icon_btn_radius??e.ts_cart_btn_radius,null)??void 0,iconBtnValueSize:o(e.iconBtnValueSize??e.icon_btn_value_size??e.ts_cart_btn_val_size,null)??void 0,iconBtnValueColor:t(e.iconBtnValueColor??e.icon_btn_value_color??e.ts_cart_btn_val_col,"")||void 0,iconBtnColorHover:t(e.iconBtnColorHover??e.icon_btn_color_hover??e.ts_cart_btn_color_h,"")||void 0,iconBtnBgColorHover:t(e.iconBtnBgColorHover??e.icon_btn_bg_color_hover??e.ts_cart_btn_bg_h,"")||void 0,iconBtnBorderColorHover:t(e.iconBtnBorderColorHover??e.icon_btn_border_color_hover??e.ts_cart_btn_border_h,"")||void 0,dropdownBgColor:t(e.dropdownBgColor??e.dropdown_bg_color??e.pg_trs_bg,"")||void 0,dropdownTextColor:t(e.dropdownTextColor??e.dropdown_text_color??e.pg_trs_text,"")||void 0,dropdownBorderColor:t(e.dropdownBorderColor??e.dropdown_border_color,"")||void 0,dropdownRadius:o(e.dropdownRadius??e.dropdown_radius??e.pg_trs_radius,null)??void 0,dropdownHeight:o(e.dropdownHeight??e.dropdown_height??e.pg_trs_height,null)??void 0,dropdownIconColor:t(e.dropdownIconColor??e.dropdown_icon_color??e.pg_trs_ico,"")||void 0,dropdownIconSize:o(e.dropdownIconSize??e.dropdown_icon_size??e.pg_trs_ico_size,null)??void 0,dropdownIconSpacing:o(e.dropdownIconSpacing??e.dropdown_icon_spacing??e.pg_trs_ico_spacing,null)??void 0,dropdownHideChevron:r(e.dropdownHideChevron??e.dropdown_hide_chevron??e.pg_trs_chevron_hide,!1),dropdownChevronColor:t(e.dropdownChevronColor??e.dropdown_chevron_color??e.pg_trs_chevron_col,"")||void 0,dropdownBgColorHover:t(e.dropdownBgColorHover??e.dropdown_bg_color_hover??e.pg_trs_bg_h,"")||void 0,dropdownTextColorHover:t(e.dropdownTextColorHover??e.dropdown_text_color_hover??e.pg_trs_text_h,"")||void 0,dropdownBorderColorHover:t(e.dropdownBorderColorHover??e.dropdown_border_color_hover??e.pg_trs_border_h,"")||void 0,dropdownIconColorHover:t(e.dropdownIconColorHover??e.dropdown_icon_color_hover??e.pg_trs_ico_h,"")||void 0,dropdownBgColorFilled:t(e.dropdownBgColorFilled??e.dropdown_bg_color_filled??e.pg_trs_bg_f,"")||void 0,dropdownTextColorFilled:t(e.dropdownTextColorFilled??e.dropdown_text_color_filled??e.pg_trs_text_f,"")||void 0,dropdownIconColorFilled:t(e.dropdownIconColorFilled??e.dropdown_icon_color_filled??e.pg_trs_ico_f,"")||void 0,dropdownBorderColorFilled:t(e.dropdownBorderColorFilled??e.dropdown_border_color_filled??e.pg_trs_border_f,"")||void 0,shipToTextColor:t(e.shipToTextColor??e.ship_to_text_color??e.shipto_color,"")||void 0,shipToLinkColor:t(e.shipToLinkColor??e.ship_to_link_color??e.shipto_link_color,"")||void 0,dividerTextColor:t(e.dividerTextColor??e.divider_text_color??e.sd_color,"")||void 0,dividerLineColor:t(e.dividerLineColor??e.divider_line_color??e.sd_div_color,"")||void 0,dividerLineHeight:o(e.dividerLineHeight??e.divider_line_height??e.sd_div_height,null)??void 0,subtotalTextColor:t(e.subtotalTextColor??e.subtotal_text_color??e.calc_text_color_total,"")||void 0,fieldLabelColor:t(e.fieldLabelColor??e.field_label_color??e.auth_label_col,"")||void 0,fieldLabelLinkColor:t(e.fieldLabelLinkColor??e.field_label_link_color??e.auth_label_link,"")||void 0,inputPlaceholderColor:t(e.inputPlaceholderColor??e.input_placeholder_color??e.auth_placeholder_color,"")||void 0,inputValueColor:t(e.inputValueColor??e.input_value_color??e.auth_input_color,"")||void 0,inputBgColor:t(e.inputBgColor??e.input_bg_color??e.auth_input_bg,"")||void 0,inputBorderColor:t(e.inputBorderColor??e.input_border_color,"")||void 0,inputHeight:o(e.inputHeight??e.input_height??e.auth_input_height,null)??void 0,inputRadius:o(e.inputRadius??e.input_radius??e.auth_input_radius,null)??void 0,inputIconColor:t(e.inputIconColor??e.input_icon_color??e.auth_icon_color,"")||void 0,inputIconSize:o(e.inputIconSize??e.input_icon_size??e.auth_icon_size,null)??void 0,inputIconMargin:o(e.inputIconMargin??e.input_icon_margin??e.auth_icon_margin,null)??void 0,textareaRadius:o(e.textareaRadius??e.textarea_radius??e.auth_textarea_radius,null)??void 0,inputBgColorHover:t(e.inputBgColorHover??e.input_bg_color_hover??e.auth_input_bg_h,"")||void 0,inputBorderColorHover:t(e.inputBorderColorHover??e.input_border_color_hover??e.auth_input_border_h,"")||void 0,inputPlaceholderColorHover:t(e.inputPlaceholderColorHover??e.input_placeholder_color_hover??e.auth_placeholder_color_h,"")||void 0,inputValueColorHover:t(e.inputValueColorHover??e.input_value_color_hover??e.auth_input_color_h,"")||void 0,inputIconColorHover:t(e.inputIconColorHover??e.input_icon_color_hover??e.auth_icon_color_h,"")||void 0,inputBgColorActive:t(e.inputBgColorActive??e.input_bg_color_active??e.auth_input_bg_a,"")||void 0,inputBorderColorActive:t(e.inputBorderColorActive??e.input_border_color_active??e.auth_input_border_a,"")||void 0,inputPlaceholderColorActive:t(e.inputPlaceholderColorActive??e.input_placeholder_color_active??e.auth_placeholder_color_a,"")||void 0,inputValueColorActive:t(e.inputValueColorActive??e.input_value_color_active??e.auth_input_color_a,"")||void 0,cardsGap:o(e.cardsGap??e.cards_gap??e.ts_method_cards_gap,null)??void 0,cardsBgColor:t(e.cardsBgColor??e.cards_bg_color??e.ts_method_cards_bg,"")||void 0,cardsBorderColor:t(e.cardsBorderColor??e.cards_border_color,"")||void 0,cardsRadius:o(e.cardsRadius??e.cards_radius??e.ts_method_cards_radius,null)??void 0,cardsPrimaryColor:t(e.cardsPrimaryColor??e.cards_primary_color??e.ts_method_cards_col,"")||void 0,cardsSecondaryColor:t(e.cardsSecondaryColor??e.cards_secondary_color??e.ts_method_cards_scnd_col,"")||void 0,cardsPriceColor:t(e.cardsPriceColor??e.cards_price_color??e.ts_method_cards_price_col,"")||void 0,cardsImageRadius:o(e.cardsImageRadius??e.cards_image_radius??e.ts_method_cards_img_radius,null)??void 0,cardsImageSize:o(e.cardsImageSize??e.cards_image_size??e.ts_method_cards_img_size,null)??void 0,cardsSelectedBgColor:t(e.cardsSelectedBgColor??e.cards_selected_bg_color??e.ts_method_cards_bg_a,"")||void 0,cardsSelectedBorderColor:t(e.cardsSelectedBorderColor??e.cards_selected_border_color??e.ts_method_cards_border_a,"")||void 0,fileFieldGap:o(e.fileFieldGap??e.file_field_gap,null)??void 0,fileSelectIconColor:t(e.fileSelectIconColor??e.file_select_icon_color,"")||void 0,fileSelectIconSize:o(e.fileSelectIconSize??e.file_select_icon_size,null)??void 0,fileSelectBgColor:t(e.fileSelectBgColor??e.file_select_bg_color??e.file_select_bg,"")||void 0,fileSelectBorderColor:t(e.fileSelectBorderColor??e.file_select_border_color,"")||void 0,fileSelectRadius:o(e.fileSelectRadius??e.file_select_radius,null)??void 0,fileSelectTextColor:t(e.fileSelectTextColor??e.file_select_text_color,"")||void 0,addedFileRadius:o(e.addedFileRadius??e.added_file_radius,null)??void 0,addedFileBgColor:t(e.addedFileBgColor??e.added_file_bg_color??e.added_file_bg,"")||void 0,addedFileIconColor:t(e.addedFileIconColor??e.added_file_icon_color,"")||void 0,addedFileIconSize:o(e.addedFileIconSize??e.added_file_icon_size,null)??void 0,addedFileTextColor:t(e.addedFileTextColor??e.added_file_text_color,"")||void 0,removeFileBgColor:t(e.removeFileBgColor??e.remove_file_bg_color??e.remove_file_bg,"")||void 0,removeFileBgColorHover:t(e.removeFileBgColorHover??e.remove_file_bg_color_hover??e.remove_file_bg_h,"")||void 0,removeFileColor:t(e.removeFileColor??e.remove_file_color,"")||void 0,removeFileColorHover:t(e.removeFileColorHover??e.remove_file_color_hover??e.remove_file_color_h,"")||void 0,removeFileRadius:o(e.removeFileRadius??e.remove_file_radius,null)??void 0,removeFileSize:o(e.removeFileSize??e.remove_file_size,null)??void 0,removeFileIconSize:o(e.removeFileIconSize??e.remove_file_icon_size,null)??void 0,fileSelectIconColorHover:t(e.fileSelectIconColorHover??e.file_select_icon_color_hover??e.file_select_icon_color_h,"")||void 0,fileSelectBgColorHover:t(e.fileSelectBgColorHover??e.file_select_bg_color_hover??e.file_select_bg_h,"")||void 0,fileSelectBorderColorHover:t(e.fileSelectBorderColorHover??e.file_select_border_color_hover??e.file_select_border_h,"")||void 0,fileSelectTextColorHover:t(e.fileSelectTextColorHover??e.file_select_text_color_hover??e.file_select_text_color_h,"")||void 0}}function St(){return ge()}function W(){const e=window;return typeof window<"u"&&e.Voxel_Config?.ajax_url?e.Voxel_Config.ajax_url:re().replace("?vx=1","")}function Et(e){const t=e.querySelector("script.vxconfig");if(t&&t.textContent)try{const o=JSON.parse(t.textContent);return Bt(o)}catch(o){console.error("Failed to parse vxconfig:",o)}return null}function xt(e){return{blockId:"",deleteIcon:x(e.icons?.deleteIcon,"deleteIcon"),noProductsIcon:ne(e.icons?.noProductsIcon)&&e.icons.noProductsIcon.value!==vt?e.icons.noProductsIcon:Be.noProductsIcon,loginIcon:x(e.icons?.loginIcon,"loginIcon"),emailIcon:x(e.icons?.emailIcon,"emailIcon"),userIcon:x(e.icons?.userIcon,"userIcon"),uploadIcon:x(e.icons?.uploadIcon,"uploadIcon"),shippingIcon:x(e.icons?.shippingIcon,"shippingIcon"),minusIcon:x(e.icons?.minusIcon,"minusIcon"),plusIcon:x(e.icons?.plusIcon,"plusIcon"),checkoutIcon:x(e.icons?.checkoutIcon,"checkoutIcon"),continueIcon:x(e.icons?.continueIcon,"continueIcon"),sectionSpacing:e.sectionSpacing||40,sectionSpacing_tablet:null,sectionSpacing_mobile:null,titleTypography:{},titleColor:e.titleColor||"",emptyCartGap:e.emptyCartGap??null,emptyCartGap_tablet:null,emptyCartGap_mobile:null,emptyCartIconSize:e.emptyCartIconSize??null,emptyCartIconSize_tablet:null,emptyCartIconSize_mobile:null,emptyCartIconColor:e.emptyCartIconColor||"",emptyCartTypography:{},emptyCartTextColor:e.emptyCartTextColor||"",primaryBtnTypography:{},primaryBtnBorderType:"",primaryBtnBorderWidth:{},primaryBtnBorderColor:e.primaryBtnBorderColor||"",primaryBtnRadius:e.primaryBtnRadius??null,primaryBtnRadius_tablet:null,primaryBtnRadius_mobile:null,primaryBtnBoxShadow:{},primaryBtnTextColor:e.primaryBtnTextColor||"",primaryBtnBgColor:e.primaryBtnBgColor||"",primaryBtnIconSize:e.primaryBtnIconSize??null,primaryBtnIconSize_tablet:null,primaryBtnIconSize_mobile:null,primaryBtnIconColor:e.primaryBtnIconColor||"",primaryBtnIconSpacing:e.primaryBtnIconSpacing??null,primaryBtnIconSpacing_tablet:null,primaryBtnIconSpacing_mobile:null,primaryBtnTextColorHover:e.primaryBtnTextColorHover||"",primaryBtnBgColorHover:e.primaryBtnBgColorHover||"",primaryBtnBorderColorHover:e.primaryBtnBorderColorHover||"",primaryBtnBoxShadowHover:{},primaryBtnIconColorHover:e.primaryBtnIconColorHover||"",secondaryBtnTypography:{},secondaryBtnRadius:e.secondaryBtnRadius??null,secondaryBtnRadius_tablet:null,secondaryBtnRadius_mobile:null,secondaryBtnTextColor:e.secondaryBtnTextColor||"",secondaryBtnPadding:{},secondaryBtnPadding_tablet:{},secondaryBtnPadding_mobile:{},secondaryBtnBgColor:e.secondaryBtnBgColor||"",secondaryBtnBorderType:"",secondaryBtnBorderWidth:{},secondaryBtnBorderColor:e.secondaryBtnBorderColor||"",secondaryBtnIconSize:e.secondaryBtnIconSize??null,secondaryBtnIconSize_tablet:null,secondaryBtnIconSize_mobile:null,secondaryBtnIconSpacing:e.secondaryBtnIconSpacing??null,secondaryBtnIconSpacing_tablet:null,secondaryBtnIconSpacing_mobile:null,secondaryBtnIconColor:e.secondaryBtnIconColor||"",secondaryBtnTextColorHover:e.secondaryBtnTextColorHover||"",secondaryBtnBgColorHover:e.secondaryBtnBgColorHover||"",secondaryBtnBorderColorHover:e.secondaryBtnBorderColorHover||"",secondaryBtnIconColorHover:e.secondaryBtnIconColorHover||"",loaderColor1:e.loaderColor1||"",loaderColor2:e.loaderColor2||"",checkboxBorderColor:e.checkboxBorderColor||"",checkboxSelectedBgColor:e.checkboxSelectedBgColor||"",checkboxSelectedBoxShadow:{},cartItemSpacing:e.cartItemSpacing??null,cartItemSpacing_tablet:null,cartItemSpacing_mobile:null,cartItemContentSpacing:e.cartItemContentSpacing??null,cartItemContentSpacing_tablet:null,cartItemContentSpacing_mobile:null,cartPictureSize:e.cartPictureSize??null,cartPictureSize_tablet:null,cartPictureSize_mobile:null,cartPictureRadius:e.cartPictureRadius??null,cartPictureRadius_tablet:null,cartPictureRadius_mobile:null,cartTitleTypography:{},cartTitleColor:e.cartTitleColor||"",cartSubtitleTypography:{},cartSubtitleColor:e.cartSubtitleColor||"",iconBtnColor:e.iconBtnColor||"",iconBtnBgColor:e.iconBtnBgColor||"",iconBtnBorderType:"",iconBtnBorderWidth:{},iconBtnBorderColor:e.iconBtnBorderColor||"",iconBtnRadius:e.iconBtnRadius??null,iconBtnRadius_tablet:null,iconBtnRadius_mobile:null,iconBtnValueSize:e.iconBtnValueSize??null,iconBtnValueColor:e.iconBtnValueColor||"",iconBtnColorHover:e.iconBtnColorHover||"",iconBtnBgColorHover:e.iconBtnBgColorHover||"",iconBtnBorderColorHover:e.iconBtnBorderColorHover||"",dropdownTypography:{},dropdownBoxShadow:{},dropdownBgColor:e.dropdownBgColor||"",dropdownTextColor:e.dropdownTextColor||"",dropdownBorderType:"",dropdownBorderWidth:{},dropdownBorderColor:e.dropdownBorderColor||"",dropdownRadius:e.dropdownRadius??null,dropdownRadius_tablet:null,dropdownRadius_mobile:null,dropdownHeight:e.dropdownHeight??null,dropdownHeight_tablet:null,dropdownHeight_mobile:null,dropdownIconColor:e.dropdownIconColor||"",dropdownIconSize:e.dropdownIconSize??24,dropdownIconSize_tablet:null,dropdownIconSize_mobile:null,dropdownIconSpacing:e.dropdownIconSpacing??10,dropdownIconSpacing_tablet:null,dropdownIconSpacing_mobile:null,dropdownHideChevron:e.dropdownHideChevron||!1,dropdownChevronColor:e.dropdownChevronColor||"",dropdownBgColorHover:e.dropdownBgColorHover||"",dropdownTextColorHover:e.dropdownTextColorHover||"",dropdownBorderColorHover:e.dropdownBorderColorHover||"",dropdownIconColorHover:e.dropdownIconColorHover||"",dropdownBoxShadowHover:{},dropdownTypographyFilled:{},dropdownBgColorFilled:e.dropdownBgColorFilled||"",dropdownTextColorFilled:e.dropdownTextColorFilled||"",dropdownIconColorFilled:e.dropdownIconColorFilled||"",dropdownBorderColorFilled:e.dropdownBorderColorFilled||"",dropdownBorderWidthFilled:null,dropdownBoxShadowFilled:{},shipToTypography:{},shipToTextColor:e.shipToTextColor||"",shipToLinkColor:e.shipToLinkColor||"",dividerTypography:{},dividerTextColor:e.dividerTextColor||"",dividerLineColor:e.dividerLineColor||"",dividerLineHeight:e.dividerLineHeight??null,subtotalTypography:{},subtotalTextColor:e.subtotalTextColor||"",fieldLabelTypography:{},fieldLabelColor:e.fieldLabelColor||"",fieldLabelLinkColor:e.fieldLabelLinkColor||"",inputPlaceholderColor:e.inputPlaceholderColor||"",inputPlaceholderTypography:{},inputValueColor:e.inputValueColor||"",inputValueTypography:{},inputBgColor:e.inputBgColor||"",inputBorderType:"",inputBorderWidth:{},inputBorderColor:e.inputBorderColor||"",inputPadding:{},inputPadding_tablet:{},inputPadding_mobile:{},inputHeight:e.inputHeight??null,inputHeight_tablet:null,inputHeight_mobile:null,inputRadius:e.inputRadius??null,inputRadius_tablet:null,inputRadius_mobile:null,inputWithIconPadding:{},inputWithIconPadding_tablet:{},inputWithIconPadding_mobile:{},inputIconColor:e.inputIconColor||"",inputIconSize:e.inputIconSize??null,inputIconSize_tablet:null,inputIconSize_mobile:null,inputIconMargin:e.inputIconMargin??null,inputIconMargin_tablet:null,inputIconMargin_mobile:null,textareaPadding:{},textareaPadding_tablet:{},textareaPadding_mobile:{},textareaRadius:e.textareaRadius??null,textareaRadius_tablet:null,textareaRadius_mobile:null,inputBgColorHover:e.inputBgColorHover||"",inputBorderColorHover:e.inputBorderColorHover||"",inputPlaceholderColorHover:e.inputPlaceholderColorHover||"",inputValueColorHover:e.inputValueColorHover||"",inputIconColorHover:e.inputIconColorHover||"",inputBgColorActive:e.inputBgColorActive||"",inputBorderColorActive:e.inputBorderColorActive||"",inputPlaceholderColorActive:e.inputPlaceholderColorActive||"",inputValueColorActive:e.inputValueColorActive||"",cardsGap:e.cardsGap??null,cardsGap_tablet:null,cardsGap_mobile:null,cardsBgColor:e.cardsBgColor||"",cardsBorderType:"",cardsBorderWidth:{},cardsBorderColor:e.cardsBorderColor||"",cardsRadius:e.cardsRadius??null,cardsRadius_tablet:null,cardsRadius_mobile:null,cardsPrimaryTypography:{},cardsPrimaryColor:e.cardsPrimaryColor||"",cardsSecondaryTypography:{},cardsSecondaryColor:e.cardsSecondaryColor||"",cardsPriceTypography:{},cardsPriceColor:e.cardsPriceColor||"",cardsImageRadius:e.cardsImageRadius??null,cardsImageRadius_tablet:null,cardsImageRadius_mobile:null,cardsImageSize:e.cardsImageSize??null,cardsImageSize_tablet:null,cardsImageSize_mobile:null,cardsSelectedBgColor:e.cardsSelectedBgColor||"",cardsSelectedBorderColor:e.cardsSelectedBorderColor||"",cardsSelectedBoxShadow:{},cardsSelectedPrimaryTypography:{},fileFieldGap:e.fileFieldGap??null,fileFieldGap_tablet:null,fileFieldGap_mobile:null,fileSelectIconColor:e.fileSelectIconColor||"",fileSelectIconSize:e.fileSelectIconSize??null,fileSelectIconSize_tablet:null,fileSelectIconSize_mobile:null,fileSelectBgColor:e.fileSelectBgColor||"",fileSelectBorderType:"",fileSelectBorderWidth:{},fileSelectBorderColor:e.fileSelectBorderColor||"",fileSelectRadius:e.fileSelectRadius??null,fileSelectRadius_tablet:null,fileSelectRadius_mobile:null,fileSelectTypography:{},fileSelectTextColor:e.fileSelectTextColor||"",addedFileRadius:e.addedFileRadius??null,addedFileRadius_tablet:null,addedFileRadius_mobile:null,addedFileBgColor:e.addedFileBgColor||"",addedFileIconColor:e.addedFileIconColor||"",addedFileIconSize:e.addedFileIconSize??null,addedFileIconSize_tablet:null,addedFileIconSize_mobile:null,addedFileTypography:{},addedFileTextColor:e.addedFileTextColor||"",removeFileBgColor:e.removeFileBgColor||"",removeFileBgColorHover:e.removeFileBgColorHover||"",removeFileColor:e.removeFileColor||"",removeFileColorHover:e.removeFileColorHover||"",removeFileRadius:e.removeFileRadius??null,removeFileRadius_tablet:null,removeFileRadius_mobile:null,removeFileSize:e.removeFileSize??null,removeFileIconSize:e.removeFileIconSize??null,fileSelectIconColorHover:e.fileSelectIconColorHover||"",fileSelectBgColorHover:e.fileSelectBgColorHover||"",fileSelectBorderColorHover:e.fileSelectBorderColorHover||"",fileSelectTextColorHover:e.fileSelectTextColorHover||"",blockMargin:{},blockMargin_tablet:{},blockMargin_mobile:{},blockPadding:{},blockPadding_tablet:{},blockPadding_mobile:{},hideDesktop:!1,hideTablet:!1,hideMobile:!1,customClasses:"",customCSS:""}}async function kt(){const e=St();try{const t={},o=window.wpApiSettings?.nonce;o&&(t["X-WP-Nonce"]=o);const r=await fetch(`${e}voxel-fse/v1/cart/config`,{credentials:"same-origin",headers:t});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(t){return console.error("Failed to fetch cart config:",t),null}}async function Ft(e,t){const o=W();try{const r=localStorage.getItem("voxel:guest_cart"),n=t?"products.get_cart_items":"products.get_guest_cart_items",l=new FormData;l.append("_wpnonce",e.nonce.cart),r&&l.append("guest_cart",r);const i=await fetch(`${o}?vx=1&action=${n}`,{method:"POST",credentials:"same-origin",body:l});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const c=await i.text();if(!c||c.trim()==="")return console.warn("Empty response from cart items endpoint"),{};let a;try{a=JSON.parse(c)}catch{throw console.error("Failed to parse cart items response:",c),new Error("Invalid JSON response from server")}return a.success?(t&&r&&localStorage.removeItem("voxel:guest_cart"),a.items||{}):(console.error("Failed to fetch cart items:",a.message),null)}catch(r){return console.error("Failed to fetch cart items:",r),null}}async function Nt(e,t){const o=W();try{let r=null;try{const c=localStorage.getItem("voxel:direct_cart");c&&(r=JSON.parse(c)[t])}catch(c){console.error("Failed to parse direct cart:",c)}const n=new URL(`${o}`);n.searchParams.set("vx","1"),n.searchParams.set("action","products.get_direct_cart"),n.searchParams.set("_wpnonce",e.nonce.cart),r&&n.searchParams.set("item",JSON.stringify(r));const l=await fetch(n.toString(),{credentials:"same-origin"});if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);const i=await l.json();return i.success&&i.item?{[i.item.key]:i.item}:(console.error("Failed to fetch direct cart item:",i.message),{})}catch(r){return console.error("Failed to fetch direct cart item:",r),null}}function Ht({attributes:e}){const[t,o]=v.useState(null),[r,n]=v.useState(null),[l,i]=v.useState(!0),[c,a]=v.useState(null),[s,_]=v.useState({first_name:"",last_name:"",country:null,state:"",address:"",zip:"",zone:null,rate:null,status:"pending_setup",vendors:{}}),[f,g]=v.useState({email:"",sending_code:!1,sent_code:!1,code:"",registered:!1,terms_agreed:!1}),[S,b]=v.useState({enabled:!1,content:""}),[T,u]=v.useState("cart"),[R,I]=v.useState(null),D=async B=>{for(const d of B)try{const E=await(await fetch(d.url)).json();if(E?.[d.prop]){const C=E[d.prop];if(typeof C=="string")return document.cookie=`_vx_ccode=${C}; max-age:259200; path=/`,C.toUpperCase()}}catch(p){console.error("GeoIP provider error:",p)}return null},m=B=>new URLSearchParams(window.location.search).get(B),y=B=>{const d=new URL(window.location.href);d.searchParams.delete(B),window.history.replaceState({},"",d.toString())};v.useEffect(()=>{let B=!1;async function d(){const p=await kt();if(B)return;if(!p){a("Failed to load cart configuration"),i(!1);return}o(p);const E=m("screen"),C=m("post_id");if(E==="promote"&&C&&p.is_logged_in)try{const N=ge(),j=await fetch(`${N}voxel-fse/v1/cart/promote-config?post_id=${encodeURIComponent(C)}`,{credentials:"same-origin"});if(j.ok){const U=await j.json();if(!B&&U.success!==!1){I(U),i(!1);return}}}catch(N){console.error("Failed to load promote config:",N)}const F=m("checkout_item");if(F){u("direct_cart");const N=m("_item");if(N)try{const U=JSON.parse(atob(N));localStorage.setItem("voxel:direct_cart",JSON.stringify({[F]:U}))}catch(U){console.error("Failed to parse direct cart item:",U)}const j=await Nt(p,F);!B&&j!==null&&n(j),i(!1);return}const A=p.shipping.saved_address,H=p.shipping.default_country,w=p.shipping.countries;if(A&&A.country&&w[A.country])_({first_name:A.first_name||"",last_name:A.last_name||"",country:A.country,state:A.state||"",address:A.address||"",zip:A.zip||"",zone:null,rate:null,status:"completed",vendors:{}}),A.country;else if(H&&w[H])_(N=>({...N,country:H,status:"completed"}));else if(p.geoip_providers.length>0){const N=await D(p.geoip_providers);if(N&&w[N])_(j=>({...j,country:N,status:"completed"}));else{const j=Object.keys(w);j.length>0?(j[0],_(U=>({...U,country:j[0],status:"completed"}))):_(U=>({...U,status:"completed"}))}}else{const N=Object.keys(w);N.length>0?(N[0],_(j=>({...j,country:N[0],status:"completed"}))):_(j=>({...j,status:"completed"}))}const G=await Ft(p,p.is_logged_in);B||(n(G!==null?G:{}),i(!1))}return d(),()=>{B=!0}},[]);const k=v.useCallback(async(B,d)=>{if(!t||!r)return;const p=r[B];if(!p)return;const E={...r};E[B]={...p,_disabled:!0},n(E);try{const C=W(),F=t.is_logged_in||f.registered,A=F?"products.update_cart_item_quantity":"products.update_guest_cart_item_quantity",H=new FormData;if(H.append("item_key",B),H.append("item_quantity",String(d)),H.append("_wpnonce",t.nonce.cart),!F){const N=localStorage.getItem("voxel:guest_cart");N&&H.append("guest_cart",N)}const G=await(await fetch(`${C}?vx=1&action=${A}`,{method:"POST",credentials:"same-origin",body:H})).json();G.success&&G.item?(n(N=>N&&{...N,[B]:G.item}),F||P({...r,[B]:G.item})):(n(N=>N&&{...N,[B]:{...p,_disabled:!1}}),alert(G.message||"Failed to update quantity"))}catch(C){n(F=>F&&{...F,[B]:{...p,_disabled:!1}}),console.error("Failed to update quantity:",C)}},[t,r,f.registered]),z=v.useCallback(async B=>{if(!t||!r||!r[B])return;if(T==="direct_cart"){n({}),localStorage.removeItem("voxel:direct_cart"),y("checkout_item");return}const p={...r};delete p[B];try{const E=W();if(t.is_logged_in||f.registered){const F=new FormData;F.append("item_key",B),F.append("_wpnonce",t.nonce.cart);const H=await(await fetch(`${E}?vx=1&action=products.remove_cart_item`,{method:"POST",credentials:"same-origin",body:F})).json();H.success?n(p):alert(H.message||"Failed to remove item")}else n(p),P(p)}catch(E){console.error("Failed to remove item:",E)}},[t,r,f.registered]),P=B=>{if(Object.keys(B).length){const d={};Object.values(B).forEach(p=>{d[p.key]=p.value}),localStorage.setItem("voxel:guest_cart",JSON.stringify(d))}else localStorage.removeItem("voxel:guest_cart")},[M,$]=v.useState(!1),V=v.useCallback(async()=>{if(!t)return!1;const B=W(),d=new FormData;d.append("email",f.email),d.append("_wpnonce",t.nonce.checkout),t.guest_customers.proceed_with_email?.require_verification&&d.append("_confirmation_code",f.code),t.guest_customers.proceed_with_email?.require_tos&&d.append("terms_agreed",f.terms_agreed?"1":"0");const p=localStorage.getItem("voxel:guest_cart");if(p&&d.append("guest_cart",p),t.recaptcha.enabled&&t.recaptcha.key){const E=window.grecaptcha;if(E)try{const C=await new Promise(F=>{E.ready(async()=>{const A=await E.execute(t.recaptcha.key,{action:"quick_register"});F(A)})});d.append("_recaptcha",C)}catch(C){console.error("reCAPTCHA error:",C)}}try{const C=await(await fetch(`${B}?vx=1&action=products.quick_register.process`,{method:"POST",credentials:"same-origin",body:d})).json();if(C.success&&C.nonces)return o(F=>F&&{...F,nonce:C.nonces,is_logged_in:!0}),g(F=>({...F,registered:!0})),localStorage.removeItem("voxel:guest_cart"),!0;{const F=window;return F.Voxel?.alert?F.Voxel.alert(C.message||"Registration failed"):alert(C.message||"Registration failed"),!1}}catch(E){return console.error("Quick register error:",E),!1}},[t,f]),ce=v.useCallback(async()=>{if(!(!t||!r)&&!M){$(!0);try{if(!(t.is_logged_in||f.registered)&&t.guest_customers.behavior==="proceed_with_email"&&!await V()){$(!1);return}const d=new FormData;d.append("source",T);const p=Object.values(r).map(H=>({key:H.key,value:H.value}));if(d.append("items",JSON.stringify(p)),S.enabled&&S.content&&d.append("order_notes",S.content),Object.values(r).some(H=>H.shipping.is_shippable)&&s.country){const H={address:{first_name:s.first_name,last_name:s.last_name,country:s.country,state:s.state,address:s.address,zip:s.zip}};t.shipping.responsibility==="platform"&&s.zone&&s.rate?H.method={zone:s.zone,rate:s.rate}:t.shipping.responsibility==="vendor"&&Object.keys(s.vendors).length>0&&(H.vendors=s.vendors),d.append("shipping",JSON.stringify(H))}d.append("redirect_to",window.location.href);const C=W(),A=await(await fetch(`${C}?vx=1&action=products.checkout&_wpnonce=${t.nonce.checkout}`,{method:"POST",credentials:"same-origin",body:d})).json();if(A.success&&A.redirect_url)window.location.href=A.redirect_url;else{const H=window;H.Voxel?.alert?H.Voxel.alert(A.message||"Checkout failed"):alert(A.message||"Checkout failed"),$(!1)}}catch(B){console.error("Checkout error:",B),$(!1)}}},[t,r,s,f,S,M,V]),J=v.useCallback(B=>{_(d=>({...d,...B}))},[]),Y=v.useCallback(B=>{g(d=>({...d,...B}))},[]),Q=v.useCallback(B=>{b(d=>({...d,...B}))},[]);return R?React.createElement(Rt,{config:R,currency:t?.currency||"USD",checkoutIcon:e.checkoutIcon}):React.createElement(bt,{attributes:e,config:t,items:r,context:"frontend",isLoading:l,error:c,onUpdateQuantity:k,onRemoveItem:z,onCheckout:ce,shipping:s,onShippingChange:J,quickRegister:f,onQuickRegisterChange:Y,orderNotes:S,onOrderNotesChange:Q})}function Z(){document.querySelectorAll(".voxel-fse-cart-summary-frontend, .vx-cart-summary-widget").forEach(t=>{if(t.dataset.reactMounted==="true")return;const o=Et(t);if(!o){console.warn("Cart Summary block: No vxconfig found");return}const r=xt(o);t.innerHTML="",t.dataset.reactMounted="true",xe.createRoot(t).render(React.createElement(Ht,{attributes:r}))})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Z):Z(),window.addEventListener("turbo:load",Z),window.addEventListener("pjax:complete",Z),document.addEventListener("voxel:markup-update",Z)})(ReactDOM,React);
