(function(Be,v){"use strict";var te,ae,J,ie;te={"(":9,"!":8,"*":7,"/":7,"%":7,"+":6,"-":6,"<":5,"<=":5,">":5,">=":5,"==":4,"!=":4,"&&":3,"||":2,"?":1,"?:":1},ae=["(","?"],J={")":["("],":":["?","?:"]},ie=/<=|>=|==|!=|&&|\|\||\?:|\(|!|\*|\/|%|\+|-|<|>|\?|\)|:/;function Ee(e){for(var t=[],o=[],r,n,l,i;r=e.match(ie);){for(n=r[0],l=e.substr(0,r.index).trim(),l&&t.push(l);i=o.pop();){if(J[n]){if(J[n][0]===i){n=J[n][1]||n;break}}else if(ae.indexOf(i)>=0||te[i]<te[n]){o.push(i);break}t.push(i)}J[n]||o.push(n),e=e.substr(r.index+n.length)}return e=e.trim(),e&&t.push(e),t.concat(o.reverse())}var xe={"!":function(e){return!e},"*":function(e,t){return e*t},"/":function(e,t){return e/t},"%":function(e,t){return e%t},"+":function(e,t){return e+t},"-":function(e,t){return e-t},"<":function(e,t){return e<t},"<=":function(e,t){return e<=t},">":function(e,t){return e>t},">=":function(e,t){return e>=t},"==":function(e,t){return e===t},"!=":function(e,t){return e!==t},"&&":function(e,t){return e&&t},"||":function(e,t){return e||t},"?:":function(e,t,o){if(e)throw t;return o}};function ke(e,t){var o=[],r,n,l,i,c,a;for(r=0;r<e.length;r++){if(c=e[r],i=xe[c],i){for(n=i.length,l=Array(n);n--;)l[n]=o.pop();try{a=i.apply(null,l)}catch(s){return s}}else t.hasOwnProperty(c)?a=t[c]:a=+c;o.push(a)}return o[0]}function Ne(e){var t=Ee(e);return function(o){return ke(t,o)}}function Fe(e){var t=Ne(e);return function(o){return+t({n:o})}}var se={contextDelimiter:"",onMissingKey:null};function He(e){var t,o,r;for(t=e.split(";"),o=0;o<t.length;o++)if(r=t[o].trim(),r.indexOf("plural=")===0)return r.substr(7)}function oe(e,t){var o;this.data=e,this.pluralForms={},this.options={};for(o in se)this.options[o]=t!==void 0&&o in t?t[o]:se[o]}oe.prototype.getPluralForm=function(e,t){var o=this.pluralForms[e],r,n,l;return o||(r=this.data[e][""],l=r["Plural-Forms"]||r["plural-forms"]||r.plural_forms,typeof l!="function"&&(n=He(r["Plural-Forms"]||r["plural-forms"]||r.plural_forms),l=Fe(n)),o=this.pluralForms[e]=l),o(t)},oe.prototype.dcnpgettext=function(e,t,o,r,n){var l,i,c;return n===void 0?l=0:l=this.getPluralForm(e,n),i=o,t&&(i=t+this.options.contextDelimiter+o),c=this.data[e][i],c&&c[l]?c[l]:(this.options.onMissingKey&&this.options.onMissingKey(o,e),l===0?o:r)};var de={"":{plural_forms(e){return e===1?0:1}}},Te=/^i18n\.(n?gettext|has_translation)(_|$)/,Pe=(e,t,o)=>{const r=new oe({}),n=new Set,l=()=>{n.forEach(m=>m())},i=m=>(n.add(m),()=>n.delete(m)),c=(m="default")=>r.data[m],a=(m,y="default")=>{r.data[y]={...r.data[y],...m},r.data[y][""]={...de[""],...r.data[y]?.[""]},delete r.pluralForms[y]},s=(m,y)=>{a(m,y),l()},f=(m,y="default")=>{r.data[y]={...r.data[y],...m,"":{...de[""],...r.data[y]?.[""],...m?.[""]}},delete r.pluralForms[y],l()},h=(m,y)=>{r.data={},r.pluralForms={},s(m,y)},g=(m="default",y,x,z,P)=>(r.data[m]||a(void 0,m),r.dcnpgettext(m,y,x,z,P)),B=m=>m||"default",b=(m,y)=>{let x=g(y,void 0,m);return o?(x=o.applyFilters("i18n.gettext",x,m,y),o.applyFilters("i18n.gettext_"+B(y),x,m,y)):x},H=(m,y,x)=>{let z=g(x,y,m);return o?(z=o.applyFilters("i18n.gettext_with_context",z,m,y,x),o.applyFilters("i18n.gettext_with_context_"+B(x),z,m,y,x)):z},u=(m,y,x,z)=>{let P=g(z,void 0,m,y,x);return o?(P=o.applyFilters("i18n.ngettext",P,m,y,x,z),o.applyFilters("i18n.ngettext_"+B(z),P,m,y,x,z)):P},C=(m,y,x,z,P)=>{let $=g(P,z,m,y,x);return o?($=o.applyFilters("i18n.ngettext_with_context",$,m,y,x,z,P),o.applyFilters("i18n.ngettext_with_context_"+B(P),$,m,y,x,z,P)):$},R=()=>H("ltr","text direction")==="rtl",D=(m,y,x)=>{const z=y?y+""+m:m;let P=!!r.data?.[x??"default"]?.[z];return o&&(P=o.applyFilters("i18n.has_translation",P,m,y,x),P=o.applyFilters("i18n.has_translation_"+B(x),P,m,y,x)),P};if(o){const m=y=>{Te.test(y)&&l()};o.addAction("hookAdded","core/i18n",m),o.addAction("hookRemoved","core/i18n",m)}return{getLocaleData:c,setLocaleData:s,addLocaleData:f,resetLocaleData:h,subscribe:i,__:b,_x:H,_n:u,_nx:C,isRTL:R,hasTranslation:D}};function ze(e){return typeof e!="string"||e===""?(console.error("The namespace must be a non-empty string."),!1):/^[a-zA-Z][a-zA-Z0-9_.\-\/]*$/.test(e)?!0:(console.error("The namespace can only contain numbers, letters, dashes, periods, underscores and slashes."),!1)}var ue=ze;function Ae(e){return typeof e!="string"||e===""?(console.error("The hook name must be a non-empty string."),!1):/^__/.test(e)?(console.error("The hook name cannot begin with `__`."),!1):/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(e)?!0:(console.error("The hook name can only contain numbers, letters, dashes, periods and underscores."),!1)}var re=Ae;function Oe(e,t){return function(r,n,l,i=10){const c=e[t];if(!re(r)||!ue(n))return;if(typeof l!="function"){console.error("The hook callback must be a function.");return}if(typeof i!="number"){console.error("If specified, the hook priority must be a number.");return}const a={callback:l,priority:i,namespace:n};if(c[r]){const s=c[r].handlers;let f;for(f=s.length;f>0&&!(i>=s[f-1].priority);f--);f===s.length?s[f]=a:s.splice(f,0,a),c.__current.forEach(h=>{h.name===r&&h.currentIndex>=f&&h.currentIndex++})}else c[r]={handlers:[a],runs:0};r!=="hookAdded"&&e.doAction("hookAdded",r,n,l,i)}}var pe=Oe;function Le(e,t,o=!1){return function(n,l){const i=e[t];if(!re(n)||!o&&!ue(l))return;if(!i[n])return 0;let c=0;if(o)c=i[n].handlers.length,i[n]={runs:i[n].runs,handlers:[]};else{const a=i[n].handlers;for(let s=a.length-1;s>=0;s--)a[s].namespace===l&&(a.splice(s,1),c++,i.__current.forEach(f=>{f.name===n&&f.currentIndex>=s&&f.currentIndex--}))}return n!=="hookRemoved"&&e.doAction("hookRemoved",n,l),c}}var K=Le;function je(e,t){return function(r,n){const l=e[t];return typeof n<"u"?r in l&&l[r].handlers.some(i=>i.namespace===n):r in l}}var me=je;function De(e,t,o,r){return function(l,...i){const c=e[t];c[l]||(c[l]={handlers:[],runs:0}),c[l].runs++;const a=c[l].handlers;if(!a||!a.length)return o?i[0]:void 0;const s={name:l,currentIndex:0};async function f(){try{c.__current.add(s);let g=o?i[0]:void 0;for(;s.currentIndex<a.length;)g=await a[s.currentIndex].callback.apply(null,i),o&&(i[0]=g),s.currentIndex++;return o?g:void 0}finally{c.__current.delete(s)}}function h(){try{c.__current.add(s);let g=o?i[0]:void 0;for(;s.currentIndex<a.length;)g=a[s.currentIndex].callback.apply(null,i),o&&(i[0]=g),s.currentIndex++;return o?g:void 0}finally{c.__current.delete(s)}}return(r?f:h)()}}var Q=De;function $e(e,t){return function(){const r=e[t];return Array.from(r.__current).at(-1)?.name??null}}var _e=$e;function Me(e,t){return function(r){const n=e[t];return typeof r>"u"?n.__current.size>0:Array.from(n.__current).some(l=>l.name===r)}}var fe=Me;function Ve(e,t){return function(r){const n=e[t];if(re(r))return n[r]&&n[r].runs?n[r].runs:0}}var he=Ve,Ue=class{actions;filters;addAction;addFilter;removeAction;removeFilter;hasAction;hasFilter;removeAllActions;removeAllFilters;doAction;doActionAsync;applyFilters;applyFiltersAsync;currentAction;currentFilter;doingAction;doingFilter;didAction;didFilter;constructor(){this.actions=Object.create(null),this.actions.__current=new Set,this.filters=Object.create(null),this.filters.__current=new Set,this.addAction=pe(this,"actions"),this.addFilter=pe(this,"filters"),this.removeAction=K(this,"actions"),this.removeFilter=K(this,"filters"),this.hasAction=me(this,"actions"),this.hasFilter=me(this,"filters"),this.removeAllActions=K(this,"actions",!0),this.removeAllFilters=K(this,"filters",!0),this.doAction=Q(this,"actions",!1,!1),this.doActionAsync=Q(this,"actions",!1,!0),this.applyFilters=Q(this,"filters",!0,!1),this.applyFiltersAsync=Q(this,"filters",!0,!0),this.currentAction=_e(this,"actions"),this.currentFilter=_e(this,"filters"),this.doingAction=fe(this,"actions"),this.doingFilter=fe(this,"filters"),this.didAction=he(this,"actions"),this.didFilter=he(this,"filters")}};function Ge(){return new Ue}var We=Ge,ve=We(),{addAction:kt,addFilter:Nt,removeAction:Ft,removeFilter:Ht,hasAction:Tt,hasFilter:Pt,removeAllActions:zt,removeAllFilters:At,doAction:Ot,doActionAsync:Lt,applyFilters:jt,applyFiltersAsync:Dt,currentAction:$t,currentFilter:Mt,doingAction:Vt,doingFilter:Ut,didAction:Gt,didFilter:Wt,actions:qt,filters:wt}=ve,O=Pe(void 0,void 0,ve);O.getLocaleData.bind(O),O.setLocaleData.bind(O),O.resetLocaleData.bind(O),O.subscribe.bind(O);var _=O.__.bind(O);O._x.bind(O),O._n.bind(O),O._nx.bind(O),O.isRTL.bind(O),O.hasTranslation.bind(O);const ye={user:"las la-user",lock:"las la-lock",eye:"las la-eye",envelope:"las la-envelope",google:"lab la-google",chevronLeft:"las la-chevron-left",info:"las la-info-circle",happy:"las la-smile",phone:"las la-phone",link:"las la-link",calendar:"las la-calendar",upload:"las la-upload",copy:"las la-copy",cloud:"las la-cloud",device:"las la-laptop",shield:"las la-shield-alt",privacy:"las la-database",trash:"las la-trash",logout:"las la-sign-out-alt"};function L(e,t){if(e&&e.value){if(e.library==="icon"||!e.library||e.library==="")return React.createElement("i",{className:e.value});if(e.library==="svg"&&e.value)return e.value.startsWith("<svg")||e.value.startsWith("<?xml")?React.createElement("span",{className:"ts-icon-svg",dangerouslySetInnerHTML:{__html:e.value}}):React.createElement("img",{src:e.value,alt:"",className:"ts-icon-svg"})}return t&&ye[t]?React.createElement("i",{className:ye[t]}):null}function ne(){if(typeof window<"u"&&window.wpApiSettings?.root)return window.wpApiSettings.root.replace(/\/wp-json\/?$/,"")+"?vx=1";if(typeof document<"u"){const e=document.querySelector('link[rel="https://api.w.org/"]');if(e){const t=e.getAttribute("href");if(t)return t.replace(/\/wp-json\/?$/,"")+"?vx=1"}}return typeof window<"u"?window.location.origin+"?vx=1":"/?vx=1"}function ge(){if(typeof window<"u"&&window.wpApiSettings?.root)return window.wpApiSettings.root;if(typeof document<"u"){const e=document.querySelector('link[rel="https://api.w.org/"]');if(e){const t=e.getAttribute("href");if(t)return t}}if(typeof window<"u"&&window.location?.origin){const e=window.location.pathname.split("/").filter(Boolean),t=["wp-admin","wp-content","wp-includes","wp-json"];return e.length>0&&!t.includes(e[0])?window.location.origin+"/"+e[0]+"/wp-json/":window.location.origin+"/wp-json/"}return"/wp-json/"}function qe(){const e=window;return typeof window<"u"&&e.Voxel_Config?.ajax_url?e.Voxel_Config.ajax_url:ne().replace("?vx=1","")}async function we(e,t){if(!e)return null;const o=window.grecaptcha;return o?new Promise(r=>{o.ready(async()=>{try{const n=await o.execute(e,{action:t});r(n)}catch(n){console.error("reCAPTCHA error:",n),r(null)}})}):(console.warn("reCAPTCHA not loaded"),null)}function Je({config:e,quickRegister:t,onQuickRegisterChange:o,authLink:r,requireVerification:n,loginIcon:l,emailIcon:i,context:c}){const a=v.useRef(null),s=v.useRef(null),f=/^\S+@\S+\.\S+$/.test(t.email),h=v.useCallback(async()=>{if(c!=="editor"&&!(t.sending_code||!f)){o({sending_code:!0});try{const b=qe(),H=new FormData;if(H.append("email",t.email),H.append("_wpnonce",e.nonce.checkout),e.recaptcha.enabled&&e.recaptcha.key){const R=await we(e.recaptcha.key,"quick_register_send_code");R&&H.append("_recaptcha",R)}const C=await(await fetch(`${b}?vx=1&action=products.quick_register.send_confirmation_code`,{method:"POST",credentials:"same-origin",body:H})).json();if(C.success)o({sending_code:!1,sent_code:!0}),setTimeout(()=>{s.current?.focus()},100);else if(C.status==="email_exists"){const R=window;R.Voxel?.alert?R.Voxel.alert(C.message||_("This email is already registered. Please sign in.","voxel-fse")):alert(C.message||_("This email is already registered. Please sign in.","voxel-fse")),o({sending_code:!1})}else{const R=window;R.Voxel?.alert?R.Voxel.alert(C.message||_("Failed to send verification code.","voxel-fse")):alert(C.message||_("Failed to send verification code.","voxel-fse")),o({sending_code:!1})}}catch(b){console.error("Failed to send verification code:",b),o({sending_code:!1})}}},[e,t.email,t.sending_code,f,c,o]),g=b=>{const u={email:b.target.value};t.sent_code&&(u.sent_code=!1),o(u)},B=b=>{b.key==="Enter"&&(b.preventDefault(),a.current?.click())};return React.createElement(React.Fragment,null,React.createElement("a",{href:r,className:"ts-btn ts-btn-1 form-btn"},L(l),_("Existing customer? Sign in","voxel-fse")),React.createElement("div",{className:"checkout-section form-field-grid"},React.createElement("div",{className:"ts-form-group"},React.createElement("div",{className:"or-group"},React.createElement("div",{className:"or-line"}),React.createElement("span",{className:"or-text"},_("Or continue as Guest","voxel-fse")),React.createElement("div",{className:"or-line"}))),React.createElement("div",{className:"ts-form-group vx-1-1"},React.createElement("label",null,_("Email address","voxel-fse")),React.createElement("div",{className:"ts-input-icon flexify"},L(i),React.createElement("input",{type:"email",value:t.email,onChange:g,onKeyDown:B,placeholder:_("Your email address","voxel-fse"),readOnly:t.sending_code||t.registered,className:"ts-filter"}))),n&&React.createElement(React.Fragment,null,!t.sent_code&&f&&React.createElement("div",{className:"ts-form-group vx-1-1"},React.createElement("div",{className:t.sending_code?"vx-disabled":""},React.createElement("a",{href:"#",className:"ts-btn ts-btn-1 form-btn",ref:a,onClick:b=>{b.preventDefault(),c==="frontend"&&h()}},L(i),_("Send confirmation code","voxel-fse")))),t.sent_code&&React.createElement("div",{className:"ts-form-group vx-1-1"},React.createElement("label",null,_("Confirmation code","voxel-fse")),React.createElement("input",{ref:s,type:"text",maxLength:6,placeholder:_("Type your 6 digit code","voxel-fse"),value:t.code,onChange:b=>o({code:b.target.value}),readOnly:t.registered,className:"ts-filter"})))))}function Ze(e,t){if(!(!t||!e[t]))return e[t].states}function Xe({shipping:e,onShippingChange:t,countries:o,context:r}){const n=Ze(o,e.country),l=n&&Object.keys(n).length>0,i=c=>{const a=c.target.value||null;t({country:a,state:"",zone:null,rate:null})};return e.status!=="completed"?React.createElement("div",{className:"checkout-section form-field-grid"},React.createElement("div",{className:"ts-form-group"},React.createElement("div",{className:"or-group"},React.createElement("div",{className:"or-line"}),React.createElement("span",{className:"or-text"},_("Shipping details","voxel-fse")),React.createElement("div",{className:"or-line"}))),React.createElement("div",{className:"ts-form-group vx-1-1"},React.createElement("div",{className:"vx-loading-screen"},React.createElement("div",{className:"ts-no-posts"},React.createElement("span",{className:"ts-loader"}))))):React.createElement("div",{className:"checkout-section form-field-grid"},React.createElement("div",{className:"ts-form-group"},React.createElement("div",{className:"or-group"},React.createElement("div",{className:"or-line"}),React.createElement("span",{className:"or-text"},_("Shipping details","voxel-fse")),React.createElement("div",{className:"or-line"}))),React.createElement("div",{className:"ts-form-group vx-1-2"},React.createElement("label",null,_("First name","voxel-fse")),React.createElement("input",{type:"text",value:e.first_name,onChange:c=>t({first_name:c.target.value}),placeholder:_("First name","voxel-fse"),className:"ts-filter"})),React.createElement("div",{className:"ts-form-group vx-1-2"},React.createElement("label",null,_("Last name","voxel-fse")),React.createElement("input",{type:"text",value:e.last_name,onChange:c=>t({last_name:c.target.value}),placeholder:_("Last name","voxel-fse"),className:"ts-filter"})),React.createElement("div",{className:`ts-form-group ${l?"vx-1-2":"vx-1-1"}`},React.createElement("label",null,_("Country","voxel-fse")),React.createElement("div",{className:"ts-filter"},React.createElement("select",{value:e.country||"",onChange:i},React.createElement("option",{value:""},_("Select country","voxel-fse")),Object.entries(o).map(([c,a])=>React.createElement("option",{key:c,value:c},a.name))),React.createElement("div",{className:"ts-down-icon"}))),l&&React.createElement("div",{className:"ts-form-group vx-1-2"},React.createElement("label",null,_("State / County","voxel-fse")),React.createElement("div",{className:"ts-filter"},React.createElement("select",{value:e.state,onChange:c=>t({state:c.target.value})},React.createElement("option",{value:""},_("Select state","voxel-fse")),Object.entries(n).map(([c,a])=>React.createElement("option",{key:c,value:c},a.name||c))),React.createElement("div",{className:"ts-down-icon"}))),React.createElement("div",{className:"ts-form-group vx-1-2"},React.createElement("label",null,_("Address","voxel-fse")),React.createElement("input",{type:"text",value:e.address,onChange:c=>t({address:c.target.value}),placeholder:_("Street address","voxel-fse"),className:"ts-filter"})),React.createElement("div",{className:"ts-form-group vx-1-2"},React.createElement("label",null,_("ZIP / Postal code","voxel-fse")),React.createElement("input",{type:"text",value:e.zip,onChange:c=>t({zip:c.target.value}),placeholder:_("ZIP / Postal code","voxel-fse"),className:"ts-filter"})))}function be(e,t){try{return new Intl.NumberFormat(void 0,{style:"currency",currency:t||"USD"}).format(e/100)}catch{return`${(e/100).toFixed(2)} ${t}`}}function Ye(e,t){return e.type==="free_shipping"&&e.requirements==="minimum_order_amount"?t>=(e.minimum_order_amount||0):!0}function Ke(e,t){if(e.type==="free_shipping"||!e.amount_per_unit)return 0;switch(e.calculation_method||"per_order"){case"per_order":return e.amount_per_unit;case"per_item":{let r=0;return Object.values(t).forEach(n=>{if(n.shipping.is_shippable){const l=n.product_mode==="regular"?n.value.stock?.quantity||1:n.value.variations?.quantity||1;r+=l}}),e.amount_per_unit*r}case"per_class":{const r=e.shipping_classes||{};let n=e.amount_per_unit;return Object.values(t).forEach(l=>{if(l.shipping.is_shippable&&l.shipping.shipping_class){const i=r[l.shipping.shipping_class];if(i!==void 0){const c=l.product_mode==="regular"?l.value.stock?.quantity||1:l.value.variations?.quantity||1;n+=i*c}}}),n}default:return e.amount_per_unit}}function Qe(e,t,o){if(!t.countries[o.country||""])return!1;if(t.regions&&t.regions.length>0){for(const r of t.regions)if(r.country===o.country&&!(r.states&&r.states.length>0&&!r.states.includes(o.state))){if(r.zip_codes_enabled&&r.zip_codes){const n=r.zip_codes.split(`
`).map(l=>l.trim());if(!et(o.zip,n))continue}return!0}return!1}return!0}function et(e,t){const o=e.toLowerCase().replace(/\s/g,"");for(const r of t){if(!r)continue;const n=r.toLowerCase().replace(/\s/g,"");if(n.includes("...")){const[l,i]=n.split("...");if(o>=l&&o<=i)return!0}else if(n.includes("*")){if(new RegExp("^"+n.replace(/\*/g,".*")+"$").test(o))return!0}else if(o===n)return!0}return!1}function tt(e,t,o,r){const n=[];return Object.values(e).forEach(l=>{Object.values(l.rates).forEach(i=>{Qe(i,l,t)&&n.push({zone:l,rate:i})})}),r&&r.length>0&&n.sort((l,i)=>{const c=r.indexOf(l.rate.key),a=r.indexOf(i.rate.key);return c===-1&&a===-1?0:c===-1?1:a===-1?-1:c-a}),n}function ot({config:e,shipping:t,onShippingChange:o,items:r,shippingIcon:n,currency:l,l10n:i,context:c}){const a=v.useMemo(()=>{let B=0;return Object.values(r).forEach(b=>{B+=b.pricing.total_amount}),B},[r]),s=e.multivendor.enabled?e.shipping.responsibility:"platform_rates",f=v.useMemo(()=>s!=="platform_rates"?[]:tt(e.shipping.zones,t,r,e.shipping.shipping_rates_order||[]),[e.shipping.zones,t,r,e.shipping.shipping_rates_order,s]),h=f.length>0,g=(B,b)=>{c!=="editor"&&o({zone:B,rate:b})};return s!=="platform_rates"?null:React.createElement("div",{className:"checkout-section form-field-grid"},React.createElement("div",{className:"ts-form-group"},React.createElement("div",{className:"or-group"},React.createElement("div",{className:"or-line"}),React.createElement("span",{className:"or-text"},_("Shipping method","voxel-fse")),React.createElement("div",{className:"or-line"}))),React.createElement("div",{className:"ts-form-group vx-1-1"},h?React.createElement("ul",{className:"simplify-ul addon-cards flexify"},f.map(({zone:B,rate:b})=>{const H=t.zone===B.key&&t.rate===b.key,u=Ye(b,a),C=Ke(b,r);return React.createElement("li",{key:`${B.key}-${b.key}`,className:`flexify ${H?"adc-selected":""} ${u?"":"vx-disabled"}`,onClick:()=>{u&&g(B.key,b.key)}},React.createElement("div",{className:"card-icn"},L(n)),React.createElement("div",{className:"addon-details"},React.createElement("span",{className:"adc-title"},b.label),b.delivery_estimate&&u&&React.createElement("span",{className:"adc-subtitle"},b.delivery_estimate),!u&&b.type==="free_shipping"&&b.requirements==="minimum_order_amount"&&React.createElement("span",{className:"adc-subtitle"},_("Minimum order amount:","voxel-fse")," ",be(b.minimum_order_amount||0,l)),React.createElement("span",{className:"vx-addon-price"},C===0?i.free:be(C,l))))})):React.createElement("label",null,_("No shipping rates available for your location. Please select a different address.","voxel-fse"))))}function Ie(e,t){try{return new Intl.NumberFormat(void 0,{style:"currency",currency:t||"USD"}).format(e/100)}catch{return`${(e/100).toFixed(2)} ${t}`}}function rt(e){return e.product_mode==="regular"?e.value.stock?.quantity||1:e.value.variations?.quantity||1}function nt(e,t){const o=e.toLowerCase().replace(/\s/g,""),r=t.split(`
`).map(n=>n.trim());for(const n of r){if(!n)continue;const l=n.toLowerCase().replace(/\s/g,"");if(l.includes("...")){const[i,c]=l.split("...");if(o>=i&&o<=c)return!0}else if(l.includes("*")){if(new RegExp("^"+l.replace(/\*/g,".*")+"$").test(o))return!0}else if(o===l)return!0}return!1}function lt(e,t){if(!t.countries[e.country||""])return!1;if(t.regions&&Array.isArray(t.regions)&&t.regions.length>0){const o=t.regions.find(r=>r.country===e.country);if(!o||o.states&&Array.isArray(o.states)&&o.states.length>0&&(!e.state||!o.states.includes(e.state))||o.zip_codes_enabled&&o.zip_codes&&o.zip_codes.trim()&&(!e.zip||!nt(e.zip,o.zip_codes)))return!1}return!0}function ct(e,t){let o=0;return Object.values(t).forEach(r=>{r.vendor.id===e.id&&(o+=r.pricing.total_amount)}),o}function at(e,t,o){return t.type!=="free_shipping"?t.type==="fixed_rate"||t.type==="flat_rate":t.requirements!=="minimum_order_amount"?!0:ct(e,o)>=(t.minimum_order_amount||0)}function it(e,t,o){if(t.type==="free_shipping")return 0;if(t.type!=="fixed_rate"&&t.type!=="flat_rate")return null;const r=t.calculation_method||"per_item",n=Object.values(o).filter(i=>i.vendor.id===e.id&&i.shipping.is_shippable);if(r==="per_order")return t.amount_per_unit||0;if(r==="per_class"){let i=t.amount_per_unit||0;for(const c of n){let a=t.amount_per_unit||0;const s=c.shipping.shipping_class;s&&t.shipping_classes?.[s]&&(a=t.shipping_classes[s]),i=Math.max(i,a)}return i}let l=0;for(const i of n){let c=t.amount_per_unit||0;const a=i.shipping.shipping_class;a&&t.shipping_classes?.[a]&&(c=t.shipping_classes[a]);const s=rt(i);l+=c*s}return l}function Re(e,t){if(!e||!e.shipping_zones||!t.country)return[];const o=[];Object.values(e.shipping_zones).forEach(n=>{n.countries[t.country||""]&&Object.values(n.rates).forEach(l=>{lt(t,n)&&o.push({zone:n,rate:l})})});const r=e.shipping_rates_order;if(r&&Array.isArray(r)&&r.length>0){const n={};r.forEach((l,i)=>{n[l]=i}),o.sort((l,i)=>{const c=n[l.rate.key]!==void 0?n[l.rate.key]:1/0,a=n[i.rate.key]!==void 0?n[i.rate.key]:1/0;return c-a})}return o}function st(e,t){return!e.has_shippable_products||!e.shipping_zones||!t.country?!1:Re(e,t).length>0}function dt({config:e,shipping:t,onShippingChange:o,items:r,vendors:n,shippingIcon:l,currency:i,l10n:c,context:a}){const s=v.useMemo(()=>{const h={};return Object.values(n).forEach(g=>{g.has_shippable_products&&(h[g.key]=g)}),h},[n]),f=(h,g,B)=>{if(a==="editor")return;const b={...t.vendors};b[h]={zone:g,rate:B},o({vendors:b})};return t.country?React.createElement(React.Fragment,null,Object.values(s).map(h=>{const g=Re(h,t),B=st(h,t),b=t.vendors[h.key];return React.createElement("div",{key:h.key,className:"checkout-section form-field-grid"},React.createElement("div",{className:"ts-form-group"},React.createElement("div",{className:"or-group"},React.createElement("div",{className:"or-line"}),React.createElement("span",{className:"or-text"},_("Shipping method (Products sold by","voxel-fse")," ",h.display_name,")"),React.createElement("div",{className:"or-line"}))),React.createElement("div",{className:"ts-form-group vx-1-1"},B?React.createElement("ul",{className:"simplify-ul addon-cards flexify"},g.map(({zone:H,rate:u})=>{const C=b?.zone===H.key&&b?.rate===u.key,R=at(h,u,r),D=it(h,u,r);return React.createElement("li",{key:`${H.key}-${u.key}`,className:`flexify ${C?"adc-selected":""} ${R?"":"vx-disabled"}`,onClick:()=>{R&&f(h.key,H.key,u.key)}},React.createElement("div",{className:"card-icn"},L(l)),React.createElement("div",{className:"addon-details"},React.createElement("span",{className:"adc-title"},u.label),u.delivery_estimate&&R&&React.createElement("span",{className:"adc-subtitle"},u.delivery_estimate),!R&&u.type==="free_shipping"&&u.requirements==="minimum_order_amount"&&React.createElement("span",{className:"adc-subtitle"},_("Minimum order amount:","voxel-fse")," ",Ie(u.minimum_order_amount||0,i)),React.createElement("span",{className:"vx-addon-price"},D===0||D===null?c.free:Ie(D,i))))})):React.createElement("label",null,_("This vendor does not ship to your location. In order to proceed, remove products by this vendor from cart, or pick a different address.","voxel-fse"))))})):null}function ut(e=8){const t="abcdefghijklmnopqrstuvwxyz0123456789";let o="";for(let r=0;r<e;r++)o+=t.charAt(Math.floor(Math.random()*t.length));return o}function pt({field:e,value:t,onChange:o,uploadIcon:r,trashIcon:n,context:l}){const[i,c]=v.useState(!1),a=v.useRef(null),s=e.max_files||1,f=e.allowed_types||"",h=u=>u.type.startsWith("image/")?{backgroundImage:`url('${u.preview}')`}:{},g=v.useCallback(u=>{let C=[...t];s===1&&(C=[]);const R={source:"new_upload",name:u.name,type:u.type,size:u.size,preview:URL.createObjectURL(u),item:u,_id:ut(8)};if(typeof window<"u"){window._vx_file_upload_cache||(window._vx_file_upload_cache=[]);const D=window._vx_file_upload_cache.find(m=>m.item?.name===u.name&&m.item?.type===u.type&&m.item?.size===u.size&&m.item?.lastModified===u.lastModified);D?C.push(D):(C.push(R),window._vx_file_upload_cache.unshift(R))}else C.push(R);o(C)},[t,s,o]),B=v.useCallback(u=>{const C=u.target.files;if(C){for(let R=0;R<C.length;R++)g(C[R]);a.current&&(a.current.value="")}},[g]),b=v.useCallback(u=>{u.preventDefault(),c(!1),u.dataTransfer.items?Array.from(u.dataTransfer.items).forEach(C=>{if(C.kind==="file"){const R=C.getAsFile();R&&g(R)}}):Array.from(u.dataTransfer.files).forEach(C=>{g(C)})},[g]),H=u=>{if(l==="editor")return;const C=[...t],R=C.splice(u,1)[0];R.source==="new_upload"&&URL.revokeObjectURL(R.preview),o(C)};return v.useEffect(()=>()=>{setTimeout(()=>{t.forEach(u=>{u.source==="new_upload"&&URL.revokeObjectURL(u.preview)})},10)},[]),React.createElement("div",{className:"ts-form-group ts-file-upload inline-file-field vx-1-1",onDragEnter:()=>c(!0)},i&&React.createElement("div",{className:"drop-mask",onDragLeave:u=>{u.preventDefault(),c(!1)},onDrop:b,onDragEnter:u=>u.preventDefault(),onDragOver:u=>u.preventDefault()}),React.createElement("div",{className:"ts-file-list"},React.createElement("div",{className:"pick-file-input"},React.createElement("a",{href:"#",onClick:u=>{u.preventDefault(),l!=="editor"&&a.current?.click()}},L(r),_("Upload","voxel-fse"))),t.map((u,C)=>React.createElement("div",{key:u._id||u.id||C,className:`ts-file ${u.type.startsWith("image/")?"ts-file-img":""}`,style:h(u)},React.createElement("div",{className:"ts-file-info"},React.createElement("svg",{fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M12 16V4m0 0L8 8m4-4l4 4m-9 4v5a2 2 0 002 2h10a2 2 0 002-2v-5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"})),React.createElement("code",null,u.name)),React.createElement("a",{href:"#",onClick:R=>{R.preventDefault(),H(C)},className:"ts-remove-file flexify"},L(n))))),React.createElement("input",{ref:a,type:"file",className:"hidden",multiple:s>1,accept:f,onChange:B}))}const mt={deleteIcon:{library:"line-awesome",value:"las la-trash-alt"},noProductsIcon:{library:"line-awesome",value:"las la-box"},loginIcon:{library:"line-awesome",value:"las la-sign-in-alt"},emailIcon:{library:"line-awesome",value:"las la-envelope"},userIcon:{library:"line-awesome",value:"las la-user"},uploadIcon:{library:"line-awesome",value:"las la-cloud-upload-alt"},shippingIcon:{library:"line-awesome",value:"las la-shipping-fast"},minusIcon:{library:"line-awesome",value:"las la-minus"},plusIcon:{library:"line-awesome",value:"las la-plus"},checkoutIcon:{library:"line-awesome",value:"las la-arrow-right"},continueIcon:{library:"line-awesome",value:"las la-arrow-right"}};function N(e,t){return e&&typeof e=="object"&&"library"in e?e:mt[t]||{library:"line-awesome",value:"las la-question"}}function le(e,t){try{return new Intl.NumberFormat(void 0,{style:"currency",currency:t||"USD"}).format(e/100)}catch{return`${(e/100).toFixed(2)} ${t}`}}function Ce(e){return e.product_mode==="regular"?e.value.stock?.quantity||1:e.value.variations?.quantity||1}function _t(e){const t=Ce(e);return e.quantity.max===0||t<e.quantity.max}function Se({item:e,attributes:t,onUpdateQuantity:o,onRemoveItem:r,context:n}){const l=Ce(e),i=_t(e),c=()=>{l>1&&o?o(e.key,l-1):r&&r(e.key)},a=()=>{i&&o&&o(e.key,l+1)},s=()=>{r&&r(e.key)};return React.createElement("li",{className:`${e._disabled?"vx-disabled":""} ${e.custom_class||""}`},React.createElement("div",{className:"cart-image",dangerouslySetInnerHTML:{__html:e.logo}}),React.createElement("div",{className:"cart-item-details"},React.createElement("a",{href:e.link},e.title),e.subtitle&&React.createElement("span",null,e.subtitle),e.pricing.total_amount===0?React.createElement("span",null,_("Free","voxel-fse")):React.createElement("span",null,le(e.pricing.total_amount,e.currency))),e.quantity.enabled?React.createElement("div",{className:"cart-stepper"},React.createElement("a",{href:"#",className:"ts-icon-btn ts-smaller",onClick:f=>{f.preventDefault(),n==="frontend"&&c()}},L(N(t.minusIcon,"minusIcon"))),React.createElement("span",null,l),React.createElement("a",{href:"#",className:`ts-icon-btn ts-smaller ${i?"":"vx-disabled"}`,onClick:f=>{f.preventDefault(),n==="frontend"&&a()}},L(N(t.plusIcon,"plusIcon")))):React.createElement("div",{className:"cart-stepper"},React.createElement("a",{href:"#",className:"ts-icon-btn ts-smaller",onClick:f=>{f.preventDefault(),n==="frontend"&&s()}},L(N(t.deleteIcon,"deleteIcon")))))}function ft({enabled:e,content:t,onToggle:o,onChange:r,context:n}){const l=v.useRef(null),i=v.useRef(null),c=()=>{l.current&&i.current&&(i.current.value=l.current.value,l.current.style.height=`${i.current.scrollHeight}px`)};return v.useEffect(()=>{e&&(c(),l.current?.focus())},[e,t]),React.createElement(React.Fragment,null,React.createElement("div",{className:"tos-checkbox ts-form-group vx-1-1 switcher-label"},React.createElement("label",{onClick:a=>{a.preventDefault(),n==="frontend"&&o()}},React.createElement("div",{className:"ts-checkbox-container"},React.createElement("label",{className:"container-checkbox"},React.createElement("input",{type:"checkbox",tabIndex:0,className:"hidden",checked:e,readOnly:!0}),React.createElement("span",{className:"checkmark"}))),_("Add order notes?","voxel-fse"))),e&&React.createElement("div",{className:"ts-form-group vx-1-1"},React.createElement("textarea",{ref:l,value:t,onChange:a=>{r(a.target.value),c()},placeholder:_("Add notes about your order","voxel-fse"),className:"autofocus ts-filter"}),React.createElement("textarea",{ref:i,disabled:!0,style:{height:"5px",position:"fixed",top:"-9999px",left:"-9999px",visibility:"hidden"}})))}function ht({attributes:e,config:t,items:o,context:r,isLoading:n,error:l,onUpdateQuantity:i,onRemoveItem:c,onCheckout:a,shipping:s,onShippingChange:f,quickRegister:h,onQuickRegisterChange:g,orderNotes:B,onOrderNotesChange:b}){const H=v.useMemo(()=>({icons:{deleteIcon:N(e.deleteIcon,"deleteIcon"),noProductsIcon:N(e.noProductsIcon,"noProductsIcon"),loginIcon:N(e.loginIcon,"loginIcon"),emailIcon:N(e.emailIcon,"emailIcon"),userIcon:N(e.userIcon,"userIcon"),uploadIcon:N(e.uploadIcon,"uploadIcon"),shippingIcon:N(e.shippingIcon,"shippingIcon"),minusIcon:N(e.minusIcon,"minusIcon"),plusIcon:N(e.plusIcon,"plusIcon"),checkoutIcon:N(e.checkoutIcon,"checkoutIcon"),continueIcon:N(e.continueIcon,"continueIcon")},sectionSpacing:e.sectionSpacing||void 0,titleColor:e.titleColor||void 0}),[e]);v.useEffect(()=>{const d="voxel-product-summary-css";if(!document.getElementById(d)){const p=document.createElement("link");p.id=d,p.rel="stylesheet";const I=(window.Voxel_Config?.site_url||window.location.origin).replace(/\/$/,"");p.href=`${I}/wp-content/themes/voxel/assets/dist/product-summary.css?ver=1.7.5.2`,document.head.appendChild(p)}},[]);const u=v.useMemo(()=>{if(!o)return{};const d={};return Object.values(o).forEach(p=>{const E=p.vendor?.id,I=E?`vendor_${E}`:"platform";d[I]||(d[I]={id:E||null,display_name:p.vendor?.display_name||_("Platform","voxel-fse"),vendor_key:I,key:I,items:{},has_shippable_products:!1,shipping_zones:p.vendor?.shipping_zones||null,shipping_countries:p.vendor?.shipping_countries||null}),d[I].items[p.key]=p,p.shipping.is_shippable&&(d[I].has_shippable_products=!0)}),d},[o]),C=v.useMemo(()=>{if(!t?.multivendor.enabled)return!1;const d=Object.keys(u).length;return!(d<1||d===1&&u.platform)},[t,u]),R=()=>{if(!t?.multivendor.enabled||t.shipping.responsibility!=="vendor")return"platform_rates";const p=Object.keys(u).length;return p===1&&u.platform?"platform_rates":p>=1?"vendor_rates":null},D=v.useMemo(()=>{const d={...t?.shipping.countries};return R()==="vendor_rates"&&Object.values(u).forEach(p=>{p.shipping_countries&&Object.entries(p.shipping_countries).forEach(([E,I])=>{d[E]||(d[E]=I)})}),d},[t?.shipping.countries,u]),m=v.useMemo(()=>o?Object.values(o).some(d=>d.shipping.is_shippable):!1,[o]),y=v.useMemo(()=>{if(!o)return 0;let d=0;return Object.values(o).forEach(p=>{d+=p.pricing.total_amount}),d},[o]),x=v.useMemo(()=>{if(R()!=="vendor_rates")return!0;if(!s.country)return!1;const d=Object.values(u).filter(p=>p.has_shippable_products);for(const p of d){const E=s.vendors[p.key];if(!E?.zone||!E?.rate)return!1}return!0},[u,s]),z=v.useMemo(()=>{if(!s||!t)return null;if(R()==="platform_rates"){if(!s.zone||!s.rate)return null;const d=t.shipping.zones[s.zone];if(!d||!d.rates[s.rate])return null;const p=d.rates[s.rate];return p.type==="free_shipping"?0:p.amount_per_unit||0}else{if(!x)return null;let d=0;return Object.values(u).forEach(p=>{if(!p.has_shippable_products)return;const E=s.vendors[p.key];if(!E||!p.shipping_zones)return;const I=p.shipping_zones[E.zone];if(!I||!I.rates[E.rate])return;const k=I.rates[E.rate];k.type!=="free_shipping"&&(d+=k.amount_per_unit||0)}),d}},[s,t,u,x]),P=o&&Object.keys(o).length>0,$=t?.currency||"USD",M=t?.is_logged_in||!1,U=t?.guest_customers.behavior||"redirect_to_login",ce=!M&&U==="proceed_with_email",X=t?.guest_customers.proceed_with_email?.require_verification||!1,Y=t?.guest_customers.proceed_with_email?.require_tos||!1,ee=v.useMemo(()=>{if(!P||!M&&U==="proceed_with_email"&&(!h?.email||!/^\S+@\S+\.\S+$/.test(h.email)||X&&!h.registered&&(!h.sent_code||!h.code)||Y&&!h.terms_agreed))return!1;if(m&&s){if(!s.country)return!1;const d=R();if(d==="platform_rates"&&(!s.zone||!s.rate)||d==="vendor_rates"&&!x)return!1}return!0},[P,M,U,h,X,Y,m,s,t,x]),S=v.useMemo(()=>o?Object.values(o).every(d=>d.payment_method==="offline_payment"):!1,[o]);return n?React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(H)}}),React.createElement("div",{className:"vx-loading-screen ts-checkout-loading"},React.createElement("div",{className:"ts-no-posts"},React.createElement("span",{className:"ts-loader"})))):l?React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(H)}}),React.createElement("div",{className:"ts-no-posts"},React.createElement("p",null,l))):r==="editor"?React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(H)}}),React.createElement("div",{className:"ts-form ts-checkout ts-checkout-regular"},React.createElement("div",{className:"ts-cart-head"},React.createElement("h1",null,_("Order summary","voxel-fse"))),React.createElement("div",{className:"checkout-section form-field-grid"},React.createElement("div",{className:"ts-form-group"},React.createElement("div",{className:"or-group"},React.createElement("div",{className:"or-line"}),React.createElement("span",{className:"or-text"},_("Items","voxel-fse")),React.createElement("div",{className:"or-line"}))),React.createElement("div",{className:"ts-form-group"},React.createElement("ul",{className:"ts-cart-list simplify-ul"},React.createElement("li",null,React.createElement("div",{className:"cart-image",style:{width:"60px",height:"60px",backgroundColor:"#e0e0e0",borderRadius:"8px"}}),React.createElement("div",{className:"cart-item-details"},React.createElement("a",{href:"#"},_("Sample Product","voxel-fse")),React.createElement("span",null,_("Product description","voxel-fse")),React.createElement("span",null,"$99.00")),React.createElement("div",{className:"cart-stepper"},React.createElement("a",{href:"#",className:"ts-icon-btn ts-smaller"},L(N(e.minusIcon,"minusIcon"))),React.createElement("span",null,"1"),React.createElement("a",{href:"#",className:"ts-icon-btn ts-smaller"},L(N(e.plusIcon,"plusIcon")))))))),React.createElement("div",{className:"checkout-section"},React.createElement("ul",{className:"ts-cost-calculator simplify-ul flexify"},React.createElement("li",{className:"ts-total"},React.createElement("div",{className:"ts-item-name"},React.createElement("p",null,_("Subtotal","voxel-fse"))),React.createElement("div",{className:"ts-item-price"},React.createElement("p",null,"$99.00")))),React.createElement("a",{href:"#",className:"ts-btn ts-btn-2 form-btn"},_("Proceed to payment","voxel-fse"),L(N(e.checkoutIcon,"checkoutIcon")))))):P?React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(H)}}),React.createElement("div",{className:"ts-form ts-checkout ts-checkout-regular"},ce&&h&&g&&t&&React.createElement(Je,{config:t,quickRegister:h,onQuickRegisterChange:g,authLink:t.auth_link,requireVerification:X,loginIcon:N(e.loginIcon,"loginIcon"),emailIcon:N(e.emailIcon,"emailIcon"),context:r}),(M||U!=="proceed_with_email")&&React.createElement("div",{className:"ts-cart-head"},React.createElement("h1",null,_("Order summary","voxel-fse"))),React.createElement("div",{className:"checkout-section form-field-grid"},C?Object.values(u).map(d=>React.createElement("div",{key:d.key},React.createElement("div",{className:"ts-form-group"},React.createElement("div",{className:"or-group"},React.createElement("div",{className:"or-line"}),React.createElement("span",{className:"or-text"},_("Sold by","voxel-fse")," ",d.display_name),React.createElement("div",{className:"or-line"}))),React.createElement("div",{className:"ts-form-group"},React.createElement("ul",{className:"ts-cart-list simplify-ul"},Object.values(d.items).map(p=>React.createElement(Se,{key:p.key,item:p,attributes:e,onUpdateQuantity:i,onRemoveItem:c,context:r})))))):React.createElement(React.Fragment,null,React.createElement("div",{className:"ts-form-group"},React.createElement("div",{className:"or-group"},React.createElement("div",{className:"or-line"}),React.createElement("span",{className:"or-text"},_("Items","voxel-fse")),React.createElement("div",{className:"or-line"}))),React.createElement("div",{className:"ts-form-group"},React.createElement("ul",{className:"ts-cart-list simplify-ul"},Object.values(o).map(d=>React.createElement(Se,{key:d.key,item:d,attributes:e,onUpdateQuantity:i,onRemoveItem:c,context:r})))))),m&&s&&f&&t&&React.createElement(React.Fragment,null,React.createElement(Xe,{shipping:s,onShippingChange:f,countries:D,context:r}),s.status==="completed"&&s.country&&React.createElement(React.Fragment,null,R()==="platform_rates"&&React.createElement(ot,{config:t,shipping:s,onShippingChange:f,items:o,shippingIcon:N(e.shippingIcon,"shippingIcon"),currency:$,l10n:t.l10n,context:r}),R()==="vendor_rates"&&React.createElement(dt,{config:t,shipping:s,onShippingChange:f,items:o,vendors:u,shippingIcon:N(e.shippingIcon,"shippingIcon"),currency:$,l10n:t.l10n,context:r}))),(M||U==="proceed_with_email")&&React.createElement("div",{className:"checkout-section form-field-grid"},React.createElement("div",{className:"ts-form-group"},React.createElement("div",{className:"or-group"},React.createElement("div",{className:"or-line"}),React.createElement("span",{className:"or-text"},_("Details","voxel-fse")),React.createElement("div",{className:"or-line"}))),o&&Object.values(o).map(d=>d.components&&Object.entries(d.components).map(([p,E])=>{const I=E.data;return E.type==="file-upload"&&I?React.createElement(pt,{key:`${d.key}-${p}`,field:I.field||{key:p},value:I.value||[],onChange:()=>{},uploadIcon:N(e.uploadIcon,"uploadIcon"),trashIcon:N(e.deleteIcon,"deleteIcon"),context:r}):null})),B&&b&&React.createElement(ft,{enabled:B.enabled,content:B.content,onToggle:()=>b({enabled:!B.enabled}),onChange:d=>b({content:d}),context:r}),!M&&U==="proceed_with_email"&&Y&&h&&g&&React.createElement("div",{className:"tos-checkbox ts-form-group vx-1-1 switcher-label"},React.createElement("label",{onClick:d=>{d.preventDefault(),r==="frontend"&&g({terms_agreed:!h.terms_agreed})}},React.createElement("div",{className:"ts-checkbox-container"},React.createElement("label",{className:"container-checkbox"},React.createElement("input",{type:"checkbox",tabIndex:0,className:"hidden",checked:h.terms_agreed,readOnly:!0}),React.createElement("span",{className:"checkmark"}))),React.createElement("p",{className:"field-info"},_("I agree to the Terms and Conditions and Privacy Policy","voxel-fse"))))),React.createElement("div",{className:"checkout-section"},y!==0&&React.createElement("ul",{className:"ts-cost-calculator simplify-ul flexify"},z!==null&&React.createElement("li",null,React.createElement("div",{className:"ts-item-name"},React.createElement("p",null,_("Shipping","voxel-fse"))),React.createElement("div",{className:"ts-item-price"},React.createElement("p",null,le(z,$)))),React.createElement("li",{className:"ts-total"},React.createElement("div",{className:"ts-item-name"},React.createElement("p",null,_("Subtotal","voxel-fse"))),React.createElement("div",{className:"ts-item-price"},React.createElement("p",null,le(y+(z||0),$))))),M||U==="proceed_with_email"?React.createElement("a",{href:"#",className:`ts-btn ts-btn-2 form-btn ${ee?"":"vx-disabled"}`,onClick:d=>{d.preventDefault(),r==="frontend"&&ee&&a&&a()}},y===0||S?React.createElement(React.Fragment,null,_("Submit order","voxel-fse"),L(N(e.continueIcon,"continueIcon"))):React.createElement(React.Fragment,null,_("Proceed to payment","voxel-fse"),L(N(e.checkoutIcon,"checkoutIcon")))):React.createElement("a",{href:t?.auth_link||"#",className:"ts-btn ts-btn-2 form-btn"},L(N(e.userIcon,"userIcon")),_("Log in to continue","voxel-fse"))))):React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(H)}}),React.createElement("div",{className:"ts-form ts-checkout ts-checkout-regular"},React.createElement("div",{className:"vx-loading-screen"},React.createElement("div",{className:"ts-form-group ts-no-posts"},L(N(e.noProductsIcon,"noProductsIcon")),React.createElement("p",null,_("No products selected for checkout","voxel-fse"))))))}function vt(e,t){try{return new Intl.NumberFormat(void 0,{style:"currency",currency:t}).format(e)}catch{return`${t} ${e.toFixed(2)}`}}function yt(){const e=window;return typeof window<"u"&&e.Voxel_Config?.ajax_url?e.Voxel_Config.ajax_url:ne().replace("?vx=1","")}function gt({config:e,currency:t,checkoutIcon:o}){const r=Object.values(e.packages),[n,l]=v.useState(r.length>0?r[0]:null),[i,c]=v.useState(!1),a=v.useCallback(async()=>{if(!(!n||i)){c(!0);try{const s=yt(),f=new FormData;f.append("post_id",String(e.post_id)),f.append("promotion_package",n.key);const g=await(await fetch(`${s}?vx=1&action=products.promotions.checkout&_wpnonce=${e.nonce.checkout}`,{method:"POST",credentials:"same-origin",body:f})).json();if(g.success&&g.redirect_url)window.location.href=g.redirect_url;else{const B=window;B.Voxel?.alert?B.Voxel.alert(g.message||"Checkout failed","error"):alert(g.message||"Checkout failed"),c(!1)}}catch(s){console.error("Promote checkout error:",s),c(!1)}}},[n,i,e]);return React.createElement("div",{className:"ts-form ts-checkout ts-checkout-promotion"},React.createElement("div",{className:"cart-head"},React.createElement("h1",null,_("Promote","voxel-fse")," ",e.post_title)),React.createElement("div",{className:"checkout-section form-field-grid"},React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,_("Select promotion package","voxel-fse")),React.createElement("ul",{className:"simplify-ul addon-cards flexify"},r.map(s=>React.createElement("li",{key:s.key,className:`flexify${s===n?" adc-selected":""}`,style:{"--ts-accent-1":s.color},onClick:f=>{f.preventDefault(),l(s)}},s.icon?React.createElement("div",{className:"card-icn",dangerouslySetInnerHTML:{__html:s.icon}}):React.createElement("div",{className:"card-icn"},React.createElement("i",{className:"las la-bolt"})),React.createElement("div",{className:"addon-details"},React.createElement("span",{className:"adc-title"},s.label),React.createElement("span",{className:"adc-subtitle"},s.description),React.createElement("div",{className:"vx-addon-price"},vt(s.price_amount,t)))))))),React.createElement("div",{className:"checkout-section"},React.createElement("a",{href:"#",className:`ts-btn ts-btn-2 form-btn${i?" ts-loading-btn":""}`,onClick:s=>{s.preventDefault(),i||a()}},i&&React.createElement("div",{className:"ts-loader-wrapper"},React.createElement("span",{className:"ts-loader"})),L(o,"checkoutIcon"),_("Pay now","voxel-fse"))))}function bt(e){const t=(c,a)=>typeof c=="string"?c:typeof c=="number"?String(c):a,o=(c,a)=>{if(typeof c=="number")return c;if(typeof c=="string"){const s=parseFloat(c);if(!isNaN(s))return s}return c==null,a},r=(c,a)=>typeof c=="boolean"?c:c==="true"||c==="1"||c===1?!0:c==="false"||c==="0"||c===0?!1:a,n=(c,a)=>{if(c&&typeof c=="object"){const s=c;return{library:t(s.library,a.library),value:t(s.value,a.value)}}return a},l={library:"",value:""};return{icons:(c=>{if(!c||typeof c!="object")return{deleteIcon:l,noProductsIcon:l,loginIcon:l,emailIcon:l,userIcon:l,uploadIcon:l,shippingIcon:l,minusIcon:l,plusIcon:l,checkoutIcon:l,continueIcon:l};const a=c;return{deleteIcon:n(a.deleteIcon??a.delete_icon??a.ts_delete_icon,l),noProductsIcon:n(a.noProductsIcon??a.no_products_icon??a.nostock_ico,l),loginIcon:n(a.loginIcon??a.login_icon??a.ts_enter,l),emailIcon:n(a.emailIcon??a.email_icon??a.auth_email_ico,l),userIcon:n(a.userIcon??a.user_icon??a.auth_user_ico,l),uploadIcon:n(a.uploadIcon??a.upload_icon??a.ts_upload_ico,l),shippingIcon:n(a.shippingIcon??a.shipping_icon??a.ts_shipping_ico,l),minusIcon:n(a.minusIcon??a.minus_icon??a.ts_minus_icon,l),plusIcon:n(a.plusIcon??a.plus_icon??a.ts_plus_icon,l),checkoutIcon:n(a.checkoutIcon??a.checkout_icon??a.ts_checkout_icon,l),continueIcon:n(a.continueIcon??a.continue_icon??a.ts_continue_icon,l)}})(e.icons),sectionSpacing:o(e.sectionSpacing??e.section_spacing??e.field_spacing_value,null)??void 0,titleColor:t(e.titleColor??e.title_color??e.wt_color,"")||void 0,emptyCartGap:o(e.emptyCartGap??e.empty_cart_gap??e.ts_nopost_content_Gap,null)??void 0,emptyCartIconSize:o(e.emptyCartIconSize??e.empty_cart_icon_size??e.ts_nopost_ico_size,null)??void 0,emptyCartIconColor:t(e.emptyCartIconColor??e.empty_cart_icon_color??e.ts_nopost_ico_col,"")||void 0,emptyCartTextColor:t(e.emptyCartTextColor??e.empty_cart_text_color??e.ts_nopost_typo_col,"")||void 0,primaryBtnTextColor:t(e.primaryBtnTextColor??e.primary_btn_text_color??e.ts_sf_form_btn_c,"")||void 0,primaryBtnBgColor:t(e.primaryBtnBgColor??e.primary_btn_bg_color??e.ts_sf_form_btn_bg,"")||void 0,primaryBtnBorderColor:t(e.primaryBtnBorderColor??e.primary_btn_border_color,"")||void 0,primaryBtnRadius:o(e.primaryBtnRadius??e.primary_btn_radius??e.ts_sf_form_btn_radius,null)??void 0,primaryBtnIconSize:o(e.primaryBtnIconSize??e.primary_btn_icon_size??e.ts_sf_form_btn_icon_size,null)??void 0,primaryBtnIconColor:t(e.primaryBtnIconColor??e.primary_btn_icon_color??e.ts_sf_form_btn_icon_color,"")||void 0,primaryBtnIconSpacing:o(e.primaryBtnIconSpacing??e.primary_btn_icon_spacing??e.ts_sf_form_btn_icon_spacing,null)??void 0,primaryBtnTextColorHover:t(e.primaryBtnTextColorHover??e.primary_btn_text_color_hover??e.ts_sf_form_btn_c_h,"")||void 0,primaryBtnBgColorHover:t(e.primaryBtnBgColorHover??e.primary_btn_bg_color_hover??e.ts_sf_form_btn_bg_h,"")||void 0,primaryBtnBorderColorHover:t(e.primaryBtnBorderColorHover??e.primary_btn_border_color_hover??e.ts_sf_form_btn_border_h,"")||void 0,primaryBtnIconColorHover:t(e.primaryBtnIconColorHover??e.primary_btn_icon_color_hover??e.ts_sf_form_btn_icon_color_h,"")||void 0,secondaryBtnTextColor:t(e.secondaryBtnTextColor??e.secondary_btn_text_color??e.scnd_btn_c,"")||void 0,secondaryBtnBgColor:t(e.secondaryBtnBgColor??e.secondary_btn_bg_color??e.scnd_btn_bg,"")||void 0,secondaryBtnBorderColor:t(e.secondaryBtnBorderColor??e.secondary_btn_border_color,"")||void 0,secondaryBtnRadius:o(e.secondaryBtnRadius??e.secondary_btn_radius??e.scnd_btn_radius,null)??void 0,secondaryBtnIconSize:o(e.secondaryBtnIconSize??e.secondary_btn_icon_size??e.scnd_btn_icon_size,null)??void 0,secondaryBtnIconColor:t(e.secondaryBtnIconColor??e.secondary_btn_icon_color??e.scnd_btn_icon_color,"")||void 0,secondaryBtnIconSpacing:o(e.secondaryBtnIconSpacing??e.secondary_btn_icon_spacing??e.scnd_btn_icon_pad,null)??void 0,secondaryBtnTextColorHover:t(e.secondaryBtnTextColorHover??e.secondary_btn_text_color_hover??e.scnd_btn_c_h,"")||void 0,secondaryBtnBgColorHover:t(e.secondaryBtnBgColorHover??e.secondary_btn_bg_color_hover??e.scnd_btn_bg_h,"")||void 0,secondaryBtnBorderColorHover:t(e.secondaryBtnBorderColorHover??e.secondary_btn_border_color_hover??e.scnd_btn_border_h,"")||void 0,secondaryBtnIconColorHover:t(e.secondaryBtnIconColorHover??e.secondary_btn_icon_color_hover??e.scnd_btn_icon_color_h,"")||void 0,loaderColor1:t(e.loaderColor1??e.loader_color1??e.tm_color1,"")||void 0,loaderColor2:t(e.loaderColor2??e.loader_color2??e.tm_color2,"")||void 0,checkboxBorderColor:t(e.checkboxBorderColor??e.checkbox_border_color,"")||void 0,checkboxSelectedBgColor:t(e.checkboxSelectedBgColor??e.checkbox_selected_bg_color??e.ts_checkbox_checked,"")||void 0,cartItemSpacing:o(e.cartItemSpacing??e.cart_item_spacing??e.cart_spacing,null)??void 0,cartItemContentSpacing:o(e.cartItemContentSpacing??e.cart_item_content_spacing??e.cart_item_spacing,null)??void 0,cartPictureSize:o(e.cartPictureSize??e.cart_picture_size??e.ts_cart_img_size,null)??void 0,cartPictureRadius:o(e.cartPictureRadius??e.cart_picture_radius??e.ts_cart_img_radius,null)??void 0,cartTitleColor:t(e.cartTitleColor??e.cart_title_color??e.ts_cart_title_col,"")||void 0,cartSubtitleColor:t(e.cartSubtitleColor??e.cart_subtitle_color??e.ts_cart_sub_col,"")||void 0,iconBtnColor:t(e.iconBtnColor??e.icon_btn_color??e.ts_cart_btn_color,"")||void 0,iconBtnBgColor:t(e.iconBtnBgColor??e.icon_btn_bg_color??e.ts_cart_btn_bg,"")||void 0,iconBtnBorderColor:t(e.iconBtnBorderColor??e.icon_btn_border_color,"")||void 0,iconBtnRadius:o(e.iconBtnRadius??e.icon_btn_radius??e.ts_cart_btn_radius,null)??void 0,iconBtnValueSize:o(e.iconBtnValueSize??e.icon_btn_value_size??e.ts_cart_btn_val_size,null)??void 0,iconBtnValueColor:t(e.iconBtnValueColor??e.icon_btn_value_color??e.ts_cart_btn_val_col,"")||void 0,iconBtnColorHover:t(e.iconBtnColorHover??e.icon_btn_color_hover??e.ts_cart_btn_color_h,"")||void 0,iconBtnBgColorHover:t(e.iconBtnBgColorHover??e.icon_btn_bg_color_hover??e.ts_cart_btn_bg_h,"")||void 0,iconBtnBorderColorHover:t(e.iconBtnBorderColorHover??e.icon_btn_border_color_hover??e.ts_cart_btn_border_h,"")||void 0,dropdownBgColor:t(e.dropdownBgColor??e.dropdown_bg_color??e.pg_trs_bg,"")||void 0,dropdownTextColor:t(e.dropdownTextColor??e.dropdown_text_color??e.pg_trs_text,"")||void 0,dropdownBorderColor:t(e.dropdownBorderColor??e.dropdown_border_color,"")||void 0,dropdownRadius:o(e.dropdownRadius??e.dropdown_radius??e.pg_trs_radius,null)??void 0,dropdownHeight:o(e.dropdownHeight??e.dropdown_height??e.pg_trs_height,null)??void 0,dropdownIconColor:t(e.dropdownIconColor??e.dropdown_icon_color??e.pg_trs_ico,"")||void 0,dropdownIconSize:o(e.dropdownIconSize??e.dropdown_icon_size??e.pg_trs_ico_size,null)??void 0,dropdownIconSpacing:o(e.dropdownIconSpacing??e.dropdown_icon_spacing??e.pg_trs_ico_spacing,null)??void 0,dropdownHideChevron:r(e.dropdownHideChevron??e.dropdown_hide_chevron??e.pg_trs_chevron_hide,!1),dropdownChevronColor:t(e.dropdownChevronColor??e.dropdown_chevron_color??e.pg_trs_chevron_col,"")||void 0,dropdownBgColorHover:t(e.dropdownBgColorHover??e.dropdown_bg_color_hover??e.pg_trs_bg_h,"")||void 0,dropdownTextColorHover:t(e.dropdownTextColorHover??e.dropdown_text_color_hover??e.pg_trs_text_h,"")||void 0,dropdownBorderColorHover:t(e.dropdownBorderColorHover??e.dropdown_border_color_hover??e.pg_trs_border_h,"")||void 0,dropdownIconColorHover:t(e.dropdownIconColorHover??e.dropdown_icon_color_hover??e.pg_trs_ico_h,"")||void 0,dropdownBgColorFilled:t(e.dropdownBgColorFilled??e.dropdown_bg_color_filled??e.pg_trs_bg_f,"")||void 0,dropdownTextColorFilled:t(e.dropdownTextColorFilled??e.dropdown_text_color_filled??e.pg_trs_text_f,"")||void 0,dropdownIconColorFilled:t(e.dropdownIconColorFilled??e.dropdown_icon_color_filled??e.pg_trs_ico_f,"")||void 0,dropdownBorderColorFilled:t(e.dropdownBorderColorFilled??e.dropdown_border_color_filled??e.pg_trs_border_f,"")||void 0,shipToTextColor:t(e.shipToTextColor??e.ship_to_text_color??e.shipto_color,"")||void 0,shipToLinkColor:t(e.shipToLinkColor??e.ship_to_link_color??e.shipto_link_color,"")||void 0,dividerTextColor:t(e.dividerTextColor??e.divider_text_color??e.sd_color,"")||void 0,dividerLineColor:t(e.dividerLineColor??e.divider_line_color??e.sd_div_color,"")||void 0,dividerLineHeight:o(e.dividerLineHeight??e.divider_line_height??e.sd_div_height,null)??void 0,subtotalTextColor:t(e.subtotalTextColor??e.subtotal_text_color??e.calc_text_color_total,"")||void 0,fieldLabelColor:t(e.fieldLabelColor??e.field_label_color??e.auth_label_col,"")||void 0,fieldLabelLinkColor:t(e.fieldLabelLinkColor??e.field_label_link_color??e.auth_label_link,"")||void 0,inputPlaceholderColor:t(e.inputPlaceholderColor??e.input_placeholder_color??e.auth_placeholder_color,"")||void 0,inputValueColor:t(e.inputValueColor??e.input_value_color??e.auth_input_color,"")||void 0,inputBgColor:t(e.inputBgColor??e.input_bg_color??e.auth_input_bg,"")||void 0,inputBorderColor:t(e.inputBorderColor??e.input_border_color,"")||void 0,inputHeight:o(e.inputHeight??e.input_height??e.auth_input_height,null)??void 0,inputRadius:o(e.inputRadius??e.input_radius??e.auth_input_radius,null)??void 0,inputIconColor:t(e.inputIconColor??e.input_icon_color??e.auth_icon_color,"")||void 0,inputIconSize:o(e.inputIconSize??e.input_icon_size??e.auth_icon_size,null)??void 0,inputIconMargin:o(e.inputIconMargin??e.input_icon_margin??e.auth_icon_margin,null)??void 0,textareaRadius:o(e.textareaRadius??e.textarea_radius??e.auth_textarea_radius,null)??void 0,inputBgColorHover:t(e.inputBgColorHover??e.input_bg_color_hover??e.auth_input_bg_h,"")||void 0,inputBorderColorHover:t(e.inputBorderColorHover??e.input_border_color_hover??e.auth_input_border_h,"")||void 0,inputPlaceholderColorHover:t(e.inputPlaceholderColorHover??e.input_placeholder_color_hover??e.auth_placeholder_color_h,"")||void 0,inputValueColorHover:t(e.inputValueColorHover??e.input_value_color_hover??e.auth_input_color_h,"")||void 0,inputIconColorHover:t(e.inputIconColorHover??e.input_icon_color_hover??e.auth_icon_color_h,"")||void 0,inputBgColorActive:t(e.inputBgColorActive??e.input_bg_color_active??e.auth_input_bg_a,"")||void 0,inputBorderColorActive:t(e.inputBorderColorActive??e.input_border_color_active??e.auth_input_border_a,"")||void 0,inputPlaceholderColorActive:t(e.inputPlaceholderColorActive??e.input_placeholder_color_active??e.auth_placeholder_color_a,"")||void 0,inputValueColorActive:t(e.inputValueColorActive??e.input_value_color_active??e.auth_input_color_a,"")||void 0,cardsGap:o(e.cardsGap??e.cards_gap??e.ts_method_cards_gap,null)??void 0,cardsBgColor:t(e.cardsBgColor??e.cards_bg_color??e.ts_method_cards_bg,"")||void 0,cardsBorderColor:t(e.cardsBorderColor??e.cards_border_color,"")||void 0,cardsRadius:o(e.cardsRadius??e.cards_radius??e.ts_method_cards_radius,null)??void 0,cardsPrimaryColor:t(e.cardsPrimaryColor??e.cards_primary_color??e.ts_method_cards_col,"")||void 0,cardsSecondaryColor:t(e.cardsSecondaryColor??e.cards_secondary_color??e.ts_method_cards_scnd_col,"")||void 0,cardsPriceColor:t(e.cardsPriceColor??e.cards_price_color??e.ts_method_cards_price_col,"")||void 0,cardsImageRadius:o(e.cardsImageRadius??e.cards_image_radius??e.ts_method_cards_img_radius,null)??void 0,cardsImageSize:o(e.cardsImageSize??e.cards_image_size??e.ts_method_cards_img_size,null)??void 0,cardsSelectedBgColor:t(e.cardsSelectedBgColor??e.cards_selected_bg_color??e.ts_method_cards_bg_a,"")||void 0,cardsSelectedBorderColor:t(e.cardsSelectedBorderColor??e.cards_selected_border_color??e.ts_method_cards_border_a,"")||void 0,fileFieldGap:o(e.fileFieldGap??e.file_field_gap,null)??void 0,fileSelectIconColor:t(e.fileSelectIconColor??e.file_select_icon_color,"")||void 0,fileSelectIconSize:o(e.fileSelectIconSize??e.file_select_icon_size,null)??void 0,fileSelectBgColor:t(e.fileSelectBgColor??e.file_select_bg_color??e.file_select_bg,"")||void 0,fileSelectBorderColor:t(e.fileSelectBorderColor??e.file_select_border_color,"")||void 0,fileSelectRadius:o(e.fileSelectRadius??e.file_select_radius,null)??void 0,fileSelectTextColor:t(e.fileSelectTextColor??e.file_select_text_color,"")||void 0,addedFileRadius:o(e.addedFileRadius??e.added_file_radius,null)??void 0,addedFileBgColor:t(e.addedFileBgColor??e.added_file_bg_color??e.added_file_bg,"")||void 0,addedFileIconColor:t(e.addedFileIconColor??e.added_file_icon_color,"")||void 0,addedFileIconSize:o(e.addedFileIconSize??e.added_file_icon_size,null)??void 0,addedFileTextColor:t(e.addedFileTextColor??e.added_file_text_color,"")||void 0,removeFileBgColor:t(e.removeFileBgColor??e.remove_file_bg_color??e.remove_file_bg,"")||void 0,removeFileBgColorHover:t(e.removeFileBgColorHover??e.remove_file_bg_color_hover??e.remove_file_bg_h,"")||void 0,removeFileColor:t(e.removeFileColor??e.remove_file_color,"")||void 0,removeFileColorHover:t(e.removeFileColorHover??e.remove_file_color_hover??e.remove_file_color_h,"")||void 0,removeFileRadius:o(e.removeFileRadius??e.remove_file_radius,null)??void 0,removeFileSize:o(e.removeFileSize??e.remove_file_size,null)??void 0,removeFileIconSize:o(e.removeFileIconSize??e.remove_file_icon_size,null)??void 0,fileSelectIconColorHover:t(e.fileSelectIconColorHover??e.file_select_icon_color_hover??e.file_select_icon_color_h,"")||void 0,fileSelectBgColorHover:t(e.fileSelectBgColorHover??e.file_select_bg_color_hover??e.file_select_bg_h,"")||void 0,fileSelectBorderColorHover:t(e.fileSelectBorderColorHover??e.file_select_border_color_hover??e.file_select_border_h,"")||void 0,fileSelectTextColorHover:t(e.fileSelectTextColorHover??e.file_select_text_color_hover??e.file_select_text_color_h,"")||void 0}}function It(){return ge()}function q(){const e=window;return typeof window<"u"&&e.Voxel_Config?.ajax_url?e.Voxel_Config.ajax_url:ne().replace("?vx=1","")}function Rt(e){const t=e.querySelector("script.vxconfig");if(t&&t.textContent)try{const o=JSON.parse(t.textContent);return bt(o)}catch(o){console.error("Failed to parse vxconfig:",o)}return null}const V={deleteIcon:{library:"icon",value:"las la-trash-alt"},noProductsIcon:{library:"icon",value:"las la-box"},loginIcon:{library:"icon",value:"las la-sign-in-alt"},emailIcon:{library:"icon",value:"las la-envelope"},userIcon:{library:"icon",value:"las la-user"},uploadIcon:{library:"icon",value:"las la-cloud-upload-alt"},shippingIcon:{library:"icon",value:"las la-shipping-fast"},minusIcon:{library:"icon",value:"las la-minus"},plusIcon:{library:"icon",value:"las la-plus"},checkoutIcon:{library:"icon",value:"las la-arrow-right"},continueIcon:{library:"icon",value:"las la-arrow-right"}};function Ct(e){return{blockId:"",deleteIcon:e.icons?.deleteIcon||V.deleteIcon,noProductsIcon:e.icons?.noProductsIcon||V.noProductsIcon,loginIcon:e.icons?.loginIcon||V.loginIcon,emailIcon:e.icons?.emailIcon||V.emailIcon,userIcon:e.icons?.userIcon||V.userIcon,uploadIcon:e.icons?.uploadIcon||V.uploadIcon,shippingIcon:e.icons?.shippingIcon||V.shippingIcon,minusIcon:e.icons?.minusIcon||V.minusIcon,plusIcon:e.icons?.plusIcon||V.plusIcon,checkoutIcon:e.icons?.checkoutIcon||V.checkoutIcon,continueIcon:e.icons?.continueIcon||V.continueIcon,sectionSpacing:e.sectionSpacing||40,sectionSpacing_tablet:null,sectionSpacing_mobile:null,titleTypography:{},titleColor:e.titleColor||"",emptyCartGap:e.emptyCartGap??null,emptyCartGap_tablet:null,emptyCartGap_mobile:null,emptyCartIconSize:e.emptyCartIconSize??null,emptyCartIconSize_tablet:null,emptyCartIconSize_mobile:null,emptyCartIconColor:e.emptyCartIconColor||"",emptyCartTypography:{},emptyCartTextColor:e.emptyCartTextColor||"",primaryBtnTypography:{},primaryBtnBorderType:"",primaryBtnBorderWidth:{},primaryBtnBorderColor:e.primaryBtnBorderColor||"",primaryBtnRadius:e.primaryBtnRadius??null,primaryBtnRadius_tablet:null,primaryBtnRadius_mobile:null,primaryBtnBoxShadow:{},primaryBtnTextColor:e.primaryBtnTextColor||"",primaryBtnBgColor:e.primaryBtnBgColor||"",primaryBtnIconSize:e.primaryBtnIconSize??null,primaryBtnIconSize_tablet:null,primaryBtnIconSize_mobile:null,primaryBtnIconColor:e.primaryBtnIconColor||"",primaryBtnIconSpacing:e.primaryBtnIconSpacing??null,primaryBtnIconSpacing_tablet:null,primaryBtnIconSpacing_mobile:null,primaryBtnTextColorHover:e.primaryBtnTextColorHover||"",primaryBtnBgColorHover:e.primaryBtnBgColorHover||"",primaryBtnBorderColorHover:e.primaryBtnBorderColorHover||"",primaryBtnBoxShadowHover:{},primaryBtnIconColorHover:e.primaryBtnIconColorHover||"",secondaryBtnTypography:{},secondaryBtnRadius:e.secondaryBtnRadius??null,secondaryBtnRadius_tablet:null,secondaryBtnRadius_mobile:null,secondaryBtnTextColor:e.secondaryBtnTextColor||"",secondaryBtnPadding:{},secondaryBtnPadding_tablet:{},secondaryBtnPadding_mobile:{},secondaryBtnBgColor:e.secondaryBtnBgColor||"",secondaryBtnBorderType:"",secondaryBtnBorderWidth:{},secondaryBtnBorderColor:e.secondaryBtnBorderColor||"",secondaryBtnIconSize:e.secondaryBtnIconSize??null,secondaryBtnIconSize_tablet:null,secondaryBtnIconSize_mobile:null,secondaryBtnIconSpacing:e.secondaryBtnIconSpacing??null,secondaryBtnIconSpacing_tablet:null,secondaryBtnIconSpacing_mobile:null,secondaryBtnIconColor:e.secondaryBtnIconColor||"",secondaryBtnTextColorHover:e.secondaryBtnTextColorHover||"",secondaryBtnBgColorHover:e.secondaryBtnBgColorHover||"",secondaryBtnBorderColorHover:e.secondaryBtnBorderColorHover||"",secondaryBtnIconColorHover:e.secondaryBtnIconColorHover||"",loaderColor1:e.loaderColor1||"",loaderColor2:e.loaderColor2||"",checkboxBorderColor:e.checkboxBorderColor||"",checkboxSelectedBgColor:e.checkboxSelectedBgColor||"",checkboxSelectedBoxShadow:{},cartItemSpacing:e.cartItemSpacing??null,cartItemSpacing_tablet:null,cartItemSpacing_mobile:null,cartItemContentSpacing:e.cartItemContentSpacing??null,cartItemContentSpacing_tablet:null,cartItemContentSpacing_mobile:null,cartPictureSize:e.cartPictureSize??null,cartPictureSize_tablet:null,cartPictureSize_mobile:null,cartPictureRadius:e.cartPictureRadius??null,cartPictureRadius_tablet:null,cartPictureRadius_mobile:null,cartTitleTypography:{},cartTitleColor:e.cartTitleColor||"",cartSubtitleTypography:{},cartSubtitleColor:e.cartSubtitleColor||"",iconBtnColor:e.iconBtnColor||"",iconBtnBgColor:e.iconBtnBgColor||"",iconBtnBorderType:"",iconBtnBorderWidth:{},iconBtnBorderColor:e.iconBtnBorderColor||"",iconBtnRadius:e.iconBtnRadius??null,iconBtnRadius_tablet:null,iconBtnRadius_mobile:null,iconBtnValueSize:e.iconBtnValueSize??null,iconBtnValueColor:e.iconBtnValueColor||"",iconBtnColorHover:e.iconBtnColorHover||"",iconBtnBgColorHover:e.iconBtnBgColorHover||"",iconBtnBorderColorHover:e.iconBtnBorderColorHover||"",dropdownTypography:{},dropdownBoxShadow:{},dropdownBgColor:e.dropdownBgColor||"",dropdownTextColor:e.dropdownTextColor||"",dropdownBorderType:"",dropdownBorderWidth:{},dropdownBorderColor:e.dropdownBorderColor||"",dropdownRadius:e.dropdownRadius??null,dropdownRadius_tablet:null,dropdownRadius_mobile:null,dropdownHeight:e.dropdownHeight??null,dropdownHeight_tablet:null,dropdownHeight_mobile:null,dropdownIconColor:e.dropdownIconColor||"",dropdownIconSize:e.dropdownIconSize??24,dropdownIconSize_tablet:null,dropdownIconSize_mobile:null,dropdownIconSpacing:e.dropdownIconSpacing??10,dropdownIconSpacing_tablet:null,dropdownIconSpacing_mobile:null,dropdownHideChevron:e.dropdownHideChevron||!1,dropdownChevronColor:e.dropdownChevronColor||"",dropdownBgColorHover:e.dropdownBgColorHover||"",dropdownTextColorHover:e.dropdownTextColorHover||"",dropdownBorderColorHover:e.dropdownBorderColorHover||"",dropdownIconColorHover:e.dropdownIconColorHover||"",dropdownBoxShadowHover:{},dropdownTypographyFilled:{},dropdownBgColorFilled:e.dropdownBgColorFilled||"",dropdownTextColorFilled:e.dropdownTextColorFilled||"",dropdownIconColorFilled:e.dropdownIconColorFilled||"",dropdownBorderColorFilled:e.dropdownBorderColorFilled||"",dropdownBorderWidthFilled:null,dropdownBoxShadowFilled:{},shipToTypography:{},shipToTextColor:e.shipToTextColor||"",shipToLinkColor:e.shipToLinkColor||"",dividerTypography:{},dividerTextColor:e.dividerTextColor||"",dividerLineColor:e.dividerLineColor||"",dividerLineHeight:e.dividerLineHeight??null,subtotalTypography:{},subtotalTextColor:e.subtotalTextColor||"",fieldLabelTypography:{},fieldLabelColor:e.fieldLabelColor||"",fieldLabelLinkColor:e.fieldLabelLinkColor||"",inputPlaceholderColor:e.inputPlaceholderColor||"",inputPlaceholderTypography:{},inputValueColor:e.inputValueColor||"",inputValueTypography:{},inputBgColor:e.inputBgColor||"",inputBorderType:"",inputBorderWidth:{},inputBorderColor:e.inputBorderColor||"",inputPadding:{},inputPadding_tablet:{},inputPadding_mobile:{},inputHeight:e.inputHeight??null,inputHeight_tablet:null,inputHeight_mobile:null,inputRadius:e.inputRadius??null,inputRadius_tablet:null,inputRadius_mobile:null,inputWithIconPadding:{},inputWithIconPadding_tablet:{},inputWithIconPadding_mobile:{},inputIconColor:e.inputIconColor||"",inputIconSize:e.inputIconSize??null,inputIconSize_tablet:null,inputIconSize_mobile:null,inputIconMargin:e.inputIconMargin??null,inputIconMargin_tablet:null,inputIconMargin_mobile:null,textareaPadding:{},textareaPadding_tablet:{},textareaPadding_mobile:{},textareaRadius:e.textareaRadius??null,textareaRadius_tablet:null,textareaRadius_mobile:null,inputBgColorHover:e.inputBgColorHover||"",inputBorderColorHover:e.inputBorderColorHover||"",inputPlaceholderColorHover:e.inputPlaceholderColorHover||"",inputValueColorHover:e.inputValueColorHover||"",inputIconColorHover:e.inputIconColorHover||"",inputBgColorActive:e.inputBgColorActive||"",inputBorderColorActive:e.inputBorderColorActive||"",inputPlaceholderColorActive:e.inputPlaceholderColorActive||"",inputValueColorActive:e.inputValueColorActive||"",cardsGap:e.cardsGap??null,cardsGap_tablet:null,cardsGap_mobile:null,cardsBgColor:e.cardsBgColor||"",cardsBorderType:"",cardsBorderWidth:{},cardsBorderColor:e.cardsBorderColor||"",cardsRadius:e.cardsRadius??null,cardsRadius_tablet:null,cardsRadius_mobile:null,cardsPrimaryTypography:{},cardsPrimaryColor:e.cardsPrimaryColor||"",cardsSecondaryTypography:{},cardsSecondaryColor:e.cardsSecondaryColor||"",cardsPriceTypography:{},cardsPriceColor:e.cardsPriceColor||"",cardsImageRadius:e.cardsImageRadius??null,cardsImageRadius_tablet:null,cardsImageRadius_mobile:null,cardsImageSize:e.cardsImageSize??null,cardsImageSize_tablet:null,cardsImageSize_mobile:null,cardsSelectedBgColor:e.cardsSelectedBgColor||"",cardsSelectedBorderColor:e.cardsSelectedBorderColor||"",cardsSelectedBoxShadow:{},cardsSelectedPrimaryTypography:{},fileFieldGap:e.fileFieldGap??null,fileFieldGap_tablet:null,fileFieldGap_mobile:null,fileSelectIconColor:e.fileSelectIconColor||"",fileSelectIconSize:e.fileSelectIconSize??null,fileSelectIconSize_tablet:null,fileSelectIconSize_mobile:null,fileSelectBgColor:e.fileSelectBgColor||"",fileSelectBorderType:"",fileSelectBorderWidth:{},fileSelectBorderColor:e.fileSelectBorderColor||"",fileSelectRadius:e.fileSelectRadius??null,fileSelectRadius_tablet:null,fileSelectRadius_mobile:null,fileSelectTypography:{},fileSelectTextColor:e.fileSelectTextColor||"",addedFileRadius:e.addedFileRadius??null,addedFileRadius_tablet:null,addedFileRadius_mobile:null,addedFileBgColor:e.addedFileBgColor||"",addedFileIconColor:e.addedFileIconColor||"",addedFileIconSize:e.addedFileIconSize??null,addedFileIconSize_tablet:null,addedFileIconSize_mobile:null,addedFileTypography:{},addedFileTextColor:e.addedFileTextColor||"",removeFileBgColor:e.removeFileBgColor||"",removeFileBgColorHover:e.removeFileBgColorHover||"",removeFileColor:e.removeFileColor||"",removeFileColorHover:e.removeFileColorHover||"",removeFileRadius:e.removeFileRadius??null,removeFileRadius_tablet:null,removeFileRadius_mobile:null,removeFileSize:e.removeFileSize??null,removeFileIconSize:e.removeFileIconSize??null,fileSelectIconColorHover:e.fileSelectIconColorHover||"",fileSelectBgColorHover:e.fileSelectBgColorHover||"",fileSelectBorderColorHover:e.fileSelectBorderColorHover||"",fileSelectTextColorHover:e.fileSelectTextColorHover||"",blockMargin:{},blockMargin_tablet:{},blockMargin_mobile:{},blockPadding:{},blockPadding_tablet:{},blockPadding_mobile:{},hideDesktop:!1,hideTablet:!1,hideMobile:!1,customClasses:"",customCSS:""}}async function St(){const e=It();try{const t={},o=window.wpApiSettings?.nonce;o&&(t["X-WP-Nonce"]=o);const r=await fetch(`${e}voxel-fse/v1/cart/config`,{credentials:"same-origin",headers:t});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(t){return console.error("Failed to fetch cart config:",t),null}}async function Bt(e,t){const o=q();try{const r=localStorage.getItem("voxel:guest_cart"),n=t?"products.get_cart_items":"products.get_guest_cart_items",l=new FormData;l.append("_wpnonce",e.nonce.cart),r&&l.append("guest_cart",r);const i=await fetch(`${o}?vx=1&action=${n}`,{method:"POST",credentials:"same-origin",body:l});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const c=await i.text();if(!c||c.trim()==="")return console.warn("Empty response from cart items endpoint"),{};let a;try{a=JSON.parse(c)}catch{throw console.error("Failed to parse cart items response:",c),new Error("Invalid JSON response from server")}return a.success?(t&&r&&localStorage.removeItem("voxel:guest_cart"),a.items||{}):(console.error("Failed to fetch cart items:",a.message),null)}catch(r){return console.error("Failed to fetch cart items:",r),null}}async function Et(e,t){const o=q();try{let r=null;try{const c=localStorage.getItem("voxel:direct_cart");c&&(r=JSON.parse(c)[t])}catch(c){console.error("Failed to parse direct cart:",c)}const n=new URL(`${o}`);n.searchParams.set("vx","1"),n.searchParams.set("action","products.get_direct_cart"),n.searchParams.set("_wpnonce",e.nonce.cart),r&&n.searchParams.set("item",JSON.stringify(r));const l=await fetch(n.toString(),{credentials:"same-origin"});if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);const i=await l.json();return i.success&&i.item?{[i.item.key]:i.item}:(console.error("Failed to fetch direct cart item:",i.message),{})}catch(r){return console.error("Failed to fetch direct cart item:",r),null}}function xt({attributes:e}){const[t,o]=v.useState(null),[r,n]=v.useState(null),[l,i]=v.useState(!0),[c,a]=v.useState(null),[s,f]=v.useState({first_name:"",last_name:"",country:null,state:"",address:"",zip:"",zone:null,rate:null,status:"pending_setup",vendors:{}}),[h,g]=v.useState({email:"",sending_code:!1,sent_code:!1,code:"",registered:!1,terms_agreed:!1}),[B,b]=v.useState({enabled:!1,content:""}),[H,u]=v.useState("cart"),[C,R]=v.useState(null),D=async S=>{for(const d of S)try{const E=await(await fetch(d.url)).json();if(E?.[d.prop]){const I=E[d.prop];if(typeof I=="string")return document.cookie=`_vx_ccode=${I}; max-age:259200; path=/`,I.toUpperCase()}}catch(p){console.error("GeoIP provider error:",p)}return null},m=S=>new URLSearchParams(window.location.search).get(S),y=S=>{const d=new URL(window.location.href);d.searchParams.delete(S),window.history.replaceState({},"",d.toString())};v.useEffect(()=>{let S=!1;async function d(){const p=await St();if(S)return;if(!p){a("Failed to load cart configuration"),i(!1);return}o(p);const E=m("screen"),I=m("post_id");if(E==="promote"&&I&&p.is_logged_in)try{const F=ge(),j=await fetch(`${F}voxel-fse/v1/cart/promote-config?post_id=${encodeURIComponent(I)}`,{credentials:"same-origin"});if(j.ok){const G=await j.json();if(!S&&G.success!==!1){R(G),i(!1);return}}}catch(F){console.error("Failed to load promote config:",F)}const k=m("checkout_item");if(k){u("direct_cart");const F=m("_item");if(F)try{const G=JSON.parse(atob(F));localStorage.setItem("voxel:direct_cart",JSON.stringify({[k]:G}))}catch(G){console.error("Failed to parse direct cart item:",G)}const j=await Et(p,k);!S&&j!==null&&n(j),i(!1);return}const A=p.shipping.saved_address,T=p.shipping.default_country,w=p.shipping.countries;if(A&&A.country&&w[A.country])f({first_name:A.first_name||"",last_name:A.last_name||"",country:A.country,state:A.state||"",address:A.address||"",zip:A.zip||"",zone:null,rate:null,status:"completed",vendors:{}}),A.country;else if(T&&w[T])f(F=>({...F,country:T,status:"completed"}));else if(p.geoip_providers.length>0){const F=await D(p.geoip_providers);if(F&&w[F])f(j=>({...j,country:F,status:"completed"}));else{const j=Object.keys(w);j.length>0?(j[0],f(G=>({...G,country:j[0],status:"completed"}))):f(G=>({...G,status:"completed"}))}}else{const F=Object.keys(w);F.length>0?(F[0],f(j=>({...j,country:F[0],status:"completed"}))):f(j=>({...j,status:"completed"}))}const W=await Bt(p,p.is_logged_in);S||(n(W!==null?W:{}),i(!1))}return d(),()=>{S=!0}},[]);const x=v.useCallback(async(S,d)=>{if(!t||!r)return;const p=r[S];if(!p)return;const E={...r};E[S]={...p,_disabled:!0},n(E);try{const I=q(),k=t.is_logged_in||h.registered,A=k?"products.update_cart_item_quantity":"products.update_guest_cart_item_quantity",T=new FormData;if(T.append("item_key",S),T.append("item_quantity",String(d)),T.append("_wpnonce",t.nonce.cart),!k){const F=localStorage.getItem("voxel:guest_cart");F&&T.append("guest_cart",F)}const W=await(await fetch(`${I}?vx=1&action=${A}`,{method:"POST",credentials:"same-origin",body:T})).json();W.success&&W.item?(n(F=>F&&{...F,[S]:W.item}),k||P({...r,[S]:W.item})):(n(F=>F&&{...F,[S]:{...p,_disabled:!1}}),alert(W.message||"Failed to update quantity"))}catch(I){n(k=>k&&{...k,[S]:{...p,_disabled:!1}}),console.error("Failed to update quantity:",I)}},[t,r,h.registered]),z=v.useCallback(async S=>{if(!t||!r||!r[S])return;if(H==="direct_cart"){n({}),localStorage.removeItem("voxel:direct_cart"),y("checkout_item");return}const p={...r};delete p[S];try{const E=q();if(t.is_logged_in||h.registered){const k=new FormData;k.append("item_key",S),k.append("_wpnonce",t.nonce.cart);const T=await(await fetch(`${E}?vx=1&action=products.remove_cart_item`,{method:"POST",credentials:"same-origin",body:k})).json();T.success?n(p):alert(T.message||"Failed to remove item")}else n(p),P(p)}catch(E){console.error("Failed to remove item:",E)}},[t,r,h.registered]),P=S=>{if(Object.keys(S).length){const d={};Object.values(S).forEach(p=>{d[p.key]=p.value}),localStorage.setItem("voxel:guest_cart",JSON.stringify(d))}else localStorage.removeItem("voxel:guest_cart")},[$,M]=v.useState(!1),U=v.useCallback(async()=>{if(!t)return!1;const S=q(),d=new FormData;d.append("email",h.email),d.append("_wpnonce",t.nonce.checkout),t.guest_customers.proceed_with_email?.require_verification&&d.append("_confirmation_code",h.code),t.guest_customers.proceed_with_email?.require_tos&&d.append("terms_agreed",h.terms_agreed?"1":"0");const p=localStorage.getItem("voxel:guest_cart");if(p&&d.append("guest_cart",p),t.recaptcha.enabled&&t.recaptcha.key){const E=window.grecaptcha;if(E)try{const I=await new Promise(k=>{E.ready(async()=>{const A=await E.execute(t.recaptcha.key,{action:"quick_register"});k(A)})});d.append("_recaptcha",I)}catch(I){console.error("reCAPTCHA error:",I)}}try{const I=await(await fetch(`${S}?vx=1&action=products.quick_register.process`,{method:"POST",credentials:"same-origin",body:d})).json();if(I.success&&I.nonces)return o(k=>k&&{...k,nonce:I.nonces,is_logged_in:!0}),g(k=>({...k,registered:!0})),localStorage.removeItem("voxel:guest_cart"),!0;{const k=window;return k.Voxel?.alert?k.Voxel.alert(I.message||"Registration failed"):alert(I.message||"Registration failed"),!1}}catch(E){return console.error("Quick register error:",E),!1}},[t,h]),ce=v.useCallback(async()=>{if(!(!t||!r)&&!$){M(!0);try{if(!(t.is_logged_in||h.registered)&&t.guest_customers.behavior==="proceed_with_email"&&!await U()){M(!1);return}const d=new FormData;d.append("source",H);const p=Object.values(r).map(T=>({key:T.key,value:T.value}));if(d.append("items",JSON.stringify(p)),B.enabled&&B.content&&d.append("order_notes",B.content),Object.values(r).some(T=>T.shipping.is_shippable)&&s.country){const T={address:{first_name:s.first_name,last_name:s.last_name,country:s.country,state:s.state,address:s.address,zip:s.zip}};t.shipping.responsibility==="platform"&&s.zone&&s.rate?T.method={zone:s.zone,rate:s.rate}:t.shipping.responsibility==="vendor"&&Object.keys(s.vendors).length>0&&(T.vendors=s.vendors),d.append("shipping",JSON.stringify(T))}d.append("redirect_to",window.location.href);const I=q(),A=await(await fetch(`${I}?vx=1&action=products.checkout&_wpnonce=${t.nonce.checkout}`,{method:"POST",credentials:"same-origin",body:d})).json();if(A.success&&A.redirect_url)window.location.href=A.redirect_url;else{const T=window;T.Voxel?.alert?T.Voxel.alert(A.message||"Checkout failed"):alert(A.message||"Checkout failed"),M(!1)}}catch(S){console.error("Checkout error:",S),M(!1)}}},[t,r,s,h,B,$,U]),X=v.useCallback(S=>{f(d=>({...d,...S}))},[]),Y=v.useCallback(S=>{g(d=>({...d,...S}))},[]),ee=v.useCallback(S=>{b(d=>({...d,...S}))},[]);return C?React.createElement(gt,{config:C,currency:t?.currency||"USD",checkoutIcon:e.checkoutIcon}):React.createElement(ht,{attributes:e,config:t,items:r,context:"frontend",isLoading:l,error:c,onUpdateQuantity:x,onRemoveItem:z,onCheckout:ce,shipping:s,onShippingChange:X,quickRegister:h,onQuickRegisterChange:Y,orderNotes:B,onOrderNotesChange:ee})}function Z(){document.querySelectorAll(".voxel-fse-cart-summary-frontend, .vx-cart-summary-widget").forEach(t=>{if(t.dataset.reactMounted==="true")return;const o=Rt(t);if(!o){console.warn("Cart Summary block: No vxconfig found");return}const r=Ct(o);t.innerHTML="",t.dataset.reactMounted="true",Be.createRoot(t).render(React.createElement(xt,{attributes:r}))})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Z):Z(),window.addEventListener("turbo:load",Z),window.addEventListener("pjax:complete",Z),document.addEventListener("voxel:markup-update",Z)})(ReactDOM,React);
