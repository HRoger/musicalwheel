(function(Ce,d){"use strict";const W={addToCart:{library:"icon",value:"la-shopping-cart"},outOfStock:{library:"icon",value:"la-exclamation-circle"},checkout:{library:"icon",value:"la-arrow-right"},calendar:{library:"icon",value:"la-calendar"},clock:{library:"icon",value:"la-clock"}},qe={blockId:"",showPriceCalculator:"show",showPriceCalculatorTablet:"show",showPriceCalculatorMobile:"show",showSubtotalOnly:!1,hideCardSubheading:!1,cardSelectOnClick:!0,icons:W,fieldSpacing:20,fieldLabelTypography:{},fieldLabelColor:"",primaryButtonTypography:{},primaryButtonBorder:{borderType:"none",borderWidth:{},borderColor:""},primaryButtonBorderRadius:0,primaryButtonBoxShadow:{},primaryButtonTextColor:"",primaryButtonBackground:"",primaryButtonIconSize:24,primaryButtonIconColor:"",primaryButtonIconTextSpacing:8,primaryButtonTextColorHover:"",primaryButtonBackgroundHover:"",primaryButtonBorderColorHover:"",primaryButtonBoxShadowHover:{},primaryButtonIconColorHover:"",priceCalculatorListSpacing:10,priceCalculatorTypography:{},priceCalculatorTextColor:"",priceCalculatorTotalTypography:{},priceCalculatorTotalTextColor:"",loadingColor1:"",loadingColor2:"",outOfStockContentGap:15,outOfStockIconSize:40,outOfStockIconColor:"",outOfStockTypography:{},outOfStockTextColor:"",stepperInputSize:16,stepperButtonIconColor:"",stepperButtonBackground:"",stepperButtonBorder:{borderType:"none",borderWidth:{},borderColor:""},stepperButtonBorderRadius:0,stepperButtonIconColorHover:"",stepperButtonBackgroundHover:"",stepperButtonBorderColorHover:"",cardsGap:10,cardsBackground:"",cardsBorder:{borderType:"none",borderWidth:{},borderColor:""},cardsBorderRadius:0,cardsPrimaryTypography:{},cardsPrimaryColor:"",cardsSecondaryTypography:{},cardsSecondaryColor:"",cardsPriceTypography:{},cardsPriceColor:"",cardsImageBorderRadius:0,cardsImageSize:60,cardsSelectedBackground:"",cardsSelectedBorderColor:"",cardsSelectedBoxShadow:{},cardsSelectedPrimaryTypography:{},buttonsGap:10,buttonsBackground:"",buttonsBorder:{borderType:"none",borderWidth:{},borderColor:""},buttonsBorderRadius:0,buttonsTextTypography:{},buttonsTextColor:"",buttonsSelectedBackground:"",buttonsSelectedBorderColor:"",buttonsSelectedBoxShadow:{},dropdownTypography:{},dropdownBoxShadow:{},dropdownBackground:"",dropdownTextColor:"",dropdownBorder:{type:"default",width:0,color:""},dropdownBorderRadius:0,dropdownIconColor:"",dropdownIconSize:24,dropdownIconTextSpacing:10,dropdownHideChevron:!1,dropdownChevronColor:"",dropdownBackgroundHover:"",dropdownTextColorHover:"",dropdownBorderColorHover:"",dropdownIconColorHover:"",dropdownBoxShadowHover:{},dropdownFilledTypography:{},dropdownFilledBackground:"",dropdownFilledTextColor:"",dropdownFilledIconColor:"",dropdownFilledBorderColor:"",dropdownFilledBorderWidth:0,dropdownFilledBoxShadow:{},radioCheckboxBorderColor:"",radioCheckboxTextTypography:{},radioCheckboxTextColor:"",radioCheckboxSelectedBackground:"",radioCheckboxSelectedTextTypography:{},radioCheckboxSelectedTextColor:"",radioCheckboxSelectedBoxShadow:{},switcherBackgroundInactive:"",switcherBackgroundActive:"",switcherHandleBackground:"",imagesGap:10,imagesBorderRadius:0,imagesSelectedBorderColor:"",colorsGap:10,colorsSize:30,colorsBorderRadius:50,colorsInsetColor:"",inputPlaceholderColor:"",inputPlaceholderTypography:{},inputValueColor:"",inputValueTypography:{},inputBackground:"",inputBorder:{type:"default",width:0,color:""},inputBorderRadius:0,inputBackgroundHover:"",inputBorderColorHover:"",inputPlaceholderColorHover:"",inputTextColorHover:"",inputBackgroundActive:"",inputBorderColorActive:"",inputTextColorActive:""},Pe={start_date:null,end_date:null,date:null,slot:null};function ae({addon:e,value:t,onChange:a,getRepeatConfig:n,getCustomPrice:l,getCustomPriceForDate:u,searchContext:i}){d.useEffect(()=>{e.required&&!t.enabled&&a({enabled:!0}),i?.switcher_addons?.[e.key]===!0&&!t.enabled&&a({enabled:!0})},[e.key,e.required,i,t.enabled,a]);const f=d.useCallback(()=>{e.required&&t.enabled||a({enabled:!t.enabled})},[e.required,t.enabled,a]);d.useCallback(()=>{if(!t.enabled)return null;let y=e.label;const c=n(e),g=l(e);let k=0;if(c!==null){k=0;const p=new Date(c.start+"T00:00:00Z"),r=new Date(c.end+"T00:00:00Z");for(;c.count_mode==="nights"?p<r:p<=r;){const m=u(p);if(m!==null){const E=m.prices.addons?.[e.key],o=E&&"price"in E?E.price:null;k+=o??e.props.price??0}else k+=e.props.price??0;p.setDate(p.getDate()+1)}y+=c.label}else{let p=e.props.price??0;if(g!==null){const r=g.prices.addons?.[e.key],m=r&&"price"in r?r.price:null;m!=null&&(p=m)}k=p}return{label:y,amount:k}},[e,t.enabled,n,l,u]);const s=e.props.price!=null?`+${e.props.price.toLocaleString()}`:"";return React.createElement("div",{className:"ts-form-group ts-addon-switcher"},React.createElement("div",{className:"switch-slider"},React.createElement("label",{className:"container-switch"},React.createElement("input",{type:"checkbox",checked:t.enabled,onChange:f,disabled:e.required&&t.enabled}),React.createElement("span",{className:"switch"})),React.createElement("span",{className:"switch-label"},e.label,s&&React.createElement("span",{className:"addon-price"}," (",s,")"))))}ae.getPricingSummary=function(e,t,a,n,l){if(!t.enabled)return null;let u=e.label;const i=a(e),f=n(e);let s=0;if(i!==null){s=0;const y=new Date(i.start+"T00:00:00Z"),c=new Date(i.end+"T00:00:00Z");for(;i.count_mode==="nights"?y<c:y<=c;){const g=l(y);if(g!==null){const k=g.prices.addons?.[e.key],p=k&&"price"in k?k.price:null;s+=p??e.props.price??0}else s+=e.props.price??0;y.setDate(y.getDate()+1)}u+=i.label}else{let y=e.props.price??0;if(f!==null){const c=f.prices.addons?.[e.key],g=c&&"price"in c?c.price:null;g!=null&&(y=g)}s=y}return{label:u,amount:s}};function ne({addon:e,value:t,onChange:a,getRepeatConfig:n,getCustomPrice:l,getCustomPriceForDate:u,searchContext:i}){const f=e.props.min_units??1,s=e.props.max_units??999;d.useEffect(()=>{if(t.quantity===null){const o=e.required?f:0;a({quantity:o})}const E=i?.numeric_addons?.[e.key];if(E!==void 0){const o=parseInt(String(E),10);typeof o=="number"&&o>=f&&o<=s&&a({quantity:o})}},[e.key,e.required,f,s,i]);const y=d.useCallback(()=>{const E=t.quantity??0;typeof E!="number"||E+1<f?a({quantity:f}):a({quantity:Math.min(E+1,s)})},[t.quantity,f,s,a]),c=d.useCallback(()=>{const E=t.quantity??0;if(typeof E!="number")a({quantity:f});else{const o=E-1;!e.required&&o<f?a({quantity:0}):a({quantity:Math.max(o,f)})}},[e.required,t.quantity,f,a]),g=d.useCallback(()=>{const E=t.quantity;typeof E=="number"&&(E>s?a({quantity:s}):E<f&&(!e.required&&E===0||a({quantity:f})))},[e.required,t.quantity,f,s,a]),k=d.useCallback(E=>{const o=parseInt(E.target.value,10);isNaN(o)||a({quantity:o})},[a]),p=e.props.price!=null?`+${e.props.price.toLocaleString()}`:"",r=t.quantity??0;return(e.props.display_mode??"stepper")==="input"?React.createElement("div",{className:"ts-form-group ts-addon-numeric"},React.createElement("label",null,e.label),React.createElement("div",{className:"input-container"},React.createElement("input",{type:"number",value:r,onChange:k,onBlur:g,min:e.required?f:0,max:s,className:"ts-filter"}))):React.createElement("div",{className:"ts-form-group ts-addon-numeric"},React.createElement("label",null,e.label,p&&React.createElement("span",{className:"addon-price"}," (",p," each)")),React.createElement("div",{className:"ts-stepper-input flexify"},React.createElement("button",{type:"button",className:`ts-stepper-left ts-icon-btn${e.required&&r<=f?" vx-disabled":""}`,onClick:c},React.createElement("i",{className:"las la-minus"})),React.createElement("input",{type:"number",value:r,onChange:k,onBlur:g,className:"ts-input-box"}),React.createElement("button",{type:"button",className:`ts-stepper-right ts-icon-btn${r>=s?" vx-disabled":""}`,onClick:y},React.createElement("i",{className:"las la-plus"}))),e.props.charge_after?.enabled&&e.props.charge_after.quantity>0&&React.createElement("small",{className:"charge-after-note"},"First ",e.props.charge_after.quantity," free"))}ne.getPricingSummary=function(e,t,a,n,l){const u=t.quantity??0;if(u<1)return null;let i=e.label;u>=1&&(i+=` × ${u}`);let f=u;e.props.charge_after?.enabled&&e.props.charge_after?.quantity>0&&(f=Math.max(0,u-e.props.charge_after.quantity));const s=a(e),y=n(e);let c=0;if(s!==null){c=0;const g=new Date(s.start+"T00:00:00Z"),k=new Date(s.end+"T00:00:00Z");for(;s.count_mode==="nights"?g<k:g<=k;){const p=l(g);if(p!==null){const r=p.prices.addons?.[e.key],m=r&&"price"in r?r.price:null;c+=m??e.props.price??0}else c+=e.props.price??0;g.setDate(g.getDate()+1)}c*=f,i+=s.label}else{let g=e.props.price??0;if(y!==null){const k=y.prices.addons?.[e.key],p=k&&"price"in k?k.price:null;p!=null&&(g=p)}c=g*f}return{label:i,amount:c}};function se({addon:e,value:t,onChange:a}){const n=e.props.choices??{},l=Object.keys(n);d.useEffect(()=>{e.required&&t.selected===null&&l.length>0&&a({selected:l[0]})},[e.required,t.selected,l,a]),d.useCallback(s=>{a({selected:s}),setIsOpen(!1)},[a]),d.useCallback(()=>{e.required||a({selected:null})},[e.required,a]),t.selected&&n[t.selected];const u=e.props.display_mode??"radio",i=s=>s.price!=null&&s.price>0?`+${s.price.toLocaleString()}`:"",f=s=>{t.selected===s&&!e.required?a({selected:null}):a({selected:s})};return u==="buttons"?React.createElement("div",{className:"ts-form-group ts-addon-select"},React.createElement("label",null,e.label),React.createElement("ul",{className:"simplify-ul addon-buttons flexify"},l.map(s=>{const y=n[s];return React.createElement("li",{key:s,className:`flexify${t.selected===s?" adb-selected":""}`,onClick:()=>f(s)},y.label)}))):u==="dropdown"?React.createElement("div",{className:"ts-form-group ts-addon-select"},React.createElement("label",null,e.label),React.createElement("div",{className:"ts-filter"},React.createElement("select",{value:t.selected??"",onChange:s=>{const y=s.target.value;a({selected:y||null})}},!e.required&&React.createElement("option",{value:""},"Select choice"),l.map(s=>{const y=n[s];return React.createElement("option",{key:s,value:s},y.label)})),React.createElement("div",{className:"ts-down-icon"}))):React.createElement("div",{className:"ts-form-group inline-terms-wrapper ts-inline-filter ts-addon-select"},React.createElement("label",null,e.label),React.createElement("ul",{className:"simplify-ul ts-addition-list flexify"},l.map(s=>{const y=n[s],c=t.selected===s,g=i(y);return React.createElement("li",{key:s,className:`flexify${c?" ts-checked":""}`},React.createElement("div",{className:"addition-body",onClick:()=>f(s)},React.createElement("label",{className:"container-radio"},React.createElement("input",{type:"radio",checked:c,onChange:()=>{},disabled:!0,hidden:!0}),React.createElement("span",{className:"checkmark"})),React.createElement("span",null,y.label),g&&React.createElement("div",{className:"vx-addon-price"},g)))})))}se.getPricingSummary=function(e,t,a,n,l){const u=t.selected;if(u===null)return null;const f=(e.props.choices??{})[u];if(!f)return null;let s=f.label;const y=a(e),c=n(e);let g=0;if(y!==null){g=0;const k=new Date(y.start+"T00:00:00Z"),p=new Date(y.end+"T00:00:00Z");for(;y.count_mode==="nights"?k<p:k<=p;){const r=l(k);if(r!==null){const m=r.prices.addons?.[e.key],o=(m&&typeof m=="object"&&!("price"in m)?m[u]:null)?.price??null;g+=o??f.price}else g+=f.price;k.setDate(k.getDate()+1)}s+=y.label}else{let k=f.price;if(c!==null){const p=c.prices.addons?.[e.key],m=(p&&typeof p=="object"&&!("price"in p)?p[u]:null)?.price??null;m!=null&&(k=m)}g=k}return{label:s,amount:g}};function re({addon:e,value:t,onChange:a}){const n=e.props.choices??{},l=Object.keys(n),u=t.selected??[],i=d.useCallback(c=>{const g=[...u],k=g.indexOf(c);k!==-1?g.splice(k,1):g.push(c),a({selected:g})},[u,a]);d.useCallback(()=>{a({selected:[]})},[a]);const f=c=>u.includes(c),s=e.props.display_mode??"checkboxes",y=c=>c.price!=null&&c.price>0?`+${c.price.toLocaleString()}`:"";return s==="buttons"?React.createElement("div",{className:"ts-form-group ts-addon-multiselect"},React.createElement("label",null,e.label),React.createElement("ul",{className:"simplify-ul addon-buttons flexify"},l.map(c=>{const g=n[c];return React.createElement("li",{key:c,className:`flexify${f(c)?" adb-selected":""}`,onClick:()=>i(c)},g.label)}))):React.createElement("div",{className:"ts-form-group inline-terms-wrapper ts-inline-filter ts-addon-multiselect"},React.createElement("label",null,e.label),React.createElement("ul",{className:"simplify-ul ts-addition-list flexify"},l.map(c=>{const g=n[c],k=f(c),p=y(g);return React.createElement("li",{key:c,className:`flexify${k?" ts-checked":""}`},React.createElement("div",{className:"addition-body",onClick:()=>i(c)},React.createElement("label",{className:"container-checkbox"},React.createElement("input",{type:"checkbox",checked:k,onChange:()=>{},disabled:!0,hidden:!0}),React.createElement("span",{className:"checkmark"})),React.createElement("span",null,g.label),p&&React.createElement("div",{className:"vx-addon-price"},p)))})))}re.getPricingSummary=function(e,t,a,n,l){const u=[],i=a(e),f=n(e),s=e.props.choices??{};return(t.selected??[]).forEach(c=>{const g=c;if(g===null)return;const k=s[g];if(!k)return;let p=k.label,r=0;if(i!==null){r=0;const m=new Date(i.start+"T00:00:00Z"),E=new Date(i.end+"T00:00:00Z");for(;i.count_mode==="nights"?m<E:m<=E;){const o=l(m);if(o!==null){const _=o.prices.addons?.[e.key],w=(_&&typeof _=="object"&&!("price"in _)?_[g]:null)?.price??null;r+=w??k.price}else r+=k.price;m.setDate(m.getDate()+1)}p+=i.label}else{let m=k.price;if(f!==null){const E=f.prices.addons?.[e.key],_=(E&&typeof E=="object"&&!("price"in E)?E[g]:null)?.price??null;_!=null&&(m=_)}r=m}u.push({label:p,amount:r})}),u};function le({addon:e,value:t,onChange:a}){const n=e.props.choices??{},l=Object.values(n);d.useEffect(()=>{if(e.required&&t.selected.item===null&&l.length>0){const r=l[0];a({selected:{item:r.value,quantity:r.quantity?.enabled?r.quantity.min:1}})}},[e.required,t.selected.item,l,a]);const u=()=>!e._has_external_handler||t.selected.item!==null,i=r=>!e._has_external_handler||t.selected.item===r.value,f=d.useCallback(r=>{r&&t.selected.item!==r.value?a({selected:{item:r.value,quantity:r.quantity?.enabled?r.quantity.min:1}}):e.required||a({selected:{item:null,quantity:1}})},[e.required,t.selected.item,a]),s=d.useCallback(r=>{const m=t.selected.quantity;typeof m=="number"&&r.quantity?.enabled&&(m>r.quantity.max?a({selected:{item:t.selected.item,quantity:r.quantity.max}}):m<r.quantity.min&&a({selected:{item:t.selected.item,quantity:r.quantity.min}}))},[t.selected,a]),y=d.useCallback(r=>{if(!r.quantity?.enabled)return;const m=t.selected.quantity;if(typeof m!="number")a({selected:{item:t.selected.item,quantity:r.quantity.min}});else{const E=m+1;E<r.quantity.min?a({selected:{item:t.selected.item,quantity:r.quantity.min}}):a({selected:{item:t.selected.item,quantity:Math.min(E,r.quantity.max)}})}},[t.selected,a]),c=d.useCallback(r=>{if(!r.quantity?.enabled)return;const m=t.selected.quantity;a(typeof m!="number"?{selected:{item:t.selected.item,quantity:r.quantity.min}}:{selected:{item:t.selected.item,quantity:Math.max(m-1,r.quantity.min)}})},[t.selected,a]),g=r=>r.price!=null&&r.price>0?`+${r.price.toLocaleString()}`:"",k=e.props.display_mode??"cards";if(!u())return null;const p=r=>!r.quantity?.enabled||t.selected.item!==r.value?null:React.createElement("div",{className:"ts-stepper-input flexify custom-addon-stepper",onClick:m=>m.stopPropagation()},React.createElement("button",{type:"button",className:`ts-stepper-left ts-icon-btn ts-smaller${(r.quantity?.min??1)>=t.selected.quantity?" vx-disabled":""}`,onClick:()=>c(r)},React.createElement("i",{className:"las la-minus"})),React.createElement("input",{type:"number",value:t.selected.quantity,onChange:m=>{const E=parseInt(m.target.value,10);isNaN(E)||a({selected:{item:t.selected.item,quantity:E}})},onBlur:()=>s(r),className:"ts-input-box ts-smaller"}),React.createElement("button",{type:"button",className:`ts-stepper-right ts-icon-btn ts-smaller${(r.quantity?.max??999)<=t.selected.quantity?" vx-disabled":""}`,onClick:()=>y(r)},React.createElement("i",{className:"las la-plus"})));return k==="radio"?React.createElement("div",{className:"ts-form-group ts-custom-additions ts-addon-custom-select"},React.createElement("label",null,e.label),React.createElement("ul",{className:"simplify-ul ts-addition-list flexify"},l.map(r=>{if(!i(r))return null;const m=t.selected.item===r.value,E=g(r);return React.createElement("li",{key:r.value,className:`flexify${m?" ts-checked":""}`},React.createElement("div",{className:"addition-body",onClick:()=>f(r)},React.createElement("label",{className:"container-radio"},React.createElement("input",{type:"radio",checked:m,onChange:()=>{},disabled:!0,hidden:!0}),React.createElement("span",{className:"checkmark"})),React.createElement("span",null,r.label),E&&React.createElement("div",{className:"vx-addon-price"},E)),p(r))}))):k==="buttons"?React.createElement("div",{className:"ts-form-group ts-addon-custom-select"},React.createElement("label",null,e.label),React.createElement("ul",{className:"simplify-ul addon-buttons flexify"},l.map(r=>i(r)?React.createElement("li",{key:r.value,className:`flexify${t.selected.item===r.value?" adb-selected":""}`,onClick:()=>f(r)},r.label):null))):k==="dropdown"?React.createElement("div",{className:"ts-form-group ts-addon-custom-select"},React.createElement("label",null,e.label),React.createElement("div",{className:"ts-filter"},React.createElement("select",{value:t.selected.item??"",onChange:r=>{const m=r.target.value;if(m){const E=n[m];E&&f(E)}else e.required||a({selected:{item:null,quantity:1}})}},!e.required&&React.createElement("option",{value:""},"Select choice"),l.map(r=>i(r)?React.createElement("option",{key:r.value,value:r.value},r.label):null)),React.createElement("div",{className:"ts-down-icon"}))):React.createElement("div",{className:"ts-form-group ts-addon-custom-select"},React.createElement("label",null,e.label),React.createElement("ul",{className:"simplify-ul addon-cards flexify"},l.map(r=>{if(!i(r))return null;const m=t.selected.item===r.value,E=g(r),o=r.image;return React.createElement("li",{key:r.value,className:`flexify${m?" adc-selected":""}`,onClick:()=>f(r)},o&&(typeof o=="string"?React.createElement("img",{src:o,alt:r.label}):o.url?React.createElement("img",{src:o.url,title:o.alt,alt:o.alt}):null),React.createElement("div",{className:"addon-details"},React.createElement("span",{className:"adc-title"},r.label),r.subheading&&React.createElement("span",{className:"adc-subtitle"},r.subheading),E&&React.createElement("div",{className:"vx-addon-price"},E)),p(r))})))}le.getPricingSummary=function(e,t,a,n,l){const{item:u,quantity:i}=t.selected;if(u===null)return null;const s=(e.props.choices??{})[u];if(!s)return null;let y=s.label;s.quantity?.enabled&&i>=1&&(y+=` × ${i}`);const c=a(e),g=n(e);let k=0;if(c!==null){const p=new Date(c.start+"T00:00:00Z"),r=new Date(c.end+"T00:00:00Z");for(;c.count_mode==="nights"?p<r:p<=r;){const m=l(p);if(m!==null){const E=m.prices.addons?.[e.key],_=(E&&typeof E=="object"&&!("price"in E)?E[u]:null)?.price??null;k+=_??s.price}else k+=s.price;p.setDate(p.getDate()+1)}s.quantity?.enabled&&(k*=i),y+=c.label}else{let p=s.price;if(g!==null){const r=g.prices.addons?.[e.key],E=(r&&typeof r=="object"&&!("price"in r)?r[u]:null)?.price??null;E!=null&&(p=E)}k=p,s.quantity?.enabled&&(k*=i)}return{label:y,amount:k}};function ce({addon:e,value:t,onChange:a}){const n=e.props.choices??{},l=Object.values(n),u=t.selected??[],i=()=>!e._has_external_handler||u.length>0,f=o=>!e._has_external_handler||y(o),s=o=>u.findIndex(_=>_.item===o.value),y=o=>s(o)!==-1,c=d.useCallback(o=>{const _=s(o),h=[...u];_!==-1?h.splice(_,1):h.push({item:o.value,quantity:o.quantity?.min??1}),a({selected:h})},[u,a]),g=d.useCallback(o=>{const _=s(o);if(_===-1||!o.quantity?.enabled)return;const h=u[_].quantity;if(typeof h=="number"){const w=[...u];h>o.quantity.max?(w[_]={...w[_],quantity:o.quantity.max},a({selected:w})):h<o.quantity.min&&(w[_]={...w[_],quantity:o.quantity.min},a({selected:w}))}},[u,a]),k=d.useCallback(o=>{const _=s(o);if(_===-1||!o.quantity?.enabled)return;const h=[...u],w=h[_].quantity;if(typeof w!="number")h[_]={...h[_],quantity:o.quantity.min};else{const b=w+1;b<o.quantity.min?h[_]={...h[_],quantity:o.quantity.min}:h[_]={...h[_],quantity:Math.min(b,o.quantity.max)}}a({selected:h})},[u,a]),p=d.useCallback(o=>{const _=s(o);if(_===-1||!o.quantity?.enabled)return;const h=[...u],w=h[_].quantity;typeof w!="number"?h[_]={...h[_],quantity:o.quantity.min}:h[_]={...h[_],quantity:Math.max(w-1,o.quantity.min)},a({selected:h})},[u,a]),r=o=>o.price!=null&&o.price>0?`+${o.price.toLocaleString()}`:"",m=e.props.display_mode??"cards";if(!i())return null;const E=o=>{const _=s(o);if(_===-1||!o.quantity?.enabled)return null;const h=u[_].quantity;return React.createElement("div",{className:"ts-stepper-input flexify custom-addon-stepper",onClick:w=>w.stopPropagation()},React.createElement("button",{type:"button",className:`ts-stepper-left ts-icon-btn ts-smaller${(o.quantity?.min??1)>=h?" vx-disabled":""}`,onClick:()=>p(o)},React.createElement("i",{className:"las la-minus"})),React.createElement("input",{type:"number",value:h,onChange:w=>{const b=parseInt(w.target.value,10);if(!isNaN(b)){const N=[...u];N[_]={...N[_],quantity:b},a({selected:N})}},onBlur:()=>g(o),className:"ts-input-box ts-smaller"}),React.createElement("button",{type:"button",className:`ts-stepper-right ts-icon-btn ts-smaller${(o.quantity?.max??999)<=h?" vx-disabled":""}`,onClick:()=>k(o)},React.createElement("i",{className:"las la-plus"})))};return m==="checkboxes"?React.createElement("div",{className:"ts-form-group ts-custom-additions ts-addon-custom-multiselect"},React.createElement("label",null,e.label),React.createElement("ul",{className:"simplify-ul ts-addition-list flexify"},l.map(o=>{if(!f(o))return null;const _=y(o),h=r(o);return React.createElement("li",{key:o.value,className:`flexify${_?" ts-checked":""}`},React.createElement("div",{className:"addition-body",onClick:()=>c(o)},React.createElement("label",{className:"container-checkbox"},React.createElement("input",{type:"checkbox",checked:_,onChange:()=>{},disabled:!0,hidden:!0}),React.createElement("span",{className:"checkmark"})),React.createElement("span",null,o.label),h&&React.createElement("div",{className:"vx-addon-price"},h)),E(o))}))):m==="buttons"?React.createElement("div",{className:"ts-form-group ts-addon-custom-multiselect"},React.createElement("label",null,e.label),React.createElement("ul",{className:"simplify-ul addon-buttons flexify"},l.map(o=>f(o)?React.createElement("li",{key:o.value,className:`flexify${y(o)?" adb-selected":""}`,onClick:()=>c(o)},o.label):null))):React.createElement("div",{className:"ts-form-group ts-addon-custom-multiselect"},React.createElement("label",null,e.label),React.createElement("ul",{className:"simplify-ul addon-cards flexify"},l.map(o=>{if(!f(o))return null;const _=y(o),h=r(o),w=o.image;return React.createElement("li",{key:o.value,className:`flexify${_?" adc-selected":""}`,onClick:()=>c(o)},w&&(typeof w=="string"?React.createElement("img",{src:w,alt:o.label}):w.url?React.createElement("img",{src:w.url,title:w.alt,alt:w.alt}):null),React.createElement("div",{className:"addon-details"},React.createElement("span",{className:"adc-title"},o.label),o.subheading&&React.createElement("span",{className:"adc-subtitle"},o.subheading),h&&React.createElement("div",{className:"vx-addon-price"},h)),E(o))})))}ce.getPricingSummary=function(e,t,a,n,l){const u=[],i=a(e),f=n(e),s=e.props.choices??{};return(t.selected??[]).forEach(c=>{const{item:g,quantity:k}=c;if(g===null)return;const p=s[g];if(!p)return;let r=p.label;p.quantity?.enabled&&k>=1&&(r+=` × ${k}`);let m=0;if(i!==null){let E=0;const o=new Date(i.start+"T00:00:00Z"),_=new Date(i.end+"T00:00:00Z");for(;i.count_mode==="nights"?o<_:o<=_;){const h=l(o);if(h!==null){const w=h.prices.addons?.[e.key],N=(w&&typeof w=="object"&&!("price"in w)?w[g]:null)?.price??null;E+=N??p.price}else E+=p.price;o.setDate(o.getDate()+1)}p.quantity?.enabled&&(E*=k),m=E,r+=i.label}else{let E=p.price;if(f!==null){const o=f.prices.addons?.[e.key],h=(o&&typeof o=="object"&&!("price"in o)?o[g]:null)?.price??null;h!=null&&(E=h)}m=E,p.quantity?.enabled&&(m*=k)}u.push({label:r,amount:m})}),u};function Te(e){return e?Array.isArray(e)?e:Object.entries(e).map(([t,a])=>({...a,key:a.key||t})):[]}const Ie=d.forwardRef(function({config:t,values:a,onValueChange:n,bookingValue:l,bookingRangeLength:u,searchContext:i},f){const s=t.props?.fields?.["form-addons"],y=d.useMemo(()=>Te(s?.props.addons),[s]),c=s?.props.l10n??{},g=t.settings?.product_mode??"regular",k=t.props?.custom_prices,p=d.useCallback(_=>{if(!k?.enabled||!k.list?.length)return null;const h=_.toISOString().split("T")[0],w=_.getUTCDay();for(const b of k.list)for(const N of b.conditions){if(N.type==="date"&&N.date===h)return b;if(N.type==="date_range"&&N.range){const R=new Date(N.range.from+"T00:00:00Z"),x=new Date(N.range.to+"T00:00:00Z");if(_>=R&&_<=x)return b}if(N.type==="day_of_week"&&N.days){const R=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];if(N.days.includes(R[w]))return b}}return null},[k]),r=d.useCallback(_=>{const h=t.props?.fields?.["form-booking"];if(g==="booking")return h&&["single_day","timeslots"].includes(h.props?.mode??"")&&l?.date?p(new Date(l.date+"T00:00:00Z")):null;if(g==="regular"){const w=t.props?.today?.date;if(w)return p(new Date(w+"T00:00:00Z"))}return null},[g,l,t.props,p]),m=d.useCallback(_=>{const h=t.props?.fields?.["form-booking"];if(!h||h.props?.mode!=="date_range"||!_.repeat||!l?.start_date||!l?.end_date)return null;const w=u??0;if(w<1)return null;const b=h.props?.count_mode??"nights";let N="";return w>1&&(b==="nights"?N=` (${(c.amount_nights??"@count nights").replace("@count",String(w))})`:N=` (${(c.amount_days??"@count days").replace("@count",String(w))})`),{length:w,label:N,start:l.start_date,end:l.end_date,count_mode:b}},[t.props,l,u,c]),E=d.useCallback(()=>{const _=[];return y.forEach(h=>{const w=a[h.key];if(!w)return;let b=null;switch(h.type){case"switcher":b=ae.getPricingSummary(h,w,m,r,p);break;case"numeric":b=ne.getPricingSummary(h,w,m,r,p);break;case"select":b=se.getPricingSummary(h,w,m,r,p);break;case"multiselect":b=re.getPricingSummary(h,w,m,r,p);break;case"custom-select":b=le.getPricingSummary(h,w,m,r,p);break;case"custom-multiselect":b=ce.getPricingSummary(h,w,m,r,p);break}b!==null&&(Array.isArray(b)?_.push(...b):_.push(b))}),_},[y,a,m,r,p]);d.useImperativeHandle(f,()=>({getPricingSummary:E}),[E]);const o=_=>{const h=a[_.key],w=N=>{n(_.key,N)},b={addon:_,getRepeatConfig:m,getCustomPrice:r,getCustomPriceForDate:p};switch(_.type){case"switcher":return React.createElement(ae,{key:_.key,...b,value:h??{enabled:!1},onChange:w,searchContext:i});case"numeric":return React.createElement(ne,{key:_.key,...b,value:h??{quantity:null},onChange:w,searchContext:i});case"select":return React.createElement(se,{key:_.key,...b,value:h??{selected:null},onChange:w});case"multiselect":return React.createElement(re,{key:_.key,...b,value:h??{selected:[]},onChange:w});case"custom-select":return React.createElement(le,{key:_.key,...b,value:h??{selected:{item:null,quantity:1}},onChange:w});case"custom-multiselect":return React.createElement(ce,{key:_.key,...b,value:h??{selected:[]},onChange:w});default:return null}};return y.length===0?null:React.createElement("div",{className:"ts-form-group ts-field-addons"},y.map(o))});function Be({maxQuantity:e,value:t,onChange:a,label:n="Quantity"}){const l=d.useCallback(()=>{if(typeof t!="number")a(1);else{const y=t+1;a(y<1?1:Math.min(y,e))}},[t,e,a]),u=d.useCallback(()=>{a(typeof t!="number"?1:Math.max(t-1,1))},[t,a]),i=d.useCallback(()=>{typeof t=="number"&&(t>e?a(e):t<1&&a(1))},[t,e,a]),f=d.useCallback(y=>{const c=parseInt(y.target.value,10);isNaN(c)||a(c)},[a]),s=t??1;return React.createElement("div",{className:"ts-form-group ts-field-quantity"},React.createElement("label",null,n),React.createElement("div",{className:"ts-stepper-input"},React.createElement("button",{type:"button",className:"ts-stepper-btn ts-stepper-minus",onClick:u,disabled:s<=1},React.createElement("span",{className:"ts-icon"},"-")),React.createElement("input",{type:"number",value:s,onChange:f,onBlur:i,min:1,max:e,className:"ts-stepper-value"}),React.createElement("button",{type:"button",className:"ts-stepper-btn ts-stepper-plus",onClick:l,disabled:s>=e},React.createElement("span",{className:"ts-icon"},"+"))))}function Me({attribute:e,allAttributes:t,variations:a,selections:n,stockEnabled:l,onSelect:u}){const[i,f]=d.useState(!1),s=Object.values(e.props.choices),y=d.useCallback(()=>Object.values(a).filter(b=>{for(const N of t){if(N.key===e.key)break;if(n[N.key]!==b.attributes[N.key])return!1}return!0}),[a,t,e.key,n]),c=d.useMemo(()=>{const b=y();return s.filter(N=>b.find(R=>R.attributes[e.key]===N.value))},[s,y,e.key]),g=d.useCallback(b=>{const R=y().filter(T=>T.attributes[e.key]===b.value);return R.length?l?R.find(T=>T._status==="active")?"active":"out_of_stock":"active":"inactive"},[y,e.key,l]),k=d.useCallback(b=>n[e.key]===b.value,[n,e.key]),p=d.useCallback(b=>{g(b)!=="inactive"&&(u(e.key,b.value),f(!1))},[e.key,u,g]),r=d.useMemo(()=>{const b=n[e.key];return s.find(R=>R.value===b)?.label??"Select"},[n,e.key,s]),m=()=>React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,e.label,": ",r),React.createElement("ul",{className:"simplify-ul addon-buttons flexify"},c.map(b=>{const N=g(b),R=k(b);return React.createElement("li",{key:b.value,className:`flexify${R?" adb-selected":""}${N!=="active"?" vx-disabled":""}`,onClick:x=>{x.preventDefault(),p(b)}},b.label)}))),E=()=>React.createElement("div",{className:"ts-form-group ts-custom-additions"},React.createElement("label",null,e.label,": ",r),React.createElement("ul",{className:"simplify-ul ts-addition-list flexify"},c.map(b=>{const N=g(b),R=k(b);return React.createElement("li",{key:b.value,className:`flexify${R?" ts-checked":""}${N!=="active"?" vx-disabled":""}`},React.createElement("div",{className:"addition-body",onClick:x=>{x.preventDefault(),p(b)}},React.createElement("label",{className:"container-radio"},React.createElement("input",{type:"radio",checked:R,className:"onoffswitch-checkbox",disabled:!0,hidden:!0,readOnly:!0}),React.createElement("span",{className:"checkmark"})),React.createElement("span",null,b.label)))}))),o=()=>React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,e.label,": ",r),React.createElement("div",{className:"ts-filter"},React.createElement("select",{value:`choice_${n[e.key]}`,onChange:b=>{const N=b.target.value,R=e.props.choices[N];R&&p(R)}},c.map(b=>{const N=g(b);return React.createElement("option",{key:b.value,value:`choice_${b.value}`,disabled:N!=="active"},b.label)})),React.createElement("div",{className:"ts-down-icon"}))),_=()=>React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,e.label,": ",r),React.createElement("ul",{className:"simplify-ul addon-cards flexify"},c.map(b=>{const N=g(b),R=k(b);return React.createElement("li",{key:b.value,className:`flexify${R?" adc-selected":""}${N!=="active"?" vx-disabled":""}`,onClick:x=>{x.preventDefault(),p(b)}},b.image&&React.createElement("img",{src:typeof b.image=="string"?b.image:b.image.url,alt:typeof b.image=="string"?b.label:b.image.alt||b.label,title:typeof b.image=="string"?b.label:b.image.alt||b.label}),React.createElement("div",{className:"addon-details"},React.createElement("span",{className:"adc-title"},b.label),b.subheading&&React.createElement("span",{className:"adc-subtitle"},b.subheading)))}))),h=()=>React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,e.label,": ",r),React.createElement("ul",{className:"simplify-ul addon-colors flexify"},c.map(b=>{const N=g(b),R=k(b);return React.createElement("li",{key:b.value,className:`flexify${R?" color-selected":""}${N!=="active"?" vx-disabled":""}`,style:{"--vx-var-color":b.color||"#ccc"},onClick:x=>{x.preventDefault(),p(b)},title:b.label})}))),w=()=>React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,e.label,": ",r),React.createElement("ul",{className:"simplify-ul addon-images flexify"},c.map(b=>{const N=g(b),R=k(b);return React.createElement("li",{key:b.value,className:`flexify${R?" adm-selected":""}${N!=="active"?" vx-disabled":""}`,onClick:x=>{x.preventDefault(),p(b)}},b.image&&React.createElement("img",{src:typeof b.image=="string"?b.image:b.image.url,alt:typeof b.image=="string"?b.label:b.image.alt||b.label,title:typeof b.image=="string"?b.label:b.image.alt||b.label}))})));switch(e.props?.display_mode||e.display_type){case"buttons":return m();case"radio":return E();case"cards":return _();case"colors":return h();case"images":return w();default:return o()}}function oe({field:e,value:t,onChange:a}){const[n,l]=d.useState(()=>({...e.props.selections})),u=d.useMemo(()=>Object.values(e.props.attributes),[e.props.attributes]),i=e.props.variations,f=e.props.stock?.enabled??!1,s=d.useMemo(()=>t.variation_id?i[t.variation_id]??null:null,[t.variation_id,i]),y=d.useCallback(()=>{if(s)if(f&&s.config.stock.enabled&&!s.config.stock.sold_individually){const h=s.config.stock.quantity;t.quantity>h?a({...t,quantity:h}):t.quantity<1&&a({...t,quantity:1})}else t.quantity!==1&&a({...t,quantity:1})},[s,f,t,a]),c=d.useCallback(()=>{let h=null;const w=Object.values(i).filter(b=>b._status==="active");for(const b of Object.keys(n)){const N=w.filter(R=>{for(const x of Object.keys(n))if(R.attributes[x]!==n[x])return!1;return!0});if(N.length){h=N[0];break}}if(!h&&w.length){h=w[0];const b={};Object.keys(n).forEach(N=>{b[N]=h.attributes[N]}),l(b)}if(h&&(t.variation_id!==h.id&&a({...t,variation_id:h.id}),h.image)){const b=document.getElementById("ts-media-"+h.image.id);b?.parentElement&&(b.parentElement.scrollLeft=b.offsetLeft)}},[i,n,t,a]),g=d.useCallback(()=>{for(const h of Object.values(i))if(h._status==="active"){const w={};Object.keys(n).forEach(b=>{w[b]=h.attributes[b]}),l(w),a({...t,variation_id:h.id});break}},[i,n,t,a]),k=d.useCallback((h,w)=>{l(b=>({...b,[h]:w}))},[]);d.useEffect(()=>{c()},[n]),d.useEffect(()=>{s&&y()},[s]),d.useEffect(()=>{t.variation_id||g()},[]);const p=d.useCallback(()=>{if(!s)return;const h=s.config.stock.quantity;if(typeof t.quantity!="number")a({...t,quantity:1});else{const w=t.quantity+1;a({...t,quantity:w<1?1:Math.min(w,h)})}},[s,t,a]),r=d.useCallback(()=>{typeof t.quantity!="number"?a({...t,quantity:1}):a({...t,quantity:Math.max(t.quantity-1,1)})},[t,a]),m=d.useCallback(h=>{const w=parseInt(h.target.value,10);isNaN(w)||a({...t,quantity:w})},[t,a]),E=d.useCallback(()=>{if(!s)return;const h=s.config.stock.quantity;typeof t.quantity=="number"&&(t.quantity>h?a({...t,quantity:h}):t.quantity<1&&a({...t,quantity:1}))},[s,t,a]),o=s&&f&&s.config.stock.enabled&&!s.config.stock.sold_individually,_=s?.config.stock.quantity??1;return u.length===0?null:React.createElement(React.Fragment,null,u.map(h=>React.createElement(Me,{key:h.key,attribute:h,allAttributes:u,variations:i,selections:n,stockEnabled:f,onSelect:k})),o&&React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,e.props.l10n?.select_quantity||"Select quantity"),React.createElement("div",{className:"ts-stepper-input flexify"},React.createElement("button",{type:"button",className:`ts-stepper-left ts-icon-btn ts-smaller${t.quantity<=1?" vx-disabled":""}`,onClick:h=>{h.preventDefault(),r()}},React.createElement("i",{className:"las la-minus"})),React.createElement("input",{type:"number",value:t.quantity,onChange:m,onBlur:E,className:"ts-input-box"}),React.createElement("button",{type:"button",className:`ts-stepper-right ts-icon-btn ts-smaller${t.quantity>=_?" vx-disabled":""}`,onClick:h=>{h.preventDefault(),p()}},React.createElement("i",{className:"las la-plus"})))))}oe.getPricingSummary=function(e,t){if(!t.variation_id)return null;const a=e.props.variations[t.variation_id];if(!a)return null;const n=a.config.base_price;let l=n.discount_amount!=null?n.discount_amount:n.amount,u=null;(e.props.stock?.enabled??!1)&&a.config.stock.enabled&&!a.config.stock.sold_individually&&(u=t.quantity,l*=t.quantity);const f=[];return Object.keys(a.attributes).forEach(s=>{const y=a.attributes[s],c=e.props.attributes[s];if(c){const g=c.props.choices["choice_"+y];g&&f.push(g.label)}}),{label:f.join(" / "),amount:l,quantity:u}};function $(e){const t=d.useRef(null),a=d.useRef(null),n=d.useRef(e);n.current=e,d.useEffect(()=>{if(!t.current||typeof window.Pikaday>"u")return;const p={field:t.current,bound:n.current.bound??!0,format:n.current.format??"YYYY-MM-DD",minDate:n.current.minDate,maxDate:n.current.maxDate,defaultDate:n.current.defaultDate,setDefaultDate:!!n.current.defaultDate,disableDayFn:n.current.disableDayFn,numberOfMonths:n.current.numberOfMonths??1,showDaysInNextAndPreviousMonths:!0,enableSelectionDaysInNextAndPreviousMonths:!1,firstDay:1,onSelect:r=>{n.current.onSelect?.(r)},onDraw:r=>{n.current.onDraw?.(r)},dayRenderHook:n.current.dayRenderHook};return n.current.container&&(p.container=n.current.container,p.bound=!1),a.current=new window.Pikaday(p),()=>{a.current?.destroy(),a.current=null}},[]),d.useEffect(()=>{a.current&&e.minDate&&a.current.setMinDate(e.minDate)},[e.minDate]),d.useEffect(()=>{a.current&&e.maxDate&&a.current.setMaxDate(e.maxDate)},[e.maxDate]);const l=d.useCallback(p=>{a.current?.setDate(p,!0)},[]),u=d.useCallback(()=>a.current?.getDate()??null,[]),i=d.useCallback(()=>{a.current?.show()},[]),f=d.useCallback(()=>{a.current?.hide()},[]),s=d.useCallback(p=>{a.current?.gotoDate(p)},[]),y=d.useCallback(()=>{a.current?.draw(!0)},[]),c=d.useCallback(p=>{a.current?.setStartRange(p)},[]),g=d.useCallback(p=>{a.current?.setEndRange(p)},[]),k=d.useCallback(()=>a.current?.el??null,[]);return{inputRef:t,pickerRef:a,setDate:l,getDate:u,setStartRange:c,setEndRange:g,show:i,hide:f,gotoDate:s,redraw:y,getPickerElement:k}}function V(e){const t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${a}-${n}`}function C(e){return new Date(e+"T00:00:00")}function Ee(e){return["sun","mon","tue","wed","thu","fri","sat"][e.getDay()]}function Oe(e,t){const a=V(e);return t.includes(a)}function Ae(e,t){const a=Ee(e);return t.includes(a)}function Le(e,t){const a=C(t.date);return e<a}function Ve(e,t,a){if(!a||a.amount<=0)return!1;const n=C(t.date);if(a.unit==="hours"){const[l,u]=t.time.split(":").map(Number);n.setHours(l,u,0,0);const i=a.amount*60*60*1e3;return e.getTime()-n.getTime()<i}else{const l=new Date(n);return l.setDate(l.getDate()+a.amount),e<l}}function Fe(e,t,a){const n=C(t.date),l=new Date(n);return l.setDate(l.getDate()+a),e>l}function je(e,t){const{excluded_days:a=[],excluded_weekdays:n=[],availability:l,today:u}=t.props;return!(Oe(e,a)||Ae(e,n)||u&&(Le(e,u)||Ve(e,u,l?.buffer)||l?.max_days&&Fe(e,u,l.max_days)))}function Qe(e,t){const{timeslots:a,quantity_per_slot:n=1,booked_slot_counts:l={}}=t.props;if(!a?.groups)return[];const u=Ee(e),i=V(e),f=[];for(const s of a.groups)if(s.days.includes(u))for(const y of s.slots){const c=`${y.from}-${y.to}`,g=`${i} ${c}`,k=l[g]||0,p=Math.max(0,n-k);f.push({...y,key:c,label:`${y.from} - ${y.to}`,available:p,booked:k,isAvailable:p>0})}return f}function U(e,t,a){const n=C(e),u=C(t).getTime()-n.getTime(),i=Math.ceil(u/(1e3*60*60*24));return a==="nights"?i:i+1}function He(e,t,a){const{count_mode:n="nights",date_range:l,l10n:u}=a.props,i=U(e,t,n);if(!l)return{valid:!0,length:i};const{min_length:f=1,max_length:s=365}=l;if(i<f||i>s){const y=n==="nights"?u?.nights_range_error??"Min @minlength, max @maxlength nights":u?.days_range_error??"Min @minlength, max @maxlength days";return{valid:!1,length:i,error:y.replace("@minlength",String(f)).replace("@maxlength",String(s))}}return{valid:!0,length:i}}function ie(e,t,a){return t==="nights"?e===1?a?.one_night??"1 night":(a?.multiple_nights??"@count nights").replace("@count",String(e)):e===1?a?.one_day??"1 day":(a?.multiple_days??"@count days").replace("@count",String(e))}function ue(e){const{today:t,availability:a}=e.props;if(!t)return new Date;const n=C(t.date);if(a?.buffer)if(a.buffer.unit==="days")n.setDate(n.getDate()+a.buffer.amount);else{const[l]=t.time.split(":").map(Number);l+a.buffer.amount>=24&&n.setDate(n.getDate()+1)}return n}function de(e){const{today:t,availability:a}=e.props;if(!t){const l=new Date;return l.setFullYear(l.getFullYear()+1),l}const n=C(t.date);return n.setDate(n.getDate()+(a?.max_days??365)),n}function me(e){return t=>!je(t,e)}function P(e){return typeof window<"u"&&window.Voxel?.helpers?.currencyFormat?window.Voxel.helpers.currencyFormat(e):new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}function Ue(e){if(typeof window<"u"&&window.Voxel?.helpers?.dateFormatYmd)return window.Voxel.helpers.dateFormatYmd(e);const t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${a}-${n}`}function ke(e,t){const a=t.props?.custom_prices;if(!a?.enabled||!a.list?.length)return null;const n=Ue(e);return a.list.find(u=>{for(const i of u.conditions)if(i.type==="date"){if(i.date===n)return!0}else if(i.type==="date_range"){if(i.range){const f=new Date(i.range.from+"T00:00:00Z"),s=new Date(i.range.to+"T00:00:00Z"),y=new Date(n+"T00:00:00Z");if(f<=y&&y<=s)return!0}}else if(i.type==="day_of_week"){const f=new Date(n+"T00:00:00Z"),y=["sun","mon","tue","wed","thu","fri","sat"][f.getDay()];if(i.days?.includes(y))return!0}return!1})??null}function pe(e,t){const a=t.props?.minimum_price??0;if(!t.props?.custom_prices?.enabled||e===null)return a;const n=ke(e,t);return n===null?a:n.minimum_price??a}function Ze(e){const t=e.props?.base_price;if(!t?.enabled)return null;let a=t.discount_amount??t.amount;if(e.settings?.product_mode==="regular"){const n=e.props?.today?.date;if(n){const l=ke(new Date(n+"T00:00:00Z"),e);l?.prices?.base_price&&(a=l.prices.base_price.discount_amount??l.prices.base_price.amount)}}return{label:"Price",amount:a}}function Ye(e,t){return e.props?.fields?.["form-quantity"]&&t>1?t:1}function fe(e){return e.reduce((t,a)=>t+(a.amount??0),0)}function ze(e){const{config:t,quantity:a,bookingValue:n,getAddonsPricingSummary:l,getVariationsPricingSummary:u}=e,i=d.useCallback(()=>{if(!t)return{visible_items:[],total:0,formatted_total:P(0)};const c=[],g=Ze(t),k=l?.()??null,p=Ye(t,a);g!==null&&c.push({key:"base_price",...g,hidden:k===null||k.length===0}),k!==null&&k.forEach((o,_)=>{c.push({key:`addon_${_}`,...o})}),p>1&&c.push({key:"quantity",label:t.l10n?.quantity??"Quantity",amount:0,value:p});let r=fe(c);r*=p;const m={key:"total",label:"Total",price:r,formatted_price:P(r)},E=c.filter(o=>!o.hidden).map(o=>({key:o.key,label:o.label,price:o.amount,formatted_price:o.value!==void 0?`× ${o.value}`:P(o.amount)}));return E.push(m),{visible_items:E,total:r,formatted_total:P(r)}},[t,a,l]),f=d.useCallback(()=>{if(!t)return{visible_items:[],total:0,formatted_total:P(0)};const c=[],g=u?.()??null;g!==null&&(c.push({key:"variation",label:g.label,amount:g.amount}),g.quantity&&g.quantity>1&&c.push({key:"quantity",label:t.l10n?.quantity??"Quantity",amount:0,value:g.quantity}));const k=fe(c),p={key:"total",label:"Total",price:k,formatted_price:P(k)},r=c.filter(m=>!m.hidden).map(m=>({key:m.key,label:m.label,price:m.amount,formatted_price:m.value!==void 0?`× ${m.value}`:P(m.amount)}));return r.push(p),{visible_items:r,total:k,formatted_total:P(k)}},[t,u]),s=d.useCallback(()=>{if(!t)return{visible_items:[],total:0,formatted_total:P(0)};const c=[],g=t.props?.fields?.["form-booking"],k=g?G.getPricingSummary(g,n,t):null,p=l?.()??null;k!==null&&(c.push({key:"booking",label:k.label,amount:k.amount,hidden:k.amount===0}),p!==null&&p.forEach((o,_)=>{c.push({key:`addon_${_}`,...o})}));const r=fe(c),m={key:"total",label:"Total",price:r,formatted_price:P(r)},E=c.filter(o=>!o.hidden).map(o=>({key:o.key,label:o.label,price:o.amount,formatted_price:P(o.amount)}));return(r>0||E.length>0)&&E.push(m),{visible_items:E,total:r,formatted_total:P(r)}},[t,n,l]);return{summary:d.useMemo(()=>{if(!t)return{visible_items:[],total:0,formatted_total:P(0)};switch(t.settings?.product_mode??"regular"){case"regular":return i();case"variable":return f();case"booking":return s();default:return{visible_items:[],total:0,formatted_total:P(0)}}},[t,i,f,s]),formatPrice:P}}const he=1440*60*1e3;function We(e){if(e)return(t,a)=>{if(t.isDisabled)return;const n=new Date(t.year,t.month,t.day),l=pe(n,e);if(l>0){const u=`<div class="pika-tooltip">${P(l)}</div>`;a.beforeCloseTd+=u}}}function _e({field:e,value:t,onChange:a,initialAvailability:n,config:l}){const[u,i]=d.useState("start"),[f,s]=d.useState(null),[y,c]=d.useState(!1),[g,k]=d.useState(null),p=d.useRef(null),r=d.useRef(null),{count_mode:m="nights",l10n:E}=e.props;d.useEffect(()=>{y||n?.start&&(t.start_date||t.end_date||(c(!0),a({...t,start_date:n.start,end_date:n.end||n.start})))},[n,y,t,a]);const o=d.useMemo(()=>ue(e),[e]),_=d.useMemo(()=>de(e),[e]),h=d.useMemo(()=>me(e),[e]),w=d.useMemo(()=>!t.start_date||!t.end_date?null:He(t.start_date,t.end_date,e),[t.start_date,t.end_date,e]);d.useEffect(()=>{w&&!w.valid?s(w.error??null):s(null)},[w]);const b=d.useCallback(S=>{const D=V(S);t.end_date&&D>=t.end_date?a({...t,start_date:D,end_date:null}):a({...t,start_date:D}),i("end")},[t,a]),N=d.useCallback(S=>{const D=V(S);t.start_date&&D<=t.start_date?a({...t,start_date:D,end_date:t.start_date}):a({...t,end_date:D}),i("start")},[t,a]),R=d.useCallback((S,D)=>{if(!t.start_date||t.end_date||!D)return;const F=S.target,A=F.tagName==="TD"?F:F.closest("td");if(!A||A.classList.contains("is-empty")||A.classList.contains("is-disabled"))return;const j=A.querySelector(".pika-button");if(!j||j.disabled)return;A.classList.add("is-endrange");const q=parseInt(j.getAttribute("data-pika-year")??"0",10),B=parseInt(j.getAttribute("data-pika-month")??"0",10),Q=parseInt(j.getAttribute("data-pika-day")??"0",10),z=new Date(q,B,Q);k(new Date(z.getTime()));const te=C(t.start_date);let H=new Date(z.getTime()-he);for(;H>te;){const ge=[`.pika-button[data-pika-year="${H.getFullYear()}"]`,`[data-pika-month="${H.getMonth()}"]`,`[data-pika-day="${H.getDate()}"]`].join(""),De=D.querySelector(ge);De?.parentElement&&De.parentElement.classList.add("is-inrange"),H.setTime(H.getTime()-he)}A.addEventListener("mouseleave",()=>{Array.from(D.querySelectorAll("td.is-inrange:not(.is-disabled)")).forEach(ge=>ge.classList.remove("is-inrange")),A.classList.remove("is-endrange"),k(null)},{once:!0})},[t.start_date,t.end_date]),x=d.useMemo(()=>We(l??null),[l]),T=d.useCallback(S=>{S.el.addEventListener("mouseover",D=>R(D,S.el))},[R]),v=d.useCallback(S=>{S.el.addEventListener("mouseover",D=>R(D,S.el))},[R]),I=$({onSelect:b,onDraw:T,minDate:o,maxDate:_,defaultDate:t.start_date?C(t.start_date):void 0,disableDayFn:h,dayRenderHook:x,container:p.current,bound:!1,startRange:t.start_date?C(t.start_date):null,endRange:t.end_date?C(t.end_date):null}),M=d.useMemo(()=>{if(!t.start_date)return o;const S=C(t.start_date);return S.setDate(S.getDate()+1),S>o?S:o},[t.start_date,o]),O=$({onSelect:N,onDraw:v,minDate:M,maxDate:_,defaultDate:t.end_date?C(t.end_date):void 0,disableDayFn:h,dayRenderHook:x,container:r.current,bound:!1,startRange:t.start_date?C(t.start_date):null,endRange:t.end_date?C(t.end_date):null});d.useEffect(()=>{if(t.start_date){const S=C(t.start_date);I.setDate(t.start_date),I.setStartRange(S),O.setStartRange(S)}else I.setStartRange(null),O.setStartRange(null)},[t.start_date]),d.useEffect(()=>{if(t.end_date){const S=C(t.end_date);O.setDate(t.end_date),I.setEndRange(S),O.setEndRange(S)}else I.setEndRange(null),O.setEndRange(null)},[t.end_date]),d.useEffect(()=>{k(null)},[t.start_date]);const X=E?.select_start_and_end_date??"Select start date",L=E?.select_end_date??"Select end date",Y=m==="nights"?E?.select_nights??"Select nights":E?.select_days??"Select days",K=d.useMemo(()=>{if(!t.start_date)return Y;if(t.end_date){const S=U(t.start_date,t.end_date,m),D=ie(S,m,E);return`${t.start_date} - ${t.end_date} (${D})`}if(g){const S=V(g),D=U(t.start_date,S,m),F=ie(D,m,E);return`${t.start_date} - ${S} (${F})`}return`${t.start_date} - ${E?.select_end_date??"..."}`},[t.start_date,t.end_date,g,m,E,Y]);return React.createElement("div",{className:"ts-form-group ts-booking-field ts-booking-date-range"},React.createElement("label",null,m==="nights"?"Dates":"Days"),React.createElement("div",{className:`ts-filter ts-popup-target${t.start_date?" ts-filled":""}`},React.createElement("span",{className:"ts-filter-text"},K),React.createElement("div",{className:"ts-down-icon"})),React.createElement("div",{className:"ts-booking-calendars"},React.createElement("div",{className:"ts-booking-calendar ts-booking-start"},React.createElement("div",{className:"ts-calendar-label"},X),React.createElement("div",{ref:p,className:`ts-calendar-container${u==="start"?" ts-active":""}`},React.createElement("input",{ref:I.inputRef,type:"hidden",readOnly:!0}))),React.createElement("div",{className:"ts-booking-calendar ts-booking-end"},React.createElement("div",{className:"ts-calendar-label"},L),React.createElement("div",{ref:r,className:`ts-calendar-container${u==="end"?" ts-active":""}`},React.createElement("input",{ref:O.inputRef,type:"hidden",readOnly:!0})))),f&&React.createElement("div",{className:"ts-field-error"},React.createElement("span",null,f)))}_e.getSelectedRangeLength=function(e,t){return!e.start_date||!e.end_date?0:U(e.start_date,e.end_date,t.props.count_mode??"nights")};function Ge(e,t){if(!e||!t)return;e.querySelectorAll(".pika-button").forEach(n=>{const l=n,u=l.dataset,i=parseInt(u.pikaYear??"0",10),f=parseInt(u.pikaMonth??"0",10),s=parseInt(u.pikaDay??"0",10);if(i&&s){const y=new Date(i,f,s),c=pe(y,t);c>0&&l.setAttribute("title",P(c))}})}function Je({field:e,value:t,onChange:a,initialAvailability:n,config:l}){const u=d.useRef(null),[i,f]=d.useState(!1),{l10n:s}=e.props;d.useEffect(()=>{i||n?.start&&(t.date||(f(!0),a({...t,date:n.start})))},[n,i,t,a]);const y=d.useMemo(()=>ue(e),[e]),c=d.useMemo(()=>de(e),[e]),g=d.useMemo(()=>me(e),[e]),k=d.useCallback(o=>{a({...t,date:V(o)})},[t,a]),p=d.useCallback(()=>{Ge(u.current,l??null)},[l]),r=$({onSelect:k,onDraw:p,minDate:y,maxDate:c,defaultDate:t.date?C(t.date):void 0,disableDayFn:g,container:u.current,bound:!1});d.useEffect(()=>{t.date&&r.setDate(t.date)},[t.date]);const m=s?.select_date??"Select date",E=t.date??m;return React.createElement("div",{className:"ts-form-group ts-booking-field ts-booking-single-day"},React.createElement("label",null,"Date"),React.createElement("div",{className:`ts-filter ts-popup-target${t.date?" ts-filled":""}`},React.createElement("span",{className:"ts-filter-text"},E),React.createElement("div",{className:"ts-down-icon"})),React.createElement("div",{className:"ts-booking-calendars"},React.createElement("div",{className:"ts-booking-calendar"},React.createElement("div",{ref:u,className:"ts-calendar-container ts-active"},React.createElement("input",{ref:r.inputRef,type:"hidden",readOnly:!0})))))}function Xe(e,t){if(!e||!t)return;e.querySelectorAll(".pika-button").forEach(n=>{const l=n,u=l.dataset,i=parseInt(u.pikaYear??"0",10),f=parseInt(u.pikaMonth??"0",10),s=parseInt(u.pikaDay??"0",10);if(i&&s){const y=new Date(i,f,s),c=pe(y,t);c>0&&l.setAttribute("title",P(c))}})}function Ke({field:e,value:t,onChange:a,initialAvailability:n,config:l}){const u=d.useRef(null),[i,f]=d.useState(!1),[s,y]=d.useState(!1),{l10n:c,quantity_per_slot:g=1}=e.props;d.useEffect(()=>{s||n?.start&&(t.date||(y(!0),a({...t,date:n.start})))},[n,s,t,a]);const k=d.useMemo(()=>ue(e),[e]),p=d.useMemo(()=>de(e),[e]),r=d.useMemo(()=>me(e),[e]),m=d.useMemo(()=>{if(!t.date)return[];const v=C(t.date);return Qe(v,e)},[t.date,e]),E=d.useCallback(v=>{const I=V(v);a({...t,date:I,slot:null}),f(!0)},[t,a]),o=d.useCallback(v=>{v.isAvailable&&(a({...t,slot:v.key}),f(!1))},[t,a]),_=d.useCallback(()=>{Xe(u.current,l??null)},[l]),h=$({onSelect:E,onDraw:_,minDate:k,maxDate:p,defaultDate:t.date?C(t.date):void 0,disableDayFn:r,container:u.current,bound:!1});d.useEffect(()=>{t.date&&h.setDate(t.date)},[t.date]);const w=c?.select_date??"Select date",b=c?.select_timeslot??"Select time",N=c?.no_slots_available??"No time slots available",R=c?.amount_available??"@count available",x=t.date??w,T=d.useMemo(()=>t.slot?m.find(I=>I.key===t.slot)?.label??t.slot:b,[t.slot,m,b]);return React.createElement("div",{className:"ts-form-group ts-booking-field ts-booking-timeslots"},React.createElement("div",{className:"ts-booking-date-section"},React.createElement("label",null,"Date"),React.createElement("div",{className:`ts-filter ts-popup-target${t.date?" ts-filled":""}`},React.createElement("span",{className:"ts-filter-text"},x),React.createElement("div",{className:"ts-down-icon"})),React.createElement("div",{className:"ts-booking-calendars"},React.createElement("div",{className:"ts-booking-calendar"},React.createElement("div",{ref:u,className:"ts-calendar-container ts-active"},React.createElement("input",{ref:h.inputRef,type:"hidden",readOnly:!0}))))),t.date&&React.createElement("div",{className:"ts-booking-slots-section"},React.createElement("label",null,"Time"),React.createElement("div",{className:`ts-filter ts-popup-target${t.slot?" ts-filled":""}`,onClick:()=>f(!i),role:"button",tabIndex:0,onKeyDown:v=>v.key==="Enter"&&f(!i)},React.createElement("span",{className:"ts-filter-text"},T),React.createElement("div",{className:"ts-down-icon"})),i&&React.createElement("div",{className:"ts-popup-list ts-timeslot-list"},m.length===0?React.createElement("div",{className:"ts-no-slots"},React.createElement("span",null,N)):React.createElement("ul",{className:"simplify-ul ts-form-options"},m.map(v=>React.createElement("li",{key:v.key,className:`ts-option${t.slot===v.key?" ts-selected":""}${v.isAvailable?"":" ts-unavailable"}`,onClick:()=>o(v),role:"option","aria-selected":t.slot===v.key,"aria-disabled":!v.isAvailable},React.createElement("span",{className:"ts-slot-time"},v.label),g>1&&React.createElement("span",{className:"ts-slot-availability"},v.isAvailable?R.replace("@count",String(v.available)):"Fully booked")))))))}function G({field:e,value:t,onChange:a,config:n,initialAvailability:l}){switch(e.props.mode){case"date_range":return React.createElement(_e,{field:e,value:t,onChange:a,initialAvailability:l,config:n});case"single_day":return React.createElement(Je,{field:e,value:t,onChange:a,initialAvailability:l,config:n});case"timeslots":return React.createElement(Ke,{field:e,value:t,onChange:a,initialAvailability:l,config:n});default:return null}}G.getPricingSummary=function(e,t,a){const{mode:n,count_mode:l="nights",l10n:u}=e.props,i=a?.props?.base_price;if(!i?.enabled)return null;const f=i.discount_amount??i.amount;let s=f,y=u?.booking_price??"Booking";if(n==="date_range"){if(!t.start_date||!t.end_date)return null;const c=U(t.start_date,t.end_date,l);if(c<1)return null;s=f*c,y=ie(c,l,u)}else if(n==="single_day"){if(!t.date)return null}else if(n==="timeslots"&&(!t.date||!t.slot))return null;return{label:y,amount:s,hidden:s===0}},G.isComplete=function(e,t){const{mode:a}=e.props;switch(a){case"date_range":return!!t.start_date&&!!t.end_date;case"single_day":return!!t.date;case"timeslots":return!!t.date&&!!t.slot;default:return!1}},G.getSelectedRangeLength=function(e,t){return e.props.mode!=="date_range"?1:!t.start_date||!t.end_date?0:U(t.start_date,t.end_date,e.props.count_mode??"nights")};function we(e){return e?.value?e.library==="line-awesome"||e.value.startsWith("la-")?React.createElement("i",{className:`las ${e.value}`}):React.createElement("i",{className:`las ${e.value}`}):null}function $e({dataInput:e,value:t,onChange:a}){return React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,e.label),React.createElement("div",{className:"input-container"},React.createElement("input",{type:"text",className:"ts-filter",value:t||"",onChange:n=>a(n.target.value),placeholder:e.props.placeholder,minLength:e.props.minlength,maxLength:e.props.maxlength})))}function et({dataInput:e,value:t,onChange:a}){return React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,e.label),React.createElement("div",{className:"input-container"},React.createElement("textarea",{className:"ts-filter min-scroll",value:t||"",onChange:n=>a(n.target.value),placeholder:e.props.placeholder,minLength:e.props.minlength,maxLength:e.props.maxlength})))}function tt({dataInput:e,value:t,onChange:a}){return React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,e.label),React.createElement("div",{className:"input-container"},React.createElement("input",{type:"email",className:"ts-filter",value:t||"",onChange:n=>a(n.target.value),placeholder:e.props.placeholder})))}function at({dataInput:e,value:t,onChange:a}){return React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,e.label),React.createElement("div",{className:"input-container"},React.createElement("input",{type:"tel",className:"ts-filter",value:t||"",onChange:n=>a(n.target.value),placeholder:e.props.placeholder})))}function nt({dataInput:e,value:t,onChange:a}){return React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,e.label),React.createElement("div",{className:"input-container"},React.createElement("input",{type:"url",className:"ts-filter",value:t||"",onChange:n=>a(n.target.value),placeholder:e.props.placeholder})))}function st({dataInput:e,value:t,onChange:a}){return React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,e.label),React.createElement("div",{className:"input-container"},React.createElement("input",{type:"date",className:"ts-filter",value:t||"",onChange:n=>a(n.target.value),placeholder:e.props.placeholder,style:{display:"block"}})))}function rt({dataInput:e,value:t,onChange:a}){return React.createElement("div",{className:"ts-form-group switcher-label"},React.createElement("label",null,React.createElement("div",{className:"switch-slider"},React.createElement("div",{className:"onoffswitch"},React.createElement("input",{type:"checkbox",className:"onoffswitch-checkbox",checked:t||!1,onChange:n=>a(n.target.checked)}),React.createElement("label",{className:"onoffswitch-label",onClick:n=>{n.preventDefault(),a(!t)}}))),e.label))}function lt({dataInput:e,value:t,onChange:a,icons:n}){const{min:l=0,max:u=999999,step:i=1,display_mode:f="default"}=e.props,s=d.useCallback(k=>k===null?null:k<l?l:k>u?u:k,[l,u]),y=d.useCallback(()=>{const p=s((typeof t=="number"?t:l)+i);a(p)},[t,l,i,s,a]),c=d.useCallback(()=>{const p=s((typeof t=="number"?t:l)-i);a(p)},[t,l,i,s,a]),g=d.useCallback(k=>{const p=k.target.value===""?null:parseInt(k.target.value,10);a(s(p))},[s,a]);return f==="stepper"?React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,e.label),React.createElement("div",{className:"ts-stepper-input flexify"},React.createElement("button",{className:`ts-stepper-left ts-icon-btn${(t??0)<=l?" vx-disabled":""}`,onClick:k=>{k.preventDefault(),c()},type:"button"},we(n?.minusIcon)||React.createElement("i",{className:"las la-minus"})),React.createElement("input",{type:"number",className:"ts-input-box",value:t??"",onChange:g,placeholder:e.props.placeholder,step:i}),React.createElement("button",{className:`ts-stepper-right ts-icon-btn${(t??0)>=u?" vx-disabled":""}`,onClick:k=>{k.preventDefault(),y()},type:"button"},we(n?.plusIcon)||React.createElement("i",{className:"las la-plus"})))):React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,e.label),React.createElement("div",{className:"input-container"},React.createElement("input",{type:"number",className:"ts-filter",value:t??"",onChange:g,placeholder:e.props.placeholder,min:l,max:u,step:i})))}function ct({dataInput:e,value:t,onChange:a}){const{display_mode:n="default",choices:l={},placeholder:u,l10n:i}=e.props,f=d.useMemo(()=>Object.values(l),[l]),s=d.useCallback(c=>t===c.value,[t]),y=d.useCallback(c=>{t===c.value?a(null):a(c.value)},[t,a]);return n==="buttons"?React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,e.label),React.createElement("ul",{className:"simplify-ul addon-buttons flexify"},f.map(c=>React.createElement("li",{key:c.value,className:`flexify${s(c)?" adb-selected":""}`,onClick:g=>{g.preventDefault(),y(c)}},c.label)))):n==="radio"?React.createElement("div",{className:"ts-form-group inline-terms-wrapper ts-inline-filter"},React.createElement("label",null,e.label),React.createElement("ul",{className:"simplify-ul ts-addition-list flexify"},f.map(c=>React.createElement("li",{key:c.value,className:`flexify${s(c)?" ts-checked":""}`},React.createElement("div",{className:"addition-body",onClick:g=>{g.preventDefault(),y(c)}},React.createElement("label",{className:"container-radio"},React.createElement("input",{type:"radio",value:c.value,checked:s(c),className:"onoffswitch-checkbox",disabled:!0,hidden:!0,readOnly:!0}),React.createElement("span",{className:"checkmark"})),React.createElement("span",null,c.label)))))):React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,e.label),React.createElement("div",{className:"ts-filter"},React.createElement("select",{value:t??"",onChange:c=>a(c.target.value||null)},React.createElement("option",{value:""},u||i?.default_placeholder||"Select..."),f.map(c=>React.createElement("option",{key:c.value,value:c.value},c.label))),React.createElement("div",{className:"ts-down-icon"})))}function ot({dataInput:e,value:t,onChange:a}){const{display_mode:n="default",choices:l={}}=e.props,u=d.useMemo(()=>Object.values(l),[l]),i=d.useCallback(s=>(t||[]).includes(s.value),[t]),f=d.useCallback(s=>{const y=t||[];y.includes(s.value)?a(y.filter(c=>c!==s.value)):a([...y,s.value])},[t,a]);return n==="buttons"?React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,e.label),React.createElement("ul",{className:"simplify-ul addon-buttons flexify"},u.map(s=>React.createElement("li",{key:s.value,className:`flexify${i(s)?" adb-selected":""}`,onClick:y=>{y.preventDefault(),f(s)}},s.label)))):React.createElement("div",{className:"ts-form-group ts-custom-additions"},React.createElement("label",null,e.label),React.createElement("ul",{className:"simplify-ul ts-addition-list flexify"},u.map(s=>React.createElement("li",{key:s.value,className:`flexify${i(s)?" ts-checked":""}`},React.createElement("div",{className:"addition-body",onClick:y=>{y.preventDefault(),f(s)}},React.createElement("label",{className:"container-checkbox"},React.createElement("input",{type:"checkbox",checked:i(s),className:"onoffswitch-checkbox",disabled:!0,hidden:!0,readOnly:!0}),React.createElement("span",{className:"checkmark"})),React.createElement("span",null,s.label))))))}function it({field:e,values:t,onValueChange:a,icons:n}){const l=d.useMemo(()=>Object.values(e.props.data_inputs||{}),[e.props.data_inputs]);return l.length?React.createElement(React.Fragment,null,l.map(u=>{const i=u.key,f=t[i];switch(u.type){case"text":return React.createElement($e,{key:i,dataInput:u,value:f,onChange:s=>a(i,s)});case"textarea":return React.createElement(et,{key:i,dataInput:u,value:f,onChange:s=>a(i,s)});case"email":return React.createElement(tt,{key:i,dataInput:u,value:f,onChange:s=>a(i,s)});case"phone":return React.createElement(at,{key:i,dataInput:u,value:f,onChange:s=>a(i,s)});case"url":return React.createElement(nt,{key:i,dataInput:u,value:f,onChange:s=>a(i,s)});case"date":return React.createElement(st,{key:i,dataInput:u,value:f,onChange:s=>a(i,s)});case"switcher":return React.createElement(rt,{key:i,dataInput:u,value:f,onChange:s=>a(i,s)});case"number":return React.createElement(lt,{key:i,dataInput:u,value:f,onChange:s=>a(i,s),icons:n});case"select":return React.createElement(ct,{key:i,dataInput:u,value:f,onChange:s=>a(i,s)});case"multiselect":return React.createElement(ot,{key:i,dataInput:u,value:f,onChange:s=>a(i,s)});default:return null}})):null}const Ne="voxel:guest_cart",ut="voxel:direct_cart";function ye(e,t){return`${window.Voxel_Config?.ajax_url??"/?vx=1"}&action=${e}&_wpnonce=${t}`}function dt(){return window.Voxel_Config?.is_logged_in??!1}function mt(){return typeof localStorage>"u"?null:localStorage.getItem(Ne)}function pt(e){typeof localStorage>"u"||localStorage.setItem(Ne,JSON.stringify(e))}function ft(e,t){typeof localStorage>"u"||localStorage.setItem(ut,JSON.stringify({[e]:t}))}function J(e,t="info",a,n){window.Voxel?.alert?window.Voxel.alert(e,t,a,n):console.log(`[${t.toUpperCase()}]`,e)}function yt(e){const t=[];typeof document<"u"&&document.querySelector(".ts-popup-cart > a")&&t.push({label:e.view_cart??"View Cart",link:"#",onClick:a=>{a.preventDefault(),window.Voxel?.openCart&&window.Voxel.openCart(),a.target.closest(".ts-notice")?.querySelector(".close-alert")?.click()}}),J(e.added_to_cart??"Added to cart","success",t,4e3)}function bt(e){window.jQuery&&window.jQuery(document).trigger("voxel:added_cart_item",e)}function Re(e,t,a,n,l,u={}){const i=e.settings?.product_mode??"regular",f={post_id:0};return Object.keys(t).length>0&&(f.addons=t),i==="regular"?f.stock={quantity:a}:i==="variable"?f.variations=n:i==="booking"&&(f.booking=l),Object.keys(u).length>0&&(f.data_inputs=u),f}async function be(e,t){if(window.jQuery?.post)return new Promise(n=>{window.jQuery.post(e,t).always(l=>{n(l)})});const a=new FormData;Object.entries(t).forEach(([n,l])=>{a.append(n,l)});try{return await(await fetch(e,{method:"POST",body:a})).json()}catch{return{success:!1,message:window.Voxel_Config?.l10n?.ajaxError??"Request failed"}}}function gt(e){const{config:t,addonValues:a,quantity:n,variationsValue:l,bookingValue:u,dataInputValues:i}=e,[f,s]=d.useState(!1),[y,c]=d.useState(null),g=d.useCallback(async()=>{if(!t)return c("Product configuration not available"),!1;s(!0),c(null);try{const p=t.settings?.cart_nonce??t.nonce,r=Re(t,a,n,l,u,i),m={...t.value??{},...r};let E;if(dt()){const o=ye("products.add_to_cart",p);E=await be(o,{item:JSON.stringify(m)})}else{const o=ye("products.add_to_guest_cart",p);E=await be(o,{item:JSON.stringify(m),guest_cart:mt()??""}),E.success&&E.guest_cart&&pt(E.guest_cart)}if(E.success)return bt(E.item),yt({added_to_cart:t.l10n?.added_to_cart,view_cart:t.l10n?.view_cart}),!0;{const o=E.message??"Failed to add to cart";return c(o),J(o,"error"),!1}}catch(p){const r=p instanceof Error?p.message:"Failed to add to cart";return c(r),J(r,"error"),!1}finally{s(!1)}},[t,a,n,l,u,i]),k=d.useCallback(async()=>{if(!t)return c("Product configuration not available"),!1;s(!0),c(null);try{const p=t.settings?.cart_nonce??t.nonce,r=Re(t,a,n,l,u,i),m={...t.value??{},...r},E=ye("products.get_direct_cart",p),o=await be(E,{item:JSON.stringify(m)});if(o.success&&o.item&&o.checkout_link)return ft(o.item.key,o.item.value),window.location.href=o.checkout_link,!0;{const _=o.message??"Failed to proceed to checkout";return c(_),J(_,"error"),!1}}catch(p){const r=p instanceof Error?p.message:"Failed to proceed to checkout";return c(r),J(r,"error"),!1}finally{s(!1)}},[t,a,n,l,u,i]);return{isProcessing:f,addToCart:g,directCheckout:k,error:y}}const ve={active:!1,element:null,choice:null,addonKey:null};function Et(e){const{config:t,addonValues:a,onAddonValueChange:n}=e,[l,u]=d.useState(ve),i=d.useRef([]),f=d.useCallback(g=>{try{return JSON.parse(atob(g))}catch{return null}},[]),s=d.useCallback((g,k,p,r)=>{const m=g.parentElement;m&&(k?(g.classList.add("active"),r?m.dataset.tooltip=r:delete m.dataset.tooltip):(g.classList.remove("active"),p?m.dataset.tooltip=p:delete m.dataset.tooltip))},[]),y=d.useCallback(()=>{u(ve)},[]),c=d.useCallback(g=>{if(!l.active||!l.addonKey||!l.choice)return;const k=l.addonKey,p=l.choice.value,r=a[k];if(!r)return;const m=t?.props?.fields?.["form-addons"]?.props?.addons?.[k];if(m){if(m.type==="custom-multiselect"){const E=r.selected||[],o=E.findIndex(_=>_.item===p);if(o!==-1){const _=[...E];_[o]={..._[o],quantity:g},n(k,{...r,selected:_})}}else if(m.type==="custom-select"){const E=r.selected;E.item===p&&n(k,{...r,selected:{...E,quantity:g}})}y()}},[l,a,t,n,y]);return d.useEffect(()=>{if(!t)return;i.current.forEach(p=>p()),i.current=[];const g=t.props?.fields?.["form-addons"]?.props?.addons;return g?(document.querySelectorAll(".ts-use-addition").forEach(p=>{const r=p.dataset.id;if(!r)return;const m=f(r);if(!m)return;const E=g[m.addon],o=E?.props?.choices?.[m.choice];if(!E||!o)return;const _=p.parentElement,h=_?.dataset.tooltipDefault||null,w=_?.dataset.tooltipActive||null;if(E._has_external_handler=!0,E.type==="custom-multiselect"){const b=x=>{x.preventDefault();const T=a[m.addon],v=T?.selected||[],I=v.findIndex(M=>M.item===m.choice);if(I===-1){const M=[...v,{item:m.choice,quantity:o.props?.quantity?.min??1}];n(m.addon,{...T,selected:M}),o.props?.quantity?.enabled&&u({active:!0,element:p,choice:o,addonKey:m.addon})}else{const M=v.filter((O,X)=>X!==I);n(m.addon,{...T,selected:M})}};p.addEventListener("click",b),i.current.push(()=>p.removeEventListener("click",b));const R=a[m.addon]?.selected?.some(x=>x.item===m.choice)??!1;s(p,R,h,w)}else if(E.type==="custom-select"){const b=x=>{x.preventDefault();const T=a[m.addon];T?.selected?.item!==m.choice?(n(m.addon,{...T,selected:{item:m.choice,quantity:o.props?.quantity?.min??1}}),o.props?.quantity?.enabled&&u({active:!0,element:p,choice:o,addonKey:m.addon})):n(m.addon,{...T,selected:{item:null,quantity:1}})};p.addEventListener("click",b),i.current.push(()=>p.removeEventListener("click",b));const R=a[m.addon]?.selected?.item===m.choice;s(p,R,h,w)}}),()=>{i.current.forEach(p=>p()),i.current=[]}):void 0},[t,f,s]),d.useEffect(()=>{if(!t)return;const g=t.props?.fields?.["form-addons"]?.props?.addons;if(!g)return;document.querySelectorAll(".ts-use-addition").forEach(p=>{const r=p.dataset.id;if(!r)return;const m=f(r);if(!m)return;const E=g[m.addon];if(!E)return;const o=p.parentElement,_=o?.dataset.tooltipDefault||null,h=o?.dataset.tooltipActive||null;if(E.type==="custom-multiselect"){const b=a[m.addon]?.selected?.some(N=>N.item===m.choice)??!1;s(p,b,_,h)}else if(E.type==="custom-select"){const b=a[m.addon]?.selected?.item===m.choice;s(p,b,_,h)}})},[t,a,f,s]),{externalChoice:l,closeExternalChoice:y,updateExternalChoiceQuantity:c}}function Se(e){return e?.value?e.library==="line-awesome"||e.value.startsWith("la-")?React.createElement("i",{className:`las ${e.value}`}):React.createElement("i",{className:`las ${e.value}`}):null}function kt({active:e,element:t,choice:a,onClose:n,onConfirm:l,icons:u}){const i=d.useRef(null),[f,s]=d.useState(1),y=a?.props?.quantity?.min??1,c=a?.props?.quantity?.max??999;d.useEffect(()=>{e&&s(y)},[e,y]),d.useEffect(()=>{if(!e||!t||!i.current)return;const r=i.current,m=t.getBoundingClientRect(),E=r.getBoundingClientRect();let o=m.bottom+window.scrollY+8,_=m.left+window.scrollX+m.width/2-E.width/2;const h=window.innerWidth,w=window.innerHeight;_<8&&(_=8),_+E.width>h-8&&(_=h-E.width-8),m.bottom+E.height+16>w&&(o=m.top+window.scrollY-E.height-8),r.style.top=`${o}px`,r.style.left=`${_}px`},[e,t]),d.useEffect(()=>{if(!e)return;const r=E=>{i.current&&!i.current.contains(E.target)&&n()},m=setTimeout(()=>{document.addEventListener("click",r)},100);return()=>{clearTimeout(m),document.removeEventListener("click",r)}},[e,n]),d.useEffect(()=>{if(!e)return;const r=m=>{m.key==="Escape"&&n()};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[e,n]);const g=d.useCallback(()=>{s(r=>Math.min(r+1,c))},[c]),k=d.useCallback(()=>{s(r=>Math.max(r-1,y))},[y]),p=d.useCallback(()=>{l(f)},[f,l]);return!e||!a?null:React.createElement("div",{ref:i,className:"ts-popup ts-external-choice-popup",style:{position:"absolute",zIndex:9999}},React.createElement("div",{className:"ts-popup-content"},React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,a.label," - Quantity"),React.createElement("div",{className:"ts-stepper-input flexify"},React.createElement("button",{className:`ts-stepper-left ts-icon-btn${f<=y?" vx-disabled":""}`,onClick:r=>{r.preventDefault(),r.stopPropagation(),k()},type:"button",disabled:f<=y},Se(u?.minusIcon)||React.createElement("i",{className:"las la-minus"})),React.createElement("input",{type:"number",className:"ts-input-box",value:f,onChange:r=>{const m=parseInt(r.target.value,10);isNaN(m)||s(Math.max(y,Math.min(m,c)))},min:y,max:c}),React.createElement("button",{className:`ts-stepper-right ts-icon-btn${f>=c?" vx-disabled":""}`,onClick:r=>{r.preventDefault(),r.stopPropagation(),g()},type:"button",disabled:f>=c},Se(u?.plusIcon)||React.createElement("i",{className:"las la-plus"})))),React.createElement("div",{className:"ts-form-group ts-popup-actions flexify"},React.createElement("a",{href:"#",className:"ts-btn ts-btn-1",onClick:r=>{r.preventDefault(),n()}},"Cancel"),React.createElement("a",{href:"#",className:"ts-btn ts-btn-2",onClick:r=>{r.preventDefault(),p()}},"Confirm"))))}function ht({text:e,icon:t="",className:a="",style:n={}}){return typeof window<"u"&&!window.wp?.blockEditor?null:d.createElement("div",{className:`voxel-empty-placeholder ${a}`,style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:e?"8px":"0",background:"rgb(213 216 220 / 80%)",borderRadius:"0",color:"#666",fontSize:"13px",height:"45px",width:"100%",...n}},d.createElement("span",{className:"placeholder-icon",style:{fontFamily:"eicons",fontSize:"24px",opacity:.3,lineHeight:1,fontStyle:"normal"}},t),e&&d.createElement("span",{className:"placeholder-text",style:{opacity:.6}},e))}function ee(e,t){return e?.value?e.library==="line-awesome"||e.value.startsWith("la-")?React.createElement("i",{className:`las ${e.value} `}):e.library==="fa-solid"||e.library==="fa-regular"?React.createElement("i",{className:`${e.library==="fa-solid"?"fas":"far"} fa-${e.value} `}):React.createElement("i",{className:`las ${e.value} `}):null}function _t(){return React.createElement("div",{className:"ts-product-main vx-loading-screen"},React.createElement(ht,null))}function wt({message:e,icon:t}){return React.createElement("div",{className:"ts-product-main"},React.createElement("div",{className:"ts-form-group ts-no-posts"},ee(t),React.createElement("p",null,e)))}function Nt({attributes:e}){const t=e.icons||W;return React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify({blockId:e.blockId,settings:{showPriceCalculator:e.showPriceCalculator,showSubtotalOnly:e.showSubtotalOnly,hideCardSubheading:e.hideCardSubheading,cardSelectOnClick:e.cardSelectOnClick},icons:{...W,...e.icons}})}}),React.createElement("div",{className:"ts-product-main"},React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,"Product Options"),React.createElement("div",{className:"ts-filter ts-popup-target"},React.createElement("span",{className:"ts-filter-text"},"Select an option"),React.createElement("div",{className:"ts-down-icon"}))),React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,"Add-ons"),React.createElement("ul",{className:"addon-cards simplify-ul flexify"},React.createElement("li",null,React.createElement("div",{className:"adc-title"},"Sample Add-on"),React.createElement("div",{className:"adc-subtitle"},"Description"),React.createElement("span",{className:"vx-addon-price"},"+$10.00")),React.createElement("li",{className:"adc-selected"},React.createElement("div",{className:"adc-title"},"Selected Add-on"),React.createElement("div",{className:"adc-subtitle"},"Description"),React.createElement("span",{className:"vx-addon-price"},"+$15.00")))),React.createElement("div",{className:"ts-form-group product-actions"},React.createElement("a",{href:"#",className:"ts-btn form-btn ts-btn-2"},ee(t.addToCart),React.createElement("span",null,"Add to cart"))),e.showPriceCalculator==="show"&&React.createElement("div",{className:"ts-form-group tcc-container"},React.createElement("ul",{className:"ts-cost-calculator simplify-ul flexify"},React.createElement("li",null,React.createElement("p",{className:"ts-item-name"},"Base price"),React.createElement("p",{className:"ts-item-price"},"$50.00")),React.createElement("li",null,React.createElement("p",{className:"ts-item-name"},"Add-on: Selected"),React.createElement("p",{className:"ts-item-price"},"$15.00")),React.createElement("li",{className:"ts-total"},React.createElement("p",{className:"ts-item-name"},"Total"),React.createElement("p",{className:"ts-item-price"},"$65.00"))))))}function Rt({summary:e,showSubtotalOnly:t}){if(!e.visible_items.length)return null;const a=t?e.visible_items.filter(n=>n.key==="total"):e.visible_items;return React.createElement("div",{className:"ts-form-group tcc-container"},React.createElement("ul",{className:"ts-cost-calculator simplify-ul flexify"},a.map(n=>React.createElement("li",{key:n.key,className:n.key==="total"?"ts-total":""},React.createElement("p",{className:"ts-item-name"},n.label),React.createElement("p",{className:"ts-item-price"},n.formatted_price)))))}function vt({attributes:e,context:t,config:a,productConfig:n}){const[l,u]=d.useState({}),[i,f]=d.useState(1),[s,y]=d.useState({variation_id:null,quantity:1}),[c,g]=d.useState(Pe),[k,p]=d.useState({}),[r,m]=d.useState(t==="frontend");d.useEffect(()=>{const q="voxel-product-form-css";if(!document.getElementById(q)){const B=document.createElement("link");B.id=q,B.rel="stylesheet";const z=(window.Voxel_Config?.site_url||window.location.origin).replace(/\/$/,"");B.href=`${z}/wp-content/themes/voxel/assets/dist/product-form.css?ver=1.7.5.2`,document.head.appendChild(B)}},[]);const{isProcessing:E,addToCart:o,directCheckout:_}=gt({config:n??null,addonValues:l,quantity:i,variationsValue:s,bookingValue:c,dataInputValues:k}),h=d.useRef(null),w=n?.props?.fields?.["form-quantity"],b=w?.props?.quantity??999,N=d.useMemo(()=>{const q=n?.props?.fields?.["form-booking"];if(!q||q.props?.mode!=="date_range"||!c.start_date||!c.end_date)return 0;const B=new Date(c.start_date+"T00:00:00Z"),z=new Date(c.end_date+"T00:00:00Z").getTime()-B.getTime(),te=Math.ceil(z/(1e3*60*60*24));return(q.props?.count_mode??"nights")==="nights"?te:te+1},[n,c.start_date,c.end_date]),R=d.useCallback(()=>h.current?.getPricingSummary()??null,[]),x=d.useCallback(()=>{const q=n?.props?.fields?.["form-variations"];return q?oe.getPricingSummary(q,s):null},[n,s]),{summary:T}=ze({config:n??null,quantity:i,bookingValue:c,getAddonsPricingSummary:R,getVariationsPricingSummary:x}),v=d.useCallback((q,B)=>{u(Q=>({...Q,[q]:B}))},[]),I=d.useCallback((q,B)=>{p(Q=>({...Q,[q]:B}))},[]),{externalChoice:M,closeExternalChoice:O,updateExternalChoiceQuantity:X}=Et({config:n??null,addonValues:l,onAddonValueChange:v}),L=a?.icons||e.icons||W,Y=a?.settings||{showPriceCalculator:e.showPriceCalculator,showSubtotalOnly:e.showSubtotalOnly,hideCardSubheading:e.hideCardSubheading,cardSelectOnClick:e.cardSelectOnClick};if(t==="editor")return React.createElement(Nt,{attributes:e});if(r&&!n)return React.createElement(_t,null);if(!n||!n.is_purchasable)return React.createElement(wt,{message:n?.out_of_stock_message||"This product is not available",icon:L.outOfStock});const K=n?.settings?.product_mode??"regular",S=!!n?.props?.fields?.["form-addons"],D=!!w,F=!!n?.props?.fields?.["form-variations"],A=!!n?.props?.fields?.["form-booking"],j=!!n?.props?.fields?.["form-data-inputs"];return React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify({blockId:e.blockId||a?.blockId,settings:Y,icons:L})}}),React.createElement("div",{className:"ts-product-main"},S&&n&&React.createElement(Ie,{ref:h,config:n,values:l,onValueChange:v,bookingValue:c,bookingRangeLength:N,searchContext:n.settings?.search_context}),F&&K==="variable"&&n?.props?.fields?.["form-variations"]&&React.createElement(oe,{field:n.props.fields["form-variations"],value:s,onChange:y}),A&&K==="booking"&&n?.props?.fields?.["form-booking"]&&React.createElement(G,{field:n.props.fields["form-booking"],value:c,onChange:g,config:n,initialAvailability:n.settings?.search_context?.availability}),D&&K==="regular"&&!w?.props?.sold_individually&&React.createElement(Be,{maxQuantity:b,value:i,onChange:f,label:n?.l10n?.quantity??"Quantity"}),j&&n?.props?.fields?.["form-data-inputs"]&&React.createElement(it,{field:n.props.fields["form-data-inputs"],values:k,onValueChange:I,icons:L}),React.createElement("div",{className:"ts-form-group product-actions"},n.cart.enabled?React.createElement("a",{href:"#",className:`ts-btn form-btn ts-btn-2 ${E?"ts-loading-btn":""}`,onClick:q=>{q.preventDefault(),E||o()}},E?React.createElement("span",{className:"ts-loader"}):React.createElement(React.Fragment,null,ee(L.addToCart),React.createElement("span",null,"Add to cart"))):React.createElement("a",{href:"#",className:`ts-btn form-btn ts-btn-2 ${E?"ts-loading-btn":""}`,onClick:q=>{q.preventDefault(),E||_()}},E?React.createElement("span",{className:"ts-loader"}):React.createElement(React.Fragment,null,ee(L.checkout),React.createElement("span",null,"Continue")))),Y.showPriceCalculator==="show"&&React.createElement(Rt,{summary:T,showSubtotalOnly:Y.showSubtotalOnly})),React.createElement(kt,{active:M.active,element:M.element,choice:M.choice,onClose:O,onConfirm:X,icons:L}))}function St(){if(typeof window<"u"&&window.wpApiSettings?.root)return window.wpApiSettings.root;if(typeof document<"u"){const e=document.querySelector('link[rel="https://api.w.org/"]');if(e){const t=e.getAttribute("href");if(t)return t}}if(typeof window<"u"&&window.location?.origin){const e=window.location.pathname.split("/").filter(Boolean),t=["wp-admin","wp-content","wp-includes","wp-json"];return e.length>0&&!t.includes(e[0])?window.location.origin+"/"+e[0]+"/wp-json/":window.location.origin+"/wp-json/"}return"/wp-json/"}function xe(e){return typeof e!="string"||!e.match(/^\d{4}-\d{2}-\d{2}$/)?!1:isFinite(new Date(e).getTime())}function xt(e){const t={availability:{start:"",end:""},numeric_addons:{},switcher_addons:{}};if(!e)return t;try{const n=new URL(document.referrer).searchParams;if(e.availability){const l=n.get(e.availability);if(typeof l=="string"){const u=l.split("..");xe(u[0])&&(t.availability={start:u[0],end:xe(u[1])?u[1]:u[0]})}}e.numeric_addons&&Object.keys(e.numeric_addons).forEach(l=>{const u=e.numeric_addons[l],i=n.get(u);if(typeof i=="string"){const f=parseInt(i,10);isNaN(f)||(t.numeric_addons[l]=f)}}),e.switcher_addons&&Object.keys(e.switcher_addons).forEach(l=>{const u=e.switcher_addons[l];n.get(u)==="1"&&(t.switcher_addons[l]=!0)})}catch(a){console.debug("Search context parsing failed:",a)}return t}function Dt(e,t){return{availability:{start:e?.availability?.start||t.availability?.start||"",end:e?.availability?.end||t.availability?.end||""},numeric_addons:{...t.numeric_addons,...e?.numeric_addons},switcher_addons:{...t.switcher_addons,...e?.switcher_addons}}}function Ct(){return St()}function qt(){const e=window;if(e.voxel?.current_post?.id)return e.voxel.current_post.id;if(e.wp?.data?.select){const n=e.wp.data.select("core/editor")?.getCurrentPostId?.();if(n)return n}const a=document.body.className.match(/postid-(\d+)/);return a?parseInt(a[1],10):null}function Pt(e){const t=(y,c)=>typeof y=="boolean"?y:y==="true"||y==="1"||y===1?!0:y==="false"||y==="0"||y===0?!1:c,a=(y,c)=>typeof y=="string"?y:c,n=e.settings??{},l=e.icons??{},u=n.searchContextConfig??n.search_context_config??null,i=n.searchContext??n.search_context??{},f=xt(u),s=Dt(i,f);return{blockId:a(e.blockId??e.block_id,""),settings:{showPriceCalculator:a(n.showPriceCalculator??n.show_price_calculator,"show"),showSubtotalOnly:t(n.showSubtotalOnly??n.show_subtotal_only,!1),hideCardSubheading:t(n.hideCardSubheading??n.hide_card_subheading,!1),cardSelectOnClick:t(n.cardSelectOnClick??n.card_select_on_click,!0),productMode:a(n.productMode??n.product_mode,"regular"),cartNonce:a(n.cartNonce??n.cart_nonce,""),searchContext:s,searchContextConfig:u},icons:{calendarIcon:l.calendarIcon??l.calendar_icon??null,minusIcon:l.minusIcon??l.minus_icon??null,plusIcon:l.plusIcon??l.plus_icon??null,cartIcon:l.cartIcon??l.cart_icon??null,checkIcon:l.checkIcon??l.check_icon??null,downIcon:l.downIcon??l.down_icon??null},props:e.props??{},value:e.value??{},l10n:e.l10n??{}}}function Tt(e){const t=e.querySelector("script.vxconfig");if(t&&t.textContent)try{const a=JSON.parse(t.textContent);return Pt(a)}catch(a){console.error("Failed to parse vxconfig:",a)}return null}async function It(e){const a=`${Ct()}voxel-fse/v1/product-form/config?post_id=${e}`;try{const n={"Content-Type":"application/json"},l=window.wpApiSettings?.nonce;l&&(n["X-WP-Nonce"]=l);const u=await fetch(a,{credentials:"same-origin",headers:n});if(!u.ok)throw new Error(`HTTP error! status: ${u.status}`);return await u.json()}catch(n){return console.error("Failed to fetch product config:",n),null}}function Bt(e){return{...qe,blockId:e.blockId||"",showPriceCalculator:e.settings?.showPriceCalculator||"show",showSubtotalOnly:e.settings?.showSubtotalOnly||!1,hideCardSubheading:e.settings?.hideCardSubheading||!1,cardSelectOnClick:e.settings?.cardSelectOnClick??!0,icons:{...W,...e.icons}}}function Mt({config:e,postId:t}){const[a,n]=d.useState(null),[l,u]=d.useState(!0),[i,f]=d.useState(null),s=Bt(e);return d.useEffect(()=>{let y=!1;async function c(){if(!t){f("No post ID found"),u(!1);return}u(!0),f(null);try{const g=await It(t);y||n(g)}catch(g){y||f(g instanceof Error?g.message:"Failed to load product")}finally{y||u(!1)}}return c(),()=>{y=!0}},[t]),l?React.createElement("div",{className:"ts-product-main vx-loading-screen"},React.createElement("div",{className:"ts-no-posts"},React.createElement("span",{className:"ts-loader"}))):i?React.createElement("div",{className:"ts-product-main"},React.createElement("div",{className:"ts-form-group ts-no-posts"},React.createElement("i",{className:"las la-exclamation-circle"}),React.createElement("p",null,i))):React.createElement(vt,{attributes:s,context:"frontend",config:e,productConfig:a})}function Z(){const e=document.querySelectorAll(".voxel-fse-product-form, .ts-product-form"),t=qt();e.forEach(a=>{if(a.dataset.hydrated==="true"||!a.classList.contains("voxel-fse-product-form"))return;const n=Tt(a);if(!n){console.error("No vxconfig found for product form block");return}a.dataset.hydrated="true";const l=a.querySelector(".vx-loading-screen");l&&l.remove(),Ce.createRoot(a).render(React.createElement(Mt,{config:n,postId:t}))})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Z):Z(),window.addEventListener("turbo:load",Z),window.addEventListener("pjax:complete",Z),document.addEventListener("voxel:markup-update",Z);const Ot=window;Ot.render_product_form=Z})(ReactDOM,React);
