(function(G,R){"use strict";var O,M,F,P;O={"(":9,"!":8,"*":7,"/":7,"%":7,"+":6,"-":6,"<":5,"<=":5,">":5,">=":5,"==":4,"!=":4,"&&":3,"||":2,"?":1,"?:":1},M=["(","?"],F={")":["("],":":["?","?:"]},P=/<=|>=|==|!=|&&|\|\||\?:|\(|!|\*|\/|%|\+|-|<|>|\?|\)|:/;function X(t){for(var n=[],e=[],i,r,s,c;i=t.match(P);){for(r=i[0],s=t.substr(0,i.index).trim(),s&&n.push(s);c=e.pop();){if(F[r]){if(F[r][0]===c){r=F[r][1]||r;break}}else if(M.indexOf(c)>=0||O[c]<O[r]){e.push(c);break}n.push(c)}F[r]||e.push(r),t=t.substr(i.index+r.length)}return t=t.trim(),t&&n.push(t),n.concat(e.reverse())}var Q={"!":function(t){return!t},"*":function(t,n){return t*n},"/":function(t,n){return t/n},"%":function(t,n){return t%n},"+":function(t,n){return t+n},"-":function(t,n){return t-n},"<":function(t,n){return t<n},"<=":function(t,n){return t<=n},">":function(t,n){return t>n},">=":function(t,n){return t>=n},"==":function(t,n){return t===n},"!=":function(t,n){return t!==n},"&&":function(t,n){return t&&n},"||":function(t,n){return t||n},"?:":function(t,n,e){if(t)throw n;return e}};function V(t,n){var e=[],i,r,s,c,l,f;for(i=0;i<t.length;i++){if(l=t[i],c=Q[l],c){for(r=c.length,s=Array(r);r--;)s[r]=e.pop();try{f=c.apply(null,s)}catch(u){return u}}else n.hasOwnProperty(l)?f=n[l]:f=+l;e.push(f)}return e[0]}function Y(t){var n=X(t);return function(e){return V(n,e)}}function N(t){var n=Y(t);return function(e){return+n({n:e})}}var j={contextDelimiter:"",onMissingKey:null};function tt(t){var n,e,i;for(n=t.split(";"),e=0;e<n.length;e++)if(i=n[e].trim(),i.indexOf("plural=")===0)return i.substr(7)}function L(t,n){var e;this.data=t,this.pluralForms={},this.options={};for(e in j)this.options[e]=n!==void 0&&e in n?n[e]:j[e]}L.prototype.getPluralForm=function(t,n){var e=this.pluralForms[t],i,r,s;return e||(i=this.data[t][""],s=i["Plural-Forms"]||i["plural-forms"]||i.plural_forms,typeof s!="function"&&(r=tt(i["Plural-Forms"]||i["plural-forms"]||i.plural_forms),s=N(r)),e=this.pluralForms[t]=s),e(n)},L.prototype.dcnpgettext=function(t,n,e,i,r){var s,c,l;return r===void 0?s=0:s=this.getPluralForm(t,r),c=e,n&&(c=n+this.options.contextDelimiter+e),l=this.data[t][c],l&&l[s]?l[s]:(this.options.onMissingKey&&this.options.onMissingKey(e,t),s===0?e:i)};var k={"":{plural_forms(t){return t===1?0:1}}},et=/^i18n\.(n?gettext|has_translation)(_|$)/,nt=(t,n,e)=>{const i=new L({}),r=new Set,s=()=>{r.forEach(o=>o())},c=o=>(r.add(o),()=>r.delete(o)),l=(o="default")=>i.data[o],f=(o,a="default")=>{i.data[a]={...i.data[a],...o},i.data[a][""]={...k[""],...i.data[a]?.[""]},delete i.pluralForms[a]},u=(o,a)=>{f(o,a),s()},m=(o,a="default")=>{i.data[a]={...i.data[a],...o,"":{...k[""],...i.data[a]?.[""],...o?.[""]}},delete i.pluralForms[a],s()},x=(o,a)=>{i.data={},i.pluralForms={},u(o,a)},v=(o="default",a,p,_,y)=>(i.data[o]||f(void 0,o),i.dcnpgettext(o,a,p,_,y)),b=o=>o||"default",I=(o,a)=>{let p=v(a,void 0,o);return e?(p=e.applyFilters("i18n.gettext",p,o,a),e.applyFilters("i18n.gettext_"+b(a),p,o,a)):p},d=(o,a,p)=>{let _=v(p,a,o);return e?(_=e.applyFilters("i18n.gettext_with_context",_,o,a,p),e.applyFilters("i18n.gettext_with_context_"+b(p),_,o,a,p)):_},A=(o,a,p,_)=>{let y=v(_,void 0,o,a,p);return e?(y=e.applyFilters("i18n.ngettext",y,o,a,p,_),e.applyFilters("i18n.ngettext_"+b(_),y,o,a,p,_)):y},g=(o,a,p,_,y)=>{let $=v(y,_,o,a,p);return e?($=e.applyFilters("i18n.ngettext_with_context",$,o,a,p,_,y),e.applyFilters("i18n.ngettext_with_context_"+b(y),$,o,a,p,_,y)):$},E=()=>d("ltr","text direction")==="rtl",z=(o,a,p)=>{const _=a?a+""+o:o;let y=!!i.data?.[p??"default"]?.[_];return e&&(y=e.applyFilters("i18n.has_translation",y,o,a,p),y=e.applyFilters("i18n.has_translation_"+b(p),y,o,a,p)),y};if(e){const o=a=>{et.test(a)&&s()};e.addAction("hookAdded","core/i18n",o),e.addAction("hookRemoved","core/i18n",o)}return{getLocaleData:l,setLocaleData:u,addLocaleData:m,resetLocaleData:x,subscribe:c,__:I,_x:d,_n:A,_nx:g,isRTL:E,hasTranslation:z}};function it(t){return typeof t!="string"||t===""?(console.error("The namespace must be a non-empty string."),!1):/^[a-zA-Z][a-zA-Z0-9_.\-\/]*$/.test(t)?!0:(console.error("The namespace can only contain numbers, letters, dashes, periods, underscores and slashes."),!1)}var K=it;function rt(t){return typeof t!="string"||t===""?(console.error("The hook name must be a non-empty string."),!1):/^__/.test(t)?(console.error("The hook name cannot begin with `__`."),!1):/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(t)?!0:(console.error("The hook name can only contain numbers, letters, dashes, periods and underscores."),!1)}var U=rt;function ot(t,n){return function(i,r,s,c=10){const l=t[n];if(!U(i)||!K(r))return;if(typeof s!="function"){console.error("The hook callback must be a function.");return}if(typeof c!="number"){console.error("If specified, the hook priority must be a number.");return}const f={callback:s,priority:c,namespace:r};if(l[i]){const u=l[i].handlers;let m;for(m=u.length;m>0&&!(c>=u[m-1].priority);m--);m===u.length?u[m]=f:u.splice(m,0,f),l.__current.forEach(x=>{x.name===i&&x.currentIndex>=m&&x.currentIndex++})}else l[i]={handlers:[f],runs:0};i!=="hookAdded"&&t.doAction("hookAdded",i,r,s,c)}}var Z=ot;function st(t,n,e=!1){return function(r,s){const c=t[n];if(!U(r)||!e&&!K(s))return;if(!c[r])return 0;let l=0;if(e)l=c[r].handlers.length,c[r]={runs:c[r].runs,handlers:[]};else{const f=c[r].handlers;for(let u=f.length-1;u>=0;u--)f[u].namespace===s&&(f.splice(u,1),l++,c.__current.forEach(m=>{m.name===r&&m.currentIndex>=u&&m.currentIndex--}))}return r!=="hookRemoved"&&t.doAction("hookRemoved",r,s),l}}var D=st;function ct(t,n){return function(i,r){const s=t[n];return typeof r<"u"?i in s&&s[i].handlers.some(c=>c.namespace===r):i in s}}var J=ct;function at(t,n,e,i){return function(s,...c){const l=t[n];l[s]||(l[s]={handlers:[],runs:0}),l[s].runs++;const f=l[s].handlers;if(!f||!f.length)return e?c[0]:void 0;const u={name:s,currentIndex:0};async function m(){try{l.__current.add(u);let v=e?c[0]:void 0;for(;u.currentIndex<f.length;)v=await f[u.currentIndex].callback.apply(null,c),e&&(c[0]=v),u.currentIndex++;return e?v:void 0}finally{l.__current.delete(u)}}function x(){try{l.__current.add(u);let v=e?c[0]:void 0;for(;u.currentIndex<f.length;)v=f[u.currentIndex].callback.apply(null,c),e&&(c[0]=v),u.currentIndex++;return e?v:void 0}finally{l.__current.delete(u)}}return(i?m:x)()}}var C=at;function lt(t,n){return function(){const i=t[n];return Array.from(i.__current).at(-1)?.name??null}}var W=lt;function ut(t,n){return function(i){const r=t[n];return typeof i>"u"?r.__current.size>0:Array.from(r.__current).some(s=>s.name===i)}}var w=ut;function dt(t,n){return function(i){const r=t[n];if(U(i))return r[i]&&r[i].runs?r[i].runs:0}}var q=dt,ft=class{actions;filters;addAction;addFilter;removeAction;removeFilter;hasAction;hasFilter;removeAllActions;removeAllFilters;doAction;doActionAsync;applyFilters;applyFiltersAsync;currentAction;currentFilter;doingAction;doingFilter;didAction;didFilter;constructor(){this.actions=Object.create(null),this.actions.__current=new Set,this.filters=Object.create(null),this.filters.__current=new Set,this.addAction=Z(this,"actions"),this.addFilter=Z(this,"filters"),this.removeAction=D(this,"actions"),this.removeFilter=D(this,"filters"),this.hasAction=J(this,"actions"),this.hasFilter=J(this,"filters"),this.removeAllActions=D(this,"actions",!0),this.removeAllFilters=D(this,"filters",!0),this.doAction=C(this,"actions",!1,!1),this.doActionAsync=C(this,"actions",!1,!0),this.applyFilters=C(this,"filters",!0,!1),this.applyFiltersAsync=C(this,"filters",!0,!0),this.currentAction=W(this,"actions"),this.currentFilter=W(this,"filters"),this.doingAction=w(this,"actions"),this.doingFilter=w(this,"filters"),this.didAction=q(this,"actions"),this.didFilter=q(this,"filters")}};function pt(){return new ft}var mt=pt,B=mt(),{addAction:yt,addFilter:vt,removeAction:St,removeFilter:xt,hasAction:bt,hasFilter:At,removeAllActions:Et,removeAllFilters:Rt,doAction:Ft,doActionAsync:Tt,applyFilters:Dt,applyFiltersAsync:Ct,currentAction:Ht,currentFilter:$t,doingAction:Ot,doingFilter:Lt,didAction:Ut,didFilter:It,actions:zt,filters:Mt}=B,h=nt(void 0,void 0,B);h.getLocaleData.bind(h),h.setLocaleData.bind(h),h.resetLocaleData.bind(h),h.subscribe.bind(h);var H=h.__.bind(h);h._x.bind(h),h._n.bind(h),h._nx.bind(h),h.isRTL.bind(h),h.hasTranslation.bind(h);function S(t){if(!t||typeof t!="object")return{};const n={};return t.fontFamily&&(n.fontFamily=t.fontFamily),typeof t.fontSize=="number"&&(n.fontSize=`${t.fontSize}${t.fontSizeUnit||"px"}`),t.fontWeight&&(n.fontWeight=t.fontWeight),t.fontStyle&&t.fontStyle!=="default"&&(n.fontStyle=t.fontStyle),t.textTransform&&t.textTransform!=="none"&&(n.textTransform=t.textTransform),t.textDecoration&&t.textDecoration!=="none"&&(n.textDecoration=t.textDecoration),typeof t.lineHeight=="number"&&(n.lineHeight=`${t.lineHeight}${t.lineHeightUnit||"px"}`),typeof t.letterSpacing=="number"&&(n.letterSpacing=`${t.letterSpacing}${t.letterSpacingUnit||"px"}`),typeof t.wordSpacing=="number"&&(n.wordSpacing=`${t.wordSpacing}${t.wordSpacingUnit||"px"}`),n}function ht(t){return{dueDate:t.dueDate??t.due_date??t.target_date??"",countdownEndedText:t.countdownEndedText??t.countdown_ended_text??t.ended_text??"Countdown ended",hideSeconds:t.hideSeconds??t.hide_seconds??!1,hideMinutes:t.hideMinutes??t.hide_minutes??!1,hideHours:t.hideHours??t.hide_hours??!1,hideDays:t.hideDays??t.hide_days??!1,disableAnimation:t.disableAnimation??t.disable_animation??!1,horizontalOrientation:t.horizontalOrientation??t.horizontal_orientation??!1,itemSpacing:t.itemSpacing??t.item_spacing??15,itemSpacing_tablet:t.itemSpacing_tablet??t.item_spacing_tablet??10,itemSpacing_mobile:t.itemSpacing_mobile??t.item_spacing_mobile??5,itemSpacingUnit:t.itemSpacingUnit??t.item_spacing_unit??"px",contentSpacing:t.contentSpacing??t.content_spacing??10,contentSpacing_tablet:t.contentSpacing_tablet??t.content_spacing_tablet??8,contentSpacing_mobile:t.contentSpacing_mobile??t.content_spacing_mobile??5,contentSpacingUnit:t.contentSpacingUnit??t.content_spacing_unit??"px",textColor:t.textColor??t.text_color??"",numberColor:t.numberColor??t.number_color??"",endedColor:t.endedColor??t.ended_color??"",textTypography:t.textTypography??t.text_typography??{},numberTypography:t.numberTypography??t.number_typography??{},endedTypography:t.endedTypography??t.ended_typography??{}}}function gt({config:t,isEditor:n=!1}){const e=ht(t),[i,r]=R.useState({days:0,hours:0,minutes:0,seconds:0,isExpired:!1}),s=R.useRef(null),c=R.useRef(null),l=R.useRef(null),f=R.useRef(null),u=()=>{if(!e.dueDate)return{days:0,hours:0,minutes:0,seconds:0,isExpired:!0};const d=new Date().getTime(),A=new Date(e.dueDate).getTime(),g=Math.floor((A-d)/1e3);if(g<0)return{days:0,hours:0,minutes:0,seconds:0,isExpired:!0};const E=Math.floor(g/86400),z=Math.floor(g%86400/3600),o=Math.floor(g%3600/60),a=Math.floor(g%60);return{days:E,hours:z,minutes:o,seconds:a,isExpired:!1}},m=(d,A)=>{if(!d.current||e.disableAnimation){d.current&&(d.current.innerText=A.toString());return}d.current.style.animationName="vx-fade-out-up",setTimeout(()=>{d.current&&(d.current.innerText=A.toString(),d.current.style.animationName="vx-fade-in-up")},500)};R.useEffect(()=>{const d=u();r(d);const A=setInterval(()=>{const g=u(),E=i;g.days!==E.days&&m(s,g.days),g.hours!==E.hours&&m(c,g.hours),g.minutes!==E.minutes&&m(l,g.minutes),g.seconds!==E.seconds&&m(f,g.seconds),r(g)},1e3);return()=>clearInterval(A)},[t.dueDate,t.disableAnimation]);const x=()=>{const d={};return e.itemSpacing>=0&&(d["--item-spacing-desktop"]=`${e.itemSpacing}${e.itemSpacingUnit}`),e.itemSpacing_tablet>=0&&(d["--item-spacing-tablet"]=`${e.itemSpacing_tablet}${e.itemSpacingUnit}`),e.itemSpacing_mobile>=0&&(d["--item-spacing-mobile"]=`${e.itemSpacing_mobile}${e.itemSpacingUnit}`),e.contentSpacing>=0&&(d["--content-spacing-desktop"]=`${e.contentSpacing}${e.contentSpacingUnit}`),e.contentSpacing_tablet>=0&&(d["--content-spacing-tablet"]=`${e.contentSpacing_tablet}${e.contentSpacingUnit}`),e.contentSpacing_mobile>=0&&(d["--content-spacing-mobile"]=`${e.contentSpacing_mobile}${e.contentSpacingUnit}`),d},v=()=>{const d={};return e.textColor&&(d["--text-color"]=e.textColor),e.numberColor&&(d["--number-color"]=e.numberColor),e.endedColor&&(d["--ended-color"]=e.endedColor),d},b={...x(),...v()},I=React.createElement("script",{type:"application/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(e)}});return React.createElement(React.Fragment,null,I,React.createElement("div",{className:"ts-countdown-widget flexify",style:b,"data-config":JSON.stringify({days:i.days,hours:i.hours,minutes:i.minutes,seconds:i.seconds,due:new Date(e.dueDate).getTime()/1e3,now:Date.now()/1e3})},!i.isExpired&&React.createElement("ul",{className:`countdown-timer flexify simplify-ul${e.horizontalOrientation?" ts-ct-inline":""}${e.disableAnimation?" ts-disable-animation":""}`,style:{gap:`${e.itemSpacing}${e.itemSpacingUnit}`}},!e.hideDays&&React.createElement("li",{style:{display:"flex",flexDirection:e.horizontalOrientation?"row":"column",alignItems:"center",justifyContent:"center",gap:`${e.contentSpacing}${e.contentSpacingUnit}`}},React.createElement("span",{ref:s,className:"timer-days",style:{color:e.numberColor||void 0,animation:e.disableAnimation?"none":void 0,...S(e.numberTypography)}},i.days),React.createElement("p",{style:{color:e.textColor||void 0,...S(e.textTypography)}},H("Days","voxel-fse"))),!e.hideHours&&React.createElement("li",{style:{display:"flex",flexDirection:e.horizontalOrientation?"row":"column",alignItems:"center",justifyContent:"center",gap:`${e.contentSpacing}${e.contentSpacingUnit}`}},React.createElement("span",{ref:c,className:"timer-hours",style:{color:e.numberColor||void 0,animation:e.disableAnimation?"none":void 0,...S(e.numberTypography)}},i.hours),React.createElement("p",{style:{color:e.textColor||void 0,...S(e.textTypography)}},H("Hours","voxel-fse"))),!e.hideMinutes&&React.createElement("li",{style:{display:"flex",flexDirection:e.horizontalOrientation?"row":"column",alignItems:"center",justifyContent:"center",gap:`${e.contentSpacing}${e.contentSpacingUnit}`}},React.createElement("span",{ref:l,className:"timer-minutes",style:{color:e.numberColor||void 0,animation:e.disableAnimation?"none":void 0,...S(e.numberTypography)}},i.minutes),React.createElement("p",{style:{color:e.textColor||void 0,...S(e.textTypography)}},H("Minutes","voxel-fse"))),!e.hideSeconds&&React.createElement("li",{style:{display:"flex",flexDirection:e.horizontalOrientation?"row":"column",alignItems:"center",justifyContent:"center",gap:`${e.contentSpacing}${e.contentSpacingUnit}`}},React.createElement("span",{ref:f,className:"timer-seconds",style:{color:e.numberColor||void 0,animation:e.disableAnimation?"none":void 0,...S(e.numberTypography)}},i.seconds),React.createElement("p",{style:{color:e.textColor||void 0,...S(e.textTypography)}},H("Seconds","voxel-fse")))),React.createElement("div",{className:"countdown-ended",style:{display:i.isExpired?"flex":"none",color:e.endedColor||void 0,...S(e.endedTypography)}},e.countdownEndedText)))}function _t(t){const n=t.previousElementSibling;if(!n||!n.classList.contains("vxconfig"))return console.error("[Countdown] vxconfig script tag not found"),null;try{return JSON.parse(n.textContent||"{}")}catch(e){return console.error("[Countdown] Failed to parse vxconfig:",e),null}}function T(){document.querySelectorAll(".ts-countdown-widget:not([data-react-mounted])").forEach(n=>{const e=_t(n);if(!e)return;n.setAttribute("data-react-mounted","true"),G.createRoot(n).render(React.createElement(gt,{config:e,isEditor:!1}))})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",T):T(),document.addEventListener("turbo:load",T),document.addEventListener("pjax:complete",T),document.addEventListener("voxel:markup-update",T)})(ReactDOM,React);
