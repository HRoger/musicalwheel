(function(G,A){"use strict";var O,M,E,P;O={"(":9,"!":8,"*":7,"/":7,"%":7,"+":6,"-":6,"<":5,"<=":5,">":5,">=":5,"==":4,"!=":4,"&&":3,"||":2,"?":1,"?:":1},M=["(","?"],E={")":["("],":":["?","?:"]},P=/<=|>=|==|!=|&&|\|\||\?:|\(|!|\*|\/|%|\+|-|<|>|\?|\)|:/;function X(t){for(var n=[],e=[],i,r,s,c;i=t.match(P);){for(r=i[0],s=t.substr(0,i.index).trim(),s&&n.push(s);c=e.pop();){if(E[r]){if(E[r][0]===c){r=E[r][1]||r;break}}else if(M.indexOf(c)>=0||O[c]<O[r]){e.push(c);break}n.push(c)}E[r]||e.push(r),t=t.substr(i.index+r.length)}return t=t.trim(),t&&n.push(t),n.concat(e.reverse())}var Q={"!":function(t){return!t},"*":function(t,n){return t*n},"/":function(t,n){return t/n},"%":function(t,n){return t%n},"+":function(t,n){return t+n},"-":function(t,n){return t-n},"<":function(t,n){return t<n},"<=":function(t,n){return t<=n},">":function(t,n){return t>n},">=":function(t,n){return t>=n},"==":function(t,n){return t===n},"!=":function(t,n){return t!==n},"&&":function(t,n){return t&&n},"||":function(t,n){return t||n},"?:":function(t,n,e){if(t)throw n;return e}};function V(t,n){var e=[],i,r,s,c,l,p;for(i=0;i<t.length;i++){if(l=t[i],c=Q[l],c){for(r=c.length,s=Array(r);r--;)s[r]=e.pop();try{p=c.apply(null,s)}catch(u){return u}}else n.hasOwnProperty(l)?p=n[l]:p=+l;e.push(p)}return e[0]}function Y(t){var n=X(t);return function(e){return V(n,e)}}function N(t){var n=Y(t);return function(e){return+n({n:e})}}var j={contextDelimiter:"",onMissingKey:null};function tt(t){var n,e,i;for(n=t.split(";"),e=0;e<n.length;e++)if(i=n[e].trim(),i.indexOf("plural=")===0)return i.substr(7)}function L(t,n){var e;this.data=t,this.pluralForms={},this.options={};for(e in j)this.options[e]=n!==void 0&&e in n?n[e]:j[e]}L.prototype.getPluralForm=function(t,n){var e=this.pluralForms[t],i,r,s;return e||(i=this.data[t][""],s=i["Plural-Forms"]||i["plural-forms"]||i.plural_forms,typeof s!="function"&&(r=tt(i["Plural-Forms"]||i["plural-forms"]||i.plural_forms),s=N(r)),e=this.pluralForms[t]=s),e(n)},L.prototype.dcnpgettext=function(t,n,e,i,r){var s,c,l;return r===void 0?s=0:s=this.getPluralForm(t,r),c=e,n&&(c=n+this.options.contextDelimiter+e),l=this.data[t][c],l&&l[s]?l[s]:(this.options.onMissingKey&&this.options.onMissingKey(e,t),s===0?e:i)};var k={"":{plural_forms(t){return t===1?0:1}}},et=/^i18n\.(n?gettext|has_translation)(_|$)/,nt=(t,n,e)=>{const i=new L({}),r=new Set,s=()=>{r.forEach(o=>o())},c=o=>(r.add(o),()=>r.delete(o)),l=(o="default")=>i.data[o],p=(o,a="default")=>{i.data[a]={...i.data[a],...o},i.data[a][""]={...k[""],...i.data[a]?.[""]},delete i.pluralForms[a]},u=(o,a)=>{p(o,a),s()},m=(o,a="default")=>{i.data[a]={...i.data[a],...o,"":{...k[""],...i.data[a]?.[""],...o?.[""]}},delete i.pluralForms[a],s()},S=(o,a)=>{i.data={},i.pluralForms={},u(o,a)},y=(o="default",a,f,g,v)=>(i.data[o]||p(void 0,o),i.dcnpgettext(o,a,f,g,v)),b=o=>o||"default",I=(o,a)=>{let f=y(a,void 0,o);return e?(f=e.applyFilters("i18n.gettext",f,o,a),e.applyFilters("i18n.gettext_"+b(a),f,o,a)):f},H=(o,a,f)=>{let g=y(f,a,o);return e?(g=e.applyFilters("i18n.gettext_with_context",g,o,a,f),e.applyFilters("i18n.gettext_with_context_"+b(f),g,o,a,f)):g},z=(o,a,f,g)=>{let v=y(g,void 0,o,a,f);return e?(v=e.applyFilters("i18n.ngettext",v,o,a,f,g),e.applyFilters("i18n.ngettext_"+b(g),v,o,a,f,g)):v},d=(o,a,f,g,v)=>{let $=y(v,g,o,a,f);return e?($=e.applyFilters("i18n.ngettext_with_context",$,o,a,f,g,v),e.applyFilters("i18n.ngettext_with_context_"+b(v),$,o,a,f,g,v)):$},R=()=>H("ltr","text direction")==="rtl",_=(o,a,f)=>{const g=a?a+""+o:o;let v=!!i.data?.[f??"default"]?.[g];return e&&(v=e.applyFilters("i18n.has_translation",v,o,a,f),v=e.applyFilters("i18n.has_translation_"+b(f),v,o,a,f)),v};if(e){const o=a=>{et.test(a)&&s()};e.addAction("hookAdded","core/i18n",o),e.addAction("hookRemoved","core/i18n",o)}return{getLocaleData:l,setLocaleData:u,addLocaleData:m,resetLocaleData:S,subscribe:c,__:I,_x:H,_n:z,_nx:d,isRTL:R,hasTranslation:_}};function it(t){return typeof t!="string"||t===""?(console.error("The namespace must be a non-empty string."),!1):/^[a-zA-Z][a-zA-Z0-9_.\-\/]*$/.test(t)?!0:(console.error("The namespace can only contain numbers, letters, dashes, periods, underscores and slashes."),!1)}var K=it;function rt(t){return typeof t!="string"||t===""?(console.error("The hook name must be a non-empty string."),!1):/^__/.test(t)?(console.error("The hook name cannot begin with `__`."),!1):/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(t)?!0:(console.error("The hook name can only contain numbers, letters, dashes, periods and underscores."),!1)}var U=rt;function ot(t,n){return function(i,r,s,c=10){const l=t[n];if(!U(i)||!K(r))return;if(typeof s!="function"){console.error("The hook callback must be a function.");return}if(typeof c!="number"){console.error("If specified, the hook priority must be a number.");return}const p={callback:s,priority:c,namespace:r};if(l[i]){const u=l[i].handlers;let m;for(m=u.length;m>0&&!(c>=u[m-1].priority);m--);m===u.length?u[m]=p:u.splice(m,0,p),l.__current.forEach(S=>{S.name===i&&S.currentIndex>=m&&S.currentIndex++})}else l[i]={handlers:[p],runs:0};i!=="hookAdded"&&t.doAction("hookAdded",i,r,s,c)}}var Z=ot;function st(t,n,e=!1){return function(r,s){const c=t[n];if(!U(r)||!e&&!K(s))return;if(!c[r])return 0;let l=0;if(e)l=c[r].handlers.length,c[r]={runs:c[r].runs,handlers:[]};else{const p=c[r].handlers;for(let u=p.length-1;u>=0;u--)p[u].namespace===s&&(p.splice(u,1),l++,c.__current.forEach(m=>{m.name===r&&m.currentIndex>=u&&m.currentIndex--}))}return r!=="hookRemoved"&&t.doAction("hookRemoved",r,s),l}}var T=st;function ct(t,n){return function(i,r){const s=t[n];return typeof r<"u"?i in s&&s[i].handlers.some(c=>c.namespace===r):i in s}}var J=ct;function at(t,n,e,i){return function(s,...c){const l=t[n];l[s]||(l[s]={handlers:[],runs:0}),l[s].runs++;const p=l[s].handlers;if(!p||!p.length)return e?c[0]:void 0;const u={name:s,currentIndex:0};async function m(){try{l.__current.add(u);let y=e?c[0]:void 0;for(;u.currentIndex<p.length;)y=await p[u.currentIndex].callback.apply(null,c),e&&(c[0]=y),u.currentIndex++;return e?y:void 0}finally{l.__current.delete(u)}}function S(){try{l.__current.add(u);let y=e?c[0]:void 0;for(;u.currentIndex<p.length;)y=p[u.currentIndex].callback.apply(null,c),e&&(c[0]=y),u.currentIndex++;return e?y:void 0}finally{l.__current.delete(u)}}return(i?m:S)()}}var D=at;function lt(t,n){return function(){const i=t[n];return Array.from(i.__current).at(-1)?.name??null}}var W=lt;function ut(t,n){return function(i){const r=t[n];return typeof i>"u"?r.__current.size>0:Array.from(r.__current).some(s=>s.name===i)}}var w=ut;function dt(t,n){return function(i){const r=t[n];if(U(i))return r[i]&&r[i].runs?r[i].runs:0}}var q=dt,ft=class{actions;filters;addAction;addFilter;removeAction;removeFilter;hasAction;hasFilter;removeAllActions;removeAllFilters;doAction;doActionAsync;applyFilters;applyFiltersAsync;currentAction;currentFilter;doingAction;doingFilter;didAction;didFilter;constructor(){this.actions=Object.create(null),this.actions.__current=new Set,this.filters=Object.create(null),this.filters.__current=new Set,this.addAction=Z(this,"actions"),this.addFilter=Z(this,"filters"),this.removeAction=T(this,"actions"),this.removeFilter=T(this,"filters"),this.hasAction=J(this,"actions"),this.hasFilter=J(this,"filters"),this.removeAllActions=T(this,"actions",!0),this.removeAllFilters=T(this,"filters",!0),this.doAction=D(this,"actions",!1,!1),this.doActionAsync=D(this,"actions",!1,!0),this.applyFilters=D(this,"filters",!0,!1),this.applyFiltersAsync=D(this,"filters",!0,!0),this.currentAction=W(this,"actions"),this.currentFilter=W(this,"filters"),this.doingAction=w(this,"actions"),this.doingFilter=w(this,"filters"),this.didAction=q(this,"actions"),this.didFilter=q(this,"filters")}};function pt(){return new ft}var mt=pt,B=mt(),{addAction:yt,addFilter:vt,removeAction:St,removeFilter:xt,hasAction:bt,hasFilter:At,removeAllActions:Rt,removeAllFilters:Et,doAction:Ft,doActionAsync:Tt,applyFilters:Dt,applyFiltersAsync:Ct,currentAction:Ht,currentFilter:$t,doingAction:Ot,doingFilter:Lt,didAction:Ut,didFilter:It,actions:zt,filters:Mt}=B,h=nt(void 0,void 0,B);h.getLocaleData.bind(h),h.setLocaleData.bind(h),h.resetLocaleData.bind(h),h.subscribe.bind(h);var C=h.__.bind(h);h._x.bind(h),h._n.bind(h),h._nx.bind(h),h.isRTL.bind(h),h.hasTranslation.bind(h);function x(t){if(!t||typeof t!="object")return{};const n={};return t.fontFamily&&(n.fontFamily=t.fontFamily),typeof t.fontSize=="number"&&(n.fontSize=`${t.fontSize}${t.fontSizeUnit||"px"}`),t.fontWeight&&(n.fontWeight=t.fontWeight),t.fontStyle&&t.fontStyle!=="default"&&(n.fontStyle=t.fontStyle),t.textTransform&&t.textTransform!=="none"&&(n.textTransform=t.textTransform),t.textDecoration&&t.textDecoration!=="none"&&(n.textDecoration=t.textDecoration),typeof t.lineHeight=="number"&&(n.lineHeight=`${t.lineHeight}${t.lineHeightUnit||"px"}`),typeof t.letterSpacing=="number"&&(n.letterSpacing=`${t.letterSpacing}${t.letterSpacingUnit||"px"}`),typeof t.wordSpacing=="number"&&(n.wordSpacing=`${t.wordSpacing}${t.wordSpacingUnit||"px"}`),n}function ht(t){return{dueDate:t.dueDate??t.due_date??t.target_date??"",countdownEndedText:t.countdownEndedText??t.countdown_ended_text??t.ended_text??"Countdown ended",hideSeconds:t.hideSeconds??t.hide_seconds??!1,hideMinutes:t.hideMinutes??t.hide_minutes??!1,hideHours:t.hideHours??t.hide_hours??!1,hideDays:t.hideDays??t.hide_days??!1,disableAnimation:t.disableAnimation??t.disable_animation??!1,horizontalOrientation:t.horizontalOrientation??t.horizontal_orientation??!1,itemSpacing:t.itemSpacing??t.item_spacing??15,itemSpacing_tablet:t.itemSpacing_tablet??t.item_spacing_tablet??10,itemSpacing_mobile:t.itemSpacing_mobile??t.item_spacing_mobile??5,itemSpacingUnit:t.itemSpacingUnit??t.item_spacing_unit??"px",contentSpacing:t.contentSpacing??t.content_spacing??10,contentSpacing_tablet:t.contentSpacing_tablet??t.content_spacing_tablet??8,contentSpacing_mobile:t.contentSpacing_mobile??t.content_spacing_mobile??5,contentSpacingUnit:t.contentSpacingUnit??t.content_spacing_unit??"px",textColor:t.textColor??t.text_color??"",numberColor:t.numberColor??t.number_color??"",endedColor:t.endedColor??t.ended_color??"",textTypography:t.textTypography??t.text_typography??{},numberTypography:t.numberTypography??t.number_typography??{},endedTypography:t.endedTypography??t.ended_typography??{}}}function gt({config:t,isEditor:n=!1}){const e=ht(t),[i,r]=A.useState({days:0,hours:0,minutes:0,seconds:0,isExpired:!1}),s=A.useRef(null),c=A.useRef(null),l=A.useRef(null),p=A.useRef(null),u=A.useRef(i);u.current=i;const m=A.useRef(Math.floor(Date.now()/1e3)),S=d=>{if(!e.dueDate)return{days:0,hours:0,minutes:0,seconds:0,isExpired:!0};const _=Math.floor(new Date(e.dueDate).getTime()/1e3)-d;if(_<0)return{days:0,hours:0,minutes:0,seconds:0,isExpired:!0};const o=Math.floor(_/86400),a=Math.floor(_%86400/3600),f=Math.floor(_%3600/60),g=Math.floor(_%60);return{days:o,hours:a,minutes:f,seconds:g,isExpired:!1}},y=(d,R)=>{if(!d.current||e.disableAnimation){d.current&&(d.current.innerText=R.toString());return}d.current.style.animationName="vx-fade-out-up",setTimeout(()=>{d.current&&(d.current.innerText=R.toString(),d.current.style.animationName="vx-fade-in-up")},500)};A.useEffect(()=>{m.current=Math.floor(Date.now()/1e3);const d=S(m.current);r(d),u.current=d;const R=setInterval(()=>{m.current++;const _=S(m.current),o=u.current;_.days!==o.days&&y(s,_.days),_.hours!==o.hours&&y(c,_.hours),_.minutes!==o.minutes&&y(l,_.minutes),_.seconds!==o.seconds&&y(p,_.seconds),r(_),u.current=_},1e3);return()=>clearInterval(R)},[t.dueDate,t.disableAnimation]);const b=()=>{const d={};return e.itemSpacing>=0&&(d["--item-spacing-desktop"]=`${e.itemSpacing}${e.itemSpacingUnit}`),e.itemSpacing_tablet>=0&&(d["--item-spacing-tablet"]=`${e.itemSpacing_tablet}${e.itemSpacingUnit}`),e.itemSpacing_mobile>=0&&(d["--item-spacing-mobile"]=`${e.itemSpacing_mobile}${e.itemSpacingUnit}`),e.contentSpacing>=0&&(d["--content-spacing-desktop"]=`${e.contentSpacing}${e.contentSpacingUnit}`),e.contentSpacing_tablet>=0&&(d["--content-spacing-tablet"]=`${e.contentSpacing_tablet}${e.contentSpacingUnit}`),e.contentSpacing_mobile>=0&&(d["--content-spacing-mobile"]=`${e.contentSpacing_mobile}${e.contentSpacingUnit}`),d},I=()=>{const d={};return e.textColor&&(d["--text-color"]=e.textColor),e.numberColor&&(d["--number-color"]=e.numberColor),e.endedColor&&(d["--ended-color"]=e.endedColor),d},H={...b(),...I()},z=React.createElement("script",{type:"application/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(e)}});return React.createElement(React.Fragment,null,z,React.createElement("div",{className:"ts-countdown-widget flexify",style:H,"data-config":JSON.stringify({days:i.days,hours:i.hours,minutes:i.minutes,seconds:i.seconds,due:new Date(e.dueDate).getTime()/1e3,now:Date.now()/1e3})},!i.isExpired&&React.createElement("ul",{className:`countdown-timer flexify simplify-ul${e.horizontalOrientation?" ts-ct-inline":""}${e.disableAnimation?" ts-disable-animation":""}`,style:{gap:`${e.itemSpacing}${e.itemSpacingUnit}`}},!e.hideDays&&React.createElement("li",{style:{display:"flex",flexDirection:e.horizontalOrientation?"row":"column",alignItems:"center",justifyContent:"center",gap:`${e.contentSpacing}${e.contentSpacingUnit}`}},React.createElement("span",{ref:s,className:"timer-days",style:{color:e.numberColor||void 0,animation:e.disableAnimation?"none":void 0,...x(e.numberTypography)}},i.days),React.createElement("p",{style:{color:e.textColor||void 0,...x(e.textTypography)}},C("Days","voxel-fse"))),!e.hideHours&&React.createElement("li",{style:{display:"flex",flexDirection:e.horizontalOrientation?"row":"column",alignItems:"center",justifyContent:"center",gap:`${e.contentSpacing}${e.contentSpacingUnit}`}},React.createElement("span",{ref:c,className:"timer-hours",style:{color:e.numberColor||void 0,animation:e.disableAnimation?"none":void 0,...x(e.numberTypography)}},i.hours),React.createElement("p",{style:{color:e.textColor||void 0,...x(e.textTypography)}},C("Hours","voxel-fse"))),!e.hideMinutes&&React.createElement("li",{style:{display:"flex",flexDirection:e.horizontalOrientation?"row":"column",alignItems:"center",justifyContent:"center",gap:`${e.contentSpacing}${e.contentSpacingUnit}`}},React.createElement("span",{ref:l,className:"timer-minutes",style:{color:e.numberColor||void 0,animation:e.disableAnimation?"none":void 0,...x(e.numberTypography)}},i.minutes),React.createElement("p",{style:{color:e.textColor||void 0,...x(e.textTypography)}},C("Minutes","voxel-fse"))),!e.hideSeconds&&React.createElement("li",{style:{display:"flex",flexDirection:e.horizontalOrientation?"row":"column",alignItems:"center",justifyContent:"center",gap:`${e.contentSpacing}${e.contentSpacingUnit}`}},React.createElement("span",{ref:p,className:"timer-seconds",style:{color:e.numberColor||void 0,animation:e.disableAnimation?"none":void 0,...x(e.numberTypography)}},i.seconds),React.createElement("p",{style:{color:e.textColor||void 0,...x(e.textTypography)}},C("Seconds","voxel-fse")))),React.createElement("div",{className:"countdown-ended",style:{display:i.isExpired?"flex":"none",color:e.endedColor||void 0,...x(e.endedTypography)}},e.countdownEndedText)))}function _t(t){const n=t.previousElementSibling;if(!n||!n.classList.contains("vxconfig"))return console.error("[Countdown] vxconfig script tag not found"),null;try{return JSON.parse(n.textContent||"{}")}catch(e){return console.error("[Countdown] Failed to parse vxconfig:",e),null}}function F(){document.querySelectorAll(".ts-countdown-widget:not([data-react-mounted])").forEach(n=>{const e=_t(n);if(!e)return;n.setAttribute("data-react-mounted","true"),G.createRoot(n).render(React.createElement(gt,{config:e,isEditor:!1}))})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",F):F(),document.addEventListener("turbo:load",F),document.addEventListener("pjax:complete",F),document.addEventListener("voxel:markup-update",F)})(ReactDOM,React);
