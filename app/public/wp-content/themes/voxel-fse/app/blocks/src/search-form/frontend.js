(function(fn,u,Fe,pn){"use strict";function mn(e){return typeof e!="string"||e===""?(console.error("The namespace must be a non-empty string."),!1):/^[a-zA-Z][a-zA-Z0-9_.\-\/]*$/.test(e)?!0:(console.error("The namespace can only contain numbers, letters, dashes, periods, underscores and slashes."),!1)}var pt=mn;function hn(e){return typeof e!="string"||e===""?(console.error("The hook name must be a non-empty string."),!1):/^__/.test(e)?(console.error("The hook name cannot begin with `__`."),!1):/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(e)?!0:(console.error("The hook name can only contain numbers, letters, dashes, periods and underscores."),!1)}var qe=hn;function yn(e,t){return function(r,l,o,a=10){const s=e[t];if(!qe(r)||!pt(l))return;if(typeof o!="function"){console.error("The hook callback must be a function.");return}if(typeof a!="number"){console.error("If specified, the hook priority must be a number.");return}const i={callback:o,priority:a,namespace:l};if(s[r]){const c=s[r].handlers;let d;for(d=c.length;d>0&&!(a>=c[d-1].priority);d--);d===c.length?c[d]=i:c.splice(d,0,i),s.__current.forEach(b=>{b.name===r&&b.currentIndex>=d&&b.currentIndex++})}else s[r]={handlers:[i],runs:0};r!=="hookAdded"&&e.doAction("hookAdded",r,l,o,a)}}var mt=yn;function gn(e,t,n=!1){return function(l,o){const a=e[t];if(!qe(l)||!n&&!pt(o))return;if(!a[l])return 0;let s=0;if(n)s=a[l].handlers.length,a[l]={runs:a[l].runs,handlers:[]};else{const i=a[l].handlers;for(let c=i.length-1;c>=0;c--)i[c].namespace===o&&(i.splice(c,1),s++,a.__current.forEach(d=>{d.name===l&&d.currentIndex>=c&&d.currentIndex--}))}return l!=="hookRemoved"&&e.doAction("hookRemoved",l,o),s}}var Pe=gn;function bn(e,t){return function(r,l){const o=e[t];return typeof l<"u"?r in o&&o[r].handlers.some(a=>a.namespace===l):r in o}}var ht=bn;function vn(e,t,n,r){return function(o,...a){const s=e[t];s[o]||(s[o]={handlers:[],runs:0}),s[o].runs++;const i=s[o].handlers;if(!i||!i.length)return n?a[0]:void 0;const c={name:o,currentIndex:0};async function d(){try{s.__current.add(c);let f=n?a[0]:void 0;for(;c.currentIndex<i.length;)f=await i[c.currentIndex].callback.apply(null,a),n&&(a[0]=f),c.currentIndex++;return n?f:void 0}finally{s.__current.delete(c)}}function b(){try{s.__current.add(c);let f=n?a[0]:void 0;for(;c.currentIndex<i.length;)f=i[c.currentIndex].callback.apply(null,a),n&&(a[0]=f),c.currentIndex++;return n?f:void 0}finally{s.__current.delete(c)}}return(r?d:b)()}}var Oe=vn;function En(e,t){return function(){const r=e[t];return Array.from(r.__current).at(-1)?.name??null}}var yt=En;function wn(e,t){return function(r){const l=e[t];return typeof r>"u"?l.__current.size>0:Array.from(l.__current).some(o=>o.name===r)}}var gt=wn;function Sn(e,t){return function(r){const l=e[t];if(qe(r))return l[r]&&l[r].runs?l[r].runs:0}}var bt=Sn,Rn=class{actions;filters;addAction;addFilter;removeAction;removeFilter;hasAction;hasFilter;removeAllActions;removeAllFilters;doAction;doActionAsync;applyFilters;applyFiltersAsync;currentAction;currentFilter;doingAction;doingFilter;didAction;didFilter;constructor(){this.actions=Object.create(null),this.actions.__current=new Set,this.filters=Object.create(null),this.filters.__current=new Set,this.addAction=mt(this,"actions"),this.addFilter=mt(this,"filters"),this.removeAction=Pe(this,"actions"),this.removeFilter=Pe(this,"filters"),this.hasAction=ht(this,"actions"),this.hasFilter=ht(this,"filters"),this.removeAllActions=Pe(this,"actions",!0),this.removeAllFilters=Pe(this,"filters",!0),this.doAction=Oe(this,"actions",!1,!1),this.doActionAsync=Oe(this,"actions",!1,!0),this.applyFilters=Oe(this,"filters",!0,!1),this.applyFiltersAsync=Oe(this,"filters",!0,!0),this.currentAction=yt(this,"actions"),this.currentFilter=yt(this,"filters"),this.doingAction=gt(this,"actions"),this.doingFilter=gt(this,"filters"),this.didAction=bt(this,"actions"),this.didFilter=bt(this,"filters")}};function _n(){return new Rn}var Cn=_n,kn=Cn(),{addAction:Ys,addFilter:Qs,removeAction:$s,removeFilter:ea,hasAction:ta,hasFilter:na,removeAllActions:ra,removeAllFilters:sa,doAction:Tn,doActionAsync:aa,applyFilters:la,applyFiltersAsync:oa,currentAction:ia,currentFilter:ca,doingAction:ua,doingFilter:da,didAction:fa,didFilter:pa,actions:ma,filters:ha}=kn,vt=Object.create(null);function Et(e,t={}){const{since:n,version:r,alternative:l,plugin:o,link:a,hint:s}=t,i=o?` from ${o}`:"",c=n?` since version ${n}`:"",d=r?` and will be removed${i} in version ${r}`:"",b=l?` Please use ${l} instead.`:"",f=a?` See: ${a}`:"",g=s?` Note: ${s}`:"",v=`${e} is deprecated${c}${d}.${b}${f}${g}`;v in vt||(Tn("deprecated",e,t,v),console.warn(v),vt[v]=!0)}function le(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var xn=typeof Symbol=="function"&&Symbol.observable||"@@observable",wt=xn,St=()=>Math.random().toString(36).substring(7).split("").join("."),Nn={INIT:`@@redux/INIT${St()}`,REPLACE:`@@redux/REPLACE${St()}`},Rt=Nn;function In(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function _t(e,t,n){if(typeof e!="function")throw new Error(le(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(le(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(le(1));return n(_t)(e,t)}let r=e,l=t,o=new Map,a=o,s=0,i=!1;function c(){a===o&&(a=new Map,o.forEach((_,C)=>{a.set(C,_)}))}function d(){if(i)throw new Error(le(3));return l}function b(_){if(typeof _!="function")throw new Error(le(4));if(i)throw new Error(le(5));let C=!0;c();const w=s++;return a.set(w,_),function(){if(C){if(i)throw new Error(le(6));C=!1,c(),a.delete(w),o=null}}}function f(_){if(!In(_))throw new Error(le(7));if(typeof _.type>"u")throw new Error(le(8));if(typeof _.type!="string")throw new Error(le(17));if(i)throw new Error(le(9));try{i=!0,l=r(l,_)}finally{i=!1}return(o=a).forEach(w=>{w()}),_}function g(_){if(typeof _!="function")throw new Error(le(10));r=_,f({type:Rt.REPLACE})}function v(){const _=b;return{subscribe(C){if(typeof C!="object"||C===null)throw new Error(le(11));function w(){const T=C;T.next&&T.next(d())}return w(),{unsubscribe:_(w)}},[wt](){return this}}}return f({type:Rt.INIT}),{dispatch:f,subscribe:b,getState:d,replaceReducer:g,[wt]:v}}function Ln(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Mn(...e){return t=>(n,r)=>{const l=t(n,r);let o=()=>{throw new Error(le(15))};const a={getState:l.getState,dispatch:(i,...c)=>o(i,...c)},s=e.map(i=>i(a));return o=Ln(...s)(l.dispatch),{...l,dispatch:o}}}var Ct=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ze,kt;function Pn(){if(kt)return ze;kt=1;function e(a){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(s){return typeof s}:e=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},e(a)}function t(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")}function n(a,s){for(var i=0;i<s.length;i++){var c=s[i];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}}function r(a,s,i){return s&&n(a.prototype,s),a}function l(a,s){var i=a._map,c=a._arrayTreeMap,d=a._objectTreeMap;if(i.has(s))return i.get(s);for(var b=Object.keys(s).sort(),f=Array.isArray(s)?c:d,g=0;g<b.length;g++){var v=b[g];if(f=f.get(v),f===void 0)return;var k=s[v];if(f=f.get(k),f===void 0)return}var _=f.get("_ekm_value");if(_)return i.delete(_[0]),_[0]=s,f.set("_ekm_value",_),i.set(s,_),_}var o=(function(){function a(s){if(t(this,a),this.clear(),s instanceof a){var i=[];s.forEach(function(d,b){i.push([b,d])}),s=i}if(s!=null)for(var c=0;c<s.length;c++)this.set(s[c][0],s[c][1])}return r(a,[{key:"set",value:function(i,c){if(i===null||e(i)!=="object")return this._map.set(i,c),this;for(var d=Object.keys(i).sort(),b=[i,c],f=Array.isArray(i)?this._arrayTreeMap:this._objectTreeMap,g=0;g<d.length;g++){var v=d[g];f.has(v)||f.set(v,new a),f=f.get(v);var k=i[v];f.has(k)||f.set(k,new a),f=f.get(k)}var _=f.get("_ekm_value");return _&&this._map.delete(_[0]),f.set("_ekm_value",b),this._map.set(i,b),this}},{key:"get",value:function(i){if(i===null||e(i)!=="object")return this._map.get(i);var c=l(this,i);if(c)return c[1]}},{key:"has",value:function(i){return i===null||e(i)!=="object"?this._map.has(i):l(this,i)!==void 0}},{key:"delete",value:function(i){return this.has(i)?(this.set(i,void 0),!0):!1}},{key:"forEach",value:function(i){var c=this,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this;this._map.forEach(function(b,f){f!==null&&e(f)==="object"&&(b=b[1]),i.call(d,b,f,c)})}},{key:"clear",value:function(){this._map=new Map,this._arrayTreeMap=new Map,this._objectTreeMap=new Map}},{key:"size",get:function(){return this._map.size}}]),a})();return ze=o,ze}var On=Pn();const he=Fn(On);function An(e){return!!e&&typeof e[Symbol.iterator]=="function"&&typeof e.next=="function"}var Ke={},re={},Ae={},Tt;function xt(){if(Tt)return Ae;Tt=1,Object.defineProperty(Ae,"__esModule",{value:!0});var e={all:Symbol("all"),error:Symbol("error"),fork:Symbol("fork"),join:Symbol("join"),race:Symbol("race"),call:Symbol("call"),cps:Symbol("cps"),subscribe:Symbol("subscribe")};return Ae.default=e,Ae}var Nt;function It(){if(Nt)return re;Nt=1,Object.defineProperty(re,"__esModule",{value:!0}),re.createChannel=re.subscribe=re.cps=re.apply=re.call=re.invoke=re.delay=re.race=re.join=re.fork=re.error=re.all=void 0;var e=xt(),t=n(e);function n(r){return r&&r.__esModule?r:{default:r}}return re.all=function(l){return{type:t.default.all,value:l}},re.error=function(l){return{type:t.default.error,error:l}},re.fork=function(l){for(var o=arguments.length,a=Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];return{type:t.default.fork,iterator:l,args:a}},re.join=function(l){return{type:t.default.join,task:l}},re.race=function(l){return{type:t.default.race,competitors:l}},re.delay=function(l){return new Promise(function(o){setTimeout(function(){return o(!0)},l)})},re.invoke=function(l){for(var o=arguments.length,a=Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];return{type:t.default.call,func:l,context:null,args:a}},re.call=function(l,o){for(var a=arguments.length,s=Array(a>2?a-2:0),i=2;i<a;i++)s[i-2]=arguments[i];return{type:t.default.call,func:l,context:o,args:s}},re.apply=function(l,o,a){return{type:t.default.call,func:l,context:o,args:a}},re.cps=function(l){for(var o=arguments.length,a=Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];return{type:t.default.cps,func:l,args:a}},re.subscribe=function(l){return{type:t.default.subscribe,channel:l}},re.createChannel=function(l){var o=[],a=function(c){return o.push(c),function(){return o.splice(o.indexOf(c),1)}},s=function(c){return o.forEach(function(d){return d(c)})};return l(s),{subscribe:a}},re}var Ve={},oe={},De={},Lt;function Be(){if(Lt)return De;Lt=1,Object.defineProperty(De,"__esModule",{value:!0});var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol?"symbol":typeof o},t=xt(),n=r(t);function r(o){return o&&o.__esModule?o:{default:o}}var l={obj:function(a){return(typeof a>"u"?"undefined":e(a))==="object"&&!!a},all:function(a){return l.obj(a)&&a.type===n.default.all},error:function(a){return l.obj(a)&&a.type===n.default.error},array:Array.isArray,func:function(a){return typeof a=="function"},promise:function(a){return a&&l.func(a.then)},iterator:function(a){return a&&l.func(a.next)&&l.func(a.throw)},fork:function(a){return l.obj(a)&&a.type===n.default.fork},join:function(a){return l.obj(a)&&a.type===n.default.join},race:function(a){return l.obj(a)&&a.type===n.default.race},call:function(a){return l.obj(a)&&a.type===n.default.call},cps:function(a){return l.obj(a)&&a.type===n.default.cps},subscribe:function(a){return l.obj(a)&&a.type===n.default.subscribe},channel:function(a){return l.obj(a)&&l.func(a.subscribe)}};return De.default=l,De}var Mt;function Vn(){if(Mt)return oe;Mt=1,Object.defineProperty(oe,"__esModule",{value:!0}),oe.iterator=oe.array=oe.object=oe.error=oe.any=void 0;var e=Be(),t=n(e);function n(i){return i&&i.__esModule?i:{default:i}}var r=oe.any=function(c,d,b,f){return f(c),!0},l=oe.error=function(c,d,b,f,g){return t.default.error(c)?(g(c.error),!0):!1},o=oe.object=function(c,d,b,f,g){if(!t.default.all(c)||!t.default.obj(c.value))return!1;var v={},k=Object.keys(c.value),_=0,C=!1,w=function(h,p){C||(v[h]=p,_++,_===k.length&&f(v))},x=function(h,p){C||(C=!0,g(p))};return k.map(function(T){b(c.value[T],function(h){return w(T,h)},function(h){return x(T,h)})}),!0},a=oe.array=function(c,d,b,f,g){if(!t.default.all(c)||!t.default.array(c.value))return!1;var v=[],k=0,_=!1,C=function(T,h){_||(v[T]=h,k++,k===c.value.length&&f(v))},w=function(T,h){_||(_=!0,g(h))};return c.value.map(function(x,T){b(x,function(h){return C(T,h)},function(h){return w(T,h)})}),!0},s=oe.iterator=function(c,d,b,f,g){return t.default.iterator(c)?(b(c,d,g),!0):!1};return oe.default=[l,s,a,o,r],oe}var Ft;function Dn(){if(Ft)return Ve;Ft=1,Object.defineProperty(Ve,"__esModule",{value:!0});var e=Vn(),t=l(e),n=Be(),r=l(n);function l(s){return s&&s.__esModule?s:{default:s}}function o(s){if(Array.isArray(s)){for(var i=0,c=Array(s.length);i<s.length;i++)c[i]=s[i];return c}else return Array.from(s)}var a=function(){var i=arguments.length<=0||arguments[0]===void 0?[]:arguments[0],c=[].concat(o(i),o(t.default)),d=function b(f){var g=arguments.length<=1||arguments[1]===void 0?function(){}:arguments[1],v=arguments.length<=2||arguments[2]===void 0?function(){}:arguments[2],k=function(w){var x=function(p){return function(y){try{var E=p?w.throw(y):w.next(y),N=E.value,S=E.done;if(S)return g(N);T(N)}catch(P){return v(P)}}},T=function h(p){c.some(function(y){return y(p,h,b,x(!1),x(!0))})};x(!1)()},_=r.default.iterator(f)?f:regeneratorRuntime.mark(function C(){return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,f;case 2:return x.abrupt("return",x.sent);case 3:case"end":return x.stop()}},C,this)})();k(_)};return d};return Ve.default=a,Ve}var pe={},je={},Pt;function Bn(){if(Pt)return je;Pt=1,Object.defineProperty(je,"__esModule",{value:!0});var e=function(){var n=[];return{subscribe:function(l){return n.push(l),function(){n=n.filter(function(o){return o!==l})}},dispatch:function(l){n.slice().forEach(function(o){return o(l)})}}};return je.default=e,je}var Ot;function jn(){if(Ot)return pe;Ot=1,Object.defineProperty(pe,"__esModule",{value:!0}),pe.race=pe.join=pe.fork=pe.promise=void 0;var e=Be(),t=o(e),n=It(),r=Bn(),l=o(r);function o(f){return f&&f.__esModule?f:{default:f}}var a=pe.promise=function(g,v,k,_,C){return t.default.promise(g)?(g.then(v,C),!0):!1},s=new Map,i=pe.fork=function(g,v,k){if(!t.default.fork(g))return!1;var _=Symbol("fork"),C=(0,l.default)();s.set(_,C),k(g.iterator.apply(null,g.args),function(x){return C.dispatch(x)},function(x){return C.dispatch((0,n.error)(x))});var w=C.subscribe(function(){w(),s.delete(_)});return v(_),!0},c=pe.join=function(g,v,k,_,C){if(!t.default.join(g))return!1;var w=s.get(g.task);return w?(function(){var x=w.subscribe(function(T){x(),v(T)})})():C("join error : task not found"),!0},d=pe.race=function(g,v,k,_,C){if(!t.default.race(g))return!1;var w=!1,x=function(p,y,E){w||(w=!0,p[y]=E,v(p))},T=function(p){w||C(p)};return t.default.array(g.competitors)?(function(){var h=g.competitors.map(function(){return!1});g.competitors.forEach(function(p,y){k(p,function(E){return x(h,y,E)},T)})})():(function(){var h=Object.keys(g.competitors).reduce(function(p,y){return p[y]=!1,p},{});Object.keys(g.competitors).forEach(function(p){k(g.competitors[p],function(y){return x(h,p,y)},T)})})(),!0},b=function(g,v){if(!t.default.subscribe(g))return!1;if(!t.default.channel(g.channel))throw new Error('the first argument of "subscribe" must be a valid channel');var k=g.channel.subscribe(function(_){k&&k(),v(_)});return!0};return pe.default=[a,i,c,d,b],pe}var ye={},At;function Wn(){if(At)return ye;At=1,Object.defineProperty(ye,"__esModule",{value:!0}),ye.cps=ye.call=void 0;var e=Be(),t=n(e);function n(a){return a&&a.__esModule?a:{default:a}}function r(a){if(Array.isArray(a)){for(var s=0,i=Array(a.length);s<a.length;s++)i[s]=a[s];return i}else return Array.from(a)}var l=ye.call=function(s,i,c,d,b){if(!t.default.call(s))return!1;try{i(s.func.apply(s.context,s.args))}catch(f){b(f)}return!0},o=ye.cps=function(s,i,c,d,b){var f;return t.default.cps(s)?((f=s.func).call.apply(f,[null].concat(r(s.args),[function(g,v){g?b(g):i(v)}])),!0):!1};return ye.default=[l,o],ye}var Vt;function Un(){return Vt||(Vt=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.wrapControls=e.asyncControls=e.create=void 0;var t=It();Object.keys(t).forEach(function(c){c!=="default"&&Object.defineProperty(e,c,{enumerable:!0,get:function(){return t[c]}})});var n=Dn(),r=i(n),l=jn(),o=i(l),a=Wn(),s=i(a);function i(c){return c&&c.__esModule?c:{default:c}}e.create=r.default,e.asyncControls=o.default,e.wrapControls=s.default})(Ke)),Ke}var Hn=Un();function Dt(e){return!!e&&(typeof e=="object"||typeof e=="function")&&typeof e.then=="function"}function Bt(e){return Object.prototype.toString.call(e)==="[object Object]"}function qn(e){var t,n;return Bt(e)===!1?!1:(t=e.constructor,t===void 0?!0:(n=t.prototype,!(Bt(n)===!1||n.hasOwnProperty("isPrototypeOf")===!1)))}function Ge(e){return qn(e)&&typeof e.type=="string"}function zn(e,t){return Ge(e)&&e.type===t}function Kn(e={},t){const n=Object.entries(e).map(([o,a])=>(s,i,c,d,b)=>{if(!zn(s,o))return!1;const f=a(s);return Dt(f)?f.then(d,b):d(f),!0}),r=(o,a)=>Ge(o)?(t(o),a(),!0):!1;n.push(r);const l=Hn.create(n);return o=>new Promise((a,s)=>l(o,i=>{Ge(i)&&t(i),a(i)},s))}function Gn(e={}){return t=>{const n=Kn(e,t.dispatch);return r=>l=>An(l)?n(l):r(l)}}var Zn=(e=!1)=>(...t)=>(...n)=>{const r=t.flat();return e&&r.reverse(),r.reduce((l,o)=>[o(...l)],n)[0]},Jn=Zn(!0),Xn=Jn;function Yn(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;let l=0;for(;l<n.length;){const o=n[l],a=e[o];if(a===void 0&&!t.hasOwnProperty(o)||a!==t[o])return!1;l++}return!0}function Qn(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function jt(e,t){if(e&&t){if(e.constructor===Object&&t.constructor===Object)return Yn(e,t);if(Array.isArray(e)&&Array.isArray(t))return Qn(e,t)}return e===t}var Ze={exports:{}},Wt;function $n(){return Wt||(Wt=1,(function(e){(function(t){e.exports?e.exports=t():window.idleCallbackShim=t()})(function(){var t,n,r,l,o=typeof window<"u"?window:typeof Ct!=null?Ct:this||{},a=o.cancelRequestAnimationFrame&&o.requestAnimationFrame||setTimeout,s=o.cancelRequestAnimationFrame||clearTimeout,i=[],c=0,d=!1,b=7,f=35,g=125,v=0,k=0,_=0,C={get didTimeout(){return!1},timeRemaining:function(){var U=b-(Date.now()-k);return U<0?0:U}},w=x(function(){b=22,g=66,f=0});function x(U){var L,j,O=99,H=function(){var Z=Date.now()-j;Z<O?L=setTimeout(H,O-Z):(L=null,U())};return function(){j=Date.now(),L||(L=setTimeout(H,O))}}function T(){d&&(l&&s(l),r&&clearTimeout(r),d=!1)}function h(){g!=125&&(b=7,g=125,f=35,d&&(T(),E())),w()}function p(){l=null,r=setTimeout(N,0)}function y(){r=null,a(p)}function E(){d||(n=g-(Date.now()-k),t=Date.now(),d=!0,f&&n<f&&(n=f),n>9?r=setTimeout(y,n):(n=0,y()))}function N(){var U,L,j,O=b>9?9:1;if(k=Date.now(),d=!1,r=null,c>2||k-n-50<t)for(L=0,j=i.length;L<j&&C.timeRemaining()>O;L++)U=i.shift(),_++,U&&U(C);i.length?E():c=0}function S(U){return v++,i.push(U),E(),v}function P(U){var L=U-1-_;i[L]&&(i[L]=null)}if(!o.requestIdleCallback||!o.cancelIdleCallback)o.requestIdleCallback=S,o.cancelIdleCallback=P,o.document&&document.addEventListener&&(o.addEventListener("scroll",h,!0),o.addEventListener("resize",h),document.addEventListener("focus",h,!0),document.addEventListener("mouseover",h,!0),["click","keypress","touchstart","mousedown"].forEach(function(U){document.addEventListener(U,h,{capture:!0,passive:!0})}),o.MutationObserver&&new MutationObserver(h).observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0}));else try{o.requestIdleCallback(function(){},{timeout:0})}catch{(function(L){var j,O;if(o.requestIdleCallback=function(H,Z){return Z&&typeof Z.timeout=="number"?L(H,Z.timeout):L(H)},o.IdleCallbackDeadline&&(j=IdleCallbackDeadline.prototype)){if(O=Object.getOwnPropertyDescriptor(j,"timeRemaining"),!O||!O.configurable||!O.get)return;Object.defineProperty(j,"timeRemaining",{value:function(){return O.get.call(this)},enumerable:!0,configurable:!0})}})(o.requestIdleCallback)}return{request:S,cancel:P}})})(Ze)),Ze.exports}$n();function er(){return typeof window>"u"?e=>{setTimeout(()=>e(Date.now()),0)}:window.requestIdleCallback}var Ut=er(),tr=()=>{const e=new Map;let t=!1;const n=s=>{for(const[i,c]of e)if(e.delete(i),c(),typeof s=="number"||s.timeRemaining()<=0)break;if(e.size===0){t=!1;return}Ut(n)};return{add:(s,i)=>{e.set(s,i),t||(t=!0,Ut(n))},flush:s=>{const i=e.get(s);return i===void 0?!1:(e.delete(s),i(),!0)},cancel:s=>e.delete(s),reset:()=>{e.clear(),t=!1}}};function nr(e){const t=Object.keys(e);return function(r={},l){const o={};let a=!1;for(const s of t){const i=e[s],c=r[s],d=i(c,l);o[s]=d,a=a||d!==c}return a?o:r}}function Je(e){return e.isRegistryControl=!0,e}var rr="@@data/SELECT",sr="@@data/RESOLVE_SELECT",ar="@@data/DISPATCH",lr={[rr]:Je(e=>({storeKey:t,selectorName:n,args:r})=>e.select(t)[n](...r)),[sr]:Je(e=>({storeKey:t,selectorName:n,args:r})=>{const l=e.select(t)[n].hasResolver?"resolveSelect":"select";return e[l](t)[n](...r)}),[ar]:Je(e=>({storeKey:t,actionName:n,args:r})=>e.dispatch(t)[n](...r))},or=["@wordpress/block-directory","@wordpress/block-editor","@wordpress/block-library","@wordpress/blocks","@wordpress/boot","@wordpress/commands","@wordpress/workflows","@wordpress/components","@wordpress/core-commands","@wordpress/core-data","@wordpress/customize-widgets","@wordpress/data","@wordpress/edit-post","@wordpress/edit-site","@wordpress/edit-widgets","@wordpress/editor","@wordpress/font-list-route","@wordpress/format-library","@wordpress/patterns","@wordpress/preferences","@wordpress/reusable-blocks","@wordpress/route","@wordpress/router","@wordpress/routes","@wordpress/sync","@wordpress/theme","@wordpress/ui","@wordpress/dataviews","@wordpress/fields","@wordpress/lazy-editor","@wordpress/media-utils","@wordpress/upload-media","@wordpress/global-styles-ui","@wordpress/ui"],ir=(e,t)=>{if(!or.includes(t))throw new Error(`You tried to opt-in to unstable APIs as module "${t}". This feature is only for JavaScript modules shipped with WordPress core. Please do not use it in plugins and themes as the unstable APIs will be removed without a warning. If you ignore this error and depend on unstable features, your product will inevitably break on one of the next WordPress releases.`);return{lock:cr,unlock:ur}};function cr(e,t){if(!e)throw new Error("Cannot lock an undefined object.");const n=e;Ne in n||(n[Ne]={}),Ht.set(n[Ne],t)}function ur(e){if(!e)throw new Error("Cannot unlock an undefined object.");const t=e;if(!(Ne in t))throw new Error("Cannot unlock an object that was not locked before. ");return Ht.get(t[Ne])}var Ht=new WeakMap,Ne=Symbol("Private API ID"),{lock:we,unlock:ke}=ir("I acknowledge private features are not for use in themes or plugins and doing so will break in the next version of WordPress.","@wordpress/data"),dr=()=>e=>t=>Dt(t)?t.then(n=>{if(n)return e(n)}):e(t),fr=dr,pr=(e,t)=>()=>n=>r=>{const l=e.select(t).getCachedResolvers();return Object.entries(l).forEach(([a,s])=>{const i=e.stores[t]?.resolvers?.[a];!i||!i.shouldInvalidate||s.forEach((c,d)=>{c!==void 0&&(c.status!=="finished"&&c.status!=="error"||i.shouldInvalidate(r,...d)&&e.dispatch(t).invalidateResolution(a,d))})}),n(r)},mr=pr;function hr(e){return()=>t=>n=>typeof n=="function"?n(e):t(n)}var yr=e=>t=>(n={},r)=>{const l=r[e];if(l===void 0)return n;const o=t(n[l],r);return o===n[l]?n:{...n,[l]:o}};function ge(e){if(e==null)return[];const t=e.length;let n=t;for(;n>0&&e[n-1]===void 0;)n--;return n===t?e:e.slice(0,n)}var gr=yr("selectorName")((e=new he,t)=>{switch(t.type){case"START_RESOLUTION":{const n=new he(e);return n.set(ge(t.args),{status:"resolving"}),n}case"FINISH_RESOLUTION":{const n=new he(e);return n.set(ge(t.args),{status:"finished"}),n}case"FAIL_RESOLUTION":{const n=new he(e);return n.set(ge(t.args),{status:"error",error:t.error}),n}case"START_RESOLUTIONS":{const n=new he(e);for(const r of t.args)n.set(ge(r),{status:"resolving"});return n}case"FINISH_RESOLUTIONS":{const n=new he(e);for(const r of t.args)n.set(ge(r),{status:"finished"});return n}case"FAIL_RESOLUTIONS":{const n=new he(e);return t.args.forEach((r,l)=>{const o={status:"error",error:void 0},a=t.errors[l];a&&(o.error=a),n.set(ge(r),o)}),n}case"INVALIDATE_RESOLUTION":{const n=new he(e);return n.delete(ge(t.args)),n}}return e}),br=(e={},t)=>{switch(t.type){case"INVALIDATE_RESOLUTION_FOR_STORE":return{};case"INVALIDATE_RESOLUTION_FOR_STORE_SELECTOR":{if(t.selectorName in e){const{[t.selectorName]:n,...r}=e;return r}return e}case"START_RESOLUTION":case"FINISH_RESOLUTION":case"FAIL_RESOLUTION":case"START_RESOLUTIONS":case"FINISH_RESOLUTIONS":case"FAIL_RESOLUTIONS":case"INVALIDATE_RESOLUTION":return gr(e,t);default:return e}},vr=br,Xe={};function Er(e){return[e]}function wr(e){return!!e&&typeof e=="object"}function Sr(){var e={clear:function(){e.head=null}};return e}function qt(e,t,n){var r;if(e.length!==t.length)return!1;for(r=n;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Rr(e,t){var n,r=t||Er;function l(s){var i=n,c=!0,d,b,f,g;for(d=0;d<s.length;d++){if(b=s[d],!wr(b)){c=!1;break}i.has(b)?i=i.get(b):(f=new WeakMap,i.set(b,f),i=f)}return i.has(Xe)||(g=Sr(),g.isUniqueByDependants=c,i.set(Xe,g)),i.get(Xe)}function o(){n=new WeakMap}function a(){var s=arguments.length,i,c,d,b,f;for(b=new Array(s),d=0;d<s;d++)b[d]=arguments[d];for(f=r.apply(null,b),i=l(f),i.isUniqueByDependants||(i.lastDependants&&!qt(f,i.lastDependants,0)&&i.clear(),i.lastDependants=f),c=i.head;c;){if(!qt(c.args,b,1)){c=c.next;continue}return c!==i.head&&(c.prev.next=c.next,c.next&&(c.next.prev=c.prev),c.next=i.head,c.prev=null,i.head.prev=c,i.head=c),c.val}return c={val:e.apply(null,b)},b[0]=null,c.args=b,i.head&&(i.head.prev=c,c.next=i.head),i.head=c,c.val}return a.getDependants=r,a.clear=o,o(),a}function Se(e,t,n){const r=e[t];if(r)return r.get(ge(n))}function _r(e,t,n){Et("wp.data.select( store ).getIsResolving",{since:"6.6",version:"6.8",alternative:"wp.data.select( store ).getResolutionState"});const r=Se(e,t,n);return r&&r.status==="resolving"}function Cr(e,t,n){return Se(e,t,n)!==void 0}function kr(e,t,n){const r=Se(e,t,n)?.status;return r==="finished"||r==="error"}function Tr(e,t,n){return Se(e,t,n)?.status==="error"}function xr(e,t,n){const r=Se(e,t,n);return r?.status==="error"?r.error:null}function Nr(e,t,n){return Se(e,t,n)?.status==="resolving"}function Ir(e){return e}function Lr(e){return Object.values(e).some(t=>Array.from(t._map.values()).some(n=>n[1]?.status==="resolving"))}var Mr=Rr(e=>{const t={};return Object.values(e).forEach(n=>Array.from(n._map.values()).forEach(r=>{const l=r[1]?.status??"error";t[l]||(t[l]=0),t[l]++})),t},e=>[e]);const Fr=Object.freeze(Object.defineProperty({__proto__:null,countSelectorsByStatus:Mr,getCachedResolvers:Ir,getIsResolving:_r,getResolutionError:xr,getResolutionState:Se,hasFinishedResolution:kr,hasResolutionFailed:Tr,hasResolvingSelectors:Lr,hasStartedResolution:Cr,isResolving:Nr},Symbol.toStringTag,{value:"Module"}));function zt(e,t){return{type:"START_RESOLUTION",selectorName:e,args:t}}function Kt(e,t){return{type:"FINISH_RESOLUTION",selectorName:e,args:t}}function Gt(e,t,n){return{type:"FAIL_RESOLUTION",selectorName:e,args:t,error:n}}function Pr(e,t){return{type:"START_RESOLUTIONS",selectorName:e,args:t}}function Or(e,t){return{type:"FINISH_RESOLUTIONS",selectorName:e,args:t}}function Ar(e,t,n){return{type:"FAIL_RESOLUTIONS",selectorName:e,args:t,errors:n}}function Vr(e,t){return{type:"INVALIDATE_RESOLUTION",selectorName:e,args:t}}function Dr(){return{type:"INVALIDATE_RESOLUTION_FOR_STORE"}}function Br(e){return{type:"INVALIDATE_RESOLUTION_FOR_STORE_SELECTOR",selectorName:e}}const jr=Object.freeze(Object.defineProperty({__proto__:null,failResolution:Gt,failResolutions:Ar,finishResolution:Kt,finishResolutions:Or,invalidateResolution:Vr,invalidateResolutionForStore:Dr,invalidateResolutionForStoreSelector:Br,startResolution:zt,startResolutions:Pr},Symbol.toStringTag,{value:"Module"}));var Ye=e=>{const t=[...e];for(let n=t.length-1;n>=0;n--)t[n]===void 0&&t.splice(n,1);return t},be=(e,t)=>Object.fromEntries(Object.entries(e??{}).map(([n,r])=>[n,t(r,n)])),Wr=(e,t)=>t instanceof Map?Object.fromEntries(t):t instanceof window.HTMLElement?null:t;function Ur(){const e={};return{isRunning(t,n){return e[t]&&e[t].get(Ye(n))},clear(t,n){e[t]&&e[t].delete(Ye(n))},markAsRunning(t,n){e[t]||(e[t]=new he),e[t].set(Ye(n),!0)}}}function We(e,t){const n=new WeakMap;return{get(r){const l=e(r);if(!l)return null;let o=n.get(l);return o||(o=t(l,r),n.set(l,o)),o}}}function Ue(e,t){return new Proxy(e,{get:(n,r)=>t.get(r)||Reflect.get(n,r)})}function Zt(e,t){const n={},r={},l={privateActions:n,registerPrivateActions:a=>{Object.assign(n,a)},privateSelectors:r,registerPrivateSelectors:a=>{Object.assign(r,a)}},o={name:e,instantiate:a=>{const s=new Set,i=t.reducer,d=Hr(e,t,a,{registry:a,get dispatch(){return k},get select(){return E},get resolveSelect(){return S}});we(d,l);const b=Ur();function f(F){return(...R)=>Promise.resolve(d.dispatch(F(...R)))}const g={...be(jr,f),...be(t.actions,f)},v=Ue(g,We(F=>n[F],f)),k=new Proxy(F=>d.dispatch(F),{get:(F,R)=>v[R]});we(g,v);const _=t.resolvers?be(t.resolvers,Kr):{};function C(F,R){F.isRegistrySelector&&(F.registry=a);const D=(...X)=>{X=Qe(F,X);const Q=d.__unstableOriginalGetState();return F.isRegistrySelector&&(F.registry=a),F(Q.root,...X)};D.__unstableNormalizeArgs=F.__unstableNormalizeArgs;const W=_[R];return W?Gr(D,R,W,d,b,x):(D.hasResolver=!1,D)}function w(F){const R=(D,W,...X)=>{if(D){const ee=t.selectors?.[D];ee&&(W=Qe(ee,W))}const Q=d.__unstableOriginalGetState();return F(Q.metadata,D,W,...X)};return R.hasResolver=!1,R}const x=be(Fr,w),T=be(t.selectors,C),h={...x,...T},p=We(F=>r[F],C),y=Ue(h,p);for(const F of Object.keys(r))p.get(F);const E=new Proxy(F=>F(d.__unstableOriginalGetState()),{get:(F,R)=>y[R]});we(h,y);const N=qr(d,x),S=be(T,N),P=Ue(S,We(F=>p.get(F),N));we(S,P);const U=zr(d,x),L={...x,...be(T,U)},j=Ue(L,We(F=>p.get(F),U));we(L,j);const O=()=>h,H=()=>g,Z=()=>S,Y=()=>L;d.__unstableOriginalGetState=d.getState,d.getState=()=>d.__unstableOriginalGetState().root;const se=d&&(F=>(s.add(F),()=>s.delete(F)));let $=d.__unstableOriginalGetState();return d.subscribe(()=>{const F=d.__unstableOriginalGetState(),R=F!==$;if($=F,R)for(const D of s)D()}),{reducer:i,store:d,actions:g,selectors:h,resolvers:_,getSelectors:O,getResolveSelectors:Z,getSuspendSelectors:Y,getActions:H,subscribe:se}}};return we(o,l),o}function Hr(e,t,n,r){const l={...t.controls,...lr},o=be(l,b=>b.isRegistryControl?b(n):b),a=[mr(n,e),fr,Gn(o),hr(r)],s=[Mn(...a)];typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__&&s.push(window.__REDUX_DEVTOOLS_EXTENSION__({name:e,instanceId:e,serialize:{replacer:Wr}}));const{reducer:i,initialState:c}=t,d=nr({metadata:vr,root:i});return _t(d,{root:c},Xn(s))}function qr(e,t){return(n,r)=>n.hasResolver?(...l)=>new Promise((o,a)=>{const s=()=>t.hasFinishedResolution(r,l),i=f=>{if(t.hasResolutionFailed(r,l)){const v=t.getResolutionError(r,l);a(v)}else o(f)},c=()=>n.apply(null,l),d=c();if(s())return i(d);const b=e.subscribe(()=>{s()&&(b(),i(c()))})}):async(...l)=>n.apply(null,l)}function zr(e,t){return(n,r)=>n.hasResolver?(...l)=>{const o=n.apply(null,l);if(t.hasFinishedResolution(r,l)){if(t.hasResolutionFailed(r,l))throw t.getResolutionError(r,l);return o}throw new Promise(a=>{const s=e.subscribe(()=>{t.hasFinishedResolution(r,l)&&(a(),s())})})}:n}function Kr(e){return e.fulfill?e:{...e,fulfill:e}}function Gr(e,t,n,r,l,o){function a(i){l.isRunning(t,i)||o.hasStartedResolution(t,i)||(l.markAsRunning(t,i),setTimeout(async()=>{l.clear(t,i),r.dispatch(zt(t,i));try{if(!(typeof n.isFulfilled=="function"&&n.isFulfilled(r.getState(),...i))){const d=n.fulfill(...i);d&&await r.dispatch(d)}r.dispatch(Kt(t,i))}catch(c){r.dispatch(Gt(t,i,c))}},0))}const s=(...i)=>(i=Qe(e,i),a(i),e(...i));return s.hasResolver=!0,s}function Qe(e,t){return e.__unstableNormalizeArgs&&typeof e.__unstableNormalizeArgs=="function"&&t?.length?e.__unstableNormalizeArgs(t):t}var Zr={name:"core/data",instantiate(e){const t=r=>(l,...o)=>e.select(l)[r](...o),n=r=>(l,...o)=>e.dispatch(l)[r](...o);return{getSelectors(){return Object.fromEntries(["getIsResolving","hasStartedResolution","hasFinishedResolution","isResolving","getCachedResolvers"].map(r=>[r,t(r)]))},getActions(){return Object.fromEntries(["startResolution","finishResolution","invalidateResolution","invalidateResolutionForStore","invalidateResolutionForStoreSelector"].map(r=>[r,n(r)]))},subscribe(){return()=>()=>{}}}}},Jr=Zr;function Jt(){let e=!1,t=!1;const n=new Set,r=()=>Array.from(n).forEach(l=>l());return{get isPaused(){return e},subscribe(l){return n.add(l),()=>n.delete(l)},pause(){e=!0},resume(){e=!1,t&&(t=!1,r())},emit(){if(e){t=!0;return}r()}}}function Ie(e){return typeof e=="string"?e:e.name}function Xr(e={},t=null){const n={},r=Jt();let l=null;function o(){r.emit()}const a=(h,p)=>{if(!p)return r.subscribe(h);const y=Ie(p),E=n[y];return E?E.subscribe(h):t?t.subscribe(h,p):r.subscribe(h)};function s(h){const p=Ie(h);l?.add(p);const y=n[p];return y?y.getSelectors():t?.select(p)}function i(h,p){l=new Set;try{return h.call(this)}finally{p.current=Array.from(l),l=null}}function c(h){const p=Ie(h);l?.add(p);const y=n[p];return y?y.getResolveSelectors():t&&t.resolveSelect(p)}function d(h){const p=Ie(h);l?.add(p);const y=n[p];return y?y.getSuspendSelectors():t&&t.suspendSelect(p)}function b(h){const p=Ie(h),y=n[p];return y?y.getActions():t&&t.dispatch(p)}function f(h){return Object.fromEntries(Object.entries(h).map(([p,y])=>typeof y!="function"?[p,y]:[p,function(){return w[p].apply(null,arguments)}]))}function g(h,p){if(n[h])return console.error('Store "'+h+'" is already registered.'),n[h];const y=p();if(typeof y.getSelectors!="function")throw new TypeError("store.getSelectors must be a function");if(typeof y.getActions!="function")throw new TypeError("store.getActions must be a function");if(typeof y.subscribe!="function")throw new TypeError("store.subscribe must be a function");y.emitter=Jt();const E=y.subscribe;if(y.subscribe=N=>{const S=y.emitter.subscribe(N),P=E(()=>{if(y.emitter.isPaused){y.emitter.emit();return}N()});return()=>{P?.(),S?.()}},n[h]=y,y.subscribe(o),t)try{ke(y.store).registerPrivateActions(ke(t).privateActionsOf(h)),ke(y.store).registerPrivateSelectors(ke(t).privateSelectorsOf(h))}catch{}return y}function v(h){g(h.name,()=>h.instantiate(w))}function k(h,p){Et("wp.data.registerGenericStore",{since:"5.9",alternative:"wp.data.register( storeDescriptor )"}),g(h,()=>p)}function _(h,p){if(!p.reducer)throw new TypeError("Must specify store reducer");return g(h,()=>Zt(h,p).instantiate(w)).store}function C(h){if(r.isPaused){h();return}r.pause(),Object.values(n).forEach(p=>p.emitter.pause());try{h()}finally{r.resume(),Object.values(n).forEach(p=>p.emitter.resume())}}let w={batch:C,stores:n,namespaces:n,subscribe:a,select:s,resolveSelect:c,suspendSelect:d,dispatch:b,use:x,register:v,registerGenericStore:k,registerStore:_,__unstableMarkListeningStores:i};function x(h,p){if(h)return w={...w,...h(w,p)},w}w.register(Jr);for(const[h,p]of Object.entries(e))w.register(Zt(h,p));t&&t.subscribe(o);const T=f(w);return we(T,{privateActionsOf:h=>{try{return ke(n[h].store).privateActions}catch{return{}}},privateSelectorsOf:h=>{try{return ke(n[h].store).privateSelectors}catch{return{}}}}),T}var Xt=Xr(),$e=u.createContext(Xt);$e.displayName="RegistryProviderContext";var{Consumer:ya,Provider:ga}=$e;function Yt(){return u.useContext($e)}var et=u.createContext(!1);et.displayName="AsyncModeContext";var{Consumer:ba,Provider:va}=et;function Yr(){return u.useContext(et)}var tt=tr();function Qr(e,t){if(!e||!t)return;const n=typeof e=="object"&&typeof t=="object"?Object.keys(e).filter(r=>e[r]!==t[r]):[];console.warn(`The \`useSelect\` hook returns different values when called with the same state and parameters.
This can lead to unnecessary re-renders and performance issues if not fixed.

Non-equal value keys: %s

`,n.join(", "))}function $r(e,t){const n=e.select,r={};let l,o,a=!1,s,i,c;const d=new Map;function b(g){return e.stores[g]?.store?.getState?.()??{}}const f=g=>{const v=[...g],k=new Set;function _(w){if(a)for(const y of v)d.get(y)!==b(y)&&(a=!1);d.clear();const x=()=>{a=!1,w()},T=()=>{s?tt.add(r,x):x()},h=[];function p(y){h.push(e.subscribe(T,y))}for(const y of v)p(y);return k.add(p),()=>{k.delete(p);for(const y of h.values())y?.();tt.cancel(r)}}function C(w){for(const x of w)if(!v.includes(x)){v.push(x);for(const T of k)T(x)}}return{subscribe:_,updateStores:C}};return(g,v)=>{function k(){if(a&&g===l)return o;const C={current:null},w=e.__unstableMarkListeningStores(()=>g(n,e),C);if(globalThis.SCRIPT_DEBUG&&!c){const x=g(n,e);jt(w,x)||(Qr(w,x),c=!0)}if(i)i.updateStores(C.current);else{for(const x of C.current)d.set(x,b(x));i=f(C.current)}jt(o,w)||(o=w),l=g,a=!0}function _(){return k(),o}return s&&!v&&(a=!1,tt.cancel(r)),k(),s=v,{subscribe:i.subscribe,getValue:_}}}function es(e){return Yt().select(e)}function ts(e,t,n){const r=Yt(),l=Yr(),o=u.useMemo(()=>$r(r),[r,e]),a=u.useCallback(t,n),{subscribe:s,getValue:i}=o(a,l),c=u.useSyncExternalStore(s,i,i);return u.useDebugValue(c),c}function ns(e,t){const n=typeof e!="function",r=u.useRef(n);if(n!==r.current){const l=r.current?"static":"mapping",o=n?"static":"mapping";throw new Error(`Switching useSelect from ${l} to ${o} is not allowed`)}return n?es(e):ts(!1,e,t)}var nt=Xt;nt.registerGenericStore,nt.registerStore,nt.use;function rt(){if(typeof window<"u"&&window.wpApiSettings?.root)return window.wpApiSettings.root;if(typeof document<"u"){const e=document.querySelector('link[rel="https://api.w.org/"]');if(e){const t=e.getAttribute("href");if(t)return t}}if(typeof window<"u"&&window.location?.origin){const e=window.location.pathname.split("/").filter(Boolean),t=["wp-admin","wp-content","wp-includes","wp-json"];return e.length>0&&!t.includes(e[0])?window.location.origin+"/"+e[0]+"/wp-json/":window.location.origin+"/wp-json/"}return"/wp-json/"}function rs({attributes:e,postTypes:t,context:n,onSubmit:r,onPostTypeChange:l,onFilterChange:o}){const[a,s]=u.useState(()=>({currentPostType:e.postTypes[0]||"",filterValues:{},activeFilterCount:0,portalActive:!1,loading:!1,resetting:!1,narrowedValues:null,narrowingFilters:!1,lastModifiedFilter:null})),i=u.useRef(!1),c=u.useRef(!1),d=u.useRef(null),b=u.useMemo(()=>t.find(h=>h.key===a.currentPostType),[t,a.currentPostType]),f=u.useMemo(()=>e.filterLists[a.currentPostType]||[],[e.filterLists,a.currentPostType]);u.useEffect(()=>{e.postTypes.length>0&&!e.postTypes.includes(a.currentPostType)&&s(h=>({...h,currentPostType:e.postTypes[0],filterValues:{}}))},[e.postTypes,a.currentPostType]),u.useEffect(()=>{if(!b?.filters)return;const h={};let p=!1;b.filters.forEach(y=>{y.key in a.filterValues||y.value!==null&&y.value!==void 0&&(h[y.key]=y.value,p=!0)}),p&&s(y=>({...y,filterValues:{...y.filterValues,...h}}))},[b?.filters,a.currentPostType]),u.useEffect(()=>{if(n!=="editor"||a.resetting||!b?.filters)return;(e.filterLists?.[a.currentPostType]||[]).forEach(p=>{const y=a.filterValues[p.filterKey];p.defaultValueEnabled&&p.defaultValue!==void 0&&p.defaultValue!==""&&p.defaultValue!==null?y!==p.defaultValue&&y!==null&&s(E=>({...E,filterValues:{...E.filterValues,[p.filterKey]:p.defaultValue}})):y!=null&&s(E=>({...E,filterValues:{...E.filterValues,[p.filterKey]:void 0}}))})},[n,a.currentPostType,e.filterLists,a.resetting,b?.filters]),u.useEffect(()=>{const h=Object.values(a.filterValues).filter(p=>p!=null&&p!==""&&p!==!1).length;s(p=>({...p,activeFilterCount:h}))},[a.filterValues]);const g=u.useCallback(h=>{s(p=>p.currentPostType===h?p:{...p,currentPostType:h,filterValues:{}}),n==="editor"&&l&&l(h),n==="editor"&&o&&o({}),n==="frontend"&&window.dispatchEvent(new CustomEvent("voxel-search-form-post-type-changed",{detail:{searchFormId:e.blockId,postType:h}})),n==="frontend"&&r&&(c.current&&e.updateUrl!==!1&&Qt({},h),c.current=!0,setTimeout(()=>{r({postType:h})},50))},[n,r,l,o,e.updateUrl]),v=u.useCallback((h,p)=>{c.current=!0,s(y=>{const E={...y.filterValues,[h]:p};return n==="editor"&&o&&setTimeout(()=>o(E),0),{...y,filterValues:E,lastModifiedFilter:h}})},[n,o]),k=u.useCallback((h=!1)=>{const p={};b?.filters?.forEach(E=>{E.resets_to!==null&&E.resets_to!==void 0?p[E.key]=E.resets_to:p[E.key]=null});const y=Object.values(p).filter(E=>E!=null&&E!=="").length;if(s(E=>({...E,filterValues:p,activeFilterCount:y,resetting:!0,portalActive:h?!1:E.portalActive,narrowedValues:null,lastModifiedFilter:null})),setTimeout(()=>{s(E=>({...E,resetting:!1}))},100),n==="editor"&&o&&o(p),n==="frontend"){e.updateUrl!==!1&&ss(a.currentPostType);const E=new CustomEvent("voxel-search-clear",{detail:{postType:a.currentPostType}});window.dispatchEvent(E)}},[n,a.currentPostType,o,e.updateUrl,b?.filters]),_=u.useCallback(()=>{s(h=>({...h,portalActive:!h.portalActive}))},[]),C=u.useCallback(async()=>{if(!e.adaptiveFiltering||n!=="frontend")return;if(i.current){i.current=!1;return}const h=f.filter(E=>E.type==="range"||E.type==="terms");if(h.length===0)return;const p=new URLSearchParams;p.set("type",a.currentPostType),a.lastModifiedFilter&&p.set("_last_modified",a.lastModifiedFilter),Object.entries(a.filterValues).forEach(([E,N])=>{N!=null&&N!==""&&(Array.isArray(N)?p.set(E,N.join(",")):typeof N=="object"?p.set(E,JSON.stringify(N)):p.set(E,String(N)))});const y=[];h.forEach(E=>{if(E.type==="terms"){const N=b?.filters?.find(S=>S.key===E.filterKey);if(N?.props?.terms){const S=P=>{P.forEach(U=>{U.term_taxonomy_id&&y.push(U.term_taxonomy_id),U.children&&Array.isArray(U.children)&&S(U.children)})};S(N.props.terms)}}}),s(E=>({...E,narrowingFilters:!0}));try{const E=rt(),N=await fetch(`${E}voxel-fse/v1/search-form/narrow-filters?${p.toString()}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({term_taxonomy_ids:y})});if(!N.ok)throw new Error(`HTTP ${N.status}`);const S=await N.json();S.success&&S.data?(s(P=>({...P,narrowedValues:{ranges:S.data.ranges||{},terms:S.data.terms||{}},narrowingFilters:!1})),i.current=!0):s(P=>({...P,narrowingFilters:!1}))}catch(E){console.error("[useSearchForm] Adaptive filtering error:",E),s(N=>({...N,narrowingFilters:!1}))}},[e.adaptiveFiltering,n,f,a.currentPostType,a.filterValues,b]);u.useEffect(()=>{if(!(!e.adaptiveFiltering||n!=="frontend"))return d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{C()},300),()=>{d.current&&clearTimeout(d.current)}},[a.filterValues,e.adaptiveFiltering,n,C]);const w=u.useCallback((h,p)=>{s(y=>({...y,loading:!0})),r&&r({postType:p,...h}),n==="frontend"&&e.updateUrl!==!1&&c.current&&Qt(h,p),s(y=>({...y,loading:!1}))},[n,r,e.updateUrl]),x=u.useRef(null);u.useEffect(()=>{if(e.searchOn==="change"&&n==="frontend"){const h=JSON.stringify({type:a.currentPostType,filters:a.filterValues});if(x.current===h)return;if(x.current===null){x.current=h;return}x.current=h;const p=setTimeout(()=>{w(a.filterValues,a.currentPostType)},300);return()=>{clearTimeout(p)}}},[a.filterValues,a.currentPostType,e.searchOn,n,w]),u.useEffect(()=>{if(n!=="frontend")return;const h=y=>{y.detail?.searchFormId===e.blockId&&s(N=>({...N,loading:!0}))},p=y=>{y.detail?.searchFormId===e.blockId&&s(N=>({...N,loading:!1}))};return window.addEventListener("voxel-fse:feed-loading",h),window.addEventListener("voxel-fse:feed-loaded",p),()=>{window.removeEventListener("voxel-fse:feed-loading",h),window.removeEventListener("voxel-fse:feed-loaded",p)}},[n,e.blockId]);const T=u.useCallback(()=>{c.current=!0,w(a.filterValues,a.currentPostType)},[w,a.filterValues,a.currentPostType]);return{state:a,setCurrentPostType:g,setFilterValue:v,clearAll:k,togglePortal:_,submit:T,currentPostTypeConfig:b,filterConfigs:f,narrowedValues:a.narrowedValues,narrowingFilters:a.narrowingFilters}}function ss(e){const t=new URL(window.location.href),n=[];t.searchParams.forEach((r,l)=>{(l.startsWith("filter_")||l==="post_type")&&n.push(l),l==="type"&&!e&&n.push(l),l!=="type"&&l!=="page"&&l!=="pg"&&n.push(l)}),n.forEach(r=>t.searchParams.delete(r)),e&&t.searchParams.set("type",e),window.history.replaceState({},"",t.toString())}function as(e,t){return Object.hasOwn(t,e)}function Qt(e,t){const n=new URL(window.location.href),r=[];n.searchParams.forEach((l,o)=>{(o.startsWith("filter_")||o==="post_type")&&r.push(o),(o==="type"||as(o,e))&&r.push(o)}),r.forEach(l=>n.searchParams.delete(l)),t&&n.searchParams.set("type",t),Object.entries(e).forEach(([l,o])=>{if(!(o==null||o==="")&&!(typeof o=="string"&&o==="..")&&!(typeof o=="object"&&!Array.isArray(o)&&!Object.values(o).some(i=>i!=null&&i!=="")))if(Array.isArray(o)){const a=o.join(",");a&&n.searchParams.set(l,a)}else typeof o=="object"?n.searchParams.set(l,JSON.stringify(o)):n.searchParams.set(l,String(o))}),window.history.replaceState({},"",n.toString())}function st(e){return typeof e=="string"&&e.includes("@tags()")}function $t(e){if(!st(e))return e;const t=e.match(/@tags\(\)(.*?)@endtags\(\)/s);return t?t[1]:e}async function en(e,t={}){try{return(await pn({path:"/voxel-fse/v1/dynamic-data/render",method:"POST",data:{expression:e,context:t}})).rendered}catch(n){return console.error("Failed to render dynamic tag:",n),e}}function at(){return typeof document>"u"?!1:document.body.classList.contains("logged-in")}function ls(){return typeof document>"u"?[]:Array.from(document.body.classList).filter(n=>n.startsWith("role-")||["administrator","editor","author","contributor","subscriber"].includes(n)).map(n=>n.replace("role-",""))}function os(e){const t=e.filterKey;switch(t){case"user:logged_in":return at();case"user:logged_out":return!at();case"user:role":{if(!at())return!1;const n=ls(),r=e.value||"";switch(e.operator){case"equals":return n.includes(r);case"not_equals":return!n.includes(r);default:return n.includes(r)}}default:return console.warn(`Unknown visibility rule type: ${t}`),!0}}function is(e){return!e||e.length===0?!0:e.every(t=>os(t))}function cs(e){const{rowVisibility:t="show",visibilityRules:n=[]}=e;if(!n||n.length===0)return!0;const r=is(n);return t==="hide"?!r:r}function ie({isOpen:e,target:t,title:n="",icon:r,saveLabel:l="Save",clearLabel:o="Clear",showClear:a=!0,showSave:s=!0,onSave:i,onClear:c,onClose:d,children:b,className:f="",popupStyle:g}){const v=u.useRef(null),k=u.useRef(null),[_,C]=u.useState({position:"absolute",top:"-9999px",left:"-9999px"}),w=u.useRef(""),x=u.useCallback((E=!1)=>{if(!k.current||!t.current||!v.current)return;const N=t.current,S=v.current,P=k.current,U=document.querySelector('iframe[name="editor-canvas"]'),L=!!U;let j=0,O=0;if(L&&U){const B=U.getBoundingClientRect();j=B.top,O=B.left}const H=L?U?.contentDocument?.documentElement.clientWidth??document.body.clientWidth:document.body.clientWidth,Z=N.getBoundingClientRect(),Y=N.offsetWidth,se=window.pageXOffset||document.documentElement.scrollLeft,$=window.pageYOffset||document.documentElement.scrollTop,F={left:Z.left+se+O,top:Z.top+$+j},R=S.getBoundingClientRect(),D=window.getComputedStyle(P),W=parseFloat(D.minWidth)||0,X=P.querySelector(".pika-single");let Q;if(X){const B=X.classList.contains("is-range")||X.querySelectorAll(".pika-lendar").length>1||P.closest(".ts-booking-date-range")!==null;Q=Math.max(B?640:420,W)}else Q=Math.max(Z.width,W);const ee=F.left+Y/2,ue=(H+O)/2;let ae;ee>ue+1?ae=F.left-Q+Y:ae=F.left;const q=window.innerHeight,m=R.height;let M=F.top+Z.height;const I=Z.bottom+j,V=Z.top+j,K=I+m>q,J=V-m>=0;K&&J&&(M=F.top-m);const A={top:`${M}px`,left:`${ae}px`,width:`${Q}px`,position:"absolute"},G=JSON.stringify(A);G!==w.current&&(w.current=G,E?C(A):requestAnimationFrame(()=>C(A)))},[t]),T=!!document.querySelector('iframe[name="editor-canvas"]');if(u.useEffect(()=>{if(!e)return;const E=document.querySelector('iframe[name="editor-canvas"]'),N=E?.contentDocument,S=L=>{const j=L.target;if(!k.current?.contains(j)&&!(t.current&&t.current.contains(j))){if(E){const O=[".interface-interface-skeleton__sidebar",".block-editor-block-inspector",".components-popover",".components-modal__screen-overlay",".edit-post-sidebar",".interface-interface-skeleton__header",".interface-interface-skeleton__secondary-sidebar"];for(const H of O)if(j.closest(H))return}d()}},P=L=>{const j=L.target;t.current&&t.current.contains(j)||d()},U=requestAnimationFrame(()=>{document.addEventListener("mousedown",S),E&&N?.addEventListener("mousedown",P)});return()=>{cancelAnimationFrame(U),document.removeEventListener("mousedown",S),N?.removeEventListener("mousedown",P)}},[e,d]),u.useEffect(()=>{if(!e)return;const E=N=>{N.key==="Escape"&&d()};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[e,d]),u.useEffect(()=>{if(!e)return;x(!0);const E=()=>x();window.addEventListener("scroll",E,!0);const N=()=>x();window.addEventListener("resize",N,!0);let S=null;return k.current&&(S=new ResizeObserver(()=>x(!0)),S.observe(k.current)),()=>{window.removeEventListener("scroll",E,!0),window.removeEventListener("resize",N,!0),S?.disconnect()}},[e,x]),!e)return null;const h=()=>React.createElement("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M14 1.41L12.59 0L7 5.59L1.41 0L0 1.41L5.59 7L0 12.59L1.41 14L7 8.41L12.59 14L14 12.59L8.41 7L14 1.41Z",fill:"currentColor"})),p=()=>React.createElement("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z",fill:"currentColor"})),y=document.body;return Fe.createPortal(React.createElement("div",{className:`elementor vx-popup ${f}`.trim()},T&&React.createElement("style",null,".vx-popup .ts-popup-root > div::after { pointer-events: none !important; }"),React.createElement("div",{className:"ts-popup-root elementor-element"},React.createElement("div",{className:"ts-form elementor-element",style:_,ref:v},React.createElement("div",{className:"ts-field-popup-container"},React.createElement("div",{className:"ts-field-popup triggers-blur",ref:k,style:g},n&&React.createElement("div",{className:"ts-popup-head flexify ts-sticky-top"},React.createElement("div",{className:"ts-popup-name flexify"},r&&React.createElement("span",{dangerouslySetInnerHTML:{__html:r}}),React.createElement("span",null,n)),React.createElement("ul",{className:"flexify simplify-ul"},React.createElement("li",{className:"flexify ts-popup-close"},React.createElement("a",{href:"#",onClick:E=>{E.preventDefault(),d()},className:"ts-icon-btn","aria-label":"Close"},React.createElement(h,null))))),React.createElement("div",{className:"ts-popup-content-wrapper min-scroll"},b),s||a?React.createElement("div",{className:"ts-popup-controller"},React.createElement("ul",{className:"flexify simplify-ul"},React.createElement("li",{className:"flexify ts-popup-close"},React.createElement("a",{href:"#",onClick:E=>{E.preventDefault(),d()},className:"ts-icon-btn","aria-label":"Close"},React.createElement(h,null))),a&&c&&React.createElement("li",{className:"flexify hide-d",onClick:E=>{E.preventDefault(),c()}},React.createElement("a",{href:"#",className:"ts-icon-btn"},React.createElement(p,null))),a&&c&&React.createElement("li",{className:"flexify hide-m",onClick:E=>{E.preventDefault(),c()}},React.createElement("a",{href:"#",className:"ts-btn ts-btn-1"},o)),s&&React.createElement("li",{className:"flexify"},React.createElement("a",{href:"#",onClick:E=>{E.preventDefault(),i()},className:"ts-btn ts-btn-2"},l)))):React.createElement("div",{className:"ts-popup-controller hide-d"},React.createElement("ul",{className:"flexify simplify-ul"},React.createElement("li",{className:"flexify ts-popup-close"},React.createElement("a",{href:"#",onClick:E=>{E.preventDefault(),d()},className:"ts-icon-btn","aria-label":"Close"},React.createElement(h,null)))))))))),y)}const lt=({value:e,onChange:t,onSelect:n,pickerConfig:r,onPickerReady:l})=>{const o=u.useRef(null),a=u.useRef(null),s=u.useRef(null),i=u.useRef(t),c=u.useRef(n);i.current=t,c.current=n,u.useEffect(()=>{if(!o.current||!a.current)return;const b=window.Pikaday;if(!b){console.error("Pikaday not loaded - window.Pikaday is undefined");return}const f=requestAnimationFrame(()=>{s.current=new b({field:a.current,container:o.current,bound:!1,firstDay:1,keyboardInput:!1,defaultDate:e||void 0,onSelect:g=>{i.current(g),c.current&&c.current(g)},...r}),l&&s.current&&l(s.current)});return()=>{cancelAnimationFrame(f),setTimeout(()=>{s.current?.destroy(),s.current=null},200)}},[]),u.useEffect(()=>{s.current&&(e&&s.current.setDate(e,!0),s.current.draw(!0))},[e]);const d=r?.numberOfMonths>=2;return u.createElement("div",{className:`ts-booking-date ts-form-group${d?" ts-booking-date-range":""}`,ref:o},u.createElement("input",{type:"hidden",ref:a}))};function ot(e,t,n){if(!e||!e.library||!e.value)return t??null;const{library:r,value:l}=e;return r==="icon"?React.createElement("i",{className:l,"aria-hidden":"true"}):r==="svg"?React.createElement("img",{src:l,alt:"",className:n,style:{width:"1em",height:"1em"}}):t??null}const ce={search:React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},React.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.25 2.75C6.14154 2.75 2 6.89029 2 11.998C2 17.1056 6.14154 21.2459 11.25 21.2459C13.5335 21.2459 15.6238 20.4187 17.2373 19.0475L20.7182 22.5287C21.011 22.8216 21.4859 22.8217 21.7788 22.5288C22.0717 22.2359 22.0718 21.761 21.7789 21.4681L18.2983 17.9872C19.6714 16.3736 20.5 14.2826 20.5 11.998C20.5 6.89029 16.3585 2.75 11.25 2.75ZM3.5 11.998C3.5 7.71905 6.96962 4.25 11.25 4.25C15.5304 4.25 19 7.71905 19 11.998C19 16.2769 15.5304 19.7459 11.25 19.7459C6.96962 19.7459 3.5 16.2769 3.5 11.998Z",fill:"#343C54"})),close:React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},React.createElement("path",{d:"M5.9545 5.95548C6.39384 5.51614 7.10616 5.51614 7.5455 5.95548L11.999 10.409L16.4524 5.95561C16.8918 5.51627 17.6041 5.51627 18.0434 5.95561C18.4827 6.39495 18.4827 7.10726 18.0434 7.5466L13.59 12L18.0434 16.4534C18.4827 16.8927 18.4827 17.605 18.0434 18.0444C17.6041 18.4837 16.8918 18.4837 16.4524 18.0444L11.999 13.591L7.5455 18.0445C7.10616 18.4839 6.39384 18.4839 5.9545 18.0445C5.51517 17.6052 5.51516 16.8929 5.9545 16.4535L10.408 12L5.9545 7.54647C5.51516 7.10713 5.51517 6.39482 5.9545 5.95548Z",fill:"#343C54"})),reload:React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},React.createElement("path",{d:"M21.6009 10.4593C22.001 10.3521 22.2384 9.94088 22.1312 9.54078C21.59 7.52089 20.3974 5.73603 18.7384 4.46302C17.0793 3.19001 15.0466 2.5 12.9555 2.5C10.8644 2.5 8.83164 3.19001 7.17262 4.46302C6.12405 5.26762 5.26179 6.2767 4.63257 7.42036L2.86504 6.92617C2.76093 6.89707 2.65423 6.89133 2.55153 6.9068C2.46222 6.91962 2.37374 6.94889 2.29039 6.99582C1.92945 7.19903 1.80158 7.65636 2.00479 8.0173L3.73942 11.0983C3.83701 11.2717 3.99946 11.3991 4.19104 11.4527C4.30333 11.4841 4.42023 11.4886 4.53266 11.4673C4.61373 11.4524 4.69254 11.4242 4.7657 11.383L7.84641 9.64831C8.11073 9.49948 8.25936 9.20608 8.22302 8.90493C8.18668 8.60378 7.9725 8.35417 7.68037 8.27249L6.1241 7.83737C6.6343 6.99996 7.29751 6.2579 8.08577 5.65305C9.48282 4.58106 11.1946 4 12.9555 4C14.7164 4 16.4282 4.58106 17.8252 5.65305C19.2223 6.72504 20.2266 8.22807 20.6823 9.92901C20.7895 10.3291 21.2008 10.5665 21.6009 10.4593Z",fill:"#343C54"}),React.createElement("path",{d:"M4.30739 13.5387C3.90729 13.6459 3.66985 14.0572 3.77706 14.4573C4.31829 16.4771 5.51089 18.262 7.16991 19.535C8.82892 20.808 10.8616 21.498 12.9528 21.498C15.0439 21.498 17.0766 20.808 18.7356 19.535C19.7859 18.7291 20.6493 17.7181 21.2787 16.5722L23.0083 17.0557C23.1218 17.0961 23.2447 17.1091 23.3661 17.0917C23.5554 17.0658 23.7319 16.968 23.8546 16.8116C24.0419 16.573 24.0669 16.245 23.9181 15.9807L22.1835 12.8996C22.0859 12.7263 21.9234 12.5988 21.7319 12.5453C21.64 12.5196 21.5451 12.5119 21.4521 12.5216C21.3493 12.5317 21.2488 12.5629 21.1571 12.6146L18.0764 14.3493C17.7155 14.5525 17.5876 15.0099 17.7909 15.3708C17.9016 15.5675 18.0879 15.695 18.2929 15.7373L19.7875 16.1552C19.2768 16.9949 18.6125 17.7388 17.8225 18.345C16.4255 19.417 14.7137 19.998 12.9528 19.998C11.1918 19.998 9.4801 19.417 8.08305 18.345C6.686 17.273 5.68171 15.77 5.22595 14.069C5.11874 13.6689 4.70749 13.4315 4.30739 13.5387Z",fill:"#343C54"})),filterslider:React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},React.createElement("path",{d:"M8.89789 3.25C10.3318 3.25 11.5358 4.23471 11.8704 5.56481H20.3125C20.7267 5.56481 21.0625 5.90059 21.0625 6.31481C21.0625 6.72902 20.7267 7.06481 20.3125 7.06481H11.8705C11.536 8.3951 10.332 9.38 8.89789 9.38C7.46381 9.38 6.25976 8.3951 5.92527 7.06481H4.3125C3.89829 7.06481 3.5625 6.72902 3.5625 6.31481C3.5625 5.90059 3.89829 5.56481 4.3125 5.56481H5.92537C6.26 4.23471 7.46395 3.25 8.89789 3.25Z",fill:"#343C54"}),React.createElement("path",{d:"M12.737 12.7503H4.3125C3.89829 12.7503 3.5625 12.4145 3.5625 12.0003C3.5625 11.5861 3.89829 11.2503 4.3125 11.2503H12.7369C13.0714 9.91998 14.2754 8.93506 15.7095 8.93506C17.1436 8.93506 18.3477 9.91998 18.6822 11.2503H20.3125C20.7267 11.2503 21.0625 11.5861 21.0625 12.0003C21.0625 12.4145 20.7267 12.7503 20.3125 12.7503H18.682C18.3474 14.0804 17.1435 15.0651 15.7095 15.0651C14.2756 15.0651 13.0717 14.0804 12.737 12.7503Z",fill:"#343C54"}),React.createElement("path",{d:"M12.5932 16.9354C12.2587 15.605 11.0546 14.6201 9.62055 14.6201C8.18645 14.6201 6.9824 15.605 6.64792 16.9354H4.3125C3.89829 16.9354 3.5625 17.2711 3.5625 17.6854C3.5625 18.0996 3.89829 18.4354 4.3125 18.4354H6.64804C6.98268 19.7654 8.18662 20.7501 9.62055 20.7501C11.0545 20.7501 12.2584 19.7654 12.5931 18.4354H20.3125C20.7267 18.4354 21.0625 18.0996 21.0625 17.6854C21.0625 17.2711 20.7267 16.9354 20.3125 16.9354H12.5932Z",fill:"#343C54"})),marker:React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C7.58172 2 4 5.58172 4 10C4 12.9646 5.43348 15.8125 7.5 18C9.16667 19.7708 11 21 12 21C13 21 14.8333 19.7708 16.5 18C18.5665 15.8125 20 12.9646 20 10C20 5.58172 16.4183 2 12 2ZM12 13C13.6569 13 15 11.6569 15 10C15 8.34315 13.6569 7 12 7C10.3431 7 9 8.34315 9 10C9 11.6569 10.3431 13 12 13Z",fill:"#343C54"})),crosshairs:React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C12.5523 2 13 2.44772 13 3V4.06189C16.6187 4.51314 19.4869 7.38128 19.9381 11H21C21.5523 11 22 11.4477 22 12C22 12.5523 21.5523 13 21 13H19.9381C19.4869 16.6187 16.6187 19.4869 13 19.9381V21C13 21.5523 12.5523 22 12 22C11.4477 22 11 21.5523 11 21V19.9381C7.38128 19.4869 4.51314 16.6187 4.06189 13H3C2.44772 13 2 12.5523 2 12C2 11.4477 2.44772 11 3 11H4.06189C4.51314 7.38128 7.38128 4.51314 11 4.06189V3C11 2.44772 11.4477 2 12 2ZM6.07089 11C6.50618 8.48991 8.48991 6.50618 11 6.07089V8C11 8.55228 11.4477 9 12 9C12.5523 9 13 8.55228 13 8V6.07089C15.5101 6.50618 17.4938 8.48991 17.9291 11H16C15.4477 11 15 11.4477 15 12C15 12.5523 15.4477 13 16 13H17.9291C17.4938 15.5101 15.5101 17.4938 13 17.9291V16C13 15.4477 12.5523 15 12 15C11.4477 15 11 15.4477 11 16V17.9291C8.48991 17.4938 6.50618 15.5101 6.07089 13H8C8.55228 13 9 12.5523 9 12C9 11.4477 8.55228 11 8 11H6.07089Z",fill:"#343C54"})),grid:React.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("rect",{x:"3",y:"3",width:"5",height:"5",rx:"1",fill:"currentColor"}),React.createElement("rect",{x:"10",y:"3",width:"5",height:"5",rx:"1",fill:"currentColor"}),React.createElement("rect",{x:"17",y:"3",width:"5",height:"5",rx:"1",fill:"currentColor"}),React.createElement("rect",{x:"3",y:"10",width:"5",height:"5",rx:"1",fill:"currentColor"}),React.createElement("rect",{x:"10",y:"10",width:"5",height:"5",rx:"1",fill:"currentColor"}),React.createElement("rect",{x:"17",y:"10",width:"5",height:"5",rx:"1",fill:"currentColor"}),React.createElement("rect",{x:"3",y:"17",width:"5",height:"5",rx:"1",fill:"currentColor"}),React.createElement("rect",{x:"10",y:"17",width:"5",height:"5",rx:"1",fill:"currentColor"}),React.createElement("rect",{x:"17",y:"17",width:"5",height:"5",rx:"1",fill:"currentColor"}))};function us(e,t){const n={},r=[t];return e.width&&e.width>0&&(n.width=`${e.width}%`,n.flexGrow=0,n.flexShrink=0),e.hideFilter&&r.push("vx-hidden"),e.alignContent&&(n.justifyContent=e.alignContent),e.hideLabel&&r.push("hide-label"),{style:n,className:r.join(" ")}}function ne(e,t){return us(e,t)}function de(e){const t={},n=["ts-field-popup","triggers-blur"];return e.customPopupEnabled&&(e.popupMinWidth&&e.popupMinWidth>0&&(t.minWidth=`${e.popupMinWidth}px`),e.popupMaxWidth&&e.popupMaxWidth>0&&(t.maxWidth=`${e.popupMaxWidth}px`),e.popupMaxHeight&&e.popupMaxHeight>0&&(t.maxHeight=`${e.popupMaxHeight}px`),e.popupCenterPosition&&n.push("ts-popup-centered")),{style:t,className:n.join(" ")}}let tn=!1;function it(){if(tn)return!0;if(!window.Voxel?.mixins?.base)return!1;const e=window.Voxel.mixins.base;return e.mounted&&!e._originalMounted?(e._originalMounted=e.mounted,e.mounted=function(){try{const t=this.$root?.$options?.el||this.$el;if(t){const n=t.closest?.(".elementor-element");if(n)this.widget_id=n.dataset?.id||"";else{const l=t.closest?.("[data-block-id]");this.widget_id=l&&l.dataset?.blockId||""}const r=t.closest?.(".elementor");if(r)this.post_id=r.dataset?.elementorId||"";else{const l=document.body.className.match(/postid-(\d+)/);this.post_id=l?l[1]:""}}e._originalMounted&&e._originalMounted!==e.mounted&&e._originalMounted.call(this)}catch(t){console.warn("[VoxelShim] Error in patched mounted():",t),this.widget_id="",this.post_id=""}},tn=!0,console.log("[VoxelShim] Successfully patched Voxel.mixins.base.mounted"),!0):!1}function nn(){if(it())return;let e=0;const t=50,r=setInterval(()=>{if(e++,it()){clearInterval(r);return}e>=t&&(clearInterval(r),console.warn("[VoxelShim] Voxel.mixins.base not found after 5 seconds"))},100);typeof document<"u"&&document.addEventListener("voxel:ready",()=>{it(),clearInterval(r)},{once:!0})}typeof window<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",nn,{once:!0}):nn()),typeof window<"u"&&typeof window._vx_file_upload_cache>"u"&&(window._vx_file_upload_cache=[]);function ds({config:e,filterData:t,value:n,onChange:r,blockId:l}){const o=l?`voxel-popup-${l}`:"",a=u.useRef(null),s=u.useRef(null),[i,c]=u.useState(!1),[d,b]=u.useState(""),[f,g]=u.useState(""),v=typeof n=="string"?n:"",k=t.props?.placeholder||t.label||"Type keywords...",_=e.displayAs||t.props?.display_as||"popup",C=t.icon||"";u.useEffect(()=>{g(v)},[v]),u.useEffect(()=>{i&&(b(v),setTimeout(()=>{s.current?.focus()},50))},[i,v]);const w=j=>{g(j.target.value)},x=u.useCallback(()=>{const j=f.trim();r(j.length>0?j:"")},[f,r]),T=u.useCallback(j=>{j.key==="Enter"&&(j.preventDefault(),x())},[x]),h=j=>{b(j.target.value)},p=u.useCallback(()=>{c(!0)},[]),y=u.useCallback(()=>{const j=d.trim();r(j.length>0?j:""),c(!1)},[d,r]),E=u.useCallback(()=>{b(""),r("")},[r]),N=u.useCallback(j=>{j.key==="Enter"&&(j.preventDefault(),y())},[y]);if(_==="inline"){const{style:j,className:O}=ne(e,"ts-form-group ts-inline-filter");return React.createElement("div",{className:O,style:j},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{className:"ts-input-icon flexify"},C&&React.createElement("span",{dangerouslySetInnerHTML:{__html:C}}),React.createElement("input",{type:"text",value:f,onChange:w,onBlur:x,onKeyDown:T,placeholder:k,className:"inline-input"})))}const S=v.trim().length>0,{style:P,className:U}=ne(e,"ts-form-group"),L=de(e);return React.createElement("div",{className:U,style:P},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:a,className:`ts-filter ts-popup-target ${S?"ts-filled":""}`,onClick:p,onMouseDown:j=>j.preventDefault(),role:"button",tabIndex:0},C&&React.createElement("span",{dangerouslySetInnerHTML:{__html:C}}),React.createElement("div",{className:"ts-filter-text"},S?v:k)),React.createElement(ie,{isOpen:i,target:a,title:"",icon:C,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:y,onClear:E,onClose:()=>c(!1),className:`${o}${e.popupCenterPosition?" ts-popup-centered":""}`,popupStyle:L.style},React.createElement("div",{className:"ts-input-icon ts-sticky-top flexify"},React.createElement("span",null,ce.search),React.createElement("input",{ref:s,type:"text",value:d,onChange:h,onKeyDown:N,placeholder:k,className:"autofocus border-none"}))))}const fs=()=>window.noUiSlider;function rn(e){if(e==null||e==="")return[];if(Array.isArray(e))return e.map(Number).filter(r=>!isNaN(r));if(typeof e=="string"&&e.includes("..")){const n=e.split(".."),r=[];if(n[0]!==""){const l=Number(n[0]);isNaN(l)||r.push(l)}if(n[1]!==""){const l=Number(n[1]);isNaN(l)||r.push(l)}return r}const t=Number(e);return isNaN(t)?[]:[t]}function ps({config:e,filterData:t,value:n,onChange:r,blockId:l,narrowedValues:o,isNarrowing:a}){const s=[l?`voxel-popup-${l}`:"",e.id?`elementor-repeater-item-${e.id}`:""].filter(Boolean).join(" "),i=u.useRef(null),c=u.useRef(null),d=u.useRef(null),[b,f]=u.useState(!1),g=t.props||{},v=g.range_start??g.min??0,k=g.range_end??g.max??100,_=g.step_size??g.step??1,C=g.placeholder||t.label||"Range",w=e.displayAs||t.props?.display_as||"popup",x=g.handles||"single",T=g.compare||"in_range",h=e.filterKey,p=o?.ranges?.[h],y=p?.min??v,E=p?.max??k,N=typeof g.format=="object"?g.format:{numeric:!1,prefix:"",suffix:""},S=N.prefix||"",P=N.suffix||"",U=t.icon||"",L=x==="single"?[T==="in_range"?E:y]:T==="in_range"?[y,E]:[y,y],j=rn(n),O=j.length>0?j:L,[H,Z]=u.useState(O),Y=u.useCallback(A=>{const G=N.numeric?A.toLocaleString():String(A);return`${S}${G}${P}`},[N.numeric,S,P]),se=u.useCallback(A=>A.map(G=>Y(G)).join("  "),[Y]),$=n!=null&&n!=="",F=$?se(j.length>0?j:H):C,R=se(H),D=u.useCallback(()=>{if(!c.current||d.current)return;let A,G;x==="single"?(G=T==="in_range"?[1,0]:[0,1],A=[...H]):(G=T==="in_range"?[0,1,0]:[1,0,1],A=[...H]);const B=fs();if(!B){console.error("noUiSlider not loaded - window.noUiSlider is undefined");return}B.create(c.current,{start:A,connect:G,range:{min:y,max:E},step:_,behaviour:"tap-drag"}),d.current=c.current.noUiSlider,d.current.on("update",te=>{Z(te.map(z=>Number(z)))}),requestAnimationFrame(()=>{d.current&&d.current.set(A,!1)})},[x,T,H,y,E,_]),W=u.useCallback(()=>{d.current&&(d.current.destroy(),d.current=null)},[]);u.useEffect(()=>{const A=rn(n),G=A.length>0?A:L;Z(G),d.current&&(d.current.set(G,!1),requestAnimationFrame(()=>{d.current&&d.current.set(G,!1)}))},[n,y,E,x,T]),u.useEffect(()=>{if(b&&w==="popup"){const A=setTimeout(()=>{D()},100);return()=>clearTimeout(A)}return()=>{w==="popup"&&W()}},[b,w,D,W]),u.useEffect(()=>{if(w==="inline")return D(),()=>W()},[w,D,W]),u.useEffect(()=>{if(!d.current||!p)return;const A=H.map(G=>G<y?y:G>E?E:G);d.current.updateOptions({range:{min:y,max:E},start:A}),Z(A)},[p,y,E,x]);const X=u.useCallback(()=>{f(!0)},[]),Q=u.useCallback(A=>!A.length||A.some(G=>typeof G!="number")?!1:A.join("..")!==L.join(".."),[L]),ee=u.useCallback(A=>Q(A)?A.join(".."):null,[Q]),ue=A=>{const B=[A.target.value===""?y:Number(A.target.value),H[1]??E];Z(B),d.current&&d.current.set(B),w==="minmax"&&r(ee(B))},ae=A=>{const G=A.target.value===""?E:Number(A.target.value),B=[H[0]??y,G];Z(B),d.current&&d.current.set(B),w==="minmax"&&r(ee(B))},q=u.useCallback(()=>{r(ee(H)),f(!1)},[H,ee,r]),m=u.useCallback(()=>{Z(L),d.current&&d.current.set(L),r(null)},[L,r]),M=()=>React.createElement("div",{className:"ts-minmax"},React.createElement("input",{type:"number",className:"inline-input input-no-icon",placeholder:String(y),value:H[0]??y,onChange:ue,min:y,max:typeof H[1]=="number"?H[1]:E,step:_}),React.createElement("input",{type:"number",className:"inline-input input-no-icon",placeholder:String(E),value:H[1]??E,onChange:ae,min:typeof H[0]=="number"?H[0]:y,max:E,step:_})),I=()=>React.createElement("div",{className:`range-slider-wrapper${a?" ts-loading":""}`},React.createElement("div",{className:"range-value"},R),React.createElement("div",{ref:c,className:"range-slider"}),p&&(p.min!==v||p.max!==k)&&React.createElement("div",{className:"range-narrowed-indicator"},React.createElement("small",null,"Showing ",Y(y),"  ",Y(E)," based on current results")));if(w==="minmax"&&x==="double"){const{style:A,className:G}=ne(e,"ts-form-group");return React.createElement("div",{className:G,style:A},!e.hideLabel&&React.createElement("label",null,t.label),M())}if(w==="inline"){const{style:A,className:G}=ne(e,"ts-form-group ts-inline-filter");return React.createElement("div",{className:G,style:A},!e.hideLabel&&React.createElement("label",null,t.label),I())}const{style:V,className:K}=ne(e,"ts-form-group"),J=de(e);return React.createElement("div",{className:K,style:V},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:i,className:`ts-filter ts-popup-target ${$?"ts-filled":""}`,onClick:X,onMouseDown:A=>A.preventDefault(),role:"button",tabIndex:0},U&&React.createElement("span",{dangerouslySetInnerHTML:{__html:U}}),React.createElement("div",{className:"ts-filter-text"},F),React.createElement("div",{className:"ts-down-icon"})),React.createElement(ie,{isOpen:b,target:i,title:"",icon:U,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:q,onClear:m,onClose:()=>f(!1),className:`${s}${e.popupCenterPosition?" ts-popup-centered":""}`,popupStyle:J.style},React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,t.label,t.description&&React.createElement("small",null,t.description)),I())))}function ms(e,t){let n=null;return function(...r){n&&clearTimeout(n),n=setTimeout(()=>e.apply(this,r),t)}}function hs({config:e,filterData:t,value:n,onChange:r,blockId:l}){const o=l?`voxel-popup-${l}`:"",a=t.props||{},s=typeof a.range_start=="number"?a.range_start:0,i=typeof a.range_end=="number"?a.range_end:1e3,c=typeof a.step_size=="number"?a.step_size:1,d=typeof a.precision=="number"?a.precision:0,b=a.placeholder||t.label||"Any",f=e.displayAs||a.display_as||"popup",g=t.icon||"",v=u.useRef(null),k=u.useRef(null),[_,C]=u.useState(!1),[w,x]=u.useState(typeof n=="number"?n:""),T=u.useCallback(F=>{if(F===""||typeof F!="number"||isNaN(F))return"";let R=F;return R<s&&(R=s),R>i&&(R=i),Number(R.toFixed(d))},[s,i,d]),h=u.useCallback(F=>typeof F=="number",[]),p=u.useCallback(F=>{const R=T(F);h(R)?r(R):r("")},[T,h,r]),y=u.useMemo(()=>ms(F=>p(F),300),[p]);u.useEffect(()=>{x(typeof n=="number"?n:"")},[n]),u.useEffect(()=>{_&&x(typeof n=="number"?n:"")},[_,n]);const E=F=>{F.preventDefault();let R;typeof w!="number"?R=s:(R=T(w+c),typeof R!="number"&&(R=s)),x(R),f==="inline"&&y(R)},N=F=>{F.preventDefault();let R;typeof w!="number"?R=s:(R=T(w-c),typeof R!="number"&&(R=s)),x(R),f==="inline"&&y(R)},S=F=>{const R=F.target.value;if(R===""){x(""),f==="inline"&&y("");return}const D=parseFloat(R);if(!isNaN(D)){const W=T(D);x(W),f==="inline"&&y(W)}},P=u.useCallback(()=>{p(w)},[w,p]),U=u.useCallback(()=>{C(!0)},[]),L=u.useCallback(()=>{p(w),C(!1)},[w,p]),j=u.useCallback(()=>{x(""),r(""),k.current?.focus()},[r]),O=typeof n=="number"?n:null,H=F=>React.createElement("div",{className:"ts-stepper-input flexify"},React.createElement("button",{type:"button",className:`ts-stepper-left ts-icon-btn${F?" inline-btn-ts":""}`,onClick:N},React.createElement("i",{className:"las la-minus"})),React.createElement("input",{ref:k,type:"number",className:"ts-input-box",min:s,max:i,step:c,value:w,onChange:S,onBlur:F?P:void 0,placeholder:b}),React.createElement("button",{type:"button",className:`ts-stepper-right ts-icon-btn${F?" inline-btn-ts":""}`,onClick:E},React.createElement("i",{className:"las la-plus"})));if(f==="inline"){const{style:F,className:R}=ne(e,"ts-form-group ts-inline-filter");return React.createElement("div",{className:R,style:F},!e.hideLabel&&React.createElement("label",null,t.label),H(!0))}const Z=typeof n=="number",{style:Y,className:se}=ne(e,"ts-form-group"),$=de(e);return React.createElement("div",{className:se,style:Y},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:v,className:`ts-filter ts-popup-target ${Z?"ts-filled":""}`,onClick:U,onMouseDown:F=>F.preventDefault(),role:"button",tabIndex:0},g&&React.createElement("span",{dangerouslySetInnerHTML:{__html:g}}),React.createElement("div",{className:"ts-filter-text"},O!==null?O:b),React.createElement("div",{className:"ts-down-icon"})),React.createElement(ie,{isOpen:_,target:v,title:"",icon:g,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:L,onClear:j,onClose:()=>C(!1),className:`${o}${e.popupCenterPosition?" ts-popup-centered":""}`,popupStyle:$.style},React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,t.label,t.description&&React.createElement("small",null,t.description)),H(!1))))}function ys(e){return e==null||e===""?[]:typeof e=="string"?e.split(",").map(t=>t.trim()).filter(t=>t!==""):Array.isArray(e)?e.length>0&&typeof e[0]=="string"?e:e.length>0&&typeof e[0]=="number"?e.map(String):[]:[]}function ct(e){return e.length===0?null:e.join(",")}function gs({config:e,filterData:t,value:n,onChange:r,blockId:l,narrowedValues:o,isNarrowing:a}){const s=l?`voxel-popup-${l}`:"",i=u.useRef(null),c=u.useRef(null),[d,b]=u.useState(!1),[f,g]=u.useState(""),v=t.props||{},k=v.multiple??!0,_=v.taxonomy_label??"",C=v.placeholder||t.label||_||"Select",w=e.displayAs||v.display_as||"popup",x=e.hideEmptyTerms??v.hide_empty_terms??!1,T=v.per_page??20,[h,p]=u.useState(1),y=t.icon||"",E=v.taxonomy||e.filterKey,N=o?.terms?.[E],S=u.useCallback(m=>{const M=(I,V,K)=>{const J={...I,parentRef:V||void 0,hasSelection:!1,depth:K};return I.children&&I.children.length>0&&(J.children=I.children.map(A=>M(A,J,K+1))),J};return m.map(I=>M(I,null,0))},[]),P=u.useMemo(()=>{const m=v.terms||[];return S(m)},[v,S]),U=u.useMemo(()=>{const m=new Map,M=I=>{m.set(I.slug,I),I.children&&I.children.forEach(V=>M(V))};return P.forEach(I=>M(I)),m},[P]),L=u.useMemo(()=>{const m=[],M=I=>{I.forEach(V=>{x&&N&&V.term_taxonomy_id&&N[V.term_taxonomy_id]===0||(m.push(V),V.children&&V.children.length>0&&M(V.children))})};return M(P),m},[P,x,N]),j=u.useCallback(m=>!N||!m.term_taxonomy_id?null:N[m.term_taxonomy_id]??null,[N]),O=u.useMemo(()=>ys(n),[n]),H=u.useCallback(m=>m.slug?O.includes(m.slug):!1,[O]),Z=u.useMemo(()=>L.filter(m=>m.slug&&O.includes(m.slug)),[L,O]),Y=u.useMemo(()=>{const m=T*h;return L.slice(0,m)},[L,T,h]),se=L.length>T*h,$=u.useMemo(()=>{if(!f)return Y;const m=f.toLowerCase();return L.filter(M=>M.label.toLowerCase().includes(m))},[L,Y,f]);u.useEffect(()=>{d&&(g(""),L.length>=15&&setTimeout(()=>c.current?.focus(),50))},[d,L.length]);const F=u.useCallback(()=>{b(!0)},[]),R=u.useCallback(m=>{const M=m.slug;if(M)if(k){let I=[...O];if(I.includes(M)){I=I.filter(K=>K!==M);let V=m.parentRef;for(;V;)V.children?.some(J=>I.includes(J.slug)||J.hasSelection)||(V.hasSelection=!1),V=V.parentRef;r(ct(I))}else{I.push(M);let V=m.parentRef;for(;V;)I=I.filter(J=>J!==V.slug),V.hasSelection=!0,V=V.parentRef;const K=new Set;I.forEach(J=>{const A=U.get(J);if(!A)return;let G=A.parentRef;const B=[];let te=!1;for(;G;){if(G.slug===M){te=!0;break}B.push(G),G=G.parentRef}te&&(K.add(A.slug),B.forEach(z=>{z.hasSelection=!1}))}),I=I.filter(J=>!K.has(J)),r(ct(I))}}else r(ct([M])),w!=="inline"&&b(!1)},[k,O,r,U,w]),D=u.useCallback(()=>{b(!1)},[]),W=u.useCallback(()=>{r(null)},[r]),X=O.length>0,Q=X&&Z[0]?.label||C,ee=Z.length>1?Z.length-1:0;if(w==="inline"){const{style:m,className:M}=ne(e,"ts-form-group inline-terms-wrapper ts-inline-filter min-scroll");return React.createElement("div",{className:`${M}${a?" ts-loading":""}`,style:m},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{className:"ts-term-dropdown ts-multilevel-dropdown inline-multilevel"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list"},Y.map(I=>{const V=H(I),K=j(I),J=K===0;return React.createElement("li",{key:I.slug,className:`${V?"ts-selected":""}${J?" ts-disabled":""}`},React.createElement("a",{href:"#",className:"flexify",onClick:A=>{A.preventDefault(),J||R(I)}},React.createElement("div",{className:"ts-checkbox-container"},React.createElement("label",{className:`container-${k?"checkbox":"radio"}`},React.createElement("input",{type:k?"checkbox":"radio",checked:V,readOnly:!0,disabled:!0,hidden:!0}),React.createElement("span",{className:"checkmark"}))),React.createElement("span",null,I.depth>0?" ".repeat(I.depth):"",I.label),K!==null&&React.createElement("span",{className:"ts-term-count"},"(",K,")"),I.icon&&React.createElement("div",{className:"ts-term-icon",dangerouslySetInnerHTML:{__html:I.icon}})))}),se&&React.createElement("li",{className:"ts-term-centered"},React.createElement("a",{href:"#",onClick:I=>{I.preventDefault(),p(V=>V+1)},className:"flexify"},React.createElement("div",{className:"ts-term-icon"},ce.reload||React.createElement("span",null,"")),React.createElement("span",null,"Load more"))))))}if(w==="buttons"){const{style:m,className:M}=ne(e,"ts-form-group");return React.createElement("div",{className:M,style:m},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("ul",{className:"simplify-ul addon-buttons flexify"},L.map(I=>{const V=H(I);return React.createElement("li",{key:I.slug,className:`flexify ${V?"adb-selected":""}`,onClick:()=>R(I)},I.label)})))}const{style:ue,className:ae}=ne(e,"ts-form-group"),q=de(e);return React.createElement("div",{className:ae,style:ue},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:i,className:`ts-filter ts-popup-target ${X?"ts-filled":""}`,onClick:F,onMouseDown:m=>m.preventDefault(),role:"button",tabIndex:0},y&&React.createElement("span",{dangerouslySetInnerHTML:{__html:y}}),React.createElement("div",{className:"ts-filter-text"},Q,ee>0&&React.createElement("span",{className:"term-count"},"+",ee)),React.createElement("div",{className:"ts-down-icon"})),React.createElement(ie,{isOpen:d,target:i,title:"",icon:y,saveLabel:"Save",clearLabel:"Clear",showClear:!0,showSave:k,onSave:D,onClear:W,onClose:()=>b(!1),className:`${s}${e.popupCenterPosition?" ts-popup-centered":""}`,popupStyle:q.style},L.length>=15&&React.createElement("div",{className:"ts-sticky-top uib b-bottom"},React.createElement("div",{className:"ts-input-icon flexify"},React.createElement("span",null,ce.search),React.createElement("input",{ref:c,type:"text",value:f,onChange:m=>g(m.target.value),placeholder:"Search",className:"autofocus"}))),React.createElement("div",{className:`ts-term-dropdown ts-multilevel-dropdown ts-md-group${a?" ts-loading":""}`},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list"},$.map(m=>{const M=H(m),I=j(m),V=I===0;return React.createElement("li",{key:m.slug,className:`${M?"ts-selected":""}${V?" ts-disabled":""}`},React.createElement("a",{href:"#",className:"flexify",onClick:K=>{K.preventDefault(),V||R(m)}},React.createElement("div",{className:"ts-checkbox-container"},React.createElement("label",{className:`container-${k?"checkbox":"radio"}`},React.createElement("input",{type:k?"checkbox":"radio",checked:M,readOnly:!0,disabled:!0,hidden:!0}),React.createElement("span",{className:"checkmark"}))),React.createElement("span",null,m.depth>0?" ".repeat(m.depth):"",m.label),I!==null&&React.createElement("span",{className:"ts-term-count"},"(",I,")"),m.icon&&React.createElement("div",{className:"ts-term-icon",dangerouslySetInnerHTML:{__html:m.icon}})))}),!f&&se&&React.createElement("li",{className:"ts-term-centered"},React.createElement("a",{href:"#",onClick:m=>{m.preventDefault(),p(M=>M+1)},className:"flexify"},React.createElement("div",{className:"ts-term-icon"},ce.reload||React.createElement("span",null,"")),React.createElement("span",null,"Load more")))),$.length===0&&React.createElement("div",{className:"ts-empty-user-tab"},y&&React.createElement("span",{dangerouslySetInnerHTML:{__html:y}}),React.createElement("p",null,"No results found")))))}const bs=()=>window.noUiSlider;function Re(e){return!e||!e.address?null:e.method==="radius"&&e.lat!==void 0&&e.lng!==void 0?`${e.address};${e.lat},${e.lng},${e.radius||10}`:e.swlat!==void 0&&e.swlng!==void 0&&e.nelat!==void 0&&e.nelng!==void 0?`${e.address};${e.swlat},${e.swlng}..${e.nelat},${e.nelng}`:e.lat!==void 0&&e.lng!==void 0?`${e.address};${e.lat},${e.lng},${e.radius||10}`:e.address}function vs(e,t){if(e==null||e==="")return null;if(typeof e=="string"){const n=e.indexOf(";");if(n===-1)return{address:e};const r=e.substring(0,n),l=e.substring(n+1);if(l.includes("..")){const a=l.split(".."),s=a[0].split(","),i=a[1].split(",");return{address:r,method:"area",swlat:Number(s[0]),swlng:Number(s[1]),nelat:Number(i[0]),nelng:Number(i[1])}}const o=l.split(",");return{address:r,method:"radius",lat:Number(o[0]),lng:Number(o[1]),radius:o[2]?Number(o[2]):t}}return typeof e=="object"?e:null}function Es({config:e,filterData:t,value:n,onChange:r,blockId:l}){const o=l?`voxel-popup-${l}`:"",a=u.useRef(null),s=u.useRef(null),i=u.useRef(null),c=u.useRef(null),d=u.useRef(null),[b,f]=u.useState(!1),[g,v]=u.useState(!1),k=u.useRef(null),_=t.props||{},C=_.radius||{},w=C.default??10,x=C.min??0,T=C.max??100,h=C.step??1,p=C.units||"km",y=_.display_proximity_as||"popup",E=_.placeholder||t.label||"Location",N=_.default_search_method||"area";(_.l10n||{}).visibleArea;const P=e.displayAs||t.props?.display_as||"popup",U=t.icon||"",L=vs(n,w)||{},[j,O]=u.useState(L.address||""),[H,Z]=u.useState(L.radius||w),Y=u.useCallback(z=>Math.round(z*1e6)/1e6,[]),se=u.useCallback(z=>`${z}${p==="mi"?"mi":"km"}`,[p]),$=u.useCallback(()=>{if(!c.current||d.current)return;const z=bs();if(!z){console.error("noUiSlider not loaded - window.noUiSlider is undefined");return}z.create(c.current,{start:H,connect:[!0,!1],step:h,range:{min:x,max:T},behaviour:"tap-drag"}),d.current=c.current.noUiSlider,d.current.on("update",fe=>{Z(Math.round(Number(fe[0])))}),d.current.on("change",fe=>{const me=Math.round(Number(fe[0]));y==="inline"&&L.lat&&r(Re({...L,radius:me}))})},[H,h,x,T,y,L,r]),F=u.useCallback(()=>{d.current&&(d.current.destroy(),d.current=null)},[]);u.useEffect(()=>{if(y==="inline"&&L.lat){const z=setTimeout(()=>$(),50);return()=>{clearTimeout(z),F()}}},[y,L.lat,$,F]),u.useEffect(()=>{if(g){const z=setTimeout(()=>$(),50);return()=>clearTimeout(z)}return()=>F()},[g,$,F]),u.useEffect(()=>{const z=L.radius||w;Z(z),d.current&&d.current.set([z])},[L.radius,w]);const R=u.useCallback(()=>{if(i.current||!s.current||typeof window>"u")return;const z=window.Voxel?.Maps;if(!z){console.warn("Voxel.Maps not available for autocomplete");return}z.await(()=>{if(i.current)return;const fe=e.autocomplete||{};i.current=new z.Autocomplete(s.current,me=>{if(me){const un=me.viewport.getSouthWest(),dn=me.viewport.getNorthEast(),Xs={address:me.address,method:N,swlat:Y(un.getLatitude()),swlng:Y(un.getLongitude()),nelat:Y(dn.getLatitude()),nelng:Y(dn.getLongitude()),lat:Y(me.latlng.getLatitude()),lng:Y(me.latlng.getLongitude()),radius:L.radius||w};O(me.address),r(Re(Xs)),P==="popup"&&f(!1)}else O(""),r(null)},fe)})},[e.autocomplete,r,P,w,N,L.radius,Y]);u.useEffect(()=>{(b||P==="inline")&&(O(L.address||""),b&&setTimeout(()=>s.current?.focus(),50))},[b,P,L.address]);const D=u.useCallback(()=>{f(!0)},[]),W=u.useCallback(()=>{R()},[R]),X=z=>{O(z.target.value),P==="inline"&&(z.target.value?r(Re({...L,address:z.target.value})):r(null))},Q=z=>{z.preventDefault(),z.stopPropagation(),"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(fe=>{const me={address:"Current Location",method:"radius",lat:fe.coords.latitude,lng:fe.coords.longitude,radius:w};O("Current Location"),r(Re(me)),P==="popup"&&f(!1)},fe=>{console.error("Geolocation error:",fe)})},ee=u.useCallback(()=>{r(j?Re({...L,address:j}):null),f(!1)},[j,L,r]),ue=u.useCallback(()=>{O(""),r(null)},[r]),ae=u.useCallback(z=>{z.key==="Enter"&&(z.preventDefault(),ee())},[ee]),q=u.useCallback(()=>{L.lat&&r(Re({...L,radius:H})),v(!1)},[L,H,r]),m=u.useCallback(()=>{Z(w),d.current&&d.current.set([w]),L.lat&&r(Re({...L,radius:w}))},[w,L,r]),M=!!L.address||!!L.lat,I=M?L.address||"Location set":E,V=()=>React.createElement("div",{className:"ts-input-icon flexify",style:{position:"relative"}},U&&React.createElement("span",{dangerouslySetInnerHTML:{__html:U}}),React.createElement("input",{ref:s,type:"text",className:"inline-input",placeholder:E,value:j,onChange:X,onKeyDown:ae,onFocus:W}),React.createElement("a",{href:"#",className:"inline-user-location ts-icon-btn",onClick:Q,title:"Use my location","aria-label":"Use my location"},ce.crosshairs)),K=()=>React.createElement("div",{className:"range-slider-wrapper"},React.createElement("div",{className:"range-value"},se(H)),React.createElement("div",{ref:c,className:"range-slider"})),J=()=>!L.lat||y==="inline"?null:React.createElement("div",{className:"ts-form-group ts-proximity-filter"},React.createElement("label",null,_.proximity_label||"Radius"),React.createElement("div",{ref:k,className:`ts-filter ts-popup-target ${L.radius?"ts-filled":""}`,onClick:()=>v(!0),onMouseDown:z=>z.preventDefault(),role:"button",tabIndex:0},React.createElement("div",{className:"ts-filter-text"},se(L.radius||w)),React.createElement("div",{className:"ts-down-icon"})),React.createElement(ie,{isOpen:g,target:k,title:"",saveLabel:"Save",clearLabel:"Reset",showClear:!0,onSave:q,onClear:m,onClose:()=>v(!1),className:`${o}${e.popupCenterPosition?" ts-popup-centered":""}`,popupStyle:te.style},React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,_.proximity_label||"Search radius"),K()))),A=()=>y!=="inline"||!L.lat?null:React.createElement("div",{className:"ts-form-group ts-inline-proximity"},React.createElement("label",null,_.proximity_label||"Radius",": ",se(H)),React.createElement("div",{ref:c,className:"range-slider"}));if(P==="inline"){const{style:z,className:fe}=ne(e,"ts-form-group ts-inline-filter");return React.createElement(React.Fragment,null,React.createElement("div",{className:fe,style:z},!e.hideLabel&&React.createElement("label",null,t.label),V()),A(),J())}const{style:G,className:B}=ne(e,"ts-form-group"),te=de(e);return React.createElement(React.Fragment,null,React.createElement("div",{className:B,style:G},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:a,className:`ts-filter ts-popup-target ${M?"ts-filled":""}`,onClick:D,onMouseDown:z=>z.preventDefault(),role:"button",tabIndex:0},U&&React.createElement("span",{dangerouslySetInnerHTML:{__html:U}}),React.createElement("div",{className:"ts-filter-text"},I),React.createElement("div",{className:"ts-down-icon"})),React.createElement(ie,{isOpen:b,target:a,title:"",icon:U,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:ee,onClear:ue,onClose:()=>f(!1),className:`${o}${e.popupCenterPosition?" ts-popup-centered":""}`,popupStyle:te.style},React.createElement("div",{className:"ts-form-group"},V()))),A(),J())}function ws(e){if(e==null||e==="")return{date:"",slots:1};if(typeof e=="string")return{date:e,slots:1};if(typeof e=="object"){const t=e;return{date:t.date||"",slots:t.slots||1}}return{date:"",slots:1}}const Le=e=>{if(!e)return null;try{const t=new Date(e+"T00:00:00");return isFinite(t.getTime())?t:null}catch{return null}},_e=e=>{if(!e)return null;const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`},Ce=e=>{if(!e)return"";try{const t=new Date(e+"T00:00:00");return isFinite(t.getTime())?t.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):""}catch{return e}};function Ss({config:e,filterData:t,value:n,onChange:r,blockId:l}){const o=[l?`voxel-popup-${l}`:"",e.id?`elementor-repeater-item-${e.id}`:""].filter(Boolean).join(" "),a=u.useRef(null),s=u.useRef(null),[i,c]=u.useState(!1),d=u.useRef(null),b=u.useRef(null),f=t.props||{},v=(f.inputMode||"date-range")==="date-range",k=f.l10n||{},_=k.pickDate||t.label||"Choose date",C=f.presets||[],w=t.icon||"",x=ws(n),T=x.date,h=x.slots;let p="",y="";v&&T&&T.includes("..")?[p,y]=T.split(".."):!v&&T&&(p=T);const[E,N]=u.useState(()=>Le(p)),[S,P]=u.useState(()=>Le(y)),[U,L]=u.useState("start"),[j,O]=u.useState(h);d.current=E,b.current=S;const H=u.useCallback(q=>{const m=d.current,M=b.current,I=s.current;if(!m||M||!I)return;const V=q.target,K=V.tagName==="TD"?V:V.closest("td");if(!K||K.classList.contains("is-empty")||K.classList.contains("is-disabled"))return;const J=K.querySelector(".pika-button");if(!J||J.disabled)return;K.classList.add("is-endrange");const A=new Date(parseInt(J.getAttribute("data-pika-year")||"0"),parseInt(J.getAttribute("data-pika-month")||"0"),parseInt(J.getAttribute("data-pika-day")||"0")),G=864e5,B=new Date(A.getTime()-G);for(;B>m;){const te=`.pika-button[data-pika-year="${B.getFullYear()}"][data-pika-month="${B.getMonth()}"][data-pika-day="${B.getDate()}"]`;I.el.querySelector(te)?.parentElement?.classList.add("is-inrange"),B.setTime(B.getTime()-G)}K.addEventListener("mouseleave",()=>{I.el.querySelectorAll("td.is-inrange:not(.is-disabled)").forEach(z=>z.classList.remove("is-inrange")),K.classList.remove("is-endrange")},{once:!0})},[]);u.useEffect(()=>{if(i){if(v&&T&&T.includes("..")){const[q,m]=T.split("..");N(Le(q)),P(Le(m))}else!v&&T&&N(Le(T));O(h),L("start")}},[i,v,T,h]);const Z=u.useCallback(()=>{c(!0)},[]),Y=u.useCallback(q=>{if(v&&q&&s.current)if(U==="start")N(q),P(null),L("end"),s.current.setStartRange(q),s.current.setEndRange(null),s.current.draw();else if(E&&q<E)N(q),P(null),s.current.setStartRange(q),s.current.setEndRange(null),s.current.draw();else{P(q),L("start"),s.current.setEndRange(q),s.current.draw();const m=_e(E),M=_e(q);m&&M&&(r(`${m}..${M}`),c(!1))}else N(q)},[v,U,E,r]);u.useCallback(q=>{O(Number(q.target.value)||1)},[]);const se=u.useCallback(q=>{if(v){const m=_e(E),M=_e(S);m&&M&&r(`${m}..${M}`)}else{const M=_e(q!==void 0?q:E);M&&r(M)}c(!1)},[v,E,S,r]),$=u.useCallback(()=>{N(null),P(null),O(1),r(null),s.current&&(s.current.setStartRange(null),s.current.setEndRange(null))},[r]),F=u.useCallback(q=>{r(q)},[r]),R=u.useCallback(()=>typeof n=="string"&&n.includes(".."),[n]),D=v?!!(p&&y):!!T,W=v?R():!!n,X=u.useCallback(q=>n===q,[n]),Q=u.useMemo(()=>{if(v&&C.length>0){if(R()){const q=Ce(p),m=Ce(y);return`${q} - ${m}`}return _}if(!D)return _;if(v){const q=Ce(p),m=Ce(y),M=`${q}  ${m}`;return h>1?`${M} (${h})`:M}else{const q=Ce(T);return h>1?`${q} (${h})`:q}},[v,C.length,R,D,p,y,T,h,_]),{style:ee,className:ue}=ne(e,"ts-form-group"),ae=de(e);return React.createElement(React.Fragment,null,v&&C.map(q=>React.createElement("div",{key:q.key,className:ue,style:ee},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{className:`ts-filter ${X(q.key)?"ts-filled":""}`,onClick:()=>F(q.key),role:"button",tabIndex:0},React.createElement("div",{className:"ts-filter-text"},React.createElement("span",null,q.label))))),React.createElement("div",{className:ue,style:ee},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:a,className:`ts-filter ts-popup-target ${W?"ts-filled":""}`,onClick:Z,onMouseDown:q=>q.preventDefault(),role:"button",tabIndex:0},w&&React.createElement("span",{dangerouslySetInnerHTML:{__html:w}}),React.createElement("div",{className:"ts-filter-text"},Q),React.createElement("div",{className:"ts-down-icon"})),React.createElement(ie,{isOpen:i,target:a,title:"",icon:w,saveLabel:k.save||"Save",clearLabel:k.clear||"Clear",showSave:v,onSave:se,onClear:$,onClose:()=>c(!1),className:`${o}${v?" ts-availability-wrapper xl-height xl-width":" md-width xl-height"}${e.popupCenterPosition?" ts-popup-centered":""}`,popupStyle:ae.style},v&&React.createElement("div",{className:"ts-popup-head flexify"},React.createElement("div",{className:"ts-popup-name flexify"},w&&React.createElement("span",{dangerouslySetInnerHTML:{__html:w}}),React.createElement("span",null,React.createElement("span",{className:U==="start"?"chosen":"",onClick:()=>L("start"),style:{cursor:"pointer"}},E?Ce(_e(E)):k.checkIn||"Check-in"),React.createElement("span",null,"  "),React.createElement("span",{className:U==="end"?"chosen":"",onClick:()=>L("end"),style:{cursor:"pointer"}},S?Ce(_e(S)):k.checkOut||"Check-out")))),React.createElement(lt,{value:E,onChange:Y,...!v&&{onSelect:se},pickerConfig:{minDate:new Date,...v?{numberOfMonths:2,theme:"pika-range",onDraw:q=>q.el.addEventListener("mouseover",H)}:{}},onPickerReady:q=>{s.current=q,v&&E&&(q.setStartRange(E),S&&q.setEndRange(S))}}))))}function Rs(e,t){if(e==null||e==="")return{from:"",to:""};if(typeof e=="string"){if(t&&e.includes("..")){const n=e.split("..");return{from:n[0]||"",to:n[1]||""}}return{from:e,to:""}}return{from:"",to:""}}function ut(e,t,n){return!e&&!t?null:n?e&&t?`${e}..${t}`:e?`${e}..`:t?`..${t}`:null:e||null}const ve=e=>{if(!e)return null;try{const t=new Date(e+"T00:00:00");return isFinite(t.getTime())?t:null}catch{return null}},Me=e=>{if(!e)return null;const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`},Te=e=>{if(!e)return"";try{const t=new Date(e+"T00:00:00");return isFinite(t.getTime())?t.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):""}catch{return e}},sn=e=>e?e.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):"";function _s(e){return typeof e=="string"&&e.includes("..")}function an({config:e,filterData:t,value:n,onChange:r,blockId:l}){const o=l?`voxel-popup-${l}`:"",a=u.useRef(null),s=t.props||{},i=s.inputMode==="date-range"||s.inputMode===void 0,c=s.l10n||{},d=c.from||"From",b=c.to||"To",f=c.pickDate||"Choose date",g=i?s.presets||[]:[],v=s.displayValue||{start:null,end:null},k=t.icon||"",_=Rs(n,i),C=_.from,w=_.to,[x,T]=u.useState(!1),[h,p]=u.useState(!1),[y,E]=u.useState(()=>ve(C)),[N,S]=u.useState("start"),[P,U]=u.useState(()=>ve(C)),[L,j]=u.useState(()=>ve(w)),O=u.useRef(null),H=u.useCallback(()=>{E(ve(C)),p(!0)},[C]),Z=u.useCallback((B="start")=>{const te=ve(C),z=ve(w);U(te),j(z),S(B==="end"&&!z?"start":B),p(!0)},[C,w]),Y=u.useCallback(B=>{E(B)},[]),se=u.useCallback(B=>{T(!0);const z=Me(B!==void 0?B:y)||"";r(ut(z,"",!1)),p(!1)},[y,r]),$=u.useCallback(()=>{T(!0),E(null),r(null)},[r]),F=u.useRef(N);F.current=N;const R=u.useRef(P);R.current=P;const D=u.useRef(L);D.current=L;const W=u.useCallback(B=>{U(B),R.current=B,O.current&&(O.current.setStartRange(B),D.current&&B&&B>D.current&&(j(null),D.current=null,O.current.setEndRange(null)))},[]),X=u.useCallback(B=>{j(B),D.current=B,O.current&&O.current.setEndRange(B)},[]),Q=u.useCallback(()=>{T(!0);let B=Me(R.current)||"",te=Me(D.current)||"";B&&!te&&(te=B),r(ut(B,te,!0)),p(!1)},[r]),ee=u.useCallback(()=>{T(!0),W(null),X(null),S("start"),O.current&&O.current.draw(!0),r(null)},[r,W,X]),ue=u.useCallback(B=>{F.current==="start"?(W(B),S("end")):(X(B),S("start"),setTimeout(()=>{T(!0);const te=Me(R.current)||"";let z=Me(B)||"";te&&!z&&(z=te),r(ut(te,z,!0)),p(!1)},0)),O.current&&O.current.draw(!0)},[W,X,r]),ae=u.useCallback(B=>{O.current=B;const te=ve(C),z=ve(w);te&&B.setStartRange(te),z&&B.setEndRange(z),B.draw(!0)},[C,w]),q=u.useMemo(()=>({numberOfMonths:2,theme:"pika-range",disableDayFn:B=>!!(F.current==="end"&&R.current&&B<R.current),selectDayFn:B=>R.current&&B.toDateString()===R.current.toDateString()||D.current&&B.toDateString()===D.current.toDateString()||void 0}),[]),m=u.useCallback(B=>{T(!0),r(n===B?null:B)},[n,r]),M=i?_s(n):n!=null&&n!=="",I=u.useMemo(()=>{if(!M)return f;if(i){const te=x?Te(C):v.start||Te(C),z=x?Te(w):v.end||Te(w);return te&&z?`${te} - ${z}`:te||f}return(x?Te(C):v.start||Te(C))||f},[M,i,C,w,f,x,v]),V=P?sn(P):d,K=L?sn(L):b,{style:J,className:A}=ne(e,"ts-form-group"),G=de(e);return React.createElement(React.Fragment,null,g.map(B=>React.createElement("div",{key:B.key,className:A,style:J},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{className:`ts-filter${n===B.key?" ts-filled":""}`,onClick:()=>m(B.key),role:"button",tabIndex:0},React.createElement("div",{className:"ts-filter-text"},React.createElement("span",null,B.label))))),React.createElement("div",{className:A,style:J},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:a,className:`ts-filter ts-popup-target${M?" ts-filled":""}`,onClick:i?()=>Z("start"):H,onMouseDown:B=>B.preventDefault(),role:"button",tabIndex:0},k&&React.createElement("span",{dangerouslySetInnerHTML:{__html:k}}),React.createElement("div",{className:"ts-filter-text"},I),React.createElement("div",{className:"ts-down-icon"})),!i&&React.createElement(ie,{isOpen:h,target:a,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:se,onClear:$,onClose:()=>p(!1),className:`${o} md-width xl-height${e.popupCenterPosition?" ts-popup-centered":""}`,popupStyle:G.style},React.createElement(lt,{value:y,onChange:Y,onSelect:se})),i&&React.createElement(ie,{isOpen:h,target:a,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:Q,onClear:ee,onClose:()=>p(!1),className:`${o} ts-availability-wrapper xl-width xl-height${e.popupCenterPosition?" ts-popup-centered":""}`,popupStyle:G.style},React.createElement("div",{className:"ts-popup-head flexify"},React.createElement("div",{className:"ts-popup-name flexify"},k&&React.createElement("span",{dangerouslySetInnerHTML:{__html:k}}),React.createElement("span",null,React.createElement("span",{className:N==="start"?"chosen":"",onClick:()=>S("start"),style:{cursor:"pointer"}},V),P&&React.createElement(React.Fragment,null,React.createElement("span",null,"  "),React.createElement("span",{className:N==="end"?"chosen":"",onClick:()=>S("end"),style:{cursor:"pointer"}},K))))),React.createElement(lt,{value:null,onChange:()=>{},onSelect:ue,pickerConfig:q,onPickerReady:ae}))))}function Cs({config:e,filterData:t,value:n,onChange:r}){const l=n!=null&&n!==!1&&n!==""&&n!==0,o=d=>{d.preventDefault(),r(l?null:1)},a=t.props?.placeholder||t.label||"Open now";if(e.openInPopup||t.props?.openInPopup||!1){const{style:d,className:b}=ne(e,"ts-form-group"),f=t.icon||"";return React.createElement("div",{className:b,style:d},React.createElement("label",null,t.label),React.createElement("div",{className:`ts-filter ts-popup-target${l?" ts-filled":""}`,onClick:o,role:"button",tabIndex:0},f&&React.createElement("span",{dangerouslySetInnerHTML:{__html:f}}),React.createElement("div",{className:"ts-filter-text"},React.createElement("span",null,a))))}const{style:i,className:c}=ne(e,"ts-form-group switcher-label ts-inline-filter");return React.createElement("div",{className:c,style:i},React.createElement("label",{className:"ts-keep-visible"},React.createElement("div",{className:"switch-slider"},React.createElement("div",{className:"onoffswitch"},React.createElement("input",{type:"checkbox",className:"onoffswitch-checkbox",checked:l,onChange:o,tabIndex:0}),React.createElement("label",{className:"onoffswitch-label",onClick:o}))),a))}function ln(e){return typeof e!="string"||!e?null:e.split("(")[0]}function on(e){return Math.round(e*1e5)/1e5}function ks({config:e,filterData:t,value:n,onChange:r,blockId:l,allFilterValues:o,allFiltersData:a,postFeedId:s}){const i=l?`voxel-popup-${l}`:"",c=u.useRef(null),[d,b]=u.useState(!1),[f,g]=u.useState(!1),v=t.props||{},k=e.displayAs||t.props?.display_as||"popup",_=v.placeholder||t.label||"Order By",C=u.useMemo(()=>{const R=v.choices||{};return Array.isArray(R)?R:Object.entries(R).map(([D,W])=>({key:D,label:W.label||W,placeholder:W.placeholder||W.label||W,icon:W.icon||"",requires_location:W.requires_location||!1,has_location:W.has_location||!1}))},[v.choices]),w=t.icon||"",x=u.useMemo(()=>a&&a.find(R=>R.type==="location")||null,[a]),T=u.useMemo(()=>{if(!x||!o)return null;const R=o[x.key];return!R||typeof R!="object"?null:R},[x,o]),h=u.useCallback(R=>{if(T){const{lat:D,lng:W,method:X,address:Q}=T;if(D&&W){if(X==="radius"){R(D,W),g(!1);return}R(D,W),g(!1);return}if(Q&&window.Voxel?.Maps?.getGeocoder){window.Voxel.Maps.getGeocoder().geocode(Q,ee=>{ee?R(ee.latlng?.getLatitude?.()||ee.lat,ee.latlng?.getLongitude?.()||ee.lng):p(R),g(!1)});return}}p(R)},[T]),p=u.useCallback(R=>{if(!navigator.geolocation){g(!1);return}navigator.geolocation.getCurrentPosition(D=>{const W=on(D.coords.latitude),X=on(D.coords.longitude);R(W,X),g(!1)},()=>{const D=window.Voxel_Config;window.Voxel?.alert&&D?.l10n?.positionFail&&window.Voxel.alert(D.l10n.positionFail,"error"),g(!1)})},[]),y=ln(n),E=C.find(R=>R.key===y)?.requires_location;u.useEffect(()=>{if(!E||!T)return;const{lat:R,lng:D,method:W}=T;W==="radius"&&R&&D&&y&&r(`${y}(${R},${D})`)},[T?.lat,T?.lng]);const N=u.useCallback(()=>{b(!0)},[]),S=u.useCallback(R=>{R.requires_location?(g(R.key),h((D,W)=>{r(R.key+`(${D},${W})`),b(!1)})):(r(R.key),b(!1))},[r,h]),P=u.useCallback(R=>{R.requires_location?(g(R.key),h((D,W)=>{r(R.key+`(${D},${W})`)})):r(R.key)},[r,h]),U=u.useCallback(()=>{r(null)},[r]),L=typeof n=="string"?n:"",j=!!L,O=ln(L),H=C.find(R=>R.key===O),Z=H?.label||_;u.useEffect(()=>{H?.requires_location&&!H?.has_location&&O&&(k==="buttons"?S(H):P(H))},[]);const Y=R=>React.createElement("div",{className:"ts-term-dropdown ts-md-group"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list min-scroll"},C.map(D=>{const W=O===D.key,X=f===D.key;return React.createElement("li",{key:D.key,className:W?"ts-selected":""},React.createElement("a",{href:"#",className:`flexify${X?" vx-pending":""}`,onClick:Q=>{Q.preventDefault(),R(D)}},React.createElement("div",{className:"ts-radio-container"},React.createElement("label",{className:"container-radio"},React.createElement("input",{type:"radio",value:D.key,checked:W,readOnly:!0,disabled:!0,hidden:!0}),React.createElement("span",{className:"checkmark"}))),React.createElement("span",null,D.label),D.icon&&React.createElement("div",{className:"ts-term-icon"},React.createElement("span",{dangerouslySetInnerHTML:{__html:D.icon}}))))})));if(k==="buttons"){const{style:R,className:D}=ne(e,"ts-form-group");return React.createElement("div",{className:D,style:R},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("ul",{className:"simplify-ul addon-buttons flexify"},C.map(W=>{const X=O===W.key,Q=f===W.key;return React.createElement("li",{key:W.key,className:`flexify${X?" adb-selected":""}${Q?" vx-pending":""}`,onClick:()=>P(W)},W.placeholder||W.label)})))}if(k==="alt-btn")return React.createElement(React.Fragment,null,C.map(R=>{const D=O===R.key,W=f===R.key,{style:X,className:Q}=ne(e,"ts-form-group");return React.createElement("div",{key:R.key,className:Q,style:X},!e.hideLabel&&React.createElement("label",null,R.label),React.createElement("div",{className:`ts-filter${D?" ts-filled":""}${W?" vx-pending":""}`,onClick:()=>P(R)},R.icon&&React.createElement("span",{dangerouslySetInnerHTML:{__html:R.icon}}),React.createElement("div",{className:"ts-filter-text"},React.createElement("span",null,R.placeholder||R.label))))}));if(k==="post-feed"&&s){const R=`[data-block-id="${s}"] .post-feed-header, .elementor-element-${s} .post-feed-header`,D=document.querySelector(R);if(D&&!D.querySelector(".vxf-sort"))return Fe.createPortal(React.createElement(Ts,{filterData:t,filterIcon:w,placeholder:_,options:C,currentKey:O,hasValue:j,displayValue:Z,loading:f,selectDropdownChoice:S,handleClear:U,renderRadioList:Y,popupClassName:i,config:e}),D)}const{style:se,className:$}=ne(e,"ts-form-group"),F=de(e);return React.createElement("div",{className:$,style:se},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:c,className:`ts-filter ts-popup-target${j?" ts-filled":""}`,onClick:N,onMouseDown:R=>R.preventDefault(),role:"button",tabIndex:0},w&&React.createElement("span",{dangerouslySetInnerHTML:{__html:w}}),React.createElement("div",{className:"ts-filter-text"},Z),React.createElement("div",{className:"ts-down-icon"})),React.createElement(ie,{isOpen:d,target:c,title:"",icon:w,saveLabel:"Save",clearLabel:"Clear",showClear:j,showSave:!1,onSave:()=>b(!1),onClear:U,onClose:()=>b(!1),className:`hide-head ${i}${e.popupCenterPosition?" ts-popup-centered":""}`.trim(),popupStyle:F.style},Y(S)))}function Ts({filterData:e,filterIcon:t,placeholder:n,options:r,currentKey:l,hasValue:o,displayValue:a,loading:s,selectDropdownChoice:i,handleClear:c,renderRadioList:d,popupClassName:b,config:f}){const g=u.useRef(null),[v,k]=u.useState(!1),_=de(f);return React.createElement("div",{className:`vxf-sort ts-popup-target${o?" ts-filled":""}`,ref:g},React.createElement("a",{href:"#",onClick:C=>{C.preventDefault(),k(!v)}},o?a:n,React.createElement("div",{className:"ts-down-icon"})),React.createElement(ie,{isOpen:v,target:g,title:"",icon:t,saveLabel:"Save",clearLabel:"Clear",showClear:o,showSave:!1,onSave:()=>k(!1),onClear:()=>{c(),k(!1)},onClose:()=>k(!1),className:`hide-d ${b}${f.popupCenterPosition?" ts-popup-centered":""}`.trim(),popupStyle:_.style},d(C=>{i(C),k(!1)})))}function xs({config:e,filterData:t,value:n,onChange:r,blockId:l}){const o=l?`voxel-popup-${l}`:"",[a,s]=u.useState(!1),i=u.useRef(null),c=t.props||{},d=e.displayAs||t.props?.display_as||"popup",b=c.placeholder||t.label||"Status",f=u.useMemo(()=>{const N=c.choices||{};return Array.isArray(N)?N:Object.entries(N).map(([S,P])=>({key:S,label:P.label||P}))},[c.choices]),g=t.icon||"",v=u.useCallback(N=>{r(N),s(!1)},[r]),k=u.useCallback(()=>{r(""),s(!1)},[r]),_=u.useCallback(()=>{s(!0)},[]),C=typeof n=="string"?n:"",w=!!C,x=f.find(N=>N.key===C),T=w&&x?.label||b,h=()=>React.createElement("div",{className:"ts-term-dropdown ts-md-group"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list min-scroll"},f.map(N=>{const S=C===N.key;return React.createElement("li",{key:N.key},React.createElement("a",{href:"#",className:"flexify",onClick:P=>{P.preventDefault(),v(N.key)}},React.createElement("div",{className:"ts-radio-container"},React.createElement("label",{className:"container-radio"},React.createElement("input",{type:"radio",value:N.key,checked:S,readOnly:!0}),React.createElement("span",{className:"checkmark"}))),React.createElement("span",null,N.label),g&&React.createElement("div",{className:"ts-term-icon"},React.createElement("span",{dangerouslySetInnerHTML:{__html:g}}))))})));if(d==="buttons")return React.createElement(React.Fragment,null,f.map(N=>{const S=C===N.key,{style:P,className:U}=ne(e,"ts-form-group");return React.createElement("div",{key:N.key,className:U,style:P},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{className:`ts-filter${S?" ts-filled":""}`,onClick:()=>r(N.key)},g&&React.createElement("span",{dangerouslySetInnerHTML:{__html:g}}),React.createElement("div",{className:"ts-filter-text"},React.createElement("span",null,N.label))))}));const{style:p,className:y}=ne(e,"ts-form-group"),E=de(e);return React.createElement("div",{className:y,style:p},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:i,className:`ts-filter ts-popup-target ${w?"ts-filled":""}`,onClick:_,onMouseDown:N=>N.preventDefault(),role:"button",tabIndex:0},g&&React.createElement("span",{dangerouslySetInnerHTML:{__html:g}}),React.createElement("div",{className:"ts-filter-text"},T),React.createElement("div",{className:"ts-down-icon"})),React.createElement(ie,{isOpen:a,target:i,title:"",icon:g,saveLabel:"Save",showSave:!1,showClear:w,onClear:k,onSave:()=>s(!1),onClose:()=>s(!1),className:`hide-head ${o}${e.popupCenterPosition?" ts-popup-centered":""}`.trim(),popupStyle:E.style},h()))}function Ns(e){const{userId:t,skip:n=!1}=e,[r,l]=u.useState(null),[o,a]=u.useState(!1),[s,i]=u.useState(null),c=u.useCallback(async()=>{if(!t||n){l(null);return}a(!0),i(null);try{const d=rt(),b=await fetch(`${d}voxel-fse/v1/search-form/user-data?user_id=${t}`);if(b.ok){const f=await b.json();l({id:f.id,name:f.name,avatar:f.avatar||""})}else l({id:t,name:"Unknown",avatar:""}),i("User not found")}catch(d){console.error("useUserData: Error fetching user data:",d),l({id:t,name:"Unknown",avatar:""}),i(d instanceof Error?d.message:"Failed to fetch user data")}finally{a(!1)}},[t,n]);return u.useEffect(()=>{c()},[c]),{userData:r,isLoading:o,error:s,refetch:c}}function Is({config:e,filterData:t,value:n}){const r=u.useRef(null),l=t.props||{},o=t.icon||"",a=l.user;let s;n!==void 0?s=n:t.value!==null&&t.value!==void 0?s=t.value:s=null;const i=s?Number(s):null,c=i!==null&&!isNaN(i)&&i>0,d=!!a?.name,{userData:b,isLoading:f}=Ns({userId:c?i:null,skip:d}),g=d?{name:a.name,avatar:a.avatar||""}:b;if(!c)return null;const v=g?.name||(f?"Loading...":"Unknown"),{style:k,className:_}=ne(e,"ts-form-group");return React.createElement("div",{className:_,style:k},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:r,className:`ts-filter ts-popup-target ts-filled${f?" ts-loading":""}`},React.createElement("span",{dangerouslySetInnerHTML:{__html:o}}),React.createElement("div",{className:"ts-filter-text"},v)))}function Ls({config:e,filterData:t,value:n,onChange:r,blockId:l}){const o=u.useRef(null),a=l?`voxel-popup-${l}`:"",i=(t.props||{}).post,c=t.icon||"";let d=null;n!==void 0?n===null?d=null:typeof n=="number"?d=n:typeof n=="string"&&n!==""&&(d=Number(n)):t.value!==null&&t.value!==void 0&&(d=typeof t.value=="number"?t.value:Number(t.value));const b=d!==null&&!isNaN(d)&&d>0,f=u.useCallback(()=>{r(null)},[r]);if(!b)return null;const g=i?.title||"Unknown",{style:v,className:k}=ne(e,"ts-form-group"),_=de(e);return React.createElement("div",{className:k,style:v},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:o,className:"ts-filter ts-popup-target ts-filled",role:"button",tabIndex:0},c&&React.createElement("span",{dangerouslySetInnerHTML:{__html:c}}),React.createElement("div",{className:"ts-filter-text"},g),React.createElement("div",{className:"ts-down-icon"})),React.createElement(ie,{isOpen:!1,target:o,showClear:!0,showSave:!1,onSave:()=>{},onClear:f,onClose:()=>{},className:`${a}${e.popupCenterPosition?" ts-popup-centered":""}`,popupStyle:_.style}))}function dt({config:e,filterData:t,value:n,onChange:r}){const[l,o]=u.useState(!1),[a,s]=u.useState(""),[i,c]=u.useState([]),[d,b]=u.useState(!1),f=u.useRef(null),g=t.props||{},v=g.placeholder||t.label||"Following",k=g.user,_=t.icon||"",C=S=>{const P=S.target.value;s(P),P.length>=2?(b(!0),setTimeout(()=>{c([]),b(!1)},300)):c([])},w=(S,P)=>{r({id:S,name:P}),o(!1),s("")},x=S=>{S.preventDefault(),o(!l)};u.useEffect(()=>{const S=P=>{f.current&&!f.current.contains(P.target)&&o(!1)};return l&&document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[l]);let T=null;if(n!==void 0){const S=n;S===null?T=null:typeof S=="number"?T=S:typeof S=="object"&&S?.id&&(T=S.id)}else t.value!==null&&t.value!==void 0&&(T=typeof t.value=="number"?t.value:Number(t.value));const h=T!==null&&!isNaN(T)&&T>0;let p=v;if(h){const S=n;S&&typeof S=="object"&&S.name?p=S.name:k?.name&&(p=k.name)}const{style:y,className:E}=ne(e,"ts-form-group"),N=de(e);return React.createElement("div",{className:E,style:y,ref:f},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{className:`ts-filter ts-popup-target ${h?"ts-filled":""}`,onClick:x,onMouseDown:S=>S.preventDefault(),role:"button",tabIndex:0},_&&React.createElement("span",{dangerouslySetInnerHTML:{__html:_}}),React.createElement("div",{className:"ts-filter-text"},p),React.createElement("div",{className:"ts-down-icon"})),l&&React.createElement("div",{className:"ts-field-popup-container"},React.createElement("div",{className:N.className,style:N.style},React.createElement("div",{className:"ts-popup-content-wrapper min-scroll"},React.createElement("div",{className:"ts-form-group"},React.createElement("div",{className:"flexify ts-input-icon"},React.createElement("span",null,ce.search),React.createElement("input",{type:"text",className:"inline-input",value:a,onChange:C,placeholder:"Search..."}))),d?React.createElement("div",{className:"ts-loading"},React.createElement("span",{className:"ts-loader"})):i.length>0?React.createElement("div",{className:"ts-term-dropdown"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list"},i.map(S=>React.createElement("li",{key:S.id},React.createElement("a",{href:"#",className:"flexify",onClick:P=>{P.preventDefault(),w(S.id,S.name)}},React.createElement("span",null,S.name)))))):a.length>=2?React.createElement("div",{className:"ts-empty-user-list"},React.createElement("span",null,"No results found")):null))))}function Ms({config:e,filterData:t,value:n,onChange:r}){const[l,o]=u.useState(!1),[a,s]=u.useState(""),[i,c]=u.useState([]),[d,b]=u.useState(!1),f=u.useRef(null),g=t.props||{},v=g.placeholder||t.label||"Following Post",k=g.post,_=t.icon||"",C=S=>{const P=S.target.value;s(P),P.length>=2?(b(!0),setTimeout(()=>{c([]),b(!1)},300)):c([])},w=(S,P)=>{r({id:S,title:P}),o(!1),s("")},x=S=>{S.preventDefault(),o(!l)};u.useEffect(()=>{const S=P=>{f.current&&!f.current.contains(P.target)&&o(!1)};return l&&document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[l]);let T=null;if(n!==void 0){const S=n;S===null?T=null:typeof S=="number"?T=S:typeof S=="object"&&S?.id&&(T=S.id)}else t.value!==null&&t.value!==void 0&&(T=typeof t.value=="number"?t.value:Number(t.value));const h=T!==null&&!isNaN(T)&&T>0;let p=v;if(h){const S=n;S&&typeof S=="object"&&S.title?p=S.title:k?.title&&(p=k.title)}const{style:y,className:E}=ne(e,"ts-form-group"),N=de(e);return React.createElement("div",{className:E,style:y,ref:f},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{className:`ts-filter ts-popup-target ${h?"ts-filled":""}`,onClick:x,onMouseDown:S=>S.preventDefault(),role:"button",tabIndex:0},_&&React.createElement("span",{dangerouslySetInnerHTML:{__html:_}}),React.createElement("div",{className:"ts-filter-text"},p),React.createElement("div",{className:"ts-down-icon"})),l&&React.createElement("div",{className:"ts-field-popup-container"},React.createElement("div",{className:N.className,style:N.style},React.createElement("div",{className:"ts-popup-content-wrapper min-scroll"},React.createElement("div",{className:"ts-form-group"},React.createElement("div",{className:"flexify ts-input-icon"},React.createElement("span",null,ce.search),React.createElement("input",{type:"text",className:"inline-input",value:a,onChange:C,placeholder:"Search posts..."}))),d?React.createElement("div",{className:"ts-loading"},React.createElement("span",{className:"ts-loader"})):i.length>0?React.createElement("div",{className:"ts-term-dropdown"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list"},i.map(S=>React.createElement("li",{key:S.id},React.createElement("a",{href:"#",className:"flexify",onClick:P=>{P.preventDefault(),w(S.id,S.title)}},React.createElement("span",null,S.title)))))):a.length>=2?React.createElement("div",{className:"ts-empty-user-list"},React.createElement("span",null,"No posts found")):null))))}function Fs({config:e,filterData:t,value:n,onChange:r}){const l=t.props||{},o=l.openInPopup===!0,a=l.placeholder||t.label||"",s=t.icon||"",i=n!=null&&n!==""&&n!==!1,c=f=>{f.preventDefault(),r(i?"":1)};if(o){const{style:f,className:g}=ne(e,"ts-form-group");return React.createElement("div",{className:g,style:f},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{className:`ts-filter${i?" ts-filled":""}`,onClick:c,onMouseDown:v=>v.preventDefault(),role:"button",tabIndex:0},s&&React.createElement("span",{dangerouslySetInnerHTML:{__html:s}}),React.createElement("div",{className:"ts-filter-text"},React.createElement("span",null,a))))}const{style:d,className:b}=ne(e,"ts-form-group switcher-label ts-inline-filter");return React.createElement("div",{className:b,style:d},React.createElement("label",{className:"ts-keep-visible"},React.createElement("div",{className:"switch-slider"},React.createElement("div",{className:"onoffswitch"},React.createElement("input",{type:"checkbox",className:"onoffswitch-checkbox",checked:i,onChange:c,tabIndex:0}),React.createElement("label",{className:"onoffswitch-label",onClick:c}))),a))}function Ps({config:e,filterData:t}){const n=t.description||"",{style:r,className:l}=ne(e,"ts-form-group ui-heading");return React.createElement("div",{className:l,style:r},React.createElement("label",null,e.label||t.label,n&&React.createElement("small",null,n)))}function Os({postTypes:e,currentPostType:t,onChange:n,blockId:r,style:l}){const o=r?`voxel-popup-${r}`:"",[a,s]=u.useState(!1),i=u.useRef(null),c=u.useCallback(_=>{n(_),s(!1)},[n]),d=u.useCallback(()=>{s(!0)},[]),b=e.find(_=>_.key===t),f=b?.label||"Select type",g=!!t,v=b?.icon||"",k=()=>React.createElement("div",{className:"ts-term-dropdown ts-md-group"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list min-scroll"},e.map(_=>{const C=t===_.key;return React.createElement("li",{key:_.key},React.createElement("a",{href:"#",className:"flexify",onClick:w=>{w.preventDefault(),c(_.key)}},React.createElement("div",{className:"ts-radio-container"},React.createElement("label",{className:"container-radio"},React.createElement("input",{type:"radio",checked:C,disabled:!0,hidden:!0,readOnly:!0}),React.createElement("span",{className:"checkmark"}))),React.createElement("span",null,_.label),React.createElement("div",{className:"ts-term-icon ts-pull-right"},_.icon&&React.createElement("span",{dangerouslySetInnerHTML:{__html:_.icon}}))))})));return React.createElement("div",{className:"ts-form-group choose-cpt-filter",style:l},React.createElement("label",null,"Post type"),React.createElement("div",{ref:i,className:`ts-filter ts-popup-target ${g?"ts-filled":""}`,onClick:d,onMouseDown:_=>_.preventDefault(),role:"button",tabIndex:0},v&&React.createElement("span",{dangerouslySetInnerHTML:{__html:v}}),React.createElement("div",{className:"ts-filter-text"},f),React.createElement("div",{className:"ts-down-icon"})),React.createElement(ie,{isOpen:a,target:i,title:"",icon:v,saveLabel:"Save",showSave:!1,showClear:!1,onSave:()=>s(!1),onClose:()=>s(!1),className:`hide-head ${o}`.trim()},k()))}const As={"common:is_empty":(e,t)=>t==null||t==="","common:is_not_empty":(e,t)=>t!=null&&t!=="","text:equals":(e,t)=>t===e.value,"text:not_equals":(e,t)=>t!==e.value,"text:contains":(e,t)=>typeof t!="string"||!e.value?!1:new RegExp(e.value,"i").test(t),"taxonomy:contains":(e,t)=>typeof t!="string"||!e.value?!1:t.split(",").includes(e.value),"taxonomy:not_contains":(e,t)=>typeof t!="string"||!e.value?!0:!t.split(",").includes(e.value),"number:equals":(e,t)=>{const n=parseFloat(String(t)),r=parseFloat(e.value||"0");return n===r},"number:not_equals":(e,t)=>{const n=parseFloat(String(t)),r=parseFloat(e.value||"0");return n!==r},"number:gt":(e,t)=>{const n=parseFloat(String(t)),r=parseFloat(e.value||"0");return n>r},"number:gte":(e,t)=>{const n=parseFloat(String(t)),r=parseFloat(e.value||"0");return n>=r},"number:lt":(e,t)=>{const n=parseFloat(String(t)),r=parseFloat(e.value||"0");return n<r},"number:lte":(e,t)=>{const n=parseFloat(String(t)),r=parseFloat(e.value||"0");return n<=r}};function Vs(e,t,n){const r=As[e.type];if(!r)return console.warn(`[filterConditions] Unknown condition type: ${e.type}`),!1;let l=t;return n==="order-by"&&typeof t=="string"&&t.length>0&&(l=t.split("(")[0]),r(e,l)}function Ds(e,t="show",n,r){if(!e||e.length===0)return!0;let l=!1;return e.forEach(o=>{if(!o.length)return;let a=!0;o.forEach(s=>{const i=n[s.source],d=r[s.source]?.type;Vs(s,i,d)||(a=!1)}),a&&(l=!0)}),t==="hide"?!l:l}function Bs(e,t,n){return Ds(e.conditions,e.conditions_behavior||"show",t,n)}function js(){const e=()=>{if(typeof window>"u")return"desktop";const r=window.innerWidth;return r<=767?"mobile":r<=1024?"tablet":"desktop"},[t,n]=u.useState(e);return u.useEffect(()=>{const r=()=>{n(e())};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),t}function Ws({attributes:e,postTypes:t,context:n,editorDeviceType:r,onSubmit:l,onPostTypeChange:o,onFilterChange:a}){const s=u.useRef(null),i=u.useRef(null),{state:c,setCurrentPostType:d,setFilterValue:b,togglePortal:f,submit:g,clearAll:v,narrowedValues:k,narrowingFilters:_}=rs({attributes:e,postTypes:t,context:n,onSubmit:l,onPostTypeChange:o,onFilterChange:a}),C=ns(m=>{if(n!=="editor")return null;const{isListViewOpened:M,isEditorSidebarOpened:I}=m("core/edit-post");return{leftVisible:M?.()??!1,rightVisible:I?.()??!1}}),w=u.useMemo(()=>{if(n!=="editor"||!C||r&&r!=="desktop")return{width:"100%",left:"0",right:"0",zIndex:9999};const m=C.leftVisible?350:0,M=C.rightVisible?280:0;return m===0&&M===0?{}:{width:`calc(100% - ${m+M}px)`,left:`${m}px`,right:`${M}px`,zIndex:9999}},[n,C,r]),[x,T]=u.useState(""),[h,p]=u.useState("");u.useEffect(()=>{const m=async()=>{const I=e.searchButtonText??"";if(st(I)){const V=$t(I),K=await en(V);T(K)}else T(I)},M=async()=>{const I=e.resetButtonText??"Reset";if(st(I)){const V=$t(I),K=await en(V);p(K)}else p(I)};m(),M()},[e.searchButtonText,e.resetButtonText]),u.useEffect(()=>{if(!c.portalActive)return;const m=M=>{M.key==="Escape"&&f()};return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[c.portalActive,f]),u.useEffect(()=>{if(!c.portalActive)return;const m=I=>{const V=I.target;s.current?.contains(V)||n==="editor"&&(V.closest(".interface-interface-skeleton__sidebar")||V.closest(".edit-post-sidebar")||V.closest(".block-editor-block-inspector")||V.closest(".components-popover")||V.closest(".components-modal"))||f()},M=requestAnimationFrame(()=>{document.addEventListener("mousedown",m)});return()=>{cancelAnimationFrame(M),document.removeEventListener("mousedown",m)}},[c.portalActive,f,n]),u.useEffect(()=>{if(n!=="frontend")return;const m=M=>{const I=M;I.detail?.searchFormId&&I.detail.searchFormId!==e.blockId||v()};return window.addEventListener("voxel-search-clear",m),()=>window.removeEventListener("voxel-search-clear",m)},[n,e.blockId,v]),u.useEffect(()=>{if(n!=="frontend")return;const m=M=>{const{searchFormId:I,postType:V}=M.detail||{};I===e.blockId&&V&&d(V)};return window.addEventListener("voxel-switch-post-type",m),()=>window.removeEventListener("voxel-switch-post-type",m)},[n,e.blockId,d]);const y=t.find(m=>m.key===c.currentPostType),E=e.filterLists?.[c.currentPostType]||[],N=m=>{g()},S=(m=!1)=>{v(m)},P={};y?.filters?.forEach(m=>{P[m.key]=m});const U=m=>{if(!(n==="frontend"?cs(m):!0))return null;const I=m;if(n==="frontend"&&I.conditions&&!Bs(I,c.filterValues,P))return null;const V=y?.filters?.find(G=>G.key===m.filterKey);if(!V)return null;const K=m.defaultValueEnabled&&m.defaultValue!==void 0&&m.defaultValue!==""&&!(V.type==="range"&&m.defaultValue===".."),J={...V,value:K?m.defaultValue:V.value},A={config:m,filterData:J,value:c.filterValues[m.filterKey],onChange:G=>b(m.filterKey,G),narrowedValues:k,isNarrowing:_,blockId:e.blockId,context:n};switch(V.type){case"keywords":return React.createElement(ds,{key:m.id,...A});case"range":return React.createElement(ps,{key:m.id,...A});case"stepper":return React.createElement(hs,{key:m.id,...A});case"terms":return React.createElement(gs,{key:m.id,...A});case"location":return React.createElement(Es,{key:m.id,...A});case"availability":return React.createElement(Ss,{key:m.id,...A});case"date":return React.createElement(an,{key:m.id,...A});case"recurring-date":return React.createElement(an,{key:m.id,...A});case"open-now":return React.createElement(Cs,{key:m.id,...A});case"order-by":return React.createElement(ks,{key:m.id,...A,allFilterValues:c.filterValues,allFiltersData:y?.filters,postFeedId:e.postToFeedId});case"post-status":return React.createElement(xs,{key:m.id,...A});case"user":return React.createElement(Is,{key:m.id,...A});case"relations":return React.createElement(Ls,{key:m.id,...A});case"following":return React.createElement(dt,{key:m.id,...A});case"followed-by":return React.createElement(dt,{key:m.id,...A});case"following-user":return React.createElement(dt,{key:m.id,...A});case"following-post":return React.createElement(Ms,{key:m.id,...A});case"switcher":return React.createElement(Fs,{key:m.id,...A});case"ui-heading":return React.createElement(Ps,{key:m.id,...A});default:return null}},L=(m=!0)=>React.createElement("div",{className:"ts-filter-wrapper flexify"},e.showPostTypeFilter&&t.length>1&&React.createElement(Os,{postTypes:t,currentPostType:c.currentPostType,onChange:d,style:q()}),E.map(M=>U(M)),m&&e.showSearchButton&&React.createElement("div",{className:"ts-form-group flexify ts-form-submit",id:"sf_submit",style:ae("search")},React.createElement("button",{type:"button",onClick:()=>N(),className:`ts-btn ts-btn-2 ts-btn-large ts-search-btn ${c.loading&&!c.resetting?"ts-loading-btn":""}`},c.loading&&!c.resetting&&React.createElement("div",{className:"ts-loader-wrapper"},React.createElement("span",{className:"ts-loader"})),ot(e.searchButtonIcon,ce.search),x&&x)),m&&e.showResetButton&&React.createElement("div",{className:"ts-form-group flexify ts-form-reset",style:ae("reset")},React.createElement("a",{href:"#",onClick:M=>{M.preventDefault(),S(!1)},className:"ts-filter",role:"button"},ot(e.resetButtonIcon,ce.reload),h&&React.createElement("div",{className:"ts-filter-text"},h)))),j=js(),O=n==="editor"&&r?r:j,H=O==="desktop"&&(e.mfSwitcherDesktop??!1)||O==="tablet"&&(e.mfSwitcherTablet??!1)||O==="mobile"&&(e.mfSwitcherMobile??!1),Z=()=>O==="desktop"?e.mfSwitcherDesktopDefault??"feed":O==="tablet"?e.mfSwitcherTabletDefault??"feed":e.mfSwitcherMobileDefault??"feed",[Y,se]=u.useState(Z),$=u.useRef(null);u.useEffect(()=>{se(Z())},[O,e.mfSwitcherDesktopDefault,e.mfSwitcherTabletDefault,e.mfSwitcherMobileDefault]);const F=(m,M)=>{if(!m)return null;const I=i.current?.ownerDocument||document,V=I.getElementById(m);if(V)return V;const K=M==="map"?"voxel-fse-map-":"voxel-fse-post-feed-",J=m.replace(/^#/,""),A=`.${K}${J}`,G=I.querySelector(A);return G||null},R=()=>{se("feed");const m=O,M=F(e.postToMapId||"","map"),I=F(e.postToFeedId||"","feed");if(M){M.classList.add(`vx-hidden-${m}`);const V=M.closest(".voxel-fse-flex-container");V&&V.classList.add(`vx-hidden-${m}`);const K=M.querySelector(".ts-map");K&&$.current&&(K.style.height=$.current.height,K.style.minHeight=$.current.minHeight)}if(I){I.classList.remove(`vx-hidden-${m}`);const V=I.closest(".voxel-fse-flex-container");V&&V.classList.remove(`vx-hidden-${m}`)}},D=()=>{se("map");const m=O,M=F(e.postToMapId||"","map"),I=F(e.postToFeedId||"","feed");if(I){I.classList.add(`vx-hidden-${m}`);const V=I.closest(".voxel-fse-flex-container");V&&V.classList.add(`vx-hidden-${m}`)}if(M){M.classList.remove(`vx-hidden-${m}`);const V=M.closest(".voxel-fse-flex-container");V&&V.classList.remove(`vx-hidden-${m}`);const K=M.querySelector(".ts-map");if(K){$.current||($.current={height:K.style.height||"",minHeight:K.style.minHeight||""});const J=M.style.getPropertyValue("--vx-map-height");J?(K.style.height=J,K.style.minHeight=J):requestAnimationFrame(()=>{const A=M.getBoundingClientRect().top;K.style.height=`calc(100vh - ${Math.round(A)}px)`,K.style.minHeight=`calc(100vh - ${Math.round(A)}px)`})}}};u.useEffect(()=>{H&&(Y==="feed"?R():D())},[O,Y,H,e.postToMapId,e.postToFeedId]);const W=()=>{if(!H)return null;const m=[e.mfSwitcherDesktop?"":"vx-hidden-desktop",e.mfSwitcherTablet?"":"vx-hidden-tablet",e.mfSwitcherMobile?"":"vx-hidden-mobile"].filter(Boolean).join(" "),M=React.createElement("div",{className:`ts-switcher-btn ${m}`,style:n==="editor"?w:{}},React.createElement("a",{href:"#",className:`ts-btn ts-btn-1 ${Y==="feed"?`vx-hidden-${O}`:""}`,onClick:I=>{I.preventDefault(),R()},role:"button"},ce.grid,"List view"),React.createElement("a",{href:"#",className:`ts-btn ts-btn-1 ${Y==="map"?`vx-hidden-${O}`:""}`,onClick:I=>{I.preventDefault(),D()},role:"button"},ce.marker,"Map view"));return n==="editor"?M:Fe.createPortal(React.createElement("div",{className:`voxel-fse-search-form-${e.blockId}`,"data-voxel-id":e.blockId},M),document.body)},X=O==="desktop"&&(e.formToggleDesktop??!1)||O==="tablet"&&(e.formToggleTablet??!0)||O==="mobile"&&(e.formToggleMobile??!0),Q=X,ee=!X,ue={postTypes:t.map(m=>({key:m.key,label:m.label,filters:m.filters})),currentPostType:c.currentPostType,filterLists:e.filterLists||{},portalMode:e.portalMode||{desktop:!1,tablet:!1,mobile:!1},showPostTypeFilter:e.showPostTypeFilter??!0,showSearchButton:e.showSearchButton??!0,showResetButton:e.showResetButton??!1,searchButtonText:e.searchButtonText||"",resetButtonText:e.resetButtonText||"",formToggleDesktop:e.formToggleDesktop??!1,formToggleTablet:e.formToggleTablet??!0,formToggleMobile:e.formToggleMobile??!0,searchButtonWidth:e.searchButtonWidth,searchButtonWidth_tablet:e.searchButtonWidth_tablet,searchButtonWidth_mobile:e.searchButtonWidth_mobile,searchButtonWidthUnit:e.searchButtonWidthUnit||"%",resetButtonWidth:e.resetButtonWidth,resetButtonWidth_tablet:e.resetButtonWidth_tablet,resetButtonWidth_mobile:e.resetButtonWidth_mobile,resetButtonWidthUnit:e.resetButtonWidthUnit||"%"},ae=m=>{const M=m==="search"?e.searchButtonWidthUnit||"%":e.resetButtonWidthUnit||"%";let I;return m==="search"?O==="mobile"?I=e.searchButtonWidth_mobile??e.searchButtonWidth_tablet??e.searchButtonWidth:O==="tablet"?I=e.searchButtonWidth_tablet??e.searchButtonWidth:I=e.searchButtonWidth:O==="mobile"?I=e.resetButtonWidth_mobile??e.resetButtonWidth_tablet??e.resetButtonWidth:O==="tablet"?I=e.resetButtonWidth_tablet??e.resetButtonWidth:I=e.resetButtonWidth,I!==void 0?{width:`${I}${M}`,flexGrow:0,flexShrink:0}:{}},q=()=>{let m;return O==="mobile"?m=e.postTypeFilterWidth_mobile??e.postTypeFilterWidth_tablet??e.postTypeFilterWidth:O==="tablet"?m=e.postTypeFilterWidth_tablet??e.postTypeFilterWidth:m=e.postTypeFilterWidth,m!==void 0?{width:`${m}%`,flexGrow:0,flexShrink:0}:{}};return React.createElement(React.Fragment,null,React.createElement("div",{className:"ts-form ts-search-widget","data-v-app":"",ref:i},React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(ue)}}),Q&&React.createElement("div",{className:"ts-filter-wrapper flexify"},React.createElement("a",{href:"#",onClick:m=>{m.preventDefault(),f()},onMouseDown:m=>m.preventDefault(),className:`ts-filter-toggle ts-btn ts-btn-1 ${c.activeFilterCount>0?"ts-filled":""}`,role:"button","aria-expanded":c.portalActive},ce.filterslider,React.createElement("div",{className:"ts-toggle-text"},"Filter results"),c.activeFilterCount>0&&React.createElement("span",{className:"ts-filter-count"},c.activeFilterCount))),React.createElement("form",{method:"GET",onSubmit:m=>(m.preventDefault(),!1)},ee&&React.createElement("div",{className:"ts-inline-filters"},L())),React.createElement("div",{className:"hidden"},React.createElement("div",{className:"ts-search-portal"}))),c.portalActive&&Fe.createPortal(React.createElement("div",{className:`ts-search-portal vx-popup elementor voxel-fse-search-form-${e.blockId}`,"data-voxel-id":e.blockId},React.createElement("div",{className:"ts-popup-root elementor-element"},React.createElement("div",{className:"ts-form ts-search-widget no-render elementor-element"},React.createElement("div",{className:"ts-field-popup-container"},React.createElement("div",{className:"ts-field-popup triggers-blur",ref:s},React.createElement("div",{className:"ts-popup-content-wrapper min-scroll"},React.createElement("div",{className:"ts-form-group"},L())),React.createElement("div",{className:"ts-popup-controller"},React.createElement("ul",{className:"flexify simplify-ul"},React.createElement("li",{className:"flexify ts-popup-close"},React.createElement("a",{href:"#",onClick:m=>{m.preventDefault(),f()},className:"ts-icon-btn",role:"button","aria-label":"Close"},ot(e.closeIcon,ce.close))),React.createElement("li",{className:"flexify hide-d"},React.createElement("a",{href:"#",onClick:m=>{m.preventDefault(),S(!0)},className:"ts-icon-btn",role:"button"},ce.reload)),React.createElement("li",{className:"flexify hide-m"},React.createElement("a",{href:"#",onClick:m=>{m.preventDefault(),S(!0)},className:"ts-btn ts-btn-1",role:"button"},"Clear")),React.createElement("li",{className:"flexify"},React.createElement("a",{href:"#",onClick:m=>{m.preventDefault(),N(),f()},className:"ts-btn ts-btn-2",role:"button"},"Search"))))))))),document.body),W())}const ft=new Map;function Us(){return rt()}function xe(e,t){if(!e)return t;try{return JSON.parse(e)}catch{return t}}function Ee(e){return e==="true"}function Hs(e){const t=e.dataset,n=r=>{if(!r||r==="")return;const l=Number(r);return isNaN(l)?void 0:l};return{blockId:e.id||"",postTypes:xe(t.postTypes,[]),selectedPostType:"",showPostTypeFilter:Ee(t.showPostTypeFilter),postTypeFilterWidth:n(t.postTypeFilterWidth),postTypeFilterWidth_tablet:n(t.postTypeFilterWidthTablet),postTypeFilterWidth_mobile:n(t.postTypeFilterWidthMobile),filterLists:xe(t.filterLists,{}),onSubmit:t.onSubmit||"feed",postToFeedId:t.postToFeedId||"",postToMapId:t.postToMapId||"",searchOn:t.searchOn||"submit",showSearchButton:Ee(t.showSearchButton),searchButtonText:t.searchButtonText??"",searchButtonIcon:xe(t.searchButtonIcon,{library:"",value:""}),searchButtonWidth:n(t.searchButtonWidth),searchButtonWidth_tablet:n(t.searchButtonWidthTablet),searchButtonWidth_mobile:n(t.searchButtonWidthMobile),searchButtonWidthUnit:t.searchButtonWidthUnit||"%",showResetButton:Ee(t.showResetButton),resetButtonText:t.resetButtonText??"",resetButtonIcon:xe(t.resetButtonIcon,{library:"",value:""}),resetButtonWidth:n(t.resetButtonWidth),resetButtonWidth_tablet:n(t.resetButtonWidthTablet),resetButtonWidth_mobile:n(t.resetButtonWidthMobile),resetButtonWidthUnit:t.resetButtonWidthUnit||"%",voxelIntegration:Ee(t.voxelIntegration),adaptiveFiltering:Ee(t.adaptiveFiltering),portalMode:xe(t.portalMode,{desktop:!1,tablet:!0,mobile:!0}),formToggleDesktop:Ee(t.formToggleDesktop),formToggleTablet:Ee(t.formToggleTablet),formToggleMobile:Ee(t.formToggleMobile),toggleText:t.toggleText||"Filter results",toggleIcon:xe(t.toggleIcon,{library:"",value:""})}}async function qs(e,t){if(!e||e.length===0)return[];const r=`${Us()}voxel-fse/v1/search-form/frontend-config?post_types=${encodeURIComponent(e.join(","))}`;try{const l={};t&&Object.entries(t).forEach(([i,c])=>{Array.isArray(c)&&(l[i]={},c.forEach(d=>{d.filterKey&&(l[i][d.filterKey]={defaultValueEnabled:d.defaultValueEnabled,defaultValue:d.defaultValue,resetValue:d.resetValue})}))});const o=Object.keys(l).length>0,a=await fetch(r,{method:o?"POST":"GET",headers:o?{"Content-Type":"application/json"}:void 0,body:o?JSON.stringify({filter_configs:l}):void 0});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(l){return console.error("Failed to fetch post types:",l),[]}}function zs(e){const t=e,n=(s,i)=>typeof s=="boolean"?s:s==="true"?!0:s==="false"?!1:i,r=s=>{if(s&&typeof s=="object"){const i=s;return{desktop:n(i.desktop,!1),tablet:n(i.tablet,!0),mobile:n(i.mobile,!0)}}return{desktop:!1,tablet:!0,mobile:!0}},l=s=>s&&typeof s=="object"?s:{library:"",value:""},a=(t.postTypes??t.post_types??[]).map(s=>typeof s=="string"?s:s&&typeof s=="object"&&"key"in s&&s.key||"").filter(Boolean);return{blockId:t.blockId??t.block_id??"",postTypes:a,selectedPostType:a[0]||"",showPostTypeFilter:n(t.showPostTypeFilter??t.show_post_type_filter,!0),filterLists:t.filterLists??t.filter_lists??{},onSubmit:t.onSubmit??t.on_submit??"feed",postToFeedId:t.postToFeedId??t.post_to_feed_id??"",postToMapId:t.postToMapId??t.post_to_map_id??"",searchOn:t.searchOn??t.search_on??"submit",updateUrl:n(t.updateUrl??t.update_url,!0),submitToPageId:t.submitToPageId??t.submit_to_page_id,mapAdditionalMarkers:t.mapAdditionalMarkers??t.map_additional_markers??0,mapEnableClusters:n(t.mapEnableClusters??t.map_enable_clusters,!0),showSearchButton:n(t.showSearchButton??t.show_search_button,!0),searchButtonText:t.searchButtonText??t.search_button_text??"",searchButtonIcon:l(t.searchButtonIcon??t.search_button_icon),searchButtonWidth:t.searchButtonWidth,searchButtonWidth_tablet:t.searchButtonWidth_tablet??t.search_button_width_tablet,searchButtonWidth_mobile:t.searchButtonWidth_mobile??t.search_button_width_mobile,searchButtonWidthUnit:t.searchButtonWidthUnit??t.search_button_width_unit??"%",showResetButton:n(t.showResetButton??t.show_reset_button,!1),resetButtonText:t.resetButtonText??t.reset_button_text??"",resetButtonIcon:l(t.resetButtonIcon??t.reset_button_icon),resetButtonWidth:t.resetButtonWidth,resetButtonWidth_tablet:t.resetButtonWidth_tablet??t.reset_button_width_tablet,resetButtonWidth_mobile:t.resetButtonWidth_mobile??t.reset_button_width_mobile,resetButtonWidthUnit:t.resetButtonWidthUnit??t.reset_button_width_unit??"%",voxelIntegration:n(t.voxelIntegration??t.voxel_integration,!0),adaptiveFiltering:n(t.adaptiveFiltering??t.adaptive_filtering,!1),portalMode:r(t.portalMode??t.portal_mode),formToggleDesktop:n(t.formToggleDesktop??t.form_toggle_desktop,!1),formToggleTablet:n(t.formToggleTablet??t.form_toggle_tablet,!0),formToggleMobile:n(t.formToggleMobile??t.form_toggle_mobile,!0),toggleText:t.toggleText??t.toggle_text??"Filter results",toggleIcon:l(t.toggleIcon??t.toggle_icon),postTypeFilterWidth:t.postTypeFilterWidth,postTypeFilterWidth_tablet:t.postTypeFilterWidth_tablet??t.post_type_filter_width_tablet,postTypeFilterWidth_mobile:t.postTypeFilterWidth_mobile??t.post_type_filter_width_mobile,mfSwitcherDesktop:n(t.mfSwitcherDesktop??t.mf_switcher_desktop,!1),mfSwitcherDesktopDefault:t.mfSwitcherDesktopDefault??t.mf_switcher_desktop_default??"feed",mfSwitcherTablet:n(t.mfSwitcherTablet??t.mf_switcher_tablet,!1),mfSwitcherTabletDefault:t.mfSwitcherTabletDefault??t.mf_switcher_tablet_default??"feed",mfSwitcherMobile:n(t.mfSwitcherMobile??t.mf_switcher_mobile,!1),mfSwitcherMobileDefault:t.mfSwitcherMobileDefault??t.mf_switcher_mobile_default??"feed"}}function Ks(e){const t=e.querySelector("script.vxconfig");if(t&&t.textContent)try{const n=JSON.parse(t.textContent),r=e.dataset,l={...n,blockId:n.blockId||e.id||"",onSubmit:r.onSubmit||n.onSubmit||"refresh",postToFeedId:r.postToFeedId||n.postToFeedId||"",postToMapId:r.postToMapId||n.postToMapId||""};return zs(l)}catch(n){console.error("Failed to parse vxconfig:",n)}return Hs(e)}function Gs({attributes:e,onSubmit:t,inlinePostTypes:n}){const[r,l]=u.useState(n||[]),[o,a]=u.useState(!n||n.length===0),[s,i]=u.useState(null),c=u.useRef(!1),d=u.useCallback(()=>{if(c.current)return;const f=e.postTypes?.[0]||"";if(!f||o||r.length===0)return;const g={},v=r.find(k=>k.key===f);v?.filters&&v.filters.forEach(k=>{k.value!==null&&k.value!==void 0&&(g[k.key]=k.value)}),t({postType:f,...g}),c.current=!0},[e.postTypes,t,o,r]);if(u.useEffect(()=>{if(n&&n.length>0)return;let f=!1;async function g(){a(!0),i(null);try{const v=await qs(e.postTypes||[],e.filterLists);f||l(v)}catch(v){f||i(v instanceof Error?v.message:"Failed to load")}finally{f||a(!1)}}return g(),()=>{f=!0}},[n,e.postTypes,e.filterLists]),u.useEffect(()=>{const f=e.blockId;if(f)return ft.set(f,d),()=>{ft.delete(f)}},[e.blockId,d]),o)return React.createElement("div",{className:"ts-form ts-search-widget"},React.createElement("div",{className:"ts-filter-wrapper flexify"},React.createElement("div",{className:"ts-no-posts"},React.createElement("span",{className:"ts-loader"}))));if(s)return React.createElement("div",{className:"ts-form ts-search-widget voxel-fse-error"},React.createElement("div",{className:"ts-filter-wrapper flexify"},React.createElement("span",null,"Error loading search form")));const b=r.filter(f=>e.postTypes?.includes(f.key));return React.createElement(Ws,{attributes:e,postTypes:b,context:"frontend",onSubmit:t})}function He(){document.querySelectorAll(".voxel-fse-search-form").forEach(t=>{const n=t.dataset;if(n.hydrated==="true")return;const r=Ks(t),l=i=>{const d=i.postType||r.postTypes?.[0]||"",{postType:b,...f}=i;switch(r.onSubmit){case"feed":if(r.postToFeedId){const g=new CustomEvent("voxel-search-submit",{detail:{targetId:r.postToFeedId,postType:d,filters:f,hasMapWidget:!!r.postToMapId,mapAdditionalMarkers:r.mapAdditionalMarkers??0},bubbles:!0});if(window.dispatchEvent(g),r.postToMapId){const v=new CustomEvent("voxel-search-submit",{detail:{targetId:r.postToMapId,postType:d,filters:f,mapAdditionalMarkers:r.mapAdditionalMarkers??0,mapEnableClusters:r.mapEnableClusters??!0},bubbles:!0});window.dispatchEvent(v)}}else console.warn("[search-form] No postToFeedId set, cannot dispatch to Post Feed");break;case"page":r.submitToPageId?Zs(i,r):cn(i,r);break;default:cn(i,r);break}},o=t.querySelector("script.vxconfig-hydrate");let a=null;if(o?.textContent)try{a=JSON.parse(o.textContent)}catch{}t.innerHTML="",n.hydrated="true",fn.createRoot(t).render(React.createElement(Gs,{attributes:r,onSubmit:l,inlinePostTypes:a}))})}function cn(e,t){const n=e,r=new URL(window.location.href),l=[];r.searchParams.forEach((a,s)=>{(s.startsWith("filter_")||s==="post_type")&&l.push(s),s==="type"&&l.push(s)}),l.forEach(a=>r.searchParams.delete(a));const o=n.postType||t.postTypes?.[0];o&&typeof o=="string"&&r.searchParams.set("type",o),Object.entries(e).forEach(([a,s])=>{a!=="postType"&&(s==null||s===""||(typeof s=="object"?r.searchParams.set(a,JSON.stringify(s)):r.searchParams.set(a,String(s))))}),window.location.href=r.toString()}function Zs(e,t){const n=e,r=window.voxelFseSiteUrl||window.location.origin,l=new URL(r);l.searchParams.set("p",String(t.submitToPageId));const o=n.postType||t.postTypes?.[0];o&&typeof o=="string"&&l.searchParams.set("type",o),Object.entries(e).forEach(([a,s])=>{a!=="postType"&&(s==null||s===""||(typeof s=="object"?l.searchParams.set(a,JSON.stringify(s)):l.searchParams.set(a,String(s))))}),window.location.href=l.toString()}function Js(e){const t=e;if(!t.detail?.searchFormId)return;const{searchFormId:n}=t.detail,r=ft.get(n);r&&r()}window.addEventListener("voxel-fse:post-feed-ready",Js),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",He):He(),window.addEventListener("turbo:load",He),window.addEventListener("pjax:complete",He)})(ReactDOM,React,ReactDOM,wp.apiFetch);
