(function(Ht,a,ut,Wt){"use strict";function Ut(){if(typeof window<"u"&&window.wpApiSettings?.root)return window.wpApiSettings.root.replace(/\/wp-json\/?$/,"")+"?vx=1";if(typeof document<"u"){const e=document.querySelector('link[rel="https://api.w.org/"]');if(e){const t=e.getAttribute("href");if(t)return t.replace(/\/wp-json\/?$/,"")+"?vx=1"}}return typeof window<"u"?window.location.origin+"?vx=1":"/?vx=1"}function jt(){const e=Ut();try{return new URL(e).pathname.replace(/\/$/,"")}catch{return""}}function dt(){if(typeof window<"u"&&window.wpApiSettings?.root)return window.wpApiSettings.root;if(typeof document<"u"){const t=document.querySelector('link[rel="https://api.w.org/"]');if(t){const r=t.getAttribute("href");if(r)return r}}const e=jt();return typeof window<"u"?window.location.origin+e+"/wp-json/":"/wp-json/"}function zt({attributes:e,postTypes:t,context:r,onSubmit:n}){const[o,u]=a.useState(()=>({currentPostType:e.postTypes[0]||"",filterValues:{},activeFilterCount:0,portalActive:!1,loading:!1,resetting:!1,narrowedValues:null,narrowingFilters:!1})),i=a.useRef(!1),p=a.useRef(null),m=a.useMemo(()=>t.find(S=>S.key===o.currentPostType),[t,o.currentPostType]),d=a.useMemo(()=>e.filterLists[o.currentPostType]||[],[e.filterLists,o.currentPostType]);a.useEffect(()=>{e.postTypes.length>0&&!e.postTypes.includes(o.currentPostType)&&u(S=>({...S,currentPostType:e.postTypes[0],filterValues:{}}))},[e.postTypes,o.currentPostType]),a.useEffect(()=>{const S=Object.values(o.filterValues).filter(k=>k!=null&&k!==""&&k!==!1).length;u(k=>({...k,activeFilterCount:S}))},[o.filterValues]);const b=a.useCallback(S=>{u(k=>({...k,currentPostType:S,filterValues:{}})),r==="frontend"&&setTimeout(()=>{n&&n({postType:S}),ft({},S)},50)},[r,e.searchOn,n]),h=a.useCallback((S,k)=>{u(A=>({...A,filterValues:{...A.filterValues,[S]:k}})),e.searchOn==="change"&&r==="frontend"&&setTimeout(()=>{w()},300)},[e.searchOn,r]),M=a.useCallback((S=!1)=>{if(u(k=>({...k,filterValues:{},activeFilterCount:0,resetting:!0,portalActive:S?!1:k.portalActive})),setTimeout(()=>{u(k=>({...k,resetting:!1}))},100),r==="frontend"){const k=new CustomEvent("voxel-search-clear",{detail:{postType:o.currentPostType}});window.dispatchEvent(k)}},[r,o.currentPostType]),g=a.useCallback(()=>{u(S=>({...S,portalActive:!S.portalActive}))},[]),N=a.useCallback(async()=>{if(!e.adaptiveFiltering||r!=="frontend")return;if(i.current){i.current=!1;return}const S=d.filter(F=>F.type==="range"||F.type==="terms");if(S.length===0)return;const k=new URLSearchParams;k.set("post_type",o.currentPostType),Object.entries(o.filterValues).forEach(([F,f])=>{f!=null&&f!==""&&(Array.isArray(f)?k.set(F,f.join(",")):typeof f=="object"?k.set(F,JSON.stringify(f)):k.set(F,String(f)))});const A=[];S.forEach(F=>{if(F.type==="terms"){const f=m?.filters?.find(v=>v.key===F.filterKey);if(f?.props?.terms){const v=R=>{R.forEach(P=>{P.term_taxonomy_id&&A.push(P.term_taxonomy_id),P.children&&Array.isArray(P.children)&&v(P.children)})};v(f.props.terms)}}}),u(F=>({...F,narrowingFilters:!0}));try{const F=dt(),f=await fetch(`${F}voxel-fse/v1/search-form/narrow-filters?${k.toString()}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({term_taxonomy_ids:A})});if(!f.ok)throw new Error(`HTTP ${f.status}`);const v=await f.json();v.success&&v.data?(u(R=>({...R,narrowedValues:{ranges:v.data.ranges||{},terms:v.data.terms||{}},narrowingFilters:!1})),i.current=!0):u(R=>({...R,narrowingFilters:!1}))}catch(F){console.error("[useSearchForm] Adaptive filtering error:",F),u(f=>({...f,narrowingFilters:!1}))}},[e.adaptiveFiltering,r,d,o.currentPostType,o.filterValues,m]);a.useEffect(()=>{if(!(!e.adaptiveFiltering||r!=="frontend"))return p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{N()},300),()=>{p.current&&clearTimeout(p.current)}},[o.filterValues,e.adaptiveFiltering,r,N]);const w=a.useCallback(()=>{u(S=>({...S,loading:!0})),n&&n({postType:o.currentPostType,...o.filterValues}),r==="frontend"&&ft(o.filterValues,o.currentPostType),u(S=>({...S,loading:!1}))},[r,n,o.currentPostType,o.filterValues]),C=a.useCallback(()=>{w()},[w]);return{state:o,setCurrentPostType:b,setFilterValue:h,clearAll:M,togglePortal:g,submit:C,currentPostTypeConfig:m,filterConfigs:d,narrowedValues:o.narrowedValues,narrowingFilters:o.narrowingFilters}}function ft(e,t){const r=new URL(window.location.href),n=[];r.searchParams.forEach((o,u)=>{(u.startsWith("filter_")||u==="post_type")&&n.push(u)}),n.forEach(o=>r.searchParams.delete(o)),t&&r.searchParams.set("post_type",t),Object.entries(e).forEach(([o,u])=>{u!=null&&u!==""&&(Array.isArray(u)?r.searchParams.set(`filter_${o}`,u.join(",")):typeof u=="object"?r.searchParams.set(`filter_${o}`,JSON.stringify(u)):r.searchParams.set(`filter_${o}`,String(u)))}),window.history.replaceState({},"",r.toString())}function Xe(e){return typeof e=="string"&&e.includes("@tags()")}function mt(e){if(!Xe(e))return e;const t=e.match(/@tags\(\)(.*?)@endtags\(\)/s);return t?t[1]:e}async function pt(e,t={}){try{return(await Wt({path:"/voxel-fse/v1/dynamic-data/render",method:"POST",data:{expression:e,context:t}})).rendered}catch(r){return console.error("Failed to render dynamic tag:",r),e}}function de({isOpen:e,target:t,title:r="",icon:n,saveLabel:o="Save",clearLabel:u="Clear",showClear:i=!0,showSave:p=!0,onSave:m,onClear:d,onClose:b,children:h,className:M=""}){const g=a.useRef(null),N=a.useRef(null),[w,C]=a.useState({position:"absolute",top:"-9999px",left:"-9999px"}),S=a.useRef(""),k=a.useCallback((f=!1)=>{if(!N.current||!t.current||!g.current)return;const v=t.current,R=g.current,P=N.current,x=document.body.clientWidth,I=v.getBoundingClientRect(),H=v.offsetWidth,j={left:I.left+window.pageXOffset,top:I.top+window.pageYOffset},q=R.getBoundingClientRect(),O=window.getComputedStyle(P),E=parseFloat(O.minWidth)||0,U=P.querySelector(".pika-single");let L;if(U){const ce=U.classList.contains("is-range")||U.querySelectorAll(".pika-lendar").length>1||P.closest(".ts-booking-date-range")!==null;L=Math.max(ce?640:420,E)}else L=Math.max(I.width,E);const D=j.left+H/2,X=x/2;let te;D>X+1?te=j.left-L+H:te=j.left;const W=window.innerHeight,Y=q.height;let K=j.top+I.height;const se=I.bottom+Y>W,ve=I.top-Y>=0;se&&ve&&(K=j.top-Y);const ie={top:`${K}px`,left:`${te}px`,width:`${L}px`,position:"absolute"},ge=JSON.stringify(ie);ge!==S.current&&(S.current=ge,f?C(ie):requestAnimationFrame(()=>C(ie)))},[t]);if(a.useEffect(()=>{if(!e)return;const f=R=>{const P=R.target;N.current?.contains(P)||b()},v=requestAnimationFrame(()=>{document.addEventListener("mousedown",f)});return()=>{cancelAnimationFrame(v),document.removeEventListener("mousedown",f)}},[e,b]),a.useEffect(()=>{if(!e)return;const f=v=>{v.key==="Escape"&&b()};return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[e,b]),a.useEffect(()=>{if(!e)return;k(!0);const f=()=>k();window.addEventListener("scroll",f,!0);const v=()=>k();window.addEventListener("resize",v,!0);let R=null;return N.current&&(R=new ResizeObserver(()=>k(!0)),R.observe(N.current)),()=>{window.removeEventListener("scroll",f,!0),window.removeEventListener("resize",v,!0),R?.disconnect()}},[e,k]),!e)return null;const A=()=>React.createElement("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M14 1.41L12.59 0L7 5.59L1.41 0L0 1.41L5.59 7L0 12.59L1.41 14L7 8.41L12.59 14L14 12.59L8.41 7L14 1.41Z",fill:"currentColor"})),F=()=>React.createElement("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z",fill:"currentColor"}));return ut.createPortal(React.createElement("div",{className:`elementor vx-popup ${M}`.trim()},React.createElement("div",{className:"ts-popup-root elementor-element"},React.createElement("div",{className:"ts-form elementor-element",style:w,ref:g},React.createElement("div",{className:"ts-field-popup-container"},React.createElement("div",{className:"ts-field-popup triggers-blur",ref:N},r&&React.createElement("div",{className:"ts-popup-head flexify ts-sticky-top"},React.createElement("div",{className:"ts-popup-name flexify"},n&&React.createElement("span",{dangerouslySetInnerHTML:{__html:n}}),React.createElement("span",null,r)),React.createElement("ul",{className:"flexify simplify-ul"},React.createElement("li",{className:"flexify ts-popup-close"},React.createElement("a",{href:"#",onClick:f=>{f.preventDefault(),b()},className:"ts-icon-btn","aria-label":"Close"},React.createElement(A,null))))),React.createElement("div",{className:"ts-popup-content-wrapper min-scroll"},h),p||i?React.createElement("div",{className:"ts-popup-controller"},React.createElement("ul",{className:"flexify simplify-ul"},React.createElement("li",{className:"flexify ts-popup-close"},React.createElement("a",{href:"#",onClick:f=>{f.preventDefault(),b()},className:"ts-icon-btn","aria-label":"Close"},React.createElement(A,null))),i&&d&&React.createElement("li",{className:"flexify hide-d",onClick:f=>{f.preventDefault(),d()}},React.createElement("a",{href:"#",className:"ts-icon-btn"},React.createElement(F,null))),i&&d&&React.createElement("li",{className:"flexify hide-m",onClick:f=>{f.preventDefault(),d()}},React.createElement("a",{href:"#",className:"ts-btn ts-btn-1"},u)),p&&React.createElement("li",{className:"flexify"},React.createElement("a",{href:"#",onClick:f=>{f.preventDefault(),m(),b()},className:"ts-btn ts-btn-2"},o)))):React.createElement("div",{className:"ts-popup-controller hide-d"},React.createElement("ul",{className:"flexify simplify-ul"},React.createElement("li",{className:"flexify ts-popup-close"},React.createElement("a",{href:"#",onClick:f=>{f.preventDefault(),b()},className:"ts-icon-btn","aria-label":"Close"},React.createElement(A,null)))))))))),document.body)}const _e=({value:e,onChange:t,onSelect:r,pickerConfig:n,onPickerReady:o})=>{const u=a.useRef(null),i=a.useRef(null),p=a.useRef(null);return a.useEffect(()=>{if(!u.current||!i.current)return;const m=window.Pikaday;if(!m){console.error("Pikaday not loaded - window.Pikaday is undefined");return}const d=requestAnimationFrame(()=>{p.current=new m({field:i.current,container:u.current,bound:!1,firstDay:1,keyboardInput:!1,numberOfMonths:2,defaultDate:e||void 0,onSelect:b=>{t(b),r&&r(b)},...n}),o&&p.current&&o(p.current)});return()=>{cancelAnimationFrame(d),setTimeout(()=>{p.current?.destroy(),p.current=null},200)}},[]),a.useEffect(()=>{p.current&&(e&&p.current.setDate(e,!0),p.current.draw(!0))},[e]),a.createElement("div",{className:"ts-booking-date ts-booking-date-range ts-form-group",ref:u},a.createElement("input",{type:"hidden",ref:i}))},be={search:React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},React.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.25 2.75C6.14154 2.75 2 6.89029 2 11.998C2 17.1056 6.14154 21.2459 11.25 21.2459C13.5335 21.2459 15.6238 20.4187 17.2373 19.0475L20.7182 22.5287C21.011 22.8216 21.4859 22.8217 21.7788 22.5288C22.0717 22.2359 22.0718 21.761 21.7789 21.4681L18.2983 17.9872C19.6714 16.3736 20.5 14.2826 20.5 11.998C20.5 6.89029 16.3585 2.75 11.25 2.75ZM3.5 11.998C3.5 7.71905 6.96962 4.25 11.25 4.25C15.5304 4.25 19 7.71905 19 11.998C19 16.2769 15.5304 19.7459 11.25 19.7459C6.96962 19.7459 3.5 16.2769 3.5 11.998Z",fill:"#343C54"})),close:React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},React.createElement("path",{d:"M5.9545 5.95548C6.39384 5.51614 7.10616 5.51614 7.5455 5.95548L11.999 10.409L16.4524 5.95561C16.8918 5.51627 17.6041 5.51627 18.0434 5.95561C18.4827 6.39495 18.4827 7.10726 18.0434 7.5466L13.59 12L18.0434 16.4534C18.4827 16.8927 18.4827 17.605 18.0434 18.0444C17.6041 18.4837 16.8918 18.4837 16.4524 18.0444L11.999 13.591L7.5455 18.0445C7.10616 18.4839 6.39384 18.4839 5.9545 18.0445C5.51517 17.6052 5.51516 16.8929 5.9545 16.4535L10.408 12L5.9545 7.54647C5.51516 7.10713 5.51517 6.39482 5.9545 5.95548Z",fill:"#343C54"})),reload:React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},React.createElement("path",{d:"M21.6009 10.4593C22.001 10.3521 22.2384 9.94088 22.1312 9.54078C21.59 7.52089 20.3974 5.73603 18.7384 4.46302C17.0793 3.19001 15.0466 2.5 12.9555 2.5C10.8644 2.5 8.83164 3.19001 7.17262 4.46302C6.12405 5.26762 5.26179 6.2767 4.63257 7.42036L2.86504 6.92617C2.76093 6.89707 2.65423 6.89133 2.55153 6.9068C2.46222 6.91962 2.37374 6.94889 2.29039 6.99582C1.92945 7.19903 1.80158 7.65636 2.00479 8.0173L3.73942 11.0983C3.83701 11.2717 3.99946 11.3991 4.19104 11.4527C4.30333 11.4841 4.42023 11.4886 4.53266 11.4673C4.61373 11.4524 4.69254 11.4242 4.7657 11.383L7.84641 9.64831C8.11073 9.49948 8.25936 9.20608 8.22302 8.90493C8.18668 8.60378 7.9725 8.35417 7.68037 8.27249L6.1241 7.83737C6.6343 6.99996 7.29751 6.2579 8.08577 5.65305C9.48282 4.58106 11.1946 4 12.9555 4C14.7164 4 16.4282 4.58106 17.8252 5.65305C19.2223 6.72504 20.2266 8.22807 20.6823 9.92901C20.7895 10.3291 21.2008 10.5665 21.6009 10.4593Z",fill:"#343C54"}),React.createElement("path",{d:"M4.30739 13.5387C3.90729 13.6459 3.66985 14.0572 3.77706 14.4573C4.31829 16.4771 5.51089 18.262 7.16991 19.535C8.82892 20.808 10.8616 21.498 12.9528 21.498C15.0439 21.498 17.0766 20.808 18.7356 19.535C19.7859 18.7291 20.6493 17.7181 21.2787 16.5722L23.0083 17.0557C23.1218 17.0961 23.2447 17.1091 23.3661 17.0917C23.5554 17.0658 23.7319 16.968 23.8546 16.8116C24.0419 16.573 24.0669 16.245 23.9181 15.9807L22.1835 12.8996C22.0859 12.7263 21.9234 12.5988 21.7319 12.5453C21.64 12.5196 21.5451 12.5119 21.4521 12.5216C21.3493 12.5317 21.2488 12.5629 21.1571 12.6146L18.0764 14.3493C17.7155 14.5525 17.5876 15.0099 17.7909 15.3708C17.9016 15.5675 18.0879 15.695 18.2929 15.7373L19.7875 16.1552C19.2768 16.9949 18.6125 17.7388 17.8225 18.345C16.4255 19.417 14.7137 19.998 12.9528 19.998C11.1918 19.998 9.4801 19.417 8.08305 18.345C6.686 17.273 5.68171 15.77 5.22595 14.069C5.11874 13.6689 4.70749 13.4315 4.30739 13.5387Z",fill:"#343C54"})),filterslider:React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},React.createElement("path",{d:"M8.89789 3.25C10.3318 3.25 11.5358 4.23471 11.8704 5.56481H20.3125C20.7267 5.56481 21.0625 5.90059 21.0625 6.31481C21.0625 6.72902 20.7267 7.06481 20.3125 7.06481H11.8705C11.536 8.3951 10.332 9.38 8.89789 9.38C7.46381 9.38 6.25976 8.3951 5.92527 7.06481H4.3125C3.89829 7.06481 3.5625 6.72902 3.5625 6.31481C3.5625 5.90059 3.89829 5.56481 4.3125 5.56481H5.92537C6.26 4.23471 7.46395 3.25 8.89789 3.25Z",fill:"#343C54"}),React.createElement("path",{d:"M12.737 12.7503H4.3125C3.89829 12.7503 3.5625 12.4145 3.5625 12.0003C3.5625 11.5861 3.89829 11.2503 4.3125 11.2503H12.7369C13.0714 9.91998 14.2754 8.93506 15.7095 8.93506C17.1436 8.93506 18.3477 9.91998 18.6822 11.2503H20.3125C20.7267 11.2503 21.0625 11.5861 21.0625 12.0003C21.0625 12.4145 20.7267 12.7503 20.3125 12.7503H18.682C18.3474 14.0804 17.1435 15.0651 15.7095 15.0651C14.2756 15.0651 13.0717 14.0804 12.737 12.7503Z",fill:"#343C54"}),React.createElement("path",{d:"M12.5932 16.9354C12.2587 15.605 11.0546 14.6201 9.62055 14.6201C8.18645 14.6201 6.9824 15.605 6.64792 16.9354H4.3125C3.89829 16.9354 3.5625 17.2711 3.5625 17.6854C3.5625 18.0996 3.89829 18.4354 4.3125 18.4354H6.64804C6.98268 19.7654 8.18662 20.7501 9.62055 20.7501C11.0545 20.7501 12.2584 19.7654 12.5931 18.4354H20.3125C20.7267 18.4354 21.0625 18.0996 21.0625 17.6854C21.0625 17.2711 20.7267 16.9354 20.3125 16.9354H12.5932Z",fill:"#343C54"})),crosshairs:React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C12.5523 2 13 2.44772 13 3V4.06189C16.6187 4.51314 19.4869 7.38128 19.9381 11H21C21.5523 11 22 11.4477 22 12C22 12.5523 21.5523 13 21 13H19.9381C19.4869 16.6187 16.6187 19.4869 13 19.9381V21C13 21.5523 12.5523 22 12 22C11.4477 22 11 21.5523 11 21V19.9381C7.38128 19.4869 4.51314 16.6187 4.06189 13H3C2.44772 13 2 12.5523 2 12C2 11.4477 2.44772 11 3 11H4.06189C4.51314 7.38128 7.38128 4.51314 11 4.06189V3C11 2.44772 11.4477 2 12 2ZM6.07089 11C6.50618 8.48991 8.48991 6.50618 11 6.07089V8C11 8.55228 11.4477 9 12 9C12.5523 9 13 8.55228 13 8V6.07089C15.5101 6.50618 17.4938 8.48991 17.9291 11H16C15.4477 11 15 11.4477 15 12C15 12.5523 15.4477 13 16 13H17.9291C17.4938 15.5101 15.5101 17.4938 13 17.9291V16C13 15.4477 12.5523 15 12 15C11.4477 15 11 15.4477 11 16V17.9291C8.48991 17.4938 6.50618 15.5101 6.07089 13H8C8.55228 13 9 12.5523 9 12C9 11.4477 8.55228 11 8 11H6.07089Z",fill:"#343C54"}))};function qt(e,t){const r={},n=[t];return e.rowVisibility==="hide"&&(r.display="none"),e.width&&e.width>0&&(r.width=`${e.width}%`,r.flexGrow=0,r.flexShrink=0),e.hideFilter&&n.push("vx-hidden"),e.alignContent&&(r.justifyContent=e.alignContent),e.hideLabel&&n.push("hide-label"),{style:r,className:n.join(" ")}}function ee(e,t){return qt(e,t)}function Kt(e){const t={},r=["ts-field-popup","triggers-blur"];return e.customPopupEnabled&&(e.popupMinWidth&&e.popupMinWidth>0&&(t.minWidth=`${e.popupMinWidth}px`),e.popupMaxWidth&&e.popupMaxWidth>0&&(t.maxWidth=`${e.popupMaxWidth}px`),e.popupMaxHeight&&e.popupMaxHeight>0&&(t.maxHeight=`${e.popupMaxHeight}px`),e.popupCenterPosition&&r.push("ts-popup-centered")),{style:t,className:r.join(" ")}}let ht=!1;function Ye(){if(ht)return!0;if(!window.Voxel?.mixins?.base)return!1;const e=window.Voxel.mixins.base;return e.mounted&&!e._originalMounted?(e._originalMounted=e.mounted,e.mounted=function(){try{const t=this.$root?.$options?.el||this.$el;if(t){const r=t.closest?.(".elementor-element");if(r)this.widget_id=r.dataset?.id||"";else{const o=t.closest?.("[data-block-id]");this.widget_id=o&&o.dataset?.blockId||""}const n=t.closest?.(".elementor");if(n)this.post_id=n.dataset?.elementorId||"";else{const o=document.body.className.match(/postid-(\d+)/);this.post_id=o?o[1]:""}}e._originalMounted&&e._originalMounted!==e.mounted&&e._originalMounted.call(this)}catch(t){console.warn("[VoxelShim] Error in patched mounted():",t),this.widget_id="",this.post_id=""}},ht=!0,console.log("[VoxelShim] Successfully patched Voxel.mixins.base.mounted"),!0):!1}function vt(){if(Ye())return;let e=0;const t=50,n=setInterval(()=>{if(e++,Ye()){clearInterval(n);return}e>=t&&(clearInterval(n),console.warn("[VoxelShim] Voxel.mixins.base not found after 5 seconds"))},100);typeof document<"u"&&document.addEventListener("voxel:ready",()=>{Ye(),clearInterval(n)},{once:!0})}typeof window<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",vt,{once:!0}):vt()),typeof window<"u"&&typeof window._vx_file_upload_cache>"u"&&(window._vx_file_upload_cache=[]);function Zt({config:e,filterData:t,value:r,onChange:n}){const o=a.useRef(null),u=a.useRef(null),[i,p]=a.useState(!1),[m,d]=a.useState(""),b=typeof r=="string"?r:"",h=t.props?.placeholder||t.label||"Type keywords...",M=e.displayAs||t.props?.display_as||"inline",g=t.icon||"";a.useEffect(()=>{i&&(d(b),setTimeout(()=>{u.current?.focus()},50))},[i,b]);const N=R=>{n(R.target.value)},w=R=>{d(R.target.value)},C=a.useCallback(()=>{p(!0)},[]),S=a.useCallback(()=>{n(m),p(!1)},[m,n]),k=a.useCallback(()=>{d(""),n("")},[n]),A=a.useCallback(R=>{R.key==="Enter"&&(R.preventDefault(),S())},[S]);if(M==="inline"){const{style:R,className:P}=ee(e,"ts-form-group ts-inline-filter");return React.createElement("div",{className:P,style:R},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{className:"ts-input-icon flexify"},g&&React.createElement("span",{dangerouslySetInnerHTML:{__html:g}}),React.createElement("input",{type:"text",value:b,onChange:N,placeholder:h,className:"inline-input"})))}const F=b.length>0,{style:f,className:v}=ee(e,"ts-form-group");return React.createElement("div",{className:v,style:f},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:o,className:`ts-filter ts-popup-target ${F?"ts-filled":""}`,onClick:C,onMouseDown:R=>R.preventDefault(),role:"button",tabIndex:0},g&&React.createElement("span",{dangerouslySetInnerHTML:{__html:g}}),React.createElement("div",{className:"ts-filter-text"},F?b:h)),React.createElement(de,{isOpen:i,target:o,title:"",icon:g,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:S,onClear:k,onClose:()=>p(!1)},React.createElement("div",{className:"ts-input-icon ts-sticky-top flexify"},React.createElement("span",null,be.search),React.createElement("input",{ref:u,type:"text",value:m,onChange:w,onKeyDown:A,placeholder:h,className:"autofocus border-none"}))))}var we;(function(e){e.Range="range",e.Steps="steps",e.Positions="positions",e.Count="count",e.Values="values"})(we||(we={}));var he;(function(e){e[e.None=-1]="None",e[e.NoValue=0]="NoValue",e[e.LargeValue=1]="LargeValue",e[e.SmallValue=2]="SmallValue"})(he||(he={}));function Jt(e){return Oe(e)&&typeof e.from=="function"}function Oe(e){return typeof e=="object"&&typeof e.to=="function"}function gt(e){e.parentElement.removeChild(e)}function Ge(e){return e!=null}function Et(e){e.preventDefault()}function Xt(e){return e.filter(function(t){return this[t]?!1:this[t]=!0},{})}function Yt(e,t){return Math.round(e/t)*t}function Gt(e,t){var r=e.getBoundingClientRect(),n=e.ownerDocument,o=n.documentElement,u=St(n);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(u.x=0),t?r.top+u.y-o.clientTop:r.left+u.x-o.clientLeft}function ye(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function bt(e,t,r){r>0&&(fe(e,t),setTimeout(function(){We(e,t)},r))}function yt(e){return Math.max(Math.min(e,100),0)}function He(e){return Array.isArray(e)?e:[e]}function Qt(e){e=String(e);var t=e.split(".");return t.length>1?t[1].length:0}function fe(e,t){e.classList&&!/\s/.test(t)?e.classList.add(t):e.className+=" "+t}function We(e,t){e.classList&&!/\s/.test(t)?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}function $t(e,t){return e.classList?e.classList.contains(t):new RegExp("\\b"+t+"\\b").test(e.className)}function St(e){var t=window.pageXOffset!==void 0,r=(e.compatMode||"")==="CSS1Compat",n=t?window.pageXOffset:r?e.documentElement.scrollLeft:e.body.scrollLeft,o=t?window.pageYOffset:r?e.documentElement.scrollTop:e.body.scrollTop;return{x:n,y:o}}function es(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function ts(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch{}return e}function ss(){return window.CSS&&CSS.supports&&CSS.supports("touch-action","none")}function Qe(e,t){return 100/(t-e)}function $e(e,t,r){return t*100/(e[r+1]-e[r])}function rs(e,t){return $e(e,e[0]<0?t+Math.abs(e[0]):t-e[0],0)}function ns(e,t){return t*(e[1]-e[0])/100+e[0]}function Le(e,t){for(var r=1;e>=t[r];)r+=1;return r}function as(e,t,r){if(r>=e.slice(-1)[0])return 100;var n=Le(r,e),o=e[n-1],u=e[n],i=t[n-1],p=t[n];return i+rs([o,u],r)/Qe(i,p)}function ls(e,t,r){if(r>=100)return e.slice(-1)[0];var n=Le(r,t),o=e[n-1],u=e[n],i=t[n-1],p=t[n];return ns([o,u],(r-i)*Qe(i,p))}function os(e,t,r,n){if(n===100)return n;var o=Le(n,e),u=e[o-1],i=e[o];return r?n-u>(i-u)/2?i:u:t[o-1]?e[o-1]+Yt(n-e[o-1],t[o-1]):n}var wt=(function(){function e(t,r,n){this.xPct=[],this.xVal=[],this.xSteps=[],this.xNumSteps=[],this.xHighestCompleteStep=[],this.xSteps=[n||!1],this.xNumSteps=[!1],this.snap=r;var o,u=[];for(Object.keys(t).forEach(function(i){u.push([He(t[i]),i])}),u.sort(function(i,p){return i[0][0]-p[0][0]}),o=0;o<u.length;o++)this.handleEntryPoint(u[o][1],u[o][0]);for(this.xNumSteps=this.xSteps.slice(0),o=0;o<this.xNumSteps.length;o++)this.handleStepPoint(o,this.xNumSteps[o])}return e.prototype.getDistance=function(t){for(var r=[],n=0;n<this.xNumSteps.length-1;n++)r[n]=$e(this.xVal,t,n);return r},e.prototype.getAbsoluteDistance=function(t,r,n){var o=0;if(t<this.xPct[this.xPct.length-1])for(;t>this.xPct[o+1];)o++;else t===this.xPct[this.xPct.length-1]&&(o=this.xPct.length-2);!n&&t===this.xPct[o+1]&&o++,r===null&&(r=[]);var u,i=1,p=r[o],m=0,d=0,b=0,h=0;for(n?u=(t-this.xPct[o])/(this.xPct[o+1]-this.xPct[o]):u=(this.xPct[o+1]-t)/(this.xPct[o+1]-this.xPct[o]);p>0;)m=this.xPct[o+1+h]-this.xPct[o+h],r[o+h]*i+100-u*100>100?(d=m*u,i=(p-100*u)/r[o+h],u=1):(d=r[o+h]*m/100*i,i=0),n?(b=b-d,this.xPct.length+h>=1&&h--):(b=b+d,this.xPct.length-h>=1&&h++),p=r[o+h]*i;return t+b},e.prototype.toStepping=function(t){return t=as(this.xVal,this.xPct,t),t},e.prototype.fromStepping=function(t){return ls(this.xVal,this.xPct,t)},e.prototype.getStep=function(t){return t=os(this.xPct,this.xSteps,this.snap,t),t},e.prototype.getDefaultStep=function(t,r,n){var o=Le(t,this.xPct);return(t===100||r&&t===this.xPct[o-1])&&(o=Math.max(o-1,1)),(this.xVal[o]-this.xVal[o-1])/n},e.prototype.getNearbySteps=function(t){var r=Le(t,this.xPct);return{stepBefore:{startValue:this.xVal[r-2],step:this.xNumSteps[r-2],highestStep:this.xHighestCompleteStep[r-2]},thisStep:{startValue:this.xVal[r-1],step:this.xNumSteps[r-1],highestStep:this.xHighestCompleteStep[r-1]},stepAfter:{startValue:this.xVal[r],step:this.xNumSteps[r],highestStep:this.xHighestCompleteStep[r]}}},e.prototype.countStepDecimals=function(){var t=this.xNumSteps.map(Qt);return Math.max.apply(null,t)},e.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]},e.prototype.convert=function(t){return this.getStep(this.toStepping(t))},e.prototype.handleEntryPoint=function(t,r){var n;if(t==="min"?n=0:t==="max"?n=100:n=parseFloat(t),!ye(n)||!ye(r[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(n),this.xVal.push(r[0]);var o=Number(r[1]);n?this.xSteps.push(isNaN(o)?!1:o):isNaN(o)||(this.xSteps[0]=o),this.xHighestCompleteStep.push(0)},e.prototype.handleStepPoint=function(t,r){if(r){if(this.xVal[t]===this.xVal[t+1]){this.xSteps[t]=this.xHighestCompleteStep[t]=this.xVal[t];return}this.xSteps[t]=$e([this.xVal[t],this.xVal[t+1]],r,0)/Qe(this.xPct[t],this.xPct[t+1]);var n=(this.xVal[t+1]-this.xVal[t])/this.xNumSteps[t],o=Math.ceil(Number(n.toFixed(3))-1),u=this.xVal[t]+this.xNumSteps[t]*o;this.xHighestCompleteStep[t]=u}},e})(),Ct={to:function(e){return e===void 0?"":e.toFixed(2)},from:Number},xt={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},Ce={tooltips:".__tooltips",aria:".__aria"};function is(e,t){if(!ye(t))throw new Error("noUiSlider: 'step' is not numeric.");e.singleStep=t}function cs(e,t){if(!ye(t))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");e.keyboardPageMultiplier=t}function us(e,t){if(!ye(t))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");e.keyboardMultiplier=t}function ds(e,t){if(!ye(t))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");e.keyboardDefaultStep=t}function fs(e,t){if(typeof t!="object"||Array.isArray(t))throw new Error("noUiSlider: 'range' is not an object.");if(t.min===void 0||t.max===void 0)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");e.spectrum=new wt(t,e.snap||!1,e.singleStep)}function ms(e,t){if(t=He(t),!Array.isArray(t)||!t.length)throw new Error("noUiSlider: 'start' option is incorrect.");e.handles=t.length,e.start=t}function ps(e,t){if(typeof t!="boolean")throw new Error("noUiSlider: 'snap' option must be a boolean.");e.snap=t}function hs(e,t){if(typeof t!="boolean")throw new Error("noUiSlider: 'animate' option must be a boolean.");e.animate=t}function vs(e,t){if(typeof t!="number")throw new Error("noUiSlider: 'animationDuration' option must be a number.");e.animationDuration=t}function Rt(e,t){var r=[!1],n;if(t==="lower"?t=[!0,!1]:t==="upper"&&(t=[!1,!0]),t===!0||t===!1){for(n=1;n<e.handles;n++)r.push(t);r.push(!1)}else{if(!Array.isArray(t)||!t.length||t.length!==e.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");r=t}e.connect=r}function gs(e,t){switch(t){case"horizontal":e.ort=0;break;case"vertical":e.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function kt(e,t){if(!ye(t))throw new Error("noUiSlider: 'margin' option must be numeric.");t!==0&&(e.margin=e.spectrum.getDistance(t))}function Es(e,t){if(!ye(t))throw new Error("noUiSlider: 'limit' option must be numeric.");if(e.limit=e.spectrum.getDistance(t),!e.limit||e.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function bs(e,t){var r;if(!ye(t)&&!Array.isArray(t))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(t)&&!(t.length===2||ye(t[0])||ye(t[1])))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(t!==0){for(Array.isArray(t)||(t=[t,t]),e.padding=[e.spectrum.getDistance(t[0]),e.spectrum.getDistance(t[1])],r=0;r<e.spectrum.xNumSteps.length-1;r++)if(e.padding[0][r]<0||e.padding[1][r]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var n=t[0]+t[1],o=e.spectrum.xVal[0],u=e.spectrum.xVal[e.spectrum.xVal.length-1];if(n/(u-o)>1)throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}function ys(e,t){switch(t){case"ltr":e.dir=0;break;case"rtl":e.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function Ss(e,t){if(typeof t!="string")throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var r=t.indexOf("tap")>=0,n=t.indexOf("drag")>=0,o=t.indexOf("fixed")>=0,u=t.indexOf("snap")>=0,i=t.indexOf("hover")>=0,p=t.indexOf("unconstrained")>=0,m=t.indexOf("invert-connects")>=0,d=t.indexOf("drag-all")>=0,b=t.indexOf("smooth-steps")>=0;if(o){if(e.handles!==2)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");kt(e,e.start[1]-e.start[0])}if(m&&e.handles!==2)throw new Error("noUiSlider: 'invert-connects' behaviour must be used with 2 handles");if(p&&(e.margin||e.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");e.events={tap:r||u,drag:n,dragAll:d,smoothSteps:b,fixed:o,snap:u,hover:i,unconstrained:p,invertConnects:m}}function ws(e,t){if(t!==!1)if(t===!0||Oe(t)){e.tooltips=[];for(var r=0;r<e.handles;r++)e.tooltips.push(t)}else{if(t=He(t),t.length!==e.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");t.forEach(function(n){if(typeof n!="boolean"&&!Oe(n))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")}),e.tooltips=t}}function Cs(e,t){if(t.length!==e.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");e.handleAttributes=t}function xs(e,t){if(!Oe(t))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");e.ariaFormat=t}function Rs(e,t){if(!Jt(t))throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");e.format=t}function ks(e,t){if(typeof t!="boolean")throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");e.keyboardSupport=t}function Ns(e,t){e.documentElement=t}function Ts(e,t){if(typeof t!="string"&&t!==!1)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");e.cssPrefix=t}function _s(e,t){if(typeof t!="object")throw new Error("noUiSlider: 'cssClasses' must be an object.");typeof e.cssPrefix=="string"?(e.cssClasses={},Object.keys(t).forEach(function(r){e.cssClasses[r]=e.cssPrefix+t[r]})):e.cssClasses=t}function Nt(e){var t={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:Ct,format:Ct},r={step:{r:!1,t:is},keyboardPageMultiplier:{r:!1,t:cs},keyboardMultiplier:{r:!1,t:us},keyboardDefaultStep:{r:!1,t:ds},start:{r:!0,t:ms},connect:{r:!0,t:Rt},direction:{r:!0,t:ys},snap:{r:!1,t:ps},animate:{r:!1,t:hs},animationDuration:{r:!1,t:vs},range:{r:!0,t:fs},orientation:{r:!1,t:gs},margin:{r:!1,t:kt},limit:{r:!1,t:Es},padding:{r:!1,t:bs},behaviour:{r:!0,t:Ss},ariaFormat:{r:!1,t:xs},format:{r:!1,t:Rs},tooltips:{r:!1,t:ws},keyboardSupport:{r:!0,t:ks},documentElement:{r:!1,t:Ns},cssPrefix:{r:!0,t:Ts},cssClasses:{r:!0,t:_s},handleAttributes:{r:!1,t:Cs}},n={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:xt,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};e.format&&!e.ariaFormat&&(e.ariaFormat=e.format),Object.keys(r).forEach(function(m){if(!Ge(e[m])&&n[m]===void 0){if(r[m].r)throw new Error("noUiSlider: '"+m+"' is required.");return}r[m].t(t,Ge(e[m])?e[m]:n[m])}),t.pips=e.pips;var o=document.createElement("div"),u=o.style.msTransform!==void 0,i=o.style.transform!==void 0;t.transformRule=i?"transform":u?"msTransform":"webkitTransform";var p=[["left","top"],["right","bottom"]];return t.style=p[t.dir][t.ort],t}function Ls(e,t,r){var n=es(),o=ss(),u=o&&ts(),i=e,p,m,d,b,h,M,g=t.spectrum,N=[],w=[],C=[],S=0,k={},A=!1,F=e.ownerDocument,f=t.documentElement||F.documentElement,v=F.body,R=F.dir==="rtl"||t.ort===1?0:100;function P(s,l){var c=F.createElement("div");return l&&fe(c,l),s.appendChild(c),c}function x(s,l){var c=P(s,t.cssClasses.origin),y=P(c,t.cssClasses.handle);if(P(y,t.cssClasses.touchArea),y.setAttribute("data-handle",String(l)),t.keyboardSupport&&(y.setAttribute("tabindex","0"),y.addEventListener("keydown",function(_){return Se(_,l)})),t.handleAttributes!==void 0){var T=t.handleAttributes[l];Object.keys(T).forEach(function(_){y.setAttribute(_,T[_])})}return y.setAttribute("role","slider"),y.setAttribute("aria-orientation",t.ort?"vertical":"horizontal"),l===0?fe(y,t.cssClasses.handleLower):l===t.handles-1&&fe(y,t.cssClasses.handleUpper),c.handle=y,c}function I(s,l){return l?P(s,t.cssClasses.connect):!1}function H(s,l){m=P(l,t.cssClasses.connects),d=[],b=[],b.push(I(m,s[0]));for(var c=0;c<t.handles;c++)d.push(x(l,c)),C[c]=c,b.push(I(m,s[c+1]))}function j(s){fe(s,t.cssClasses.target),t.dir===0?fe(s,t.cssClasses.ltr):fe(s,t.cssClasses.rtl),t.ort===0?fe(s,t.cssClasses.horizontal):fe(s,t.cssClasses.vertical);var l=getComputedStyle(s).direction;return l==="rtl"?fe(s,t.cssClasses.textDirectionRtl):fe(s,t.cssClasses.textDirectionLtr),P(s,t.cssClasses.base)}function q(s,l){return!t.tooltips||!t.tooltips[l]?!1:P(s.firstChild,t.cssClasses.tooltip)}function O(){return i.hasAttribute("disabled")}function E(s){var l=d[s];return l.hasAttribute("disabled")}function U(s){s!=null?(d[s].setAttribute("disabled",""),d[s].handle.removeAttribute("tabindex")):(i.setAttribute("disabled",""),d.forEach(function(l){l.handle.removeAttribute("tabindex")}))}function L(s){s!=null?(d[s].removeAttribute("disabled"),d[s].handle.setAttribute("tabindex","0")):(i.removeAttribute("disabled"),d.forEach(function(l){l.removeAttribute("disabled"),l.handle.setAttribute("tabindex","0")}))}function D(){M&&(Be("update"+Ce.tooltips),M.forEach(function(s){s&&gt(s)}),M=null)}function X(){D(),M=d.map(q),Te("update"+Ce.tooltips,function(s,l,c){if(!(!M||!t.tooltips)&&M[l]!==!1){var y=s[l];t.tooltips[l]!==!0&&(y=t.tooltips[l].to(c[l])),M[l].innerHTML=y}})}function te(){Be("update"+Ce.aria),Te("update"+Ce.aria,function(s,l,c,y,T){C.forEach(function(_){var B=d[_],V=Ke(w,_,0,!0,!0,!0),Q=Ke(w,_,100,!0,!0,!0),$=T[_],re=String(t.ariaFormat.to(c[_]));V=g.fromStepping(V).toFixed(1),Q=g.fromStepping(Q).toFixed(1),$=g.fromStepping($).toFixed(1),B.children[0].setAttribute("aria-valuemin",V),B.children[0].setAttribute("aria-valuemax",Q),B.children[0].setAttribute("aria-valuenow",$),B.children[0].setAttribute("aria-valuetext",re)})})}function W(s){if(s.mode===we.Range||s.mode===we.Steps)return g.xVal;if(s.mode===we.Count){if(s.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var l=s.values-1,c=100/l,y=[];l--;)y[l]=l*c;return y.push(100),Y(y,s.stepped)}return s.mode===we.Positions?Y(s.values,s.stepped):s.mode===we.Values?s.stepped?s.values.map(function(T){return g.fromStepping(g.getStep(g.toStepping(T)))}):s.values:[]}function Y(s,l){return s.map(function(c){return g.fromStepping(l?g.getStep(c):c)})}function K(s){function l($,re){return Number(($+re).toFixed(7))}var c=W(s),y={},T=g.xVal[0],_=g.xVal[g.xVal.length-1],B=!1,V=!1,Q=0;return c=Xt(c.slice().sort(function($,re){return $-re})),c[0]!==T&&(c.unshift(T),B=!0),c[c.length-1]!==_&&(c.push(_),V=!0),c.forEach(function($,re){var ne,G,le,pe=$,oe=c[re+1],ue,lt,ot,it,Bt,ct,Dt,Ot=s.mode===we.Steps;for(Ot&&(ne=g.xNumSteps[re]),ne||(ne=oe-pe),oe===void 0&&(oe=pe),ne=Math.max(ne,1e-7),G=pe;G<=oe;G=l(G,ne)){for(ue=g.toStepping(G),lt=ue-Q,Bt=lt/(s.density||1),ct=Math.round(Bt),Dt=lt/ct,le=1;le<=ct;le+=1)ot=Q+le*Dt,y[ot.toFixed(5)]=[g.fromStepping(ot),0];it=c.indexOf(G)>-1?he.LargeValue:Ot?he.SmallValue:he.NoValue,!re&&B&&G!==oe&&(it=0),G===oe&&V||(y[ue.toFixed(5)]=[G,it]),Q=ue}}),y}function se(s,l,c){var y,T,_=F.createElement("div"),B=(y={},y[he.None]="",y[he.NoValue]=t.cssClasses.valueNormal,y[he.LargeValue]=t.cssClasses.valueLarge,y[he.SmallValue]=t.cssClasses.valueSub,y),V=(T={},T[he.None]="",T[he.NoValue]=t.cssClasses.markerNormal,T[he.LargeValue]=t.cssClasses.markerLarge,T[he.SmallValue]=t.cssClasses.markerSub,T),Q=[t.cssClasses.valueHorizontal,t.cssClasses.valueVertical],$=[t.cssClasses.markerHorizontal,t.cssClasses.markerVertical];fe(_,t.cssClasses.pips),fe(_,t.ort===0?t.cssClasses.pipsHorizontal:t.cssClasses.pipsVertical);function re(G,le){var pe=le===t.cssClasses.value,oe=pe?Q:$,ue=pe?B:V;return le+" "+oe[t.ort]+" "+ue[G]}function ne(G,le,pe){if(pe=l?l(le,pe):pe,pe!==he.None){var oe=P(_,!1);oe.className=re(pe,t.cssClasses.marker),oe.style[t.style]=G+"%",pe>he.NoValue&&(oe=P(_,!1),oe.className=re(pe,t.cssClasses.value),oe.setAttribute("data-value",String(le)),oe.style[t.style]=G+"%",oe.innerHTML=String(c.to(le)))}}return Object.keys(s).forEach(function(G){ne(G,s[G][0],s[G][1])}),_}function ve(){h&&(gt(h),h=null)}function ie(s){ve();var l=K(s),c=s.filter,y=s.format||{to:function(T){return String(Math.round(T))}};return h=i.appendChild(se(l,c,y)),h}function ge(){var s=p.getBoundingClientRect(),l="offset"+["Width","Height"][t.ort];return t.ort===0?s.width||p[l]:s.height||p[l]}function ce(s,l,c,y){var T=function(B){var V=Ie(B,y.pageOffset,y.target||l);if(!V||O()&&!y.doNotReject||$t(i,t.cssClasses.tap)&&!y.doNotReject||s===n.start&&V.buttons!==void 0&&V.buttons>1||y.hover&&V.buttons)return!1;u||V.preventDefault(),V.calcPoint=V.points[t.ort],c(V,y)},_=[];return s.split(" ").forEach(function(B){l.addEventListener(B,T,u?{passive:!0}:!1),_.push([B,T])}),_}function Ie(s,l,c){var y=s.type.indexOf("touch")===0,T=s.type.indexOf("mouse")===0,_=s.type.indexOf("pointer")===0,B=0,V=0;if(s.type.indexOf("MSPointer")===0&&(_=!0),s.type==="mousedown"&&!s.buttons&&!s.touches)return!1;if(y){var Q=function(ne){var G=ne.target;return G===c||c.contains(G)||s.composed&&s.composedPath().shift()===c};if(s.type==="touchstart"){var $=Array.prototype.filter.call(s.touches,Q);if($.length>1)return!1;B=$[0].pageX,V=$[0].pageY}else{var re=Array.prototype.find.call(s.changedTouches,Q);if(!re)return!1;B=re.pageX,V=re.pageY}}return l=l||St(F),(T||_)&&(B=s.clientX+l.x,V=s.clientY+l.y),s.pageOffset=l,s.points=[B,V],s.cursor=T||_,s}function Re(s){var l=s-Gt(p,t.ort),c=l*100/ge();return c=yt(c),t.dir?100-c:c}function z(s){var l=100,c=!1;return d.forEach(function(y,T){if(!E(T)){var _=w[T],B=Math.abs(_-s),V=B===100&&l===100,Q=B<l,$=B<=l&&s>_;(Q||$||V)&&(c=T,l=B)}}),c}function J(s,l){s.type==="mouseout"&&s.target.nodeName==="HTML"&&s.relatedTarget===null&&Fe(s,l)}function me(s,l){if(navigator.appVersion.indexOf("MSIE 9")===-1&&s.buttons===0&&l.buttonsProperty!==0)return Fe(s,l);var c=(t.dir?-1:1)*(s.calcPoint-l.startCalcPoint),y=c*100/l.baseSize;Pt(c>0,y,l.locations,l.handleNumbers,l.connect)}function Fe(s,l){l.handle&&(We(l.handle,t.cssClasses.active),S-=1),l.listeners.forEach(function(c){f.removeEventListener(c[0],c[1])}),S===0&&(We(i,t.cssClasses.drag),at(),s.cursor&&(v.style.cursor="",v.removeEventListener("selectstart",Et))),t.events.smoothSteps&&(l.handleNumbers.forEach(function(c){ke(c,w[c],!0,!0,!1,!1)}),l.handleNumbers.forEach(function(c){ae("update",c)})),l.handleNumbers.forEach(function(c){ae("change",c),ae("set",c),ae("end",c)})}function Ve(s,l){if(!l.handleNumbers.some(E)){var c;if(l.handleNumbers.length===1){var y=d[l.handleNumbers[0]];c=y.children[0],S+=1,fe(c,t.cssClasses.active)}s.stopPropagation();var T=[],_=ce(n.move,f,me,{target:s.target,handle:c,connect:l.connect,listeners:T,startCalcPoint:s.calcPoint,baseSize:ge(),pageOffset:s.pageOffset,handleNumbers:l.handleNumbers,buttonsProperty:s.buttons,locations:w.slice()}),B=ce(n.end,f,Fe,{target:s.target,handle:c,listeners:T,doNotReject:!0,handleNumbers:l.handleNumbers}),V=ce("mouseout",f,J,{target:s.target,handle:c,listeners:T,doNotReject:!0,handleNumbers:l.handleNumbers});T.push.apply(T,_.concat(B,V)),s.cursor&&(v.style.cursor=getComputedStyle(s.target).cursor,d.length>1&&fe(i,t.cssClasses.drag),v.addEventListener("selectstart",Et,!1)),l.handleNumbers.forEach(function(Q){ae("start",Q)})}}function Z(s){s.stopPropagation();var l=Re(s.calcPoint),c=z(l);c!==!1&&(t.events.snap||bt(i,t.cssClasses.tap,t.animationDuration),ke(c,l,!0,!0),at(),ae("slide",c,!0),ae("update",c,!0),t.events.snap?Ve(s,{handleNumbers:[c]}):(ae("change",c,!0),ae("set",c,!0)))}function Ee(s){var l=Re(s.calcPoint),c=g.getStep(l),y=g.fromStepping(c);Object.keys(k).forEach(function(T){T.split(".")[0]==="hover"&&k[T].forEach(function(_){_.call(Je,y)})})}function Se(s,l){if(O()||E(l))return!1;var c=["Left","Right"],y=["Down","Up"],T=["PageDown","PageUp"],_=["Home","End"];t.dir&&!t.ort?c.reverse():t.ort&&!t.dir&&(y.reverse(),T.reverse());var B=s.key.replace("Arrow",""),V=B===T[0],Q=B===T[1],$=B===y[0]||B===c[0]||V,re=B===y[1]||B===c[1]||Q,ne=B===_[0],G=B===_[1];if(!$&&!re&&!ne&&!G)return!0;s.preventDefault();var le;if(re||$){var pe=$?0:1,oe=Vt(l),ue=oe[pe];if(ue===null)return!1;ue===!1&&(ue=g.getDefaultStep(w[l],$,t.keyboardDefaultStep)),Q||V?ue*=t.keyboardPageMultiplier:ue*=t.keyboardMultiplier,ue=Math.max(ue,1e-7),ue=($?-1:1)*ue,le=N[l]+ue}else G?le=t.spectrum.xVal[t.spectrum.xVal.length-1]:le=t.spectrum.xVal[0];return ke(l,g.toStepping(le),!0,!0),ae("slide",l),ae("update",l),ae("change",l),ae("set",l),!1}function Ae(s){s.fixed||d.forEach(function(l,c){ce(n.start,l.children[0],Ve,{handleNumbers:[c]})}),s.tap&&ce(n.start,p,Z,{}),s.hover&&ce(n.move,p,Ee,{hover:!0}),s.drag&&b.forEach(function(l,c){if(!(l===!1||c===0||c===b.length-1)){var y=d[c-1],T=d[c],_=[l],B=[y,T],V=[c-1,c];fe(l,t.cssClasses.draggable),s.fixed&&(_.push(y.children[0]),_.push(T.children[0])),s.dragAll&&(B=d,V=C),_.forEach(function(Q){ce(n.start,Q,Ve,{handles:B,handleNumbers:V,connect:l})})}})}function Te(s,l){k[s]=k[s]||[],k[s].push(l),s.split(".")[0]==="update"&&d.forEach(function(c,y){ae("update",y)})}function rt(s){return s===Ce.aria||s===Ce.tooltips}function Be(s){var l=s&&s.split(".")[0],c=l?s.substring(l.length):s;Object.keys(k).forEach(function(y){var T=y.split(".")[0],_=y.substring(T.length);(!l||l===T)&&(!c||c===_)&&(!rt(_)||c===_)&&delete k[y]})}function ae(s,l,c){Object.keys(k).forEach(function(y){var T=y.split(".")[0];s===T&&k[y].forEach(function(_){_.call(Je,N.map(t.format.to),l,N.slice(),c||!1,w.slice(),Je)})})}function Ke(s,l,c,y,T,_,B){var V;return d.length>1&&!t.events.unconstrained&&(y&&l>0&&(V=g.getAbsoluteDistance(s[l-1],t.margin,!1),c=Math.max(c,V)),T&&l<d.length-1&&(V=g.getAbsoluteDistance(s[l+1],t.margin,!0),c=Math.min(c,V))),d.length>1&&t.limit&&(y&&l>0&&(V=g.getAbsoluteDistance(s[l-1],t.limit,!1),c=Math.min(c,V)),T&&l<d.length-1&&(V=g.getAbsoluteDistance(s[l+1],t.limit,!0),c=Math.max(c,V))),t.padding&&(l===0&&(V=g.getAbsoluteDistance(0,t.padding[0],!1),c=Math.max(c,V)),l===d.length-1&&(V=g.getAbsoluteDistance(100,t.padding[1],!0),c=Math.min(c,V))),B||(c=g.getStep(c)),c=yt(c),c===s[l]&&!_?!1:c}function nt(s,l){var c=t.ort;return(c?l:s)+", "+(c?s:l)}function Pt(s,l,c,y,T){var _=c.slice(),B=y[0],V=t.events.smoothSteps,Q=[!s,s],$=[s,!s];y=y.slice(),s&&y.reverse(),y.length>1?y.forEach(function(ne,G){var le=Ke(_,ne,_[ne]+l,Q[G],$[G],!1,V);le===!1?l=0:(l=le-_[ne],_[ne]=le)}):Q=$=[!0];var re=!1;y.forEach(function(ne,G){re=ke(ne,c[ne]+l,Q[G],$[G],!1,V)||re}),re&&(y.forEach(function(ne){ae("update",ne),ae("slide",ne)}),T!=null&&ae("drag",B))}function Mt(s,l){return t.dir?100-s-l:s}function ar(s,l){w[s]=l,N[s]=g.fromStepping(l);var c=Mt(l,0)-R,y="translate("+nt(c+"%","0")+")";if(d[s].style[t.transformRule]=y,t.events.invertConnects&&w.length>1){var T=w.every(function(_,B,V){return B===0||_>=V[B-1]});if(A!==!T){dr();return}}De(s),De(s+1),A&&(De(s-1),De(s+2))}function at(){C.forEach(function(s){var l=w[s]>50?-1:1,c=3+(d.length+l*s);d[s].style.zIndex=String(c)})}function ke(s,l,c,y,T,_){return T||(l=Ke(w,s,l,c,y,!1,_)),l===!1?!1:(ar(s,l),!0)}function De(s){if(b[s]){var l=w.slice();A&&l.sort(function(V,Q){return V-Q});var c=0,y=100;s!==0&&(c=l[s-1]),s!==b.length-1&&(y=l[s]);var T=y-c,_="translate("+nt(Mt(c,T)+"%","0")+")",B="scale("+nt(T/100,"1")+")";b[s].style[t.transformRule]=_+" "+B}}function It(s,l){return s===null||s===!1||s===void 0||(typeof s=="number"&&(s=String(s)),s=t.format.from(s),s!==!1&&(s=g.toStepping(s)),s===!1||isNaN(s))?w[l]:s}function Ze(s,l,c){var y=He(s),T=w[0]===void 0;l=l===void 0?!0:l,t.animate&&!T&&bt(i,t.cssClasses.tap,t.animationDuration),C.forEach(function(V){ke(V,It(y[V],V),!0,!1,c)});var _=C.length===1?0:1;if(T&&g.hasNoSize()&&(c=!0,w[0]=0,C.length>1)){var B=100/(C.length-1);C.forEach(function(V){w[V]=V*B})}for(;_<C.length;++_)C.forEach(function(V){ke(V,w[V],!0,!0,c)});at(),C.forEach(function(V){ae("update",V),y[V]!==null&&l&&ae("set",V)})}function lr(s){Ze(t.start,s)}function or(s,l,c,y){if(s=Number(s),!(s>=0&&s<C.length))throw new Error("noUiSlider: invalid handle number, got: "+s);ke(s,It(l,s),!0,!0,y),ae("update",s),c&&ae("set",s)}function Ft(s){if(s===void 0&&(s=!1),s)return N.length===1?N[0]:N.slice(0);var l=N.map(t.format.to);return l.length===1?l[0]:l}function ir(){for(Be(Ce.aria),Be(Ce.tooltips),Object.keys(t.cssClasses).forEach(function(s){We(i,t.cssClasses[s])});i.firstChild;)i.removeChild(i.firstChild);delete i.noUiSlider}function Vt(s){var l=w[s],c=g.getNearbySteps(l),y=N[s],T=c.thisStep.step,_=null;if(t.snap)return[y-c.stepBefore.startValue||null,c.stepAfter.startValue-y||null];T!==!1&&y+T>c.stepAfter.startValue&&(T=c.stepAfter.startValue-y),y>c.thisStep.startValue?_=c.thisStep.step:c.stepBefore.step===!1?_=!1:_=y-c.stepBefore.highestStep,l===100?T=null:l===0&&(_=null);var B=g.countStepDecimals();return T!==null&&T!==!1&&(T=Number(T.toFixed(B))),_!==null&&_!==!1&&(_=Number(_.toFixed(B))),[_,T]}function cr(){return C.map(Vt)}function ur(s,l){var c=Ft(),y=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips","connect"];y.forEach(function(_){s[_]!==void 0&&(r[_]=s[_])});var T=Nt(r);y.forEach(function(_){s[_]!==void 0&&(t[_]=T[_])}),g=T.spectrum,t.margin=T.margin,t.limit=T.limit,t.padding=T.padding,t.pips?ie(t.pips):ve(),t.tooltips?X():D(),w=[],Ze(Ge(s.start)?s.start:c,l),s.connect&&At()}function At(){for(;m.firstChild;)m.removeChild(m.firstChild);for(var s=0;s<=t.handles;s++)b[s]=I(m,t.connect[s]),De(s);Ae({drag:t.events.drag,fixed:!0})}function dr(){A=!A,Rt(t,t.connect.map(function(s){return!s})),At()}function fr(){p=j(i),H(t.connect,p),Ae(t.events),Ze(t.start),t.pips&&ie(t.pips),t.tooltips&&X(),te()}fr();var Je={destroy:ir,steps:cr,on:Te,off:Be,get:Ft,set:Ze,setHandle:or,reset:lr,disable:U,enable:L,__moveHandles:function(s,l,c){Pt(s,l,w,c)},options:r,updateOptions:ur,target:i,removePips:ve,removeTooltips:D,getPositions:function(){return w.slice()},getTooltips:function(){return M},getOrigins:function(){return d},pips:ie};return Je}function Ps(e,t){if(!e||!e.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+e);if(e.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");var r=Nt(t),n=Ls(e,r,t);return e.noUiSlider=n,n}const Tt={__spectrum:wt,cssClasses:xt,create:Ps};function Ms({config:e,filterData:t,value:r,onChange:n,narrowedValues:o,isNarrowing:u}){const i=a.useRef(null),p=a.useRef(null),m=a.useRef(null),[d,b]=a.useState(!1),h=t.props||{},M=h.min??0,g=h.max??100,N=h.step??1,w=h.placeholder||t.label||"Range",C=e.displayAs||t.props?.display_as||"popup",S=h.handles||"double",k=h.compare||"in_range",A=e.filterKey,F=o?.ranges?.[A],f=F?.min??M,v=F?.max??g,R=h.format||"number",P=h.prefix||"",x=h.suffix||"",I=t.icon||"",H=r||{},[j,q]=a.useState(H.min??f),[O,E]=a.useState(H.max??v),U=a.useCallback(z=>R==="price"?`${P}${z.toLocaleString()}${x}`:`${P}${z}${x}`,[R,P,x]),L=H.min!==void 0||H.max!==void 0,D=L?`${U(H.min??f)} — ${U(H.max??v)}`:w,X=`${U(j)} — ${U(O)}`,te=a.useCallback(()=>{if(!p.current||m.current)return;let z,J;S==="double"?(z=[j,O],J=!0):k==="in_range"?(z=[O],J=[!1,!0]):(z=[j],J=[!0,!1]),Tt.create(p.current,{start:z,connect:J,range:{min:f,max:v},step:N,behaviour:"tap-drag"}),m.current=p.current.noUiSlider,m.current.on("update",me=>{S==="double"?(q(Math.round(Number(me[0]))),E(Math.round(Number(me[1])))):k==="in_range"?E(Math.round(Number(me[0]))):q(Math.round(Number(me[0])))})},[S,k,j,O,f,v,N]),W=a.useCallback(()=>{m.current&&(m.current.destroy(),m.current=null)},[]);a.useEffect(()=>{const z=r||{},J=z.min??f,me=z.max??v;q(J),E(me),m.current&&(S==="double"?m.current.set([J,me]):m.current.set([J]))},[r,f,v,S]),a.useEffect(()=>{if(d&&C==="popup"){const z=setTimeout(()=>{te()},50);return()=>clearTimeout(z)}return()=>{C==="popup"&&W()}},[d,C,te,W]),a.useEffect(()=>{if(C==="inline")return te(),()=>W()},[C,te,W]),a.useEffect(()=>{if(!m.current||!F)return;m.current.updateOptions({range:{min:f,max:v}},!0);let z=j,J=O;z<f&&(z=f),z>v&&(z=v),S==="double"&&(J<f&&(J=f),J>v&&(J=v),z>J&&(z=J)),S==="double"?m.current.set([z,J]):m.current.set([z]),q(z),E(J)},[F,f,v,S]);const Y=a.useCallback(()=>{b(!0)},[]),K=z=>{const J=z.target.value===""?f:Number(z.target.value);if(q(J),m.current&&m.current.set(S==="double"?[J,O]:[J]),C==="minmax"){const me={min:J};S==="double"&&(me.max=O),n(me)}},se=z=>{const J=z.target.value===""?v:Number(z.target.value);E(J),m.current&&m.current.set([j,J]),C==="minmax"&&n({min:j,max:J})},ve=a.useCallback(()=>{const z={min:j};S==="double"&&(z.max=O),n(j===f&&O===v?null:z),b(!1)},[j,O,S,f,v,n]),ie=a.useCallback(()=>{q(f),E(v),m.current&&m.current.set(S==="double"?[f,v]:[f]),n(null)},[f,v,S,n]),ge=()=>React.createElement("div",{className:"ts-minmax"},React.createElement("input",{type:"number",className:"inline-input input-no-icon",placeholder:String(f),value:j,onChange:K,min:f,max:O,step:N}),S==="double"&&React.createElement("input",{type:"number",className:"inline-input input-no-icon",placeholder:String(v),value:O,onChange:se,min:j,max:v,step:N})),ce=()=>React.createElement("div",{className:`range-slider-wrapper${u?" ts-loading":""}`},React.createElement("div",{className:"range-value"},X),React.createElement("div",{ref:p,className:"range-slider"}),F&&(F.min!==M||F.max!==g)&&React.createElement("div",{className:"range-narrowed-indicator"},React.createElement("small",null,"Showing ",U(f)," — ",U(v)," based on current results")));if(C==="minmax"&&S==="double"){const{style:z,className:J}=ee(e,"ts-form-group");return React.createElement("div",{className:J,style:z},!e.hideLabel&&React.createElement("label",null,t.label),ge())}if(C==="inline"){const{style:z,className:J}=ee(e,"ts-form-group ts-inline-filter");return React.createElement("div",{className:J,style:z},!e.hideLabel&&React.createElement("label",null,t.label),ce())}const{style:Ie,className:Re}=ee(e,"ts-form-group");return React.createElement("div",{className:Re,style:Ie},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:i,className:`ts-filter ts-popup-target ${L?"ts-filled":""}`,onClick:Y,onMouseDown:z=>z.preventDefault(),role:"button",tabIndex:0},I&&React.createElement("span",{dangerouslySetInnerHTML:{__html:I}}),React.createElement("div",{className:"ts-filter-text"},D),React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:d,target:i,title:"",icon:I,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:ve,onClear:ie,onClose:()=>b(!1)},React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,t.label,t.description&&React.createElement("small",null,t.description)),ce())))}function Is(e,t){let r=null;return function(...n){r&&clearTimeout(r),r=setTimeout(()=>e.apply(this,n),t)}}function Fs({config:e,filterData:t,value:r,onChange:n}){const o=t.props||{},u=o.min??0,i=o.max??99,p=o.step??1,m=o.default??u,d=o.placeholder||t.label||"Any",b=e.displayAs||t.props?.display_as||"popup",h=t.icon||"",M=a.useRef(null),[g,N]=a.useState(!1),w=typeof r=="number"?r:m,[C,S]=a.useState(w),k=a.useMemo(()=>Is(q=>n(q),300),[n]);a.useEffect(()=>{S(typeof r=="number"?r:m)},[r,m]),a.useEffect(()=>{g&&S(w)},[g,w]);const A=q=>{q.preventDefault();const O=Math.max(u,C-p);S(O),b==="inline"&&k(O)},F=q=>{q.preventDefault();const O=Math.min(i,C+p);S(O),b==="inline"&&k(O)},f=q=>{const O=parseInt(q.target.value,10);if(!isNaN(O)){const E=Math.min(i,Math.max(u,O));S(E),b==="inline"&&k(E)}},v=a.useCallback(()=>{N(!0)},[]),R=a.useCallback(()=>{n(C),N(!1)},[C,n]),P=a.useCallback(()=>{S(m),n(m)},[m,n]),x=()=>React.createElement("div",{className:"ts-stepper-input flexify"},React.createElement("button",{type:"button",className:"ts-stepper-left ts-icon-btn inline-btn-ts",onClick:A},React.createElement("i",{className:"las la-minus"})),React.createElement("input",{type:"number",className:"ts-input-box",min:u,max:i,step:p,value:C,onChange:f,placeholder:d}),React.createElement("button",{type:"button",className:"ts-stepper-right ts-icon-btn inline-btn-ts",onClick:F},React.createElement("i",{className:"las la-plus"})));if(b==="inline"){const{style:q,className:O}=ee(e,"ts-form-group ts-inline-filter");return React.createElement("div",{className:O,style:q},!e.hideLabel&&React.createElement("label",null,t.label),x())}const I=w!==m,{style:H,className:j}=ee(e,"ts-form-group");return React.createElement("div",{className:j,style:H},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:M,className:`ts-filter ts-popup-target ${I?"ts-filled":""}`,onClick:v,onMouseDown:q=>q.preventDefault(),role:"button",tabIndex:0},h&&React.createElement("span",{dangerouslySetInnerHTML:{__html:h}}),React.createElement("div",{className:"ts-filter-text"},I?C:d),React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:g,target:M,title:"",icon:h,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:R,onClear:P,onClose:()=>N(!1)},React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,t.label,t.description&&React.createElement("small",null,t.description)),x())))}function Vs({config:e,filterData:t,value:r,onChange:n,narrowedValues:o,isNarrowing:u}){const i=a.useRef(null),p=a.useRef(null),[m,d]=a.useState(!1),[b,h]=a.useState(""),[M,g]=a.useState([]),N=t.props||{},w=N.multiple??!0,C=N.placeholder||t.label||"Select",S=e.displayAs||N.display_as||"popup",k=e.hideEmptyTerms??N.hide_empty_terms??!1,A=t.icon||"",F=N.taxonomy||e.filterKey,f=o?.terms?.[F],v=a.useCallback((W,Y=0)=>{const K=[];for(const se of W)K.push({...se,depth:Y}),se.children&&se.children.length>0&&K.push(...v(se.children,Y+1));return K},[]),R=a.useMemo(()=>{const W=N.terms||[];let Y=v(W);return k&&f&&(Y=Y.filter(K=>{if(!K.term_taxonomy_id)return!0;const se=f[K.term_taxonomy_id];return se===void 0||se>0})),Y},[N.terms,v,k,f]),P=a.useCallback(W=>!f||!W.term_taxonomy_id?null:f[W.term_taxonomy_id]??null,[f]),x=a.useMemo(()=>w?Array.isArray(r)?r:[]:r?[r]:[],[r,w]),I=a.useMemo(()=>{if(!b)return R;const W=b.toLowerCase();return R.filter(Y=>Y.label.toLowerCase().includes(W))},[R,b]);a.useEffect(()=>{m&&(g(x),h(""),R.length>=15&&setTimeout(()=>p.current?.focus(),50))},[m,x,R.length]);const H=a.useCallback(()=>{d(!0)},[]),j=a.useCallback(W=>{w?g(Y=>Y.includes(W)?Y.filter(K=>K!==W):[...Y,W]):(n(W),d(!1))},[w,n]),q=a.useCallback(()=>{w&&n(M.length>0?M:null),d(!1)},[w,M,n]),O=a.useCallback(()=>{g([]),n(null)},[n]),E=x.length>0,U=R.filter(W=>x.includes(W.slug)),L=E&&U[0]?.label||C,D=U.length>1?U.length-1:0;if(S==="inline"){const{style:W,className:Y}=ee(e,"ts-form-group inline-terms-wrapper ts-inline-filter min-scroll");return React.createElement("div",{className:`${Y}${u?" ts-loading":""}`,style:W},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{className:"ts-term-dropdown ts-multilevel-dropdown inline-multilevel"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list"},R.map(K=>{const se=x.includes(K.slug),ve=K.depth||0,ie=P(K),ge=ie===0;return React.createElement("li",{key:K.slug,className:`${se?"ts-selected":""}${ge?" ts-disabled":""}`},React.createElement("a",{href:"#",className:"flexify",onClick:ce=>{ce.preventDefault(),ge||j(K.slug)}},React.createElement("div",{className:"ts-checkbox-container"},React.createElement("label",{className:`container-${w?"checkbox":"radio"}`},React.createElement("input",{type:w?"checkbox":"radio",checked:se,readOnly:!0,disabled:!0,hidden:!0}),React.createElement("span",{className:"checkmark"}))),React.createElement("span",null,ve>0?"— ".repeat(ve):"",K.label),ie!==null&&React.createElement("span",{className:"ts-term-count"},"(",ie,")"),K.icon&&React.createElement("div",{className:"ts-term-icon",dangerouslySetInnerHTML:{__html:K.icon}})))}))))}if(S==="buttons"){const{style:W,className:Y}=ee(e,"ts-form-group");return React.createElement("div",{className:Y,style:W},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("ul",{className:"simplify-ul addon-buttons flexify"},R.map(K=>{const se=x.includes(K.slug);return React.createElement("li",{key:K.slug,className:`flexify ${se?"adb-selected":""}`,onClick:()=>j(K.slug)},K.label)})))}const{style:X,className:te}=ee(e,"ts-form-group");return React.createElement("div",{className:te,style:X},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:i,className:`ts-filter ts-popup-target ${E?"ts-filled":""}`,onClick:H,onMouseDown:W=>W.preventDefault(),role:"button",tabIndex:0},A&&React.createElement("span",{dangerouslySetInnerHTML:{__html:A}}),React.createElement("div",{className:"ts-filter-text"},L,D>0&&React.createElement("span",{className:"term-count"},"+",D)),React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:m,target:i,title:"",icon:A,saveLabel:"Save",clearLabel:"Clear",showClear:!0,showSave:w,onSave:q,onClear:O,onClose:()=>d(!1)},R.length>=15&&React.createElement("div",{className:"ts-sticky-top uib b-bottom"},React.createElement("div",{className:"ts-input-icon flexify"},React.createElement("span",null,be.search),React.createElement("input",{ref:p,type:"text",value:b,onChange:W=>h(W.target.value),placeholder:"Search",className:"autofocus"}))),React.createElement("div",{className:`ts-term-dropdown ts-multilevel-dropdown ts-md-group${u?" ts-loading":""}`},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list"},I.map(W=>{const Y=w?M.includes(W.slug):x.includes(W.slug),K=W.depth||0,se=P(W),ve=se===0;return React.createElement("li",{key:W.slug,className:`${Y?"ts-selected":""}${ve?" ts-disabled":""}`},React.createElement("a",{href:"#",className:"flexify",onClick:ie=>{ie.preventDefault(),ve||j(W.slug)}},React.createElement("div",{className:"ts-checkbox-container"},React.createElement("label",{className:`container-${w?"checkbox":"radio"}`},React.createElement("input",{type:w?"checkbox":"radio",checked:Y,readOnly:!0,disabled:!0,hidden:!0}),React.createElement("span",{className:"checkmark"}))),React.createElement("span",null,K>0?"— ".repeat(K):"",W.label),se!==null&&React.createElement("span",{className:"ts-term-count"},"(",se,")"),W.icon&&React.createElement("div",{className:"ts-term-icon",dangerouslySetInnerHTML:{__html:W.icon}})))})),I.length===0&&React.createElement("div",{className:"ts-empty-user-tab"},A&&React.createElement("span",{dangerouslySetInnerHTML:{__html:A}}),React.createElement("p",null,"No results found")))))}function As({config:e,filterData:t,value:r,onChange:n}){const o=a.useRef(null),u=a.useRef(null),i=a.useRef(null),p=a.useRef(null),m=a.useRef(null),[d,b]=a.useState(!1),[h,M]=a.useState(!1),g=a.useRef(null),N=t.props||{},w=N.radius||{},C=w.default??25,S=w.min??1,k=w.max??100,A=w.step??1,F=N.units||"km",f=N.display_proximity_as||"popup",v=N.placeholder||t.label||"Location",R=e.displayAs||t.props?.display_as||"popup",P=t.icon||"",x=r||{},[I,H]=a.useState(x.address||""),[j,q]=a.useState(x.radius||C),O=a.useCallback(Z=>Math.round(Z*1e6)/1e6,[]),E=a.useCallback(Z=>`${Z}${F==="mi"?"mi":"km"}`,[F]),U=a.useCallback(()=>{!p.current||m.current||(Tt.create(p.current,{start:j,connect:[!0,!1],step:A,range:{min:S,max:k},behaviour:"tap-drag"}),m.current=p.current.noUiSlider,m.current.on("update",Z=>{q(Math.round(Number(Z[0])))}),m.current.on("change",Z=>{const Ee=Math.round(Number(Z[0]));f==="inline"&&x.lat&&n({...x,radius:Ee})}))},[j,A,S,k,f,x,n]),L=a.useCallback(()=>{m.current&&(m.current.destroy(),m.current=null)},[]);a.useEffect(()=>{if(f==="inline"&&x.lat){const Z=setTimeout(()=>U(),50);return()=>{clearTimeout(Z),L()}}},[f,x.lat,U,L]),a.useEffect(()=>{if(h){const Z=setTimeout(()=>U(),50);return()=>clearTimeout(Z)}return()=>L()},[h,U,L]),a.useEffect(()=>{const Z=x.radius||C;q(Z),m.current&&m.current.set([Z])},[x.radius,C]);const D=a.useCallback(()=>{if(i.current||!u.current||typeof window>"u")return;const Z=window.Voxel?.Maps;if(!Z){console.warn("Voxel.Maps not available for autocomplete");return}Z.await(()=>{if(i.current)return;const Ee=e.autocomplete||{};i.current=new Z.Autocomplete(u.current,Se=>{if(Se){const Ae=Se.viewport.getSouthWest(),Te=Se.viewport.getNorthEast(),rt={address:Se.address,swlat:O(Ae.getLatitude()),swlng:O(Ae.getLongitude()),nelat:O(Te.getLatitude()),nelng:O(Te.getLongitude()),lat:O(Se.latlng.getLatitude()),lng:O(Se.latlng.getLongitude()),radius:x.radius||C};H(Se.address),n(rt),R==="popup"&&b(!1)}else H(""),n(null)},Ee)})},[e.autocomplete,n,R,C,x.radius,O]);a.useEffect(()=>{(d||R==="inline")&&(H(x.address||""),d&&setTimeout(()=>u.current?.focus(),50))},[d,R,x.address]);const X=a.useCallback(()=>{b(!0)},[]),te=a.useCallback(()=>{D()},[D]),W=Z=>{H(Z.target.value),R==="inline"&&!i.current&&(Z.target.value?n({...x,address:Z.target.value}):n(null))},Y=Z=>{Z.preventDefault(),Z.stopPropagation(),"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(Ee=>{const Se={address:"Current Location",lat:Ee.coords.latitude,lng:Ee.coords.longitude,radius:C};H("Current Location"),n(Se),R==="popup"&&b(!1)},Ee=>{console.error("Geolocation error:",Ee)})},K=a.useCallback(()=>{n(I?{...x,address:I}:null),b(!1)},[I,x,n]),se=a.useCallback(()=>{H(""),n(null)},[n]),ve=a.useCallback(Z=>{Z.key==="Enter"&&(Z.preventDefault(),K())},[K]),ie=a.useCallback(()=>{x.lat&&n({...x,radius:j}),M(!1)},[x,j,n]),ge=a.useCallback(()=>{q(C),m.current&&m.current.set([C]),x.lat&&n({...x,radius:C})},[C,x,n]),ce=!!x.address||!!x.lat,Ie=ce?x.address||"Location set":v,Re=()=>React.createElement("div",{className:"ts-input-icon flexify",style:{position:"relative"}},P&&React.createElement("span",{dangerouslySetInnerHTML:{__html:P}}),React.createElement("input",{ref:u,type:"text",className:"inline-input",placeholder:v,value:I,onChange:W,onKeyDown:ve,onFocus:te}),React.createElement("a",{href:"#",className:"inline-user-location ts-icon-btn",onClick:Y,title:"Use my location","aria-label":"Use my location"},be.crosshairs)),z=()=>React.createElement("div",{className:"range-slider-wrapper"},React.createElement("div",{className:"range-value"},E(j)),React.createElement("div",{ref:p,className:"range-slider"})),J=()=>!x.lat||f==="inline"?null:React.createElement("div",{className:"ts-form-group ts-proximity-filter"},React.createElement("label",null,N.proximity_label||"Radius"),React.createElement("div",{ref:g,className:`ts-filter ts-popup-target ${x.radius?"ts-filled":""}`,onClick:()=>M(!0),onMouseDown:Z=>Z.preventDefault(),role:"button",tabIndex:0},React.createElement("div",{className:"ts-filter-text"},E(x.radius||C)),React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:h,target:g,title:"",saveLabel:"Save",clearLabel:"Reset",showClear:!0,onSave:ie,onClear:ge,onClose:()=>M(!1)},React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,N.proximity_label||"Search radius"),z()))),me=()=>f!=="inline"||!x.lat?null:React.createElement("div",{className:"ts-form-group ts-inline-proximity"},React.createElement("label",null,N.proximity_label||"Radius",": ",E(j)),React.createElement("div",{ref:p,className:"range-slider"}));if(R==="inline"){const{style:Z,className:Ee}=ee(e,"ts-form-group ts-inline-filter");return React.createElement(React.Fragment,null,React.createElement("div",{className:Ee,style:Z},!e.hideLabel&&React.createElement("label",null,t.label),Re()),me(),J())}const{style:Fe,className:Ve}=ee(e,"ts-form-group");return React.createElement(React.Fragment,null,React.createElement("div",{className:Ve,style:Fe},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:o,className:`ts-filter ts-popup-target ${ce?"ts-filled":""}`,onClick:X,onMouseDown:Z=>Z.preventDefault(),role:"button",tabIndex:0},P&&React.createElement("span",{dangerouslySetInnerHTML:{__html:P}}),React.createElement("div",{className:"ts-filter-text"},Ie),React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:d,target:o,title:"",icon:P,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:K,onClear:se,onClose:()=>b(!1)},React.createElement("div",{className:"ts-form-group"},Re()))),me(),J())}const Pe=e=>{if(!e)return null;try{const t=new Date(e+"T00:00:00");return isFinite(t.getTime())?t:null}catch{return null}},Me=e=>{if(!e)return null;const t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${n}`},et=e=>{if(!e)return"";try{const t=new Date(e+"T00:00:00");return isFinite(t.getTime())?t.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):""}catch{return e}};function Bs({config:e,filterData:t,value:r,onChange:n}){const o=a.useRef(null),u=a.useRef(null),[i,p]=a.useState(!1),m=t.props||{},d=m.mode||"single",b=m.placeholder||t.label||"Availability",h=t.icon||"",M=r||{},g=M.date||"",N=M.slots??1;let w="",C="";d==="range"&&g&&g.includes("..")?[w,C]=g.split(".."):d==="single"&&g&&(w=g);const[S,k]=a.useState(()=>Pe(w)),[A,F]=a.useState(()=>Pe(C)),[f,v]=a.useState("start"),[R,P]=a.useState(N);a.useEffect(()=>{if(i){if(d==="range"&&g&&g.includes("..")){const[D,X]=g.split("..");k(Pe(D)),F(Pe(X))}else d==="single"&&g&&k(Pe(g));P(N),v("start")}},[i,d,g,N]);const x=a.useCallback(()=>{p(!0)},[]),I=a.useCallback(D=>{if(d==="range"&&D&&u.current)if(f==="start")k(D),v("end"),u.current.setStartRange(D),u.current.setEndRange(null);else{F(D),v("start"),u.current.setEndRange(D);const X=Me(S),te=Me(D);X&&te&&(n({date:`${X}..${te}`,slots:R}),p(!1))}else k(D)},[d,f,S,R,n]),H=a.useCallback(D=>{P(Number(D.target.value)||1)},[]),j=a.useCallback(D=>{if(d==="range"){const X=Me(S),te=Me(A);X&&te&&n({date:`${X}..${te}`,slots:R})}else{const te=Me(D!==void 0?D:S);te&&n({date:te,slots:R})}p(!1)},[d,S,A,R,n]),q=a.useCallback(()=>{k(null),F(null),P(1),n(null),u.current&&(u.current.setStartRange(null),u.current.setEndRange(null))},[n]),O=d==="range"?!!(w&&C):!!g,E=a.useMemo(()=>{if(!O)return b;if(d==="range"){const D=et(w),X=et(C),te=`${D} — ${X}`;return N>1?`${te} (${N})`:te}else{const D=et(g);return N>1?`${D} (${N})`:D}},[d,O,w,C,g,N,b]),{style:U,className:L}=ee(e,"ts-form-group");return React.createElement("div",{className:L,style:U},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:o,className:`ts-filter ts-popup-target ${O?"ts-filled":""}`,onClick:x,onMouseDown:D=>D.preventDefault(),role:"button",tabIndex:0},h&&React.createElement("span",{dangerouslySetInnerHTML:{__html:h}}),React.createElement("div",{className:"ts-filter-text"},E),React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:i,target:o,title:"",icon:h,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:j,onClear:q,onClose:()=>p(!1)},React.createElement(_e,{value:S,onChange:I,onSelect:d==="single"?j:void 0,pickerConfig:d==="range"?{theme:"pika-range",onSelect:void 0}:void 0,onPickerReady:D=>{u.current=D,d==="range"&&S&&(D.setStartRange(S),A&&D.setEndRange(A))}}),React.createElement("div",{className:"ts-form-group",style:{marginTop:"12px"}},React.createElement("label",null,"Number of slots"),React.createElement("input",{type:"number",value:R,onChange:H,min:"1",className:"ts-filter"}))))}const Ue=e=>{if(!e)return null;try{const t=new Date(e+"T00:00:00");return isFinite(t.getTime())?t:null}catch{return null}},_t=e=>{if(!e)return null;const t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${n}`},je=e=>{if(!e)return"";try{const t=new Date(e+"T00:00:00");return isFinite(t.getTime())?t.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):""}catch{return e}};function Ds({config:e,filterData:t,value:r,onChange:n}){const o=a.useRef(null),u=t.props||{},i=u.enable_range??!1,p=u.placeholder||t.label||"Select date",m=t.icon||"",d=r||{},b=typeof d=="object",h=b?d.from||"":d||"",M=b&&d.to||"",[g,N]=a.useState(!1),[w,C]=a.useState(!1),[S,k]=a.useState(()=>Ue(h)),[A,F]=a.useState(()=>Ue(M)),f=a.useCallback(()=>{k(Ue(h)),N(!0)},[h]),v=a.useCallback(()=>{F(Ue(M)),C(!0)},[M]),R=a.useCallback(L=>{k(L)},[]),P=a.useCallback(L=>{F(L)},[]),x=a.useCallback(L=>{const X=_t(L!==void 0?L:S)||"";n(i?{from:X,to:M}:X),N(!1)},[S,i,M,n]),I=a.useCallback(L=>{const X=_t(L!==void 0?L:A)||"";n({from:h,to:X}),C(!1)},[A,h,n]),H=a.useCallback(()=>{k(null),n(i?{from:"",to:M}:"")},[i,M,n]),j=a.useCallback(()=>{F(null),n({from:h,to:""})},[h,n]),q=i?!!h||!!M:!!h,O=a.useMemo(()=>{if(!q)return p;if(i){const L=[];return h&&L.push(je(h)),M&&L.push(je(M)),L.join(" - ")||p}return je(h)||p},[q,i,h,M,p]),{style:E,className:U}=ee(e,"ts-form-group");return React.createElement("div",{className:U,style:E},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:o,className:`ts-filter ts-popup-target ${q?"ts-filled":""}`,onClick:f,onMouseDown:L=>L.preventDefault(),role:"button",tabIndex:0},m&&React.createElement("span",{dangerouslySetInnerHTML:{__html:m}}),React.createElement("div",{className:"ts-filter-text"},O),React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:g,target:o,title:i?"From":"",icon:m,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:x,onClear:H,onClose:()=>N(!1)},React.createElement(_e,{value:S,onChange:R,onSelect:x}),i&&React.createElement("div",{className:"ts-form-group",style:{marginTop:"12px",borderTop:"1px solid var(--ts-shade-5)",paddingTop:"12px"}},React.createElement("label",null,"To"),React.createElement("div",{className:`ts-filter ts-popup-target ${M?"ts-filled":""}`,onClick:L=>{L.stopPropagation(),N(!1),setTimeout(()=>v(),100)},role:"button",tabIndex:0},m&&React.createElement("span",{dangerouslySetInnerHTML:{__html:m}}),React.createElement("div",{className:"ts-filter-text"},M?je(M):"Select end date")))),i&&React.createElement(de,{isOpen:w,target:o,title:"To",icon:m,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:I,onClear:j,onClose:()=>C(!1)},React.createElement(_e,{value:A,onChange:P,onSelect:I})))}const ze=e=>{if(!e)return null;try{const t=new Date(e+"T00:00:00");return isFinite(t.getTime())?t:null}catch{return null}},Lt=e=>{if(!e)return null;const t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${n}`},tt=e=>{if(!e)return"";try{const t=new Date(e+"T00:00:00");return isFinite(t.getTime())?t.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):""}catch{return e}};function Os({config:e,filterData:t,value:r,onChange:n}){const o=a.useRef(null),i=(t.props||{}).placeholder||t.label||"Date",p=t.icon||"",m=r||{},d=m.from||"",b=m.to||"",[h,M]=a.useState(!1),[g,N]=a.useState(!1),[w,C]=a.useState(()=>ze(d)),[S,k]=a.useState(()=>ze(b)),A=a.useCallback(()=>{C(ze(d)),M(!0)},[d]),F=a.useCallback(()=>{k(ze(b)),N(!0)},[b]),f=a.useCallback(E=>{C(E)},[]),v=a.useCallback(E=>{k(E)},[]),R=a.useCallback(E=>{const L=Lt(E!==void 0?E:w)||"";n({from:L,to:b}),M(!1)},[w,b,n]),P=a.useCallback(E=>{const L=Lt(E!==void 0?E:S)||"";n({from:d,to:L}),N(!1)},[S,d,n]),x=a.useCallback(()=>{C(null),n({from:"",to:b})},[b,n]),I=a.useCallback(()=>{k(null),n({from:d,to:""})},[d,n]),H=!!d||!!b,j=a.useMemo(()=>{if(!H)return i;const E=[];return d&&E.push(tt(d)),b&&E.push(tt(b)),E.join(" - ")||i},[H,d,b,i]),{style:q,className:O}=ee(e,"ts-form-group");return React.createElement("div",{className:O,style:q},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:o,className:`ts-filter ts-popup-target ${H?"ts-filled":""}`,onClick:A,onMouseDown:E=>E.preventDefault(),role:"button",tabIndex:0},p&&React.createElement("span",{dangerouslySetInnerHTML:{__html:p}}),React.createElement("div",{className:"ts-filter-text"},j),React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:h,target:o,title:"From",icon:p,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:R,onClear:x,onClose:()=>M(!1)},React.createElement(_e,{value:w,onChange:f,onSelect:R}),React.createElement("div",{className:"ts-form-group",style:{marginTop:"12px",borderTop:"1px solid var(--ts-shade-5)",paddingTop:"12px"}},React.createElement("label",null,"To"),React.createElement("div",{className:`ts-filter ts-popup-target ${b?"ts-filled":""}`,onClick:E=>{E.stopPropagation(),M(!1),setTimeout(()=>F(),100)},role:"button",tabIndex:0},p&&React.createElement("span",{dangerouslySetInnerHTML:{__html:p}}),React.createElement("div",{className:"ts-filter-text"},b?tt(b):"Select end date")))),React.createElement(de,{isOpen:g,target:o,title:"To",icon:p,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:P,onClear:I,onClose:()=>N(!1)},React.createElement(_e,{value:S,onChange:v,onSelect:P})))}function Hs({config:e,filterData:t,value:r,onChange:n}){const o=r===!0||r==="true"||r==="1",u=()=>{n(!o)},i=t.props?.placeholder||t.label||"Open now",{style:p,className:m}=ee(e,"ts-form-group switcher-label ts-inline-filter");return React.createElement("div",{className:m,style:p},React.createElement("label",null,React.createElement("div",{className:"switch-slider"},React.createElement("div",{className:"onoffswitch"},React.createElement("input",{type:"checkbox",className:"onoffswitch-checkbox",checked:o,onChange:u}),React.createElement("label",{className:"onoffswitch-label"}))),i))}function Ws({config:e,filterData:t,value:r,onChange:n}){const o=a.useRef(null),[u,i]=a.useState(!1),p=t.props||{},m=e.displayAs||t.props?.display_as||"popup",d=p.placeholder||t.label||"Order By",b=a.useMemo(()=>{const v=p.choices||{};return Array.isArray(v)?v:Object.entries(v).map(([R,P])=>({key:R,label:P.label||P,placeholder:P.placeholder||P.label||P,icon:P.icon||""}))},[p.choices]),h=t.icon||"",M=a.useCallback(()=>{i(!0)},[]),g=a.useCallback(v=>{n(v),m==="popup"&&i(!1)},[n,m]),N=a.useCallback(()=>{n(null)},[n]),w=typeof r=="string"?r:"",C=!!w,S=b.find(v=>v.key===w),k=S?.placeholder||S?.label||d,A=()=>React.createElement("div",{className:"ts-term-dropdown ts-md-group"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list min-scroll"},b.map(v=>{const R=w===v.key;return React.createElement("li",{key:v.key,className:R?"ts-selected":""},React.createElement("a",{href:"#",className:"flexify",onClick:P=>{P.preventDefault(),g(v.key)}},React.createElement("div",{className:"ts-radio-container"},React.createElement("label",{className:"container-radio"},React.createElement("input",{type:"radio",value:v.key,checked:R,readOnly:!0,disabled:!0,hidden:!0}),React.createElement("span",{className:"checkmark"}))),React.createElement("span",null,v.label),v.icon&&React.createElement("div",{className:"ts-term-icon"},React.createElement("span",{dangerouslySetInnerHTML:{__html:v.icon}}))))})));if(m==="buttons"){const{style:v,className:R}=ee(e,"ts-form-group");return React.createElement("div",{className:R,style:v},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("ul",{className:"simplify-ul addon-buttons flexify"},b.map(P=>{const x=w===P.key;return React.createElement("li",{key:P.key,className:`flexify${x?" adb-selected":""}`,onClick:()=>g(P.key)},P.placeholder||P.label)})))}if(m==="alt-btn")return React.createElement(React.Fragment,null,b.map(v=>{const R=w===v.key,{style:P,className:x}=ee(e,"ts-form-group");return React.createElement("div",{key:v.key,className:x,style:P},!e.hideLabel&&React.createElement("label",null,v.label),React.createElement("div",{className:`ts-filter${R?" ts-filled":""}`,onClick:()=>g(v.key)},v.icon&&React.createElement("span",{dangerouslySetInnerHTML:{__html:v.icon}}),React.createElement("div",{className:"ts-filter-text"},React.createElement("span",null,v.placeholder||v.label))))}));const{style:F,className:f}=ee(e,"ts-form-group");return React.createElement("div",{className:f,style:F},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:o,className:`ts-filter ts-popup-target ${C?"ts-filled":""}`,onClick:M,onMouseDown:v=>v.preventDefault(),role:"button",tabIndex:0},h&&React.createElement("span",{dangerouslySetInnerHTML:{__html:h}}),React.createElement("div",{className:"ts-filter-text"},k),React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:u,target:o,title:"",icon:h,saveLabel:"Save",clearLabel:"Clear",showClear:C,showSave:!1,onSave:()=>i(!1),onClear:N,onClose:()=>i(!1),className:"hide-head"},A()))}function Us({config:e,filterData:t,value:r,onChange:n}){const[o,u]=a.useState(!1),i=a.useRef(null),p=t.props||{},m=e.displayAs||t.props?.display_as||"popup",d=p.placeholder||t.label||"Status",b=a.useMemo(()=>{const f=p.choices||{};return Array.isArray(f)?f:Object.entries(f).map(([v,R])=>({key:v,label:R.label||R}))},[p.choices]),h=t.icon||"",M=a.useCallback(f=>{n(f),u(!1)},[n]),g=a.useCallback(()=>{u(!0)},[]),N=typeof r=="string"?r:"",w=!!N,C=b.find(f=>f.key===N),S=w&&C?.label||d,k=()=>React.createElement("div",{className:"ts-term-dropdown ts-md-group"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list min-scroll"},b.map(f=>{const v=N===f.key;return React.createElement("li",{key:f.key},React.createElement("a",{href:"#",className:"flexify",onClick:R=>{R.preventDefault(),M(f.key)}},React.createElement("div",{className:"ts-radio-container"},React.createElement("label",{className:"container-radio"},React.createElement("input",{type:"radio",value:f.key,checked:v,readOnly:!0}),React.createElement("span",{className:"checkmark"}))),React.createElement("span",null,f.label),h&&React.createElement("div",{className:"ts-term-icon"},React.createElement("span",{dangerouslySetInnerHTML:{__html:h}}))))})));if(m==="buttons")return React.createElement(React.Fragment,null,b.map(f=>{const v=N===f.key,{style:R,className:P}=ee(e,"ts-form-group");return React.createElement("div",{key:f.key,className:P,style:R},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{className:`ts-filter${v?" ts-filled":""}`,onClick:()=>n(f.key)},h&&React.createElement("span",{dangerouslySetInnerHTML:{__html:h}}),React.createElement("div",{className:"ts-filter-text"},React.createElement("span",null,f.label))))}));const{style:A,className:F}=ee(e,"ts-form-group");return React.createElement("div",{className:F,style:A},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:i,className:`ts-filter ts-popup-target ${w?"ts-filled":""}`,onClick:g,onMouseDown:f=>f.preventDefault(),role:"button",tabIndex:0},h&&React.createElement("span",{dangerouslySetInnerHTML:{__html:h}}),React.createElement("div",{className:"ts-filter-text"},S),React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:o,target:i,title:"",icon:h,saveLabel:"Save",showSave:!1,showClear:!1,onSave:()=>u(!1),onClose:()=>u(!1),className:"hide-head"},k()))}function js({config:e,filterData:t,value:r,onChange:n}){const o=a.useRef(null),u=a.useRef(null),[i,p]=a.useState(!1),[m,d]=a.useState(""),[b,h]=a.useState([]),[M,g]=a.useState(!1),w=(t.props||{}).placeholder||t.label||"User",C=t.icon||"";a.useEffect(()=>{i&&(d(""),h([]),setTimeout(()=>u.current?.focus(),50))},[i]);const S=a.useCallback(()=>{p(!0)},[]),k=a.useCallback(I=>{const H=I.target.value;d(H),H.length>=2?(g(!0),setTimeout(()=>{h([]),g(!1)},300)):h([])},[]),A=a.useCallback((I,H)=>{n({id:I,name:H}),p(!1),d("")},[n]),F=a.useCallback(()=>{n(null),d(""),h([])},[n]),f=r,v=!!f?.id,R=v&&f?.name||w,{style:P,className:x}=ee(e,"ts-form-group");return React.createElement("div",{className:x,style:P},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:o,className:`ts-filter ts-popup-target ${v?"ts-filled":""}`,onClick:S,onMouseDown:I=>I.preventDefault(),role:"button",tabIndex:0},C&&React.createElement("span",{dangerouslySetInnerHTML:{__html:C}}),React.createElement("div",{className:"ts-filter-text"},R),React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:i,target:o,title:"",icon:C,saveLabel:"Save",clearLabel:"Clear",showClear:v,showSave:!1,onSave:()=>p(!1),onClear:F,onClose:()=>p(!1)},React.createElement("div",{className:"ts-form-group"},React.createElement("div",{className:"flexify ts-input-icon"},React.createElement("span",null,be.search),React.createElement("input",{ref:u,type:"text",className:"inline-input",value:m,onChange:k,placeholder:"Search users..."}))),M?React.createElement("div",{className:"ts-loading"},React.createElement("span",{className:"ts-loader"})):b.length>0?React.createElement("div",{className:"ts-term-dropdown"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list"},b.map(I=>React.createElement("li",{key:I.id},React.createElement("a",{href:"#",className:"flexify",onClick:H=>{H.preventDefault(),A(I.id,I.name)}},I.avatar&&React.createElement("img",{src:I.avatar,alt:I.name,className:"ts-status-avatar"}),React.createElement("span",null,I.name)))))):m.length>=2?React.createElement("div",{className:"ts-empty-user-tab"},React.createElement("span",null,getFilterIcon(t.type)),React.createElement("p",null,"No users found")):null))}function zs({config:e,filterData:t,value:r,onChange:n}){const o=a.useRef(null),u=a.useRef(null),[i,p]=a.useState(!1),[m,d]=a.useState(""),[b,h]=a.useState([]),[M,g]=a.useState(!1),w=(t.props||{}).placeholder||t.label||"Related",C=t.icon||"";a.useEffect(()=>{i&&(d(""),h([]),setTimeout(()=>u.current?.focus(),50))},[i]);const S=a.useCallback(()=>{p(!0)},[]),k=a.useCallback(I=>{const H=I.target.value;d(H),H.length>=2?(g(!0),setTimeout(()=>{h([]),g(!1)},300)):h([])},[]),A=a.useCallback((I,H)=>{n({id:I,title:H}),p(!1),d("")},[n]),F=a.useCallback(()=>{n(null),d(""),h([])},[n]),f=r,v=!!f?.id,R=v&&f?.title||w,{style:P,className:x}=ee(e,"ts-form-group");return React.createElement("div",{className:x,style:P},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:o,className:`ts-filter ts-popup-target ${v?"ts-filled":""}`,onClick:S,onMouseDown:I=>I.preventDefault(),role:"button",tabIndex:0},C&&React.createElement("span",{dangerouslySetInnerHTML:{__html:C}}),React.createElement("div",{className:"ts-filter-text"},R),React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:i,target:o,title:"",icon:C,saveLabel:"Save",clearLabel:"Clear",showClear:v,showSave:!1,onSave:()=>p(!1),onClear:F,onClose:()=>p(!1)},React.createElement("div",{className:"ts-form-group"},React.createElement("div",{className:"flexify ts-input-icon"},React.createElement("span",null,be.search),React.createElement("input",{ref:u,type:"text",className:"inline-input",value:m,onChange:k,placeholder:"Search..."}))),M?React.createElement("div",{className:"ts-loading"},React.createElement("span",{className:"ts-loader"})):b.length>0?React.createElement("div",{className:"ts-term-dropdown"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list"},b.map(I=>React.createElement("li",{key:I.id},React.createElement("a",{href:"#",className:"flexify",onClick:H=>{H.preventDefault(),A(I.id,I.title)}},React.createElement("span",null,I.title)))))):m.length>=2?React.createElement("div",{className:"ts-empty-user-tab"},C&&React.createElement("span",{dangerouslySetInnerHTML:{__html:C}}),React.createElement("p",null,"No results found")):null))}function qs({config:e,filterData:t,value:r,onChange:n}){const[o,u]=a.useState(!1),[i,p]=a.useState(""),[m,d]=a.useState([]),[b,h]=a.useState(!1),M=a.useRef(null),N=(t.props||{}).placeholder||t.label||"Following",w=t.icon||"",C=x=>{const I=x.target.value;p(I),I.length>=2?(h(!0),setTimeout(()=>{d([]),h(!1)},300)):d([])},S=(x,I)=>{n({id:x,name:I}),u(!1),p("")},k=x=>{x.preventDefault(),u(!o)};a.useEffect(()=>{const x=I=>{M.current&&!M.current.contains(I.target)&&u(!1)};return o&&document.addEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)}},[o]);const A=r,F=!!A?.id,f=F&&A?.name||N,{style:v,className:R}=ee(e,"ts-form-group"),P=Kt(e);return React.createElement("div",{className:R,style:v,ref:M},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{className:`ts-filter ts-popup-target ${F?"ts-filled":""}`,onClick:k,onMouseDown:x=>x.preventDefault(),role:"button",tabIndex:0},w&&React.createElement("span",{dangerouslySetInnerHTML:{__html:w}}),React.createElement("div",{className:"ts-filter-text"},f),React.createElement("div",{className:"ts-down-icon"})),o&&React.createElement("div",{className:"ts-field-popup-container"},React.createElement("div",{className:P.className,style:P.style},React.createElement("div",{className:"ts-popup-content-wrapper min-scroll"},React.createElement("div",{className:"ts-form-group"},React.createElement("div",{className:"flexify ts-input-icon"},React.createElement("span",null,be.search),React.createElement("input",{type:"text",className:"inline-input",value:i,onChange:C,placeholder:"Search..."}))),b?React.createElement("div",{className:"ts-loading"},React.createElement("span",{className:"ts-loader"})):m.length>0?React.createElement("div",{className:"ts-term-dropdown"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list"},m.map(x=>React.createElement("li",{key:x.id},React.createElement("a",{href:"#",className:"flexify",onClick:I=>{I.preventDefault(),S(x.id,x.name)}},React.createElement("span",null,x.name)))))):i.length>=2?React.createElement("div",{className:"ts-empty-user-list"},React.createElement("span",null,"No results found")):null))))}function Ks({config:e,filterData:t,value:r,onChange:n}){const o=r===!0||r==="true"||r==="1",u=()=>{n(!o)},{style:i,className:p}=ee(e,"ts-form-group switcher-label ts-inline-filter");return React.createElement("div",{className:p,style:i},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("label",{className:`onoffswitch ts-${o?"on":"off"}`},React.createElement("input",{type:"checkbox",className:"onoffswitch-checkbox",checked:o,onChange:u}),React.createElement("span",{className:"onoffswitch-trigger"})))}function Zs({config:e,filterData:t}){const r=t.props?.description||"",{style:n,className:o}=ee(e,"ts-form-group ui-heading");return React.createElement("div",{className:o,style:n},React.createElement("label",null,e.label||t.label,r&&React.createElement("small",null,r)))}function Js({postTypes:e,currentPostType:t,onChange:r}){const[n,o]=a.useState(!1),u=a.useRef(null),i=a.useCallback(g=>{r(g),o(!1)},[r]),p=a.useCallback(()=>{o(!0)},[]),m=e.find(g=>g.key===t),d=m?.label||"Select type",b=!!t,h=m?.icon||"",M=()=>React.createElement("div",{className:"ts-term-dropdown ts-md-group"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list min-scroll"},e.map(g=>{const N=t===g.key;return React.createElement("li",{key:g.key},React.createElement("a",{href:"#",className:"flexify",onClick:w=>{w.preventDefault(),i(g.key)}},React.createElement("div",{className:"ts-radio-container"},React.createElement("label",{className:"container-radio"},React.createElement("input",{type:"radio",checked:N,disabled:!0,hidden:!0,readOnly:!0}),React.createElement("span",{className:"checkmark"}))),React.createElement("span",null,g.label),React.createElement("div",{className:"ts-term-icon ts-pull-right"},g.icon&&React.createElement("span",{dangerouslySetInnerHTML:{__html:g.icon}}))))})));return React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,"Type"),React.createElement("div",{ref:u,className:`ts-filter ts-popup-target ${b?"ts-filled":""}`,onClick:p,onMouseDown:g=>g.preventDefault(),role:"button",tabIndex:0},h&&React.createElement("span",{dangerouslySetInnerHTML:{__html:h}}),React.createElement("div",{className:"ts-filter-text"},d),React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:n,target:u,title:"",icon:h,saveLabel:"Save",showSave:!1,showClear:!1,onSave:()=>o(!1),onClose:()=>o(!1),className:"hide-head"},M()))}function Xs(){const e=()=>{if(typeof window>"u")return"desktop";const n=window.innerWidth;return n<=767?"mobile":n<=1024?"tablet":"desktop"},[t,r]=a.useState(e);return a.useEffect(()=>{const n=()=>{r(e())};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),t}function Ys({attributes:e,postTypes:t,context:r,editorDeviceType:n,onSubmit:o}){a.useRef(null);const u=a.useRef(null),{state:i,setCurrentPostType:p,setFilterValue:m,togglePortal:d,submit:b,clearAll:h,narrowedValues:M,narrowingFilters:g}=zt({attributes:e,postTypes:t,context:r,onSubmit:o}),[N,w]=a.useState(""),[C,S]=a.useState("");a.useEffect(()=>{const E=async()=>{const L=e.searchButtonText||"Search";if(Xe(L)){const D=mt(L),X=await pt(D);w(X)}else w(L)},U=async()=>{const L=e.resetButtonText||"Reset";if(Xe(L)){const D=mt(L),X=await pt(D);S(X)}else S(L)};E(),U()},[e.searchButtonText,e.resetButtonText]),a.useEffect(()=>{if(!i.portalActive)return;const E=U=>{U.key==="Escape"&&d()};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[i.portalActive,d]),a.useEffect(()=>{if(!i.portalActive)return;const E=L=>{const D=L.target;u.current?.contains(D)||d()},U=requestAnimationFrame(()=>{document.addEventListener("mousedown",E)});return()=>{cancelAnimationFrame(U),document.removeEventListener("mousedown",E)}},[i.portalActive,d]);const k=t.find(E=>E.key===i.currentPostType),A=e.filterLists?.[i.currentPostType]||[],F=E=>{b()},f=(E=!1)=>{h(E)},v=E=>{const U=k?.filters?.find(D=>D.key===E.filterKey);if(!U)return null;const L={config:E,filterData:U,value:i.filterValues[E.filterKey],onChange:D=>m(E.filterKey,D),narrowedValues:M,isNarrowing:g};switch(U.type){case"keywords":return React.createElement(Zt,{key:E.id,...L});case"range":return React.createElement(Ms,{key:E.id,...L});case"stepper":return React.createElement(Fs,{key:E.id,...L});case"terms":return React.createElement(Vs,{key:E.id,...L});case"location":return React.createElement(As,{key:E.id,...L});case"availability":return React.createElement(Bs,{key:E.id,...L});case"date":return React.createElement(Ds,{key:E.id,...L});case"recurring-date":return React.createElement(Os,{key:E.id,...L});case"open-now":return React.createElement(Hs,{key:E.id,...L});case"order-by":return React.createElement(Ws,{key:E.id,...L});case"post-status":return React.createElement(Us,{key:E.id,...L});case"user":return React.createElement(js,{key:E.id,...L});case"relations":return React.createElement(zs,{key:E.id,...L});case"following":return React.createElement(qs,{key:E.id,...L});case"switcher":return React.createElement(Ks,{key:E.id,...L});case"ui-heading":return React.createElement(Zs,{key:E.id,...L});default:return null}},R=(E=!0)=>React.createElement("div",{className:"ts-filter-wrapper flexify"},e.showPostTypeFilter&&t.length>1&&React.createElement(Js,{postTypes:t,currentPostType:i.currentPostType,onChange:p}),A.map(U=>v(U)),E&&e.showSearchButton&&React.createElement("div",{className:"ts-form-group flexify ts-form-submit",id:"sf_submit",style:O("search")},React.createElement("button",{type:"button",onClick:()=>F(),className:`ts-btn ts-btn-2 ts-btn-large ts-search-btn ${i.loading&&!i.resetting?"ts-loading-btn":""}`},i.loading&&!i.resetting&&React.createElement("div",{className:"ts-loader-wrapper"},React.createElement("span",{className:"ts-loader"})),be.search,N||"Search")),E&&e.showResetButton&&React.createElement("div",{className:"ts-form-group flexify ts-form-reset",style:O("reset")},React.createElement("a",{href:"#",onClick:U=>{U.preventDefault(),f(!1)},className:"ts-filter",role:"button"},be.reload,C&&React.createElement("div",{className:"ts-filter-text"},C)))),P=Xs(),x=r==="editor"&&n?n:P,I=x==="desktop"&&(e.formToggleDesktop??!1)||x==="tablet"&&(e.formToggleTablet??!0)||x==="mobile"&&(e.formToggleMobile??!0),H=I,j=!I,q={postTypes:t.map(E=>({key:E.key,label:E.label,filters:E.filters})),currentPostType:i.currentPostType,filterLists:e.filterLists||{},portalMode:e.portalMode||{desktop:!1,tablet:!1,mobile:!1},showPostTypeFilter:e.showPostTypeFilter??!0,showSearchButton:e.showSearchButton??!0,showResetButton:e.showResetButton??!1,searchButtonText:e.searchButtonText||"Search",resetButtonText:e.resetButtonText||"",formToggleDesktop:e.formToggleDesktop??!1,formToggleTablet:e.formToggleTablet??!0,formToggleMobile:e.formToggleMobile??!0,searchButtonWidth:e.searchButtonWidth,searchButtonWidth_tablet:e.searchButtonWidth_tablet,searchButtonWidth_mobile:e.searchButtonWidth_mobile,searchButtonWidthUnit:e.searchButtonWidthUnit||"%",resetButtonWidth:e.resetButtonWidth,resetButtonWidth_tablet:e.resetButtonWidth_tablet,resetButtonWidth_mobile:e.resetButtonWidth_mobile,resetButtonWidthUnit:e.resetButtonWidthUnit||"%"},O=E=>{const U=E==="search"?e.searchButtonWidthUnit||"%":e.resetButtonWidthUnit||"%";let L;return E==="search"?x==="mobile"?L=e.searchButtonWidth_mobile??e.searchButtonWidth_tablet??e.searchButtonWidth:x==="tablet"?L=e.searchButtonWidth_tablet??e.searchButtonWidth:L=e.searchButtonWidth:x==="mobile"?L=e.resetButtonWidth_mobile??e.resetButtonWidth_tablet??e.resetButtonWidth:x==="tablet"?L=e.resetButtonWidth_tablet??e.resetButtonWidth:L=e.resetButtonWidth,L!==void 0?{width:`${L}${U}`,flexGrow:0,flexShrink:0}:{}};return React.createElement(React.Fragment,null,React.createElement("div",{className:"ts-form ts-search-widget","data-v-app":""},React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(q)}}),H&&React.createElement("div",{className:"ts-filter-wrapper flexify vx-hidden-desktop"},React.createElement("a",{href:"#",onClick:E=>{E.preventDefault(),d()},onMouseDown:E=>E.preventDefault(),className:`ts-filter-toggle ts-btn ts-btn-1 ${i.activeFilterCount>0?"ts-filled":""}`,role:"button","aria-expanded":i.portalActive},be.filterslider,React.createElement("div",{className:"ts-toggle-text"},"Filter results"),i.activeFilterCount>0&&React.createElement("span",{className:"ts-filter-count"},i.activeFilterCount))),React.createElement("form",{method:"GET",onSubmit:E=>(E.preventDefault(),!1)},j&&React.createElement("div",{className:"ts-inline-filters"},R())),React.createElement("div",{className:"hidden"},React.createElement("div",{className:"ts-search-portal"}))),i.portalActive&&ut.createPortal(React.createElement("div",{className:"ts-search-portal vx-popup elementor"},React.createElement("div",{className:"ts-popup-root elementor-element"},React.createElement("div",{className:"ts-form ts-search-widget no-render elementor-element"},React.createElement("div",{className:"ts-field-popup-container"},React.createElement("div",{className:"ts-field-popup triggers-blur",ref:u},React.createElement("div",{className:"ts-popup-content-wrapper min-scroll"},React.createElement("div",{className:"ts-form-group"},R())),React.createElement("div",{className:"ts-popup-controller"},React.createElement("ul",{className:"flexify simplify-ul"},React.createElement("li",{className:"flexify ts-popup-close"},React.createElement("a",{href:"#",onClick:E=>{E.preventDefault(),d()},className:"ts-icon-btn",role:"button","aria-label":"Close"},be.close)),React.createElement("li",{className:"flexify hide-d"},React.createElement("a",{href:"#",onClick:E=>{E.preventDefault(),f(!0)},className:"ts-icon-btn",role:"button"},be.reload)),React.createElement("li",{className:"flexify hide-m"},React.createElement("a",{href:"#",onClick:E=>{E.preventDefault(),f(!0)},className:"ts-btn ts-btn-1",role:"button"},"Clear")),React.createElement("li",{className:"flexify"},React.createElement("a",{href:"#",onClick:E=>{E.preventDefault(),F(),d()},className:"ts-btn ts-btn-2",role:"button"},"Search"))))))))),document.body))}const st=new Map;function Gs(){return dt()}function Ne(e,t){if(!e)return t;try{return JSON.parse(e)}catch{return t}}function xe(e){return e==="true"}function Qs(e){const t=r=>{if(!r||r==="")return;const n=Number(r);return isNaN(n)?void 0:n};return{blockId:e.id||"",postTypes:Ne(e.dataset.postTypes,[]),showPostTypeFilter:xe(e.dataset.showPostTypeFilter),filterLists:Ne(e.dataset.filterLists,{}),onSubmit:e.dataset.onSubmit||"refresh",postToFeedId:e.dataset.postToFeedId||"",postToMapId:e.dataset.postToMapId||"",searchOn:e.dataset.searchOn||"submit",showSearchButton:xe(e.dataset.showSearchButton),searchButtonText:e.dataset.searchButtonText||"Search",searchButtonIcon:Ne(e.dataset.searchButtonIcon,{}),searchButtonWidth:t(e.dataset.searchButtonWidth),searchButtonWidth_tablet:t(e.dataset.searchButtonWidthTablet),searchButtonWidth_mobile:t(e.dataset.searchButtonWidthMobile),searchButtonWidthUnit:e.dataset.searchButtonWidthUnit||"%",showResetButton:xe(e.dataset.showResetButton),resetButtonText:e.dataset.resetButtonText||"Reset",resetButtonIcon:Ne(e.dataset.resetButtonIcon,{}),resetButtonWidth:t(e.dataset.resetButtonWidth),resetButtonWidth_tablet:t(e.dataset.resetButtonWidthTablet),resetButtonWidth_mobile:t(e.dataset.resetButtonWidthMobile),resetButtonWidthUnit:e.dataset.resetButtonWidthUnit||"%",voxelIntegration:xe(e.dataset.voxelIntegration),adaptiveFiltering:xe(e.dataset.adaptiveFiltering),portalMode:Ne(e.dataset.portalMode,{desktop:!1,tablet:!0,mobile:!0}),formToggleDesktop:xe(e.dataset.formToggleDesktop),formToggleTablet:xe(e.dataset.formToggleTablet),formToggleMobile:xe(e.dataset.formToggleMobile),toggleText:e.dataset.toggleText||"Filter results",toggleIcon:Ne(e.dataset.toggleIcon,{})}}async function $s(e){if(!e||e.length===0)return[];const r=`${Gs()}voxel-fse/v1/search-form/frontend-config?post_types=${encodeURIComponent(e.join(","))}`;try{const n=await fetch(r);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(n){return console.error("Failed to fetch post types:",n),[]}}function er(e){const t=(i,p)=>typeof i=="boolean"?i:i==="true"?!0:i==="false"?!1:p,r=i=>{if(i&&typeof i=="object"){const p=i;return{desktop:t(p.desktop,!1),tablet:t(p.tablet,!0),mobile:t(p.mobile,!0)}}return{desktop:!1,tablet:!0,mobile:!0}},n=i=>i&&typeof i=="object"?i:{},u=(e.postTypes??e.post_types??[]).map(i=>typeof i=="string"?i:i&&typeof i=="object"&&"key"in i?i.key:"").filter(Boolean);return{blockId:e.blockId??e.block_id??"",postTypes:u,showPostTypeFilter:t(e.showPostTypeFilter??e.show_post_type_filter,!0),filterLists:e.filterLists??e.filter_lists??{},onSubmit:e.onSubmit??e.on_submit??"refresh",postToFeedId:e.postToFeedId??e.post_to_feed_id??"",postToMapId:e.postToMapId??e.post_to_map_id??"",searchOn:e.searchOn??e.search_on??"submit",showSearchButton:t(e.showSearchButton??e.show_search_button,!0),searchButtonText:e.searchButtonText??e.search_button_text??"Search",searchButtonIcon:n(e.searchButtonIcon??e.search_button_icon),searchButtonWidth:e.searchButtonWidth,searchButtonWidth_tablet:e.searchButtonWidth_tablet??e.search_button_width_tablet,searchButtonWidth_mobile:e.searchButtonWidth_mobile??e.search_button_width_mobile,searchButtonWidthUnit:e.searchButtonWidthUnit??e.search_button_width_unit??"%",showResetButton:t(e.showResetButton??e.show_reset_button,!1),resetButtonText:e.resetButtonText??e.reset_button_text??"Reset",resetButtonIcon:n(e.resetButtonIcon??e.reset_button_icon),resetButtonWidth:e.resetButtonWidth,resetButtonWidth_tablet:e.resetButtonWidth_tablet??e.reset_button_width_tablet,resetButtonWidth_mobile:e.resetButtonWidth_mobile??e.reset_button_width_mobile,resetButtonWidthUnit:e.resetButtonWidthUnit??e.reset_button_width_unit??"%",voxelIntegration:t(e.voxelIntegration??e.voxel_integration,!0),adaptiveFiltering:t(e.adaptiveFiltering??e.adaptive_filtering,!1),portalMode:r(e.portalMode??e.portal_mode),formToggleDesktop:t(e.formToggleDesktop??e.form_toggle_desktop,!1),formToggleTablet:t(e.formToggleTablet??e.form_toggle_tablet,!0),formToggleMobile:t(e.formToggleMobile??e.form_toggle_mobile,!0),toggleText:e.toggleText??e.toggle_text??"Filter results",toggleIcon:n(e.toggleIcon??e.toggle_icon)}}function tr(e){const t=e.querySelector("script.vxconfig");if(t&&t.textContent)try{const r=JSON.parse(t.textContent),n={...r,blockId:r.blockId||e.id||"",onSubmit:e.dataset.onSubmit||r.onSubmit||"refresh",postToFeedId:e.dataset.postToFeedId||r.postToFeedId||"",postToMapId:e.dataset.postToMapId||r.postToMapId||""};return er(n)}catch(r){console.error("Failed to parse vxconfig:",r)}return Qs(e)}function sr({attributes:e,onSubmit:t}){const[r,n]=a.useState([]),[o,u]=a.useState(!0),[i,p]=a.useState(null),m=a.useRef(!1),d=a.useCallback(()=>{if(m.current)return;const h=e.postTypes?.[0]||"";h&&(t({postType:h}),m.current=!0)},[e.postTypes,t]);if(a.useEffect(()=>{let h=!1;async function M(){u(!0),p(null);try{const g=await $s(e.postTypes||[]);h||n(g)}catch(g){h||p(g instanceof Error?g.message:"Failed to load")}finally{h||u(!1)}}return M(),()=>{h=!0}},[e.postTypes]),a.useEffect(()=>{const h=e.blockId;return h?(st.set(h,d),window.__voxelFsePendingPostFeedReady?.[h]&&(d(),delete window.__voxelFsePendingPostFeedReady[h]),()=>{st.delete(h)}):void 0},[e.blockId,d]),o)return React.createElement("div",{className:"ts-form ts-search-widget voxel-fse-loading"},React.createElement("div",{className:"ts-filter-wrapper flexify"},React.createElement("span",{className:"ts-loader"})));if(i)return React.createElement("div",{className:"ts-form ts-search-widget voxel-fse-error"},React.createElement("div",{className:"ts-filter-wrapper flexify"},React.createElement("span",null,"Error loading search form")));const b=r.filter(h=>e.postTypes?.includes(h.key));return React.createElement(Ys,{attributes:e,postTypes:b,context:"frontend",onSubmit:t})}function qe(){document.querySelectorAll(".voxel-fse-search-form").forEach(t=>{if(t.dataset.hydrated==="true")return;const r=tr(t),n=u=>{const i=u.postType||r.postTypes?.[0]||"",{postType:p,...m}=u;switch(r.onSubmit){case"feed":if(r.postToFeedId){const d=new CustomEvent("voxel-search-submit",{detail:{targetId:r.postToFeedId,postType:i,filters:m},bubbles:!0});window.dispatchEvent(d)}else console.warn("[search-form] No postToFeedId set, cannot dispatch to Post Feed");break;case"map":if(r.postToMapId){const d=new CustomEvent("voxel-search-submit",{detail:{targetId:r.postToMapId,postType:i,filters:m},bubbles:!0});window.dispatchEvent(d)}break;default:rr(u,r);break}};t.innerHTML="",t.dataset.hydrated="true",Ht.createRoot(t).render(React.createElement(sr,{attributes:r,onSubmit:n}))})}function rr(e,t){const r=new URL(window.location.href),n=[];r.searchParams.forEach((u,i)=>{(i.startsWith("filter_")||i==="post_type")&&n.push(i)}),n.forEach(u=>r.searchParams.delete(u));const o=e.postType||t.postTypes?.[0];o&&typeof o=="string"&&r.searchParams.set("post_type",o),Object.entries(e).forEach(([u,i])=>{u!=="postType"&&(i==null||i===""||(typeof i=="object"?r.searchParams.set(`filter_${u}`,JSON.stringify(i)):r.searchParams.set(`filter_${u}`,String(i))))}),window.location.href=r.toString()}function nr(e){const t=e;if(!t.detail?.searchFormId)return;const{searchFormId:r}=t.detail,n=st.get(r);n?n():(window.__voxelFsePendingPostFeedReady||(window.__voxelFsePendingPostFeedReady={}),window.__voxelFsePendingPostFeedReady[r]=t.detail.blockId)}window.addEventListener("voxel-fse:post-feed-ready",nr),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",qe):qe(),window.addEventListener("turbo:load",qe),window.addEventListener("pjax:complete",qe)})(ReactDOM,React,ReactDOM,wp.apiFetch);
