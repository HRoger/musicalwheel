(function(pn,c,Fe,mn){"use strict";function hn(e){return typeof e!="string"||e===""?(console.error("The namespace must be a non-empty string."),!1):/^[a-zA-Z][a-zA-Z0-9_.\-\/]*$/.test(e)?!0:(console.error("The namespace can only contain numbers, letters, dashes, periods, underscores and slashes."),!1)}var pt=hn;function yn(e){return typeof e!="string"||e===""?(console.error("The hook name must be a non-empty string."),!1):/^__/.test(e)?(console.error("The hook name cannot begin with `__`."),!1):/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(e)?!0:(console.error("The hook name can only contain numbers, letters, dashes, periods and underscores."),!1)}var qe=yn;function gn(e,t){return function(r,s,i,l=10){const a=e[t];if(!qe(r)||!pt(s))return;if(typeof i!="function"){console.error("The hook callback must be a function.");return}if(typeof l!="number"){console.error("If specified, the hook priority must be a number.");return}const o={callback:i,priority:l,namespace:s};if(a[r]){const u=a[r].handlers;let d;for(d=u.length;d>0&&!(l>=u[d-1].priority);d--);d===u.length?u[d]=o:u.splice(d,0,o),a.__current.forEach(b=>{b.name===r&&b.currentIndex>=d&&b.currentIndex++})}else a[r]={handlers:[o],runs:0};r!=="hookAdded"&&e.doAction("hookAdded",r,s,i,l)}}var mt=gn;function bn(e,t,n=!1){return function(s,i){const l=e[t];if(!qe(s)||!n&&!pt(i))return;if(!l[s])return 0;let a=0;if(n)a=l[s].handlers.length,l[s]={runs:l[s].runs,handlers:[]};else{const o=l[s].handlers;for(let u=o.length-1;u>=0;u--)o[u].namespace===i&&(o.splice(u,1),a++,l.__current.forEach(d=>{d.name===s&&d.currentIndex>=u&&d.currentIndex--}))}return s!=="hookRemoved"&&e.doAction("hookRemoved",s,i),a}}var Pe=bn;function vn(e,t){return function(r,s){const i=e[t];return typeof s<"u"?r in i&&i[r].handlers.some(l=>l.namespace===s):r in i}}var ht=vn;function En(e,t,n,r){return function(i,...l){const a=e[t];a[i]||(a[i]={handlers:[],runs:0}),a[i].runs++;const o=a[i].handlers;if(!o||!o.length)return n?l[0]:void 0;const u={name:i,currentIndex:0};async function d(){try{a.__current.add(u);let f=n?l[0]:void 0;for(;u.currentIndex<o.length;)f=await o[u.currentIndex].callback.apply(null,l),n&&(l[0]=f),u.currentIndex++;return n?f:void 0}finally{a.__current.delete(u)}}function b(){try{a.__current.add(u);let f=n?l[0]:void 0;for(;u.currentIndex<o.length;)f=o[u.currentIndex].callback.apply(null,l),n&&(l[0]=f),u.currentIndex++;return n?f:void 0}finally{a.__current.delete(u)}}return(r?d:b)()}}var Oe=En;function wn(e,t){return function(){const r=e[t];return Array.from(r.__current).at(-1)?.name??null}}var yt=wn;function Sn(e,t){return function(r){const s=e[t];return typeof r>"u"?s.__current.size>0:Array.from(s.__current).some(i=>i.name===r)}}var gt=Sn;function Rn(e,t){return function(r){const s=e[t];if(qe(r))return s[r]&&s[r].runs?s[r].runs:0}}var bt=Rn,_n=class{actions;filters;addAction;addFilter;removeAction;removeFilter;hasAction;hasFilter;removeAllActions;removeAllFilters;doAction;doActionAsync;applyFilters;applyFiltersAsync;currentAction;currentFilter;doingAction;doingFilter;didAction;didFilter;constructor(){this.actions=Object.create(null),this.actions.__current=new Set,this.filters=Object.create(null),this.filters.__current=new Set,this.addAction=mt(this,"actions"),this.addFilter=mt(this,"filters"),this.removeAction=Pe(this,"actions"),this.removeFilter=Pe(this,"filters"),this.hasAction=ht(this,"actions"),this.hasFilter=ht(this,"filters"),this.removeAllActions=Pe(this,"actions",!0),this.removeAllFilters=Pe(this,"filters",!0),this.doAction=Oe(this,"actions",!1,!1),this.doActionAsync=Oe(this,"actions",!1,!0),this.applyFilters=Oe(this,"filters",!0,!1),this.applyFiltersAsync=Oe(this,"filters",!0,!0),this.currentAction=yt(this,"actions"),this.currentFilter=yt(this,"filters"),this.doingAction=gt(this,"actions"),this.doingFilter=gt(this,"filters"),this.didAction=bt(this,"actions"),this.didFilter=bt(this,"filters")}};function Cn(){return new _n}var kn=Cn,Tn=kn(),{addAction:$s,addFilter:el,removeAction:tl,removeFilter:nl,hasAction:rl,hasFilter:sl,removeAllActions:ll,removeAllFilters:al,doAction:xn,doActionAsync:ol,applyFilters:il,applyFiltersAsync:cl,currentAction:ul,currentFilter:dl,doingAction:fl,doingFilter:pl,didAction:ml,didFilter:hl,actions:yl,filters:gl}=Tn,vt=Object.create(null);function Et(e,t={}){const{since:n,version:r,alternative:s,plugin:i,link:l,hint:a}=t,o=i?` from ${i}`:"",u=n?` since version ${n}`:"",d=r?` and will be removed${o} in version ${r}`:"",b=s?` Please use ${s} instead.`:"",f=l?` See: ${l}`:"",h=a?` Note: ${a}`:"",v=`${e} is deprecated${u}${d}.${b}${f}${h}`;v in vt||(xn("deprecated",e,t,v),console.warn(v),vt[v]=!0)}function ce(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Nn=typeof Symbol=="function"&&Symbol.observable||"@@observable",wt=Nn,St=()=>Math.random().toString(36).substring(7).split("").join("."),In={INIT:`@@redux/INIT${St()}`,REPLACE:`@@redux/REPLACE${St()}`},Rt=In;function Ln(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function _t(e,t,n){if(typeof e!="function")throw new Error(ce(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ce(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ce(1));return n(_t)(e,t)}let r=e,s=t,i=new Map,l=i,a=0,o=!1;function u(){l===i&&(l=new Map,i.forEach((E,_)=>{l.set(_,E)}))}function d(){if(o)throw new Error(ce(3));return s}function b(E){if(typeof E!="function")throw new Error(ce(4));if(o)throw new Error(ce(5));let _=!0;u();const w=a++;return l.set(w,E),function(){if(_){if(o)throw new Error(ce(6));_=!1,u(),l.delete(w),i=null}}}function f(E){if(!Ln(E))throw new Error(ce(7));if(typeof E.type>"u")throw new Error(ce(8));if(typeof E.type!="string")throw new Error(ce(17));if(o)throw new Error(ce(9));try{o=!0,s=r(s,E)}finally{o=!1}return(i=l).forEach(w=>{w()}),E}function h(E){if(typeof E!="function")throw new Error(ce(10));r=E,f({type:Rt.REPLACE})}function v(){const E=b;return{subscribe(_){if(typeof _!="object"||_===null)throw new Error(ce(11));function w(){const T=_;T.next&&T.next(d())}return w(),{unsubscribe:E(w)}},[wt](){return this}}}return f({type:Rt.INIT}),{dispatch:f,subscribe:b,getState:d,replaceReducer:h,[wt]:v}}function Mn(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Fn(...e){return t=>(n,r)=>{const s=t(n,r);let i=()=>{throw new Error(ce(15))};const l={getState:s.getState,dispatch:(o,...u)=>i(o,...u)},a=e.map(o=>o(l));return i=Mn(...a)(s.dispatch),{...s,dispatch:i}}}var Ct=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ze,kt;function On(){if(kt)return ze;kt=1;function e(l){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(a){return typeof a}:e=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e(l)}function t(l,a){if(!(l instanceof a))throw new TypeError("Cannot call a class as a function")}function n(l,a){for(var o=0;o<a.length;o++){var u=a[o];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(l,u.key,u)}}function r(l,a,o){return a&&n(l.prototype,a),l}function s(l,a){var o=l._map,u=l._arrayTreeMap,d=l._objectTreeMap;if(o.has(a))return o.get(a);for(var b=Object.keys(a).sort(),f=Array.isArray(a)?u:d,h=0;h<b.length;h++){var v=b[h];if(f=f.get(v),f===void 0)return;var k=a[v];if(f=f.get(k),f===void 0)return}var E=f.get("_ekm_value");if(E)return o.delete(E[0]),E[0]=a,f.set("_ekm_value",E),o.set(a,E),E}var i=(function(){function l(a){if(t(this,l),this.clear(),a instanceof l){var o=[];a.forEach(function(d,b){o.push([b,d])}),a=o}if(a!=null)for(var u=0;u<a.length;u++)this.set(a[u][0],a[u][1])}return r(l,[{key:"set",value:function(o,u){if(o===null||e(o)!=="object")return this._map.set(o,u),this;for(var d=Object.keys(o).sort(),b=[o,u],f=Array.isArray(o)?this._arrayTreeMap:this._objectTreeMap,h=0;h<d.length;h++){var v=d[h];f.has(v)||f.set(v,new l),f=f.get(v);var k=o[v];f.has(k)||f.set(k,new l),f=f.get(k)}var E=f.get("_ekm_value");return E&&this._map.delete(E[0]),f.set("_ekm_value",b),this._map.set(o,b),this}},{key:"get",value:function(o){if(o===null||e(o)!=="object")return this._map.get(o);var u=s(this,o);if(u)return u[1]}},{key:"has",value:function(o){return o===null||e(o)!=="object"?this._map.has(o):s(this,o)!==void 0}},{key:"delete",value:function(o){return this.has(o)?(this.set(o,void 0),!0):!1}},{key:"forEach",value:function(o){var u=this,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this;this._map.forEach(function(b,f){f!==null&&e(f)==="object"&&(b=b[1]),o.call(d,b,f,u)})}},{key:"clear",value:function(){this._map=new Map,this._arrayTreeMap=new Map,this._objectTreeMap=new Map}},{key:"size",get:function(){return this._map.size}}]),l})();return ze=i,ze}var An=On();const he=Pn(An);function Vn(e){return!!e&&typeof e[Symbol.iterator]=="function"&&typeof e.next=="function"}var Ke={},re={},Ae={},Tt;function xt(){if(Tt)return Ae;Tt=1,Object.defineProperty(Ae,"__esModule",{value:!0});var e={all:Symbol("all"),error:Symbol("error"),fork:Symbol("fork"),join:Symbol("join"),race:Symbol("race"),call:Symbol("call"),cps:Symbol("cps"),subscribe:Symbol("subscribe")};return Ae.default=e,Ae}var Nt;function It(){if(Nt)return re;Nt=1,Object.defineProperty(re,"__esModule",{value:!0}),re.createChannel=re.subscribe=re.cps=re.apply=re.call=re.invoke=re.delay=re.race=re.join=re.fork=re.error=re.all=void 0;var e=xt(),t=n(e);function n(r){return r&&r.__esModule?r:{default:r}}return re.all=function(s){return{type:t.default.all,value:s}},re.error=function(s){return{type:t.default.error,error:s}},re.fork=function(s){for(var i=arguments.length,l=Array(i>1?i-1:0),a=1;a<i;a++)l[a-1]=arguments[a];return{type:t.default.fork,iterator:s,args:l}},re.join=function(s){return{type:t.default.join,task:s}},re.race=function(s){return{type:t.default.race,competitors:s}},re.delay=function(s){return new Promise(function(i){setTimeout(function(){return i(!0)},s)})},re.invoke=function(s){for(var i=arguments.length,l=Array(i>1?i-1:0),a=1;a<i;a++)l[a-1]=arguments[a];return{type:t.default.call,func:s,context:null,args:l}},re.call=function(s,i){for(var l=arguments.length,a=Array(l>2?l-2:0),o=2;o<l;o++)a[o-2]=arguments[o];return{type:t.default.call,func:s,context:i,args:a}},re.apply=function(s,i,l){return{type:t.default.call,func:s,context:i,args:l}},re.cps=function(s){for(var i=arguments.length,l=Array(i>1?i-1:0),a=1;a<i;a++)l[a-1]=arguments[a];return{type:t.default.cps,func:s,args:l}},re.subscribe=function(s){return{type:t.default.subscribe,channel:s}},re.createChannel=function(s){var i=[],l=function(u){return i.push(u),function(){return i.splice(i.indexOf(u),1)}},a=function(u){return i.forEach(function(d){return d(u)})};return s(a),{subscribe:l}},re}var Ve={},ue={},De={},Lt;function Be(){if(Lt)return De;Lt=1,Object.defineProperty(De,"__esModule",{value:!0});var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol?"symbol":typeof i},t=xt(),n=r(t);function r(i){return i&&i.__esModule?i:{default:i}}var s={obj:function(l){return(typeof l>"u"?"undefined":e(l))==="object"&&!!l},all:function(l){return s.obj(l)&&l.type===n.default.all},error:function(l){return s.obj(l)&&l.type===n.default.error},array:Array.isArray,func:function(l){return typeof l=="function"},promise:function(l){return l&&s.func(l.then)},iterator:function(l){return l&&s.func(l.next)&&s.func(l.throw)},fork:function(l){return s.obj(l)&&l.type===n.default.fork},join:function(l){return s.obj(l)&&l.type===n.default.join},race:function(l){return s.obj(l)&&l.type===n.default.race},call:function(l){return s.obj(l)&&l.type===n.default.call},cps:function(l){return s.obj(l)&&l.type===n.default.cps},subscribe:function(l){return s.obj(l)&&l.type===n.default.subscribe},channel:function(l){return s.obj(l)&&s.func(l.subscribe)}};return De.default=s,De}var Mt;function Dn(){if(Mt)return ue;Mt=1,Object.defineProperty(ue,"__esModule",{value:!0}),ue.iterator=ue.array=ue.object=ue.error=ue.any=void 0;var e=Be(),t=n(e);function n(o){return o&&o.__esModule?o:{default:o}}var r=ue.any=function(u,d,b,f){return f(u),!0},s=ue.error=function(u,d,b,f,h){return t.default.error(u)?(h(u.error),!0):!1},i=ue.object=function(u,d,b,f,h){if(!t.default.all(u)||!t.default.obj(u.value))return!1;var v={},k=Object.keys(u.value),E=0,_=!1,w=function(y,p){_||(v[y]=p,E++,E===k.length&&f(v))},N=function(y,p){_||(_=!0,h(p))};return k.map(function(T){b(u.value[T],function(y){return w(T,y)},function(y){return N(T,y)})}),!0},l=ue.array=function(u,d,b,f,h){if(!t.default.all(u)||!t.default.array(u.value))return!1;var v=[],k=0,E=!1,_=function(T,y){E||(v[T]=y,k++,k===u.value.length&&f(v))},w=function(T,y){E||(E=!0,h(y))};return u.value.map(function(N,T){b(N,function(y){return _(T,y)},function(y){return w(T,y)})}),!0},a=ue.iterator=function(u,d,b,f,h){return t.default.iterator(u)?(b(u,d,h),!0):!1};return ue.default=[s,a,l,i,r],ue}var Ft;function Bn(){if(Ft)return Ve;Ft=1,Object.defineProperty(Ve,"__esModule",{value:!0});var e=Dn(),t=s(e),n=Be(),r=s(n);function s(a){return a&&a.__esModule?a:{default:a}}function i(a){if(Array.isArray(a)){for(var o=0,u=Array(a.length);o<a.length;o++)u[o]=a[o];return u}else return Array.from(a)}var l=function(){var o=arguments.length<=0||arguments[0]===void 0?[]:arguments[0],u=[].concat(i(o),i(t.default)),d=function b(f){var h=arguments.length<=1||arguments[1]===void 0?function(){}:arguments[1],v=arguments.length<=2||arguments[2]===void 0?function(){}:arguments[2],k=function(w){var N=function(p){return function(g){try{var R=p?w.throw(g):w.next(g),L=R.value,C=R.done;if(C)return h(L);T(L)}catch(O){return v(O)}}},T=function y(p){u.some(function(g){return g(p,y,b,N(!1),N(!0))})};N(!1)()},E=r.default.iterator(f)?f:regeneratorRuntime.mark(function _(){return regeneratorRuntime.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,f;case 2:return N.abrupt("return",N.sent);case 3:case"end":return N.stop()}},_,this)})();k(E)};return d};return Ve.default=l,Ve}var me={},je={},Pt;function jn(){if(Pt)return je;Pt=1,Object.defineProperty(je,"__esModule",{value:!0});var e=function(){var n=[];return{subscribe:function(s){return n.push(s),function(){n=n.filter(function(i){return i!==s})}},dispatch:function(s){n.slice().forEach(function(i){return i(s)})}}};return je.default=e,je}var Ot;function Wn(){if(Ot)return me;Ot=1,Object.defineProperty(me,"__esModule",{value:!0}),me.race=me.join=me.fork=me.promise=void 0;var e=Be(),t=i(e),n=It(),r=jn(),s=i(r);function i(f){return f&&f.__esModule?f:{default:f}}var l=me.promise=function(h,v,k,E,_){return t.default.promise(h)?(h.then(v,_),!0):!1},a=new Map,o=me.fork=function(h,v,k){if(!t.default.fork(h))return!1;var E=Symbol("fork"),_=(0,s.default)();a.set(E,_),k(h.iterator.apply(null,h.args),function(N){return _.dispatch(N)},function(N){return _.dispatch((0,n.error)(N))});var w=_.subscribe(function(){w(),a.delete(E)});return v(E),!0},u=me.join=function(h,v,k,E,_){if(!t.default.join(h))return!1;var w=a.get(h.task);return w?(function(){var N=w.subscribe(function(T){N(),v(T)})})():_("join error : task not found"),!0},d=me.race=function(h,v,k,E,_){if(!t.default.race(h))return!1;var w=!1,N=function(p,g,R){w||(w=!0,p[g]=R,v(p))},T=function(p){w||_(p)};return t.default.array(h.competitors)?(function(){var y=h.competitors.map(function(){return!1});h.competitors.forEach(function(p,g){k(p,function(R){return N(y,g,R)},T)})})():(function(){var y=Object.keys(h.competitors).reduce(function(p,g){return p[g]=!1,p},{});Object.keys(h.competitors).forEach(function(p){k(h.competitors[p],function(g){return N(y,p,g)},T)})})(),!0},b=function(h,v){if(!t.default.subscribe(h))return!1;if(!t.default.channel(h.channel))throw new Error('the first argument of "subscribe" must be a valid channel');var k=h.channel.subscribe(function(E){k&&k(),v(E)});return!0};return me.default=[l,o,u,d,b],me}var ye={},At;function Un(){if(At)return ye;At=1,Object.defineProperty(ye,"__esModule",{value:!0}),ye.cps=ye.call=void 0;var e=Be(),t=n(e);function n(l){return l&&l.__esModule?l:{default:l}}function r(l){if(Array.isArray(l)){for(var a=0,o=Array(l.length);a<l.length;a++)o[a]=l[a];return o}else return Array.from(l)}var s=ye.call=function(a,o,u,d,b){if(!t.default.call(a))return!1;try{o(a.func.apply(a.context,a.args))}catch(f){b(f)}return!0},i=ye.cps=function(a,o,u,d,b){var f;return t.default.cps(a)?((f=a.func).call.apply(f,[null].concat(r(a.args),[function(h,v){h?b(h):o(v)}])),!0):!1};return ye.default=[s,i],ye}var Vt;function Hn(){return Vt||(Vt=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.wrapControls=e.asyncControls=e.create=void 0;var t=It();Object.keys(t).forEach(function(u){u!=="default"&&Object.defineProperty(e,u,{enumerable:!0,get:function(){return t[u]}})});var n=Bn(),r=o(n),s=Wn(),i=o(s),l=Un(),a=o(l);function o(u){return u&&u.__esModule?u:{default:u}}e.create=r.default,e.asyncControls=i.default,e.wrapControls=a.default})(Ke)),Ke}var qn=Hn();function Dt(e){return!!e&&(typeof e=="object"||typeof e=="function")&&typeof e.then=="function"}function Bt(e){return Object.prototype.toString.call(e)==="[object Object]"}function zn(e){var t,n;return Bt(e)===!1?!1:(t=e.constructor,t===void 0?!0:(n=t.prototype,!(Bt(n)===!1||n.hasOwnProperty("isPrototypeOf")===!1)))}function Ge(e){return zn(e)&&typeof e.type=="string"}function Kn(e,t){return Ge(e)&&e.type===t}function Gn(e={},t){const n=Object.entries(e).map(([i,l])=>(a,o,u,d,b)=>{if(!Kn(a,i))return!1;const f=l(a);return Dt(f)?f.then(d,b):d(f),!0}),r=(i,l)=>Ge(i)?(t(i),l(),!0):!1;n.push(r);const s=qn.create(n);return i=>new Promise((l,a)=>s(i,o=>{Ge(o)&&t(o),l(o)},a))}function Zn(e={}){return t=>{const n=Gn(e,t.dispatch);return r=>s=>Vn(s)?n(s):r(s)}}var Jn=(e=!1)=>(...t)=>(...n)=>{const r=t.flat();return e&&r.reverse(),r.reduce((s,i)=>[i(...s)],n)[0]},Xn=Jn(!0),Yn=Xn;function Qn(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;let s=0;for(;s<n.length;){const i=n[s],l=e[i];if(l===void 0&&!t.hasOwnProperty(i)||l!==t[i])return!1;s++}return!0}function $n(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function jt(e,t){if(e&&t){if(e.constructor===Object&&t.constructor===Object)return Qn(e,t);if(Array.isArray(e)&&Array.isArray(t))return $n(e,t)}return e===t}var Ze={exports:{}},Wt;function er(){return Wt||(Wt=1,(function(e){(function(t){e.exports?e.exports=t():window.idleCallbackShim=t()})(function(){var t,n,r,s,i=typeof window<"u"?window:typeof Ct!=null?Ct:this||{},l=i.cancelRequestAnimationFrame&&i.requestAnimationFrame||setTimeout,a=i.cancelRequestAnimationFrame||clearTimeout,o=[],u=0,d=!1,b=7,f=35,h=125,v=0,k=0,E=0,_={get didTimeout(){return!1},timeRemaining:function(){var A=b-(Date.now()-k);return A<0?0:A}},w=N(function(){b=22,h=66,f=0});function N(A){var I,W,P=99,H=function(){var J=Date.now()-W;J<P?I=setTimeout(H,P-J):(I=null,A())};return function(){W=Date.now(),I||(I=setTimeout(H,P))}}function T(){d&&(s&&a(s),r&&clearTimeout(r),d=!1)}function y(){h!=125&&(b=7,h=125,f=35,d&&(T(),R())),w()}function p(){s=null,r=setTimeout(L,0)}function g(){r=null,l(p)}function R(){d||(n=h-(Date.now()-k),t=Date.now(),d=!0,f&&n<f&&(n=f),n>9?r=setTimeout(g,n):(n=0,g()))}function L(){var A,I,W,P=b>9?9:1;if(k=Date.now(),d=!1,r=null,u>2||k-n-50<t)for(I=0,W=o.length;I<W&&_.timeRemaining()>P;I++)A=o.shift(),E++,A&&A(_);o.length?R():u=0}function C(A){return v++,o.push(A),R(),v}function O(A){var I=A-1-E;o[I]&&(o[I]=null)}if(!i.requestIdleCallback||!i.cancelIdleCallback)i.requestIdleCallback=C,i.cancelIdleCallback=O,i.document&&document.addEventListener&&(i.addEventListener("scroll",y,!0),i.addEventListener("resize",y),document.addEventListener("focus",y,!0),document.addEventListener("mouseover",y,!0),["click","keypress","touchstart","mousedown"].forEach(function(A){document.addEventListener(A,y,{capture:!0,passive:!0})}),i.MutationObserver&&new MutationObserver(y).observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0}));else try{i.requestIdleCallback(function(){},{timeout:0})}catch{(function(I){var W,P;if(i.requestIdleCallback=function(H,J){return J&&typeof J.timeout=="number"?I(H,J.timeout):I(H)},i.IdleCallbackDeadline&&(W=IdleCallbackDeadline.prototype)){if(P=Object.getOwnPropertyDescriptor(W,"timeRemaining"),!P||!P.configurable||!P.get)return;Object.defineProperty(W,"timeRemaining",{value:function(){return P.get.call(this)},enumerable:!0,configurable:!0})}})(i.requestIdleCallback)}return{request:C,cancel:O}})})(Ze)),Ze.exports}er();function tr(){return typeof window>"u"?e=>{setTimeout(()=>e(Date.now()),0)}:window.requestIdleCallback}var Ut=tr(),nr=()=>{const e=new Map;let t=!1;const n=a=>{for(const[o,u]of e)if(e.delete(o),u(),typeof a=="number"||a.timeRemaining()<=0)break;if(e.size===0){t=!1;return}Ut(n)};return{add:(a,o)=>{e.set(a,o),t||(t=!0,Ut(n))},flush:a=>{const o=e.get(a);return o===void 0?!1:(e.delete(a),o(),!0)},cancel:a=>e.delete(a),reset:()=>{e.clear(),t=!1}}};function rr(e){const t=Object.keys(e);return function(r={},s){const i={};let l=!1;for(const a of t){const o=e[a],u=r[a],d=o(u,s);i[a]=d,l=l||d!==u}return l?i:r}}function Je(e){return e.isRegistryControl=!0,e}var sr="@@data/SELECT",lr="@@data/RESOLVE_SELECT",ar="@@data/DISPATCH",or={[sr]:Je(e=>({storeKey:t,selectorName:n,args:r})=>e.select(t)[n](...r)),[lr]:Je(e=>({storeKey:t,selectorName:n,args:r})=>{const s=e.select(t)[n].hasResolver?"resolveSelect":"select";return e[s](t)[n](...r)}),[ar]:Je(e=>({storeKey:t,actionName:n,args:r})=>e.dispatch(t)[n](...r))},ir=["@wordpress/block-directory","@wordpress/block-editor","@wordpress/block-library","@wordpress/blocks","@wordpress/boot","@wordpress/commands","@wordpress/workflows","@wordpress/components","@wordpress/core-commands","@wordpress/core-data","@wordpress/customize-widgets","@wordpress/data","@wordpress/edit-post","@wordpress/edit-site","@wordpress/edit-widgets","@wordpress/editor","@wordpress/font-list-route","@wordpress/format-library","@wordpress/patterns","@wordpress/preferences","@wordpress/reusable-blocks","@wordpress/route","@wordpress/router","@wordpress/routes","@wordpress/sync","@wordpress/theme","@wordpress/ui","@wordpress/dataviews","@wordpress/fields","@wordpress/lazy-editor","@wordpress/media-utils","@wordpress/upload-media","@wordpress/global-styles-ui","@wordpress/ui"],cr=(e,t)=>{if(!ir.includes(t))throw new Error(`You tried to opt-in to unstable APIs as module "${t}". This feature is only for JavaScript modules shipped with WordPress core. Please do not use it in plugins and themes as the unstable APIs will be removed without a warning. If you ignore this error and depend on unstable features, your product will inevitably break on one of the next WordPress releases.`);return{lock:ur,unlock:dr}};function ur(e,t){if(!e)throw new Error("Cannot lock an undefined object.");const n=e;Ne in n||(n[Ne]={}),Ht.set(n[Ne],t)}function dr(e){if(!e)throw new Error("Cannot unlock an undefined object.");const t=e;if(!(Ne in t))throw new Error("Cannot unlock an object that was not locked before. ");return Ht.get(t[Ne])}var Ht=new WeakMap,Ne=Symbol("Private API ID"),{lock:we,unlock:ke}=cr("I acknowledge private features are not for use in themes or plugins and doing so will break in the next version of WordPress.","@wordpress/data"),fr=()=>e=>t=>Dt(t)?t.then(n=>{if(n)return e(n)}):e(t),pr=fr,mr=(e,t)=>()=>n=>r=>{const s=e.select(t).getCachedResolvers();return Object.entries(s).forEach(([l,a])=>{const o=e.stores[t]?.resolvers?.[l];!o||!o.shouldInvalidate||a.forEach((u,d)=>{u!==void 0&&(u.status!=="finished"&&u.status!=="error"||o.shouldInvalidate(r,...d)&&e.dispatch(t).invalidateResolution(l,d))})}),n(r)},hr=mr;function yr(e){return()=>t=>n=>typeof n=="function"?n(e):t(n)}var gr=e=>t=>(n={},r)=>{const s=r[e];if(s===void 0)return n;const i=t(n[s],r);return i===n[s]?n:{...n,[s]:i}};function ge(e){if(e==null)return[];const t=e.length;let n=t;for(;n>0&&e[n-1]===void 0;)n--;return n===t?e:e.slice(0,n)}var br=gr("selectorName")((e=new he,t)=>{switch(t.type){case"START_RESOLUTION":{const n=new he(e);return n.set(ge(t.args),{status:"resolving"}),n}case"FINISH_RESOLUTION":{const n=new he(e);return n.set(ge(t.args),{status:"finished"}),n}case"FAIL_RESOLUTION":{const n=new he(e);return n.set(ge(t.args),{status:"error",error:t.error}),n}case"START_RESOLUTIONS":{const n=new he(e);for(const r of t.args)n.set(ge(r),{status:"resolving"});return n}case"FINISH_RESOLUTIONS":{const n=new he(e);for(const r of t.args)n.set(ge(r),{status:"finished"});return n}case"FAIL_RESOLUTIONS":{const n=new he(e);return t.args.forEach((r,s)=>{const i={status:"error",error:void 0},l=t.errors[s];l&&(i.error=l),n.set(ge(r),i)}),n}case"INVALIDATE_RESOLUTION":{const n=new he(e);return n.delete(ge(t.args)),n}}return e}),vr=(e={},t)=>{switch(t.type){case"INVALIDATE_RESOLUTION_FOR_STORE":return{};case"INVALIDATE_RESOLUTION_FOR_STORE_SELECTOR":{if(t.selectorName in e){const{[t.selectorName]:n,...r}=e;return r}return e}case"START_RESOLUTION":case"FINISH_RESOLUTION":case"FAIL_RESOLUTION":case"START_RESOLUTIONS":case"FINISH_RESOLUTIONS":case"FAIL_RESOLUTIONS":case"INVALIDATE_RESOLUTION":return br(e,t);default:return e}},Er=vr,Xe={};function wr(e){return[e]}function Sr(e){return!!e&&typeof e=="object"}function Rr(){var e={clear:function(){e.head=null}};return e}function qt(e,t,n){var r;if(e.length!==t.length)return!1;for(r=n;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function _r(e,t){var n,r=t||wr;function s(a){var o=n,u=!0,d,b,f,h;for(d=0;d<a.length;d++){if(b=a[d],!Sr(b)){u=!1;break}o.has(b)?o=o.get(b):(f=new WeakMap,o.set(b,f),o=f)}return o.has(Xe)||(h=Rr(),h.isUniqueByDependants=u,o.set(Xe,h)),o.get(Xe)}function i(){n=new WeakMap}function l(){var a=arguments.length,o,u,d,b,f;for(b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];for(f=r.apply(null,b),o=s(f),o.isUniqueByDependants||(o.lastDependants&&!qt(f,o.lastDependants,0)&&o.clear(),o.lastDependants=f),u=o.head;u;){if(!qt(u.args,b,1)){u=u.next;continue}return u!==o.head&&(u.prev.next=u.next,u.next&&(u.next.prev=u.prev),u.next=o.head,u.prev=null,o.head.prev=u,o.head=u),u.val}return u={val:e.apply(null,b)},b[0]=null,u.args=b,o.head&&(o.head.prev=u,u.next=o.head),o.head=u,u.val}return l.getDependants=r,l.clear=i,i(),l}function Se(e,t,n){const r=e[t];if(r)return r.get(ge(n))}function Cr(e,t,n){Et("wp.data.select( store ).getIsResolving",{since:"6.6",version:"6.8",alternative:"wp.data.select( store ).getResolutionState"});const r=Se(e,t,n);return r&&r.status==="resolving"}function kr(e,t,n){return Se(e,t,n)!==void 0}function Tr(e,t,n){const r=Se(e,t,n)?.status;return r==="finished"||r==="error"}function xr(e,t,n){return Se(e,t,n)?.status==="error"}function Nr(e,t,n){const r=Se(e,t,n);return r?.status==="error"?r.error:null}function Ir(e,t,n){return Se(e,t,n)?.status==="resolving"}function Lr(e){return e}function Mr(e){return Object.values(e).some(t=>Array.from(t._map.values()).some(n=>n[1]?.status==="resolving"))}var Fr=_r(e=>{const t={};return Object.values(e).forEach(n=>Array.from(n._map.values()).forEach(r=>{const s=r[1]?.status??"error";t[s]||(t[s]=0),t[s]++})),t},e=>[e]);const Pr=Object.freeze(Object.defineProperty({__proto__:null,countSelectorsByStatus:Fr,getCachedResolvers:Lr,getIsResolving:Cr,getResolutionError:Nr,getResolutionState:Se,hasFinishedResolution:Tr,hasResolutionFailed:xr,hasResolvingSelectors:Mr,hasStartedResolution:kr,isResolving:Ir},Symbol.toStringTag,{value:"Module"}));function zt(e,t){return{type:"START_RESOLUTION",selectorName:e,args:t}}function Kt(e,t){return{type:"FINISH_RESOLUTION",selectorName:e,args:t}}function Gt(e,t,n){return{type:"FAIL_RESOLUTION",selectorName:e,args:t,error:n}}function Or(e,t){return{type:"START_RESOLUTIONS",selectorName:e,args:t}}function Ar(e,t){return{type:"FINISH_RESOLUTIONS",selectorName:e,args:t}}function Vr(e,t,n){return{type:"FAIL_RESOLUTIONS",selectorName:e,args:t,errors:n}}function Dr(e,t){return{type:"INVALIDATE_RESOLUTION",selectorName:e,args:t}}function Br(){return{type:"INVALIDATE_RESOLUTION_FOR_STORE"}}function jr(e){return{type:"INVALIDATE_RESOLUTION_FOR_STORE_SELECTOR",selectorName:e}}const Wr=Object.freeze(Object.defineProperty({__proto__:null,failResolution:Gt,failResolutions:Vr,finishResolution:Kt,finishResolutions:Ar,invalidateResolution:Dr,invalidateResolutionForStore:Br,invalidateResolutionForStoreSelector:jr,startResolution:zt,startResolutions:Or},Symbol.toStringTag,{value:"Module"}));var Ye=e=>{const t=[...e];for(let n=t.length-1;n>=0;n--)t[n]===void 0&&t.splice(n,1);return t},be=(e,t)=>Object.fromEntries(Object.entries(e??{}).map(([n,r])=>[n,t(r,n)])),Ur=(e,t)=>t instanceof Map?Object.fromEntries(t):t instanceof window.HTMLElement?null:t;function Hr(){const e={};return{isRunning(t,n){return e[t]&&e[t].get(Ye(n))},clear(t,n){e[t]&&e[t].delete(Ye(n))},markAsRunning(t,n){e[t]||(e[t]=new he),e[t].set(Ye(n),!0)}}}function We(e,t){const n=new WeakMap;return{get(r){const s=e(r);if(!s)return null;let i=n.get(s);return i||(i=t(s,r),n.set(s,i)),i}}}function Ue(e,t){return new Proxy(e,{get:(n,r)=>t.get(r)||Reflect.get(n,r)})}function Zt(e,t){const n={},r={},s={privateActions:n,registerPrivateActions:l=>{Object.assign(n,l)},privateSelectors:r,registerPrivateSelectors:l=>{Object.assign(r,l)}},i={name:e,instantiate:l=>{const a=new Set,o=t.reducer,d=qr(e,t,l,{registry:l,get dispatch(){return k},get select(){return R},get resolveSelect(){return C}});we(d,s);const b=Hr();function f(F){return(...S)=>Promise.resolve(d.dispatch(F(...S)))}const h={...be(Wr,f),...be(t.actions,f)},v=Ue(h,We(F=>n[F],f)),k=new Proxy(F=>d.dispatch(F),{get:(F,S)=>v[S]});we(h,v);const E=t.resolvers?be(t.resolvers,Gr):{};function _(F,S){F.isRegistrySelector&&(F.registry=l);const B=(...Y)=>{Y=Qe(F,Y);const se=d.__unstableOriginalGetState();return F.isRegistrySelector&&(F.registry=l),F(se.root,...Y)};B.__unstableNormalizeArgs=F.__unstableNormalizeArgs;const U=E[S];return U?Zr(B,S,U,d,b,N):(B.hasResolver=!1,B)}function w(F){const S=(B,U,...Y)=>{if(B){const te=t.selectors?.[B];te&&(U=Qe(te,U))}const se=d.__unstableOriginalGetState();return F(se.metadata,B,U,...Y)};return S.hasResolver=!1,S}const N=be(Pr,w),T=be(t.selectors,_),y={...N,...T},p=We(F=>r[F],_),g=Ue(y,p);for(const F of Object.keys(r))p.get(F);const R=new Proxy(F=>F(d.__unstableOriginalGetState()),{get:(F,S)=>g[S]});we(y,g);const L=zr(d,N),C=be(T,L),O=Ue(C,We(F=>p.get(F),L));we(C,O);const A=Kr(d,N),I={...N,...be(T,A)},W=Ue(I,We(F=>p.get(F),A));we(I,W);const P=()=>y,H=()=>h,J=()=>C,Z=()=>I;d.__unstableOriginalGetState=d.getState,d.getState=()=>d.__unstableOriginalGetState().root;const Q=d&&(F=>(a.add(F),()=>a.delete(F)));let $=d.__unstableOriginalGetState();return d.subscribe(()=>{const F=d.__unstableOriginalGetState(),S=F!==$;if($=F,S)for(const B of a)B()}),{reducer:o,store:d,actions:h,selectors:y,resolvers:E,getSelectors:P,getResolveSelectors:J,getSuspendSelectors:Z,getActions:H,subscribe:Q}}};return we(i,s),i}function qr(e,t,n,r){const s={...t.controls,...or},i=be(s,b=>b.isRegistryControl?b(n):b),l=[hr(n,e),pr,Zn(i),yr(r)],a=[Fn(...l)];typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__&&a.push(window.__REDUX_DEVTOOLS_EXTENSION__({name:e,instanceId:e,serialize:{replacer:Ur}}));const{reducer:o,initialState:u}=t,d=rr({metadata:Er,root:o});return _t(d,{root:u},Yn(a))}function zr(e,t){return(n,r)=>n.hasResolver?(...s)=>new Promise((i,l)=>{const a=()=>t.hasFinishedResolution(r,s),o=f=>{if(t.hasResolutionFailed(r,s)){const v=t.getResolutionError(r,s);l(v)}else i(f)},u=()=>n.apply(null,s),d=u();if(a())return o(d);const b=e.subscribe(()=>{a()&&(b(),o(u()))})}):async(...s)=>n.apply(null,s)}function Kr(e,t){return(n,r)=>n.hasResolver?(...s)=>{const i=n.apply(null,s);if(t.hasFinishedResolution(r,s)){if(t.hasResolutionFailed(r,s))throw t.getResolutionError(r,s);return i}throw new Promise(l=>{const a=e.subscribe(()=>{t.hasFinishedResolution(r,s)&&(l(),a())})})}:n}function Gr(e){return e.fulfill?e:{...e,fulfill:e}}function Zr(e,t,n,r,s,i){function l(o){s.isRunning(t,o)||i.hasStartedResolution(t,o)||(s.markAsRunning(t,o),setTimeout(async()=>{s.clear(t,o),r.dispatch(zt(t,o));try{if(!(typeof n.isFulfilled=="function"&&n.isFulfilled(r.getState(),...o))){const d=n.fulfill(...o);d&&await r.dispatch(d)}r.dispatch(Kt(t,o))}catch(u){r.dispatch(Gt(t,o,u))}},0))}const a=(...o)=>(o=Qe(e,o),l(o),e(...o));return a.hasResolver=!0,a}function Qe(e,t){return e.__unstableNormalizeArgs&&typeof e.__unstableNormalizeArgs=="function"&&t?.length?e.__unstableNormalizeArgs(t):t}var Jr={name:"core/data",instantiate(e){const t=r=>(s,...i)=>e.select(s)[r](...i),n=r=>(s,...i)=>e.dispatch(s)[r](...i);return{getSelectors(){return Object.fromEntries(["getIsResolving","hasStartedResolution","hasFinishedResolution","isResolving","getCachedResolvers"].map(r=>[r,t(r)]))},getActions(){return Object.fromEntries(["startResolution","finishResolution","invalidateResolution","invalidateResolutionForStore","invalidateResolutionForStoreSelector"].map(r=>[r,n(r)]))},subscribe(){return()=>()=>{}}}}},Xr=Jr;function Jt(){let e=!1,t=!1;const n=new Set,r=()=>Array.from(n).forEach(s=>s());return{get isPaused(){return e},subscribe(s){return n.add(s),()=>n.delete(s)},pause(){e=!0},resume(){e=!1,t&&(t=!1,r())},emit(){if(e){t=!0;return}r()}}}function Ie(e){return typeof e=="string"?e:e.name}function Yr(e={},t=null){const n={},r=Jt();let s=null;function i(){r.emit()}const l=(y,p)=>{if(!p)return r.subscribe(y);const g=Ie(p),R=n[g];return R?R.subscribe(y):t?t.subscribe(y,p):r.subscribe(y)};function a(y){const p=Ie(y);s?.add(p);const g=n[p];return g?g.getSelectors():t?.select(p)}function o(y,p){s=new Set;try{return y.call(this)}finally{p.current=Array.from(s),s=null}}function u(y){const p=Ie(y);s?.add(p);const g=n[p];return g?g.getResolveSelectors():t&&t.resolveSelect(p)}function d(y){const p=Ie(y);s?.add(p);const g=n[p];return g?g.getSuspendSelectors():t&&t.suspendSelect(p)}function b(y){const p=Ie(y),g=n[p];return g?g.getActions():t&&t.dispatch(p)}function f(y){return Object.fromEntries(Object.entries(y).map(([p,g])=>typeof g!="function"?[p,g]:[p,function(){return w[p].apply(null,arguments)}]))}function h(y,p){if(n[y])return console.error('Store "'+y+'" is already registered.'),n[y];const g=p();if(typeof g.getSelectors!="function")throw new TypeError("store.getSelectors must be a function");if(typeof g.getActions!="function")throw new TypeError("store.getActions must be a function");if(typeof g.subscribe!="function")throw new TypeError("store.subscribe must be a function");g.emitter=Jt();const R=g.subscribe;if(g.subscribe=L=>{const C=g.emitter.subscribe(L),O=R(()=>{if(g.emitter.isPaused){g.emitter.emit();return}L()});return()=>{O?.(),C?.()}},n[y]=g,g.subscribe(i),t)try{ke(g.store).registerPrivateActions(ke(t).privateActionsOf(y)),ke(g.store).registerPrivateSelectors(ke(t).privateSelectorsOf(y))}catch{}return g}function v(y){h(y.name,()=>y.instantiate(w))}function k(y,p){Et("wp.data.registerGenericStore",{since:"5.9",alternative:"wp.data.register( storeDescriptor )"}),h(y,()=>p)}function E(y,p){if(!p.reducer)throw new TypeError("Must specify store reducer");return h(y,()=>Zt(y,p).instantiate(w)).store}function _(y){if(r.isPaused){y();return}r.pause(),Object.values(n).forEach(p=>p.emitter.pause());try{y()}finally{r.resume(),Object.values(n).forEach(p=>p.emitter.resume())}}let w={batch:_,stores:n,namespaces:n,subscribe:l,select:a,resolveSelect:u,suspendSelect:d,dispatch:b,use:N,register:v,registerGenericStore:k,registerStore:E,__unstableMarkListeningStores:o};function N(y,p){if(y)return w={...w,...y(w,p)},w}w.register(Xr);for(const[y,p]of Object.entries(e))w.register(Zt(y,p));t&&t.subscribe(i);const T=f(w);return we(T,{privateActionsOf:y=>{try{return ke(n[y].store).privateActions}catch{return{}}},privateSelectorsOf:y=>{try{return ke(n[y].store).privateSelectors}catch{return{}}}}),T}var Xt=Yr(),$e=c.createContext(Xt);$e.displayName="RegistryProviderContext";var{Consumer:bl,Provider:vl}=$e;function Yt(){return c.useContext($e)}var et=c.createContext(!1);et.displayName="AsyncModeContext";var{Consumer:El,Provider:wl}=et;function Qr(){return c.useContext(et)}var tt=nr();function $r(e,t){if(!e||!t)return;const n=typeof e=="object"&&typeof t=="object"?Object.keys(e).filter(r=>e[r]!==t[r]):[];console.warn(`The \`useSelect\` hook returns different values when called with the same state and parameters.
This can lead to unnecessary re-renders and performance issues if not fixed.

Non-equal value keys: %s

`,n.join(", "))}function es(e,t){const n=e.select,r={};let s,i,l=!1,a,o,u;const d=new Map;function b(h){return e.stores[h]?.store?.getState?.()??{}}const f=h=>{const v=[...h],k=new Set;function E(w){if(l)for(const g of v)d.get(g)!==b(g)&&(l=!1);d.clear();const N=()=>{l=!1,w()},T=()=>{a?tt.add(r,N):N()},y=[];function p(g){y.push(e.subscribe(T,g))}for(const g of v)p(g);return k.add(p),()=>{k.delete(p);for(const g of y.values())g?.();tt.cancel(r)}}function _(w){for(const N of w)if(!v.includes(N)){v.push(N);for(const T of k)T(N)}}return{subscribe:E,updateStores:_}};return(h,v)=>{function k(){if(l&&h===s)return i;const _={current:null},w=e.__unstableMarkListeningStores(()=>h(n,e),_);if(globalThis.SCRIPT_DEBUG&&!u){const N=h(n,e);jt(w,N)||($r(w,N),u=!0)}if(o)o.updateStores(_.current);else{for(const N of _.current)d.set(N,b(N));o=f(_.current)}jt(i,w)||(i=w),s=h,l=!0}function E(){return k(),i}return a&&!v&&(l=!1,tt.cancel(r)),k(),a=v,{subscribe:o.subscribe,getValue:E}}}function ts(e){return Yt().select(e)}function ns(e,t,n){const r=Yt(),s=Qr(),i=c.useMemo(()=>es(r),[r,e]),l=c.useCallback(t,n),{subscribe:a,getValue:o}=i(l,s),u=c.useSyncExternalStore(a,o,o);return c.useDebugValue(u),u}function Qt(e,t){const n=typeof e!="function",r=c.useRef(n);if(n!==r.current){const s=r.current?"static":"mapping",i=n?"static":"mapping";throw new Error(`Switching useSelect from ${s} to ${i} is not allowed`)}return n?ts(e):ns(!1,e,t)}var nt=Xt;nt.registerGenericStore,nt.registerStore,nt.use;function rt(){if(typeof window<"u"&&window.wpApiSettings?.root)return window.wpApiSettings.root;if(typeof document<"u"){const e=document.querySelector('link[rel="https://api.w.org/"]');if(e){const t=e.getAttribute("href");if(t)return t}}if(typeof window<"u"&&window.location?.origin){const e=window.location.pathname.split("/").filter(Boolean),t=["wp-admin","wp-content","wp-includes","wp-json"];return e.length>0&&!t.includes(e[0])?window.location.origin+"/"+e[0]+"/wp-json/":window.location.origin+"/wp-json/"}return"/wp-json/"}function rs({attributes:e,postTypes:t,context:n,onSubmit:r,onPostTypeChange:s,onFilterChange:i}){const[l,a]=c.useState(()=>({currentPostType:e.postTypes[0]||"",filterValues:{},activeFilterCount:0,portalActive:!1,loading:!1,resetting:!1,narrowedValues:null,narrowingFilters:!1,lastModifiedFilter:null})),o=c.useRef(!1),u=c.useRef(!1),d=c.useRef(null),b=c.useMemo(()=>t.find(y=>y.key===l.currentPostType),[t,l.currentPostType]),f=c.useMemo(()=>e.filterLists[l.currentPostType]||[],[e.filterLists,l.currentPostType]);c.useEffect(()=>{e.postTypes.length>0&&!e.postTypes.includes(l.currentPostType)&&a(y=>({...y,currentPostType:e.postTypes[0],filterValues:{}}))},[e.postTypes,l.currentPostType]),c.useEffect(()=>{if(!b?.filters)return;const y={};let p=!1;b.filters.forEach(g=>{g.key in l.filterValues||g.value!==null&&g.value!==void 0&&(y[g.key]=g.value,p=!0)}),p&&a(g=>({...g,filterValues:{...g.filterValues,...y}}))},[b?.filters,l.currentPostType]),c.useEffect(()=>{if(n!=="editor"||l.resetting||!b?.filters)return;(e.filterLists?.[l.currentPostType]||[]).forEach(p=>{const g=l.filterValues[p.filterKey];p.defaultValueEnabled&&p.defaultValue!==void 0&&p.defaultValue!==""&&p.defaultValue!==null?g!==p.defaultValue&&g!==null&&a(R=>({...R,filterValues:{...R.filterValues,[p.filterKey]:p.defaultValue}})):g!=null&&a(R=>({...R,filterValues:{...R.filterValues,[p.filterKey]:void 0}}))})},[n,l.currentPostType,e.filterLists,l.resetting,b?.filters]),c.useEffect(()=>{const y=Object.values(l.filterValues).filter(p=>p!=null&&p!==""&&p!==!1).length;a(p=>({...p,activeFilterCount:y}))},[l.filterValues]);const h=c.useCallback(y=>{a(p=>p.currentPostType===y?p:{...p,currentPostType:y,filterValues:{}}),n==="editor"&&s&&s(y),n==="editor"&&i&&i({}),n==="frontend"&&window.dispatchEvent(new CustomEvent("voxel-search-form-post-type-changed",{detail:{searchFormId:e.blockId,postType:y}})),n==="frontend"&&r&&e.onSubmit==="feed"?(u.current&&e.updateUrl!==!1&&$t({},y),u.current=!0,setTimeout(()=>{r({postType:y})},50)):n==="frontend"&&(u.current=!0)},[n,r,s,i,e.updateUrl,e.onSubmit]),v=c.useCallback((y,p)=>{u.current=!0,a(g=>{const R={...g.filterValues,[y]:p};return n==="editor"&&i&&setTimeout(()=>i(R),0),{...g,filterValues:R,lastModifiedFilter:y}})},[n,i]),k=c.useCallback((y=!1)=>{const p={};b?.filters?.forEach(R=>{R.resets_to!==null&&R.resets_to!==void 0?p[R.key]=R.resets_to:p[R.key]=null});const g=Object.values(p).filter(R=>R!=null&&R!=="").length;if(a(R=>({...R,filterValues:p,activeFilterCount:g,resetting:!0,portalActive:y?!1:R.portalActive,narrowedValues:null,lastModifiedFilter:null})),setTimeout(()=>{a(R=>({...R,resetting:!1}))},100),n==="editor"&&i&&i(p),n==="frontend"){e.onSubmit==="feed"&&e.updateUrl!==!1&&ss(l.currentPostType);const R=new CustomEvent("voxel-search-clear",{detail:{postType:l.currentPostType}});window.dispatchEvent(R)}},[n,l.currentPostType,i,e.updateUrl,e.onSubmit,b?.filters]),E=c.useCallback(()=>{a(y=>({...y,portalActive:!y.portalActive}))},[]),_=c.useCallback(async()=>{if(!e.adaptiveFiltering||n!=="frontend")return;if(o.current){o.current=!1;return}const y=f.filter(R=>R.type==="range"||R.type==="terms");if(y.length===0)return;const p=new URLSearchParams;p.set("type",l.currentPostType),l.lastModifiedFilter&&p.set("_last_modified",l.lastModifiedFilter),Object.entries(l.filterValues).forEach(([R,L])=>{L!=null&&L!==""&&(Array.isArray(L)?p.set(R,L.join(",")):typeof L=="object"?p.set(R,JSON.stringify(L)):p.set(R,String(L)))});const g=[];y.forEach(R=>{if(R.type==="terms"){const L=b?.filters?.find(C=>C.key===R.filterKey);if(L?.props?.terms){const C=O=>{O.forEach(A=>{A.term_taxonomy_id&&g.push(A.term_taxonomy_id),A.children&&Array.isArray(A.children)&&C(A.children)})};C(L.props.terms)}}}),a(R=>({...R,narrowingFilters:!0}));try{const R=rt(),L=await fetch(`${R}voxel-fse/v1/search-form/narrow-filters?${p.toString()}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({term_taxonomy_ids:g})});if(!L.ok)throw new Error(`HTTP ${L.status}`);const C=await L.json();C.success&&C.data?(a(O=>({...O,narrowedValues:{ranges:C.data.ranges||{},terms:C.data.terms||{}},narrowingFilters:!1})),o.current=!0):a(O=>({...O,narrowingFilters:!1}))}catch(R){console.error("[useSearchForm] Adaptive filtering error:",R),a(L=>({...L,narrowingFilters:!1}))}},[e.adaptiveFiltering,n,f,l.currentPostType,l.filterValues,b]);c.useEffect(()=>{if(!(!e.adaptiveFiltering||n!=="frontend"))return d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{_()},300),()=>{d.current&&clearTimeout(d.current)}},[l.filterValues,e.adaptiveFiltering,n,_]);const w=c.useCallback((y,p)=>{a(R=>({...R,loading:!0})),r&&r({postType:p,...y});const g=e.onSubmit==="feed"&&e.updateUrl!==!1;n==="frontend"&&g&&u.current&&$t(y,p),a(R=>({...R,loading:!1}))},[n,r,e.updateUrl,e.onSubmit]),N=c.useRef(null);c.useEffect(()=>{if(e.searchOn==="change"&&e.onSubmit==="feed"&&n==="frontend"){const y=JSON.stringify({type:l.currentPostType,filters:l.filterValues});if(N.current===y)return;if(N.current===null){N.current=y;return}N.current=y;const p=setTimeout(()=>{w(l.filterValues,l.currentPostType)},300);return()=>{clearTimeout(p)}}},[l.filterValues,l.currentPostType,e.searchOn,e.onSubmit,n,w]),c.useEffect(()=>{if(n!=="frontend")return;const y=g=>{g.detail?.searchFormId===e.blockId&&u.current&&a(L=>({...L,loading:!0}))},p=g=>{g.detail?.searchFormId===e.blockId&&a(L=>({...L,loading:!1}))};return window.addEventListener("voxel-fse:feed-loading",y),window.addEventListener("voxel-fse:feed-loaded",p),()=>{window.removeEventListener("voxel-fse:feed-loading",y),window.removeEventListener("voxel-fse:feed-loaded",p)}},[n,e.blockId]);const T=c.useCallback(()=>{u.current=!0,w(l.filterValues,l.currentPostType)},[w,l.filterValues,l.currentPostType]);return{state:l,setCurrentPostType:h,setFilterValue:v,clearAll:k,togglePortal:E,submit:T,currentPostTypeConfig:b,filterConfigs:f,narrowedValues:l.narrowedValues,narrowingFilters:l.narrowingFilters}}function ss(e){const t=new URL(window.location.href),n=[];t.searchParams.forEach((r,s)=>{(s.startsWith("filter_")||s==="post_type")&&n.push(s),s==="type"&&!e&&n.push(s),s!=="type"&&s!=="page"&&s!=="pg"&&n.push(s)}),n.forEach(r=>t.searchParams.delete(r)),e&&t.searchParams.set("type",e),window.history.replaceState({},"",t.toString())}function ls(e,t){return Object.prototype.hasOwnProperty.call(t,e)}function $t(e,t){const n=new URL(window.location.href),r=[];n.searchParams.forEach((s,i)=>{(i.startsWith("filter_")||i==="post_type")&&r.push(i),(i==="type"||ls(i,e))&&r.push(i)}),r.forEach(s=>n.searchParams.delete(s)),t&&n.searchParams.set("type",t),Object.entries(e).forEach(([s,i])=>{if(!(i==null||i==="")&&!(typeof i=="string"&&i==="..")&&!(typeof i=="object"&&!Array.isArray(i)&&!Object.values(i).some(o=>o!=null&&o!=="")))if(Array.isArray(i)){const l=i.join(",");l&&n.searchParams.set(s,l)}else typeof i=="object"?n.searchParams.set(s,JSON.stringify(i)):n.searchParams.set(s,String(i))}),window.history.replaceState({},"",n.toString())}function st(e){return typeof e=="string"&&e.includes("@tags()")}function en(e){if(!st(e))return e;const t=e.match(/@tags\(\)(.*?)@endtags\(\)/s);return t?t[1]:e}async function tn(e,t={}){try{return(await mn({path:"/voxel-fse/v1/dynamic-data/render",method:"POST",data:{expression:e,context:t}})).rendered}catch(n){return console.error("Failed to render dynamic tag:",n),e}}function lt(){return typeof document>"u"?!1:document.body.classList.contains("logged-in")}function as(){return typeof document>"u"?[]:Array.from(document.body.classList).filter(n=>n.startsWith("role-")||["administrator","editor","author","contributor","subscriber"].includes(n)).map(n=>n.replace("role-",""))}function os(e){const t=e.filterKey;switch(t){case"user:logged_in":return lt();case"user:logged_out":return!lt();case"user:role":{if(!lt())return!1;const n=as(),r=e.value||"";switch(e.operator){case"equals":return n.includes(r);case"not_equals":return!n.includes(r);default:return n.includes(r)}}default:return console.warn(`Unknown visibility rule type: ${t}`),!0}}function is(e){return!e||e.length===0?!0:e.every(t=>os(t))}function cs(e){const{rowVisibility:t="show",visibilityRules:n=[]}=e;if(!n||n.length===0)return!0;const r=is(n);return t==="hide"?!r:r}function us(e){const t=e||(typeof window<"u"?window.wp?.data?.select:null);if(!t)return"desktop";const n=t("core/editor");if(n&&typeof n.getDeviceType=="function"){const i=n.getDeviceType();if(i)return i.toLowerCase()}const r=t("core/edit-site");if(r&&typeof r.getDeviceType=="function"){const i=r.getDeviceType();if(i)return i.toLowerCase()}const s=t("core/edit-post");if(s&&typeof s.getDeviceType=="function"){const i=s.getDeviceType();if(i)return i.toLowerCase()}return"desktop"}function ds(){return Qt(e=>us(e),[])}function de({isOpen:e,target:t,title:n="",icon:r,saveLabel:s="Save",clearLabel:i="Clear",showClear:l=!0,showSave:a=!0,onSave:o,onClear:u,onClose:d,children:b,className:f="",popupStyle:h}){const v=ds(),k=v==="mobile"||v==="tablet",E=c.useRef(null),_=c.useRef(null),[w,N]=c.useState({position:"absolute",top:"-9999px",left:"-9999px"}),T=c.useRef(""),y=c.useCallback((A=!1)=>{if(k||!_.current||!t.current||!E.current)return;const I=t.current,W=E.current,P=_.current,H=document.querySelector('iframe[name="editor-canvas"]'),J=!!H;let Z=0,Q=0;if(J&&H){const ie=H.getBoundingClientRect();Z=ie.top,Q=ie.left}const $=J?H?.contentDocument?.documentElement.clientWidth??document.body.clientWidth:document.body.clientWidth,F=I.getBoundingClientRect(),S=I.offsetWidth,B=window.pageXOffset||document.documentElement.scrollLeft,U=window.pageYOffset||document.documentElement.scrollTop,Y={left:F.left+B+Q,top:F.top+U+Z},se=W.getBoundingClientRect(),te=window.getComputedStyle(P),le=parseFloat(te.minWidth)||0,ae=P.querySelector(".pika-single");let q;if(ae){const ie=ae.classList.contains("is-range")||ae.querySelectorAll(".pika-lendar").length>1||P.closest(".ts-booking-date-range")!==null;q=Math.max(ie?640:420,le)}else q=Math.max(F.width,le);const m=Y.left+S/2,M=($+Q)/2;let x;m>M+1?x=Y.left-q+S:x=Y.left;const V=window.innerHeight,K=se.height;let X=Y.top+F.height;const D=F.bottom+Z,G=F.top+Z,j=D+K>V,ee=G-K>=0;j&&ee&&(X=Y.top-K);const z={top:`${X}px`,left:`${x}px`,width:`${q}px`,position:"absolute"},oe=JSON.stringify(z);oe!==T.current&&(T.current=oe,A?N(z):requestAnimationFrame(()=>N(z)))},[t,k]),p=!!document.querySelector('iframe[name="editor-canvas"]');if(c.useEffect(()=>{if(!e)return;const A=document.querySelector('iframe[name="editor-canvas"]'),I=A?.contentDocument,W=J=>{const Z=J.target;if(!_.current?.contains(Z)&&!(t.current&&t.current.contains(Z))){if(A){const Q=[".interface-interface-skeleton__sidebar",".block-editor-block-inspector",".components-popover",".components-modal__screen-overlay",".edit-post-sidebar",".interface-interface-skeleton__header",".interface-interface-skeleton__secondary-sidebar"];for(const $ of Q)if(Z.closest($))return}d()}},P=J=>{const Z=J.target;t.current&&t.current.contains(Z)||d()},H=requestAnimationFrame(()=>{document.addEventListener("mousedown",W),A&&I?.addEventListener("mousedown",P)});return()=>{cancelAnimationFrame(H),document.removeEventListener("mousedown",W),I?.removeEventListener("mousedown",P)}},[e,d]),c.useEffect(()=>{if(!e)return;const A=I=>{I.key==="Escape"&&d()};return document.addEventListener("keydown",A),()=>document.removeEventListener("keydown",A)},[e,d]),c.useEffect(()=>{if(!e)return;y(!0);const A=()=>y();window.addEventListener("scroll",A,!0);const I=()=>y();window.addEventListener("resize",I,!0);let W=null;return _.current&&(W=new ResizeObserver(()=>y(!0)),W.observe(_.current)),()=>{window.removeEventListener("scroll",A,!0),window.removeEventListener("resize",I,!0),W?.disconnect()}},[e,y]),!e)return null;const g=()=>React.createElement("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M14 1.41L12.59 0L7 5.59L1.41 0L0 1.41L5.59 7L0 12.59L1.41 14L7 8.41L12.59 14L14 12.59L8.41 7L14 1.41Z",fill:"currentColor"})),R=()=>React.createElement("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z",fill:"currentColor"})),L=document.querySelector('iframe[name="editor-canvas"]'),C=k&&L?.contentDocument?.body?L.contentDocument.body:document.body,O=k?{}:w;return Fe.createPortal(React.createElement("div",{className:`elementor vx-popup ${f}`.trim()},p&&!k&&React.createElement("style",null,".vx-popup .ts-popup-root > div::after { pointer-events: none !important; }"),React.createElement("div",{className:"ts-popup-root elementor-element"},React.createElement("div",{className:"ts-form elementor-element",style:O,ref:E},React.createElement("div",{className:"ts-field-popup-container"},React.createElement("div",{className:"ts-field-popup triggers-blur",ref:_,style:h},n&&React.createElement("div",{className:"ts-popup-head flexify ts-sticky-top"},React.createElement("div",{className:"ts-popup-name flexify"},r&&React.createElement("span",{dangerouslySetInnerHTML:{__html:r}}),React.createElement("span",null,n)),React.createElement("ul",{className:"flexify simplify-ul"},React.createElement("li",{className:"flexify ts-popup-close"},React.createElement("a",{href:"#",onClick:A=>{A.preventDefault(),d()},className:"ts-icon-btn","aria-label":"Close"},React.createElement(g,null))))),React.createElement("div",{className:"ts-popup-content-wrapper min-scroll"},b),a||l?React.createElement("div",{className:"ts-popup-controller"},React.createElement("ul",{className:"flexify simplify-ul"},React.createElement("li",{className:"flexify ts-popup-close"},React.createElement("a",{href:"#",onClick:A=>{A.preventDefault(),d()},className:"ts-icon-btn","aria-label":"Close"},React.createElement(g,null))),l&&u&&React.createElement("li",{className:"flexify hide-d",onClick:A=>{A.preventDefault(),u()}},React.createElement("a",{href:"#",className:"ts-icon-btn"},React.createElement(R,null))),l&&u&&React.createElement("li",{className:"flexify hide-m",onClick:A=>{A.preventDefault(),u()}},React.createElement("a",{href:"#",className:"ts-btn ts-btn-1"},i)),a&&React.createElement("li",{className:"flexify"},React.createElement("a",{href:"#",onClick:A=>{A.preventDefault(),o()},className:"ts-btn ts-btn-2"},s)))):React.createElement("div",{className:"ts-popup-controller hide-d"},React.createElement("ul",{className:"flexify simplify-ul"},React.createElement("li",{className:"flexify ts-popup-close"},React.createElement("a",{href:"#",onClick:A=>{A.preventDefault(),d()},className:"ts-icon-btn","aria-label":"Close"},React.createElement(g,null)))))))))),C)}const at=({value:e,onChange:t,onSelect:n,pickerConfig:r,onPickerReady:s})=>{const i=c.useRef(null),l=c.useRef(null),a=c.useRef(null),o=c.useRef(t),u=c.useRef(n);o.current=t,u.current=n,c.useEffect(()=>{if(!i.current||!l.current)return;const b=window.Pikaday;if(!b){console.error("Pikaday not loaded - window.Pikaday is undefined");return}const f=requestAnimationFrame(()=>{a.current=new b({field:l.current,container:i.current,bound:!1,firstDay:1,keyboardInput:!1,defaultDate:e||void 0,onSelect:h=>{o.current(h),u.current&&u.current(h)},...r}),s&&a.current&&s(a.current)});return()=>{cancelAnimationFrame(f),setTimeout(()=>{a.current?.destroy(),a.current=null},200)}},[]),c.useEffect(()=>{a.current&&(e&&a.current.setDate(e,!0),a.current.draw(!0))},[e]);const d=r?.numberOfMonths>=2;return c.createElement("div",{className:`ts-booking-date ts-form-group${d?" ts-booking-date-range":""}`,ref:i},c.createElement("input",{type:"hidden",ref:l}))};function ot(e,t,n){if(!e||!e.library||!e.value)return t??null;const{library:r,value:s}=e;return r==="icon"?React.createElement("i",{className:s,"aria-hidden":"true"}):r==="svg"?React.createElement("img",{src:s,alt:"",className:n,style:{width:"1em",height:"1em"}}):t??null}const fe={search:React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},React.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.25 2.75C6.14154 2.75 2 6.89029 2 11.998C2 17.1056 6.14154 21.2459 11.25 21.2459C13.5335 21.2459 15.6238 20.4187 17.2373 19.0475L20.7182 22.5287C21.011 22.8216 21.4859 22.8217 21.7788 22.5288C22.0717 22.2359 22.0718 21.761 21.7789 21.4681L18.2983 17.9872C19.6714 16.3736 20.5 14.2826 20.5 11.998C20.5 6.89029 16.3585 2.75 11.25 2.75ZM3.5 11.998C3.5 7.71905 6.96962 4.25 11.25 4.25C15.5304 4.25 19 7.71905 19 11.998C19 16.2769 15.5304 19.7459 11.25 19.7459C6.96962 19.7459 3.5 16.2769 3.5 11.998Z",fill:"#343C54"})),close:React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},React.createElement("path",{d:"M5.9545 5.95548C6.39384 5.51614 7.10616 5.51614 7.5455 5.95548L11.999 10.409L16.4524 5.95561C16.8918 5.51627 17.6041 5.51627 18.0434 5.95561C18.4827 6.39495 18.4827 7.10726 18.0434 7.5466L13.59 12L18.0434 16.4534C18.4827 16.8927 18.4827 17.605 18.0434 18.0444C17.6041 18.4837 16.8918 18.4837 16.4524 18.0444L11.999 13.591L7.5455 18.0445C7.10616 18.4839 6.39384 18.4839 5.9545 18.0445C5.51517 17.6052 5.51516 16.8929 5.9545 16.4535L10.408 12L5.9545 7.54647C5.51516 7.10713 5.51517 6.39482 5.9545 5.95548Z",fill:"#343C54"})),reload:React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},React.createElement("path",{d:"M21.6009 10.4593C22.001 10.3521 22.2384 9.94088 22.1312 9.54078C21.59 7.52089 20.3974 5.73603 18.7384 4.46302C17.0793 3.19001 15.0466 2.5 12.9555 2.5C10.8644 2.5 8.83164 3.19001 7.17262 4.46302C6.12405 5.26762 5.26179 6.2767 4.63257 7.42036L2.86504 6.92617C2.76093 6.89707 2.65423 6.89133 2.55153 6.9068C2.46222 6.91962 2.37374 6.94889 2.29039 6.99582C1.92945 7.19903 1.80158 7.65636 2.00479 8.0173L3.73942 11.0983C3.83701 11.2717 3.99946 11.3991 4.19104 11.4527C4.30333 11.4841 4.42023 11.4886 4.53266 11.4673C4.61373 11.4524 4.69254 11.4242 4.7657 11.383L7.84641 9.64831C8.11073 9.49948 8.25936 9.20608 8.22302 8.90493C8.18668 8.60378 7.9725 8.35417 7.68037 8.27249L6.1241 7.83737C6.6343 6.99996 7.29751 6.2579 8.08577 5.65305C9.48282 4.58106 11.1946 4 12.9555 4C14.7164 4 16.4282 4.58106 17.8252 5.65305C19.2223 6.72504 20.2266 8.22807 20.6823 9.92901C20.7895 10.3291 21.2008 10.5665 21.6009 10.4593Z",fill:"#343C54"}),React.createElement("path",{d:"M4.30739 13.5387C3.90729 13.6459 3.66985 14.0572 3.77706 14.4573C4.31829 16.4771 5.51089 18.262 7.16991 19.535C8.82892 20.808 10.8616 21.498 12.9528 21.498C15.0439 21.498 17.0766 20.808 18.7356 19.535C19.7859 18.7291 20.6493 17.7181 21.2787 16.5722L23.0083 17.0557C23.1218 17.0961 23.2447 17.1091 23.3661 17.0917C23.5554 17.0658 23.7319 16.968 23.8546 16.8116C24.0419 16.573 24.0669 16.245 23.9181 15.9807L22.1835 12.8996C22.0859 12.7263 21.9234 12.5988 21.7319 12.5453C21.64 12.5196 21.5451 12.5119 21.4521 12.5216C21.3493 12.5317 21.2488 12.5629 21.1571 12.6146L18.0764 14.3493C17.7155 14.5525 17.5876 15.0099 17.7909 15.3708C17.9016 15.5675 18.0879 15.695 18.2929 15.7373L19.7875 16.1552C19.2768 16.9949 18.6125 17.7388 17.8225 18.345C16.4255 19.417 14.7137 19.998 12.9528 19.998C11.1918 19.998 9.4801 19.417 8.08305 18.345C6.686 17.273 5.68171 15.77 5.22595 14.069C5.11874 13.6689 4.70749 13.4315 4.30739 13.5387Z",fill:"#343C54"})),filterslider:React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},React.createElement("path",{d:"M8.89789 3.25C10.3318 3.25 11.5358 4.23471 11.8704 5.56481H20.3125C20.7267 5.56481 21.0625 5.90059 21.0625 6.31481C21.0625 6.72902 20.7267 7.06481 20.3125 7.06481H11.8705C11.536 8.3951 10.332 9.38 8.89789 9.38C7.46381 9.38 6.25976 8.3951 5.92527 7.06481H4.3125C3.89829 7.06481 3.5625 6.72902 3.5625 6.31481C3.5625 5.90059 3.89829 5.56481 4.3125 5.56481H5.92537C6.26 4.23471 7.46395 3.25 8.89789 3.25Z",fill:"#343C54"}),React.createElement("path",{d:"M12.737 12.7503H4.3125C3.89829 12.7503 3.5625 12.4145 3.5625 12.0003C3.5625 11.5861 3.89829 11.2503 4.3125 11.2503H12.7369C13.0714 9.91998 14.2754 8.93506 15.7095 8.93506C17.1436 8.93506 18.3477 9.91998 18.6822 11.2503H20.3125C20.7267 11.2503 21.0625 11.5861 21.0625 12.0003C21.0625 12.4145 20.7267 12.7503 20.3125 12.7503H18.682C18.3474 14.0804 17.1435 15.0651 15.7095 15.0651C14.2756 15.0651 13.0717 14.0804 12.737 12.7503Z",fill:"#343C54"}),React.createElement("path",{d:"M12.5932 16.9354C12.2587 15.605 11.0546 14.6201 9.62055 14.6201C8.18645 14.6201 6.9824 15.605 6.64792 16.9354H4.3125C3.89829 16.9354 3.5625 17.2711 3.5625 17.6854C3.5625 18.0996 3.89829 18.4354 4.3125 18.4354H6.64804C6.98268 19.7654 8.18662 20.7501 9.62055 20.7501C11.0545 20.7501 12.2584 19.7654 12.5931 18.4354H20.3125C20.7267 18.4354 21.0625 18.0996 21.0625 17.6854C21.0625 17.2711 20.7267 16.9354 20.3125 16.9354H12.5932Z",fill:"#343C54"})),marker:React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C7.58172 2 4 5.58172 4 10C4 12.9646 5.43348 15.8125 7.5 18C9.16667 19.7708 11 21 12 21C13 21 14.8333 19.7708 16.5 18C18.5665 15.8125 20 12.9646 20 10C20 5.58172 16.4183 2 12 2ZM12 13C13.6569 13 15 11.6569 15 10C15 8.34315 13.6569 7 12 7C10.3431 7 9 8.34315 9 10C9 11.6569 10.3431 13 12 13Z",fill:"#343C54"})),crosshairs:React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C12.5523 2 13 2.44772 13 3V4.06189C16.6187 4.51314 19.4869 7.38128 19.9381 11H21C21.5523 11 22 11.4477 22 12C22 12.5523 21.5523 13 21 13H19.9381C19.4869 16.6187 16.6187 19.4869 13 19.9381V21C13 21.5523 12.5523 22 12 22C11.4477 22 11 21.5523 11 21V19.9381C7.38128 19.4869 4.51314 16.6187 4.06189 13H3C2.44772 13 2 12.5523 2 12C2 11.4477 2.44772 11 3 11H4.06189C4.51314 7.38128 7.38128 4.51314 11 4.06189V3C11 2.44772 11.4477 2 12 2ZM6.07089 11C6.50618 8.48991 8.48991 6.50618 11 6.07089V8C11 8.55228 11.4477 9 12 9C12.5523 9 13 8.55228 13 8V6.07089C15.5101 6.50618 17.4938 8.48991 17.9291 11H16C15.4477 11 15 11.4477 15 12C15 12.5523 15.4477 13 16 13H17.9291C17.4938 15.5101 15.5101 17.4938 13 17.9291V16C13 15.4477 12.5523 15 12 15C11.4477 15 11 15.4477 11 16V17.9291C8.48991 17.4938 6.50618 15.5101 6.07089 13H8C8.55228 13 9 12.5523 9 12C9 11.4477 8.55228 11 8 11H6.07089Z",fill:"#343C54"})),grid:React.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("rect",{x:"3",y:"3",width:"5",height:"5",rx:"1",fill:"currentColor"}),React.createElement("rect",{x:"10",y:"3",width:"5",height:"5",rx:"1",fill:"currentColor"}),React.createElement("rect",{x:"17",y:"3",width:"5",height:"5",rx:"1",fill:"currentColor"}),React.createElement("rect",{x:"3",y:"10",width:"5",height:"5",rx:"1",fill:"currentColor"}),React.createElement("rect",{x:"10",y:"10",width:"5",height:"5",rx:"1",fill:"currentColor"}),React.createElement("rect",{x:"17",y:"10",width:"5",height:"5",rx:"1",fill:"currentColor"}),React.createElement("rect",{x:"3",y:"17",width:"5",height:"5",rx:"1",fill:"currentColor"}),React.createElement("rect",{x:"10",y:"17",width:"5",height:"5",rx:"1",fill:"currentColor"}),React.createElement("rect",{x:"17",y:"17",width:"5",height:"5",rx:"1",fill:"currentColor"}))};function fs(e,t){const n={},r=[t];return e.width&&e.width>0&&(n.width=`${e.width}%`,n.flexGrow=0,n.flexShrink=0),e.hideFilter&&r.push("vx-hidden"),e.alignContent&&(n.justifyContent=e.alignContent),e.hideLabel&&r.push("hide-label"),{style:n,className:r.join(" ")}}function ne(e,t){return fs(e,t)}function pe(e){const t={},n=["ts-field-popup","triggers-blur"];return e.customPopupEnabled&&(e.popupMinWidth&&e.popupMinWidth>0&&(t.minWidth=`${e.popupMinWidth}px`),e.popupMaxWidth&&e.popupMaxWidth>0&&(t.maxWidth=`${e.popupMaxWidth}px`),e.popupMaxHeight&&e.popupMaxHeight>0&&(t.maxHeight=`${e.popupMaxHeight}px`),e.popupCenterPosition&&n.push("ts-popup-centered")),{style:t,className:n.join(" ")}}let nn=!1;function it(){if(nn)return!0;if(!window.Voxel?.mixins?.base)return!1;const e=window.Voxel.mixins.base;return e.mounted&&!e._originalMounted?(e._originalMounted=e.mounted,e.mounted=function(){try{const t=this.$root?.$options?.el||this.$el;if(t){const n=t.closest?.(".elementor-element");if(n)this.widget_id=n.dataset?.id||"";else{const s=t.closest?.("[data-block-id]");this.widget_id=s&&s.dataset?.blockId||""}const r=t.closest?.(".elementor");if(r)this.post_id=r.dataset?.elementorId||"";else{const s=document.body.className.match(/postid-(\d+)/);this.post_id=s?s[1]:""}}e._originalMounted&&e._originalMounted!==e.mounted&&e._originalMounted.call(this)}catch(t){console.warn("[VoxelShim] Error in patched mounted():",t),this.widget_id="",this.post_id=""}},nn=!0,console.log("[VoxelShim] Successfully patched Voxel.mixins.base.mounted"),!0):!1}function rn(){if(it())return;let e=0;const t=50,r=setInterval(()=>{if(e++,it()){clearInterval(r);return}e>=t&&(clearInterval(r),console.warn("[VoxelShim] Voxel.mixins.base not found after 5 seconds"))},100);typeof document<"u"&&document.addEventListener("voxel:ready",()=>{it(),clearInterval(r)},{once:!0})}typeof window<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",rn,{once:!0}):rn()),typeof window<"u"&&typeof window._vx_file_upload_cache>"u"&&(window._vx_file_upload_cache=[]);function ps({config:e,filterData:t,value:n,onChange:r,blockId:s}){const i=s?`voxel-popup-${s}`:"",l=c.useRef(null),a=c.useRef(null),[o,u]=c.useState(!1),[d,b]=c.useState(""),[f,h]=c.useState(""),v=typeof n=="string"?n:"",k=String(t.props?.placeholder||t.label||"Type keywords..."),E=e.displayAs||t.props?.display_as||"popup",_=t.icon||"";c.useEffect(()=>{h(v)},[v]),c.useEffect(()=>{o&&(b(v),setTimeout(()=>{a.current?.focus()},50))},[o,v]);const w=W=>{h(W.target.value)},N=c.useCallback(()=>{const W=f.trim();r(W.length>0?W:"")},[f,r]),T=c.useCallback(W=>{W.key==="Enter"&&(W.preventDefault(),N())},[N]),y=W=>{b(W.target.value)},p=c.useCallback(()=>{u(!0)},[]),g=c.useCallback(()=>{const W=d.trim();r(W.length>0?W:""),u(!1)},[d,r]),R=c.useCallback(()=>{b(""),r("")},[r]),L=c.useCallback(W=>{W.key==="Enter"&&(W.preventDefault(),g())},[g]);if(E==="inline"){const{style:W,className:P}=ne(e,"ts-form-group ts-inline-filter");return React.createElement("div",{className:P,style:W},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{className:"ts-input-icon flexify"},_&&React.createElement("span",{dangerouslySetInnerHTML:{__html:_}}),React.createElement("input",{type:"text",value:f,onChange:w,onBlur:N,onKeyDown:T,placeholder:k,className:"inline-input"})))}const C=v.trim().length>0,{style:O,className:A}=ne(e,"ts-form-group"),I=pe(e);return React.createElement("div",{className:A,style:O},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:l,className:`ts-filter ts-popup-target ${C?"ts-filled":""}`,onClick:p,onMouseDown:W=>W.preventDefault(),role:"button",tabIndex:0},_&&React.createElement("span",{dangerouslySetInnerHTML:{__html:_}}),React.createElement("div",{className:"ts-filter-text"},C?v:k)),React.createElement(de,{isOpen:o,target:l,title:"",icon:_,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:g,onClear:R,onClose:()=>u(!1),className:`${i}${e.popupCenterPosition?" ts-popup-centered":""}`,popupStyle:I.style},React.createElement("div",{className:"ts-input-icon ts-sticky-top flexify"},React.createElement("span",null,fe.search),React.createElement("input",{ref:a,type:"text",value:d,onChange:y,onKeyDown:L,placeholder:k,className:"autofocus border-none"}))))}const ms=()=>window.noUiSlider;function sn(e){if(e==null||e==="")return[];if(Array.isArray(e))return e.map(Number).filter(r=>!isNaN(r));if(typeof e=="string"&&e.includes("..")){const n=e.split(".."),r=[];if(n[0]!==""){const s=Number(n[0]);isNaN(s)||r.push(s)}if(n[1]!==""){const s=Number(n[1]);isNaN(s)||r.push(s)}return r}const t=Number(e);return isNaN(t)?[]:[t]}function hs({config:e,filterData:t,value:n,onChange:r,blockId:s,narrowedValues:i,isNarrowing:l}){const a=[s?`voxel-popup-${s}`:"",e.id?`elementor-repeater-item-${e.id}`:""].filter(Boolean).join(" "),o=c.useRef(null),u=c.useRef(null),d=c.useRef(null),[b,f]=c.useState(!1),h=t.props||{},v=Number(h.range_start??h.min??0),k=Number(h.range_end??h.max??100),E=Number(h.step_size??h.step??1),_=String(h.placeholder||t.label||"Range"),w=e.displayAs||t.props?.display_as||"popup",N=h.handles||"single",T=h.compare||"in_range",y=e.filterKey,p=i?.ranges?.[y],g=p?.min??v,R=p?.max??k,L=typeof h.format=="object"&&h.format!==null?h.format:{numeric:!1,prefix:"",suffix:""},C=L.prefix||"",O=L.suffix||"",A=t.icon||"",I=N==="single"?[T==="in_range"?R:g]:T==="in_range"?[g,R]:[g,g],W=sn(n),P=W.length>0?W:I,[H,J]=c.useState(P),Z=c.useCallback(D=>{const G=L.numeric?D.toLocaleString():String(D);return`${C}${G}${O}`},[L.numeric,C,O]),Q=c.useCallback(D=>D.map(G=>Z(G)).join("  "),[Z]),$=n!=null&&n!=="",F=$?Q(W.length>0?W:H):_,S=Q(H),B=c.useCallback(()=>{if(!u.current||d.current)return;let D,G;N==="single"?(G=T==="in_range"?[1,0]:[0,1],D=[...H]):(G=T==="in_range"?[0,1,0]:[1,0,1],D=[...H]);const j=ms();if(!j){console.error("noUiSlider not loaded - window.noUiSlider is undefined");return}j.create(u.current,{start:D,connect:G,range:{min:g,max:R},step:E,behaviour:"tap-drag"}),d.current=u.current.noUiSlider,d.current.on("update",ee=>{J(ee.map(z=>Number(z)))}),requestAnimationFrame(()=>{d.current&&d.current.set(D,!1)})},[N,T,H,g,R,E]),U=c.useCallback(()=>{d.current&&(d.current.destroy(),d.current=null)},[]);c.useEffect(()=>{const D=sn(n),G=D.length>0?D:I;J(G),d.current&&(d.current.set(G,!1),requestAnimationFrame(()=>{d.current&&d.current.set(G,!1)}))},[n,g,R,N,T]),c.useEffect(()=>{if(b&&w==="popup"){const D=setTimeout(()=>{B()},100);return()=>clearTimeout(D)}return()=>{w==="popup"&&U()}},[b,w,B,U]),c.useEffect(()=>{if(w==="inline")return B(),()=>U()},[w,B,U]),c.useEffect(()=>{if(!d.current||!p)return;const D=H.map(G=>G<g?g:G>R?R:G);d.current.updateOptions({range:{min:g,max:R},start:D}),J(D)},[p,g,R,N]);const Y=c.useCallback(()=>{f(!0)},[]),se=c.useCallback(D=>!D.length||D.some(G=>typeof G!="number")?!1:D.join("..")!==I.join(".."),[I]),te=c.useCallback(D=>se(D)?D.join(".."):null,[se]),le=D=>{const j=[D.target.value===""?g:Number(D.target.value),H[1]??R];J(j),d.current&&d.current.set(j),w==="minmax"&&r(te(j))},ae=D=>{const G=D.target.value===""?R:Number(D.target.value),j=[H[0]??g,G];J(j),d.current&&d.current.set(j),w==="minmax"&&r(te(j))},q=c.useCallback(()=>{r(te(H)),f(!1)},[H,te,r]),m=c.useCallback(()=>{J(I),d.current&&d.current.set(I),r(null)},[I,r]),M=()=>c.createElement("div",{className:"ts-minmax"},c.createElement("input",{type:"number",className:"inline-input input-no-icon",placeholder:String(g),value:H[0]??g,onChange:le,min:g,max:typeof H[1]=="number"?H[1]:R,step:E}),c.createElement("input",{type:"number",className:"inline-input input-no-icon",placeholder:String(R),value:H[1]??R,onChange:ae,min:typeof H[0]=="number"?H[0]:g,max:R,step:E})),x=()=>c.createElement("div",{className:`range-slider-wrapper${l?" ts-loading":""}`},c.createElement("div",{className:"range-value"},S),c.createElement("div",{ref:u,className:"range-slider"}),p&&(p.min!==v||p.max!==k)&&c.createElement("div",{className:"range-narrowed-indicator"},c.createElement("small",null,"Showing ",Z(g),"  ",Z(R)," based on current results")));if(w==="minmax"&&N==="double"){const{style:D,className:G}=ne(e,"ts-form-group");return c.createElement("div",{className:G,style:D},!e.hideLabel&&c.createElement("label",null,t.label),M())}if(w==="inline"){const{style:D,className:G}=ne(e,"ts-form-group ts-inline-filter");return c.createElement("div",{className:G,style:D},!e.hideLabel&&c.createElement("label",null,t.label),x())}const{style:V,className:K}=ne(e,"ts-form-group"),X=pe(e);return c.createElement("div",{className:K,style:V},!e.hideLabel&&c.createElement("label",null,t.label),c.createElement("div",{ref:o,className:`ts-filter ts-popup-target ${$?"ts-filled":""}`,onClick:Y,onMouseDown:D=>D.preventDefault(),role:"button",tabIndex:0},A&&c.createElement("span",{dangerouslySetInnerHTML:{__html:A}}),c.createElement("div",{className:"ts-filter-text"},F),c.createElement("div",{className:"ts-down-icon"})),c.createElement(de,{isOpen:b,target:o,title:"",icon:A,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:q,onClear:m,onClose:()=>f(!1),className:`${a}${e.popupCenterPosition?" ts-popup-centered":""}`,popupStyle:X.style},c.createElement("div",{className:"ts-form-group"},c.createElement("label",null,t.label,t.description&&c.createElement("small",null,t.description)),x())))}function ys(e,t){let n=null;return function(...r){n&&clearTimeout(n),n=setTimeout(()=>e.apply(this,r),t)}}function gs({config:e,filterData:t,value:n,onChange:r,blockId:s}){const i=s?`voxel-popup-${s}`:"",l=t.props||{},a=typeof l.range_start=="number"?l.range_start:0,o=typeof l.range_end=="number"?l.range_end:1e3,u=typeof l.step_size=="number"?l.step_size:1,d=typeof l.precision=="number"?l.precision:0,b=String(l.placeholder||t.label||"Any"),f=e.displayAs||l.display_as||"popup",h=t.icon||"",v=c.useRef(null),k=c.useRef(null),[E,_]=c.useState(!1),[w,N]=c.useState(typeof n=="number"?n:""),T=c.useCallback(F=>{if(F===""||typeof F!="number"||isNaN(F))return"";let S=F;return S<a&&(S=a),S>o&&(S=o),Number(S.toFixed(d))},[a,o,d]),y=c.useCallback(F=>typeof F=="number",[]),p=c.useCallback(F=>{const S=T(F);y(S)?r(S):r("")},[T,y,r]),g=c.useMemo(()=>ys(F=>p(F),300),[p]);c.useEffect(()=>{N(typeof n=="number"?n:"")},[n]),c.useEffect(()=>{E&&N(typeof n=="number"?n:"")},[E,n]);const R=F=>{F.preventDefault();let S;typeof w!="number"?S=a:(S=T(w+u),typeof S!="number"&&(S=a)),N(S),f==="inline"&&g(S)},L=F=>{F.preventDefault();let S;typeof w!="number"?S=a:(S=T(w-u),typeof S!="number"&&(S=a)),N(S),f==="inline"&&g(S)},C=F=>{const S=F.target.value;if(S===""){N(""),f==="inline"&&g("");return}const B=parseFloat(S);if(!isNaN(B)){const U=T(B);N(U),f==="inline"&&g(U)}},O=c.useCallback(()=>{p(w)},[w,p]),A=c.useCallback(()=>{_(!0)},[]),I=c.useCallback(()=>{p(w),_(!1)},[w,p]),W=c.useCallback(()=>{N(""),r(""),k.current?.focus()},[r]),P=typeof n=="number"?n:null,H=F=>React.createElement("div",{className:"ts-stepper-input flexify"},React.createElement("button",{type:"button",className:`ts-stepper-left ts-icon-btn${F?" inline-btn-ts":""}`,onClick:L},React.createElement("i",{className:"las la-minus"})),React.createElement("input",{ref:k,type:"number",className:"ts-input-box",min:a,max:o,step:u,value:w,onChange:C,onBlur:F?O:void 0,placeholder:b}),React.createElement("button",{type:"button",className:`ts-stepper-right ts-icon-btn${F?" inline-btn-ts":""}`,onClick:R},React.createElement("i",{className:"las la-plus"})));if(f==="inline"){const{style:F,className:S}=ne(e,"ts-form-group ts-inline-filter");return React.createElement("div",{className:S,style:F},!e.hideLabel&&React.createElement("label",null,t.label),H(!0))}const J=typeof n=="number",{style:Z,className:Q}=ne(e,"ts-form-group"),$=pe(e);return React.createElement("div",{className:Q,style:Z},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:v,className:`ts-filter ts-popup-target ${J?"ts-filled":""}`,onClick:A,onMouseDown:F=>F.preventDefault(),role:"button",tabIndex:0},h&&React.createElement("span",{dangerouslySetInnerHTML:{__html:h}}),React.createElement("div",{className:"ts-filter-text"},P!==null?P:b),React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:E,target:v,title:"",icon:h,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:I,onClear:W,onClose:()=>_(!1),className:`${i}${e.popupCenterPosition?" ts-popup-centered":""}`,popupStyle:$.style},React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,t.label,t.description&&React.createElement("small",null,t.description)),H(!1))))}function bs(e){return e==null||e===""?[]:typeof e=="string"?e.split(",").map(t=>t.trim()).filter(t=>t!==""):Array.isArray(e)?e.length>0&&typeof e[0]=="string"?e:e.length>0&&typeof e[0]=="number"?e.map(String):[]:[]}function ct(e){return e.length===0?null:e.join(",")}function vs({config:e,filterData:t,value:n,onChange:r,blockId:s,narrowedValues:i,isNarrowing:l}){const a=s?`voxel-popup-${s}`:"",o=c.useRef(null),u=c.useRef(null),[d,b]=c.useState(!1),[f,h]=c.useState(""),v=t.props||{},k=v.multiple??!0,E=v.taxonomy_label??"",_=v.placeholder||t.label||E||"Select",w=e.displayAs||v.display_as||"popup",N=e.hideEmptyTerms??v.hide_empty_terms??!1,T=v.per_page??20,[y,p]=c.useState(1),g=t.icon||"",R=v.taxonomy||e.filterKey,L=i?.terms?.[R],C=c.useCallback(m=>{const M=(x,V,K)=>{const X={...x,parentRef:V||void 0,hasSelection:!1,depth:K};return x.children&&x.children.length>0&&(X.children=x.children.map(D=>M(D,X,K+1))),X};return m.map(x=>M(x,null,0))},[]),O=c.useMemo(()=>{const m=v.terms||[];return C(m)},[v,C]),A=c.useMemo(()=>{const m=new Map,M=x=>{m.set(x.slug,x),x.children&&x.children.forEach(V=>M(V))};return O.forEach(x=>M(x)),m},[O]),I=c.useMemo(()=>{const m=[],M=x=>{x.forEach(V=>{N&&L&&V.term_taxonomy_id&&L[V.term_taxonomy_id]===0||(m.push(V),V.children&&V.children.length>0&&M(V.children))})};return M(O),m},[O,N,L]),W=c.useCallback(m=>!L||!m.term_taxonomy_id?null:L[m.term_taxonomy_id]??null,[L]),P=c.useMemo(()=>bs(n),[n]),H=c.useCallback(m=>m.slug?P.includes(m.slug):!1,[P]),J=c.useMemo(()=>I.filter(m=>m.slug&&P.includes(m.slug)),[I,P]),Z=c.useMemo(()=>{const m=T*y;return I.slice(0,m)},[I,T,y]),Q=I.length>T*y,$=c.useMemo(()=>{if(!f)return Z;const m=f.toLowerCase();return I.filter(M=>M.label.toLowerCase().includes(m))},[I,Z,f]);c.useEffect(()=>{d&&(h(""),I.length>=15&&setTimeout(()=>u.current?.focus(),50))},[d,I.length]);const F=c.useCallback(()=>{b(!0)},[]),S=c.useCallback(m=>{const M=m.slug;if(M)if(k){let x=[...P];if(x.includes(M)){x=x.filter(K=>K!==M);let V=m.parentRef;for(;V;)V.children?.some(X=>x.includes(X.slug)||X.hasSelection)||(V.hasSelection=!1),V=V.parentRef;r(ct(x))}else{x.push(M);let V=m.parentRef;for(;V;)x=x.filter(X=>X!==V.slug),V.hasSelection=!0,V=V.parentRef;const K=new Set;x.forEach(X=>{const D=A.get(X);if(!D)return;let G=D.parentRef;const j=[];let ee=!1;for(;G;){if(G.slug===M){ee=!0;break}j.push(G),G=G.parentRef}ee&&(K.add(D.slug),j.forEach(z=>{z.hasSelection=!1}))}),x=x.filter(X=>!K.has(X)),r(ct(x))}}else r(ct([M])),w!=="inline"&&b(!1)},[k,P,r,A,w]),B=c.useCallback(()=>{b(!1)},[]),U=c.useCallback(()=>{r(null)},[r]),Y=P.length>0,se=Y&&J[0]?.label||_,te=J.length>1?J.length-1:0;if(w==="inline"){const{style:m,className:M}=ne(e,"ts-form-group inline-terms-wrapper ts-inline-filter min-scroll");return React.createElement("div",{className:`${M}${l?" ts-loading":""}`,style:m},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{className:"ts-term-dropdown ts-multilevel-dropdown inline-multilevel"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list"},Z.map(x=>{const V=H(x),K=W(x),X=K===0;return React.createElement("li",{key:x.slug,className:`${V?"ts-selected":""}${X?" ts-disabled":""}`},React.createElement("a",{href:"#",className:"flexify",onClick:D=>{D.preventDefault(),X||S(x)}},React.createElement("div",{className:"ts-checkbox-container"},React.createElement("label",{className:`container-${k?"checkbox":"radio"}`},React.createElement("input",{type:k?"checkbox":"radio",checked:V,readOnly:!0,disabled:!0,hidden:!0}),React.createElement("span",{className:"checkmark"}))),React.createElement("span",null,x.depth>0?" ".repeat(x.depth):"",x.label),K!==null&&React.createElement("span",{className:"ts-term-count"},"(",K,")"),x.icon&&React.createElement("div",{className:"ts-term-icon",dangerouslySetInnerHTML:{__html:x.icon}})))}),Q&&React.createElement("li",{className:"ts-term-centered"},React.createElement("a",{href:"#",onClick:x=>{x.preventDefault(),p(V=>V+1)},className:"flexify"},React.createElement("div",{className:"ts-term-icon"},fe.reload||React.createElement("span",null,"")),React.createElement("span",null,"Load more"))))))}if(w==="buttons"){const{style:m,className:M}=ne(e,"ts-form-group");return React.createElement("div",{className:M,style:m},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("ul",{className:"simplify-ul addon-buttons flexify"},I.map(x=>{const V=H(x);return React.createElement("li",{key:x.slug,className:`flexify ${V?"adb-selected":""}`,onClick:()=>S(x)},x.label)})))}const{style:le,className:ae}=ne(e,"ts-form-group"),q=pe(e);return React.createElement("div",{className:ae,style:le},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:o,className:`ts-filter ts-popup-target ${Y?"ts-filled":""}`,onClick:F,onMouseDown:m=>m.preventDefault(),role:"button",tabIndex:0},g&&React.createElement("span",{dangerouslySetInnerHTML:{__html:g}}),React.createElement("div",{className:"ts-filter-text"},se,te>0&&React.createElement("span",{className:"term-count"},"+",te)),React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:d,target:o,title:"",icon:g,saveLabel:"Save",clearLabel:"Clear",showClear:!0,showSave:k,onSave:B,onClear:U,onClose:()=>b(!1),className:`${a}${e.popupCenterPosition?" ts-popup-centered":""}`,popupStyle:q.style},I.length>=15&&React.createElement("div",{className:"ts-sticky-top uib b-bottom"},React.createElement("div",{className:"ts-input-icon flexify"},React.createElement("span",null,fe.search),React.createElement("input",{ref:u,type:"text",value:f,onChange:m=>h(m.target.value),placeholder:"Search",className:"autofocus"}))),React.createElement("div",{className:`ts-term-dropdown ts-multilevel-dropdown ts-md-group${l?" ts-loading":""}`},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list"},$.map(m=>{const M=H(m),x=W(m),V=x===0;return React.createElement("li",{key:m.slug,className:`${M?"ts-selected":""}${V?" ts-disabled":""}`},React.createElement("a",{href:"#",className:"flexify",onClick:K=>{K.preventDefault(),V||S(m)}},React.createElement("div",{className:"ts-checkbox-container"},React.createElement("label",{className:`container-${k?"checkbox":"radio"}`},React.createElement("input",{type:k?"checkbox":"radio",checked:M,readOnly:!0,disabled:!0,hidden:!0}),React.createElement("span",{className:"checkmark"}))),React.createElement("span",null,m.depth>0?" ".repeat(m.depth):"",m.label),x!==null&&React.createElement("span",{className:"ts-term-count"},"(",x,")"),m.icon&&React.createElement("div",{className:"ts-term-icon",dangerouslySetInnerHTML:{__html:m.icon}})))}),!f&&Q&&React.createElement("li",{className:"ts-term-centered"},React.createElement("a",{href:"#",onClick:m=>{m.preventDefault(),p(M=>M+1)},className:"flexify"},React.createElement("div",{className:"ts-term-icon"},fe.reload||React.createElement("span",null,"")),React.createElement("span",null,"Load more")))),$.length===0&&React.createElement("div",{className:"ts-empty-user-tab"},g&&React.createElement("span",{dangerouslySetInnerHTML:{__html:g}}),React.createElement("p",null,"No results found")))))}const Es=()=>window.noUiSlider;function Re(e){return!e||!e.address?null:e.method==="radius"&&e.lat!==void 0&&e.lng!==void 0?`${e.address};${e.lat},${e.lng},${e.radius||10}`:e.swlat!==void 0&&e.swlng!==void 0&&e.nelat!==void 0&&e.nelng!==void 0?`${e.address};${e.swlat},${e.swlng}..${e.nelat},${e.nelng}`:e.lat!==void 0&&e.lng!==void 0?`${e.address};${e.lat},${e.lng},${e.radius||10}`:e.address}function ws(e,t){if(e==null||e==="")return null;if(typeof e=="string"){const n=e.indexOf(";");if(n===-1)return{address:e};const r=e.substring(0,n),s=e.substring(n+1);if(s.includes("..")){const l=s.split(".."),a=l[0].split(","),o=l[1].split(",");return{address:r,method:"area",swlat:Number(a[0]),swlng:Number(a[1]),nelat:Number(o[0]),nelng:Number(o[1])}}const i=s.split(",");return{address:r,method:"radius",lat:Number(i[0]),lng:Number(i[1]),radius:i[2]?Number(i[2]):t}}return typeof e=="object"?e:null}function Ss({config:e,filterData:t,value:n,onChange:r,blockId:s}){const i=s?`voxel-popup-${s}`:"",l=c.useRef(null),a=c.useRef(null),o=c.useRef(null),u=c.useRef(null),d=c.useRef(null),[b,f]=c.useState(!1),[h,v]=c.useState(!1),k=c.useRef(null),E=t.props||{},_=E.radius||{},w=_.default??10,N=_.min??0,T=_.max??100,y=_.step??1,p=_.units||"km",g=E.display_proximity_as||"popup",R=String(E.placeholder||t.label||"Location"),L=E.default_search_method||"area";(E.l10n||{}).visibleArea;const O=e.displayAs||t.props?.display_as||"popup",A=t.icon||"",I=ws(n,w)||{},[W,P]=c.useState(I.address||""),[H,J]=c.useState(I.radius||w),Z=c.useCallback(z=>Math.round(z*1e6)/1e6,[]),Q=c.useCallback(z=>`${z}${p==="mi"?"mi":"km"}`,[p]),$=c.useCallback(()=>{if(!u.current||d.current)return;const z=Es();if(!z){console.error("noUiSlider not loaded - window.noUiSlider is undefined");return}z.create(u.current,{start:H,connect:[!0,!1],step:y,range:{min:N,max:T},behaviour:"tap-drag"}),d.current=u.current.noUiSlider,d.current.on("update",oe=>{J(Math.round(Number(oe[0])))}),d.current.on("change",oe=>{const ie=Math.round(Number(oe[0]));g==="inline"&&I.lat&&r(Re({...I,radius:ie}))})},[H,y,N,T,g,I,r]),F=c.useCallback(()=>{d.current&&(d.current.destroy(),d.current=null)},[]);c.useEffect(()=>{if(g==="inline"&&I.lat){const z=setTimeout(()=>$(),50);return()=>{clearTimeout(z),F()}}},[g,I.lat,$,F]),c.useEffect(()=>{if(h){const z=setTimeout(()=>$(),50);return()=>clearTimeout(z)}return()=>F()},[h,$,F]),c.useEffect(()=>{const z=I.radius||w;J(z),d.current&&d.current.set([z])},[I.radius,w]);const S=c.useCallback(()=>{if(o.current||!a.current||typeof window>"u")return;const z=window.Voxel?.Maps;if(!z){console.warn("Voxel.Maps not available for autocomplete");return}z.await(()=>{if(o.current)return;const oe=e.autocomplete||{};o.current=new z.Autocomplete(a.current,ie=>{if(ie){const dn=ie.viewport.getSouthWest(),fn=ie.viewport.getNorthEast(),Qs={address:ie.address,method:L,swlat:Z(dn.getLatitude()),swlng:Z(dn.getLongitude()),nelat:Z(fn.getLatitude()),nelng:Z(fn.getLongitude()),lat:Z(ie.latlng.getLatitude()),lng:Z(ie.latlng.getLongitude()),radius:I.radius||w};P(ie.address),r(Re(Qs)),O==="popup"&&f(!1)}else P(""),r(null)},oe)})},[e.autocomplete,r,O,w,L,I.radius,Z]);c.useEffect(()=>{(b||O==="inline")&&(P(I.address||""),b&&setTimeout(()=>a.current?.focus(),50))},[b,O,I.address]);const B=c.useCallback(()=>{f(!0)},[]),U=c.useCallback(()=>{S()},[S]),Y=z=>{P(z.target.value),O==="inline"&&(z.target.value?r(Re({...I,address:z.target.value})):r(null))},se=z=>{z.preventDefault(),z.stopPropagation(),"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(oe=>{const ie={address:"Current Location",method:"radius",lat:oe.coords.latitude,lng:oe.coords.longitude,radius:w};P("Current Location"),r(Re(ie)),O==="popup"&&f(!1)},oe=>{console.error("Geolocation error:",oe)})},te=c.useCallback(()=>{r(W?Re({...I,address:W}):null),f(!1)},[W,I,r]),le=c.useCallback(()=>{P(""),r(null)},[r]),ae=c.useCallback(z=>{z.key==="Enter"&&(z.preventDefault(),te())},[te]),q=c.useCallback(()=>{I.lat&&r(Re({...I,radius:H})),v(!1)},[I,H,r]),m=c.useCallback(()=>{J(w),d.current&&d.current.set([w]),I.lat&&r(Re({...I,radius:w}))},[w,I,r]),M=!!I.address||!!I.lat,x=M?String(I.address||"Location set"):R,V=()=>React.createElement("div",{className:"ts-input-icon flexify",style:{position:"relative"}},A&&React.createElement("span",{dangerouslySetInnerHTML:{__html:A}}),React.createElement("input",{ref:a,type:"text",className:"inline-input",placeholder:R,value:W,onChange:Y,onKeyDown:ae,onFocus:U}),React.createElement("a",{href:"#",className:"inline-user-location ts-icon-btn",onClick:se,title:"Use my location","aria-label":"Use my location"},fe.crosshairs)),K=()=>React.createElement("div",{className:"range-slider-wrapper"},React.createElement("div",{className:"range-value"},Q(H)),React.createElement("div",{ref:u,className:"range-slider"})),X=()=>!I.lat||g==="inline"?null:React.createElement("div",{className:"ts-form-group ts-proximity-filter"},React.createElement("label",null,String(E.proximity_label||"Radius")),React.createElement("div",{ref:k,className:`ts-filter ts-popup-target ${I.radius?"ts-filled":""}`,onClick:()=>v(!0),onMouseDown:z=>z.preventDefault(),role:"button",tabIndex:0},React.createElement("div",{className:"ts-filter-text"},Q(I.radius||w)),React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:h,target:k,title:"",saveLabel:"Save",clearLabel:"Reset",showClear:!0,onSave:q,onClear:m,onClose:()=>v(!1),className:`${i}${e.popupCenterPosition?" ts-popup-centered":""}`,popupStyle:ee.style},React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,String(E.proximity_label||"Search radius")),K()))),D=()=>g!=="inline"||!I.lat?null:React.createElement("div",{className:"ts-form-group ts-inline-proximity"},React.createElement("label",null,String(E.proximity_label||"Radius"),": ",Q(H)),React.createElement("div",{ref:u,className:"range-slider"}));if(O==="inline"){const{style:z,className:oe}=ne(e,"ts-form-group ts-inline-filter");return React.createElement(React.Fragment,null,React.createElement("div",{className:oe,style:z},!e.hideLabel&&React.createElement("label",null,t.label),V()),D(),X())}const{style:G,className:j}=ne(e,"ts-form-group"),ee=pe(e);return React.createElement(React.Fragment,null,React.createElement("div",{className:j,style:G},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:l,className:`ts-filter ts-popup-target ${M?"ts-filled":""}`,onClick:B,onMouseDown:z=>z.preventDefault(),role:"button",tabIndex:0},A&&React.createElement("span",{dangerouslySetInnerHTML:{__html:A}}),React.createElement("div",{className:"ts-filter-text"},x),React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:b,target:l,title:"",icon:A,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:te,onClear:le,onClose:()=>f(!1),className:`${i}${e.popupCenterPosition?" ts-popup-centered":""}`,popupStyle:ee.style},React.createElement("div",{className:"ts-form-group"},V()))),D(),X())}function Rs(e){if(e==null||e==="")return{date:"",slots:1};if(typeof e=="string")return{date:e,slots:1};if(typeof e=="object"){const t=e;return{date:t.date||"",slots:t.slots||1}}return{date:"",slots:1}}const Le=e=>{if(!e)return null;try{const t=new Date(e+"T00:00:00");return isFinite(t.getTime())?t:null}catch{return null}},_e=e=>{if(!e)return null;const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`},Ce=e=>{if(!e)return"";try{const t=new Date(e+"T00:00:00");return isFinite(t.getTime())?t.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):""}catch{return e}};function _s({config:e,filterData:t,value:n,onChange:r,blockId:s}){const i=[s?`voxel-popup-${s}`:"",e.id?`elementor-repeater-item-${e.id}`:""].filter(Boolean).join(" "),l=c.useRef(null),a=c.useRef(null),[o,u]=c.useState(!1),d=c.useRef(null),b=c.useRef(null),f=t.props||{},v=(f.inputMode||"date-range")==="date-range",k=f.l10n||{},E=k.pickDate||t.label||"Choose date",_=f.presets||[],w=t.icon||"",N=Rs(n),T=N.date,y=N.slots;let p="",g="";v&&T&&T.includes("..")?[p,g]=T.split(".."):!v&&T&&(p=T);const[R,L]=c.useState(()=>Le(p)),[C,O]=c.useState(()=>Le(g)),[A,I]=c.useState("start"),[W,P]=c.useState(y);d.current=R,b.current=C;const H=c.useCallback(q=>{const m=d.current,M=b.current,x=a.current;if(!m||M||!x)return;const V=q.target,K=V.tagName==="TD"?V:V.closest("td");if(!K||K.classList.contains("is-empty")||K.classList.contains("is-disabled"))return;const X=K.querySelector(".pika-button");if(!X||X.disabled)return;K.classList.add("is-endrange");const D=new Date(parseInt(X.getAttribute("data-pika-year")||"0"),parseInt(X.getAttribute("data-pika-month")||"0"),parseInt(X.getAttribute("data-pika-day")||"0")),G=864e5,j=new Date(D.getTime()-G);for(;j>m;){const ee=`.pika-button[data-pika-year="${j.getFullYear()}"][data-pika-month="${j.getMonth()}"][data-pika-day="${j.getDate()}"]`;x.el.querySelector(ee)?.parentElement?.classList.add("is-inrange"),j.setTime(j.getTime()-G)}K.addEventListener("mouseleave",()=>{x.el.querySelectorAll("td.is-inrange:not(.is-disabled)").forEach(z=>z.classList.remove("is-inrange")),K.classList.remove("is-endrange")},{once:!0})},[]);c.useEffect(()=>{if(o){if(v&&T&&T.includes("..")){const[q,m]=T.split("..");L(Le(q)),O(Le(m))}else!v&&T&&L(Le(T));P(y),I("start")}},[o,v,T,y]);const J=c.useCallback(()=>{u(!0)},[]),Z=c.useCallback(q=>{if(v&&q&&a.current)if(A==="start")L(q),O(null),I("end"),a.current.setStartRange(q),a.current.setEndRange(null),a.current.draw();else if(R&&q<R)L(q),O(null),a.current.setStartRange(q),a.current.setEndRange(null),a.current.draw();else{O(q),I("start"),a.current.setEndRange(q),a.current.draw();const m=_e(R),M=_e(q);m&&M&&(r(`${m}..${M}`),u(!1))}else L(q)},[v,A,R,r]);c.useCallback(q=>{P(Number(q.target.value)||1)},[]);const Q=c.useCallback(q=>{if(v){const m=_e(R),M=_e(C);m&&M&&r(`${m}..${M}`)}else{const M=_e(q!==void 0?q:R);M&&r(M)}u(!1)},[v,R,C,r]),$=c.useCallback(()=>{L(null),O(null),P(1),r(null),a.current&&(a.current.setStartRange(null),a.current.setEndRange(null))},[r]),F=c.useCallback(q=>{r(q)},[r]),S=c.useCallback(()=>typeof n=="string"&&n.includes(".."),[n]),B=v?!!(p&&g):!!T,U=v?S():!!n,Y=c.useCallback(q=>n===q,[n]),se=c.useMemo(()=>{if(v&&_.length>0){if(S()){const q=Ce(p),m=Ce(g);return`${q} - ${m}`}return E}if(!B)return E;if(v){const q=Ce(p),m=Ce(g),M=`${q}  ${m}`;return y>1?`${M} (${y})`:M}else{const q=Ce(T);return y>1?`${q} (${y})`:q}},[v,_.length,S,B,p,g,T,y,E]),{style:te,className:le}=ne(e,"ts-form-group"),ae=pe(e);return React.createElement(React.Fragment,null,v&&_.map(q=>React.createElement("div",{key:q.key,className:le,style:te},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{className:`ts-filter ${Y(q.key)?"ts-filled":""}`,onClick:()=>F(q.key),role:"button",tabIndex:0},React.createElement("div",{className:"ts-filter-text"},React.createElement("span",null,q.label))))),React.createElement("div",{className:le,style:te},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:l,className:`ts-filter ts-popup-target ${U?"ts-filled":""}`,onClick:J,onMouseDown:q=>q.preventDefault(),role:"button",tabIndex:0},w&&React.createElement("span",{dangerouslySetInnerHTML:{__html:w}}),React.createElement("div",{className:"ts-filter-text"},se),React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:o,target:l,title:"",icon:w,saveLabel:k.save||"Save",clearLabel:k.clear||"Clear",showSave:v,onSave:Q,onClear:$,onClose:()=>u(!1),className:`${i}${v?" ts-availability-wrapper xl-height xl-width":" md-width xl-height"}${e.popupCenterPosition?" ts-popup-centered":""}`,popupStyle:ae.style},v&&React.createElement("div",{className:"ts-popup-head flexify"},React.createElement("div",{className:"ts-popup-name flexify"},w&&React.createElement("span",{dangerouslySetInnerHTML:{__html:w}}),React.createElement("span",null,React.createElement("span",{className:A==="start"?"chosen":"",onClick:()=>I("start"),style:{cursor:"pointer"}},R?Ce(_e(R)):k.checkIn||"Check-in"),React.createElement("span",null,"  "),React.createElement("span",{className:A==="end"?"chosen":"",onClick:()=>I("end"),style:{cursor:"pointer"}},C?Ce(_e(C)):k.checkOut||"Check-out")))),React.createElement(at,{value:R,onChange:Z,...!v&&{onSelect:Q},pickerConfig:{minDate:new Date,...v?{numberOfMonths:2,theme:"pika-range",onDraw:q=>q.el.addEventListener("mouseover",H)}:{}},onPickerReady:q=>{a.current=q,v&&R&&(q.setStartRange(R),C&&q.setEndRange(C))}}))))}function Cs(e,t){if(e==null||e==="")return{from:"",to:""};if(typeof e=="string"){if(t&&e.includes("..")){const n=e.split("..");return{from:n[0]||"",to:n[1]||""}}return{from:e,to:""}}return{from:"",to:""}}function ut(e,t,n){return!e&&!t?null:n?e&&t?`${e}..${t}`:e?`${e}..`:t?`..${t}`:null:e||null}const ve=e=>{if(!e)return null;try{const t=new Date(e+"T00:00:00");return isFinite(t.getTime())?t:null}catch{return null}},Me=e=>{if(!e)return null;const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`},Te=e=>{if(!e)return"";try{const t=new Date(e+"T00:00:00");return isFinite(t.getTime())?t.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):""}catch{return e}},ln=e=>e?e.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):"";function ks(e){return typeof e=="string"&&e.includes("..")}function an({config:e,filterData:t,value:n,onChange:r,blockId:s}){const i=s?`voxel-popup-${s}`:"",l=c.useRef(null),a=t.props||{},o=a.inputMode==="date-range"||a.inputMode===void 0,u=a.l10n||{},d=u.from||"From",b=u.to||"To",f=u.pickDate||"Choose date",h=o?a.presets||[]:[],v=a.displayValue||{start:null,end:null},k=t.icon||"",E=Cs(n,o),_=E.from,w=E.to,[N,T]=c.useState(!1),[y,p]=c.useState(!1),[g,R]=c.useState(()=>ve(_)),[L,C]=c.useState("start"),[O,A]=c.useState(()=>ve(_)),[I,W]=c.useState(()=>ve(w)),P=c.useRef(null),H=c.useCallback(()=>{R(ve(_)),p(!0)},[_]),J=c.useCallback((j="start")=>{const ee=ve(_),z=ve(w);A(ee),W(z),C(j==="end"&&!z?"start":j),p(!0)},[_,w]),Z=c.useCallback(j=>{R(j)},[]),Q=c.useCallback(j=>{T(!0);const z=Me(j!==void 0?j:g)||"";r(ut(z,"",!1)),p(!1)},[g,r]),$=c.useCallback(()=>{T(!0),R(null),r(null)},[r]),F=c.useRef(L);F.current=L;const S=c.useRef(O);S.current=O;const B=c.useRef(I);B.current=I;const U=c.useCallback(j=>{A(j),S.current=j,P.current&&(P.current.setStartRange(j),B.current&&j&&j>B.current&&(W(null),B.current=null,P.current.setEndRange(null)))},[]),Y=c.useCallback(j=>{W(j),B.current=j,P.current&&P.current.setEndRange(j)},[]),se=c.useCallback(()=>{T(!0);let j=Me(S.current)||"",ee=Me(B.current)||"";j&&!ee&&(ee=j),r(ut(j,ee,!0)),p(!1)},[r]),te=c.useCallback(()=>{T(!0),U(null),Y(null),C("start"),P.current&&P.current.draw(!0),r(null)},[r,U,Y]),le=c.useCallback(j=>{F.current==="start"?(U(j),C("end")):(Y(j),C("start"),setTimeout(()=>{T(!0);const ee=Me(S.current)||"";let z=Me(j)||"";ee&&!z&&(z=ee),r(ut(ee,z,!0)),p(!1)},0)),P.current&&P.current.draw(!0)},[U,Y,r]),ae=c.useCallback(j=>{P.current=j;const ee=ve(_),z=ve(w);ee&&j.setStartRange(ee),z&&j.setEndRange(z),j.draw(!0)},[_,w]),q=c.useMemo(()=>({numberOfMonths:2,theme:"pika-range",disableDayFn:j=>!!(F.current==="end"&&S.current&&j<S.current),selectDayFn:j=>S.current&&j.toDateString()===S.current.toDateString()||B.current&&j.toDateString()===B.current.toDateString()||void 0}),[]),m=c.useCallback(j=>{T(!0),r(n===j?null:j)},[n,r]),M=o?ks(n):n!=null&&n!=="",x=c.useMemo(()=>{if(!M)return f;if(o){const ee=N?Te(_):v.start||Te(_),z=N?Te(w):v.end||Te(w);return ee&&z?`${ee} - ${z}`:ee||f}return(N?Te(_):v.start||Te(_))||f},[M,o,_,w,f,N,v]),V=O?ln(O):d,K=I?ln(I):b,{style:X,className:D}=ne(e,"ts-form-group"),G=pe(e);return React.createElement(React.Fragment,null,h.map(j=>React.createElement("div",{key:j.key,className:D,style:X},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{className:`ts-filter${n===j.key?" ts-filled":""}`,onClick:()=>m(j.key),role:"button",tabIndex:0},React.createElement("div",{className:"ts-filter-text"},React.createElement("span",null,j.label))))),React.createElement("div",{className:D,style:X},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:l,className:`ts-filter ts-popup-target${M?" ts-filled":""}`,onClick:o?()=>J("start"):H,onMouseDown:j=>j.preventDefault(),role:"button",tabIndex:0},k&&React.createElement("span",{dangerouslySetInnerHTML:{__html:k}}),React.createElement("div",{className:"ts-filter-text"},x),React.createElement("div",{className:"ts-down-icon"})),!o&&React.createElement(de,{isOpen:y,target:l,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:Q,onClear:$,onClose:()=>p(!1),className:`${i} md-width xl-height${e.popupCenterPosition?" ts-popup-centered":""}`,popupStyle:G.style},React.createElement(at,{value:g,onChange:Z,onSelect:Q})),o&&React.createElement(de,{isOpen:y,target:l,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:se,onClear:te,onClose:()=>p(!1),className:`${i} ts-availability-wrapper xl-width xl-height${e.popupCenterPosition?" ts-popup-centered":""}`,popupStyle:G.style},React.createElement("div",{className:"ts-popup-head flexify"},React.createElement("div",{className:"ts-popup-name flexify"},k&&React.createElement("span",{dangerouslySetInnerHTML:{__html:k}}),React.createElement("span",null,React.createElement("span",{className:L==="start"?"chosen":"",onClick:()=>C("start"),style:{cursor:"pointer"}},V),O&&React.createElement(React.Fragment,null,React.createElement("span",null,"  "),React.createElement("span",{className:L==="end"?"chosen":"",onClick:()=>C("end"),style:{cursor:"pointer"}},K))))),React.createElement(at,{value:null,onChange:()=>{},onSelect:le,pickerConfig:q,onPickerReady:ae}))))}function Ts({config:e,filterData:t,value:n,onChange:r}){const s=n!=null&&n!==!1&&n!==""&&n!==0,i=d=>{d.preventDefault(),r(s?null:1)},l=t.props?.placeholder||t.label||"Open now";if(e.openInPopup||t.props?.openInPopup||!1){const{style:d,className:b}=ne(e,"ts-form-group"),f=t.icon||"";return React.createElement("div",{className:b,style:d},React.createElement("label",null,t.label),React.createElement("div",{className:`ts-filter ts-popup-target${s?" ts-filled":""}`,onClick:i,role:"button",tabIndex:0},f&&React.createElement("span",{dangerouslySetInnerHTML:{__html:f}}),React.createElement("div",{className:"ts-filter-text"},React.createElement("span",null,l))))}const{style:o,className:u}=ne(e,"ts-form-group switcher-label ts-inline-filter");return React.createElement("div",{className:u,style:o},React.createElement("label",{className:"ts-keep-visible"},React.createElement("div",{className:"switch-slider"},React.createElement("div",{className:"onoffswitch"},React.createElement("input",{type:"checkbox",className:"onoffswitch-checkbox",checked:s,onChange:i,tabIndex:0}),React.createElement("label",{className:"onoffswitch-label",onClick:i}))),l))}function on(e){return typeof e!="string"||!e?null:e.split("(")[0]}function cn(e){return Math.round(e*1e5)/1e5}function xs({config:e,filterData:t,value:n,onChange:r,blockId:s,allFilterValues:i,allFiltersData:l,postFeedId:a}){const o=s?`voxel-popup-${s}`:"",u=c.useRef(null),[d,b]=c.useState(!1),[f,h]=c.useState(!1),v=t.props||{},k=e.displayAs||t.props?.display_as||"popup",E=String(v.placeholder||t.label||"Order By"),_=c.useMemo(()=>{const S=v.choices||{};return Array.isArray(S)?S:Object.entries(S).map(([B,U])=>({key:B,label:U.label||U,placeholder:U.placeholder||U.label||U,icon:U.icon||"",requires_location:U.requires_location||!1,has_location:U.has_location||!1}))},[v.choices]),w=t.icon||"",N=c.useMemo(()=>l&&l.find(S=>S.type==="location")||null,[l]),T=c.useMemo(()=>{if(!N||!i)return null;const S=i[N.key];return!S||typeof S!="object"?null:S},[N,i]),y=c.useCallback(S=>{if(T){const{lat:B,lng:U,method:Y,address:se}=T;if(B&&U){if(Y==="radius"){S(B,U),h(!1);return}S(B,U),h(!1);return}if(se&&window.Voxel?.Maps?.getGeocoder){window.Voxel.Maps.getGeocoder().geocode(se,te=>{te?S(te.latlng?.getLatitude?.()||te.lat,te.latlng?.getLongitude?.()||te.lng):p(S),h(!1)});return}}p(S)},[T]),p=c.useCallback(S=>{if(!navigator.geolocation){h(!1);return}navigator.geolocation.getCurrentPosition(B=>{const U=cn(B.coords.latitude),Y=cn(B.coords.longitude);S(U,Y),h(!1)},()=>{const B=window.Voxel_Config;window.Voxel?.alert&&B?.l10n?.positionFail&&window.Voxel.alert(B.l10n.positionFail,"error"),h(!1)})},[]),g=on(n),R=_.find(S=>S.key===g)?.requires_location;c.useEffect(()=>{if(!R||!T)return;const{lat:S,lng:B,method:U}=T;U==="radius"&&S&&B&&g&&r(`${g}(${S},${B})`)},[T?.lat,T?.lng]);const L=c.useCallback(()=>{b(!0)},[]),C=c.useCallback(S=>{S.requires_location?(h(S.key),y((B,U)=>{r(S.key+`(${B},${U})`),b(!1)})):(r(S.key),b(!1))},[r,y]),O=c.useCallback(S=>{S.requires_location?(h(S.key),y((B,U)=>{r(S.key+`(${B},${U})`)})):r(S.key)},[r,y]),A=c.useCallback(()=>{r(null)},[r]),I=typeof n=="string"?n:"",W=!!I,P=on(I),H=_.find(S=>S.key===P),J=H?.label||E;c.useEffect(()=>{H?.requires_location&&!H?.has_location&&P&&(k==="buttons"?C(H):O(H))},[]);const Z=S=>React.createElement("div",{className:"ts-term-dropdown ts-md-group"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list min-scroll"},_.map(B=>{const U=P===B.key,Y=f===B.key;return React.createElement("li",{key:B.key,className:U?"ts-selected":""},React.createElement("a",{href:"#",className:`flexify${Y?" vx-pending":""}`,onClick:se=>{se.preventDefault(),S(B)}},React.createElement("div",{className:"ts-radio-container"},React.createElement("label",{className:"container-radio"},React.createElement("input",{type:"radio",value:B.key,checked:U,readOnly:!0,disabled:!0,hidden:!0}),React.createElement("span",{className:"checkmark"}))),React.createElement("span",null,B.label),B.icon&&React.createElement("div",{className:"ts-term-icon"},React.createElement("span",{dangerouslySetInnerHTML:{__html:B.icon}}))))})));if(k==="buttons"){const{style:S,className:B}=ne(e,"ts-form-group");return React.createElement("div",{className:B,style:S},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("ul",{className:"simplify-ul addon-buttons flexify"},_.map(U=>{const Y=P===U.key,se=f===U.key;return React.createElement("li",{key:U.key,className:`flexify${Y?" adb-selected":""}${se?" vx-pending":""}`,onClick:()=>O(U)},U.placeholder||U.label)})))}if(k==="alt-btn")return React.createElement(React.Fragment,null,_.map(S=>{const B=P===S.key,U=f===S.key,{style:Y,className:se}=ne(e,"ts-form-group");return React.createElement("div",{key:S.key,className:se,style:Y},!e.hideLabel&&React.createElement("label",null,S.label),React.createElement("div",{className:`ts-filter${B?" ts-filled":""}${U?" vx-pending":""}`,onClick:()=>O(S)},S.icon&&React.createElement("span",{dangerouslySetInnerHTML:{__html:S.icon}}),React.createElement("div",{className:"ts-filter-text"},React.createElement("span",null,S.placeholder||S.label))))}));if(k==="post-feed"&&a){const S=`[data-block-id="${a}"] .post-feed-header, .elementor-element-${a} .post-feed-header`,B=document.querySelector(S);if(B&&!B.querySelector(".vxf-sort"))return Fe.createPortal(React.createElement(Ns,{filterData:t,filterIcon:w,placeholder:E,options:_,currentKey:P,hasValue:W,displayValue:J,loading:f,selectDropdownChoice:C,handleClear:A,renderRadioList:Z,popupClassName:o,config:e}),B)}const{style:Q,className:$}=ne(e,"ts-form-group"),F=pe(e);return React.createElement("div",{className:$,style:Q},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:u,className:`ts-filter ts-popup-target${W?" ts-filled":""}`,onClick:L,onMouseDown:S=>S.preventDefault(),role:"button",tabIndex:0},w&&React.createElement("span",{dangerouslySetInnerHTML:{__html:w}}),React.createElement("div",{className:"ts-filter-text"},J),React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:d,target:u,title:"",icon:w,saveLabel:"Save",clearLabel:"Clear",showClear:W,showSave:!1,onSave:()=>b(!1),onClear:A,onClose:()=>b(!1),className:`hide-head ${o}${e.popupCenterPosition?" ts-popup-centered":""}`.trim(),popupStyle:F.style},Z(C)))}function Ns({filterData:e,filterIcon:t,placeholder:n,options:r,currentKey:s,hasValue:i,displayValue:l,loading:a,selectDropdownChoice:o,handleClear:u,renderRadioList:d,popupClassName:b,config:f}){const h=c.useRef(null),[v,k]=c.useState(!1),E=pe(f);return React.createElement("div",{className:`vxf-sort ts-popup-target${i?" ts-filled":""}`,ref:h},React.createElement("a",{href:"#",onClick:_=>{_.preventDefault(),k(!v)}},i?l:n,React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:v,target:h,title:"",icon:t,saveLabel:"Save",clearLabel:"Clear",showClear:i,showSave:!1,onSave:()=>k(!1),onClear:()=>{u(),k(!1)},onClose:()=>k(!1),className:`hide-d ${b}${f.popupCenterPosition?" ts-popup-centered":""}`.trim(),popupStyle:E.style},d(_=>{o(_),k(!1)})))}function Is({config:e,filterData:t,value:n,onChange:r,blockId:s}){const i=s?`voxel-popup-${s}`:"",[l,a]=c.useState(!1),o=c.useRef(null),u=t.props||{},d=e.displayAs||t.props?.display_as||"popup",b=u.placeholder||t.label||"Status",f=c.useMemo(()=>{const L=u.choices||{};return Array.isArray(L)?L:Object.entries(L).map(([C,O])=>({key:C,label:O.label||O}))},[u.choices]),h=t.icon||"",v=c.useCallback(L=>{r(L),a(!1)},[r]),k=c.useCallback(()=>{r(""),a(!1)},[r]),E=c.useCallback(()=>{a(!0)},[]),_=typeof n=="string"?n:"",w=!!_,N=f.find(L=>L.key===_),T=w&&N?.label||b,y=()=>React.createElement("div",{className:"ts-term-dropdown ts-md-group"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list min-scroll"},f.map(L=>{const C=_===L.key;return React.createElement("li",{key:L.key},React.createElement("a",{href:"#",className:"flexify",onClick:O=>{O.preventDefault(),v(L.key)}},React.createElement("div",{className:"ts-radio-container"},React.createElement("label",{className:"container-radio"},React.createElement("input",{type:"radio",value:L.key,checked:C,readOnly:!0}),React.createElement("span",{className:"checkmark"}))),React.createElement("span",null,L.label),h&&React.createElement("div",{className:"ts-term-icon"},React.createElement("span",{dangerouslySetInnerHTML:{__html:h}}))))})));if(d==="buttons")return React.createElement(React.Fragment,null,f.map(L=>{const C=_===L.key,{style:O,className:A}=ne(e,"ts-form-group");return React.createElement("div",{key:L.key,className:A,style:O},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{className:`ts-filter${C?" ts-filled":""}`,onClick:()=>r(L.key)},h&&React.createElement("span",{dangerouslySetInnerHTML:{__html:h}}),React.createElement("div",{className:"ts-filter-text"},React.createElement("span",null,L.label))))}));const{style:p,className:g}=ne(e,"ts-form-group"),R=pe(e);return React.createElement("div",{className:g,style:p},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:o,className:`ts-filter ts-popup-target ${w?"ts-filled":""}`,onClick:E,onMouseDown:L=>L.preventDefault(),role:"button",tabIndex:0},h&&React.createElement("span",{dangerouslySetInnerHTML:{__html:h}}),React.createElement("div",{className:"ts-filter-text"},T),React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:l,target:o,title:"",icon:h,saveLabel:"Save",showSave:!1,showClear:w,onClear:k,onSave:()=>a(!1),onClose:()=>a(!1),className:`hide-head ${i}${e.popupCenterPosition?" ts-popup-centered":""}`.trim(),popupStyle:R.style},y()))}function Ls(e){const{userId:t,skip:n=!1}=e,[r,s]=c.useState(null),[i,l]=c.useState(!1),[a,o]=c.useState(null),u=c.useCallback(async()=>{if(!t||n){s(null);return}l(!0),o(null);try{const d=rt(),b=await fetch(`${d}voxel-fse/v1/search-form/user-data?user_id=${t}`);if(b.ok){const f=await b.json();s({id:f.id,name:f.name,avatar:f.avatar||""})}else s({id:t,name:"Unknown",avatar:""}),o("User not found")}catch(d){console.error("useUserData: Error fetching user data:",d),s({id:t,name:"Unknown",avatar:""}),o(d instanceof Error?d.message:"Failed to fetch user data")}finally{l(!1)}},[t,n]);return c.useEffect(()=>{u()},[u]),{userData:r,isLoading:i,error:a,refetch:u}}function Ms({config:e,filterData:t,value:n}){const r=c.useRef(null),s=t.props||{},i=t.icon||"",l=s.user;let a;n!==void 0?a=n:t.value!==null&&t.value!==void 0?a=t.value:a=null;const o=a?Number(a):null,u=o!==null&&!isNaN(o)&&o>0,d=!!l?.name,{userData:b,isLoading:f}=Ls({userId:u?o:null,skip:d}),h=d?{name:l.name,avatar:l.avatar||""}:b;if(!u)return null;const v=h?.name||(f?"Loading...":"Unknown"),{style:k,className:E}=ne(e,"ts-form-group");return React.createElement("div",{className:E,style:k},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:r,className:`ts-filter ts-popup-target ts-filled${f?" ts-loading":""}`},React.createElement("span",{dangerouslySetInnerHTML:{__html:i}}),React.createElement("div",{className:"ts-filter-text"},v)))}function Fs({config:e,filterData:t,value:n,onChange:r,blockId:s}){const i=c.useRef(null),l=s?`voxel-popup-${s}`:"",o=(t.props||{}).post,u=t.icon||"";let d=null;n!==void 0?n===null?d=null:typeof n=="number"?d=n:typeof n=="string"&&n!==""&&(d=Number(n)):t.value!==null&&t.value!==void 0&&(d=typeof t.value=="number"?t.value:Number(t.value));const b=d!==null&&!isNaN(d)&&d>0,f=c.useCallback(()=>{r(null)},[r]);if(!b)return null;const h=o?.title||"Unknown",{style:v,className:k}=ne(e,"ts-form-group"),E=pe(e);return React.createElement("div",{className:k,style:v},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:i,className:"ts-filter ts-popup-target ts-filled",role:"button",tabIndex:0},u&&React.createElement("span",{dangerouslySetInnerHTML:{__html:u}}),React.createElement("div",{className:"ts-filter-text"},h),React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:!1,target:i,showClear:!0,showSave:!1,onSave:()=>{},onClear:f,onClose:()=>{},className:`${l}${e.popupCenterPosition?" ts-popup-centered":""}`,popupStyle:E.style}))}function dt({config:e,filterData:t,value:n,onChange:r}){const[s,i]=c.useState(!1),[l,a]=c.useState(""),[o,u]=c.useState([]),[d,b]=c.useState(!1),f=c.useRef(null),h=t.props||{},v=h.placeholder||t.label||"Following",k=h.user,E=t.icon||"",_=C=>{const O=C.target.value;a(O),O.length>=2?(b(!0),setTimeout(()=>{u([]),b(!1)},300)):u([])},w=(C,O)=>{r({id:C,name:O}),i(!1),a("")},N=C=>{C.preventDefault(),i(!s)};c.useEffect(()=>{const C=O=>{f.current&&!f.current.contains(O.target)&&i(!1)};return s&&document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[s]);let T=null;if(n!==void 0){const C=n;C===null?T=null:typeof C=="number"?T=C:typeof C=="object"&&C?.id&&(T=C.id)}else t.value!==null&&t.value!==void 0&&(T=typeof t.value=="number"?t.value:Number(t.value));const y=T!==null&&!isNaN(T)&&T>0;let p=v;if(y){const C=n;C&&typeof C=="object"&&C.name?p=C.name:k?.name&&(p=k.name)}const{style:g,className:R}=ne(e,"ts-form-group"),L=pe(e);return React.createElement("div",{className:R,style:g,ref:f},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{className:`ts-filter ts-popup-target ${y?"ts-filled":""}`,onClick:N,onMouseDown:C=>C.preventDefault(),role:"button",tabIndex:0},E&&React.createElement("span",{dangerouslySetInnerHTML:{__html:E}}),React.createElement("div",{className:"ts-filter-text"},p),React.createElement("div",{className:"ts-down-icon"})),s&&React.createElement("div",{className:"ts-field-popup-container"},React.createElement("div",{className:L.className,style:L.style},React.createElement("div",{className:"ts-popup-content-wrapper min-scroll"},React.createElement("div",{className:"ts-form-group"},React.createElement("div",{className:"flexify ts-input-icon"},React.createElement("span",null,fe.search),React.createElement("input",{type:"text",className:"inline-input",value:l,onChange:_,placeholder:"Search..."}))),d?React.createElement("div",{className:"ts-loading"},React.createElement("span",{className:"ts-loader"})):o.length>0?React.createElement("div",{className:"ts-term-dropdown"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list"},o.map(C=>React.createElement("li",{key:C.id},React.createElement("a",{href:"#",className:"flexify",onClick:O=>{O.preventDefault(),w(C.id,C.name)}},React.createElement("span",null,C.name)))))):l.length>=2?React.createElement("div",{className:"ts-empty-user-list"},React.createElement("span",null,"No results found")):null))))}function Ps({config:e,filterData:t,value:n,onChange:r}){const[s,i]=c.useState(!1),[l,a]=c.useState(""),[o,u]=c.useState([]),[d,b]=c.useState(!1),f=c.useRef(null),h=t.props||{},v=h.placeholder||t.label||"Following Post",k=h.post,E=t.icon||"",_=C=>{const O=C.target.value;a(O),O.length>=2?(b(!0),setTimeout(()=>{u([]),b(!1)},300)):u([])},w=(C,O)=>{r({id:C,title:O}),i(!1),a("")},N=C=>{C.preventDefault(),i(!s)};c.useEffect(()=>{const C=O=>{f.current&&!f.current.contains(O.target)&&i(!1)};return s&&document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[s]);let T=null;if(n!==void 0){const C=n;C===null?T=null:typeof C=="number"?T=C:typeof C=="object"&&C?.id&&(T=C.id)}else t.value!==null&&t.value!==void 0&&(T=typeof t.value=="number"?t.value:Number(t.value));const y=T!==null&&!isNaN(T)&&T>0;let p=v;if(y){const C=n;C&&typeof C=="object"&&C.title?p=C.title:k?.title&&(p=k.title)}const{style:g,className:R}=ne(e,"ts-form-group"),L=pe(e);return React.createElement("div",{className:R,style:g,ref:f},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{className:`ts-filter ts-popup-target ${y?"ts-filled":""}`,onClick:N,onMouseDown:C=>C.preventDefault(),role:"button",tabIndex:0},E&&React.createElement("span",{dangerouslySetInnerHTML:{__html:E}}),React.createElement("div",{className:"ts-filter-text"},p),React.createElement("div",{className:"ts-down-icon"})),s&&React.createElement("div",{className:"ts-field-popup-container"},React.createElement("div",{className:L.className,style:L.style},React.createElement("div",{className:"ts-popup-content-wrapper min-scroll"},React.createElement("div",{className:"ts-form-group"},React.createElement("div",{className:"flexify ts-input-icon"},React.createElement("span",null,fe.search),React.createElement("input",{type:"text",className:"inline-input",value:l,onChange:_,placeholder:"Search posts..."}))),d?React.createElement("div",{className:"ts-loading"},React.createElement("span",{className:"ts-loader"})):o.length>0?React.createElement("div",{className:"ts-term-dropdown"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list"},o.map(C=>React.createElement("li",{key:C.id},React.createElement("a",{href:"#",className:"flexify",onClick:O=>{O.preventDefault(),w(C.id,C.title)}},React.createElement("span",null,C.title)))))):l.length>=2?React.createElement("div",{className:"ts-empty-user-list"},React.createElement("span",null,"No posts found")):null))))}function Os({config:e,filterData:t,value:n,onChange:r}){const s=t.props||{},i=s.openInPopup===!0,l=s.placeholder||t.label||"",a=t.icon||"",o=n!=null&&n!==""&&n!==!1,u=f=>{f.preventDefault(),r(o?"":1)};if(i){const{style:f,className:h}=ne(e,"ts-form-group");return React.createElement("div",{className:h,style:f},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{className:`ts-filter${o?" ts-filled":""}`,onClick:u,onMouseDown:v=>v.preventDefault(),role:"button",tabIndex:0},a&&React.createElement("span",{dangerouslySetInnerHTML:{__html:a}}),React.createElement("div",{className:"ts-filter-text"},React.createElement("span",null,l))))}const{style:d,className:b}=ne(e,"ts-form-group switcher-label ts-inline-filter");return React.createElement("div",{className:b,style:d},React.createElement("label",{className:"ts-keep-visible"},React.createElement("div",{className:"switch-slider"},React.createElement("div",{className:"onoffswitch"},React.createElement("input",{type:"checkbox",className:"onoffswitch-checkbox",checked:o,onChange:u,tabIndex:0}),React.createElement("label",{className:"onoffswitch-label",onClick:u}))),l))}function As({config:e,filterData:t}){const n=t.description||"",{style:r,className:s}=ne(e,"ts-form-group ui-heading");return React.createElement("div",{className:s,style:r},React.createElement("label",null,e.label||t.label,n&&React.createElement("small",null,n)))}function Vs({postTypes:e,currentPostType:t,onChange:n,blockId:r,style:s}){const i=r?`voxel-popup-${r}`:"",[l,a]=c.useState(!1),o=c.useRef(null),u=c.useCallback(E=>{n(E),a(!1)},[n]),d=c.useCallback(()=>{a(!0)},[]),b=e.find(E=>E.key===t),f=b?.label||"Select type",h=!!t,v=b?.icon||"",k=()=>React.createElement("div",{className:"ts-term-dropdown ts-md-group"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list min-scroll"},e.map(E=>{const _=t===E.key;return React.createElement("li",{key:E.key},React.createElement("a",{href:"#",className:"flexify",onClick:w=>{w.preventDefault(),u(E.key)}},React.createElement("div",{className:"ts-radio-container"},React.createElement("label",{className:"container-radio"},React.createElement("input",{type:"radio",checked:_,disabled:!0,hidden:!0,readOnly:!0}),React.createElement("span",{className:"checkmark"}))),React.createElement("span",null,E.label),React.createElement("div",{className:"ts-term-icon ts-pull-right"},E.icon&&React.createElement("span",{dangerouslySetInnerHTML:{__html:E.icon}}))))})));return React.createElement("div",{className:"ts-form-group choose-cpt-filter",style:s},React.createElement("label",null,"Post type"),React.createElement("div",{ref:o,className:`ts-filter ts-popup-target ${h?"ts-filled":""}`,onClick:d,onMouseDown:E=>E.preventDefault(),role:"button",tabIndex:0},v&&React.createElement("span",{dangerouslySetInnerHTML:{__html:v}}),React.createElement("div",{className:"ts-filter-text"},f),React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:l,target:o,title:"",icon:v,saveLabel:"Save",showSave:!1,showClear:!1,onSave:()=>a(!1),onClose:()=>a(!1),className:`hide-head ${i}`.trim()},k()))}const Ds={"common:is_empty":(e,t)=>t==null||t==="","common:is_not_empty":(e,t)=>t!=null&&t!=="","text:equals":(e,t)=>t===e.value,"text:not_equals":(e,t)=>t!==e.value,"text:contains":(e,t)=>typeof t!="string"||!e.value?!1:new RegExp(e.value,"i").test(t),"taxonomy:contains":(e,t)=>typeof t!="string"||!e.value?!1:t.split(",").includes(e.value),"taxonomy:not_contains":(e,t)=>typeof t!="string"||!e.value?!0:!t.split(",").includes(e.value),"number:equals":(e,t)=>{const n=parseFloat(String(t)),r=parseFloat(e.value||"0");return n===r},"number:not_equals":(e,t)=>{const n=parseFloat(String(t)),r=parseFloat(e.value||"0");return n!==r},"number:gt":(e,t)=>{const n=parseFloat(String(t)),r=parseFloat(e.value||"0");return n>r},"number:gte":(e,t)=>{const n=parseFloat(String(t)),r=parseFloat(e.value||"0");return n>=r},"number:lt":(e,t)=>{const n=parseFloat(String(t)),r=parseFloat(e.value||"0");return n<r},"number:lte":(e,t)=>{const n=parseFloat(String(t)),r=parseFloat(e.value||"0");return n<=r}};function Bs(e,t,n){const r=Ds[e.type];if(!r)return console.warn(`[filterConditions] Unknown condition type: ${e.type}`),!1;let s=t;return n==="order-by"&&typeof t=="string"&&t.length>0&&(s=t.split("(")[0]),r(e,s)}function js(e,t="show",n,r){if(!e||e.length===0)return!0;let s=!1;return e.forEach(i=>{if(!i.length)return;let l=!0;i.forEach(a=>{const o=n[a.source],d=r[a.source]?.type;Bs(a,o,d)||(l=!1)}),l&&(s=!0)}),t==="hide"?!s:s}function Ws(e,t,n){return js(e.conditions,e.conditions_behavior||"show",t,n)}function Us(){const e=()=>{if(typeof window>"u")return"desktop";const r=window.innerWidth;return r<=767?"mobile":r<=1024?"tablet":"desktop"},[t,n]=c.useState(e);return c.useEffect(()=>{const r=()=>{n(e())};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),t}function Hs({attributes:e,postTypes:t,context:n,editorDeviceType:r,onSubmit:s,onPostTypeChange:i,onFilterChange:l}){const a=c.useRef(null),o=c.useRef(null),{state:u,setCurrentPostType:d,setFilterValue:b,togglePortal:f,submit:h,clearAll:v,narrowedValues:k,narrowingFilters:E}=rs({attributes:e,postTypes:t,context:n,onSubmit:s,onPostTypeChange:i,onFilterChange:l}),_=Qt(m=>{if(n!=="editor")return null;const{isListViewOpened:M,isEditorSidebarOpened:x}=m("core/edit-post");return{leftVisible:M?.()??!1,rightVisible:x?.()??!1}}),w=c.useMemo(()=>{if(n!=="editor"||!_||r&&r!=="desktop")return{width:"100%",left:"0",right:"0",zIndex:9999};const m=_.leftVisible?350:0,M=_.rightVisible?280:0;return m===0&&M===0?{}:{width:`calc(100% - ${m+M}px)`,left:`${m}px`,right:`${M}px`,zIndex:9999}},[n,_,r]),[N,T]=c.useState(""),[y,p]=c.useState("");c.useEffect(()=>{const m=async()=>{const x=e.searchButtonText??"";if(st(x)){const V=en(x),K=await tn(V);T(K)}else T(x)},M=async()=>{const x=e.resetButtonText??"Reset";if(st(x)){const V=en(x),K=await tn(V);p(K)}else p(x)};m(),M()},[e.searchButtonText,e.resetButtonText]),c.useEffect(()=>{if(!u.portalActive)return;const m=M=>{M.key==="Escape"&&f()};return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[u.portalActive,f]),c.useEffect(()=>{if(!u.portalActive)return;const m=x=>{const V=x.target;a.current?.contains(V)||n==="editor"&&(V.closest(".interface-interface-skeleton__sidebar")||V.closest(".edit-post-sidebar")||V.closest(".block-editor-block-inspector")||V.closest(".components-popover")||V.closest(".components-modal"))||f()},M=requestAnimationFrame(()=>{document.addEventListener("mousedown",m)});return()=>{cancelAnimationFrame(M),document.removeEventListener("mousedown",m)}},[u.portalActive,f,n]),c.useEffect(()=>{if(n!=="frontend")return;const m=M=>{const x=M;x.detail?.searchFormId&&x.detail.searchFormId!==e.blockId||v()};return window.addEventListener("voxel-search-clear",m),()=>window.removeEventListener("voxel-search-clear",m)},[n,e.blockId,v]),c.useEffect(()=>{if(n!=="frontend")return;const m=M=>{const{searchFormId:x,postType:V}=M.detail||{};x===e.blockId&&V&&d(V)};return window.addEventListener("voxel-switch-post-type",m),()=>window.removeEventListener("voxel-switch-post-type",m)},[n,e.blockId,d]);const g=t.find(m=>m.key===u.currentPostType),R=e.filterLists?.[u.currentPostType]||[],L=m=>{h()},C=(m=!1)=>{v(m)},O={};g?.filters?.forEach(m=>{O[m.key]=m});const A=m=>{if(!(n==="frontend"?cs(m):!0))return null;const x=m;if(n==="frontend"&&x.conditions&&!Ws(x,u.filterValues,O))return null;const V=g?.filters?.find(G=>G.key===m.filterKey);if(!V)return null;const K=m.defaultValueEnabled&&m.defaultValue!==void 0&&m.defaultValue!==""&&!(V.type==="range"&&m.defaultValue===".."),X={...V,value:K?m.defaultValue:V.value},D={config:m,filterData:X,value:u.filterValues[m.filterKey],onChange:G=>b(m.filterKey,G),narrowedValues:k,isNarrowing:E,blockId:e.blockId,context:n};switch(V.type){case"keywords":return React.createElement(ps,{key:m.id,...D});case"range":return React.createElement(hs,{key:m.id,...D});case"stepper":return React.createElement(gs,{key:m.id,...D});case"terms":return React.createElement(vs,{key:m.id,...D});case"location":return React.createElement(Ss,{key:m.id,...D});case"availability":return React.createElement(_s,{key:m.id,...D});case"date":return React.createElement(an,{key:m.id,...D});case"recurring-date":return React.createElement(an,{key:m.id,...D});case"open-now":return React.createElement(Ts,{key:m.id,...D});case"order-by":return React.createElement(xs,{key:m.id,...D,allFilterValues:u.filterValues,allFiltersData:g?.filters,postFeedId:e.postToFeedId});case"post-status":return React.createElement(Is,{key:m.id,...D});case"user":return React.createElement(Ms,{key:m.id,...D});case"relations":return React.createElement(Fs,{key:m.id,...D});case"following":return React.createElement(dt,{key:m.id,...D});case"followed-by":return React.createElement(dt,{key:m.id,...D});case"following-user":return React.createElement(dt,{key:m.id,...D});case"following-post":return React.createElement(Ps,{key:m.id,...D});case"switcher":return React.createElement(Os,{key:m.id,...D});case"ui-heading":return React.createElement(As,{key:m.id,...D});default:return null}},I=(m=!0)=>React.createElement("div",{className:"ts-filter-wrapper flexify"},e.showPostTypeFilter&&t.length>1&&React.createElement(Vs,{postTypes:t,currentPostType:u.currentPostType,onChange:d,style:q()}),R.map(M=>A(M)),m&&e.showSearchButton&&React.createElement("div",{className:"ts-form-group flexify ts-form-submit",id:"sf_submit",style:ae("search")},React.createElement("button",{type:"button",onClick:()=>L(),className:`ts-btn ts-btn-2 ts-btn-large ts-search-btn ${u.loading&&!u.resetting?"ts-loading-btn":""}`},u.loading&&!u.resetting&&React.createElement("div",{className:"ts-loader-wrapper"},React.createElement("span",{className:"ts-loader"})),ot(e.searchButtonIcon,fe.search),N&&N)),m&&e.showResetButton&&React.createElement("div",{className:"ts-form-group flexify ts-form-reset",style:ae("reset")},React.createElement("a",{href:"#",onClick:M=>{M.preventDefault(),C(!1)},className:"ts-filter",role:"button"},ot(e.resetButtonIcon,fe.reload),y&&React.createElement("div",{className:"ts-filter-text"},y)))),W=Us(),P=n==="editor"&&r?r:W,H=P==="desktop"&&(e.mfSwitcherDesktop??!1)||P==="tablet"&&(e.mfSwitcherTablet??!1)||P==="mobile"&&(e.mfSwitcherMobile??!1),J=()=>P==="desktop"?e.mfSwitcherDesktopDefault??"feed":P==="tablet"?e.mfSwitcherTabletDefault??"feed":e.mfSwitcherMobileDefault??"feed",[Z,Q]=c.useState(J),$=c.useRef(null);c.useEffect(()=>{Q(J())},[P,e.mfSwitcherDesktopDefault,e.mfSwitcherTabletDefault,e.mfSwitcherMobileDefault]);const F=(m,M)=>{if(!m)return null;const x=o.current?.ownerDocument||document,V=x.getElementById(m);if(V)return V;const K=M==="map"?"voxel-fse-map-":"voxel-fse-post-feed-",X=m.replace(/^#/,""),D=`.${K}${X}`,G=x.querySelector(D);return G||null},S=()=>{Q("feed");const m=P,M=F(e.postToMapId||"","map"),x=F(e.postToFeedId||"","feed");if(M){M.classList.add(`vx-hidden-${m}`);const V=M.closest(".voxel-fse-flex-container");V&&V.classList.add(`vx-hidden-${m}`);const K=M.querySelector(".ts-map");K&&$.current&&(K.style.height=$.current.height,K.style.minHeight=$.current.minHeight)}if(x){x.classList.remove(`vx-hidden-${m}`);const V=x.closest(".voxel-fse-flex-container");V&&V.classList.remove(`vx-hidden-${m}`)}},B=()=>{Q("map");const m=P,M=F(e.postToMapId||"","map"),x=F(e.postToFeedId||"","feed");if(x){x.classList.add(`vx-hidden-${m}`);const V=x.closest(".voxel-fse-flex-container");V&&V.classList.add(`vx-hidden-${m}`)}if(M){M.classList.remove(`vx-hidden-${m}`);const V=M.closest(".voxel-fse-flex-container");V&&V.classList.remove(`vx-hidden-${m}`);const K=M.querySelector(".ts-map");if(K){$.current||($.current={height:K.style.height||"",minHeight:K.style.minHeight||""});const X=M.style.getPropertyValue("--vx-map-height");X?(K.style.height=X,K.style.minHeight=X):requestAnimationFrame(()=>{const D=M.getBoundingClientRect().top;K.style.height=`calc(100vh - ${Math.round(D)}px)`,K.style.minHeight=`calc(100vh - ${Math.round(D)}px)`})}}};c.useEffect(()=>{H&&(Z==="feed"?S():B())},[P,Z,H,e.postToMapId,e.postToFeedId]);const U=()=>{if(!H)return null;const m=[e.mfSwitcherDesktop?"":"vx-hidden-desktop",e.mfSwitcherTablet?"":"vx-hidden-tablet",e.mfSwitcherMobile?"":"vx-hidden-mobile"].filter(Boolean).join(" "),M=React.createElement("div",{className:`ts-switcher-btn ${m}`,style:n==="editor"?w:{}},React.createElement("a",{href:"#",className:`ts-btn ts-btn-1 ${Z==="feed"?`vx-hidden-${P}`:""}`,onClick:x=>{x.preventDefault(),S()},role:"button"},fe.grid,"List view"),React.createElement("a",{href:"#",className:`ts-btn ts-btn-1 ${Z==="map"?`vx-hidden-${P}`:""}`,onClick:x=>{x.preventDefault(),B()},role:"button"},fe.marker,"Map view"));return n==="editor"?M:Fe.createPortal(React.createElement("div",{className:`voxel-fse-search-form-${e.blockId}`,"data-voxel-id":e.blockId},M),document.body)},Y=P==="desktop"&&(e.formToggleDesktop??!1)||P==="tablet"&&(e.formToggleTablet??!0)||P==="mobile"&&(e.formToggleMobile??!0),se=Y,te=!Y,le={postTypes:t.map(m=>({key:m.key,label:m.label,filters:m.filters})),currentPostType:u.currentPostType,filterLists:e.filterLists||{},portalMode:e.portalMode||{desktop:!1,tablet:!1,mobile:!1},showPostTypeFilter:e.showPostTypeFilter??!0,showSearchButton:e.showSearchButton??!0,showResetButton:e.showResetButton??!1,searchButtonText:e.searchButtonText||"",resetButtonText:e.resetButtonText||"",formToggleDesktop:e.formToggleDesktop??!1,formToggleTablet:e.formToggleTablet??!0,formToggleMobile:e.formToggleMobile??!0,searchButtonWidth:e.searchButtonWidth,searchButtonWidth_tablet:e.searchButtonWidth_tablet,searchButtonWidth_mobile:e.searchButtonWidth_mobile,searchButtonWidthUnit:e.searchButtonWidthUnit||"%",resetButtonWidth:e.resetButtonWidth,resetButtonWidth_tablet:e.resetButtonWidth_tablet,resetButtonWidth_mobile:e.resetButtonWidth_mobile,resetButtonWidthUnit:e.resetButtonWidthUnit||"%"},ae=m=>{const M=m==="search"?e.searchButtonWidthUnit||"%":e.resetButtonWidthUnit||"%";let x;return m==="search"?P==="mobile"?x=e.searchButtonWidth_mobile??e.searchButtonWidth_tablet??e.searchButtonWidth:P==="tablet"?x=e.searchButtonWidth_tablet??e.searchButtonWidth:x=e.searchButtonWidth:P==="mobile"?x=e.resetButtonWidth_mobile??e.resetButtonWidth_tablet??e.resetButtonWidth:P==="tablet"?x=e.resetButtonWidth_tablet??e.resetButtonWidth:x=e.resetButtonWidth,x!==void 0?{width:`${x}${M}`,flexGrow:0,flexShrink:0}:{}},q=()=>{let m;return P==="mobile"?m=e.postTypeFilterWidth_mobile??e.postTypeFilterWidth_tablet??e.postTypeFilterWidth:P==="tablet"?m=e.postTypeFilterWidth_tablet??e.postTypeFilterWidth:m=e.postTypeFilterWidth,m!==void 0?{width:`${m}%`,flexGrow:0,flexShrink:0}:{}};return React.createElement(React.Fragment,null,React.createElement("div",{className:"ts-form ts-search-widget","data-v-app":"",ref:o},React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(le)}}),se&&React.createElement("div",{className:"ts-filter-wrapper flexify"},React.createElement("a",{href:"#",onClick:m=>{m.preventDefault(),f()},onMouseDown:m=>m.preventDefault(),className:`ts-filter-toggle ts-btn ts-btn-1 ${u.activeFilterCount>0?"ts-filled":""}`,role:"button","aria-expanded":u.portalActive},fe.filterslider,React.createElement("div",{className:"ts-toggle-text"},"Filter results"),u.activeFilterCount>0&&React.createElement("span",{className:"ts-filter-count"},u.activeFilterCount))),React.createElement("form",{method:"GET",onSubmit:m=>(m.preventDefault(),!1)},te&&React.createElement("div",{className:"ts-inline-filters"},I())),React.createElement("div",{className:"hidden"},React.createElement("div",{className:"ts-search-portal"}))),u.portalActive&&Fe.createPortal(React.createElement("div",{className:`ts-search-portal vx-popup elementor voxel-fse-search-form-${e.blockId}`,"data-voxel-id":e.blockId},React.createElement("div",{className:"ts-popup-root elementor-element"},React.createElement("div",{className:"ts-form ts-search-widget no-render elementor-element"},React.createElement("div",{className:"ts-field-popup-container"},React.createElement("div",{className:"ts-field-popup triggers-blur",ref:a},React.createElement("div",{className:"ts-popup-content-wrapper min-scroll"},React.createElement("div",{className:"ts-form-group"},I())),React.createElement("div",{className:"ts-popup-controller"},React.createElement("ul",{className:"flexify simplify-ul"},React.createElement("li",{className:"flexify ts-popup-close"},React.createElement("a",{href:"#",onClick:m=>{m.preventDefault(),f()},className:"ts-icon-btn",role:"button","aria-label":"Close"},ot(e.closeIcon,fe.close))),React.createElement("li",{className:"flexify hide-d"},React.createElement("a",{href:"#",onClick:m=>{m.preventDefault(),C(!0)},className:"ts-icon-btn",role:"button"},fe.reload)),React.createElement("li",{className:"flexify hide-m"},React.createElement("a",{href:"#",onClick:m=>{m.preventDefault(),C(!0)},className:"ts-btn ts-btn-1",role:"button"},"Clear")),React.createElement("li",{className:"flexify"},React.createElement("a",{href:"#",onClick:m=>{m.preventDefault(),L(),f()},className:"ts-btn ts-btn-2",role:"button"},"Search"))))))))),document.body),U())}const ft=new Map;function qs(){return rt()}function xe(e,t){if(!e)return t;try{return JSON.parse(e)}catch{return t}}function Ee(e){return e==="true"}function zs(e){const t=e.dataset,n=r=>{if(!r||r==="")return;const s=Number(r);return isNaN(s)?void 0:s};return{blockId:e.id||"",postTypes:xe(t.postTypes,[]),selectedPostType:"",showPostTypeFilter:Ee(t.showPostTypeFilter),postTypeFilterWidth:n(t.postTypeFilterWidth),postTypeFilterWidth_tablet:n(t.postTypeFilterWidthTablet),postTypeFilterWidth_mobile:n(t.postTypeFilterWidthMobile),filterLists:xe(t.filterLists,{}),onSubmit:t.onSubmit||"feed",postToFeedId:t.postToFeedId||"",postToMapId:t.postToMapId||"",searchOn:t.searchOn||"submit",showSearchButton:Ee(t.showSearchButton),searchButtonText:t.searchButtonText??"",searchButtonIcon:xe(t.searchButtonIcon,{library:"",value:""}),searchButtonWidth:n(t.searchButtonWidth),searchButtonWidth_tablet:n(t.searchButtonWidthTablet),searchButtonWidth_mobile:n(t.searchButtonWidthMobile),searchButtonWidthUnit:t.searchButtonWidthUnit||"%",showResetButton:Ee(t.showResetButton),resetButtonText:t.resetButtonText??"",resetButtonIcon:xe(t.resetButtonIcon,{library:"",value:""}),resetButtonWidth:n(t.resetButtonWidth),resetButtonWidth_tablet:n(t.resetButtonWidthTablet),resetButtonWidth_mobile:n(t.resetButtonWidthMobile),resetButtonWidthUnit:t.resetButtonWidthUnit||"%",voxelIntegration:Ee(t.voxelIntegration),adaptiveFiltering:Ee(t.adaptiveFiltering),portalMode:xe(t.portalMode,{desktop:!1,tablet:!0,mobile:!0}),formToggleDesktop:Ee(t.formToggleDesktop),formToggleTablet:Ee(t.formToggleTablet),formToggleMobile:Ee(t.formToggleMobile),toggleText:t.toggleText||"Filter results",toggleIcon:xe(t.toggleIcon,{library:"",value:""})}}async function Ks(e,t){if(!e||e.length===0)return[];const r=`${qs()}voxel-fse/v1/search-form/frontend-config?post_types=${encodeURIComponent(e.join(","))}`;try{const s={};t&&Object.entries(t).forEach(([o,u])=>{Array.isArray(u)&&(s[o]={},u.forEach(d=>{d.filterKey&&(s[o][d.filterKey]={defaultValueEnabled:d.defaultValueEnabled,defaultValue:d.defaultValue,resetValue:d.resetValue})}))});const i=Object.keys(s).length>0,l=await fetch(r,{method:i?"POST":"GET",headers:i?{"Content-Type":"application/json"}:void 0,body:i?JSON.stringify({filter_configs:s}):void 0});if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);return await l.json()}catch(s){return console.error("Failed to fetch post types:",s),[]}}function Gs(e){const t=e,n=(a,o)=>typeof a=="boolean"?a:a==="true"?!0:a==="false"?!1:o,r=a=>{if(a&&typeof a=="object"){const o=a;return{desktop:n(o.desktop,!1),tablet:n(o.tablet,!0),mobile:n(o.mobile,!0)}}return{desktop:!1,tablet:!0,mobile:!0}},s=a=>a&&typeof a=="object"?a:{library:"",value:""},l=(t.postTypes??t.post_types??[]).map(a=>typeof a=="string"?a:a&&typeof a=="object"&&"key"in a&&a.key||"").filter(Boolean);return{blockId:t.blockId??t.block_id??"",postTypes:l,selectedPostType:l[0]||"",showPostTypeFilter:n(t.showPostTypeFilter??t.show_post_type_filter,!0),filterLists:t.filterLists??t.filter_lists??{},onSubmit:t.onSubmit??t.on_submit??"feed",postToFeedId:t.postToFeedId??t.post_to_feed_id??"",postToMapId:t.postToMapId??t.post_to_map_id??"",searchOn:t.searchOn??t.search_on??"submit",updateUrl:n(t.updateUrl??t.update_url,!0),submitToPageId:t.submitToPageId??t.submit_to_page_id,mapAdditionalMarkers:t.mapAdditionalMarkers??t.map_additional_markers??0,mapEnableClusters:n(t.mapEnableClusters??t.map_enable_clusters,!0),showSearchButton:n(t.showSearchButton??t.show_search_button,!0),searchButtonText:t.searchButtonText??t.search_button_text??"",searchButtonIcon:s(t.searchButtonIcon??t.search_button_icon),searchButtonWidth:t.searchButtonWidth,searchButtonWidth_tablet:t.searchButtonWidth_tablet??t.search_button_width_tablet,searchButtonWidth_mobile:t.searchButtonWidth_mobile??t.search_button_width_mobile,searchButtonWidthUnit:t.searchButtonWidthUnit??t.search_button_width_unit??"%",showResetButton:n(t.showResetButton??t.show_reset_button,!1),resetButtonText:t.resetButtonText??t.reset_button_text??"",resetButtonIcon:s(t.resetButtonIcon??t.reset_button_icon),resetButtonWidth:t.resetButtonWidth,resetButtonWidth_tablet:t.resetButtonWidth_tablet??t.reset_button_width_tablet,resetButtonWidth_mobile:t.resetButtonWidth_mobile??t.reset_button_width_mobile,resetButtonWidthUnit:t.resetButtonWidthUnit??t.reset_button_width_unit??"%",voxelIntegration:n(t.voxelIntegration??t.voxel_integration,!0),adaptiveFiltering:n(t.adaptiveFiltering??t.adaptive_filtering,!1),portalMode:r(t.portalMode??t.portal_mode),formToggleDesktop:n(t.formToggleDesktop??t.form_toggle_desktop,!1),formToggleTablet:n(t.formToggleTablet??t.form_toggle_tablet,!0),formToggleMobile:n(t.formToggleMobile??t.form_toggle_mobile,!0),toggleText:t.toggleText??t.toggle_text??"Filter results",toggleIcon:s(t.toggleIcon??t.toggle_icon),postTypeFilterWidth:t.postTypeFilterWidth,postTypeFilterWidth_tablet:t.postTypeFilterWidth_tablet??t.post_type_filter_width_tablet,postTypeFilterWidth_mobile:t.postTypeFilterWidth_mobile??t.post_type_filter_width_mobile,mfSwitcherDesktop:n(t.mfSwitcherDesktop??t.mf_switcher_desktop,!1),mfSwitcherDesktopDefault:t.mfSwitcherDesktopDefault??t.mf_switcher_desktop_default??"feed",mfSwitcherTablet:n(t.mfSwitcherTablet??t.mf_switcher_tablet,!1),mfSwitcherTabletDefault:t.mfSwitcherTabletDefault??t.mf_switcher_tablet_default??"feed",mfSwitcherMobile:n(t.mfSwitcherMobile??t.mf_switcher_mobile,!1),mfSwitcherMobileDefault:t.mfSwitcherMobileDefault??t.mf_switcher_mobile_default??"feed"}}function Zs(e){const t=e.querySelector("script.vxconfig");if(t&&t.textContent)try{const n=JSON.parse(t.textContent),r=e.dataset,s={...n,blockId:n.blockId||e.id||"",onSubmit:r.onSubmit||n.onSubmit||"refresh",postToFeedId:r.postToFeedId||n.postToFeedId||"",postToMapId:r.postToMapId||n.postToMapId||""};return Gs(s)}catch(n){console.error("Failed to parse vxconfig:",n)}return zs(e)}function Js({attributes:e,onSubmit:t,inlinePostTypes:n}){const[r,s]=c.useState(n||[]),[i,l]=c.useState(!n||n.length===0),[a,o]=c.useState(null),u=c.useRef(!1),d=c.useCallback(()=>{if(u.current)return;const h=e.postTypes?.[0]||"";if(!h||i||r.length===0)return;const v={},k=r.find(E=>E.key===h);k?.filters&&k.filters.forEach(E=>{E.value!==null&&E.value!==void 0&&(v[E.key]=E.value)}),t({postType:h,...v},r),u.current=!0},[e.postTypes,t,i,r]);c.useEffect(()=>{if(n&&n.length>0)return;let h=!1;async function v(){l(!0),o(null);try{const k=await Ks(e.postTypes||[],e.filterLists);h||s(k)}catch(k){h||o(k instanceof Error?k.message:"Failed to load")}finally{h||l(!1)}}return v(),()=>{h=!0}},[n,e.postTypes,e.filterLists]),c.useEffect(()=>{const h=e.blockId;if(h)return ft.set(h,d),()=>{ft.delete(h)}},[e.blockId,d]);const b=c.useCallback(h=>{t(h,r)},[t,r]);if(i)return React.createElement("div",{className:"ts-form ts-search-widget"},React.createElement("div",{className:"ts-filter-wrapper flexify"},React.createElement("div",{className:"ts-no-posts"},React.createElement("span",{className:"ts-loader"}))));if(a)return React.createElement("div",{className:"ts-form ts-search-widget voxel-fse-error"},React.createElement("div",{className:"ts-filter-wrapper flexify"},React.createElement("span",null,"Error loading search form")));const f=r.filter(h=>e.postTypes?.includes(h.key));return React.createElement(Hs,{attributes:e,postTypes:f,context:"frontend",onSubmit:b})}function He(){document.querySelectorAll(".voxel-fse-search-form").forEach(t=>{const n=t.dataset;if(n.hydrated==="true")return;const r=Zs(t),s=t.querySelector("script.vxconfig-hydrate");let i=null;if(s?.textContent)try{i=JSON.parse(s.textContent)}catch(o){console.error("[SF-HYDRATE] parse error:",o)}const l=(o,u)=>{const b=o.postType||r.postTypes?.[0]||"",{postType:f,...h}=o;switch(r.onSubmit){case"feed":if(r.postToFeedId){const v=new CustomEvent("voxel-search-submit",{detail:{targetId:r.postToFeedId,postType:b,filters:h,hasMapWidget:!!r.postToMapId,mapAdditionalMarkers:r.mapAdditionalMarkers??0},bubbles:!0});if(window.dispatchEvent(v),r.postToMapId){const k=new CustomEvent("voxel-search-submit",{detail:{targetId:r.postToMapId,postType:b,filters:h,mapAdditionalMarkers:r.mapAdditionalMarkers??0,mapEnableClusters:r.mapEnableClusters??!0},bubbles:!0});window.dispatchEvent(k)}}else console.warn("[search-form] No postToFeedId set, cannot dispatch to Post Feed");break;case"page":r.submitToPageId?Xs(o,r):un(o,r,u);break;default:un(o,r,u);break}};n.hydrated="true",pn.createRoot(t).render(React.createElement(Js,{attributes:r,onSubmit:l,inlinePostTypes:i}))})}function un(e,t,n){const s=e.postType;let i="";if(s&&n){const u=n.find(d=>d.key===s);u?.archiveUrl&&(i=u.archiveUrl)}i||(i=window.location.origin+window.location.pathname);const l=new URLSearchParams;Object.entries(e).forEach(([u,d])=>{u!=="postType"&&(d==null||d===""||(typeof d=="object"?l.set(u,JSON.stringify(d)):l.set(u,String(d))))});let a=i;const o=l.toString();o.length&&(a+="?"+o),window.location.href=a}function Xs(e,t){const n=e,r=new URLSearchParams,s=n.postType||t.postTypes?.[0];s&&typeof s=="string"&&r.set("type",s),Object.entries(e).forEach(([o,u])=>{o!=="postType"&&(u==null||u===""||(typeof u=="object"?r.set(o,JSON.stringify(u)):r.set(o,String(u))))});const l=(window.voxelFseSiteUrl||window.location.origin)+"/?p="+String(t.submitToPageId),a=r.toString();window.location.href=l+(a.length?"&"+a:"")}function Ys(e){const t=e;if(!t.detail?.searchFormId)return;const{searchFormId:n}=t.detail,r=ft.get(n);r&&r()}window.addEventListener("voxel-fse:post-feed-ready",Ys),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",He):He(),window.addEventListener("turbo:load",He),window.addEventListener("pjax:complete",He)})(ReactDOM,React,ReactDOM,wp.apiFetch);
