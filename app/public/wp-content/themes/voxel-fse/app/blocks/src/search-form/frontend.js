(function(jt,a,ft,zt){"use strict";function qt(){if(typeof window<"u"&&window.wpApiSettings?.root)return window.wpApiSettings.root.replace(/\/wp-json\/?$/,"")+"?vx=1";if(typeof document<"u"){const e=document.querySelector('link[rel="https://api.w.org/"]');if(e){const t=e.getAttribute("href");if(t)return t.replace(/\/wp-json\/?$/,"")+"?vx=1"}}return typeof window<"u"?window.location.origin+"?vx=1":"/?vx=1"}function Kt(){const e=qt();try{return new URL(e).pathname.replace(/\/$/,"")}catch{return""}}function mt(){if(typeof window<"u"&&window.wpApiSettings?.root)return window.wpApiSettings.root;if(typeof document<"u"){const t=document.querySelector('link[rel="https://api.w.org/"]');if(t){const r=t.getAttribute("href");if(r)return r}}const e=Kt();return typeof window<"u"?window.location.origin+e+"/wp-json/":"/wp-json/"}function Zt({attributes:e,postTypes:t,context:r,onSubmit:n,onPostTypeChange:i}){const[c,o]=a.useState(()=>({currentPostType:e.postTypes[0]||"",filterValues:{},activeFilterCount:0,portalActive:!1,loading:!1,resetting:!1,narrowedValues:null,narrowingFilters:!1})),d=a.useRef(!1),m=a.useRef(null),v=a.useMemo(()=>t.find(R=>R.key===c.currentPostType),[t,c.currentPostType]),f=a.useMemo(()=>e.filterLists[c.currentPostType]||[],[e.filterLists,c.currentPostType]);a.useEffect(()=>{e.postTypes.length>0&&!e.postTypes.includes(c.currentPostType)&&o(R=>({...R,currentPostType:e.postTypes[0],filterValues:{}}))},[e.postTypes,c.currentPostType]),a.useEffect(()=>{const R=Object.values(c.filterValues).filter(T=>T!=null&&T!==""&&T!==!1).length;o(T=>({...T,activeFilterCount:R}))},[c.filterValues]);const g=a.useCallback(R=>{o(T=>T.currentPostType===R?T:{...T,currentPostType:R,filterValues:{}}),r==="editor"&&i&&i(R),r==="frontend"&&n&&setTimeout(()=>{n({postType:R})},50)},[r,n,i]),F=a.useCallback((R,T)=>{o(A=>({...A,filterValues:{...A.filterValues,[R]:T}})),e.searchOn==="change"&&r==="frontend"&&setTimeout(()=>{w()},300)},[e.searchOn,r]),b=a.useCallback((R=!1)=>{if(o(T=>({...T,filterValues:{},activeFilterCount:0,resetting:!0,portalActive:R?!1:T.portalActive})),setTimeout(()=>{o(T=>({...T,resetting:!1}))},100),r==="frontend"){const T=new CustomEvent("voxel-search-clear",{detail:{postType:c.currentPostType}});window.dispatchEvent(T)}},[r,c.currentPostType]),P=a.useCallback(()=>{o(R=>({...R,portalActive:!R.portalActive}))},[]),y=a.useCallback(async()=>{if(!e.adaptiveFiltering||r!=="frontend")return;if(d.current){d.current=!1;return}const R=f.filter(p=>p.type==="range"||p.type==="terms");if(R.length===0)return;const T=new URLSearchParams;T.set("post_type",c.currentPostType),Object.entries(c.filterValues).forEach(([p,h])=>{h!=null&&h!==""&&(Array.isArray(h)?T.set(p,h.join(",")):typeof h=="object"?T.set(p,JSON.stringify(h)):T.set(p,String(h)))});const A=[];R.forEach(p=>{if(p.type==="terms"){const h=v?.filters?.find(C=>C.key===p.filterKey);if(h?.props?.terms){const C=_=>{_.forEach(x=>{x.term_taxonomy_id&&A.push(x.term_taxonomy_id),x.children&&Array.isArray(x.children)&&C(x.children)})};C(h.props.terms)}}}),o(p=>({...p,narrowingFilters:!0}));try{const p=mt(),h=await fetch(`${p}voxel-fse/v1/search-form/narrow-filters?${T.toString()}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({term_taxonomy_ids:A})});if(!h.ok)throw new Error(`HTTP ${h.status}`);const C=await h.json();C.success&&C.data?(o(_=>({..._,narrowedValues:{ranges:C.data.ranges||{},terms:C.data.terms||{}},narrowingFilters:!1})),d.current=!0):o(_=>({..._,narrowingFilters:!1}))}catch(p){console.error("[useSearchForm] Adaptive filtering error:",p),o(h=>({...h,narrowingFilters:!1}))}},[e.adaptiveFiltering,r,f,c.currentPostType,c.filterValues,v]);a.useEffect(()=>{if(!(!e.adaptiveFiltering||r!=="frontend"))return m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{y()},300),()=>{m.current&&clearTimeout(m.current)}},[c.filterValues,e.adaptiveFiltering,r,y]);const w=a.useCallback(()=>{o(R=>({...R,loading:!0})),n&&n({postType:c.currentPostType,...c.filterValues}),r==="frontend"&&Jt(c.filterValues,c.currentPostType),o(R=>({...R,loading:!1}))},[r,n,c.currentPostType,c.filterValues]),M=a.useCallback(()=>{w()},[w]);return{state:c,setCurrentPostType:g,setFilterValue:F,clearAll:b,togglePortal:P,submit:M,currentPostTypeConfig:v,filterConfigs:f,narrowedValues:c.narrowedValues,narrowingFilters:c.narrowingFilters}}function Jt(e,t){const r=new URL(window.location.href),n=[];r.searchParams.forEach((i,c)=>{(c.startsWith("filter_")||c==="post_type")&&n.push(c)}),n.forEach(i=>r.searchParams.delete(i)),t&&r.searchParams.set("post_type",t),Object.entries(e).forEach(([i,c])=>{c!=null&&c!==""&&(Array.isArray(c)?r.searchParams.set(`filter_${i}`,c.join(",")):typeof c=="object"?r.searchParams.set(`filter_${i}`,JSON.stringify(c)):r.searchParams.set(`filter_${i}`,String(c)))}),window.history.replaceState({},"",r.toString())}function Ge(e){return typeof e=="string"&&e.includes("@tags()")}function pt(e){if(!Ge(e))return e;const t=e.match(/@tags\(\)(.*?)@endtags\(\)/s);return t?t[1]:e}async function ht(e,t={}){try{return(await zt({path:"/voxel-fse/v1/dynamic-data/render",method:"POST",data:{expression:e,context:t}})).rendered}catch(r){return console.error("Failed to render dynamic tag:",r),e}}function fe({isOpen:e,target:t,title:r="",icon:n,saveLabel:i="Save",clearLabel:c="Clear",showClear:o=!0,showSave:d=!0,onSave:m,onClear:v,onClose:f,children:g,className:F=""}){const b=a.useRef(null),P=a.useRef(null),[y,w]=a.useState({position:"absolute",top:"-9999px",left:"-9999px"}),M=a.useRef(""),R=a.useCallback((p=!1)=>{if(!P.current||!t.current||!b.current)return;const h=t.current,C=b.current,_=P.current,x=document.body.clientWidth,L=h.getBoundingClientRect(),O=h.offsetWidth,z={left:L.left+window.pageXOffset,top:L.top+window.pageYOffset},Z=C.getBoundingClientRect(),H=window.getComputedStyle(_),W=parseFloat(H.minWidth)||0,E=_.querySelector(".pika-single");let q;if(E){const ie=E.classList.contains("is-range")||E.querySelectorAll(".pika-lendar").length>1||_.closest(".ts-booking-date-range")!==null;q=Math.max(ie?640:420,W)}else q=Math.max(L.width,W);const D=z.left+O/2,re=x/2;let j;D>re+1?j=z.left-q+O:j=z.left;const ne=window.innerHeight,V=Z.height;let X=z.top+L.height;const K=L.bottom+V>ne,Q=L.top-V>=0;K&&Q&&(X=z.top-V);const ce={top:`${X}px`,left:`${j}px`,width:`${q}px`,position:"absolute"},pe=JSON.stringify(ce);pe!==M.current&&(M.current=pe,p?w(ce):requestAnimationFrame(()=>w(ce)))},[t]);if(a.useEffect(()=>{if(!e)return;const p=C=>{const _=C.target;P.current?.contains(_)||f()},h=requestAnimationFrame(()=>{document.addEventListener("mousedown",p)});return()=>{cancelAnimationFrame(h),document.removeEventListener("mousedown",p)}},[e,f]),a.useEffect(()=>{if(!e)return;const p=h=>{h.key==="Escape"&&f()};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[e,f]),a.useEffect(()=>{if(!e)return;R(!0);const p=()=>R();window.addEventListener("scroll",p,!0);const h=()=>R();window.addEventListener("resize",h,!0);let C=null;return P.current&&(C=new ResizeObserver(()=>R(!0)),C.observe(P.current)),()=>{window.removeEventListener("scroll",p,!0),window.removeEventListener("resize",h,!0),C?.disconnect()}},[e,R]),!e)return null;const T=()=>React.createElement("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M14 1.41L12.59 0L7 5.59L1.41 0L0 1.41L5.59 7L0 12.59L1.41 14L7 8.41L12.59 14L14 12.59L8.41 7L14 1.41Z",fill:"currentColor"})),A=()=>React.createElement("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z",fill:"currentColor"}));return ft.createPortal(React.createElement("div",{className:`elementor vx-popup ${F}`.trim()},React.createElement("div",{className:"ts-popup-root elementor-element"},React.createElement("div",{className:"ts-form elementor-element",style:y,ref:b},React.createElement("div",{className:"ts-field-popup-container"},React.createElement("div",{className:"ts-field-popup triggers-blur",ref:P},r&&React.createElement("div",{className:"ts-popup-head flexify ts-sticky-top"},React.createElement("div",{className:"ts-popup-name flexify"},n&&React.createElement("span",{dangerouslySetInnerHTML:{__html:n}}),React.createElement("span",null,r)),React.createElement("ul",{className:"flexify simplify-ul"},React.createElement("li",{className:"flexify ts-popup-close"},React.createElement("a",{href:"#",onClick:p=>{p.preventDefault(),f()},className:"ts-icon-btn","aria-label":"Close"},React.createElement(T,null))))),React.createElement("div",{className:"ts-popup-content-wrapper min-scroll"},g),d||o?React.createElement("div",{className:"ts-popup-controller"},React.createElement("ul",{className:"flexify simplify-ul"},React.createElement("li",{className:"flexify ts-popup-close"},React.createElement("a",{href:"#",onClick:p=>{p.preventDefault(),f()},className:"ts-icon-btn","aria-label":"Close"},React.createElement(T,null))),o&&v&&React.createElement("li",{className:"flexify hide-d",onClick:p=>{p.preventDefault(),v()}},React.createElement("a",{href:"#",className:"ts-icon-btn"},React.createElement(A,null))),o&&v&&React.createElement("li",{className:"flexify hide-m",onClick:p=>{p.preventDefault(),v()}},React.createElement("a",{href:"#",className:"ts-btn ts-btn-1"},c)),d&&React.createElement("li",{className:"flexify"},React.createElement("a",{href:"#",onClick:p=>{p.preventDefault(),m()},className:"ts-btn ts-btn-2"},i)))):React.createElement("div",{className:"ts-popup-controller hide-d"},React.createElement("ul",{className:"flexify simplify-ul"},React.createElement("li",{className:"flexify ts-popup-close"},React.createElement("a",{href:"#",onClick:p=>{p.preventDefault(),f()},className:"ts-icon-btn","aria-label":"Close"},React.createElement(T,null)))))))))),document.body)}const Pe=({value:e,onChange:t,onSelect:r,pickerConfig:n,onPickerReady:i})=>{const c=a.useRef(null),o=a.useRef(null),d=a.useRef(null),m=a.useRef(t),v=a.useRef(r);return m.current=t,v.current=r,a.useEffect(()=>{if(!c.current||!o.current)return;const f=window.Pikaday;if(!f){console.error("Pikaday not loaded - window.Pikaday is undefined");return}const g=requestAnimationFrame(()=>{d.current=new f({field:o.current,container:c.current,bound:!1,firstDay:1,keyboardInput:!1,numberOfMonths:2,defaultDate:e||void 0,onSelect:F=>{m.current(F),v.current&&v.current(F)},...n}),i&&d.current&&i(d.current)});return()=>{cancelAnimationFrame(g),setTimeout(()=>{d.current?.destroy(),d.current=null},200)}},[]),a.useEffect(()=>{d.current&&(e&&d.current.setDate(e,!0),d.current.draw(!0))},[e]),a.createElement("div",{className:"ts-booking-date ts-booking-date-range ts-form-group",ref:c},a.createElement("input",{type:"hidden",ref:o}))},be={search:React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},React.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.25 2.75C6.14154 2.75 2 6.89029 2 11.998C2 17.1056 6.14154 21.2459 11.25 21.2459C13.5335 21.2459 15.6238 20.4187 17.2373 19.0475L20.7182 22.5287C21.011 22.8216 21.4859 22.8217 21.7788 22.5288C22.0717 22.2359 22.0718 21.761 21.7789 21.4681L18.2983 17.9872C19.6714 16.3736 20.5 14.2826 20.5 11.998C20.5 6.89029 16.3585 2.75 11.25 2.75ZM3.5 11.998C3.5 7.71905 6.96962 4.25 11.25 4.25C15.5304 4.25 19 7.71905 19 11.998C19 16.2769 15.5304 19.7459 11.25 19.7459C6.96962 19.7459 3.5 16.2769 3.5 11.998Z",fill:"#343C54"})),close:React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},React.createElement("path",{d:"M5.9545 5.95548C6.39384 5.51614 7.10616 5.51614 7.5455 5.95548L11.999 10.409L16.4524 5.95561C16.8918 5.51627 17.6041 5.51627 18.0434 5.95561C18.4827 6.39495 18.4827 7.10726 18.0434 7.5466L13.59 12L18.0434 16.4534C18.4827 16.8927 18.4827 17.605 18.0434 18.0444C17.6041 18.4837 16.8918 18.4837 16.4524 18.0444L11.999 13.591L7.5455 18.0445C7.10616 18.4839 6.39384 18.4839 5.9545 18.0445C5.51517 17.6052 5.51516 16.8929 5.9545 16.4535L10.408 12L5.9545 7.54647C5.51516 7.10713 5.51517 6.39482 5.9545 5.95548Z",fill:"#343C54"})),reload:React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},React.createElement("path",{d:"M21.6009 10.4593C22.001 10.3521 22.2384 9.94088 22.1312 9.54078C21.59 7.52089 20.3974 5.73603 18.7384 4.46302C17.0793 3.19001 15.0466 2.5 12.9555 2.5C10.8644 2.5 8.83164 3.19001 7.17262 4.46302C6.12405 5.26762 5.26179 6.2767 4.63257 7.42036L2.86504 6.92617C2.76093 6.89707 2.65423 6.89133 2.55153 6.9068C2.46222 6.91962 2.37374 6.94889 2.29039 6.99582C1.92945 7.19903 1.80158 7.65636 2.00479 8.0173L3.73942 11.0983C3.83701 11.2717 3.99946 11.3991 4.19104 11.4527C4.30333 11.4841 4.42023 11.4886 4.53266 11.4673C4.61373 11.4524 4.69254 11.4242 4.7657 11.383L7.84641 9.64831C8.11073 9.49948 8.25936 9.20608 8.22302 8.90493C8.18668 8.60378 7.9725 8.35417 7.68037 8.27249L6.1241 7.83737C6.6343 6.99996 7.29751 6.2579 8.08577 5.65305C9.48282 4.58106 11.1946 4 12.9555 4C14.7164 4 16.4282 4.58106 17.8252 5.65305C19.2223 6.72504 20.2266 8.22807 20.6823 9.92901C20.7895 10.3291 21.2008 10.5665 21.6009 10.4593Z",fill:"#343C54"}),React.createElement("path",{d:"M4.30739 13.5387C3.90729 13.6459 3.66985 14.0572 3.77706 14.4573C4.31829 16.4771 5.51089 18.262 7.16991 19.535C8.82892 20.808 10.8616 21.498 12.9528 21.498C15.0439 21.498 17.0766 20.808 18.7356 19.535C19.7859 18.7291 20.6493 17.7181 21.2787 16.5722L23.0083 17.0557C23.1218 17.0961 23.2447 17.1091 23.3661 17.0917C23.5554 17.0658 23.7319 16.968 23.8546 16.8116C24.0419 16.573 24.0669 16.245 23.9181 15.9807L22.1835 12.8996C22.0859 12.7263 21.9234 12.5988 21.7319 12.5453C21.64 12.5196 21.5451 12.5119 21.4521 12.5216C21.3493 12.5317 21.2488 12.5629 21.1571 12.6146L18.0764 14.3493C17.7155 14.5525 17.5876 15.0099 17.7909 15.3708C17.9016 15.5675 18.0879 15.695 18.2929 15.7373L19.7875 16.1552C19.2768 16.9949 18.6125 17.7388 17.8225 18.345C16.4255 19.417 14.7137 19.998 12.9528 19.998C11.1918 19.998 9.4801 19.417 8.08305 18.345C6.686 17.273 5.68171 15.77 5.22595 14.069C5.11874 13.6689 4.70749 13.4315 4.30739 13.5387Z",fill:"#343C54"})),filterslider:React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},React.createElement("path",{d:"M8.89789 3.25C10.3318 3.25 11.5358 4.23471 11.8704 5.56481H20.3125C20.7267 5.56481 21.0625 5.90059 21.0625 6.31481C21.0625 6.72902 20.7267 7.06481 20.3125 7.06481H11.8705C11.536 8.3951 10.332 9.38 8.89789 9.38C7.46381 9.38 6.25976 8.3951 5.92527 7.06481H4.3125C3.89829 7.06481 3.5625 6.72902 3.5625 6.31481C3.5625 5.90059 3.89829 5.56481 4.3125 5.56481H5.92537C6.26 4.23471 7.46395 3.25 8.89789 3.25Z",fill:"#343C54"}),React.createElement("path",{d:"M12.737 12.7503H4.3125C3.89829 12.7503 3.5625 12.4145 3.5625 12.0003C3.5625 11.5861 3.89829 11.2503 4.3125 11.2503H12.7369C13.0714 9.91998 14.2754 8.93506 15.7095 8.93506C17.1436 8.93506 18.3477 9.91998 18.6822 11.2503H20.3125C20.7267 11.2503 21.0625 11.5861 21.0625 12.0003C21.0625 12.4145 20.7267 12.7503 20.3125 12.7503H18.682C18.3474 14.0804 17.1435 15.0651 15.7095 15.0651C14.2756 15.0651 13.0717 14.0804 12.737 12.7503Z",fill:"#343C54"}),React.createElement("path",{d:"M12.5932 16.9354C12.2587 15.605 11.0546 14.6201 9.62055 14.6201C8.18645 14.6201 6.9824 15.605 6.64792 16.9354H4.3125C3.89829 16.9354 3.5625 17.2711 3.5625 17.6854C3.5625 18.0996 3.89829 18.4354 4.3125 18.4354H6.64804C6.98268 19.7654 8.18662 20.7501 9.62055 20.7501C11.0545 20.7501 12.2584 19.7654 12.5931 18.4354H20.3125C20.7267 18.4354 21.0625 18.0996 21.0625 17.6854C21.0625 17.2711 20.7267 16.9354 20.3125 16.9354H12.5932Z",fill:"#343C54"})),crosshairs:React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C12.5523 2 13 2.44772 13 3V4.06189C16.6187 4.51314 19.4869 7.38128 19.9381 11H21C21.5523 11 22 11.4477 22 12C22 12.5523 21.5523 13 21 13H19.9381C19.4869 16.6187 16.6187 19.4869 13 19.9381V21C13 21.5523 12.5523 22 12 22C11.4477 22 11 21.5523 11 21V19.9381C7.38128 19.4869 4.51314 16.6187 4.06189 13H3C2.44772 13 2 12.5523 2 12C2 11.4477 2.44772 11 3 11H4.06189C4.51314 7.38128 7.38128 4.51314 11 4.06189V3C11 2.44772 11.4477 2 12 2ZM6.07089 11C6.50618 8.48991 8.48991 6.50618 11 6.07089V8C11 8.55228 11.4477 9 12 9C12.5523 9 13 8.55228 13 8V6.07089C15.5101 6.50618 17.4938 8.48991 17.9291 11H16C15.4477 11 15 11.4477 15 12C15 12.5523 15.4477 13 16 13H17.9291C17.4938 15.5101 15.5101 17.4938 13 17.9291V16C13 15.4477 12.5523 15 12 15C11.4477 15 11 15.4477 11 16V17.9291C8.48991 17.4938 6.50618 15.5101 6.07089 13H8C8.55228 13 9 12.5523 9 12C9 11.4477 8.55228 11 8 11H6.07089Z",fill:"#343C54"}))};function Xt(e,t){const r={},n=[t];return e.rowVisibility==="hide"&&(r.display="none"),e.width&&e.width>0&&(r.width=`${e.width}%`,r.flexGrow=0,r.flexShrink=0),e.hideFilter&&n.push("vx-hidden"),e.alignContent&&(r.justifyContent=e.alignContent),e.hideLabel&&n.push("hide-label"),{style:r,className:n.join(" ")}}function te(e,t){return Xt(e,t)}function Yt(e){const t={},r=["ts-field-popup","triggers-blur"];return e.customPopupEnabled&&(e.popupMinWidth&&e.popupMinWidth>0&&(t.minWidth=`${e.popupMinWidth}px`),e.popupMaxWidth&&e.popupMaxWidth>0&&(t.maxWidth=`${e.popupMaxWidth}px`),e.popupMaxHeight&&e.popupMaxHeight>0&&(t.maxHeight=`${e.popupMaxHeight}px`),e.popupCenterPosition&&r.push("ts-popup-centered")),{style:t,className:r.join(" ")}}let vt=!1;function Qe(){if(vt)return!0;if(!window.Voxel?.mixins?.base)return!1;const e=window.Voxel.mixins.base;return e.mounted&&!e._originalMounted?(e._originalMounted=e.mounted,e.mounted=function(){try{const t=this.$root?.$options?.el||this.$el;if(t){const r=t.closest?.(".elementor-element");if(r)this.widget_id=r.dataset?.id||"";else{const i=t.closest?.("[data-block-id]");this.widget_id=i&&i.dataset?.blockId||""}const n=t.closest?.(".elementor");if(n)this.post_id=n.dataset?.elementorId||"";else{const i=document.body.className.match(/postid-(\d+)/);this.post_id=i?i[1]:""}}e._originalMounted&&e._originalMounted!==e.mounted&&e._originalMounted.call(this)}catch(t){console.warn("[VoxelShim] Error in patched mounted():",t),this.widget_id="",this.post_id=""}},vt=!0,console.log("[VoxelShim] Successfully patched Voxel.mixins.base.mounted"),!0):!1}function gt(){if(Qe())return;let e=0;const t=50,n=setInterval(()=>{if(e++,Qe()){clearInterval(n);return}e>=t&&(clearInterval(n),console.warn("[VoxelShim] Voxel.mixins.base not found after 5 seconds"))},100);typeof document<"u"&&document.addEventListener("voxel:ready",()=>{Qe(),clearInterval(n)},{once:!0})}typeof window<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",gt,{once:!0}):gt()),typeof window<"u"&&typeof window._vx_file_upload_cache>"u"&&(window._vx_file_upload_cache=[]);function Gt({config:e,filterData:t,value:r,onChange:n}){const i=a.useRef(null),c=a.useRef(null),[o,d]=a.useState(!1),[m,v]=a.useState(""),f=typeof r=="string"?r:"",g=t.props?.placeholder||t.label||"Type keywords...",F=e.displayAs||t.props?.display_as||"inline",b=t.icon||"";a.useEffect(()=>{o&&(v(f),setTimeout(()=>{c.current?.focus()},50))},[o,f]);const P=C=>{n(C.target.value)},y=C=>{v(C.target.value)},w=a.useCallback(()=>{d(!0)},[]),M=a.useCallback(()=>{n(m),d(!1)},[m,n]),R=a.useCallback(()=>{v(""),n("")},[n]),T=a.useCallback(C=>{C.key==="Enter"&&(C.preventDefault(),M())},[M]);if(F==="inline"){const{style:C,className:_}=te(e,"ts-form-group ts-inline-filter");return React.createElement("div",{className:_,style:C},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{className:"ts-input-icon flexify"},b&&React.createElement("span",{dangerouslySetInnerHTML:{__html:b}}),React.createElement("input",{type:"text",value:f,onChange:P,placeholder:g,className:"inline-input"})))}const A=f.length>0,{style:p,className:h}=te(e,"ts-form-group");return React.createElement("div",{className:h,style:p},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:i,className:`ts-filter ts-popup-target ${A?"ts-filled":""}`,onClick:w,onMouseDown:C=>C.preventDefault(),role:"button",tabIndex:0},b&&React.createElement("span",{dangerouslySetInnerHTML:{__html:b}}),React.createElement("div",{className:"ts-filter-text"},A?f:g)),React.createElement(fe,{isOpen:o,target:i,title:"",icon:b,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:M,onClear:R,onClose:()=>d(!1)},React.createElement("div",{className:"ts-input-icon ts-sticky-top flexify"},React.createElement("span",null,be.search),React.createElement("input",{ref:c,type:"text",value:m,onChange:y,onKeyDown:T,placeholder:g,className:"autofocus border-none"}))))}var we;(function(e){e.Range="range",e.Steps="steps",e.Positions="positions",e.Count="count",e.Values="values"})(we||(we={}));var ve;(function(e){e[e.None=-1]="None",e[e.NoValue=0]="NoValue",e[e.LargeValue=1]="LargeValue",e[e.SmallValue=2]="SmallValue"})(ve||(ve={}));function Qt(e){return He(e)&&typeof e.from=="function"}function He(e){return typeof e=="object"&&typeof e.to=="function"}function bt(e){e.parentElement.removeChild(e)}function $e(e){return e!=null}function Et(e){e.preventDefault()}function $t(e){return e.filter(function(t){return this[t]?!1:this[t]=!0},{})}function er(e,t){return Math.round(e/t)*t}function tr(e,t){var r=e.getBoundingClientRect(),n=e.ownerDocument,i=n.documentElement,c=wt(n);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(c.x=0),t?r.top+c.y-i.clientTop:r.left+c.x-i.clientLeft}function Ee(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function yt(e,t,r){r>0&&(me(e,t),setTimeout(function(){Ue(e,t)},r))}function St(e){return Math.max(Math.min(e,100),0)}function We(e){return Array.isArray(e)?e:[e]}function rr(e){e=String(e);var t=e.split(".");return t.length>1?t[1].length:0}function me(e,t){e.classList&&!/\s/.test(t)?e.classList.add(t):e.className+=" "+t}function Ue(e,t){e.classList&&!/\s/.test(t)?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}function nr(e,t){return e.classList?e.classList.contains(t):new RegExp("\\b"+t+"\\b").test(e.className)}function wt(e){var t=window.pageXOffset!==void 0,r=(e.compatMode||"")==="CSS1Compat",n=t?window.pageXOffset:r?e.documentElement.scrollLeft:e.body.scrollLeft,i=t?window.pageYOffset:r?e.documentElement.scrollTop:e.body.scrollTop;return{x:n,y:i}}function sr(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function ar(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch{}return e}function lr(){return window.CSS&&CSS.supports&&CSS.supports("touch-action","none")}function et(e,t){return 100/(t-e)}function tt(e,t,r){return t*100/(e[r+1]-e[r])}function or(e,t){return tt(e,e[0]<0?t+Math.abs(e[0]):t-e[0],0)}function ir(e,t){return t*(e[1]-e[0])/100+e[0]}function Me(e,t){for(var r=1;e>=t[r];)r+=1;return r}function cr(e,t,r){if(r>=e.slice(-1)[0])return 100;var n=Me(r,e),i=e[n-1],c=e[n],o=t[n-1],d=t[n];return o+or([i,c],r)/et(o,d)}function ur(e,t,r){if(r>=100)return e.slice(-1)[0];var n=Me(r,t),i=e[n-1],c=e[n],o=t[n-1],d=t[n];return ir([i,c],(r-o)*et(o,d))}function dr(e,t,r,n){if(n===100)return n;var i=Me(n,e),c=e[i-1],o=e[i];return r?n-c>(o-c)/2?o:c:t[i-1]?e[i-1]+er(n-e[i-1],t[i-1]):n}var Ct=(function(){function e(t,r,n){this.xPct=[],this.xVal=[],this.xSteps=[],this.xNumSteps=[],this.xHighestCompleteStep=[],this.xSteps=[n||!1],this.xNumSteps=[!1],this.snap=r;var i,c=[];for(Object.keys(t).forEach(function(o){c.push([We(t[o]),o])}),c.sort(function(o,d){return o[0][0]-d[0][0]}),i=0;i<c.length;i++)this.handleEntryPoint(c[i][1],c[i][0]);for(this.xNumSteps=this.xSteps.slice(0),i=0;i<this.xNumSteps.length;i++)this.handleStepPoint(i,this.xNumSteps[i])}return e.prototype.getDistance=function(t){for(var r=[],n=0;n<this.xNumSteps.length-1;n++)r[n]=tt(this.xVal,t,n);return r},e.prototype.getAbsoluteDistance=function(t,r,n){var i=0;if(t<this.xPct[this.xPct.length-1])for(;t>this.xPct[i+1];)i++;else t===this.xPct[this.xPct.length-1]&&(i=this.xPct.length-2);!n&&t===this.xPct[i+1]&&i++,r===null&&(r=[]);var c,o=1,d=r[i],m=0,v=0,f=0,g=0;for(n?c=(t-this.xPct[i])/(this.xPct[i+1]-this.xPct[i]):c=(this.xPct[i+1]-t)/(this.xPct[i+1]-this.xPct[i]);d>0;)m=this.xPct[i+1+g]-this.xPct[i+g],r[i+g]*o+100-c*100>100?(v=m*c,o=(d-100*c)/r[i+g],c=1):(v=r[i+g]*m/100*o,o=0),n?(f=f-v,this.xPct.length+g>=1&&g--):(f=f+v,this.xPct.length-g>=1&&g++),d=r[i+g]*o;return t+f},e.prototype.toStepping=function(t){return t=cr(this.xVal,this.xPct,t),t},e.prototype.fromStepping=function(t){return ur(this.xVal,this.xPct,t)},e.prototype.getStep=function(t){return t=dr(this.xPct,this.xSteps,this.snap,t),t},e.prototype.getDefaultStep=function(t,r,n){var i=Me(t,this.xPct);return(t===100||r&&t===this.xPct[i-1])&&(i=Math.max(i-1,1)),(this.xVal[i]-this.xVal[i-1])/n},e.prototype.getNearbySteps=function(t){var r=Me(t,this.xPct);return{stepBefore:{startValue:this.xVal[r-2],step:this.xNumSteps[r-2],highestStep:this.xHighestCompleteStep[r-2]},thisStep:{startValue:this.xVal[r-1],step:this.xNumSteps[r-1],highestStep:this.xHighestCompleteStep[r-1]},stepAfter:{startValue:this.xVal[r],step:this.xNumSteps[r],highestStep:this.xHighestCompleteStep[r]}}},e.prototype.countStepDecimals=function(){var t=this.xNumSteps.map(rr);return Math.max.apply(null,t)},e.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]},e.prototype.convert=function(t){return this.getStep(this.toStepping(t))},e.prototype.handleEntryPoint=function(t,r){var n;if(t==="min"?n=0:t==="max"?n=100:n=parseFloat(t),!Ee(n)||!Ee(r[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(n),this.xVal.push(r[0]);var i=Number(r[1]);n?this.xSteps.push(isNaN(i)?!1:i):isNaN(i)||(this.xSteps[0]=i),this.xHighestCompleteStep.push(0)},e.prototype.handleStepPoint=function(t,r){if(r){if(this.xVal[t]===this.xVal[t+1]){this.xSteps[t]=this.xHighestCompleteStep[t]=this.xVal[t];return}this.xSteps[t]=tt([this.xVal[t],this.xVal[t+1]],r,0)/et(this.xPct[t],this.xPct[t+1]);var n=(this.xVal[t+1]-this.xVal[t])/this.xNumSteps[t],i=Math.ceil(Number(n.toFixed(3))-1),c=this.xVal[t]+this.xNumSteps[t]*i;this.xHighestCompleteStep[t]=c}},e})(),xt={to:function(e){return e===void 0?"":e.toFixed(2)},from:Number},Rt={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},Ce={tooltips:".__tooltips",aria:".__aria"};function fr(e,t){if(!Ee(t))throw new Error("noUiSlider: 'step' is not numeric.");e.singleStep=t}function mr(e,t){if(!Ee(t))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");e.keyboardPageMultiplier=t}function pr(e,t){if(!Ee(t))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");e.keyboardMultiplier=t}function hr(e,t){if(!Ee(t))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");e.keyboardDefaultStep=t}function vr(e,t){if(typeof t!="object"||Array.isArray(t))throw new Error("noUiSlider: 'range' is not an object.");if(t.min===void 0||t.max===void 0)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");e.spectrum=new Ct(t,e.snap||!1,e.singleStep)}function gr(e,t){if(t=We(t),!Array.isArray(t)||!t.length)throw new Error("noUiSlider: 'start' option is incorrect.");e.handles=t.length,e.start=t}function br(e,t){if(typeof t!="boolean")throw new Error("noUiSlider: 'snap' option must be a boolean.");e.snap=t}function Er(e,t){if(typeof t!="boolean")throw new Error("noUiSlider: 'animate' option must be a boolean.");e.animate=t}function yr(e,t){if(typeof t!="number")throw new Error("noUiSlider: 'animationDuration' option must be a number.");e.animationDuration=t}function kt(e,t){var r=[!1],n;if(t==="lower"?t=[!0,!1]:t==="upper"&&(t=[!1,!0]),t===!0||t===!1){for(n=1;n<e.handles;n++)r.push(t);r.push(!1)}else{if(!Array.isArray(t)||!t.length||t.length!==e.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");r=t}e.connect=r}function Sr(e,t){switch(t){case"horizontal":e.ort=0;break;case"vertical":e.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function Nt(e,t){if(!Ee(t))throw new Error("noUiSlider: 'margin' option must be numeric.");t!==0&&(e.margin=e.spectrum.getDistance(t))}function wr(e,t){if(!Ee(t))throw new Error("noUiSlider: 'limit' option must be numeric.");if(e.limit=e.spectrum.getDistance(t),!e.limit||e.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function Cr(e,t){var r;if(!Ee(t)&&!Array.isArray(t))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(t)&&!(t.length===2||Ee(t[0])||Ee(t[1])))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(t!==0){for(Array.isArray(t)||(t=[t,t]),e.padding=[e.spectrum.getDistance(t[0]),e.spectrum.getDistance(t[1])],r=0;r<e.spectrum.xNumSteps.length-1;r++)if(e.padding[0][r]<0||e.padding[1][r]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var n=t[0]+t[1],i=e.spectrum.xVal[0],c=e.spectrum.xVal[e.spectrum.xVal.length-1];if(n/(c-i)>1)throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}function xr(e,t){switch(t){case"ltr":e.dir=0;break;case"rtl":e.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function Rr(e,t){if(typeof t!="string")throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var r=t.indexOf("tap")>=0,n=t.indexOf("drag")>=0,i=t.indexOf("fixed")>=0,c=t.indexOf("snap")>=0,o=t.indexOf("hover")>=0,d=t.indexOf("unconstrained")>=0,m=t.indexOf("invert-connects")>=0,v=t.indexOf("drag-all")>=0,f=t.indexOf("smooth-steps")>=0;if(i){if(e.handles!==2)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");Nt(e,e.start[1]-e.start[0])}if(m&&e.handles!==2)throw new Error("noUiSlider: 'invert-connects' behaviour must be used with 2 handles");if(d&&(e.margin||e.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");e.events={tap:r||c,drag:n,dragAll:v,smoothSteps:f,fixed:i,snap:c,hover:o,unconstrained:d,invertConnects:m}}function kr(e,t){if(t!==!1)if(t===!0||He(t)){e.tooltips=[];for(var r=0;r<e.handles;r++)e.tooltips.push(t)}else{if(t=We(t),t.length!==e.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");t.forEach(function(n){if(typeof n!="boolean"&&!He(n))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")}),e.tooltips=t}}function Nr(e,t){if(t.length!==e.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");e.handleAttributes=t}function Tr(e,t){if(!He(t))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");e.ariaFormat=t}function _r(e,t){if(!Qt(t))throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");e.format=t}function Lr(e,t){if(typeof t!="boolean")throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");e.keyboardSupport=t}function Pr(e,t){e.documentElement=t}function Mr(e,t){if(typeof t!="string"&&t!==!1)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");e.cssPrefix=t}function Ir(e,t){if(typeof t!="object")throw new Error("noUiSlider: 'cssClasses' must be an object.");typeof e.cssPrefix=="string"?(e.cssClasses={},Object.keys(t).forEach(function(r){e.cssClasses[r]=e.cssPrefix+t[r]})):e.cssClasses=t}function Tt(e){var t={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:xt,format:xt},r={step:{r:!1,t:fr},keyboardPageMultiplier:{r:!1,t:mr},keyboardMultiplier:{r:!1,t:pr},keyboardDefaultStep:{r:!1,t:hr},start:{r:!0,t:gr},connect:{r:!0,t:kt},direction:{r:!0,t:xr},snap:{r:!1,t:br},animate:{r:!1,t:Er},animationDuration:{r:!1,t:yr},range:{r:!0,t:vr},orientation:{r:!1,t:Sr},margin:{r:!1,t:Nt},limit:{r:!1,t:wr},padding:{r:!1,t:Cr},behaviour:{r:!0,t:Rr},ariaFormat:{r:!1,t:Tr},format:{r:!1,t:_r},tooltips:{r:!1,t:kr},keyboardSupport:{r:!0,t:Lr},documentElement:{r:!1,t:Pr},cssPrefix:{r:!0,t:Mr},cssClasses:{r:!0,t:Ir},handleAttributes:{r:!1,t:Nr}},n={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:Rt,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};e.format&&!e.ariaFormat&&(e.ariaFormat=e.format),Object.keys(r).forEach(function(m){if(!$e(e[m])&&n[m]===void 0){if(r[m].r)throw new Error("noUiSlider: '"+m+"' is required.");return}r[m].t(t,$e(e[m])?e[m]:n[m])}),t.pips=e.pips;var i=document.createElement("div"),c=i.style.msTransform!==void 0,o=i.style.transform!==void 0;t.transformRule=o?"transform":c?"msTransform":"webkitTransform";var d=[["left","top"],["right","bottom"]];return t.style=d[t.dir][t.ort],t}function Fr(e,t,r){var n=sr(),i=lr(),c=i&&ar(),o=e,d,m,v,f,g,F,b=t.spectrum,P=[],y=[],w=[],M=0,R={},T=!1,A=e.ownerDocument,p=t.documentElement||A.documentElement,h=A.body,C=A.dir==="rtl"||t.ort===1?0:100;function _(s,l){var u=A.createElement("div");return l&&me(u,l),s.appendChild(u),u}function x(s,l){var u=_(s,t.cssClasses.origin),S=_(u,t.cssClasses.handle);if(_(S,t.cssClasses.touchArea),S.setAttribute("data-handle",String(l)),t.keyboardSupport&&(S.setAttribute("tabindex","0"),S.addEventListener("keydown",function(N){return ye(N,l)})),t.handleAttributes!==void 0){var k=t.handleAttributes[l];Object.keys(k).forEach(function(N){S.setAttribute(N,k[N])})}return S.setAttribute("role","slider"),S.setAttribute("aria-orientation",t.ort?"vertical":"horizontal"),l===0?me(S,t.cssClasses.handleLower):l===t.handles-1&&me(S,t.cssClasses.handleUpper),u.handle=S,u}function L(s,l){return l?_(s,t.cssClasses.connect):!1}function O(s,l){m=_(l,t.cssClasses.connects),v=[],f=[],f.push(L(m,s[0]));for(var u=0;u<t.handles;u++)v.push(x(l,u)),w[u]=u,f.push(L(m,s[u+1]))}function z(s){me(s,t.cssClasses.target),t.dir===0?me(s,t.cssClasses.ltr):me(s,t.cssClasses.rtl),t.ort===0?me(s,t.cssClasses.horizontal):me(s,t.cssClasses.vertical);var l=getComputedStyle(s).direction;return l==="rtl"?me(s,t.cssClasses.textDirectionRtl):me(s,t.cssClasses.textDirectionLtr),_(s,t.cssClasses.base)}function Z(s,l){return!t.tooltips||!t.tooltips[l]?!1:_(s.firstChild,t.cssClasses.tooltip)}function H(){return o.hasAttribute("disabled")}function W(s){var l=v[s];return l.hasAttribute("disabled")}function E(s){s!=null?(v[s].setAttribute("disabled",""),v[s].handle.removeAttribute("tabindex")):(o.setAttribute("disabled",""),v.forEach(function(l){l.handle.removeAttribute("tabindex")}))}function q(s){s!=null?(v[s].removeAttribute("disabled"),v[s].handle.setAttribute("tabindex","0")):(o.removeAttribute("disabled"),v.forEach(function(l){l.removeAttribute("disabled"),l.handle.setAttribute("tabindex","0")}))}function D(){F&&(Be("update"+Ce.tooltips),F.forEach(function(s){s&&bt(s)}),F=null)}function re(){D(),F=v.map(Z),Le("update"+Ce.tooltips,function(s,l,u){if(!(!F||!t.tooltips)&&F[l]!==!1){var S=s[l];t.tooltips[l]!==!0&&(S=t.tooltips[l].to(u[l])),F[l].innerHTML=S}})}function j(){Be("update"+Ce.aria),Le("update"+Ce.aria,function(s,l,u,S,k){w.forEach(function(N){var B=v[N],I=Je(y,N,0,!0,!0,!0),$=Je(y,N,100,!0,!0,!0),ee=k[N],se=String(t.ariaFormat.to(u[N]));I=b.fromStepping(I).toFixed(1),$=b.fromStepping($).toFixed(1),ee=b.fromStepping(ee).toFixed(1),B.children[0].setAttribute("aria-valuemin",I),B.children[0].setAttribute("aria-valuemax",$),B.children[0].setAttribute("aria-valuenow",ee),B.children[0].setAttribute("aria-valuetext",se)})})}function ne(s){if(s.mode===we.Range||s.mode===we.Steps)return b.xVal;if(s.mode===we.Count){if(s.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var l=s.values-1,u=100/l,S=[];l--;)S[l]=l*u;return S.push(100),V(S,s.stepped)}return s.mode===we.Positions?V(s.values,s.stepped):s.mode===we.Values?s.stepped?s.values.map(function(k){return b.fromStepping(b.getStep(b.toStepping(k)))}):s.values:[]}function V(s,l){return s.map(function(u){return b.fromStepping(l?b.getStep(u):u)})}function X(s){function l(ee,se){return Number((ee+se).toFixed(7))}var u=ne(s),S={},k=b.xVal[0],N=b.xVal[b.xVal.length-1],B=!1,I=!1,$=0;return u=$t(u.slice().sort(function(ee,se){return ee-se})),u[0]!==k&&(u.unshift(k),B=!0),u[u.length-1]!==N&&(u.push(N),I=!0),u.forEach(function(ee,se){var ae,G,oe,he=ee,ue=u[se+1],de,it,ct,ut,Ht,dt,Wt,Ut=s.mode===we.Steps;for(Ut&&(ae=b.xNumSteps[se]),ae||(ae=ue-he),ue===void 0&&(ue=he),ae=Math.max(ae,1e-7),G=he;G<=ue;G=l(G,ae)){for(de=b.toStepping(G),it=de-$,Ht=it/(s.density||1),dt=Math.round(Ht),Wt=it/dt,oe=1;oe<=dt;oe+=1)ct=$+oe*Wt,S[ct.toFixed(5)]=[b.fromStepping(ct),0];ut=u.indexOf(G)>-1?ve.LargeValue:Ut?ve.SmallValue:ve.NoValue,!se&&B&&G!==ue&&(ut=0),G===ue&&I||(S[de.toFixed(5)]=[G,ut]),$=de}}),S}function K(s,l,u){var S,k,N=A.createElement("div"),B=(S={},S[ve.None]="",S[ve.NoValue]=t.cssClasses.valueNormal,S[ve.LargeValue]=t.cssClasses.valueLarge,S[ve.SmallValue]=t.cssClasses.valueSub,S),I=(k={},k[ve.None]="",k[ve.NoValue]=t.cssClasses.markerNormal,k[ve.LargeValue]=t.cssClasses.markerLarge,k[ve.SmallValue]=t.cssClasses.markerSub,k),$=[t.cssClasses.valueHorizontal,t.cssClasses.valueVertical],ee=[t.cssClasses.markerHorizontal,t.cssClasses.markerVertical];me(N,t.cssClasses.pips),me(N,t.ort===0?t.cssClasses.pipsHorizontal:t.cssClasses.pipsVertical);function se(G,oe){var he=oe===t.cssClasses.value,ue=he?$:ee,de=he?B:I;return oe+" "+ue[t.ort]+" "+de[G]}function ae(G,oe,he){if(he=l?l(oe,he):he,he!==ve.None){var ue=_(N,!1);ue.className=se(he,t.cssClasses.marker),ue.style[t.style]=G+"%",he>ve.NoValue&&(ue=_(N,!1),ue.className=se(he,t.cssClasses.value),ue.setAttribute("data-value",String(oe)),ue.style[t.style]=G+"%",ue.innerHTML=String(u.to(oe)))}}return Object.keys(s).forEach(function(G){ae(G,s[G][0],s[G][1])}),N}function Q(){g&&(bt(g),g=null)}function ce(s){Q();var l=X(s),u=s.filter,S=s.format||{to:function(k){return String(Math.round(k))}};return g=o.appendChild(K(l,u,S)),g}function pe(){var s=d.getBoundingClientRect(),l="offset"+["Width","Height"][t.ort];return t.ort===0?s.width||d[l]:s.height||d[l]}function ie(s,l,u,S){var k=function(B){var I=Re(B,S.pageOffset,S.target||l);if(!I||H()&&!S.doNotReject||nr(o,t.cssClasses.tap)&&!S.doNotReject||s===n.start&&I.buttons!==void 0&&I.buttons>1||S.hover&&I.buttons)return!1;c||I.preventDefault(),I.calcPoint=I.points[t.ort],u(I,S)},N=[];return s.split(" ").forEach(function(B){l.addEventListener(B,k,c?{passive:!0}:!1),N.push([B,k])}),N}function Re(s,l,u){var S=s.type.indexOf("touch")===0,k=s.type.indexOf("mouse")===0,N=s.type.indexOf("pointer")===0,B=0,I=0;if(s.type.indexOf("MSPointer")===0&&(N=!0),s.type==="mousedown"&&!s.buttons&&!s.touches)return!1;if(S){var $=function(ae){var G=ae.target;return G===u||u.contains(G)||s.composed&&s.composedPath().shift()===u};if(s.type==="touchstart"){var ee=Array.prototype.filter.call(s.touches,$);if(ee.length>1)return!1;B=ee[0].pageX,I=ee[0].pageY}else{var se=Array.prototype.find.call(s.changedTouches,$);if(!se)return!1;B=se.pageX,I=se.pageY}}return l=l||wt(A),(k||N)&&(B=s.clientX+l.x,I=s.clientY+l.y),s.pageOffset=l,s.points=[B,I],s.cursor=k||N,s}function Ne(s){var l=s-tr(d,t.ort),u=l*100/pe();return u=St(u),t.dir?100-u:u}function Ve(s){var l=100,u=!1;return v.forEach(function(S,k){if(!W(k)){var N=y[k],B=Math.abs(N-s),I=B===100&&l===100,$=B<l,ee=B<=l&&s>N;($||ee||I)&&(u=k,l=B)}}),u}function U(s,l){s.type==="mouseout"&&s.target.nodeName==="HTML"&&s.relatedTarget===null&&Se(s,l)}function Y(s,l){if(navigator.appVersion.indexOf("MSIE 9")===-1&&s.buttons===0&&l.buttonsProperty!==0)return Se(s,l);var u=(t.dir?-1:1)*(s.calcPoint-l.startCalcPoint),S=u*100/l.baseSize;Ft(u>0,S,l.locations,l.handleNumbers,l.connect)}function Se(s,l){l.handle&&(Ue(l.handle,t.cssClasses.active),M-=1),l.listeners.forEach(function(u){p.removeEventListener(u[0],u[1])}),M===0&&(Ue(o,t.cssClasses.drag),ot(),s.cursor&&(h.style.cursor="",h.removeEventListener("selectstart",Et))),t.events.smoothSteps&&(l.handleNumbers.forEach(function(u){Te(u,y[u],!0,!0,!1,!1)}),l.handleNumbers.forEach(function(u){le("update",u)})),l.handleNumbers.forEach(function(u){le("change",u),le("set",u),le("end",u)})}function Ae(s,l){if(!l.handleNumbers.some(W)){var u;if(l.handleNumbers.length===1){var S=v[l.handleNumbers[0]];u=S.children[0],M+=1,me(u,t.cssClasses.active)}s.stopPropagation();var k=[],N=ie(n.move,p,Y,{target:s.target,handle:u,connect:l.connect,listeners:k,startCalcPoint:s.calcPoint,baseSize:pe(),pageOffset:s.pageOffset,handleNumbers:l.handleNumbers,buttonsProperty:s.buttons,locations:y.slice()}),B=ie(n.end,p,Se,{target:s.target,handle:u,listeners:k,doNotReject:!0,handleNumbers:l.handleNumbers}),I=ie("mouseout",p,U,{target:s.target,handle:u,listeners:k,doNotReject:!0,handleNumbers:l.handleNumbers});k.push.apply(k,N.concat(B,I)),s.cursor&&(h.style.cursor=getComputedStyle(s.target).cursor,v.length>1&&me(o,t.cssClasses.drag),h.addEventListener("selectstart",Et,!1)),l.handleNumbers.forEach(function($){le("start",$)})}}function J(s){s.stopPropagation();var l=Ne(s.calcPoint),u=Ve(l);u!==!1&&(t.events.snap||yt(o,t.cssClasses.tap,t.animationDuration),Te(u,l,!0,!0),ot(),le("slide",u,!0),le("update",u,!0),t.events.snap?Ae(s,{handleNumbers:[u]}):(le("change",u,!0),le("set",u,!0)))}function ge(s){var l=Ne(s.calcPoint),u=b.getStep(l),S=b.fromStepping(u);Object.keys(R).forEach(function(k){k.split(".")[0]==="hover"&&R[k].forEach(function(N){N.call(Ye,S)})})}function ye(s,l){if(H()||W(l))return!1;var u=["Left","Right"],S=["Down","Up"],k=["PageDown","PageUp"],N=["Home","End"];t.dir&&!t.ort?u.reverse():t.ort&&!t.dir&&(S.reverse(),k.reverse());var B=s.key.replace("Arrow",""),I=B===k[0],$=B===k[1],ee=B===S[0]||B===u[0]||I,se=B===S[1]||B===u[1]||$,ae=B===N[0],G=B===N[1];if(!ee&&!se&&!ae&&!G)return!0;s.preventDefault();var oe;if(se||ee){var he=ee?0:1,ue=Bt(l),de=ue[he];if(de===null)return!1;de===!1&&(de=b.getDefaultStep(y[l],ee,t.keyboardDefaultStep)),$||I?de*=t.keyboardPageMultiplier:de*=t.keyboardMultiplier,de=Math.max(de,1e-7),de=(ee?-1:1)*de,oe=P[l]+de}else G?oe=t.spectrum.xVal[t.spectrum.xVal.length-1]:oe=t.spectrum.xVal[0];return Te(l,b.toStepping(oe),!0,!0),le("slide",l),le("update",l),le("change",l),le("set",l),!1}function De(s){s.fixed||v.forEach(function(l,u){ie(n.start,l.children[0],Ae,{handleNumbers:[u]})}),s.tap&&ie(n.start,d,J,{}),s.hover&&ie(n.move,d,ge,{hover:!0}),s.drag&&f.forEach(function(l,u){if(!(l===!1||u===0||u===f.length-1)){var S=v[u-1],k=v[u],N=[l],B=[S,k],I=[u-1,u];me(l,t.cssClasses.draggable),s.fixed&&(N.push(S.children[0]),N.push(k.children[0])),s.dragAll&&(B=v,I=w),N.forEach(function($){ie(n.start,$,Ae,{handles:B,handleNumbers:I,connect:l})})}})}function Le(s,l){R[s]=R[s]||[],R[s].push(l),s.split(".")[0]==="update"&&v.forEach(function(u,S){le("update",S)})}function at(s){return s===Ce.aria||s===Ce.tooltips}function Be(s){var l=s&&s.split(".")[0],u=l?s.substring(l.length):s;Object.keys(R).forEach(function(S){var k=S.split(".")[0],N=S.substring(k.length);(!l||l===k)&&(!u||u===N)&&(!at(N)||u===N)&&delete R[S]})}function le(s,l,u){Object.keys(R).forEach(function(S){var k=S.split(".")[0];s===k&&R[S].forEach(function(N){N.call(Ye,P.map(t.format.to),l,P.slice(),u||!1,y.slice(),Ye)})})}function Je(s,l,u,S,k,N,B){var I;return v.length>1&&!t.events.unconstrained&&(S&&l>0&&(I=b.getAbsoluteDistance(s[l-1],t.margin,!1),u=Math.max(u,I)),k&&l<v.length-1&&(I=b.getAbsoluteDistance(s[l+1],t.margin,!0),u=Math.min(u,I))),v.length>1&&t.limit&&(S&&l>0&&(I=b.getAbsoluteDistance(s[l-1],t.limit,!1),u=Math.min(u,I)),k&&l<v.length-1&&(I=b.getAbsoluteDistance(s[l+1],t.limit,!0),u=Math.max(u,I))),t.padding&&(l===0&&(I=b.getAbsoluteDistance(0,t.padding[0],!1),u=Math.max(u,I)),l===v.length-1&&(I=b.getAbsoluteDistance(100,t.padding[1],!0),u=Math.min(u,I))),B||(u=b.getStep(u)),u=St(u),u===s[l]&&!N?!1:u}function lt(s,l){var u=t.ort;return(u?l:s)+", "+(u?s:l)}function Ft(s,l,u,S,k){var N=u.slice(),B=S[0],I=t.events.smoothSteps,$=[!s,s],ee=[s,!s];S=S.slice(),s&&S.reverse(),S.length>1?S.forEach(function(ae,G){var oe=Je(N,ae,N[ae]+l,$[G],ee[G],!1,I);oe===!1?l=0:(l=oe-N[ae],N[ae]=oe)}):$=ee=[!0];var se=!1;S.forEach(function(ae,G){se=Te(ae,u[ae]+l,$[G],ee[G],!1,I)||se}),se&&(S.forEach(function(ae){le("update",ae),le("slide",ae)}),k!=null&&le("drag",B))}function Vt(s,l){return t.dir?100-s-l:s}function pn(s,l){y[s]=l,P[s]=b.fromStepping(l);var u=Vt(l,0)-C,S="translate("+lt(u+"%","0")+")";if(v[s].style[t.transformRule]=S,t.events.invertConnects&&y.length>1){var k=y.every(function(N,B,I){return B===0||N>=I[B-1]});if(T!==!k){yn();return}}Oe(s),Oe(s+1),T&&(Oe(s-1),Oe(s+2))}function ot(){w.forEach(function(s){var l=y[s]>50?-1:1,u=3+(v.length+l*s);v[s].style.zIndex=String(u)})}function Te(s,l,u,S,k,N){return k||(l=Je(y,s,l,u,S,!1,N)),l===!1?!1:(pn(s,l),!0)}function Oe(s){if(f[s]){var l=y.slice();T&&l.sort(function(I,$){return I-$});var u=0,S=100;s!==0&&(u=l[s-1]),s!==f.length-1&&(S=l[s]);var k=S-u,N="translate("+lt(Vt(u,k)+"%","0")+")",B="scale("+lt(k/100,"1")+")";f[s].style[t.transformRule]=N+" "+B}}function At(s,l){return s===null||s===!1||s===void 0||(typeof s=="number"&&(s=String(s)),s=t.format.from(s),s!==!1&&(s=b.toStepping(s)),s===!1||isNaN(s))?y[l]:s}function Xe(s,l,u){var S=We(s),k=y[0]===void 0;l=l===void 0?!0:l,t.animate&&!k&&yt(o,t.cssClasses.tap,t.animationDuration),w.forEach(function(I){Te(I,At(S[I],I),!0,!1,u)});var N=w.length===1?0:1;if(k&&b.hasNoSize()&&(u=!0,y[0]=0,w.length>1)){var B=100/(w.length-1);w.forEach(function(I){y[I]=I*B})}for(;N<w.length;++N)w.forEach(function(I){Te(I,y[I],!0,!0,u)});ot(),w.forEach(function(I){le("update",I),S[I]!==null&&l&&le("set",I)})}function hn(s){Xe(t.start,s)}function vn(s,l,u,S){if(s=Number(s),!(s>=0&&s<w.length))throw new Error("noUiSlider: invalid handle number, got: "+s);Te(s,At(l,s),!0,!0,S),le("update",s),u&&le("set",s)}function Dt(s){if(s===void 0&&(s=!1),s)return P.length===1?P[0]:P.slice(0);var l=P.map(t.format.to);return l.length===1?l[0]:l}function gn(){for(Be(Ce.aria),Be(Ce.tooltips),Object.keys(t.cssClasses).forEach(function(s){Ue(o,t.cssClasses[s])});o.firstChild;)o.removeChild(o.firstChild);delete o.noUiSlider}function Bt(s){var l=y[s],u=b.getNearbySteps(l),S=P[s],k=u.thisStep.step,N=null;if(t.snap)return[S-u.stepBefore.startValue||null,u.stepAfter.startValue-S||null];k!==!1&&S+k>u.stepAfter.startValue&&(k=u.stepAfter.startValue-S),S>u.thisStep.startValue?N=u.thisStep.step:u.stepBefore.step===!1?N=!1:N=S-u.stepBefore.highestStep,l===100?k=null:l===0&&(N=null);var B=b.countStepDecimals();return k!==null&&k!==!1&&(k=Number(k.toFixed(B))),N!==null&&N!==!1&&(N=Number(N.toFixed(B))),[N,k]}function bn(){return w.map(Bt)}function En(s,l){var u=Dt(),S=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips","connect"];S.forEach(function(N){s[N]!==void 0&&(r[N]=s[N])});var k=Tt(r);S.forEach(function(N){s[N]!==void 0&&(t[N]=k[N])}),b=k.spectrum,t.margin=k.margin,t.limit=k.limit,t.padding=k.padding,t.pips?ce(t.pips):Q(),t.tooltips?re():D(),y=[],Xe($e(s.start)?s.start:u,l),s.connect&&Ot()}function Ot(){for(;m.firstChild;)m.removeChild(m.firstChild);for(var s=0;s<=t.handles;s++)f[s]=L(m,t.connect[s]),Oe(s);De({drag:t.events.drag,fixed:!0})}function yn(){T=!T,kt(t,t.connect.map(function(s){return!s})),Ot()}function Sn(){d=z(o),O(t.connect,d),De(t.events),Xe(t.start),t.pips&&ce(t.pips),t.tooltips&&re(),j()}Sn();var Ye={destroy:gn,steps:bn,on:Le,off:Be,get:Dt,set:Xe,setHandle:vn,reset:hn,disable:E,enable:q,__moveHandles:function(s,l,u){Ft(s,l,y,u)},options:r,updateOptions:En,target:o,removePips:Q,removeTooltips:D,getPositions:function(){return y.slice()},getTooltips:function(){return F},getOrigins:function(){return v},pips:ce};return Ye}function Vr(e,t){if(!e||!e.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+e);if(e.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");var r=Tt(t),n=Fr(e,r,t);return e.noUiSlider=n,n}const _t={__spectrum:Ct,cssClasses:Rt,create:Vr};function Lt(e,t,r){if(e==null||e==="")return{min:t,max:r};if(typeof e=="string"&&e.includes("..")){const n=e.split(".."),i=n[0]!==""?Number(n[0]):t,c=n[1]!==""?Number(n[1]):r;return{min:isNaN(i)?t:i,max:isNaN(c)?r:c}}if(typeof e=="object"){const n=e;return{min:n.min??t,max:n.max??r}}return typeof e=="number"?{min:e,max:r}:{min:t,max:r}}function Ar({config:e,filterData:t,value:r,onChange:n,narrowedValues:i,isNarrowing:c}){const o=a.useRef(null),d=a.useRef(null),m=a.useRef(null),[v,f]=a.useState(!1),g=t.props||{},F=g.min??0,b=g.max??100,P=g.step??1,y=g.placeholder||t.label||"Range",w=e.displayAs||t.props?.display_as||"popup",M=g.handles||"double",R=g.compare||"in_range",T=e.filterKey,A=i?.ranges?.[T],p=A?.min??F,h=A?.max??b,C=g.format||"number",_=g.prefix||"",x=g.suffix||"",L=t.icon||"",O=Lt(r,p,h),[z,Z]=a.useState(O.min),[H,W]=a.useState(O.max),E=a.useCallback(U=>C==="price"?`${_}${U.toLocaleString()}${x}`:`${_}${U}${x}`,[C,_,x]),q=r!=null&&r!==""&&(O.min!==p||O.max!==h),D=q?`${E(O.min)}  ${E(O.max)}`:y,re=`${E(z)}  ${E(H)}`,j=a.useCallback(()=>{if(!d.current||m.current)return;let U,Y;M==="double"?(U=[z,H],Y=!0):R==="in_range"?(U=[H],Y=[!1,!0]):(U=[z],Y=[!0,!1]),_t.create(d.current,{start:U,connect:Y,range:{min:p,max:h},step:P,behaviour:"tap-drag"}),m.current=d.current.noUiSlider,m.current.on("update",Se=>{M==="double"?(Z(Math.round(Number(Se[0]))),W(Math.round(Number(Se[1])))):R==="in_range"?W(Math.round(Number(Se[0]))):Z(Math.round(Number(Se[0])))})},[M,R,z,H,p,h,P]),ne=a.useCallback(()=>{m.current&&(m.current.destroy(),m.current=null)},[]);a.useEffect(()=>{const U=Lt(r,p,h);Z(U.min),W(U.max),m.current&&(M==="double"?m.current.set([U.min,U.max]):m.current.set([U.min]))},[r,p,h,M]),a.useEffect(()=>{if(v&&w==="popup"){const U=setTimeout(()=>{j()},50);return()=>clearTimeout(U)}return()=>{w==="popup"&&ne()}},[v,w,j,ne]),a.useEffect(()=>{if(w==="inline")return j(),()=>ne()},[w,j,ne]),a.useEffect(()=>{if(!m.current||!A)return;m.current.updateOptions({range:{min:p,max:h}},!0);let U=z,Y=H;U<p&&(U=p),U>h&&(U=h),M==="double"&&(Y<p&&(Y=p),Y>h&&(Y=h),U>Y&&(U=Y)),M==="double"?m.current.set([U,Y]):m.current.set([U]),Z(U),W(Y)},[A,p,h,M]);const V=a.useCallback(()=>{f(!0)},[]),X=a.useCallback((U,Y)=>U===p&&Y===h?null:M==="double"?`${U}..${Y}`:R==="greater_than"||R==="in_range"?`${U}..`:`..${Y}`,[M,R,p,h]),K=U=>{const Y=U.target.value===""?p:Number(U.target.value);Z(Y),m.current&&m.current.set(M==="double"?[Y,H]:[Y]),w==="minmax"&&n(X(Y,H))},Q=U=>{const Y=U.target.value===""?h:Number(U.target.value);W(Y),m.current&&m.current.set([z,Y]),w==="minmax"&&n(X(z,Y))},ce=a.useCallback(()=>{n(X(z,H)),f(!1)},[z,H,X,n]),pe=a.useCallback(()=>{Z(p),W(h),m.current&&m.current.set(M==="double"?[p,h]:[p]),n(null)},[p,h,M,n]),ie=()=>React.createElement("div",{className:"ts-minmax"},React.createElement("input",{type:"number",className:"inline-input input-no-icon",placeholder:String(p),value:z,onChange:K,min:p,max:H,step:P}),M==="double"&&React.createElement("input",{type:"number",className:"inline-input input-no-icon",placeholder:String(h),value:H,onChange:Q,min:z,max:h,step:P})),Re=()=>React.createElement("div",{className:`range-slider-wrapper${c?" ts-loading":""}`},React.createElement("div",{className:"range-value"},re),React.createElement("div",{ref:d,className:"range-slider"}),A&&(A.min!==F||A.max!==b)&&React.createElement("div",{className:"range-narrowed-indicator"},React.createElement("small",null,"Showing ",E(p),"  ",E(h)," based on current results")));if(w==="minmax"&&M==="double"){const{style:U,className:Y}=te(e,"ts-form-group");return React.createElement("div",{className:Y,style:U},!e.hideLabel&&React.createElement("label",null,t.label),ie())}if(w==="inline"){const{style:U,className:Y}=te(e,"ts-form-group ts-inline-filter");return React.createElement("div",{className:Y,style:U},!e.hideLabel&&React.createElement("label",null,t.label),Re())}const{style:Ne,className:Ve}=te(e,"ts-form-group");return React.createElement("div",{className:Ve,style:Ne},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:o,className:`ts-filter ts-popup-target ${q?"ts-filled":""}`,onClick:V,onMouseDown:U=>U.preventDefault(),role:"button",tabIndex:0},L&&React.createElement("span",{dangerouslySetInnerHTML:{__html:L}}),React.createElement("div",{className:"ts-filter-text"},D),React.createElement("div",{className:"ts-down-icon"})),React.createElement(fe,{isOpen:v,target:o,title:"",icon:L,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:ce,onClear:pe,onClose:()=>f(!1)},React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,t.label,t.description&&React.createElement("small",null,t.description)),Re())))}function Dr(e,t){let r=null;return function(...n){r&&clearTimeout(r),r=setTimeout(()=>e.apply(this,n),t)}}function Br({config:e,filterData:t,value:r,onChange:n}){const i=t.props||{},c=i.min??0,o=i.max??99,d=i.step??1,m=i.default??c,v=i.placeholder||t.label||"Any",f=e.displayAs||t.props?.display_as||"popup",g=t.icon||"",F=a.useRef(null),[b,P]=a.useState(!1),y=typeof r=="number"?r:m,[w,M]=a.useState(y),R=a.useMemo(()=>Dr(Z=>n(Z),300),[n]);a.useEffect(()=>{M(typeof r=="number"?r:m)},[r,m]),a.useEffect(()=>{b&&M(y)},[b,y]);const T=Z=>{Z.preventDefault();const H=Math.max(c,w-d);M(H),f==="inline"&&R(H)},A=Z=>{Z.preventDefault();const H=Math.min(o,w+d);M(H),f==="inline"&&R(H)},p=Z=>{const H=parseInt(Z.target.value,10);if(!isNaN(H)){const W=Math.min(o,Math.max(c,H));M(W),f==="inline"&&R(W)}},h=a.useCallback(()=>{P(!0)},[]),C=a.useCallback(()=>{n(w),P(!1)},[w,n]),_=a.useCallback(()=>{M(m),n(m)},[m,n]),x=()=>React.createElement("div",{className:"ts-stepper-input flexify"},React.createElement("button",{type:"button",className:"ts-stepper-left ts-icon-btn inline-btn-ts",onClick:T},React.createElement("i",{className:"las la-minus"})),React.createElement("input",{type:"number",className:"ts-input-box",min:c,max:o,step:d,value:w,onChange:p,placeholder:v}),React.createElement("button",{type:"button",className:"ts-stepper-right ts-icon-btn inline-btn-ts",onClick:A},React.createElement("i",{className:"las la-plus"})));if(f==="inline"){const{style:Z,className:H}=te(e,"ts-form-group ts-inline-filter");return React.createElement("div",{className:H,style:Z},!e.hideLabel&&React.createElement("label",null,t.label),x())}const L=y!==m,{style:O,className:z}=te(e,"ts-form-group");return React.createElement("div",{className:z,style:O},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:F,className:`ts-filter ts-popup-target ${L?"ts-filled":""}`,onClick:h,onMouseDown:Z=>Z.preventDefault(),role:"button",tabIndex:0},g&&React.createElement("span",{dangerouslySetInnerHTML:{__html:g}}),React.createElement("div",{className:"ts-filter-text"},L?w:v),React.createElement("div",{className:"ts-down-icon"})),React.createElement(fe,{isOpen:b,target:F,title:"",icon:g,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:C,onClear:_,onClose:()=>P(!1)},React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,t.label,t.description&&React.createElement("small",null,t.description)),x())))}function Or(e){return e==null||e===""?[]:typeof e=="string"?e.split(",").map(t=>parseInt(t,10)).filter(t=>!isNaN(t)):Array.isArray(e)?e.length>0&&typeof e[0]=="number"?e:[]:[]}function Pt(e){return e.length===0?null:e.join(",")}function Hr({config:e,filterData:t,value:r,onChange:n,narrowedValues:i,isNarrowing:c}){const o=a.useRef(null),d=a.useRef(null),[m,v]=a.useState(!1),[f,g]=a.useState(""),[F,b]=a.useState([]),P=t.props||{},y=P.multiple??!0,w=P.placeholder||t.label||"Select",M=e.displayAs||P.display_as||"popup",R=e.hideEmptyTerms??P.hide_empty_terms??!1,T=t.icon||"",A=P.taxonomy||e.filterKey,p=i?.terms?.[A],h=a.useCallback((V,X=0)=>{const K=[];for(const Q of V)K.push({...Q,depth:X}),Q.children&&Q.children.length>0&&K.push(...h(Q.children,X+1));return K},[]),C=a.useMemo(()=>{const V=P.terms||[];let X=h(V);return R&&p&&(X=X.filter(K=>{if(!K.term_taxonomy_id)return!0;const Q=p[K.term_taxonomy_id];return Q===void 0||Q>0})),X},[P.terms,h,R,p]),_=a.useCallback(V=>!p||!V.term_taxonomy_id?null:p[V.term_taxonomy_id]??null,[p]),x=a.useMemo(()=>Or(r),[r]),L=a.useCallback(V=>V.term_taxonomy_id?x.includes(V.term_taxonomy_id):!1,[x]),O=a.useMemo(()=>C.filter(V=>V.term_taxonomy_id&&x.includes(V.term_taxonomy_id)),[C,x]),z=a.useMemo(()=>{if(!f)return C;const V=f.toLowerCase();return C.filter(X=>X.label.toLowerCase().includes(V))},[C,f]);a.useEffect(()=>{m&&(b(x),g(""),C.length>=15&&setTimeout(()=>d.current?.focus(),50))},[m,x,C.length]);const Z=a.useCallback(()=>{v(!0)},[]),H=a.useCallback(V=>{const X=V.term_taxonomy_id;X&&(y?b(K=>K.includes(X)?K.filter(Q=>Q!==X):[...K,X]):(n(Pt([X])),v(!1)))},[y,n]),W=a.useCallback(()=>{y&&n(Pt(F)),v(!1)},[y,F,n]),E=a.useCallback(()=>{b([]),n(null)},[n]),q=x.length>0,D=q&&O[0]?.label||w,re=O.length>1?O.length-1:0;if(M==="inline"){const{style:V,className:X}=te(e,"ts-form-group inline-terms-wrapper ts-inline-filter min-scroll");return React.createElement("div",{className:`${X}${c?" ts-loading":""}`,style:V},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{className:"ts-term-dropdown ts-multilevel-dropdown inline-multilevel"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list"},C.map(K=>{const Q=L(K),ce=K.depth||0,pe=_(K),ie=pe===0;return React.createElement("li",{key:K.term_taxonomy_id||K.slug,className:`${Q?"ts-selected":""}${ie?" ts-disabled":""}`},React.createElement("a",{href:"#",className:"flexify",onClick:Re=>{Re.preventDefault(),ie||H(K)}},React.createElement("div",{className:"ts-checkbox-container"},React.createElement("label",{className:`container-${y?"checkbox":"radio"}`},React.createElement("input",{type:y?"checkbox":"radio",checked:Q,readOnly:!0,disabled:!0,hidden:!0}),React.createElement("span",{className:"checkmark"}))),React.createElement("span",null,ce>0?" ".repeat(ce):"",K.label),pe!==null&&React.createElement("span",{className:"ts-term-count"},"(",pe,")"),K.icon&&React.createElement("div",{className:"ts-term-icon",dangerouslySetInnerHTML:{__html:K.icon}})))}))))}if(M==="buttons"){const{style:V,className:X}=te(e,"ts-form-group");return React.createElement("div",{className:X,style:V},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("ul",{className:"simplify-ul addon-buttons flexify"},C.map(K=>{const Q=L(K);return React.createElement("li",{key:K.term_taxonomy_id||K.slug,className:`flexify ${Q?"adb-selected":""}`,onClick:()=>H(K)},K.label)})))}const{style:j,className:ne}=te(e,"ts-form-group");return React.createElement("div",{className:ne,style:j},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:o,className:`ts-filter ts-popup-target ${q?"ts-filled":""}`,onClick:Z,onMouseDown:V=>V.preventDefault(),role:"button",tabIndex:0},T&&React.createElement("span",{dangerouslySetInnerHTML:{__html:T}}),React.createElement("div",{className:"ts-filter-text"},D,re>0&&React.createElement("span",{className:"term-count"},"+",re)),React.createElement("div",{className:"ts-down-icon"})),React.createElement(fe,{isOpen:m,target:o,title:"",icon:T,saveLabel:"Save",clearLabel:"Clear",showClear:!0,showSave:y,onSave:W,onClear:E,onClose:()=>v(!1)},C.length>=15&&React.createElement("div",{className:"ts-sticky-top uib b-bottom"},React.createElement("div",{className:"ts-input-icon flexify"},React.createElement("span",null,be.search),React.createElement("input",{ref:d,type:"text",value:f,onChange:V=>g(V.target.value),placeholder:"Search",className:"autofocus"}))),React.createElement("div",{className:`ts-term-dropdown ts-multilevel-dropdown ts-md-group${c?" ts-loading":""}`},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list"},z.map(V=>{const X=V.term_taxonomy_id,K=y?X?F.includes(X):!1:L(V),Q=V.depth||0,ce=_(V),pe=ce===0;return React.createElement("li",{key:V.term_taxonomy_id||V.slug,className:`${K?"ts-selected":""}${pe?" ts-disabled":""}`},React.createElement("a",{href:"#",className:"flexify",onClick:ie=>{ie.preventDefault(),pe||H(V)}},React.createElement("div",{className:"ts-checkbox-container"},React.createElement("label",{className:`container-${y?"checkbox":"radio"}`},React.createElement("input",{type:y?"checkbox":"radio",checked:K,readOnly:!0,disabled:!0,hidden:!0}),React.createElement("span",{className:"checkmark"}))),React.createElement("span",null,Q>0?" ".repeat(Q):"",V.label),ce!==null&&React.createElement("span",{className:"ts-term-count"},"(",ce,")"),V.icon&&React.createElement("div",{className:"ts-term-icon",dangerouslySetInnerHTML:{__html:V.icon}})))})),z.length===0&&React.createElement("div",{className:"ts-empty-user-tab"},T&&React.createElement("span",{dangerouslySetInnerHTML:{__html:T}}),React.createElement("p",null,"No results found")))))}function ke(e){return!e||!e.address?null:e.swlat!==void 0&&e.swlng!==void 0&&e.nelat!==void 0&&e.nelng!==void 0?`${e.address};${e.swlat},${e.swlng}..${e.nelat},${e.nelng}`:e.lat!==void 0&&e.lng!==void 0?`${e.address};${e.lat},${e.lng},${e.radius||25}`:e.address}function Wr(e,t){if(e==null||e==="")return null;if(typeof e=="string"){const r=e.indexOf(";");if(r===-1)return{address:e};const n=e.substring(0,r),i=e.substring(r+1);if(i.includes("..")){const o=i.split(".."),d=o[0].split(","),m=o[1].split(",");return{address:n,swlat:Number(d[0]),swlng:Number(d[1]),nelat:Number(m[0]),nelng:Number(m[1])}}const c=i.split(",");return{address:n,lat:Number(c[0]),lng:Number(c[1]),radius:c[2]?Number(c[2]):t}}return typeof e=="object"?e:null}function Ur({config:e,filterData:t,value:r,onChange:n}){const i=a.useRef(null),c=a.useRef(null),o=a.useRef(null),d=a.useRef(null),m=a.useRef(null),[v,f]=a.useState(!1),[g,F]=a.useState(!1),b=a.useRef(null),P=t.props||{},y=P.radius||{},w=y.default??25,M=y.min??1,R=y.max??100,T=y.step??1,A=P.units||"km",p=P.display_proximity_as||"popup",h=P.placeholder||t.label||"Location",C=e.displayAs||t.props?.display_as||"popup",_=t.icon||"",x=Wr(r,w)||{},[L,O]=a.useState(x.address||""),[z,Z]=a.useState(x.radius||w),H=a.useCallback(J=>Math.round(J*1e6)/1e6,[]),W=a.useCallback(J=>`${J}${A==="mi"?"mi":"km"}`,[A]),E=a.useCallback(()=>{!d.current||m.current||(_t.create(d.current,{start:z,connect:[!0,!1],step:T,range:{min:M,max:R},behaviour:"tap-drag"}),m.current=d.current.noUiSlider,m.current.on("update",J=>{Z(Math.round(Number(J[0])))}),m.current.on("change",J=>{const ge=Math.round(Number(J[0]));p==="inline"&&x.lat&&n(ke({...x,radius:ge}))}))},[z,T,M,R,p,x,n]),q=a.useCallback(()=>{m.current&&(m.current.destroy(),m.current=null)},[]);a.useEffect(()=>{if(p==="inline"&&x.lat){const J=setTimeout(()=>E(),50);return()=>{clearTimeout(J),q()}}},[p,x.lat,E,q]),a.useEffect(()=>{if(g){const J=setTimeout(()=>E(),50);return()=>clearTimeout(J)}return()=>q()},[g,E,q]),a.useEffect(()=>{const J=x.radius||w;Z(J),m.current&&m.current.set([J])},[x.radius,w]);const D=a.useCallback(()=>{if(o.current||!c.current||typeof window>"u")return;const J=window.Voxel?.Maps;if(!J){console.warn("Voxel.Maps not available for autocomplete");return}J.await(()=>{if(o.current)return;const ge=e.autocomplete||{};o.current=new J.Autocomplete(c.current,ye=>{if(ye){const De=ye.viewport.getSouthWest(),Le=ye.viewport.getNorthEast(),at={address:ye.address,swlat:H(De.getLatitude()),swlng:H(De.getLongitude()),nelat:H(Le.getLatitude()),nelng:H(Le.getLongitude()),lat:H(ye.latlng.getLatitude()),lng:H(ye.latlng.getLongitude()),radius:x.radius||w};O(ye.address),n(ke(at)),C==="popup"&&f(!1)}else O(""),n(null)},ge)})},[e.autocomplete,n,C,w,x.radius,H]);a.useEffect(()=>{(v||C==="inline")&&(O(x.address||""),v&&setTimeout(()=>c.current?.focus(),50))},[v,C,x.address]);const re=a.useCallback(()=>{f(!0)},[]),j=a.useCallback(()=>{D()},[D]),ne=J=>{O(J.target.value),C==="inline"&&(J.target.value?n(ke({...x,address:J.target.value})):n(null))},V=J=>{J.preventDefault(),J.stopPropagation(),"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(ge=>{const ye={address:"Current Location",lat:ge.coords.latitude,lng:ge.coords.longitude,radius:w};O("Current Location"),n(ke(ye)),C==="popup"&&f(!1)},ge=>{console.error("Geolocation error:",ge)})},X=a.useCallback(()=>{n(L?ke({...x,address:L}):null),f(!1)},[L,x,n]),K=a.useCallback(()=>{O(""),n(null)},[n]),Q=a.useCallback(J=>{J.key==="Enter"&&(J.preventDefault(),X())},[X]),ce=a.useCallback(()=>{x.lat&&n(ke({...x,radius:z})),F(!1)},[x,z,n]),pe=a.useCallback(()=>{Z(w),m.current&&m.current.set([w]),x.lat&&n(ke({...x,radius:w}))},[w,x,n]),ie=!!x.address||!!x.lat,Re=ie?x.address||"Location set":h,Ne=()=>React.createElement("div",{className:"ts-input-icon flexify",style:{position:"relative"}},_&&React.createElement("span",{dangerouslySetInnerHTML:{__html:_}}),React.createElement("input",{ref:c,type:"text",className:"inline-input",placeholder:h,value:L,onChange:ne,onKeyDown:Q,onFocus:j}),React.createElement("a",{href:"#",className:"inline-user-location ts-icon-btn",onClick:V,title:"Use my location","aria-label":"Use my location"},be.crosshairs)),Ve=()=>React.createElement("div",{className:"range-slider-wrapper"},React.createElement("div",{className:"range-value"},W(z)),React.createElement("div",{ref:d,className:"range-slider"})),U=()=>!x.lat||p==="inline"?null:React.createElement("div",{className:"ts-form-group ts-proximity-filter"},React.createElement("label",null,P.proximity_label||"Radius"),React.createElement("div",{ref:b,className:`ts-filter ts-popup-target ${x.radius?"ts-filled":""}`,onClick:()=>F(!0),onMouseDown:J=>J.preventDefault(),role:"button",tabIndex:0},React.createElement("div",{className:"ts-filter-text"},W(x.radius||w)),React.createElement("div",{className:"ts-down-icon"})),React.createElement(fe,{isOpen:g,target:b,title:"",saveLabel:"Save",clearLabel:"Reset",showClear:!0,onSave:ce,onClear:pe,onClose:()=>F(!1)},React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,P.proximity_label||"Search radius"),Ve()))),Y=()=>p!=="inline"||!x.lat?null:React.createElement("div",{className:"ts-form-group ts-inline-proximity"},React.createElement("label",null,P.proximity_label||"Radius",": ",W(z)),React.createElement("div",{ref:d,className:"range-slider"}));if(C==="inline"){const{style:J,className:ge}=te(e,"ts-form-group ts-inline-filter");return React.createElement(React.Fragment,null,React.createElement("div",{className:ge,style:J},!e.hideLabel&&React.createElement("label",null,t.label),Ne()),Y(),U())}const{style:Se,className:Ae}=te(e,"ts-form-group");return React.createElement(React.Fragment,null,React.createElement("div",{className:Ae,style:Se},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:i,className:`ts-filter ts-popup-target ${ie?"ts-filled":""}`,onClick:re,onMouseDown:J=>J.preventDefault(),role:"button",tabIndex:0},_&&React.createElement("span",{dangerouslySetInnerHTML:{__html:_}}),React.createElement("div",{className:"ts-filter-text"},Re),React.createElement("div",{className:"ts-down-icon"})),React.createElement(fe,{isOpen:v,target:i,title:"",icon:_,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:X,onClear:K,onClose:()=>f(!1)},React.createElement("div",{className:"ts-form-group"},Ne()))),Y(),U())}function jr(e){if(e==null||e==="")return{date:"",slots:1};if(typeof e=="string")return{date:e,slots:1};if(typeof e=="object"){const t=e;return{date:t.date||"",slots:t.slots||1}}return{date:"",slots:1}}const Ie=e=>{if(!e)return null;try{const t=new Date(e+"T00:00:00");return isFinite(t.getTime())?t:null}catch{return null}},Fe=e=>{if(!e)return null;const t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${n}`},rt=e=>{if(!e)return"";try{const t=new Date(e+"T00:00:00");return isFinite(t.getTime())?t.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):""}catch{return e}};function zr({config:e,filterData:t,value:r,onChange:n}){const i=a.useRef(null),c=a.useRef(null),[o,d]=a.useState(!1),m=t.props||{},f=(m.inputMode||"date-range")==="date-range",g=m.l10n||{},F=g.pickDate||t.label||"Select dates",b=t.icon||"",P=jr(r),y=P.date,w=P.slots;let M="",R="";f&&y&&y.includes("..")?[M,R]=y.split(".."):!f&&y&&(M=y);const[T,A]=a.useState(()=>Ie(M)),[p,h]=a.useState(()=>Ie(R)),[C,_]=a.useState("start"),[x,L]=a.useState(w);a.useEffect(()=>{if(o){if(f&&y&&y.includes("..")){const[j,ne]=y.split("..");A(Ie(j)),h(Ie(ne))}else!f&&y&&A(Ie(y));L(w),_("start")}},[o,f,y,w]);const O=a.useCallback(()=>{d(!0)},[]),z=a.useCallback(j=>{if(f&&j&&c.current)if(C==="start")A(j),_("end"),c.current.setStartRange(j),c.current.setEndRange(null);else{h(j),_("start"),c.current.setEndRange(j);const ne=Fe(T),V=Fe(j);ne&&V&&(n(`${ne}..${V}`),d(!1))}else A(j)},[f,C,T,n]),Z=a.useCallback(j=>{L(Number(j.target.value)||1)},[]),H=a.useCallback(j=>{if(f){const ne=Fe(T),V=Fe(p);ne&&V&&n(`${ne}..${V}`)}else{const V=Fe(j!==void 0?j:T);V&&n(V)}d(!1)},[f,T,p,n]),W=a.useCallback(()=>{A(null),h(null),L(1),n(null),c.current&&(c.current.setStartRange(null),c.current.setEndRange(null))},[n]),E=f?!!(M&&R):!!y,q=a.useMemo(()=>{if(!E)return F;if(f){const j=rt(M),ne=rt(R),V=`${j}  ${ne}`;return w>1?`${V} (${w})`:V}else{const j=rt(y);return w>1?`${j} (${w})`:j}},[f,E,M,R,y,w,F]),{style:D,className:re}=te(e,"ts-form-group");return React.createElement("div",{className:re,style:D},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:i,className:`ts-filter ts-popup-target ${E?"ts-filled":""}`,onClick:O,onMouseDown:j=>j.preventDefault(),role:"button",tabIndex:0},b&&React.createElement("span",{dangerouslySetInnerHTML:{__html:b}}),React.createElement("div",{className:"ts-filter-text"},q),React.createElement("div",{className:"ts-down-icon"})),React.createElement(fe,{isOpen:o,target:i,title:f?C==="start"?g.checkIn||"Check-in":g.checkOut||"Check-out":"",icon:b,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:H,onClear:W,onClose:()=>d(!1)},React.createElement(Pe,{value:T,onChange:z,onSelect:f?void 0:H,pickerConfig:f?{theme:"pika-range"}:void 0,onPickerReady:j=>{c.current=j,f&&T&&(j.setStartRange(T),p&&j.setEndRange(p))}}),React.createElement("div",{className:"ts-form-group",style:{marginTop:"12px"}},React.createElement("label",null,"Number of slots"),React.createElement("input",{type:"number",value:x,onChange:Z,min:"1",className:"ts-filter"}))))}function qr(e,t){if(e==null||e==="")return{from:"",to:""};if(typeof e=="string"){if(t&&e.includes("..")){const r=e.split("..");return{from:r[0]||"",to:r[1]||""}}return{from:e,to:""}}if(typeof e=="object"){const r=e;return{from:r.from||"",to:r.to||""}}return{from:"",to:""}}function je(e,t,r){return!e&&!t?null:r?e&&t?`${e}..${t}`:e?`${e}..`:t?`..${t}`:null:e||null}const ze=e=>{if(!e)return null;try{const t=new Date(e+"T00:00:00");return isFinite(t.getTime())?t:null}catch{return null}},Mt=e=>{if(!e)return null;const t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${n}`},qe=e=>{if(!e)return"";try{const t=new Date(e+"T00:00:00");return isFinite(t.getTime())?t.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):""}catch{return e}};function Kr({config:e,filterData:t,value:r,onChange:n}){const i=a.useRef(null),c=t.props||{},o=c.enable_range??!1,d=c.placeholder||t.label||"Select date",m=t.icon||"",v=qr(r,o),f=v.from,g=v.to,[F,b]=a.useState(!1),[P,y]=a.useState(!1),[w,M]=a.useState(()=>ze(f)),[R,T]=a.useState(()=>ze(g)),A=a.useCallback(()=>{M(ze(f)),b(!0)},[f]),p=a.useCallback(()=>{T(ze(g)),y(!0)},[g]),h=a.useCallback(E=>{M(E)},[]),C=a.useCallback(E=>{T(E)},[]),_=a.useCallback(E=>{const D=Mt(E!==void 0?E:w)||"";n(je(D,g,o)),b(!1)},[w,o,g,n]),x=a.useCallback(E=>{const D=Mt(E!==void 0?E:R)||"";n(je(f,D,o)),y(!1)},[R,f,o,n]),L=a.useCallback(()=>{M(null),n(je("",g,o))},[o,g,n]),O=a.useCallback(()=>{T(null),n(je(f,"",o))},[f,o,n]),z=o?!!f||!!g:!!f,Z=a.useMemo(()=>{if(!z)return d;if(o){const E=[];return f&&E.push(qe(f)),g&&E.push(qe(g)),E.join(" - ")||d}return qe(f)||d},[z,o,f,g,d]),{style:H,className:W}=te(e,"ts-form-group");return React.createElement("div",{className:W,style:H},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:i,className:`ts-filter ts-popup-target ${z?"ts-filled":""}`,onClick:A,onMouseDown:E=>E.preventDefault(),role:"button",tabIndex:0},m&&React.createElement("span",{dangerouslySetInnerHTML:{__html:m}}),React.createElement("div",{className:"ts-filter-text"},Z),React.createElement("div",{className:"ts-down-icon"})),React.createElement(fe,{isOpen:F,target:i,title:o?"From":"",icon:m,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:_,onClear:L,onClose:()=>b(!1)},React.createElement(Pe,{value:w,onChange:h,onSelect:_}),o&&React.createElement("div",{className:"ts-form-group",style:{marginTop:"12px",borderTop:"1px solid var(--ts-shade-5)",paddingTop:"12px"}},React.createElement("label",null,"To"),React.createElement("div",{className:`ts-filter ts-popup-target ${g?"ts-filled":""}`,onClick:E=>{E.stopPropagation(),b(!1),setTimeout(()=>p(),100)},role:"button",tabIndex:0},m&&React.createElement("span",{dangerouslySetInnerHTML:{__html:m}}),React.createElement("div",{className:"ts-filter-text"},g?qe(g):"Select end date")))),o&&React.createElement(fe,{isOpen:P,target:i,title:"To",icon:m,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:x,onClear:O,onClose:()=>y(!1)},React.createElement(Pe,{value:R,onChange:C,onSelect:x})))}const Ke=e=>{if(!e)return null;try{const t=new Date(e+"T00:00:00");return isFinite(t.getTime())?t:null}catch{return null}},It=e=>{if(!e)return null;const t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${n}`},nt=e=>{if(!e)return"";try{const t=new Date(e+"T00:00:00");return isFinite(t.getTime())?t.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):""}catch{return e}};function Zr({config:e,filterData:t,value:r,onChange:n}){const i=a.useRef(null),o=(t.props||{}).placeholder||t.label||"Date",d=t.icon||"",m=r||{},v=m.from||"",f=m.to||"",[g,F]=a.useState(!1),[b,P]=a.useState(!1),[y,w]=a.useState(()=>Ke(v)),[M,R]=a.useState(()=>Ke(f)),T=a.useCallback(()=>{w(Ke(v)),F(!0)},[v]),A=a.useCallback(()=>{R(Ke(f)),P(!0)},[f]),p=a.useCallback(W=>{w(W)},[]),h=a.useCallback(W=>{R(W)},[]),C=a.useCallback(W=>{const q=It(W!==void 0?W:y)||"";n({from:q,to:f}),F(!1)},[y,f,n]),_=a.useCallback(W=>{const q=It(W!==void 0?W:M)||"";n({from:v,to:q}),P(!1)},[M,v,n]),x=a.useCallback(()=>{w(null),n({from:"",to:f})},[f,n]),L=a.useCallback(()=>{R(null),n({from:v,to:""})},[v,n]),O=!!v||!!f,z=a.useMemo(()=>{if(!O)return o;const W=[];return v&&W.push(nt(v)),f&&W.push(nt(f)),W.join(" - ")||o},[O,v,f,o]),{style:Z,className:H}=te(e,"ts-form-group");return React.createElement("div",{className:H,style:Z},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:i,className:`ts-filter ts-popup-target ${O?"ts-filled":""}`,onClick:T,onMouseDown:W=>W.preventDefault(),role:"button",tabIndex:0},d&&React.createElement("span",{dangerouslySetInnerHTML:{__html:d}}),React.createElement("div",{className:"ts-filter-text"},z),React.createElement("div",{className:"ts-down-icon"})),React.createElement(fe,{isOpen:g,target:i,title:"From",icon:d,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:C,onClear:x,onClose:()=>F(!1)},React.createElement(Pe,{value:y,onChange:p,onSelect:C}),React.createElement("div",{className:"ts-form-group",style:{marginTop:"12px",borderTop:"1px solid var(--ts-shade-5)",paddingTop:"12px"}},React.createElement("label",null,"To"),React.createElement("div",{className:`ts-filter ts-popup-target ${f?"ts-filled":""}`,onClick:W=>{W.stopPropagation(),F(!1),setTimeout(()=>A(),100)},role:"button",tabIndex:0},d&&React.createElement("span",{dangerouslySetInnerHTML:{__html:d}}),React.createElement("div",{className:"ts-filter-text"},f?nt(f):"Select end date")))),React.createElement(fe,{isOpen:b,target:i,title:"To",icon:d,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:_,onClear:L,onClose:()=>P(!1)},React.createElement(Pe,{value:M,onChange:h,onSelect:_})))}function Jr({config:e,filterData:t,value:r,onChange:n}){const i=r===!0||r==="true"||r==="1",c=v=>{v.preventDefault(),n(!i)},o=t.props?.placeholder||t.label||"Open now",{style:d,className:m}=te(e,"ts-form-group switcher-label ts-inline-filter");return React.createElement("div",{className:m,style:d},React.createElement("label",null,React.createElement("div",{className:"switch-slider"},React.createElement("div",{className:"onoffswitch",onClick:c},React.createElement("input",{type:"checkbox",className:"onoffswitch-checkbox",checked:i,readOnly:!0}),React.createElement("label",{className:"onoffswitch-label",onClick:c}))),o))}function Xr({config:e,filterData:t,value:r,onChange:n}){const i=a.useRef(null),[c,o]=a.useState(!1),d=t.props||{},m=e.displayAs||t.props?.display_as||"popup",v=d.placeholder||t.label||"Order By",f=a.useMemo(()=>{const h=d.choices||{};return Array.isArray(h)?h:Object.entries(h).map(([C,_])=>({key:C,label:_.label||_,placeholder:_.placeholder||_.label||_,icon:_.icon||""}))},[d.choices]),g=t.icon||"",F=a.useCallback(()=>{o(!0)},[]),b=a.useCallback(h=>{n(h),m==="popup"&&o(!1)},[n,m]),P=a.useCallback(()=>{n(null)},[n]),y=typeof r=="string"?r:"",w=!!y,M=f.find(h=>h.key===y),R=M?.placeholder||M?.label||v,T=()=>React.createElement("div",{className:"ts-term-dropdown ts-md-group"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list min-scroll"},f.map(h=>{const C=y===h.key;return React.createElement("li",{key:h.key,className:C?"ts-selected":""},React.createElement("a",{href:"#",className:"flexify",onClick:_=>{_.preventDefault(),b(h.key)}},React.createElement("div",{className:"ts-radio-container"},React.createElement("label",{className:"container-radio"},React.createElement("input",{type:"radio",value:h.key,checked:C,readOnly:!0,disabled:!0,hidden:!0}),React.createElement("span",{className:"checkmark"}))),React.createElement("span",null,h.label),h.icon&&React.createElement("div",{className:"ts-term-icon"},React.createElement("span",{dangerouslySetInnerHTML:{__html:h.icon}}))))})));if(m==="buttons"){const{style:h,className:C}=te(e,"ts-form-group");return React.createElement("div",{className:C,style:h},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("ul",{className:"simplify-ul addon-buttons flexify"},f.map(_=>{const x=y===_.key;return React.createElement("li",{key:_.key,className:`flexify${x?" adb-selected":""}`,onClick:()=>b(_.key)},_.placeholder||_.label)})))}if(m==="alt-btn")return React.createElement(React.Fragment,null,f.map(h=>{const C=y===h.key,{style:_,className:x}=te(e,"ts-form-group");return React.createElement("div",{key:h.key,className:x,style:_},!e.hideLabel&&React.createElement("label",null,h.label),React.createElement("div",{className:`ts-filter${C?" ts-filled":""}`,onClick:()=>b(h.key)},h.icon&&React.createElement("span",{dangerouslySetInnerHTML:{__html:h.icon}}),React.createElement("div",{className:"ts-filter-text"},React.createElement("span",null,h.placeholder||h.label))))}));const{style:A,className:p}=te(e,"ts-form-group");return React.createElement("div",{className:p,style:A},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:i,className:`ts-filter ts-popup-target ${w?"ts-filled":""}`,onClick:F,onMouseDown:h=>h.preventDefault(),role:"button",tabIndex:0},g&&React.createElement("span",{dangerouslySetInnerHTML:{__html:g}}),React.createElement("div",{className:"ts-filter-text"},R),React.createElement("div",{className:"ts-down-icon"})),React.createElement(fe,{isOpen:c,target:i,title:"",icon:g,saveLabel:"Save",clearLabel:"Clear",showClear:w,showSave:!1,onSave:()=>o(!1),onClear:P,onClose:()=>o(!1),className:"hide-head"},T()))}function Yr({config:e,filterData:t,value:r,onChange:n}){const[i,c]=a.useState(!1),o=a.useRef(null),d=t.props||{},m=e.displayAs||t.props?.display_as||"popup",v=d.placeholder||t.label||"Status",f=a.useMemo(()=>{const p=d.choices||{};return Array.isArray(p)?p:Object.entries(p).map(([h,C])=>({key:h,label:C.label||C}))},[d.choices]),g=t.icon||"",F=a.useCallback(p=>{n(p),c(!1)},[n]),b=a.useCallback(()=>{c(!0)},[]),P=typeof r=="string"?r:"",y=!!P,w=f.find(p=>p.key===P),M=y&&w?.label||v,R=()=>React.createElement("div",{className:"ts-term-dropdown ts-md-group"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list min-scroll"},f.map(p=>{const h=P===p.key;return React.createElement("li",{key:p.key},React.createElement("a",{href:"#",className:"flexify",onClick:C=>{C.preventDefault(),F(p.key)}},React.createElement("div",{className:"ts-radio-container"},React.createElement("label",{className:"container-radio"},React.createElement("input",{type:"radio",value:p.key,checked:h,readOnly:!0}),React.createElement("span",{className:"checkmark"}))),React.createElement("span",null,p.label),g&&React.createElement("div",{className:"ts-term-icon"},React.createElement("span",{dangerouslySetInnerHTML:{__html:g}}))))})));if(m==="buttons")return React.createElement(React.Fragment,null,f.map(p=>{const h=P===p.key,{style:C,className:_}=te(e,"ts-form-group");return React.createElement("div",{key:p.key,className:_,style:C},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{className:`ts-filter${h?" ts-filled":""}`,onClick:()=>n(p.key)},g&&React.createElement("span",{dangerouslySetInnerHTML:{__html:g}}),React.createElement("div",{className:"ts-filter-text"},React.createElement("span",null,p.label))))}));const{style:T,className:A}=te(e,"ts-form-group");return React.createElement("div",{className:A,style:T},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:o,className:`ts-filter ts-popup-target ${y?"ts-filled":""}`,onClick:b,onMouseDown:p=>p.preventDefault(),role:"button",tabIndex:0},g&&React.createElement("span",{dangerouslySetInnerHTML:{__html:g}}),React.createElement("div",{className:"ts-filter-text"},M),React.createElement("div",{className:"ts-down-icon"})),React.createElement(fe,{isOpen:i,target:o,title:"",icon:g,saveLabel:"Save",showSave:!1,showClear:!1,onSave:()=>c(!1),onClose:()=>c(!1),className:"hide-head"},R()))}function Gr({config:e,filterData:t,value:r,onChange:n}){const i=a.useRef(null),c=a.useRef(null),[o,d]=a.useState(!1),[m,v]=a.useState(""),[f,g]=a.useState([]),[F,b]=a.useState(!1),y=(t.props||{}).placeholder||t.label||"User",w=t.icon||"";a.useEffect(()=>{o&&(v(""),g([]),setTimeout(()=>c.current?.focus(),50))},[o]);const M=a.useCallback(()=>{d(!0)},[]),R=a.useCallback(L=>{const O=L.target.value;v(O),O.length>=2?(b(!0),setTimeout(()=>{g([]),b(!1)},300)):g([])},[]),T=a.useCallback((L,O)=>{n({id:L,name:O}),d(!1),v("")},[n]),A=a.useCallback(()=>{n(null),v(""),g([])},[n]),p=r,h=!!p?.id,C=h&&p?.name||y,{style:_,className:x}=te(e,"ts-form-group");return React.createElement("div",{className:x,style:_},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:i,className:`ts-filter ts-popup-target ${h?"ts-filled":""}`,onClick:M,onMouseDown:L=>L.preventDefault(),role:"button",tabIndex:0},w&&React.createElement("span",{dangerouslySetInnerHTML:{__html:w}}),React.createElement("div",{className:"ts-filter-text"},C),React.createElement("div",{className:"ts-down-icon"})),React.createElement(fe,{isOpen:o,target:i,title:"",icon:w,saveLabel:"Save",clearLabel:"Clear",showClear:h,showSave:!1,onSave:()=>d(!1),onClear:A,onClose:()=>d(!1)},React.createElement("div",{className:"ts-form-group"},React.createElement("div",{className:"flexify ts-input-icon"},React.createElement("span",null,be.search),React.createElement("input",{ref:c,type:"text",className:"inline-input",value:m,onChange:R,placeholder:"Search users..."}))),F?React.createElement("div",{className:"ts-loading"},React.createElement("span",{className:"ts-loader"})):f.length>0?React.createElement("div",{className:"ts-term-dropdown"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list"},f.map(L=>React.createElement("li",{key:L.id},React.createElement("a",{href:"#",className:"flexify",onClick:O=>{O.preventDefault(),T(L.id,L.name)}},L.avatar&&React.createElement("img",{src:L.avatar,alt:L.name,className:"ts-status-avatar"}),React.createElement("span",null,L.name)))))):m.length>=2?React.createElement("div",{className:"ts-empty-user-tab"},React.createElement("span",null,getFilterIcon(t.type)),React.createElement("p",null,"No users found")):null))}function Qr({config:e,filterData:t,value:r,onChange:n}){const i=a.useRef(null),c=a.useRef(null),[o,d]=a.useState(!1),[m,v]=a.useState(""),[f,g]=a.useState([]),[F,b]=a.useState(!1),y=(t.props||{}).placeholder||t.label||"Related",w=t.icon||"";a.useEffect(()=>{o&&(v(""),g([]),setTimeout(()=>c.current?.focus(),50))},[o]);const M=a.useCallback(()=>{d(!0)},[]),R=a.useCallback(L=>{const O=L.target.value;v(O),O.length>=2?(b(!0),setTimeout(()=>{g([]),b(!1)},300)):g([])},[]),T=a.useCallback((L,O)=>{n({id:L,title:O}),d(!1),v("")},[n]),A=a.useCallback(()=>{n(null),v(""),g([])},[n]),p=r,h=!!p?.id,C=h&&p?.title||y,{style:_,className:x}=te(e,"ts-form-group");return React.createElement("div",{className:x,style:_},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:i,className:`ts-filter ts-popup-target ${h?"ts-filled":""}`,onClick:M,onMouseDown:L=>L.preventDefault(),role:"button",tabIndex:0},w&&React.createElement("span",{dangerouslySetInnerHTML:{__html:w}}),React.createElement("div",{className:"ts-filter-text"},C),React.createElement("div",{className:"ts-down-icon"})),React.createElement(fe,{isOpen:o,target:i,title:"",icon:w,saveLabel:"Save",clearLabel:"Clear",showClear:h,showSave:!1,onSave:()=>d(!1),onClear:A,onClose:()=>d(!1)},React.createElement("div",{className:"ts-form-group"},React.createElement("div",{className:"flexify ts-input-icon"},React.createElement("span",null,be.search),React.createElement("input",{ref:c,type:"text",className:"inline-input",value:m,onChange:R,placeholder:"Search..."}))),F?React.createElement("div",{className:"ts-loading"},React.createElement("span",{className:"ts-loader"})):f.length>0?React.createElement("div",{className:"ts-term-dropdown"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list"},f.map(L=>React.createElement("li",{key:L.id},React.createElement("a",{href:"#",className:"flexify",onClick:O=>{O.preventDefault(),T(L.id,L.title)}},React.createElement("span",null,L.title)))))):m.length>=2?React.createElement("div",{className:"ts-empty-user-tab"},w&&React.createElement("span",{dangerouslySetInnerHTML:{__html:w}}),React.createElement("p",null,"No results found")):null))}function $r({config:e,filterData:t,value:r,onChange:n}){const[i,c]=a.useState(!1),[o,d]=a.useState(""),[m,v]=a.useState([]),[f,g]=a.useState(!1),F=a.useRef(null),P=(t.props||{}).placeholder||t.label||"Following",y=t.icon||"",w=x=>{const L=x.target.value;d(L),L.length>=2?(g(!0),setTimeout(()=>{v([]),g(!1)},300)):v([])},M=(x,L)=>{n({id:x,name:L}),c(!1),d("")},R=x=>{x.preventDefault(),c(!i)};a.useEffect(()=>{const x=L=>{F.current&&!F.current.contains(L.target)&&c(!1)};return i&&document.addEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)}},[i]);const T=r,A=!!T?.id,p=A&&T?.name||P,{style:h,className:C}=te(e,"ts-form-group"),_=Yt(e);return React.createElement("div",{className:C,style:h,ref:F},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{className:`ts-filter ts-popup-target ${A?"ts-filled":""}`,onClick:R,onMouseDown:x=>x.preventDefault(),role:"button",tabIndex:0},y&&React.createElement("span",{dangerouslySetInnerHTML:{__html:y}}),React.createElement("div",{className:"ts-filter-text"},p),React.createElement("div",{className:"ts-down-icon"})),i&&React.createElement("div",{className:"ts-field-popup-container"},React.createElement("div",{className:_.className,style:_.style},React.createElement("div",{className:"ts-popup-content-wrapper min-scroll"},React.createElement("div",{className:"ts-form-group"},React.createElement("div",{className:"flexify ts-input-icon"},React.createElement("span",null,be.search),React.createElement("input",{type:"text",className:"inline-input",value:o,onChange:w,placeholder:"Search..."}))),f?React.createElement("div",{className:"ts-loading"},React.createElement("span",{className:"ts-loader"})):m.length>0?React.createElement("div",{className:"ts-term-dropdown"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list"},m.map(x=>React.createElement("li",{key:x.id},React.createElement("a",{href:"#",className:"flexify",onClick:L=>{L.preventDefault(),M(x.id,x.name)}},React.createElement("span",null,x.name)))))):o.length>=2?React.createElement("div",{className:"ts-empty-user-list"},React.createElement("span",null,"No results found")):null))))}function en({config:e,filterData:t,value:r,onChange:n}){const i=r===!0||r==="true"||r==="1",c=m=>{m.preventDefault(),n(!i)},{style:o,className:d}=te(e,"ts-form-group switcher-label ts-inline-filter");return React.createElement("div",{className:d,style:o},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("label",{className:`onoffswitch ts-${i?"on":"off"}`,onClick:c},React.createElement("input",{type:"checkbox",className:"onoffswitch-checkbox",checked:i,readOnly:!0}),React.createElement("span",{className:"onoffswitch-trigger"})))}function tn({config:e,filterData:t}){const r=t.props?.description||"",{style:n,className:i}=te(e,"ts-form-group ui-heading");return React.createElement("div",{className:i,style:n},React.createElement("label",null,e.label||t.label,r&&React.createElement("small",null,r)))}function rn({postTypes:e,currentPostType:t,onChange:r}){const[n,i]=a.useState(!1),c=a.useRef(null),o=a.useCallback(b=>{r(b),i(!1)},[r]),d=a.useCallback(()=>{i(!0)},[]),m=e.find(b=>b.key===t),v=m?.label||"Select type",f=!!t,g=m?.icon||"",F=()=>React.createElement("div",{className:"ts-term-dropdown ts-md-group"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list min-scroll"},e.map(b=>{const P=t===b.key;return React.createElement("li",{key:b.key},React.createElement("a",{href:"#",className:"flexify",onClick:y=>{y.preventDefault(),o(b.key)}},React.createElement("div",{className:"ts-radio-container"},React.createElement("label",{className:"container-radio"},React.createElement("input",{type:"radio",checked:P,disabled:!0,hidden:!0,readOnly:!0}),React.createElement("span",{className:"checkmark"}))),React.createElement("span",null,b.label),React.createElement("div",{className:"ts-term-icon ts-pull-right"},b.icon&&React.createElement("span",{dangerouslySetInnerHTML:{__html:b.icon}}))))})));return React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,"Type"),React.createElement("div",{ref:c,className:`ts-filter ts-popup-target ${f?"ts-filled":""}`,onClick:d,onMouseDown:b=>b.preventDefault(),role:"button",tabIndex:0},g&&React.createElement("span",{dangerouslySetInnerHTML:{__html:g}}),React.createElement("div",{className:"ts-filter-text"},v),React.createElement("div",{className:"ts-down-icon"})),React.createElement(fe,{isOpen:n,target:c,title:"",icon:g,saveLabel:"Save",showSave:!1,showClear:!1,onSave:()=>i(!1),onClose:()=>i(!1),className:"hide-head"},F()))}function nn(){const e=()=>{if(typeof window>"u")return"desktop";const n=window.innerWidth;return n<=767?"mobile":n<=1024?"tablet":"desktop"},[t,r]=a.useState(e);return a.useEffect(()=>{const n=()=>{r(e())};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),t}function sn({attributes:e,postTypes:t,context:r,editorDeviceType:n,onSubmit:i,onPostTypeChange:c}){a.useRef(null);const o=a.useRef(null),{state:d,setCurrentPostType:m,setFilterValue:v,togglePortal:f,submit:g,clearAll:F,narrowedValues:b,narrowingFilters:P}=Zt({attributes:e,postTypes:t,context:r,onSubmit:i,onPostTypeChange:c}),[y,w]=a.useState(""),[M,R]=a.useState("");a.useEffect(()=>{const E=async()=>{const D=e.searchButtonText||"Search";if(Ge(D)){const re=pt(D),j=await ht(re);w(j)}else w(D)},q=async()=>{const D=e.resetButtonText||"Reset";if(Ge(D)){const re=pt(D),j=await ht(re);R(j)}else R(D)};E(),q()},[e.searchButtonText,e.resetButtonText]),a.useEffect(()=>{if(!d.portalActive)return;const E=q=>{q.key==="Escape"&&f()};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[d.portalActive,f]),a.useEffect(()=>{if(!d.portalActive)return;const E=D=>{const re=D.target;o.current?.contains(re)||f()},q=requestAnimationFrame(()=>{document.addEventListener("mousedown",E)});return()=>{cancelAnimationFrame(q),document.removeEventListener("mousedown",E)}},[d.portalActive,f]);const T=t.find(E=>E.key===d.currentPostType),A=e.filterLists?.[d.currentPostType]||[],p=E=>{g()},h=(E=!1)=>{F(E)},C=E=>{const q=T?.filters?.find(re=>re.key===E.filterKey);if(!q)return null;const D={config:E,filterData:q,value:d.filterValues[E.filterKey],onChange:re=>v(E.filterKey,re),narrowedValues:b,isNarrowing:P};switch(q.type){case"keywords":return React.createElement(Gt,{key:E.id,...D});case"range":return React.createElement(Ar,{key:E.id,...D});case"stepper":return React.createElement(Br,{key:E.id,...D});case"terms":return React.createElement(Hr,{key:E.id,...D});case"location":return React.createElement(Ur,{key:E.id,...D});case"availability":return React.createElement(zr,{key:E.id,...D});case"date":return React.createElement(Kr,{key:E.id,...D});case"recurring-date":return React.createElement(Zr,{key:E.id,...D});case"open-now":return React.createElement(Jr,{key:E.id,...D});case"order-by":return React.createElement(Xr,{key:E.id,...D});case"post-status":return React.createElement(Yr,{key:E.id,...D});case"user":return React.createElement(Gr,{key:E.id,...D});case"relations":return React.createElement(Qr,{key:E.id,...D});case"following":return React.createElement($r,{key:E.id,...D});case"switcher":return React.createElement(en,{key:E.id,...D});case"ui-heading":return React.createElement(tn,{key:E.id,...D});default:return null}},_=(E=!0)=>React.createElement("div",{className:"ts-filter-wrapper flexify"},e.showPostTypeFilter&&t.length>1&&React.createElement(rn,{postTypes:t,currentPostType:d.currentPostType,onChange:m}),A.map(q=>C(q)),E&&e.showSearchButton&&React.createElement("div",{className:"ts-form-group flexify ts-form-submit",id:"sf_submit",style:W("search")},React.createElement("button",{type:"button",onClick:()=>p(),className:`ts-btn ts-btn-2 ts-btn-large ts-search-btn ${d.loading&&!d.resetting?"ts-loading-btn":""}`},d.loading&&!d.resetting&&React.createElement("div",{className:"ts-loader-wrapper"},React.createElement("span",{className:"ts-loader"})),be.search,y||"Search")),E&&e.showResetButton&&React.createElement("div",{className:"ts-form-group flexify ts-form-reset",style:W("reset")},React.createElement("a",{href:"#",onClick:q=>{q.preventDefault(),h(!1)},className:"ts-filter",role:"button"},be.reload,M&&React.createElement("div",{className:"ts-filter-text"},M)))),x=nn(),L=r==="editor"&&n?n:x,O=L==="desktop"&&(e.formToggleDesktop??!1)||L==="tablet"&&(e.formToggleTablet??!0)||L==="mobile"&&(e.formToggleMobile??!0),z=O,Z=!O,H={postTypes:t.map(E=>({key:E.key,label:E.label,filters:E.filters})),currentPostType:d.currentPostType,filterLists:e.filterLists||{},portalMode:e.portalMode||{desktop:!1,tablet:!1,mobile:!1},showPostTypeFilter:e.showPostTypeFilter??!0,showSearchButton:e.showSearchButton??!0,showResetButton:e.showResetButton??!1,searchButtonText:e.searchButtonText||"Search",resetButtonText:e.resetButtonText||"",formToggleDesktop:e.formToggleDesktop??!1,formToggleTablet:e.formToggleTablet??!0,formToggleMobile:e.formToggleMobile??!0,searchButtonWidth:e.searchButtonWidth,searchButtonWidth_tablet:e.searchButtonWidth_tablet,searchButtonWidth_mobile:e.searchButtonWidth_mobile,searchButtonWidthUnit:e.searchButtonWidthUnit||"%",resetButtonWidth:e.resetButtonWidth,resetButtonWidth_tablet:e.resetButtonWidth_tablet,resetButtonWidth_mobile:e.resetButtonWidth_mobile,resetButtonWidthUnit:e.resetButtonWidthUnit||"%"},W=E=>{const q=E==="search"?e.searchButtonWidthUnit||"%":e.resetButtonWidthUnit||"%";let D;return E==="search"?L==="mobile"?D=e.searchButtonWidth_mobile??e.searchButtonWidth_tablet??e.searchButtonWidth:L==="tablet"?D=e.searchButtonWidth_tablet??e.searchButtonWidth:D=e.searchButtonWidth:L==="mobile"?D=e.resetButtonWidth_mobile??e.resetButtonWidth_tablet??e.resetButtonWidth:L==="tablet"?D=e.resetButtonWidth_tablet??e.resetButtonWidth:D=e.resetButtonWidth,D!==void 0?{width:`${D}${q}`,flexGrow:0,flexShrink:0}:{}};return React.createElement(React.Fragment,null,React.createElement("div",{className:"ts-form ts-search-widget","data-v-app":""},React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(H)}}),z&&React.createElement("div",{className:"ts-filter-wrapper flexify vx-hidden-desktop"},React.createElement("a",{href:"#",onClick:E=>{E.preventDefault(),f()},onMouseDown:E=>E.preventDefault(),className:`ts-filter-toggle ts-btn ts-btn-1 ${d.activeFilterCount>0?"ts-filled":""}`,role:"button","aria-expanded":d.portalActive},be.filterslider,React.createElement("div",{className:"ts-toggle-text"},"Filter results"),d.activeFilterCount>0&&React.createElement("span",{className:"ts-filter-count"},d.activeFilterCount))),React.createElement("form",{method:"GET",onSubmit:E=>(E.preventDefault(),!1)},Z&&React.createElement("div",{className:"ts-inline-filters"},_())),React.createElement("div",{className:"hidden"},React.createElement("div",{className:"ts-search-portal"}))),d.portalActive&&ft.createPortal(React.createElement("div",{className:"ts-search-portal vx-popup elementor"},React.createElement("div",{className:"ts-popup-root elementor-element"},React.createElement("div",{className:"ts-form ts-search-widget no-render elementor-element"},React.createElement("div",{className:"ts-field-popup-container"},React.createElement("div",{className:"ts-field-popup triggers-blur",ref:o},React.createElement("div",{className:"ts-popup-content-wrapper min-scroll"},React.createElement("div",{className:"ts-form-group"},_())),React.createElement("div",{className:"ts-popup-controller"},React.createElement("ul",{className:"flexify simplify-ul"},React.createElement("li",{className:"flexify ts-popup-close"},React.createElement("a",{href:"#",onClick:E=>{E.preventDefault(),f()},className:"ts-icon-btn",role:"button","aria-label":"Close"},be.close)),React.createElement("li",{className:"flexify hide-d"},React.createElement("a",{href:"#",onClick:E=>{E.preventDefault(),h(!0)},className:"ts-icon-btn",role:"button"},be.reload)),React.createElement("li",{className:"flexify hide-m"},React.createElement("a",{href:"#",onClick:E=>{E.preventDefault(),h(!0)},className:"ts-btn ts-btn-1",role:"button"},"Clear")),React.createElement("li",{className:"flexify"},React.createElement("a",{href:"#",onClick:E=>{E.preventDefault(),p(),f()},className:"ts-btn ts-btn-2",role:"button"},"Search"))))))))),document.body))}const st=new Map;function an(){return mt()}function _e(e,t){if(!e)return t;try{return JSON.parse(e)}catch{return t}}function xe(e){return e==="true"}function ln(e){const t=r=>{if(!r||r==="")return;const n=Number(r);return isNaN(n)?void 0:n};return{blockId:e.id||"",postTypes:_e(e.dataset.postTypes,[]),showPostTypeFilter:xe(e.dataset.showPostTypeFilter),filterLists:_e(e.dataset.filterLists,{}),onSubmit:e.dataset.onSubmit||"refresh",postToFeedId:e.dataset.postToFeedId||"",postToMapId:e.dataset.postToMapId||"",searchOn:e.dataset.searchOn||"submit",showSearchButton:xe(e.dataset.showSearchButton),searchButtonText:e.dataset.searchButtonText||"Search",searchButtonIcon:_e(e.dataset.searchButtonIcon,{}),searchButtonWidth:t(e.dataset.searchButtonWidth),searchButtonWidth_tablet:t(e.dataset.searchButtonWidthTablet),searchButtonWidth_mobile:t(e.dataset.searchButtonWidthMobile),searchButtonWidthUnit:e.dataset.searchButtonWidthUnit||"%",showResetButton:xe(e.dataset.showResetButton),resetButtonText:e.dataset.resetButtonText||"Reset",resetButtonIcon:_e(e.dataset.resetButtonIcon,{}),resetButtonWidth:t(e.dataset.resetButtonWidth),resetButtonWidth_tablet:t(e.dataset.resetButtonWidthTablet),resetButtonWidth_mobile:t(e.dataset.resetButtonWidthMobile),resetButtonWidthUnit:e.dataset.resetButtonWidthUnit||"%",voxelIntegration:xe(e.dataset.voxelIntegration),adaptiveFiltering:xe(e.dataset.adaptiveFiltering),portalMode:_e(e.dataset.portalMode,{desktop:!1,tablet:!0,mobile:!0}),formToggleDesktop:xe(e.dataset.formToggleDesktop),formToggleTablet:xe(e.dataset.formToggleTablet),formToggleMobile:xe(e.dataset.formToggleMobile),toggleText:e.dataset.toggleText||"Filter results",toggleIcon:_e(e.dataset.toggleIcon,{})}}async function on(e){if(!e||e.length===0)return[];const r=`${an()}voxel-fse/v1/search-form/frontend-config?post_types=${encodeURIComponent(e.join(","))}`;try{const n=await fetch(r);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(n){return console.error("Failed to fetch post types:",n),[]}}function cn(e){const t=(o,d)=>typeof o=="boolean"?o:o==="true"?!0:o==="false"?!1:d,r=o=>{if(o&&typeof o=="object"){const d=o;return{desktop:t(d.desktop,!1),tablet:t(d.tablet,!0),mobile:t(d.mobile,!0)}}return{desktop:!1,tablet:!0,mobile:!0}},n=o=>o&&typeof o=="object"?o:{},c=(e.postTypes??e.post_types??[]).map(o=>typeof o=="string"?o:o&&typeof o=="object"&&"key"in o?o.key:"").filter(Boolean);return{blockId:e.blockId??e.block_id??"",postTypes:c,showPostTypeFilter:t(e.showPostTypeFilter??e.show_post_type_filter,!0),filterLists:e.filterLists??e.filter_lists??{},onSubmit:e.onSubmit??e.on_submit??"refresh",postToFeedId:e.postToFeedId??e.post_to_feed_id??"",postToMapId:e.postToMapId??e.post_to_map_id??"",searchOn:e.searchOn??e.search_on??"submit",showSearchButton:t(e.showSearchButton??e.show_search_button,!0),searchButtonText:e.searchButtonText??e.search_button_text??"Search",searchButtonIcon:n(e.searchButtonIcon??e.search_button_icon),searchButtonWidth:e.searchButtonWidth,searchButtonWidth_tablet:e.searchButtonWidth_tablet??e.search_button_width_tablet,searchButtonWidth_mobile:e.searchButtonWidth_mobile??e.search_button_width_mobile,searchButtonWidthUnit:e.searchButtonWidthUnit??e.search_button_width_unit??"%",showResetButton:t(e.showResetButton??e.show_reset_button,!1),resetButtonText:e.resetButtonText??e.reset_button_text??"Reset",resetButtonIcon:n(e.resetButtonIcon??e.reset_button_icon),resetButtonWidth:e.resetButtonWidth,resetButtonWidth_tablet:e.resetButtonWidth_tablet??e.reset_button_width_tablet,resetButtonWidth_mobile:e.resetButtonWidth_mobile??e.reset_button_width_mobile,resetButtonWidthUnit:e.resetButtonWidthUnit??e.reset_button_width_unit??"%",voxelIntegration:t(e.voxelIntegration??e.voxel_integration,!0),adaptiveFiltering:t(e.adaptiveFiltering??e.adaptive_filtering,!1),portalMode:r(e.portalMode??e.portal_mode),formToggleDesktop:t(e.formToggleDesktop??e.form_toggle_desktop,!1),formToggleTablet:t(e.formToggleTablet??e.form_toggle_tablet,!0),formToggleMobile:t(e.formToggleMobile??e.form_toggle_mobile,!0),toggleText:e.toggleText??e.toggle_text??"Filter results",toggleIcon:n(e.toggleIcon??e.toggle_icon)}}function un(e){const t=e.querySelector("script.vxconfig");if(t&&t.textContent)try{const r=JSON.parse(t.textContent),n={...r,blockId:r.blockId||e.id||"",onSubmit:e.dataset.onSubmit||r.onSubmit||"refresh",postToFeedId:e.dataset.postToFeedId||r.postToFeedId||"",postToMapId:e.dataset.postToMapId||r.postToMapId||""};return cn(n)}catch(r){console.error("Failed to parse vxconfig:",r)}return ln(e)}function dn({attributes:e,onSubmit:t}){const[r,n]=a.useState([]),[i,c]=a.useState(!0),[o,d]=a.useState(null),m=a.useRef(!1),v=a.useCallback(()=>{if(m.current)return;const g=e.postTypes?.[0]||"";g&&(t({postType:g}),m.current=!0)},[e.postTypes,t]);if(a.useEffect(()=>{let g=!1;async function F(){c(!0),d(null);try{const b=await on(e.postTypes||[]);g||n(b)}catch(b){g||d(b instanceof Error?b.message:"Failed to load")}finally{g||c(!1)}}return F(),()=>{g=!0}},[e.postTypes]),a.useEffect(()=>{const g=e.blockId;return g?(st.set(g,v),window.__voxelFsePendingPostFeedReady?.[g]&&(v(),delete window.__voxelFsePendingPostFeedReady[g]),()=>{st.delete(g)}):void 0},[e.blockId,v]),i)return React.createElement("div",{className:"ts-form ts-search-widget voxel-fse-loading"},React.createElement("div",{className:"ts-filter-wrapper flexify"},React.createElement("span",{className:"ts-loader"})));if(o)return React.createElement("div",{className:"ts-form ts-search-widget voxel-fse-error"},React.createElement("div",{className:"ts-filter-wrapper flexify"},React.createElement("span",null,"Error loading search form")));const f=r.filter(g=>e.postTypes?.includes(g.key));return React.createElement(sn,{attributes:e,postTypes:f,context:"frontend",onSubmit:t})}function Ze(){document.querySelectorAll(".voxel-fse-search-form").forEach(t=>{if(t.dataset.hydrated==="true")return;const r=un(t),n=c=>{const o=c.postType||r.postTypes?.[0]||"",{postType:d,...m}=c;switch(r.onSubmit){case"feed":if(r.postToFeedId){const v=new CustomEvent("voxel-search-submit",{detail:{targetId:r.postToFeedId,postType:o,filters:m},bubbles:!0});window.dispatchEvent(v)}else console.warn("[search-form] No postToFeedId set, cannot dispatch to Post Feed");break;case"map":if(r.postToMapId){const v=new CustomEvent("voxel-search-submit",{detail:{targetId:r.postToMapId,postType:o,filters:m},bubbles:!0});window.dispatchEvent(v)}break;default:fn(c,r);break}};t.innerHTML="",t.dataset.hydrated="true",jt.createRoot(t).render(React.createElement(dn,{attributes:r,onSubmit:n}))})}function fn(e,t){const r=new URL(window.location.href),n=[];r.searchParams.forEach((c,o)=>{(o.startsWith("filter_")||o==="post_type")&&n.push(o)}),n.forEach(c=>r.searchParams.delete(c));const i=e.postType||t.postTypes?.[0];i&&typeof i=="string"&&r.searchParams.set("post_type",i),Object.entries(e).forEach(([c,o])=>{c!=="postType"&&(o==null||o===""||(typeof o=="object"?r.searchParams.set(`filter_${c}`,JSON.stringify(o)):r.searchParams.set(`filter_${c}`,String(o))))}),window.location.href=r.toString()}function mn(e){const t=e;if(!t.detail?.searchFormId)return;const{searchFormId:r}=t.detail,n=st.get(r);n?n():(window.__voxelFsePendingPostFeedReady||(window.__voxelFsePendingPostFeedReady={}),window.__voxelFsePendingPostFeedReady[r]=t.detail.blockId)}window.addEventListener("voxel-fse:post-feed-ready",mn),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Ze):Ze(),window.addEventListener("turbo:load",Ze),window.addEventListener("pjax:complete",Ze)})(ReactDOM,React,ReactDOM,wp.apiFetch);
