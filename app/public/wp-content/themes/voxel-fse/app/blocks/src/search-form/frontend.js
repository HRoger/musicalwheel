(function(jt,a,ft,zt){"use strict";function qt(){if(typeof window<"u"&&window.wpApiSettings?.root)return window.wpApiSettings.root.replace(/\/wp-json\/?$/,"")+"?vx=1";if(typeof document<"u"){const e=document.querySelector('link[rel="https://api.w.org/"]');if(e){const t=e.getAttribute("href");if(t)return t.replace(/\/wp-json\/?$/,"")+"?vx=1"}}return typeof window<"u"?window.location.origin+"?vx=1":"/?vx=1"}function Kt(){const e=qt();try{return new URL(e).pathname.replace(/\/$/,"")}catch{return""}}function mt(){if(typeof window<"u"&&window.wpApiSettings?.root)return window.wpApiSettings.root;if(typeof document<"u"){const t=document.querySelector('link[rel="https://api.w.org/"]');if(t){const r=t.getAttribute("href");if(r)return r}}const e=Kt();return typeof window<"u"?window.location.origin+e+"/wp-json/":"/wp-json/"}function Zt({attributes:e,postTypes:t,context:r,onSubmit:n,onPostTypeChange:i}){const[c,o]=a.useState(()=>({currentPostType:e.postTypes[0]||"",filterValues:{},activeFilterCount:0,portalActive:!1,loading:!1,resetting:!1,narrowedValues:null,narrowingFilters:!1})),d=a.useRef(!1),m=a.useRef(null),f=a.useMemo(()=>t.find(x=>x.key===c.currentPostType),[t,c.currentPostType]),v=a.useMemo(()=>e.filterLists[c.currentPostType]||[],[e.filterLists,c.currentPostType]);a.useEffect(()=>{e.postTypes.length>0&&!e.postTypes.includes(c.currentPostType)&&o(x=>({...x,currentPostType:e.postTypes[0],filterValues:{}}))},[e.postTypes,c.currentPostType]),a.useEffect(()=>{const x=Object.values(c.filterValues).filter(P=>P!=null&&P!==""&&P!==!1).length;o(P=>({...P,activeFilterCount:x}))},[c.filterValues]);const g=a.useCallback(x=>{o(P=>P.currentPostType===x?P:{...P,currentPostType:x,filterValues:{}}),r==="editor"&&i&&i(x),r==="frontend"&&n&&setTimeout(()=>{n({postType:x})},50)},[r,n,i]),V=a.useCallback((x,P)=>{o(A=>({...A,filterValues:{...A.filterValues,[x]:P}})),e.searchOn==="change"&&r==="frontend"&&setTimeout(()=>{w()},300)},[e.searchOn,r]),b=a.useCallback((x=!1)=>{if(o(P=>({...P,filterValues:{},activeFilterCount:0,resetting:!0,portalActive:x?!1:P.portalActive})),setTimeout(()=>{o(P=>({...P,resetting:!1}))},100),r==="frontend"){const P=new CustomEvent("voxel-search-clear",{detail:{postType:c.currentPostType}});window.dispatchEvent(P)}},[r,c.currentPostType]),L=a.useCallback(()=>{o(x=>({...x,portalActive:!x.portalActive}))},[]),S=a.useCallback(async()=>{if(!e.adaptiveFiltering||r!=="frontend")return;if(d.current){d.current=!1;return}const x=v.filter(p=>p.type==="range"||p.type==="terms");if(x.length===0)return;const P=new URLSearchParams;P.set("post_type",c.currentPostType),Object.entries(c.filterValues).forEach(([p,h])=>{h!=null&&h!==""&&(Array.isArray(h)?P.set(p,h.join(",")):typeof h=="object"?P.set(p,JSON.stringify(h)):P.set(p,String(h)))});const A=[];x.forEach(p=>{if(p.type==="terms"){const h=f?.filters?.find(R=>R.key===p.filterKey);if(h?.props?.terms){const R=_=>{_.forEach(C=>{C.term_taxonomy_id&&A.push(C.term_taxonomy_id),C.children&&Array.isArray(C.children)&&R(C.children)})};R(h.props.terms)}}}),o(p=>({...p,narrowingFilters:!0}));try{const p=mt(),h=await fetch(`${p}voxel-fse/v1/search-form/narrow-filters?${P.toString()}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({term_taxonomy_ids:A})});if(!h.ok)throw new Error(`HTTP ${h.status}`);const R=await h.json();R.success&&R.data?(o(_=>({..._,narrowedValues:{ranges:R.data.ranges||{},terms:R.data.terms||{}},narrowingFilters:!1})),d.current=!0):o(_=>({..._,narrowingFilters:!1}))}catch(p){console.error("[useSearchForm] Adaptive filtering error:",p),o(h=>({...h,narrowingFilters:!1}))}},[e.adaptiveFiltering,r,v,c.currentPostType,c.filterValues,f]);a.useEffect(()=>{if(!(!e.adaptiveFiltering||r!=="frontend"))return m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{S()},300),()=>{m.current&&clearTimeout(m.current)}},[c.filterValues,e.adaptiveFiltering,r,S]);const w=a.useCallback(()=>{o(x=>({...x,loading:!0})),n&&n({postType:c.currentPostType,...c.filterValues}),r==="frontend"&&Jt(c.filterValues,c.currentPostType),o(x=>({...x,loading:!1}))},[r,n,c.currentPostType,c.filterValues]),I=a.useCallback(()=>{w()},[w]);return{state:c,setCurrentPostType:g,setFilterValue:V,clearAll:b,togglePortal:L,submit:I,currentPostTypeConfig:f,filterConfigs:v,narrowedValues:c.narrowedValues,narrowingFilters:c.narrowingFilters}}function Jt(e,t){const r=new URL(window.location.href),n=[];r.searchParams.forEach((i,c)=>{(c.startsWith("filter_")||c==="post_type")&&n.push(c)}),n.forEach(i=>r.searchParams.delete(i)),t&&r.searchParams.set("post_type",t),Object.entries(e).forEach(([i,c])=>{c!=null&&c!==""&&(Array.isArray(c)?r.searchParams.set(`filter_${i}`,c.join(",")):typeof c=="object"?r.searchParams.set(`filter_${i}`,JSON.stringify(c)):r.searchParams.set(`filter_${i}`,String(c)))}),window.history.replaceState({},"",r.toString())}function Ge(e){return typeof e=="string"&&e.includes("@tags()")}function pt(e){if(!Ge(e))return e;const t=e.match(/@tags\(\)(.*?)@endtags\(\)/s);return t?t[1]:e}async function ht(e,t={}){try{return(await zt({path:"/voxel-fse/v1/dynamic-data/render",method:"POST",data:{expression:e,context:t}})).rendered}catch(r){return console.error("Failed to render dynamic tag:",r),e}}function de({isOpen:e,target:t,title:r="",icon:n,saveLabel:i="Save",clearLabel:c="Clear",showClear:o=!0,showSave:d=!0,onSave:m,onClear:f,onClose:v,children:g,className:V=""}){const b=a.useRef(null),L=a.useRef(null),[S,w]=a.useState({position:"absolute",top:"-9999px",left:"-9999px"}),I=a.useRef(""),x=a.useCallback((p=!1)=>{if(!L.current||!t.current||!b.current)return;const h=t.current,R=b.current,_=L.current,C=document.body.clientWidth,M=h.getBoundingClientRect(),B=h.offsetWidth,j={left:M.left+window.pageXOffset,top:M.top+window.pageYOffset},K=R.getBoundingClientRect(),O=window.getComputedStyle(_),H=parseFloat(O.minWidth)||0,E=_.querySelector(".pika-single");let z;if(E){const oe=E.classList.contains("is-range")||E.querySelectorAll(".pika-lendar").length>1||_.closest(".ts-booking-date-range")!==null;z=Math.max(oe?640:420,H)}else z=Math.max(M.width,H);const T=j.left+B/2,Y=C/2;let G;T>Y+1?G=j.left-z+B:G=j.left;const ve=window.innerHeight,W=K.height;let J=j.top+M.height;const q=M.bottom+W>ve,$=M.top-W>=0;q&&$&&(J=j.top-W);const ie={top:`${J}px`,left:`${G}px`,width:`${z}px`,position:"absolute"},me=JSON.stringify(ie);me!==I.current&&(I.current=me,p?w(ie):requestAnimationFrame(()=>w(ie)))},[t]);if(a.useEffect(()=>{if(!e)return;const p=R=>{const _=R.target;L.current?.contains(_)||v()},h=requestAnimationFrame(()=>{document.addEventListener("mousedown",p)});return()=>{cancelAnimationFrame(h),document.removeEventListener("mousedown",p)}},[e,v]),a.useEffect(()=>{if(!e)return;const p=h=>{h.key==="Escape"&&v()};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[e,v]),a.useEffect(()=>{if(!e)return;x(!0);const p=()=>x();window.addEventListener("scroll",p,!0);const h=()=>x();window.addEventListener("resize",h,!0);let R=null;return L.current&&(R=new ResizeObserver(()=>x(!0)),R.observe(L.current)),()=>{window.removeEventListener("scroll",p,!0),window.removeEventListener("resize",h,!0),R?.disconnect()}},[e,x]),!e)return null;const P=()=>React.createElement("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M14 1.41L12.59 0L7 5.59L1.41 0L0 1.41L5.59 7L0 12.59L1.41 14L7 8.41L12.59 14L14 12.59L8.41 7L14 1.41Z",fill:"currentColor"})),A=()=>React.createElement("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z",fill:"currentColor"}));return ft.createPortal(React.createElement("div",{className:`elementor vx-popup ${V}`.trim()},React.createElement("div",{className:"ts-popup-root elementor-element"},React.createElement("div",{className:"ts-form elementor-element",style:S,ref:b},React.createElement("div",{className:"ts-field-popup-container"},React.createElement("div",{className:"ts-field-popup triggers-blur",ref:L},r&&React.createElement("div",{className:"ts-popup-head flexify ts-sticky-top"},React.createElement("div",{className:"ts-popup-name flexify"},n&&React.createElement("span",{dangerouslySetInnerHTML:{__html:n}}),React.createElement("span",null,r)),React.createElement("ul",{className:"flexify simplify-ul"},React.createElement("li",{className:"flexify ts-popup-close"},React.createElement("a",{href:"#",onClick:p=>{p.preventDefault(),v()},className:"ts-icon-btn","aria-label":"Close"},React.createElement(P,null))))),React.createElement("div",{className:"ts-popup-content-wrapper min-scroll"},g),d||o?React.createElement("div",{className:"ts-popup-controller"},React.createElement("ul",{className:"flexify simplify-ul"},React.createElement("li",{className:"flexify ts-popup-close"},React.createElement("a",{href:"#",onClick:p=>{p.preventDefault(),v()},className:"ts-icon-btn","aria-label":"Close"},React.createElement(P,null))),o&&f&&React.createElement("li",{className:"flexify hide-d",onClick:p=>{p.preventDefault(),f()}},React.createElement("a",{href:"#",className:"ts-icon-btn"},React.createElement(A,null))),o&&f&&React.createElement("li",{className:"flexify hide-m",onClick:p=>{p.preventDefault(),f()}},React.createElement("a",{href:"#",className:"ts-btn ts-btn-1"},c)),d&&React.createElement("li",{className:"flexify"},React.createElement("a",{href:"#",onClick:p=>{p.preventDefault(),m(),v()},className:"ts-btn ts-btn-2"},i)))):React.createElement("div",{className:"ts-popup-controller hide-d"},React.createElement("ul",{className:"flexify simplify-ul"},React.createElement("li",{className:"flexify ts-popup-close"},React.createElement("a",{href:"#",onClick:p=>{p.preventDefault(),v()},className:"ts-icon-btn","aria-label":"Close"},React.createElement(P,null)))))))))),document.body)}const Pe=({value:e,onChange:t,onSelect:r,pickerConfig:n,onPickerReady:i})=>{const c=a.useRef(null),o=a.useRef(null),d=a.useRef(null);return a.useEffect(()=>{if(!c.current||!o.current)return;const m=window.Pikaday;if(!m){console.error("Pikaday not loaded - window.Pikaday is undefined");return}const f=requestAnimationFrame(()=>{d.current=new m({field:o.current,container:c.current,bound:!1,firstDay:1,keyboardInput:!1,numberOfMonths:2,defaultDate:e||void 0,onSelect:v=>{t(v),r&&r(v)},...n}),i&&d.current&&i(d.current)});return()=>{cancelAnimationFrame(f),setTimeout(()=>{d.current?.destroy(),d.current=null},200)}},[]),a.useEffect(()=>{d.current&&(e&&d.current.setDate(e,!0),d.current.draw(!0))},[e]),a.createElement("div",{className:"ts-booking-date ts-booking-date-range ts-form-group",ref:c},a.createElement("input",{type:"hidden",ref:o}))},be={search:React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},React.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.25 2.75C6.14154 2.75 2 6.89029 2 11.998C2 17.1056 6.14154 21.2459 11.25 21.2459C13.5335 21.2459 15.6238 20.4187 17.2373 19.0475L20.7182 22.5287C21.011 22.8216 21.4859 22.8217 21.7788 22.5288C22.0717 22.2359 22.0718 21.761 21.7789 21.4681L18.2983 17.9872C19.6714 16.3736 20.5 14.2826 20.5 11.998C20.5 6.89029 16.3585 2.75 11.25 2.75ZM3.5 11.998C3.5 7.71905 6.96962 4.25 11.25 4.25C15.5304 4.25 19 7.71905 19 11.998C19 16.2769 15.5304 19.7459 11.25 19.7459C6.96962 19.7459 3.5 16.2769 3.5 11.998Z",fill:"#343C54"})),close:React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},React.createElement("path",{d:"M5.9545 5.95548C6.39384 5.51614 7.10616 5.51614 7.5455 5.95548L11.999 10.409L16.4524 5.95561C16.8918 5.51627 17.6041 5.51627 18.0434 5.95561C18.4827 6.39495 18.4827 7.10726 18.0434 7.5466L13.59 12L18.0434 16.4534C18.4827 16.8927 18.4827 17.605 18.0434 18.0444C17.6041 18.4837 16.8918 18.4837 16.4524 18.0444L11.999 13.591L7.5455 18.0445C7.10616 18.4839 6.39384 18.4839 5.9545 18.0445C5.51517 17.6052 5.51516 16.8929 5.9545 16.4535L10.408 12L5.9545 7.54647C5.51516 7.10713 5.51517 6.39482 5.9545 5.95548Z",fill:"#343C54"})),reload:React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},React.createElement("path",{d:"M21.6009 10.4593C22.001 10.3521 22.2384 9.94088 22.1312 9.54078C21.59 7.52089 20.3974 5.73603 18.7384 4.46302C17.0793 3.19001 15.0466 2.5 12.9555 2.5C10.8644 2.5 8.83164 3.19001 7.17262 4.46302C6.12405 5.26762 5.26179 6.2767 4.63257 7.42036L2.86504 6.92617C2.76093 6.89707 2.65423 6.89133 2.55153 6.9068C2.46222 6.91962 2.37374 6.94889 2.29039 6.99582C1.92945 7.19903 1.80158 7.65636 2.00479 8.0173L3.73942 11.0983C3.83701 11.2717 3.99946 11.3991 4.19104 11.4527C4.30333 11.4841 4.42023 11.4886 4.53266 11.4673C4.61373 11.4524 4.69254 11.4242 4.7657 11.383L7.84641 9.64831C8.11073 9.49948 8.25936 9.20608 8.22302 8.90493C8.18668 8.60378 7.9725 8.35417 7.68037 8.27249L6.1241 7.83737C6.6343 6.99996 7.29751 6.2579 8.08577 5.65305C9.48282 4.58106 11.1946 4 12.9555 4C14.7164 4 16.4282 4.58106 17.8252 5.65305C19.2223 6.72504 20.2266 8.22807 20.6823 9.92901C20.7895 10.3291 21.2008 10.5665 21.6009 10.4593Z",fill:"#343C54"}),React.createElement("path",{d:"M4.30739 13.5387C3.90729 13.6459 3.66985 14.0572 3.77706 14.4573C4.31829 16.4771 5.51089 18.262 7.16991 19.535C8.82892 20.808 10.8616 21.498 12.9528 21.498C15.0439 21.498 17.0766 20.808 18.7356 19.535C19.7859 18.7291 20.6493 17.7181 21.2787 16.5722L23.0083 17.0557C23.1218 17.0961 23.2447 17.1091 23.3661 17.0917C23.5554 17.0658 23.7319 16.968 23.8546 16.8116C24.0419 16.573 24.0669 16.245 23.9181 15.9807L22.1835 12.8996C22.0859 12.7263 21.9234 12.5988 21.7319 12.5453C21.64 12.5196 21.5451 12.5119 21.4521 12.5216C21.3493 12.5317 21.2488 12.5629 21.1571 12.6146L18.0764 14.3493C17.7155 14.5525 17.5876 15.0099 17.7909 15.3708C17.9016 15.5675 18.0879 15.695 18.2929 15.7373L19.7875 16.1552C19.2768 16.9949 18.6125 17.7388 17.8225 18.345C16.4255 19.417 14.7137 19.998 12.9528 19.998C11.1918 19.998 9.4801 19.417 8.08305 18.345C6.686 17.273 5.68171 15.77 5.22595 14.069C5.11874 13.6689 4.70749 13.4315 4.30739 13.5387Z",fill:"#343C54"})),filterslider:React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},React.createElement("path",{d:"M8.89789 3.25C10.3318 3.25 11.5358 4.23471 11.8704 5.56481H20.3125C20.7267 5.56481 21.0625 5.90059 21.0625 6.31481C21.0625 6.72902 20.7267 7.06481 20.3125 7.06481H11.8705C11.536 8.3951 10.332 9.38 8.89789 9.38C7.46381 9.38 6.25976 8.3951 5.92527 7.06481H4.3125C3.89829 7.06481 3.5625 6.72902 3.5625 6.31481C3.5625 5.90059 3.89829 5.56481 4.3125 5.56481H5.92537C6.26 4.23471 7.46395 3.25 8.89789 3.25Z",fill:"#343C54"}),React.createElement("path",{d:"M12.737 12.7503H4.3125C3.89829 12.7503 3.5625 12.4145 3.5625 12.0003C3.5625 11.5861 3.89829 11.2503 4.3125 11.2503H12.7369C13.0714 9.91998 14.2754 8.93506 15.7095 8.93506C17.1436 8.93506 18.3477 9.91998 18.6822 11.2503H20.3125C20.7267 11.2503 21.0625 11.5861 21.0625 12.0003C21.0625 12.4145 20.7267 12.7503 20.3125 12.7503H18.682C18.3474 14.0804 17.1435 15.0651 15.7095 15.0651C14.2756 15.0651 13.0717 14.0804 12.737 12.7503Z",fill:"#343C54"}),React.createElement("path",{d:"M12.5932 16.9354C12.2587 15.605 11.0546 14.6201 9.62055 14.6201C8.18645 14.6201 6.9824 15.605 6.64792 16.9354H4.3125C3.89829 16.9354 3.5625 17.2711 3.5625 17.6854C3.5625 18.0996 3.89829 18.4354 4.3125 18.4354H6.64804C6.98268 19.7654 8.18662 20.7501 9.62055 20.7501C11.0545 20.7501 12.2584 19.7654 12.5931 18.4354H20.3125C20.7267 18.4354 21.0625 18.0996 21.0625 17.6854C21.0625 17.2711 20.7267 16.9354 20.3125 16.9354H12.5932Z",fill:"#343C54"})),crosshairs:React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C12.5523 2 13 2.44772 13 3V4.06189C16.6187 4.51314 19.4869 7.38128 19.9381 11H21C21.5523 11 22 11.4477 22 12C22 12.5523 21.5523 13 21 13H19.9381C19.4869 16.6187 16.6187 19.4869 13 19.9381V21C13 21.5523 12.5523 22 12 22C11.4477 22 11 21.5523 11 21V19.9381C7.38128 19.4869 4.51314 16.6187 4.06189 13H3C2.44772 13 2 12.5523 2 12C2 11.4477 2.44772 11 3 11H4.06189C4.51314 7.38128 7.38128 4.51314 11 4.06189V3C11 2.44772 11.4477 2 12 2ZM6.07089 11C6.50618 8.48991 8.48991 6.50618 11 6.07089V8C11 8.55228 11.4477 9 12 9C12.5523 9 13 8.55228 13 8V6.07089C15.5101 6.50618 17.4938 8.48991 17.9291 11H16C15.4477 11 15 11.4477 15 12C15 12.5523 15.4477 13 16 13H17.9291C17.4938 15.5101 15.5101 17.4938 13 17.9291V16C13 15.4477 12.5523 15 12 15C11.4477 15 11 15.4477 11 16V17.9291C8.48991 17.4938 6.50618 15.5101 6.07089 13H8C8.55228 13 9 12.5523 9 12C9 11.4477 8.55228 11 8 11H6.07089Z",fill:"#343C54"}))};function Xt(e,t){const r={},n=[t];return e.rowVisibility==="hide"&&(r.display="none"),e.width&&e.width>0&&(r.width=`${e.width}%`,r.flexGrow=0,r.flexShrink=0),e.hideFilter&&n.push("vx-hidden"),e.alignContent&&(r.justifyContent=e.alignContent),e.hideLabel&&n.push("hide-label"),{style:r,className:n.join(" ")}}function re(e,t){return Xt(e,t)}function Yt(e){const t={},r=["ts-field-popup","triggers-blur"];return e.customPopupEnabled&&(e.popupMinWidth&&e.popupMinWidth>0&&(t.minWidth=`${e.popupMinWidth}px`),e.popupMaxWidth&&e.popupMaxWidth>0&&(t.maxWidth=`${e.popupMaxWidth}px`),e.popupMaxHeight&&e.popupMaxHeight>0&&(t.maxHeight=`${e.popupMaxHeight}px`),e.popupCenterPosition&&r.push("ts-popup-centered")),{style:t,className:r.join(" ")}}let vt=!1;function Qe(){if(vt)return!0;if(!window.Voxel?.mixins?.base)return!1;const e=window.Voxel.mixins.base;return e.mounted&&!e._originalMounted?(e._originalMounted=e.mounted,e.mounted=function(){try{const t=this.$root?.$options?.el||this.$el;if(t){const r=t.closest?.(".elementor-element");if(r)this.widget_id=r.dataset?.id||"";else{const i=t.closest?.("[data-block-id]");this.widget_id=i&&i.dataset?.blockId||""}const n=t.closest?.(".elementor");if(n)this.post_id=n.dataset?.elementorId||"";else{const i=document.body.className.match(/postid-(\d+)/);this.post_id=i?i[1]:""}}e._originalMounted&&e._originalMounted!==e.mounted&&e._originalMounted.call(this)}catch(t){console.warn("[VoxelShim] Error in patched mounted():",t),this.widget_id="",this.post_id=""}},vt=!0,console.log("[VoxelShim] Successfully patched Voxel.mixins.base.mounted"),!0):!1}function gt(){if(Qe())return;let e=0;const t=50,n=setInterval(()=>{if(e++,Qe()){clearInterval(n);return}e>=t&&(clearInterval(n),console.warn("[VoxelShim] Voxel.mixins.base not found after 5 seconds"))},100);typeof document<"u"&&document.addEventListener("voxel:ready",()=>{Qe(),clearInterval(n)},{once:!0})}typeof window<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",gt,{once:!0}):gt()),typeof window<"u"&&typeof window._vx_file_upload_cache>"u"&&(window._vx_file_upload_cache=[]);function Gt({config:e,filterData:t,value:r,onChange:n}){const i=a.useRef(null),c=a.useRef(null),[o,d]=a.useState(!1),[m,f]=a.useState(""),v=typeof r=="string"?r:"",g=t.props?.placeholder||t.label||"Type keywords...",V=e.displayAs||t.props?.display_as||"inline",b=t.icon||"";a.useEffect(()=>{o&&(f(v),setTimeout(()=>{c.current?.focus()},50))},[o,v]);const L=R=>{n(R.target.value)},S=R=>{f(R.target.value)},w=a.useCallback(()=>{d(!0)},[]),I=a.useCallback(()=>{n(m),d(!1)},[m,n]),x=a.useCallback(()=>{f(""),n("")},[n]),P=a.useCallback(R=>{R.key==="Enter"&&(R.preventDefault(),I())},[I]);if(V==="inline"){const{style:R,className:_}=re(e,"ts-form-group ts-inline-filter");return React.createElement("div",{className:_,style:R},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{className:"ts-input-icon flexify"},b&&React.createElement("span",{dangerouslySetInnerHTML:{__html:b}}),React.createElement("input",{type:"text",value:v,onChange:L,placeholder:g,className:"inline-input"})))}const A=v.length>0,{style:p,className:h}=re(e,"ts-form-group");return React.createElement("div",{className:h,style:p},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:i,className:`ts-filter ts-popup-target ${A?"ts-filled":""}`,onClick:w,onMouseDown:R=>R.preventDefault(),role:"button",tabIndex:0},b&&React.createElement("span",{dangerouslySetInnerHTML:{__html:b}}),React.createElement("div",{className:"ts-filter-text"},A?v:g)),React.createElement(de,{isOpen:o,target:i,title:"",icon:b,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:I,onClear:x,onClose:()=>d(!1)},React.createElement("div",{className:"ts-input-icon ts-sticky-top flexify"},React.createElement("span",null,be.search),React.createElement("input",{ref:c,type:"text",value:m,onChange:S,onKeyDown:P,placeholder:g,className:"autofocus border-none"}))))}var we;(function(e){e.Range="range",e.Steps="steps",e.Positions="positions",e.Count="count",e.Values="values"})(we||(we={}));var he;(function(e){e[e.None=-1]="None",e[e.NoValue=0]="NoValue",e[e.LargeValue=1]="LargeValue",e[e.SmallValue=2]="SmallValue"})(he||(he={}));function Qt(e){return He(e)&&typeof e.from=="function"}function He(e){return typeof e=="object"&&typeof e.to=="function"}function bt(e){e.parentElement.removeChild(e)}function $e(e){return e!=null}function Et(e){e.preventDefault()}function $t(e){return e.filter(function(t){return this[t]?!1:this[t]=!0},{})}function er(e,t){return Math.round(e/t)*t}function tr(e,t){var r=e.getBoundingClientRect(),n=e.ownerDocument,i=n.documentElement,c=wt(n);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(c.x=0),t?r.top+c.y-i.clientTop:r.left+c.x-i.clientLeft}function Ee(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function yt(e,t,r){r>0&&(fe(e,t),setTimeout(function(){Ue(e,t)},r))}function St(e){return Math.max(Math.min(e,100),0)}function We(e){return Array.isArray(e)?e:[e]}function rr(e){e=String(e);var t=e.split(".");return t.length>1?t[1].length:0}function fe(e,t){e.classList&&!/\s/.test(t)?e.classList.add(t):e.className+=" "+t}function Ue(e,t){e.classList&&!/\s/.test(t)?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}function nr(e,t){return e.classList?e.classList.contains(t):new RegExp("\\b"+t+"\\b").test(e.className)}function wt(e){var t=window.pageXOffset!==void 0,r=(e.compatMode||"")==="CSS1Compat",n=t?window.pageXOffset:r?e.documentElement.scrollLeft:e.body.scrollLeft,i=t?window.pageYOffset:r?e.documentElement.scrollTop:e.body.scrollTop;return{x:n,y:i}}function sr(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function ar(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch{}return e}function lr(){return window.CSS&&CSS.supports&&CSS.supports("touch-action","none")}function et(e,t){return 100/(t-e)}function tt(e,t,r){return t*100/(e[r+1]-e[r])}function or(e,t){return tt(e,e[0]<0?t+Math.abs(e[0]):t-e[0],0)}function ir(e,t){return t*(e[1]-e[0])/100+e[0]}function Me(e,t){for(var r=1;e>=t[r];)r+=1;return r}function cr(e,t,r){if(r>=e.slice(-1)[0])return 100;var n=Me(r,e),i=e[n-1],c=e[n],o=t[n-1],d=t[n];return o+or([i,c],r)/et(o,d)}function ur(e,t,r){if(r>=100)return e.slice(-1)[0];var n=Me(r,t),i=e[n-1],c=e[n],o=t[n-1],d=t[n];return ir([i,c],(r-o)*et(o,d))}function dr(e,t,r,n){if(n===100)return n;var i=Me(n,e),c=e[i-1],o=e[i];return r?n-c>(o-c)/2?o:c:t[i-1]?e[i-1]+er(n-e[i-1],t[i-1]):n}var Ct=(function(){function e(t,r,n){this.xPct=[],this.xVal=[],this.xSteps=[],this.xNumSteps=[],this.xHighestCompleteStep=[],this.xSteps=[n||!1],this.xNumSteps=[!1],this.snap=r;var i,c=[];for(Object.keys(t).forEach(function(o){c.push([We(t[o]),o])}),c.sort(function(o,d){return o[0][0]-d[0][0]}),i=0;i<c.length;i++)this.handleEntryPoint(c[i][1],c[i][0]);for(this.xNumSteps=this.xSteps.slice(0),i=0;i<this.xNumSteps.length;i++)this.handleStepPoint(i,this.xNumSteps[i])}return e.prototype.getDistance=function(t){for(var r=[],n=0;n<this.xNumSteps.length-1;n++)r[n]=tt(this.xVal,t,n);return r},e.prototype.getAbsoluteDistance=function(t,r,n){var i=0;if(t<this.xPct[this.xPct.length-1])for(;t>this.xPct[i+1];)i++;else t===this.xPct[this.xPct.length-1]&&(i=this.xPct.length-2);!n&&t===this.xPct[i+1]&&i++,r===null&&(r=[]);var c,o=1,d=r[i],m=0,f=0,v=0,g=0;for(n?c=(t-this.xPct[i])/(this.xPct[i+1]-this.xPct[i]):c=(this.xPct[i+1]-t)/(this.xPct[i+1]-this.xPct[i]);d>0;)m=this.xPct[i+1+g]-this.xPct[i+g],r[i+g]*o+100-c*100>100?(f=m*c,o=(d-100*c)/r[i+g],c=1):(f=r[i+g]*m/100*o,o=0),n?(v=v-f,this.xPct.length+g>=1&&g--):(v=v+f,this.xPct.length-g>=1&&g++),d=r[i+g]*o;return t+v},e.prototype.toStepping=function(t){return t=cr(this.xVal,this.xPct,t),t},e.prototype.fromStepping=function(t){return ur(this.xVal,this.xPct,t)},e.prototype.getStep=function(t){return t=dr(this.xPct,this.xSteps,this.snap,t),t},e.prototype.getDefaultStep=function(t,r,n){var i=Me(t,this.xPct);return(t===100||r&&t===this.xPct[i-1])&&(i=Math.max(i-1,1)),(this.xVal[i]-this.xVal[i-1])/n},e.prototype.getNearbySteps=function(t){var r=Me(t,this.xPct);return{stepBefore:{startValue:this.xVal[r-2],step:this.xNumSteps[r-2],highestStep:this.xHighestCompleteStep[r-2]},thisStep:{startValue:this.xVal[r-1],step:this.xNumSteps[r-1],highestStep:this.xHighestCompleteStep[r-1]},stepAfter:{startValue:this.xVal[r],step:this.xNumSteps[r],highestStep:this.xHighestCompleteStep[r]}}},e.prototype.countStepDecimals=function(){var t=this.xNumSteps.map(rr);return Math.max.apply(null,t)},e.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]},e.prototype.convert=function(t){return this.getStep(this.toStepping(t))},e.prototype.handleEntryPoint=function(t,r){var n;if(t==="min"?n=0:t==="max"?n=100:n=parseFloat(t),!Ee(n)||!Ee(r[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(n),this.xVal.push(r[0]);var i=Number(r[1]);n?this.xSteps.push(isNaN(i)?!1:i):isNaN(i)||(this.xSteps[0]=i),this.xHighestCompleteStep.push(0)},e.prototype.handleStepPoint=function(t,r){if(r){if(this.xVal[t]===this.xVal[t+1]){this.xSteps[t]=this.xHighestCompleteStep[t]=this.xVal[t];return}this.xSteps[t]=tt([this.xVal[t],this.xVal[t+1]],r,0)/et(this.xPct[t],this.xPct[t+1]);var n=(this.xVal[t+1]-this.xVal[t])/this.xNumSteps[t],i=Math.ceil(Number(n.toFixed(3))-1),c=this.xVal[t]+this.xNumSteps[t]*i;this.xHighestCompleteStep[t]=c}},e})(),xt={to:function(e){return e===void 0?"":e.toFixed(2)},from:Number},Rt={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},Ce={tooltips:".__tooltips",aria:".__aria"};function fr(e,t){if(!Ee(t))throw new Error("noUiSlider: 'step' is not numeric.");e.singleStep=t}function mr(e,t){if(!Ee(t))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");e.keyboardPageMultiplier=t}function pr(e,t){if(!Ee(t))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");e.keyboardMultiplier=t}function hr(e,t){if(!Ee(t))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");e.keyboardDefaultStep=t}function vr(e,t){if(typeof t!="object"||Array.isArray(t))throw new Error("noUiSlider: 'range' is not an object.");if(t.min===void 0||t.max===void 0)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");e.spectrum=new Ct(t,e.snap||!1,e.singleStep)}function gr(e,t){if(t=We(t),!Array.isArray(t)||!t.length)throw new Error("noUiSlider: 'start' option is incorrect.");e.handles=t.length,e.start=t}function br(e,t){if(typeof t!="boolean")throw new Error("noUiSlider: 'snap' option must be a boolean.");e.snap=t}function Er(e,t){if(typeof t!="boolean")throw new Error("noUiSlider: 'animate' option must be a boolean.");e.animate=t}function yr(e,t){if(typeof t!="number")throw new Error("noUiSlider: 'animationDuration' option must be a number.");e.animationDuration=t}function Nt(e,t){var r=[!1],n;if(t==="lower"?t=[!0,!1]:t==="upper"&&(t=[!1,!0]),t===!0||t===!1){for(n=1;n<e.handles;n++)r.push(t);r.push(!1)}else{if(!Array.isArray(t)||!t.length||t.length!==e.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");r=t}e.connect=r}function Sr(e,t){switch(t){case"horizontal":e.ort=0;break;case"vertical":e.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function kt(e,t){if(!Ee(t))throw new Error("noUiSlider: 'margin' option must be numeric.");t!==0&&(e.margin=e.spectrum.getDistance(t))}function wr(e,t){if(!Ee(t))throw new Error("noUiSlider: 'limit' option must be numeric.");if(e.limit=e.spectrum.getDistance(t),!e.limit||e.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function Cr(e,t){var r;if(!Ee(t)&&!Array.isArray(t))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(t)&&!(t.length===2||Ee(t[0])||Ee(t[1])))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(t!==0){for(Array.isArray(t)||(t=[t,t]),e.padding=[e.spectrum.getDistance(t[0]),e.spectrum.getDistance(t[1])],r=0;r<e.spectrum.xNumSteps.length-1;r++)if(e.padding[0][r]<0||e.padding[1][r]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var n=t[0]+t[1],i=e.spectrum.xVal[0],c=e.spectrum.xVal[e.spectrum.xVal.length-1];if(n/(c-i)>1)throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}function xr(e,t){switch(t){case"ltr":e.dir=0;break;case"rtl":e.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function Rr(e,t){if(typeof t!="string")throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var r=t.indexOf("tap")>=0,n=t.indexOf("drag")>=0,i=t.indexOf("fixed")>=0,c=t.indexOf("snap")>=0,o=t.indexOf("hover")>=0,d=t.indexOf("unconstrained")>=0,m=t.indexOf("invert-connects")>=0,f=t.indexOf("drag-all")>=0,v=t.indexOf("smooth-steps")>=0;if(i){if(e.handles!==2)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");kt(e,e.start[1]-e.start[0])}if(m&&e.handles!==2)throw new Error("noUiSlider: 'invert-connects' behaviour must be used with 2 handles");if(d&&(e.margin||e.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");e.events={tap:r||c,drag:n,dragAll:f,smoothSteps:v,fixed:i,snap:c,hover:o,unconstrained:d,invertConnects:m}}function Nr(e,t){if(t!==!1)if(t===!0||He(t)){e.tooltips=[];for(var r=0;r<e.handles;r++)e.tooltips.push(t)}else{if(t=We(t),t.length!==e.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");t.forEach(function(n){if(typeof n!="boolean"&&!He(n))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")}),e.tooltips=t}}function kr(e,t){if(t.length!==e.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");e.handleAttributes=t}function Tr(e,t){if(!He(t))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");e.ariaFormat=t}function _r(e,t){if(!Qt(t))throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");e.format=t}function Lr(e,t){if(typeof t!="boolean")throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");e.keyboardSupport=t}function Pr(e,t){e.documentElement=t}function Mr(e,t){if(typeof t!="string"&&t!==!1)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");e.cssPrefix=t}function Ir(e,t){if(typeof t!="object")throw new Error("noUiSlider: 'cssClasses' must be an object.");typeof e.cssPrefix=="string"?(e.cssClasses={},Object.keys(t).forEach(function(r){e.cssClasses[r]=e.cssPrefix+t[r]})):e.cssClasses=t}function Tt(e){var t={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:xt,format:xt},r={step:{r:!1,t:fr},keyboardPageMultiplier:{r:!1,t:mr},keyboardMultiplier:{r:!1,t:pr},keyboardDefaultStep:{r:!1,t:hr},start:{r:!0,t:gr},connect:{r:!0,t:Nt},direction:{r:!0,t:xr},snap:{r:!1,t:br},animate:{r:!1,t:Er},animationDuration:{r:!1,t:yr},range:{r:!0,t:vr},orientation:{r:!1,t:Sr},margin:{r:!1,t:kt},limit:{r:!1,t:wr},padding:{r:!1,t:Cr},behaviour:{r:!0,t:Rr},ariaFormat:{r:!1,t:Tr},format:{r:!1,t:_r},tooltips:{r:!1,t:Nr},keyboardSupport:{r:!0,t:Lr},documentElement:{r:!1,t:Pr},cssPrefix:{r:!0,t:Mr},cssClasses:{r:!0,t:Ir},handleAttributes:{r:!1,t:kr}},n={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:Rt,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};e.format&&!e.ariaFormat&&(e.ariaFormat=e.format),Object.keys(r).forEach(function(m){if(!$e(e[m])&&n[m]===void 0){if(r[m].r)throw new Error("noUiSlider: '"+m+"' is required.");return}r[m].t(t,$e(e[m])?e[m]:n[m])}),t.pips=e.pips;var i=document.createElement("div"),c=i.style.msTransform!==void 0,o=i.style.transform!==void 0;t.transformRule=o?"transform":c?"msTransform":"webkitTransform";var d=[["left","top"],["right","bottom"]];return t.style=d[t.dir][t.ort],t}function Fr(e,t,r){var n=sr(),i=lr(),c=i&&ar(),o=e,d,m,f,v,g,V,b=t.spectrum,L=[],S=[],w=[],I=0,x={},P=!1,A=e.ownerDocument,p=t.documentElement||A.documentElement,h=A.body,R=A.dir==="rtl"||t.ort===1?0:100;function _(s,l){var u=A.createElement("div");return l&&fe(u,l),s.appendChild(u),u}function C(s,l){var u=_(s,t.cssClasses.origin),y=_(u,t.cssClasses.handle);if(_(y,t.cssClasses.touchArea),y.setAttribute("data-handle",String(l)),t.keyboardSupport&&(y.setAttribute("tabindex","0"),y.addEventListener("keydown",function(k){return ye(k,l)})),t.handleAttributes!==void 0){var N=t.handleAttributes[l];Object.keys(N).forEach(function(k){y.setAttribute(k,N[k])})}return y.setAttribute("role","slider"),y.setAttribute("aria-orientation",t.ort?"vertical":"horizontal"),l===0?fe(y,t.cssClasses.handleLower):l===t.handles-1&&fe(y,t.cssClasses.handleUpper),u.handle=y,u}function M(s,l){return l?_(s,t.cssClasses.connect):!1}function B(s,l){m=_(l,t.cssClasses.connects),f=[],v=[],v.push(M(m,s[0]));for(var u=0;u<t.handles;u++)f.push(C(l,u)),w[u]=u,v.push(M(m,s[u+1]))}function j(s){fe(s,t.cssClasses.target),t.dir===0?fe(s,t.cssClasses.ltr):fe(s,t.cssClasses.rtl),t.ort===0?fe(s,t.cssClasses.horizontal):fe(s,t.cssClasses.vertical);var l=getComputedStyle(s).direction;return l==="rtl"?fe(s,t.cssClasses.textDirectionRtl):fe(s,t.cssClasses.textDirectionLtr),_(s,t.cssClasses.base)}function K(s,l){return!t.tooltips||!t.tooltips[l]?!1:_(s.firstChild,t.cssClasses.tooltip)}function O(){return o.hasAttribute("disabled")}function H(s){var l=f[s];return l.hasAttribute("disabled")}function E(s){s!=null?(f[s].setAttribute("disabled",""),f[s].handle.removeAttribute("tabindex")):(o.setAttribute("disabled",""),f.forEach(function(l){l.handle.removeAttribute("tabindex")}))}function z(s){s!=null?(f[s].removeAttribute("disabled"),f[s].handle.setAttribute("tabindex","0")):(o.removeAttribute("disabled"),f.forEach(function(l){l.removeAttribute("disabled"),l.handle.setAttribute("tabindex","0")}))}function T(){V&&(Be("update"+Ce.tooltips),V.forEach(function(s){s&&bt(s)}),V=null)}function Y(){T(),V=f.map(K),Le("update"+Ce.tooltips,function(s,l,u){if(!(!V||!t.tooltips)&&V[l]!==!1){var y=s[l];t.tooltips[l]!==!0&&(y=t.tooltips[l].to(u[l])),V[l].innerHTML=y}})}function G(){Be("update"+Ce.aria),Le("update"+Ce.aria,function(s,l,u,y,N){w.forEach(function(k){var D=f[k],F=Je(S,k,0,!0,!0,!0),ee=Je(S,k,100,!0,!0,!0),te=N[k],ne=String(t.ariaFormat.to(u[k]));F=b.fromStepping(F).toFixed(1),ee=b.fromStepping(ee).toFixed(1),te=b.fromStepping(te).toFixed(1),D.children[0].setAttribute("aria-valuemin",F),D.children[0].setAttribute("aria-valuemax",ee),D.children[0].setAttribute("aria-valuenow",te),D.children[0].setAttribute("aria-valuetext",ne)})})}function ve(s){if(s.mode===we.Range||s.mode===we.Steps)return b.xVal;if(s.mode===we.Count){if(s.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var l=s.values-1,u=100/l,y=[];l--;)y[l]=l*u;return y.push(100),W(y,s.stepped)}return s.mode===we.Positions?W(s.values,s.stepped):s.mode===we.Values?s.stepped?s.values.map(function(N){return b.fromStepping(b.getStep(b.toStepping(N)))}):s.values:[]}function W(s,l){return s.map(function(u){return b.fromStepping(l?b.getStep(u):u)})}function J(s){function l(te,ne){return Number((te+ne).toFixed(7))}var u=ve(s),y={},N=b.xVal[0],k=b.xVal[b.xVal.length-1],D=!1,F=!1,ee=0;return u=$t(u.slice().sort(function(te,ne){return te-ne})),u[0]!==N&&(u.unshift(N),D=!0),u[u.length-1]!==k&&(u.push(k),F=!0),u.forEach(function(te,ne){var se,Q,le,pe=te,ce=u[ne+1],ue,it,ct,ut,Ht,dt,Wt,Ut=s.mode===we.Steps;for(Ut&&(se=b.xNumSteps[ne]),se||(se=ce-pe),ce===void 0&&(ce=pe),se=Math.max(se,1e-7),Q=pe;Q<=ce;Q=l(Q,se)){for(ue=b.toStepping(Q),it=ue-ee,Ht=it/(s.density||1),dt=Math.round(Ht),Wt=it/dt,le=1;le<=dt;le+=1)ct=ee+le*Wt,y[ct.toFixed(5)]=[b.fromStepping(ct),0];ut=u.indexOf(Q)>-1?he.LargeValue:Ut?he.SmallValue:he.NoValue,!ne&&D&&Q!==ce&&(ut=0),Q===ce&&F||(y[ue.toFixed(5)]=[Q,ut]),ee=ue}}),y}function q(s,l,u){var y,N,k=A.createElement("div"),D=(y={},y[he.None]="",y[he.NoValue]=t.cssClasses.valueNormal,y[he.LargeValue]=t.cssClasses.valueLarge,y[he.SmallValue]=t.cssClasses.valueSub,y),F=(N={},N[he.None]="",N[he.NoValue]=t.cssClasses.markerNormal,N[he.LargeValue]=t.cssClasses.markerLarge,N[he.SmallValue]=t.cssClasses.markerSub,N),ee=[t.cssClasses.valueHorizontal,t.cssClasses.valueVertical],te=[t.cssClasses.markerHorizontal,t.cssClasses.markerVertical];fe(k,t.cssClasses.pips),fe(k,t.ort===0?t.cssClasses.pipsHorizontal:t.cssClasses.pipsVertical);function ne(Q,le){var pe=le===t.cssClasses.value,ce=pe?ee:te,ue=pe?D:F;return le+" "+ce[t.ort]+" "+ue[Q]}function se(Q,le,pe){if(pe=l?l(le,pe):pe,pe!==he.None){var ce=_(k,!1);ce.className=ne(pe,t.cssClasses.marker),ce.style[t.style]=Q+"%",pe>he.NoValue&&(ce=_(k,!1),ce.className=ne(pe,t.cssClasses.value),ce.setAttribute("data-value",String(le)),ce.style[t.style]=Q+"%",ce.innerHTML=String(u.to(le)))}}return Object.keys(s).forEach(function(Q){se(Q,s[Q][0],s[Q][1])}),k}function $(){g&&(bt(g),g=null)}function ie(s){$();var l=J(s),u=s.filter,y=s.format||{to:function(N){return String(Math.round(N))}};return g=o.appendChild(q(l,u,y)),g}function me(){var s=d.getBoundingClientRect(),l="offset"+["Width","Height"][t.ort];return t.ort===0?s.width||d[l]:s.height||d[l]}function oe(s,l,u,y){var N=function(D){var F=Re(D,y.pageOffset,y.target||l);if(!F||O()&&!y.doNotReject||nr(o,t.cssClasses.tap)&&!y.doNotReject||s===n.start&&F.buttons!==void 0&&F.buttons>1||y.hover&&F.buttons)return!1;c||F.preventDefault(),F.calcPoint=F.points[t.ort],u(F,y)},k=[];return s.split(" ").forEach(function(D){l.addEventListener(D,N,c?{passive:!0}:!1),k.push([D,N])}),k}function Re(s,l,u){var y=s.type.indexOf("touch")===0,N=s.type.indexOf("mouse")===0,k=s.type.indexOf("pointer")===0,D=0,F=0;if(s.type.indexOf("MSPointer")===0&&(k=!0),s.type==="mousedown"&&!s.buttons&&!s.touches)return!1;if(y){var ee=function(se){var Q=se.target;return Q===u||u.contains(Q)||s.composed&&s.composedPath().shift()===u};if(s.type==="touchstart"){var te=Array.prototype.filter.call(s.touches,ee);if(te.length>1)return!1;D=te[0].pageX,F=te[0].pageY}else{var ne=Array.prototype.find.call(s.changedTouches,ee);if(!ne)return!1;D=ne.pageX,F=ne.pageY}}return l=l||wt(A),(N||k)&&(D=s.clientX+l.x,F=s.clientY+l.y),s.pageOffset=l,s.points=[D,F],s.cursor=N||k,s}function ke(s){var l=s-tr(d,t.ort),u=l*100/me();return u=St(u),t.dir?100-u:u}function Ve(s){var l=100,u=!1;return f.forEach(function(y,N){if(!H(N)){var k=S[N],D=Math.abs(k-s),F=D===100&&l===100,ee=D<l,te=D<=l&&s>k;(ee||te||F)&&(u=N,l=D)}}),u}function U(s,l){s.type==="mouseout"&&s.target.nodeName==="HTML"&&s.relatedTarget===null&&Se(s,l)}function X(s,l){if(navigator.appVersion.indexOf("MSIE 9")===-1&&s.buttons===0&&l.buttonsProperty!==0)return Se(s,l);var u=(t.dir?-1:1)*(s.calcPoint-l.startCalcPoint),y=u*100/l.baseSize;Ft(u>0,y,l.locations,l.handleNumbers,l.connect)}function Se(s,l){l.handle&&(Ue(l.handle,t.cssClasses.active),I-=1),l.listeners.forEach(function(u){p.removeEventListener(u[0],u[1])}),I===0&&(Ue(o,t.cssClasses.drag),ot(),s.cursor&&(h.style.cursor="",h.removeEventListener("selectstart",Et))),t.events.smoothSteps&&(l.handleNumbers.forEach(function(u){Te(u,S[u],!0,!0,!1,!1)}),l.handleNumbers.forEach(function(u){ae("update",u)})),l.handleNumbers.forEach(function(u){ae("change",u),ae("set",u),ae("end",u)})}function Ae(s,l){if(!l.handleNumbers.some(H)){var u;if(l.handleNumbers.length===1){var y=f[l.handleNumbers[0]];u=y.children[0],I+=1,fe(u,t.cssClasses.active)}s.stopPropagation();var N=[],k=oe(n.move,p,X,{target:s.target,handle:u,connect:l.connect,listeners:N,startCalcPoint:s.calcPoint,baseSize:me(),pageOffset:s.pageOffset,handleNumbers:l.handleNumbers,buttonsProperty:s.buttons,locations:S.slice()}),D=oe(n.end,p,Se,{target:s.target,handle:u,listeners:N,doNotReject:!0,handleNumbers:l.handleNumbers}),F=oe("mouseout",p,U,{target:s.target,handle:u,listeners:N,doNotReject:!0,handleNumbers:l.handleNumbers});N.push.apply(N,k.concat(D,F)),s.cursor&&(h.style.cursor=getComputedStyle(s.target).cursor,f.length>1&&fe(o,t.cssClasses.drag),h.addEventListener("selectstart",Et,!1)),l.handleNumbers.forEach(function(ee){ae("start",ee)})}}function Z(s){s.stopPropagation();var l=ke(s.calcPoint),u=Ve(l);u!==!1&&(t.events.snap||yt(o,t.cssClasses.tap,t.animationDuration),Te(u,l,!0,!0),ot(),ae("slide",u,!0),ae("update",u,!0),t.events.snap?Ae(s,{handleNumbers:[u]}):(ae("change",u,!0),ae("set",u,!0)))}function ge(s){var l=ke(s.calcPoint),u=b.getStep(l),y=b.fromStepping(u);Object.keys(x).forEach(function(N){N.split(".")[0]==="hover"&&x[N].forEach(function(k){k.call(Ye,y)})})}function ye(s,l){if(O()||H(l))return!1;var u=["Left","Right"],y=["Down","Up"],N=["PageDown","PageUp"],k=["Home","End"];t.dir&&!t.ort?u.reverse():t.ort&&!t.dir&&(y.reverse(),N.reverse());var D=s.key.replace("Arrow",""),F=D===N[0],ee=D===N[1],te=D===y[0]||D===u[0]||F,ne=D===y[1]||D===u[1]||ee,se=D===k[0],Q=D===k[1];if(!te&&!ne&&!se&&!Q)return!0;s.preventDefault();var le;if(ne||te){var pe=te?0:1,ce=Bt(l),ue=ce[pe];if(ue===null)return!1;ue===!1&&(ue=b.getDefaultStep(S[l],te,t.keyboardDefaultStep)),ee||F?ue*=t.keyboardPageMultiplier:ue*=t.keyboardMultiplier,ue=Math.max(ue,1e-7),ue=(te?-1:1)*ue,le=L[l]+ue}else Q?le=t.spectrum.xVal[t.spectrum.xVal.length-1]:le=t.spectrum.xVal[0];return Te(l,b.toStepping(le),!0,!0),ae("slide",l),ae("update",l),ae("change",l),ae("set",l),!1}function De(s){s.fixed||f.forEach(function(l,u){oe(n.start,l.children[0],Ae,{handleNumbers:[u]})}),s.tap&&oe(n.start,d,Z,{}),s.hover&&oe(n.move,d,ge,{hover:!0}),s.drag&&v.forEach(function(l,u){if(!(l===!1||u===0||u===v.length-1)){var y=f[u-1],N=f[u],k=[l],D=[y,N],F=[u-1,u];fe(l,t.cssClasses.draggable),s.fixed&&(k.push(y.children[0]),k.push(N.children[0])),s.dragAll&&(D=f,F=w),k.forEach(function(ee){oe(n.start,ee,Ae,{handles:D,handleNumbers:F,connect:l})})}})}function Le(s,l){x[s]=x[s]||[],x[s].push(l),s.split(".")[0]==="update"&&f.forEach(function(u,y){ae("update",y)})}function at(s){return s===Ce.aria||s===Ce.tooltips}function Be(s){var l=s&&s.split(".")[0],u=l?s.substring(l.length):s;Object.keys(x).forEach(function(y){var N=y.split(".")[0],k=y.substring(N.length);(!l||l===N)&&(!u||u===k)&&(!at(k)||u===k)&&delete x[y]})}function ae(s,l,u){Object.keys(x).forEach(function(y){var N=y.split(".")[0];s===N&&x[y].forEach(function(k){k.call(Ye,L.map(t.format.to),l,L.slice(),u||!1,S.slice(),Ye)})})}function Je(s,l,u,y,N,k,D){var F;return f.length>1&&!t.events.unconstrained&&(y&&l>0&&(F=b.getAbsoluteDistance(s[l-1],t.margin,!1),u=Math.max(u,F)),N&&l<f.length-1&&(F=b.getAbsoluteDistance(s[l+1],t.margin,!0),u=Math.min(u,F))),f.length>1&&t.limit&&(y&&l>0&&(F=b.getAbsoluteDistance(s[l-1],t.limit,!1),u=Math.min(u,F)),N&&l<f.length-1&&(F=b.getAbsoluteDistance(s[l+1],t.limit,!0),u=Math.max(u,F))),t.padding&&(l===0&&(F=b.getAbsoluteDistance(0,t.padding[0],!1),u=Math.max(u,F)),l===f.length-1&&(F=b.getAbsoluteDistance(100,t.padding[1],!0),u=Math.min(u,F))),D||(u=b.getStep(u)),u=St(u),u===s[l]&&!k?!1:u}function lt(s,l){var u=t.ort;return(u?l:s)+", "+(u?s:l)}function Ft(s,l,u,y,N){var k=u.slice(),D=y[0],F=t.events.smoothSteps,ee=[!s,s],te=[s,!s];y=y.slice(),s&&y.reverse(),y.length>1?y.forEach(function(se,Q){var le=Je(k,se,k[se]+l,ee[Q],te[Q],!1,F);le===!1?l=0:(l=le-k[se],k[se]=le)}):ee=te=[!0];var ne=!1;y.forEach(function(se,Q){ne=Te(se,u[se]+l,ee[Q],te[Q],!1,F)||ne}),ne&&(y.forEach(function(se){ae("update",se),ae("slide",se)}),N!=null&&ae("drag",D))}function Vt(s,l){return t.dir?100-s-l:s}function pn(s,l){S[s]=l,L[s]=b.fromStepping(l);var u=Vt(l,0)-R,y="translate("+lt(u+"%","0")+")";if(f[s].style[t.transformRule]=y,t.events.invertConnects&&S.length>1){var N=S.every(function(k,D,F){return D===0||k>=F[D-1]});if(P!==!N){yn();return}}Oe(s),Oe(s+1),P&&(Oe(s-1),Oe(s+2))}function ot(){w.forEach(function(s){var l=S[s]>50?-1:1,u=3+(f.length+l*s);f[s].style.zIndex=String(u)})}function Te(s,l,u,y,N,k){return N||(l=Je(S,s,l,u,y,!1,k)),l===!1?!1:(pn(s,l),!0)}function Oe(s){if(v[s]){var l=S.slice();P&&l.sort(function(F,ee){return F-ee});var u=0,y=100;s!==0&&(u=l[s-1]),s!==v.length-1&&(y=l[s]);var N=y-u,k="translate("+lt(Vt(u,N)+"%","0")+")",D="scale("+lt(N/100,"1")+")";v[s].style[t.transformRule]=k+" "+D}}function At(s,l){return s===null||s===!1||s===void 0||(typeof s=="number"&&(s=String(s)),s=t.format.from(s),s!==!1&&(s=b.toStepping(s)),s===!1||isNaN(s))?S[l]:s}function Xe(s,l,u){var y=We(s),N=S[0]===void 0;l=l===void 0?!0:l,t.animate&&!N&&yt(o,t.cssClasses.tap,t.animationDuration),w.forEach(function(F){Te(F,At(y[F],F),!0,!1,u)});var k=w.length===1?0:1;if(N&&b.hasNoSize()&&(u=!0,S[0]=0,w.length>1)){var D=100/(w.length-1);w.forEach(function(F){S[F]=F*D})}for(;k<w.length;++k)w.forEach(function(F){Te(F,S[F],!0,!0,u)});ot(),w.forEach(function(F){ae("update",F),y[F]!==null&&l&&ae("set",F)})}function hn(s){Xe(t.start,s)}function vn(s,l,u,y){if(s=Number(s),!(s>=0&&s<w.length))throw new Error("noUiSlider: invalid handle number, got: "+s);Te(s,At(l,s),!0,!0,y),ae("update",s),u&&ae("set",s)}function Dt(s){if(s===void 0&&(s=!1),s)return L.length===1?L[0]:L.slice(0);var l=L.map(t.format.to);return l.length===1?l[0]:l}function gn(){for(Be(Ce.aria),Be(Ce.tooltips),Object.keys(t.cssClasses).forEach(function(s){Ue(o,t.cssClasses[s])});o.firstChild;)o.removeChild(o.firstChild);delete o.noUiSlider}function Bt(s){var l=S[s],u=b.getNearbySteps(l),y=L[s],N=u.thisStep.step,k=null;if(t.snap)return[y-u.stepBefore.startValue||null,u.stepAfter.startValue-y||null];N!==!1&&y+N>u.stepAfter.startValue&&(N=u.stepAfter.startValue-y),y>u.thisStep.startValue?k=u.thisStep.step:u.stepBefore.step===!1?k=!1:k=y-u.stepBefore.highestStep,l===100?N=null:l===0&&(k=null);var D=b.countStepDecimals();return N!==null&&N!==!1&&(N=Number(N.toFixed(D))),k!==null&&k!==!1&&(k=Number(k.toFixed(D))),[k,N]}function bn(){return w.map(Bt)}function En(s,l){var u=Dt(),y=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips","connect"];y.forEach(function(k){s[k]!==void 0&&(r[k]=s[k])});var N=Tt(r);y.forEach(function(k){s[k]!==void 0&&(t[k]=N[k])}),b=N.spectrum,t.margin=N.margin,t.limit=N.limit,t.padding=N.padding,t.pips?ie(t.pips):$(),t.tooltips?Y():T(),S=[],Xe($e(s.start)?s.start:u,l),s.connect&&Ot()}function Ot(){for(;m.firstChild;)m.removeChild(m.firstChild);for(var s=0;s<=t.handles;s++)v[s]=M(m,t.connect[s]),Oe(s);De({drag:t.events.drag,fixed:!0})}function yn(){P=!P,Nt(t,t.connect.map(function(s){return!s})),Ot()}function Sn(){d=j(o),B(t.connect,d),De(t.events),Xe(t.start),t.pips&&ie(t.pips),t.tooltips&&Y(),G()}Sn();var Ye={destroy:gn,steps:bn,on:Le,off:Be,get:Dt,set:Xe,setHandle:vn,reset:hn,disable:E,enable:z,__moveHandles:function(s,l,u){Ft(s,l,S,u)},options:r,updateOptions:En,target:o,removePips:$,removeTooltips:T,getPositions:function(){return S.slice()},getTooltips:function(){return V},getOrigins:function(){return f},pips:ie};return Ye}function Vr(e,t){if(!e||!e.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+e);if(e.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");var r=Tt(t),n=Fr(e,r,t);return e.noUiSlider=n,n}const _t={__spectrum:Ct,cssClasses:Rt,create:Vr};function Lt(e,t,r){if(e==null||e==="")return{min:t,max:r};if(typeof e=="string"&&e.includes("..")){const n=e.split(".."),i=n[0]!==""?Number(n[0]):t,c=n[1]!==""?Number(n[1]):r;return{min:isNaN(i)?t:i,max:isNaN(c)?r:c}}if(typeof e=="object"){const n=e;return{min:n.min??t,max:n.max??r}}return typeof e=="number"?{min:e,max:r}:{min:t,max:r}}function Ar({config:e,filterData:t,value:r,onChange:n,narrowedValues:i,isNarrowing:c}){const o=a.useRef(null),d=a.useRef(null),m=a.useRef(null),[f,v]=a.useState(!1),g=t.props||{},V=g.min??0,b=g.max??100,L=g.step??1,S=g.placeholder||t.label||"Range",w=e.displayAs||t.props?.display_as||"popup",I=g.handles||"double",x=g.compare||"in_range",P=e.filterKey,A=i?.ranges?.[P],p=A?.min??V,h=A?.max??b,R=g.format||"number",_=g.prefix||"",C=g.suffix||"",M=t.icon||"",B=Lt(r,p,h),[j,K]=a.useState(B.min),[O,H]=a.useState(B.max),E=a.useCallback(U=>R==="price"?`${_}${U.toLocaleString()}${C}`:`${_}${U}${C}`,[R,_,C]),z=r!=null&&r!==""&&(B.min!==p||B.max!==h),T=z?`${E(B.min)}  ${E(B.max)}`:S,Y=`${E(j)}  ${E(O)}`,G=a.useCallback(()=>{if(!d.current||m.current)return;let U,X;I==="double"?(U=[j,O],X=!0):x==="in_range"?(U=[O],X=[!1,!0]):(U=[j],X=[!0,!1]),_t.create(d.current,{start:U,connect:X,range:{min:p,max:h},step:L,behaviour:"tap-drag"}),m.current=d.current.noUiSlider,m.current.on("update",Se=>{I==="double"?(K(Math.round(Number(Se[0]))),H(Math.round(Number(Se[1])))):x==="in_range"?H(Math.round(Number(Se[0]))):K(Math.round(Number(Se[0])))})},[I,x,j,O,p,h,L]),ve=a.useCallback(()=>{m.current&&(m.current.destroy(),m.current=null)},[]);a.useEffect(()=>{const U=Lt(r,p,h);K(U.min),H(U.max),m.current&&(I==="double"?m.current.set([U.min,U.max]):m.current.set([U.min]))},[r,p,h,I]),a.useEffect(()=>{if(f&&w==="popup"){const U=setTimeout(()=>{G()},50);return()=>clearTimeout(U)}return()=>{w==="popup"&&ve()}},[f,w,G,ve]),a.useEffect(()=>{if(w==="inline")return G(),()=>ve()},[w,G,ve]),a.useEffect(()=>{if(!m.current||!A)return;m.current.updateOptions({range:{min:p,max:h}},!0);let U=j,X=O;U<p&&(U=p),U>h&&(U=h),I==="double"&&(X<p&&(X=p),X>h&&(X=h),U>X&&(U=X)),I==="double"?m.current.set([U,X]):m.current.set([U]),K(U),H(X)},[A,p,h,I]);const W=a.useCallback(()=>{v(!0)},[]),J=a.useCallback((U,X)=>U===p&&X===h?null:I==="double"?`${U}..${X}`:x==="greater_than"||x==="in_range"?`${U}..`:`..${X}`,[I,x,p,h]),q=U=>{const X=U.target.value===""?p:Number(U.target.value);K(X),m.current&&m.current.set(I==="double"?[X,O]:[X]),w==="minmax"&&n(J(X,O))},$=U=>{const X=U.target.value===""?h:Number(U.target.value);H(X),m.current&&m.current.set([j,X]),w==="minmax"&&n(J(j,X))},ie=a.useCallback(()=>{n(J(j,O)),v(!1)},[j,O,J,n]),me=a.useCallback(()=>{K(p),H(h),m.current&&m.current.set(I==="double"?[p,h]:[p]),n(null)},[p,h,I,n]),oe=()=>React.createElement("div",{className:"ts-minmax"},React.createElement("input",{type:"number",className:"inline-input input-no-icon",placeholder:String(p),value:j,onChange:q,min:p,max:O,step:L}),I==="double"&&React.createElement("input",{type:"number",className:"inline-input input-no-icon",placeholder:String(h),value:O,onChange:$,min:j,max:h,step:L})),Re=()=>React.createElement("div",{className:`range-slider-wrapper${c?" ts-loading":""}`},React.createElement("div",{className:"range-value"},Y),React.createElement("div",{ref:d,className:"range-slider"}),A&&(A.min!==V||A.max!==b)&&React.createElement("div",{className:"range-narrowed-indicator"},React.createElement("small",null,"Showing ",E(p),"  ",E(h)," based on current results")));if(w==="minmax"&&I==="double"){const{style:U,className:X}=re(e,"ts-form-group");return React.createElement("div",{className:X,style:U},!e.hideLabel&&React.createElement("label",null,t.label),oe())}if(w==="inline"){const{style:U,className:X}=re(e,"ts-form-group ts-inline-filter");return React.createElement("div",{className:X,style:U},!e.hideLabel&&React.createElement("label",null,t.label),Re())}const{style:ke,className:Ve}=re(e,"ts-form-group");return React.createElement("div",{className:Ve,style:ke},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:o,className:`ts-filter ts-popup-target ${z?"ts-filled":""}`,onClick:W,onMouseDown:U=>U.preventDefault(),role:"button",tabIndex:0},M&&React.createElement("span",{dangerouslySetInnerHTML:{__html:M}}),React.createElement("div",{className:"ts-filter-text"},T),React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:f,target:o,title:"",icon:M,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:ie,onClear:me,onClose:()=>v(!1)},React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,t.label,t.description&&React.createElement("small",null,t.description)),Re())))}function Dr(e,t){let r=null;return function(...n){r&&clearTimeout(r),r=setTimeout(()=>e.apply(this,n),t)}}function Br({config:e,filterData:t,value:r,onChange:n}){const i=t.props||{},c=i.min??0,o=i.max??99,d=i.step??1,m=i.default??c,f=i.placeholder||t.label||"Any",v=e.displayAs||t.props?.display_as||"popup",g=t.icon||"",V=a.useRef(null),[b,L]=a.useState(!1),S=typeof r=="number"?r:m,[w,I]=a.useState(S),x=a.useMemo(()=>Dr(K=>n(K),300),[n]);a.useEffect(()=>{I(typeof r=="number"?r:m)},[r,m]),a.useEffect(()=>{b&&I(S)},[b,S]);const P=K=>{K.preventDefault();const O=Math.max(c,w-d);I(O),v==="inline"&&x(O)},A=K=>{K.preventDefault();const O=Math.min(o,w+d);I(O),v==="inline"&&x(O)},p=K=>{const O=parseInt(K.target.value,10);if(!isNaN(O)){const H=Math.min(o,Math.max(c,O));I(H),v==="inline"&&x(H)}},h=a.useCallback(()=>{L(!0)},[]),R=a.useCallback(()=>{n(w),L(!1)},[w,n]),_=a.useCallback(()=>{I(m),n(m)},[m,n]),C=()=>React.createElement("div",{className:"ts-stepper-input flexify"},React.createElement("button",{type:"button",className:"ts-stepper-left ts-icon-btn inline-btn-ts",onClick:P},React.createElement("i",{className:"las la-minus"})),React.createElement("input",{type:"number",className:"ts-input-box",min:c,max:o,step:d,value:w,onChange:p,placeholder:f}),React.createElement("button",{type:"button",className:"ts-stepper-right ts-icon-btn inline-btn-ts",onClick:A},React.createElement("i",{className:"las la-plus"})));if(v==="inline"){const{style:K,className:O}=re(e,"ts-form-group ts-inline-filter");return React.createElement("div",{className:O,style:K},!e.hideLabel&&React.createElement("label",null,t.label),C())}const M=S!==m,{style:B,className:j}=re(e,"ts-form-group");return React.createElement("div",{className:j,style:B},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:V,className:`ts-filter ts-popup-target ${M?"ts-filled":""}`,onClick:h,onMouseDown:K=>K.preventDefault(),role:"button",tabIndex:0},g&&React.createElement("span",{dangerouslySetInnerHTML:{__html:g}}),React.createElement("div",{className:"ts-filter-text"},M?w:f),React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:b,target:V,title:"",icon:g,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:R,onClear:_,onClose:()=>L(!1)},React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,t.label,t.description&&React.createElement("small",null,t.description)),C())))}function Or(e){return e==null||e===""?[]:typeof e=="string"?e.split(",").map(t=>parseInt(t,10)).filter(t=>!isNaN(t)):Array.isArray(e)?e.length>0&&typeof e[0]=="number"?e:[]:[]}function Pt(e){return e.length===0?null:e.join(",")}function Hr({config:e,filterData:t,value:r,onChange:n,narrowedValues:i,isNarrowing:c}){const o=a.useRef(null),d=a.useRef(null),[m,f]=a.useState(!1),[v,g]=a.useState(""),[V,b]=a.useState([]),L=t.props||{},S=L.multiple??!0,w=L.placeholder||t.label||"Select",I=e.displayAs||L.display_as||"popup",x=e.hideEmptyTerms??L.hide_empty_terms??!1,P=t.icon||"",A=L.taxonomy||e.filterKey,p=i?.terms?.[A],h=a.useCallback((W,J=0)=>{const q=[];for(const $ of W)q.push({...$,depth:J}),$.children&&$.children.length>0&&q.push(...h($.children,J+1));return q},[]),R=a.useMemo(()=>{const W=L.terms||[];let J=h(W);return x&&p&&(J=J.filter(q=>{if(!q.term_taxonomy_id)return!0;const $=p[q.term_taxonomy_id];return $===void 0||$>0})),J},[L.terms,h,x,p]),_=a.useCallback(W=>!p||!W.term_taxonomy_id?null:p[W.term_taxonomy_id]??null,[p]),C=a.useMemo(()=>Or(r),[r]),M=a.useCallback(W=>W.term_taxonomy_id?C.includes(W.term_taxonomy_id):!1,[C]),B=a.useMemo(()=>R.filter(W=>W.term_taxonomy_id&&C.includes(W.term_taxonomy_id)),[R,C]),j=a.useMemo(()=>{if(!v)return R;const W=v.toLowerCase();return R.filter(J=>J.label.toLowerCase().includes(W))},[R,v]);a.useEffect(()=>{m&&(b(C),g(""),R.length>=15&&setTimeout(()=>d.current?.focus(),50))},[m,C,R.length]);const K=a.useCallback(()=>{f(!0)},[]),O=a.useCallback(W=>{const J=W.term_taxonomy_id;J&&(S?b(q=>q.includes(J)?q.filter($=>$!==J):[...q,J]):(n(Pt([J])),f(!1)))},[S,n]),H=a.useCallback(()=>{S&&n(Pt(V)),f(!1)},[S,V,n]),E=a.useCallback(()=>{b([]),n(null)},[n]),z=C.length>0,T=z&&B[0]?.label||w,Y=B.length>1?B.length-1:0;if(I==="inline"){const{style:W,className:J}=re(e,"ts-form-group inline-terms-wrapper ts-inline-filter min-scroll");return React.createElement("div",{className:`${J}${c?" ts-loading":""}`,style:W},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{className:"ts-term-dropdown ts-multilevel-dropdown inline-multilevel"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list"},R.map(q=>{const $=M(q),ie=q.depth||0,me=_(q),oe=me===0;return React.createElement("li",{key:q.term_taxonomy_id||q.slug,className:`${$?"ts-selected":""}${oe?" ts-disabled":""}`},React.createElement("a",{href:"#",className:"flexify",onClick:Re=>{Re.preventDefault(),oe||O(q)}},React.createElement("div",{className:"ts-checkbox-container"},React.createElement("label",{className:`container-${S?"checkbox":"radio"}`},React.createElement("input",{type:S?"checkbox":"radio",checked:$,readOnly:!0,disabled:!0,hidden:!0}),React.createElement("span",{className:"checkmark"}))),React.createElement("span",null,ie>0?" ".repeat(ie):"",q.label),me!==null&&React.createElement("span",{className:"ts-term-count"},"(",me,")"),q.icon&&React.createElement("div",{className:"ts-term-icon",dangerouslySetInnerHTML:{__html:q.icon}})))}))))}if(I==="buttons"){const{style:W,className:J}=re(e,"ts-form-group");return React.createElement("div",{className:J,style:W},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("ul",{className:"simplify-ul addon-buttons flexify"},R.map(q=>{const $=M(q);return React.createElement("li",{key:q.term_taxonomy_id||q.slug,className:`flexify ${$?"adb-selected":""}`,onClick:()=>O(q)},q.label)})))}const{style:G,className:ve}=re(e,"ts-form-group");return React.createElement("div",{className:ve,style:G},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:o,className:`ts-filter ts-popup-target ${z?"ts-filled":""}`,onClick:K,onMouseDown:W=>W.preventDefault(),role:"button",tabIndex:0},P&&React.createElement("span",{dangerouslySetInnerHTML:{__html:P}}),React.createElement("div",{className:"ts-filter-text"},T,Y>0&&React.createElement("span",{className:"term-count"},"+",Y)),React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:m,target:o,title:"",icon:P,saveLabel:"Save",clearLabel:"Clear",showClear:!0,showSave:S,onSave:H,onClear:E,onClose:()=>f(!1)},R.length>=15&&React.createElement("div",{className:"ts-sticky-top uib b-bottom"},React.createElement("div",{className:"ts-input-icon flexify"},React.createElement("span",null,be.search),React.createElement("input",{ref:d,type:"text",value:v,onChange:W=>g(W.target.value),placeholder:"Search",className:"autofocus"}))),React.createElement("div",{className:`ts-term-dropdown ts-multilevel-dropdown ts-md-group${c?" ts-loading":""}`},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list"},j.map(W=>{const J=W.term_taxonomy_id,q=S?J?V.includes(J):!1:M(W),$=W.depth||0,ie=_(W),me=ie===0;return React.createElement("li",{key:W.term_taxonomy_id||W.slug,className:`${q?"ts-selected":""}${me?" ts-disabled":""}`},React.createElement("a",{href:"#",className:"flexify",onClick:oe=>{oe.preventDefault(),me||O(W)}},React.createElement("div",{className:"ts-checkbox-container"},React.createElement("label",{className:`container-${S?"checkbox":"radio"}`},React.createElement("input",{type:S?"checkbox":"radio",checked:q,readOnly:!0,disabled:!0,hidden:!0}),React.createElement("span",{className:"checkmark"}))),React.createElement("span",null,$>0?" ".repeat($):"",W.label),ie!==null&&React.createElement("span",{className:"ts-term-count"},"(",ie,")"),W.icon&&React.createElement("div",{className:"ts-term-icon",dangerouslySetInnerHTML:{__html:W.icon}})))})),j.length===0&&React.createElement("div",{className:"ts-empty-user-tab"},P&&React.createElement("span",{dangerouslySetInnerHTML:{__html:P}}),React.createElement("p",null,"No results found")))))}function Ne(e){return!e||!e.address?null:e.swlat!==void 0&&e.swlng!==void 0&&e.nelat!==void 0&&e.nelng!==void 0?`${e.address};${e.swlat},${e.swlng}..${e.nelat},${e.nelng}`:e.lat!==void 0&&e.lng!==void 0?`${e.address};${e.lat},${e.lng},${e.radius||25}`:e.address}function Wr(e,t){if(e==null||e==="")return null;if(typeof e=="string"){const r=e.indexOf(";");if(r===-1)return{address:e};const n=e.substring(0,r),i=e.substring(r+1);if(i.includes("..")){const o=i.split(".."),d=o[0].split(","),m=o[1].split(",");return{address:n,swlat:Number(d[0]),swlng:Number(d[1]),nelat:Number(m[0]),nelng:Number(m[1])}}const c=i.split(",");return{address:n,lat:Number(c[0]),lng:Number(c[1]),radius:c[2]?Number(c[2]):t}}return typeof e=="object"?e:null}function Ur({config:e,filterData:t,value:r,onChange:n}){const i=a.useRef(null),c=a.useRef(null),o=a.useRef(null),d=a.useRef(null),m=a.useRef(null),[f,v]=a.useState(!1),[g,V]=a.useState(!1),b=a.useRef(null),L=t.props||{},S=L.radius||{},w=S.default??25,I=S.min??1,x=S.max??100,P=S.step??1,A=L.units||"km",p=L.display_proximity_as||"popup",h=L.placeholder||t.label||"Location",R=e.displayAs||t.props?.display_as||"popup",_=t.icon||"",C=Wr(r,w)||{},[M,B]=a.useState(C.address||""),[j,K]=a.useState(C.radius||w),O=a.useCallback(Z=>Math.round(Z*1e6)/1e6,[]),H=a.useCallback(Z=>`${Z}${A==="mi"?"mi":"km"}`,[A]),E=a.useCallback(()=>{!d.current||m.current||(_t.create(d.current,{start:j,connect:[!0,!1],step:P,range:{min:I,max:x},behaviour:"tap-drag"}),m.current=d.current.noUiSlider,m.current.on("update",Z=>{K(Math.round(Number(Z[0])))}),m.current.on("change",Z=>{const ge=Math.round(Number(Z[0]));p==="inline"&&C.lat&&n(Ne({...C,radius:ge}))}))},[j,P,I,x,p,C,n]),z=a.useCallback(()=>{m.current&&(m.current.destroy(),m.current=null)},[]);a.useEffect(()=>{if(p==="inline"&&C.lat){const Z=setTimeout(()=>E(),50);return()=>{clearTimeout(Z),z()}}},[p,C.lat,E,z]),a.useEffect(()=>{if(g){const Z=setTimeout(()=>E(),50);return()=>clearTimeout(Z)}return()=>z()},[g,E,z]),a.useEffect(()=>{const Z=C.radius||w;K(Z),m.current&&m.current.set([Z])},[C.radius,w]);const T=a.useCallback(()=>{if(o.current||!c.current||typeof window>"u")return;const Z=window.Voxel?.Maps;if(!Z){console.warn("Voxel.Maps not available for autocomplete");return}Z.await(()=>{if(o.current)return;const ge=e.autocomplete||{};o.current=new Z.Autocomplete(c.current,ye=>{if(ye){const De=ye.viewport.getSouthWest(),Le=ye.viewport.getNorthEast(),at={address:ye.address,swlat:O(De.getLatitude()),swlng:O(De.getLongitude()),nelat:O(Le.getLatitude()),nelng:O(Le.getLongitude()),lat:O(ye.latlng.getLatitude()),lng:O(ye.latlng.getLongitude()),radius:C.radius||w};B(ye.address),n(Ne(at)),R==="popup"&&v(!1)}else B(""),n(null)},ge)})},[e.autocomplete,n,R,w,C.radius,O]);a.useEffect(()=>{(f||R==="inline")&&(B(C.address||""),f&&setTimeout(()=>c.current?.focus(),50))},[f,R,C.address]);const Y=a.useCallback(()=>{v(!0)},[]),G=a.useCallback(()=>{T()},[T]),ve=Z=>{B(Z.target.value),R==="inline"&&(Z.target.value?n(Ne({...C,address:Z.target.value})):n(null))},W=Z=>{Z.preventDefault(),Z.stopPropagation(),"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(ge=>{const ye={address:"Current Location",lat:ge.coords.latitude,lng:ge.coords.longitude,radius:w};B("Current Location"),n(Ne(ye)),R==="popup"&&v(!1)},ge=>{console.error("Geolocation error:",ge)})},J=a.useCallback(()=>{n(M?Ne({...C,address:M}):null),v(!1)},[M,C,n]),q=a.useCallback(()=>{B(""),n(null)},[n]),$=a.useCallback(Z=>{Z.key==="Enter"&&(Z.preventDefault(),J())},[J]),ie=a.useCallback(()=>{C.lat&&n(Ne({...C,radius:j})),V(!1)},[C,j,n]),me=a.useCallback(()=>{K(w),m.current&&m.current.set([w]),C.lat&&n(Ne({...C,radius:w}))},[w,C,n]),oe=!!C.address||!!C.lat,Re=oe?C.address||"Location set":h,ke=()=>React.createElement("div",{className:"ts-input-icon flexify",style:{position:"relative"}},_&&React.createElement("span",{dangerouslySetInnerHTML:{__html:_}}),React.createElement("input",{ref:c,type:"text",className:"inline-input",placeholder:h,value:M,onChange:ve,onKeyDown:$,onFocus:G}),React.createElement("a",{href:"#",className:"inline-user-location ts-icon-btn",onClick:W,title:"Use my location","aria-label":"Use my location"},be.crosshairs)),Ve=()=>React.createElement("div",{className:"range-slider-wrapper"},React.createElement("div",{className:"range-value"},H(j)),React.createElement("div",{ref:d,className:"range-slider"})),U=()=>!C.lat||p==="inline"?null:React.createElement("div",{className:"ts-form-group ts-proximity-filter"},React.createElement("label",null,L.proximity_label||"Radius"),React.createElement("div",{ref:b,className:`ts-filter ts-popup-target ${C.radius?"ts-filled":""}`,onClick:()=>V(!0),onMouseDown:Z=>Z.preventDefault(),role:"button",tabIndex:0},React.createElement("div",{className:"ts-filter-text"},H(C.radius||w)),React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:g,target:b,title:"",saveLabel:"Save",clearLabel:"Reset",showClear:!0,onSave:ie,onClear:me,onClose:()=>V(!1)},React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,L.proximity_label||"Search radius"),Ve()))),X=()=>p!=="inline"||!C.lat?null:React.createElement("div",{className:"ts-form-group ts-inline-proximity"},React.createElement("label",null,L.proximity_label||"Radius",": ",H(j)),React.createElement("div",{ref:d,className:"range-slider"}));if(R==="inline"){const{style:Z,className:ge}=re(e,"ts-form-group ts-inline-filter");return React.createElement(React.Fragment,null,React.createElement("div",{className:ge,style:Z},!e.hideLabel&&React.createElement("label",null,t.label),ke()),X(),U())}const{style:Se,className:Ae}=re(e,"ts-form-group");return React.createElement(React.Fragment,null,React.createElement("div",{className:Ae,style:Se},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:i,className:`ts-filter ts-popup-target ${oe?"ts-filled":""}`,onClick:Y,onMouseDown:Z=>Z.preventDefault(),role:"button",tabIndex:0},_&&React.createElement("span",{dangerouslySetInnerHTML:{__html:_}}),React.createElement("div",{className:"ts-filter-text"},Re),React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:f,target:i,title:"",icon:_,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:J,onClear:q,onClose:()=>v(!1)},React.createElement("div",{className:"ts-form-group"},ke()))),X(),U())}function jr(e){if(e==null||e==="")return{date:"",slots:1};if(typeof e=="string")return{date:e,slots:1};if(typeof e=="object"){const t=e;return{date:t.date||"",slots:t.slots||1}}return{date:"",slots:1}}const Ie=e=>{if(!e)return null;try{const t=new Date(e+"T00:00:00");return isFinite(t.getTime())?t:null}catch{return null}},Fe=e=>{if(!e)return null;const t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${n}`},rt=e=>{if(!e)return"";try{const t=new Date(e+"T00:00:00");return isFinite(t.getTime())?t.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):""}catch{return e}};function zr({config:e,filterData:t,value:r,onChange:n}){const i=a.useRef(null),c=a.useRef(null),[o,d]=a.useState(!1),m=t.props||{},f=m.mode||"single",v=m.placeholder||t.label||"Availability",g=t.icon||"",V=jr(r),b=V.date,L=V.slots;let S="",w="";f==="range"&&b&&b.includes("..")?[S,w]=b.split(".."):f==="single"&&b&&(S=b);const[I,x]=a.useState(()=>Ie(S)),[P,A]=a.useState(()=>Ie(w)),[p,h]=a.useState("start"),[R,_]=a.useState(L);a.useEffect(()=>{if(o){if(f==="range"&&b&&b.includes("..")){const[T,Y]=b.split("..");x(Ie(T)),A(Ie(Y))}else f==="single"&&b&&x(Ie(b));_(L),h("start")}},[o,f,b,L]);const C=a.useCallback(()=>{d(!0)},[]),M=a.useCallback(T=>{if(f==="range"&&T&&c.current)if(p==="start")x(T),h("end"),c.current.setStartRange(T),c.current.setEndRange(null);else{A(T),h("start"),c.current.setEndRange(T);const Y=Fe(I),G=Fe(T);Y&&G&&(n(`${Y}..${G}`),d(!1))}else x(T)},[f,p,I,n]),B=a.useCallback(T=>{_(Number(T.target.value)||1)},[]),j=a.useCallback(T=>{if(f==="range"){const Y=Fe(I),G=Fe(P);Y&&G&&n(`${Y}..${G}`)}else{const G=Fe(T!==void 0?T:I);G&&n(G)}d(!1)},[f,I,P,n]),K=a.useCallback(()=>{x(null),A(null),_(1),n(null),c.current&&(c.current.setStartRange(null),c.current.setEndRange(null))},[n]),O=f==="range"?!!(S&&w):!!b,H=a.useMemo(()=>{if(!O)return v;if(f==="range"){const T=rt(S),Y=rt(w),G=`${T}  ${Y}`;return L>1?`${G} (${L})`:G}else{const T=rt(b);return L>1?`${T} (${L})`:T}},[f,O,S,w,b,L,v]),{style:E,className:z}=re(e,"ts-form-group");return React.createElement("div",{className:z,style:E},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:i,className:`ts-filter ts-popup-target ${O?"ts-filled":""}`,onClick:C,onMouseDown:T=>T.preventDefault(),role:"button",tabIndex:0},g&&React.createElement("span",{dangerouslySetInnerHTML:{__html:g}}),React.createElement("div",{className:"ts-filter-text"},H),React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:o,target:i,title:"",icon:g,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:j,onClear:K,onClose:()=>d(!1)},React.createElement(Pe,{value:I,onChange:M,onSelect:f==="single"?j:void 0,pickerConfig:f==="range"?{theme:"pika-range",onSelect:void 0}:void 0,onPickerReady:T=>{c.current=T,f==="range"&&I&&(T.setStartRange(I),P&&T.setEndRange(P))}}),React.createElement("div",{className:"ts-form-group",style:{marginTop:"12px"}},React.createElement("label",null,"Number of slots"),React.createElement("input",{type:"number",value:R,onChange:B,min:"1",className:"ts-filter"}))))}function qr(e,t){if(e==null||e==="")return{from:"",to:""};if(typeof e=="string"){if(t&&e.includes("..")){const r=e.split("..");return{from:r[0]||"",to:r[1]||""}}return{from:e,to:""}}if(typeof e=="object"){const r=e;return{from:r.from||"",to:r.to||""}}return{from:"",to:""}}function je(e,t,r){return!e&&!t?null:r?e&&t?`${e}..${t}`:e?`${e}..`:t?`..${t}`:null:e||null}const ze=e=>{if(!e)return null;try{const t=new Date(e+"T00:00:00");return isFinite(t.getTime())?t:null}catch{return null}},Mt=e=>{if(!e)return null;const t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${n}`},qe=e=>{if(!e)return"";try{const t=new Date(e+"T00:00:00");return isFinite(t.getTime())?t.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):""}catch{return e}};function Kr({config:e,filterData:t,value:r,onChange:n}){const i=a.useRef(null),c=t.props||{},o=c.enable_range??!1,d=c.placeholder||t.label||"Select date",m=t.icon||"",f=qr(r,o),v=f.from,g=f.to,[V,b]=a.useState(!1),[L,S]=a.useState(!1),[w,I]=a.useState(()=>ze(v)),[x,P]=a.useState(()=>ze(g)),A=a.useCallback(()=>{I(ze(v)),b(!0)},[v]),p=a.useCallback(()=>{P(ze(g)),S(!0)},[g]),h=a.useCallback(E=>{I(E)},[]),R=a.useCallback(E=>{P(E)},[]),_=a.useCallback(E=>{const T=Mt(E!==void 0?E:w)||"";n(je(T,g,o)),b(!1)},[w,o,g,n]),C=a.useCallback(E=>{const T=Mt(E!==void 0?E:x)||"";n(je(v,T,o)),S(!1)},[x,v,o,n]),M=a.useCallback(()=>{I(null),n(je("",g,o))},[o,g,n]),B=a.useCallback(()=>{P(null),n(je(v,"",o))},[v,o,n]),j=o?!!v||!!g:!!v,K=a.useMemo(()=>{if(!j)return d;if(o){const E=[];return v&&E.push(qe(v)),g&&E.push(qe(g)),E.join(" - ")||d}return qe(v)||d},[j,o,v,g,d]),{style:O,className:H}=re(e,"ts-form-group");return React.createElement("div",{className:H,style:O},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:i,className:`ts-filter ts-popup-target ${j?"ts-filled":""}`,onClick:A,onMouseDown:E=>E.preventDefault(),role:"button",tabIndex:0},m&&React.createElement("span",{dangerouslySetInnerHTML:{__html:m}}),React.createElement("div",{className:"ts-filter-text"},K),React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:V,target:i,title:o?"From":"",icon:m,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:_,onClear:M,onClose:()=>b(!1)},React.createElement(Pe,{value:w,onChange:h,onSelect:_}),o&&React.createElement("div",{className:"ts-form-group",style:{marginTop:"12px",borderTop:"1px solid var(--ts-shade-5)",paddingTop:"12px"}},React.createElement("label",null,"To"),React.createElement("div",{className:`ts-filter ts-popup-target ${g?"ts-filled":""}`,onClick:E=>{E.stopPropagation(),b(!1),setTimeout(()=>p(),100)},role:"button",tabIndex:0},m&&React.createElement("span",{dangerouslySetInnerHTML:{__html:m}}),React.createElement("div",{className:"ts-filter-text"},g?qe(g):"Select end date")))),o&&React.createElement(de,{isOpen:L,target:i,title:"To",icon:m,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:C,onClear:B,onClose:()=>S(!1)},React.createElement(Pe,{value:x,onChange:R,onSelect:C})))}const Ke=e=>{if(!e)return null;try{const t=new Date(e+"T00:00:00");return isFinite(t.getTime())?t:null}catch{return null}},It=e=>{if(!e)return null;const t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${n}`},nt=e=>{if(!e)return"";try{const t=new Date(e+"T00:00:00");return isFinite(t.getTime())?t.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):""}catch{return e}};function Zr({config:e,filterData:t,value:r,onChange:n}){const i=a.useRef(null),o=(t.props||{}).placeholder||t.label||"Date",d=t.icon||"",m=r||{},f=m.from||"",v=m.to||"",[g,V]=a.useState(!1),[b,L]=a.useState(!1),[S,w]=a.useState(()=>Ke(f)),[I,x]=a.useState(()=>Ke(v)),P=a.useCallback(()=>{w(Ke(f)),V(!0)},[f]),A=a.useCallback(()=>{x(Ke(v)),L(!0)},[v]),p=a.useCallback(H=>{w(H)},[]),h=a.useCallback(H=>{x(H)},[]),R=a.useCallback(H=>{const z=It(H!==void 0?H:S)||"";n({from:z,to:v}),V(!1)},[S,v,n]),_=a.useCallback(H=>{const z=It(H!==void 0?H:I)||"";n({from:f,to:z}),L(!1)},[I,f,n]),C=a.useCallback(()=>{w(null),n({from:"",to:v})},[v,n]),M=a.useCallback(()=>{x(null),n({from:f,to:""})},[f,n]),B=!!f||!!v,j=a.useMemo(()=>{if(!B)return o;const H=[];return f&&H.push(nt(f)),v&&H.push(nt(v)),H.join(" - ")||o},[B,f,v,o]),{style:K,className:O}=re(e,"ts-form-group");return React.createElement("div",{className:O,style:K},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:i,className:`ts-filter ts-popup-target ${B?"ts-filled":""}`,onClick:P,onMouseDown:H=>H.preventDefault(),role:"button",tabIndex:0},d&&React.createElement("span",{dangerouslySetInnerHTML:{__html:d}}),React.createElement("div",{className:"ts-filter-text"},j),React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:g,target:i,title:"From",icon:d,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:R,onClear:C,onClose:()=>V(!1)},React.createElement(Pe,{value:S,onChange:p,onSelect:R}),React.createElement("div",{className:"ts-form-group",style:{marginTop:"12px",borderTop:"1px solid var(--ts-shade-5)",paddingTop:"12px"}},React.createElement("label",null,"To"),React.createElement("div",{className:`ts-filter ts-popup-target ${v?"ts-filled":""}`,onClick:H=>{H.stopPropagation(),V(!1),setTimeout(()=>A(),100)},role:"button",tabIndex:0},d&&React.createElement("span",{dangerouslySetInnerHTML:{__html:d}}),React.createElement("div",{className:"ts-filter-text"},v?nt(v):"Select end date")))),React.createElement(de,{isOpen:b,target:i,title:"To",icon:d,saveLabel:"Save",clearLabel:"Clear",showClear:!0,onSave:_,onClear:M,onClose:()=>L(!1)},React.createElement(Pe,{value:I,onChange:h,onSelect:_})))}function Jr({config:e,filterData:t,value:r,onChange:n}){const i=r===!0||r==="true"||r==="1",c=f=>{f.preventDefault(),n(!i)},o=t.props?.placeholder||t.label||"Open now",{style:d,className:m}=re(e,"ts-form-group switcher-label ts-inline-filter");return React.createElement("div",{className:m,style:d},React.createElement("label",null,React.createElement("div",{className:"switch-slider"},React.createElement("div",{className:"onoffswitch",onClick:c},React.createElement("input",{type:"checkbox",className:"onoffswitch-checkbox",checked:i,readOnly:!0}),React.createElement("label",{className:"onoffswitch-label",onClick:c}))),o))}function Xr({config:e,filterData:t,value:r,onChange:n}){const i=a.useRef(null),[c,o]=a.useState(!1),d=t.props||{},m=e.displayAs||t.props?.display_as||"popup",f=d.placeholder||t.label||"Order By",v=a.useMemo(()=>{const h=d.choices||{};return Array.isArray(h)?h:Object.entries(h).map(([R,_])=>({key:R,label:_.label||_,placeholder:_.placeholder||_.label||_,icon:_.icon||""}))},[d.choices]),g=t.icon||"",V=a.useCallback(()=>{o(!0)},[]),b=a.useCallback(h=>{n(h),m==="popup"&&o(!1)},[n,m]),L=a.useCallback(()=>{n(null)},[n]),S=typeof r=="string"?r:"",w=!!S,I=v.find(h=>h.key===S),x=I?.placeholder||I?.label||f,P=()=>React.createElement("div",{className:"ts-term-dropdown ts-md-group"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list min-scroll"},v.map(h=>{const R=S===h.key;return React.createElement("li",{key:h.key,className:R?"ts-selected":""},React.createElement("a",{href:"#",className:"flexify",onClick:_=>{_.preventDefault(),b(h.key)}},React.createElement("div",{className:"ts-radio-container"},React.createElement("label",{className:"container-radio"},React.createElement("input",{type:"radio",value:h.key,checked:R,readOnly:!0,disabled:!0,hidden:!0}),React.createElement("span",{className:"checkmark"}))),React.createElement("span",null,h.label),h.icon&&React.createElement("div",{className:"ts-term-icon"},React.createElement("span",{dangerouslySetInnerHTML:{__html:h.icon}}))))})));if(m==="buttons"){const{style:h,className:R}=re(e,"ts-form-group");return React.createElement("div",{className:R,style:h},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("ul",{className:"simplify-ul addon-buttons flexify"},v.map(_=>{const C=S===_.key;return React.createElement("li",{key:_.key,className:`flexify${C?" adb-selected":""}`,onClick:()=>b(_.key)},_.placeholder||_.label)})))}if(m==="alt-btn")return React.createElement(React.Fragment,null,v.map(h=>{const R=S===h.key,{style:_,className:C}=re(e,"ts-form-group");return React.createElement("div",{key:h.key,className:C,style:_},!e.hideLabel&&React.createElement("label",null,h.label),React.createElement("div",{className:`ts-filter${R?" ts-filled":""}`,onClick:()=>b(h.key)},h.icon&&React.createElement("span",{dangerouslySetInnerHTML:{__html:h.icon}}),React.createElement("div",{className:"ts-filter-text"},React.createElement("span",null,h.placeholder||h.label))))}));const{style:A,className:p}=re(e,"ts-form-group");return React.createElement("div",{className:p,style:A},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:i,className:`ts-filter ts-popup-target ${w?"ts-filled":""}`,onClick:V,onMouseDown:h=>h.preventDefault(),role:"button",tabIndex:0},g&&React.createElement("span",{dangerouslySetInnerHTML:{__html:g}}),React.createElement("div",{className:"ts-filter-text"},x),React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:c,target:i,title:"",icon:g,saveLabel:"Save",clearLabel:"Clear",showClear:w,showSave:!1,onSave:()=>o(!1),onClear:L,onClose:()=>o(!1),className:"hide-head"},P()))}function Yr({config:e,filterData:t,value:r,onChange:n}){const[i,c]=a.useState(!1),o=a.useRef(null),d=t.props||{},m=e.displayAs||t.props?.display_as||"popup",f=d.placeholder||t.label||"Status",v=a.useMemo(()=>{const p=d.choices||{};return Array.isArray(p)?p:Object.entries(p).map(([h,R])=>({key:h,label:R.label||R}))},[d.choices]),g=t.icon||"",V=a.useCallback(p=>{n(p),c(!1)},[n]),b=a.useCallback(()=>{c(!0)},[]),L=typeof r=="string"?r:"",S=!!L,w=v.find(p=>p.key===L),I=S&&w?.label||f,x=()=>React.createElement("div",{className:"ts-term-dropdown ts-md-group"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list min-scroll"},v.map(p=>{const h=L===p.key;return React.createElement("li",{key:p.key},React.createElement("a",{href:"#",className:"flexify",onClick:R=>{R.preventDefault(),V(p.key)}},React.createElement("div",{className:"ts-radio-container"},React.createElement("label",{className:"container-radio"},React.createElement("input",{type:"radio",value:p.key,checked:h,readOnly:!0}),React.createElement("span",{className:"checkmark"}))),React.createElement("span",null,p.label),g&&React.createElement("div",{className:"ts-term-icon"},React.createElement("span",{dangerouslySetInnerHTML:{__html:g}}))))})));if(m==="buttons")return React.createElement(React.Fragment,null,v.map(p=>{const h=L===p.key,{style:R,className:_}=re(e,"ts-form-group");return React.createElement("div",{key:p.key,className:_,style:R},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{className:`ts-filter${h?" ts-filled":""}`,onClick:()=>n(p.key)},g&&React.createElement("span",{dangerouslySetInnerHTML:{__html:g}}),React.createElement("div",{className:"ts-filter-text"},React.createElement("span",null,p.label))))}));const{style:P,className:A}=re(e,"ts-form-group");return React.createElement("div",{className:A,style:P},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:o,className:`ts-filter ts-popup-target ${S?"ts-filled":""}`,onClick:b,onMouseDown:p=>p.preventDefault(),role:"button",tabIndex:0},g&&React.createElement("span",{dangerouslySetInnerHTML:{__html:g}}),React.createElement("div",{className:"ts-filter-text"},I),React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:i,target:o,title:"",icon:g,saveLabel:"Save",showSave:!1,showClear:!1,onSave:()=>c(!1),onClose:()=>c(!1),className:"hide-head"},x()))}function Gr({config:e,filterData:t,value:r,onChange:n}){const i=a.useRef(null),c=a.useRef(null),[o,d]=a.useState(!1),[m,f]=a.useState(""),[v,g]=a.useState([]),[V,b]=a.useState(!1),S=(t.props||{}).placeholder||t.label||"User",w=t.icon||"";a.useEffect(()=>{o&&(f(""),g([]),setTimeout(()=>c.current?.focus(),50))},[o]);const I=a.useCallback(()=>{d(!0)},[]),x=a.useCallback(M=>{const B=M.target.value;f(B),B.length>=2?(b(!0),setTimeout(()=>{g([]),b(!1)},300)):g([])},[]),P=a.useCallback((M,B)=>{n({id:M,name:B}),d(!1),f("")},[n]),A=a.useCallback(()=>{n(null),f(""),g([])},[n]),p=r,h=!!p?.id,R=h&&p?.name||S,{style:_,className:C}=re(e,"ts-form-group");return React.createElement("div",{className:C,style:_},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:i,className:`ts-filter ts-popup-target ${h?"ts-filled":""}`,onClick:I,onMouseDown:M=>M.preventDefault(),role:"button",tabIndex:0},w&&React.createElement("span",{dangerouslySetInnerHTML:{__html:w}}),React.createElement("div",{className:"ts-filter-text"},R),React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:o,target:i,title:"",icon:w,saveLabel:"Save",clearLabel:"Clear",showClear:h,showSave:!1,onSave:()=>d(!1),onClear:A,onClose:()=>d(!1)},React.createElement("div",{className:"ts-form-group"},React.createElement("div",{className:"flexify ts-input-icon"},React.createElement("span",null,be.search),React.createElement("input",{ref:c,type:"text",className:"inline-input",value:m,onChange:x,placeholder:"Search users..."}))),V?React.createElement("div",{className:"ts-loading"},React.createElement("span",{className:"ts-loader"})):v.length>0?React.createElement("div",{className:"ts-term-dropdown"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list"},v.map(M=>React.createElement("li",{key:M.id},React.createElement("a",{href:"#",className:"flexify",onClick:B=>{B.preventDefault(),P(M.id,M.name)}},M.avatar&&React.createElement("img",{src:M.avatar,alt:M.name,className:"ts-status-avatar"}),React.createElement("span",null,M.name)))))):m.length>=2?React.createElement("div",{className:"ts-empty-user-tab"},React.createElement("span",null,getFilterIcon(t.type)),React.createElement("p",null,"No users found")):null))}function Qr({config:e,filterData:t,value:r,onChange:n}){const i=a.useRef(null),c=a.useRef(null),[o,d]=a.useState(!1),[m,f]=a.useState(""),[v,g]=a.useState([]),[V,b]=a.useState(!1),S=(t.props||{}).placeholder||t.label||"Related",w=t.icon||"";a.useEffect(()=>{o&&(f(""),g([]),setTimeout(()=>c.current?.focus(),50))},[o]);const I=a.useCallback(()=>{d(!0)},[]),x=a.useCallback(M=>{const B=M.target.value;f(B),B.length>=2?(b(!0),setTimeout(()=>{g([]),b(!1)},300)):g([])},[]),P=a.useCallback((M,B)=>{n({id:M,title:B}),d(!1),f("")},[n]),A=a.useCallback(()=>{n(null),f(""),g([])},[n]),p=r,h=!!p?.id,R=h&&p?.title||S,{style:_,className:C}=re(e,"ts-form-group");return React.createElement("div",{className:C,style:_},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{ref:i,className:`ts-filter ts-popup-target ${h?"ts-filled":""}`,onClick:I,onMouseDown:M=>M.preventDefault(),role:"button",tabIndex:0},w&&React.createElement("span",{dangerouslySetInnerHTML:{__html:w}}),React.createElement("div",{className:"ts-filter-text"},R),React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:o,target:i,title:"",icon:w,saveLabel:"Save",clearLabel:"Clear",showClear:h,showSave:!1,onSave:()=>d(!1),onClear:A,onClose:()=>d(!1)},React.createElement("div",{className:"ts-form-group"},React.createElement("div",{className:"flexify ts-input-icon"},React.createElement("span",null,be.search),React.createElement("input",{ref:c,type:"text",className:"inline-input",value:m,onChange:x,placeholder:"Search..."}))),V?React.createElement("div",{className:"ts-loading"},React.createElement("span",{className:"ts-loader"})):v.length>0?React.createElement("div",{className:"ts-term-dropdown"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list"},v.map(M=>React.createElement("li",{key:M.id},React.createElement("a",{href:"#",className:"flexify",onClick:B=>{B.preventDefault(),P(M.id,M.title)}},React.createElement("span",null,M.title)))))):m.length>=2?React.createElement("div",{className:"ts-empty-user-tab"},w&&React.createElement("span",{dangerouslySetInnerHTML:{__html:w}}),React.createElement("p",null,"No results found")):null))}function $r({config:e,filterData:t,value:r,onChange:n}){const[i,c]=a.useState(!1),[o,d]=a.useState(""),[m,f]=a.useState([]),[v,g]=a.useState(!1),V=a.useRef(null),L=(t.props||{}).placeholder||t.label||"Following",S=t.icon||"",w=C=>{const M=C.target.value;d(M),M.length>=2?(g(!0),setTimeout(()=>{f([]),g(!1)},300)):f([])},I=(C,M)=>{n({id:C,name:M}),c(!1),d("")},x=C=>{C.preventDefault(),c(!i)};a.useEffect(()=>{const C=M=>{V.current&&!V.current.contains(M.target)&&c(!1)};return i&&document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[i]);const P=r,A=!!P?.id,p=A&&P?.name||L,{style:h,className:R}=re(e,"ts-form-group"),_=Yt(e);return React.createElement("div",{className:R,style:h,ref:V},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("div",{className:`ts-filter ts-popup-target ${A?"ts-filled":""}`,onClick:x,onMouseDown:C=>C.preventDefault(),role:"button",tabIndex:0},S&&React.createElement("span",{dangerouslySetInnerHTML:{__html:S}}),React.createElement("div",{className:"ts-filter-text"},p),React.createElement("div",{className:"ts-down-icon"})),i&&React.createElement("div",{className:"ts-field-popup-container"},React.createElement("div",{className:_.className,style:_.style},React.createElement("div",{className:"ts-popup-content-wrapper min-scroll"},React.createElement("div",{className:"ts-form-group"},React.createElement("div",{className:"flexify ts-input-icon"},React.createElement("span",null,be.search),React.createElement("input",{type:"text",className:"inline-input",value:o,onChange:w,placeholder:"Search..."}))),v?React.createElement("div",{className:"ts-loading"},React.createElement("span",{className:"ts-loader"})):m.length>0?React.createElement("div",{className:"ts-term-dropdown"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list"},m.map(C=>React.createElement("li",{key:C.id},React.createElement("a",{href:"#",className:"flexify",onClick:M=>{M.preventDefault(),I(C.id,C.name)}},React.createElement("span",null,C.name)))))):o.length>=2?React.createElement("div",{className:"ts-empty-user-list"},React.createElement("span",null,"No results found")):null))))}function en({config:e,filterData:t,value:r,onChange:n}){const i=r===!0||r==="true"||r==="1",c=m=>{m.preventDefault(),n(!i)},{style:o,className:d}=re(e,"ts-form-group switcher-label ts-inline-filter");return React.createElement("div",{className:d,style:o},!e.hideLabel&&React.createElement("label",null,t.label),React.createElement("label",{className:`onoffswitch ts-${i?"on":"off"}`,onClick:c},React.createElement("input",{type:"checkbox",className:"onoffswitch-checkbox",checked:i,readOnly:!0}),React.createElement("span",{className:"onoffswitch-trigger"})))}function tn({config:e,filterData:t}){const r=t.props?.description||"",{style:n,className:i}=re(e,"ts-form-group ui-heading");return React.createElement("div",{className:i,style:n},React.createElement("label",null,e.label||t.label,r&&React.createElement("small",null,r)))}function rn({postTypes:e,currentPostType:t,onChange:r}){const[n,i]=a.useState(!1),c=a.useRef(null),o=a.useCallback(b=>{r(b),i(!1)},[r]),d=a.useCallback(()=>{i(!0)},[]),m=e.find(b=>b.key===t),f=m?.label||"Select type",v=!!t,g=m?.icon||"",V=()=>React.createElement("div",{className:"ts-term-dropdown ts-md-group"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list min-scroll"},e.map(b=>{const L=t===b.key;return React.createElement("li",{key:b.key},React.createElement("a",{href:"#",className:"flexify",onClick:S=>{S.preventDefault(),o(b.key)}},React.createElement("div",{className:"ts-radio-container"},React.createElement("label",{className:"container-radio"},React.createElement("input",{type:"radio",checked:L,disabled:!0,hidden:!0,readOnly:!0}),React.createElement("span",{className:"checkmark"}))),React.createElement("span",null,b.label),React.createElement("div",{className:"ts-term-icon ts-pull-right"},b.icon&&React.createElement("span",{dangerouslySetInnerHTML:{__html:b.icon}}))))})));return React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,"Type"),React.createElement("div",{ref:c,className:`ts-filter ts-popup-target ${v?"ts-filled":""}`,onClick:d,onMouseDown:b=>b.preventDefault(),role:"button",tabIndex:0},g&&React.createElement("span",{dangerouslySetInnerHTML:{__html:g}}),React.createElement("div",{className:"ts-filter-text"},f),React.createElement("div",{className:"ts-down-icon"})),React.createElement(de,{isOpen:n,target:c,title:"",icon:g,saveLabel:"Save",showSave:!1,showClear:!1,onSave:()=>i(!1),onClose:()=>i(!1),className:"hide-head"},V()))}function nn(){const e=()=>{if(typeof window>"u")return"desktop";const n=window.innerWidth;return n<=767?"mobile":n<=1024?"tablet":"desktop"},[t,r]=a.useState(e);return a.useEffect(()=>{const n=()=>{r(e())};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),t}function sn({attributes:e,postTypes:t,context:r,editorDeviceType:n,onSubmit:i,onPostTypeChange:c}){a.useRef(null);const o=a.useRef(null),{state:d,setCurrentPostType:m,setFilterValue:f,togglePortal:v,submit:g,clearAll:V,narrowedValues:b,narrowingFilters:L}=Zt({attributes:e,postTypes:t,context:r,onSubmit:i,onPostTypeChange:c}),[S,w]=a.useState(""),[I,x]=a.useState("");a.useEffect(()=>{const E=async()=>{const T=e.searchButtonText||"Search";if(Ge(T)){const Y=pt(T),G=await ht(Y);w(G)}else w(T)},z=async()=>{const T=e.resetButtonText||"Reset";if(Ge(T)){const Y=pt(T),G=await ht(Y);x(G)}else x(T)};E(),z()},[e.searchButtonText,e.resetButtonText]),a.useEffect(()=>{if(!d.portalActive)return;const E=z=>{z.key==="Escape"&&v()};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[d.portalActive,v]),a.useEffect(()=>{if(!d.portalActive)return;const E=T=>{const Y=T.target;o.current?.contains(Y)||v()},z=requestAnimationFrame(()=>{document.addEventListener("mousedown",E)});return()=>{cancelAnimationFrame(z),document.removeEventListener("mousedown",E)}},[d.portalActive,v]);const P=t.find(E=>E.key===d.currentPostType),A=e.filterLists?.[d.currentPostType]||[],p=E=>{g()},h=(E=!1)=>{V(E)},R=E=>{const z=P?.filters?.find(Y=>Y.key===E.filterKey);if(!z)return null;const T={config:E,filterData:z,value:d.filterValues[E.filterKey],onChange:Y=>f(E.filterKey,Y),narrowedValues:b,isNarrowing:L};switch(z.type){case"keywords":return React.createElement(Gt,{key:E.id,...T});case"range":return React.createElement(Ar,{key:E.id,...T});case"stepper":return React.createElement(Br,{key:E.id,...T});case"terms":return React.createElement(Hr,{key:E.id,...T});case"location":return React.createElement(Ur,{key:E.id,...T});case"availability":return React.createElement(zr,{key:E.id,...T});case"date":return React.createElement(Kr,{key:E.id,...T});case"recurring-date":return React.createElement(Zr,{key:E.id,...T});case"open-now":return React.createElement(Jr,{key:E.id,...T});case"order-by":return React.createElement(Xr,{key:E.id,...T});case"post-status":return React.createElement(Yr,{key:E.id,...T});case"user":return React.createElement(Gr,{key:E.id,...T});case"relations":return React.createElement(Qr,{key:E.id,...T});case"following":return React.createElement($r,{key:E.id,...T});case"switcher":return React.createElement(en,{key:E.id,...T});case"ui-heading":return React.createElement(tn,{key:E.id,...T});default:return null}},_=(E=!0)=>React.createElement("div",{className:"ts-filter-wrapper flexify"},e.showPostTypeFilter&&t.length>1&&React.createElement(rn,{postTypes:t,currentPostType:d.currentPostType,onChange:m}),A.map(z=>R(z)),E&&e.showSearchButton&&React.createElement("div",{className:"ts-form-group flexify ts-form-submit",id:"sf_submit",style:H("search")},React.createElement("button",{type:"button",onClick:()=>p(),className:`ts-btn ts-btn-2 ts-btn-large ts-search-btn ${d.loading&&!d.resetting?"ts-loading-btn":""}`},d.loading&&!d.resetting&&React.createElement("div",{className:"ts-loader-wrapper"},React.createElement("span",{className:"ts-loader"})),be.search,S||"Search")),E&&e.showResetButton&&React.createElement("div",{className:"ts-form-group flexify ts-form-reset",style:H("reset")},React.createElement("a",{href:"#",onClick:z=>{z.preventDefault(),h(!1)},className:"ts-filter",role:"button"},be.reload,I&&React.createElement("div",{className:"ts-filter-text"},I)))),C=nn(),M=r==="editor"&&n?n:C,B=M==="desktop"&&(e.formToggleDesktop??!1)||M==="tablet"&&(e.formToggleTablet??!0)||M==="mobile"&&(e.formToggleMobile??!0),j=B,K=!B,O={postTypes:t.map(E=>({key:E.key,label:E.label,filters:E.filters})),currentPostType:d.currentPostType,filterLists:e.filterLists||{},portalMode:e.portalMode||{desktop:!1,tablet:!1,mobile:!1},showPostTypeFilter:e.showPostTypeFilter??!0,showSearchButton:e.showSearchButton??!0,showResetButton:e.showResetButton??!1,searchButtonText:e.searchButtonText||"Search",resetButtonText:e.resetButtonText||"",formToggleDesktop:e.formToggleDesktop??!1,formToggleTablet:e.formToggleTablet??!0,formToggleMobile:e.formToggleMobile??!0,searchButtonWidth:e.searchButtonWidth,searchButtonWidth_tablet:e.searchButtonWidth_tablet,searchButtonWidth_mobile:e.searchButtonWidth_mobile,searchButtonWidthUnit:e.searchButtonWidthUnit||"%",resetButtonWidth:e.resetButtonWidth,resetButtonWidth_tablet:e.resetButtonWidth_tablet,resetButtonWidth_mobile:e.resetButtonWidth_mobile,resetButtonWidthUnit:e.resetButtonWidthUnit||"%"},H=E=>{const z=E==="search"?e.searchButtonWidthUnit||"%":e.resetButtonWidthUnit||"%";let T;return E==="search"?M==="mobile"?T=e.searchButtonWidth_mobile??e.searchButtonWidth_tablet??e.searchButtonWidth:M==="tablet"?T=e.searchButtonWidth_tablet??e.searchButtonWidth:T=e.searchButtonWidth:M==="mobile"?T=e.resetButtonWidth_mobile??e.resetButtonWidth_tablet??e.resetButtonWidth:M==="tablet"?T=e.resetButtonWidth_tablet??e.resetButtonWidth:T=e.resetButtonWidth,T!==void 0?{width:`${T}${z}`,flexGrow:0,flexShrink:0}:{}};return React.createElement(React.Fragment,null,React.createElement("div",{className:"ts-form ts-search-widget","data-v-app":""},React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(O)}}),j&&React.createElement("div",{className:"ts-filter-wrapper flexify vx-hidden-desktop"},React.createElement("a",{href:"#",onClick:E=>{E.preventDefault(),v()},onMouseDown:E=>E.preventDefault(),className:`ts-filter-toggle ts-btn ts-btn-1 ${d.activeFilterCount>0?"ts-filled":""}`,role:"button","aria-expanded":d.portalActive},be.filterslider,React.createElement("div",{className:"ts-toggle-text"},"Filter results"),d.activeFilterCount>0&&React.createElement("span",{className:"ts-filter-count"},d.activeFilterCount))),React.createElement("form",{method:"GET",onSubmit:E=>(E.preventDefault(),!1)},K&&React.createElement("div",{className:"ts-inline-filters"},_())),React.createElement("div",{className:"hidden"},React.createElement("div",{className:"ts-search-portal"}))),d.portalActive&&ft.createPortal(React.createElement("div",{className:"ts-search-portal vx-popup elementor"},React.createElement("div",{className:"ts-popup-root elementor-element"},React.createElement("div",{className:"ts-form ts-search-widget no-render elementor-element"},React.createElement("div",{className:"ts-field-popup-container"},React.createElement("div",{className:"ts-field-popup triggers-blur",ref:o},React.createElement("div",{className:"ts-popup-content-wrapper min-scroll"},React.createElement("div",{className:"ts-form-group"},_())),React.createElement("div",{className:"ts-popup-controller"},React.createElement("ul",{className:"flexify simplify-ul"},React.createElement("li",{className:"flexify ts-popup-close"},React.createElement("a",{href:"#",onClick:E=>{E.preventDefault(),v()},className:"ts-icon-btn",role:"button","aria-label":"Close"},be.close)),React.createElement("li",{className:"flexify hide-d"},React.createElement("a",{href:"#",onClick:E=>{E.preventDefault(),h(!0)},className:"ts-icon-btn",role:"button"},be.reload)),React.createElement("li",{className:"flexify hide-m"},React.createElement("a",{href:"#",onClick:E=>{E.preventDefault(),h(!0)},className:"ts-btn ts-btn-1",role:"button"},"Clear")),React.createElement("li",{className:"flexify"},React.createElement("a",{href:"#",onClick:E=>{E.preventDefault(),p(),v()},className:"ts-btn ts-btn-2",role:"button"},"Search"))))))))),document.body))}const st=new Map;function an(){return mt()}function _e(e,t){if(!e)return t;try{return JSON.parse(e)}catch{return t}}function xe(e){return e==="true"}function ln(e){const t=r=>{if(!r||r==="")return;const n=Number(r);return isNaN(n)?void 0:n};return{blockId:e.id||"",postTypes:_e(e.dataset.postTypes,[]),showPostTypeFilter:xe(e.dataset.showPostTypeFilter),filterLists:_e(e.dataset.filterLists,{}),onSubmit:e.dataset.onSubmit||"refresh",postToFeedId:e.dataset.postToFeedId||"",postToMapId:e.dataset.postToMapId||"",searchOn:e.dataset.searchOn||"submit",showSearchButton:xe(e.dataset.showSearchButton),searchButtonText:e.dataset.searchButtonText||"Search",searchButtonIcon:_e(e.dataset.searchButtonIcon,{}),searchButtonWidth:t(e.dataset.searchButtonWidth),searchButtonWidth_tablet:t(e.dataset.searchButtonWidthTablet),searchButtonWidth_mobile:t(e.dataset.searchButtonWidthMobile),searchButtonWidthUnit:e.dataset.searchButtonWidthUnit||"%",showResetButton:xe(e.dataset.showResetButton),resetButtonText:e.dataset.resetButtonText||"Reset",resetButtonIcon:_e(e.dataset.resetButtonIcon,{}),resetButtonWidth:t(e.dataset.resetButtonWidth),resetButtonWidth_tablet:t(e.dataset.resetButtonWidthTablet),resetButtonWidth_mobile:t(e.dataset.resetButtonWidthMobile),resetButtonWidthUnit:e.dataset.resetButtonWidthUnit||"%",voxelIntegration:xe(e.dataset.voxelIntegration),adaptiveFiltering:xe(e.dataset.adaptiveFiltering),portalMode:_e(e.dataset.portalMode,{desktop:!1,tablet:!0,mobile:!0}),formToggleDesktop:xe(e.dataset.formToggleDesktop),formToggleTablet:xe(e.dataset.formToggleTablet),formToggleMobile:xe(e.dataset.formToggleMobile),toggleText:e.dataset.toggleText||"Filter results",toggleIcon:_e(e.dataset.toggleIcon,{})}}async function on(e){if(!e||e.length===0)return[];const r=`${an()}voxel-fse/v1/search-form/frontend-config?post_types=${encodeURIComponent(e.join(","))}`;try{const n=await fetch(r);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(n){return console.error("Failed to fetch post types:",n),[]}}function cn(e){const t=(o,d)=>typeof o=="boolean"?o:o==="true"?!0:o==="false"?!1:d,r=o=>{if(o&&typeof o=="object"){const d=o;return{desktop:t(d.desktop,!1),tablet:t(d.tablet,!0),mobile:t(d.mobile,!0)}}return{desktop:!1,tablet:!0,mobile:!0}},n=o=>o&&typeof o=="object"?o:{},c=(e.postTypes??e.post_types??[]).map(o=>typeof o=="string"?o:o&&typeof o=="object"&&"key"in o?o.key:"").filter(Boolean);return{blockId:e.blockId??e.block_id??"",postTypes:c,showPostTypeFilter:t(e.showPostTypeFilter??e.show_post_type_filter,!0),filterLists:e.filterLists??e.filter_lists??{},onSubmit:e.onSubmit??e.on_submit??"refresh",postToFeedId:e.postToFeedId??e.post_to_feed_id??"",postToMapId:e.postToMapId??e.post_to_map_id??"",searchOn:e.searchOn??e.search_on??"submit",showSearchButton:t(e.showSearchButton??e.show_search_button,!0),searchButtonText:e.searchButtonText??e.search_button_text??"Search",searchButtonIcon:n(e.searchButtonIcon??e.search_button_icon),searchButtonWidth:e.searchButtonWidth,searchButtonWidth_tablet:e.searchButtonWidth_tablet??e.search_button_width_tablet,searchButtonWidth_mobile:e.searchButtonWidth_mobile??e.search_button_width_mobile,searchButtonWidthUnit:e.searchButtonWidthUnit??e.search_button_width_unit??"%",showResetButton:t(e.showResetButton??e.show_reset_button,!1),resetButtonText:e.resetButtonText??e.reset_button_text??"Reset",resetButtonIcon:n(e.resetButtonIcon??e.reset_button_icon),resetButtonWidth:e.resetButtonWidth,resetButtonWidth_tablet:e.resetButtonWidth_tablet??e.reset_button_width_tablet,resetButtonWidth_mobile:e.resetButtonWidth_mobile??e.reset_button_width_mobile,resetButtonWidthUnit:e.resetButtonWidthUnit??e.reset_button_width_unit??"%",voxelIntegration:t(e.voxelIntegration??e.voxel_integration,!0),adaptiveFiltering:t(e.adaptiveFiltering??e.adaptive_filtering,!1),portalMode:r(e.portalMode??e.portal_mode),formToggleDesktop:t(e.formToggleDesktop??e.form_toggle_desktop,!1),formToggleTablet:t(e.formToggleTablet??e.form_toggle_tablet,!0),formToggleMobile:t(e.formToggleMobile??e.form_toggle_mobile,!0),toggleText:e.toggleText??e.toggle_text??"Filter results",toggleIcon:n(e.toggleIcon??e.toggle_icon)}}function un(e){const t=e.querySelector("script.vxconfig");if(t&&t.textContent)try{const r=JSON.parse(t.textContent),n={...r,blockId:r.blockId||e.id||"",onSubmit:e.dataset.onSubmit||r.onSubmit||"refresh",postToFeedId:e.dataset.postToFeedId||r.postToFeedId||"",postToMapId:e.dataset.postToMapId||r.postToMapId||""};return cn(n)}catch(r){console.error("Failed to parse vxconfig:",r)}return ln(e)}function dn({attributes:e,onSubmit:t}){const[r,n]=a.useState([]),[i,c]=a.useState(!0),[o,d]=a.useState(null),m=a.useRef(!1),f=a.useCallback(()=>{if(m.current)return;const g=e.postTypes?.[0]||"";g&&(t({postType:g}),m.current=!0)},[e.postTypes,t]);if(a.useEffect(()=>{let g=!1;async function V(){c(!0),d(null);try{const b=await on(e.postTypes||[]);g||n(b)}catch(b){g||d(b instanceof Error?b.message:"Failed to load")}finally{g||c(!1)}}return V(),()=>{g=!0}},[e.postTypes]),a.useEffect(()=>{const g=e.blockId;return g?(st.set(g,f),window.__voxelFsePendingPostFeedReady?.[g]&&(f(),delete window.__voxelFsePendingPostFeedReady[g]),()=>{st.delete(g)}):void 0},[e.blockId,f]),i)return React.createElement("div",{className:"ts-form ts-search-widget voxel-fse-loading"},React.createElement("div",{className:"ts-filter-wrapper flexify"},React.createElement("span",{className:"ts-loader"})));if(o)return React.createElement("div",{className:"ts-form ts-search-widget voxel-fse-error"},React.createElement("div",{className:"ts-filter-wrapper flexify"},React.createElement("span",null,"Error loading search form")));const v=r.filter(g=>e.postTypes?.includes(g.key));return React.createElement(sn,{attributes:e,postTypes:v,context:"frontend",onSubmit:t})}function Ze(){document.querySelectorAll(".voxel-fse-search-form").forEach(t=>{if(t.dataset.hydrated==="true")return;const r=un(t),n=c=>{const o=c.postType||r.postTypes?.[0]||"",{postType:d,...m}=c;switch(r.onSubmit){case"feed":if(r.postToFeedId){const f=new CustomEvent("voxel-search-submit",{detail:{targetId:r.postToFeedId,postType:o,filters:m},bubbles:!0});window.dispatchEvent(f)}else console.warn("[search-form] No postToFeedId set, cannot dispatch to Post Feed");break;case"map":if(r.postToMapId){const f=new CustomEvent("voxel-search-submit",{detail:{targetId:r.postToMapId,postType:o,filters:m},bubbles:!0});window.dispatchEvent(f)}break;default:fn(c,r);break}};t.innerHTML="",t.dataset.hydrated="true",jt.createRoot(t).render(React.createElement(dn,{attributes:r,onSubmit:n}))})}function fn(e,t){const r=new URL(window.location.href),n=[];r.searchParams.forEach((c,o)=>{(o.startsWith("filter_")||o==="post_type")&&n.push(o)}),n.forEach(c=>r.searchParams.delete(c));const i=e.postType||t.postTypes?.[0];i&&typeof i=="string"&&r.searchParams.set("post_type",i),Object.entries(e).forEach(([c,o])=>{c!=="postType"&&(o==null||o===""||(typeof o=="object"?r.searchParams.set(`filter_${c}`,JSON.stringify(o)):r.searchParams.set(`filter_${c}`,String(o))))}),window.location.href=r.toString()}function mn(e){const t=e;if(!t.detail?.searchFormId)return;const{searchFormId:r}=t.detail,n=st.get(r);n?n():(window.__voxelFsePendingPostFeedReady||(window.__voxelFsePendingPostFeedReady={}),window.__voxelFsePendingPostFeedReady[r]=t.detail.blockId)}window.addEventListener("voxel-fse:post-feed-ready",mn),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Ze):Ze(),window.addEventListener("turbo:load",Ze),window.addEventListener("pjax:complete",Ze)})(ReactDOM,React,ReactDOM,wp.apiFetch);
