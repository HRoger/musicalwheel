(function(Z,a,$){"use strict";const W=({isOpen:e,popupId:l,target:n,title:u="",icon:k="",saveLabel:w="Save",clearLabel:N="Clear",clearButton:h=!0,showHeader:c=!0,showFooter:x=!0,onSave:A,onClear:P,onClose:j,children:v,popupClass:i="",minWidth:R})=>{const F=a.useRef(null),g=a.useRef(null),[C,M]=a.useState({}),U=a.useRef(""),L=a.useCallback(()=>{if(!g.current||!n||!F.current)return;const E=n,S=F.current,q=g.current,O=document.body.clientWidth,T=E.getBoundingClientRect(),B=E.offsetWidth,I={left:T.left+window.pageXOffset,top:T.top+window.pageYOffset},s=S.getBoundingClientRect(),d=window.getComputedStyle(q),m=parseFloat(d.minWidth)||0,t=R||m,r=Math.min(1140,O-40),o=Math.max(T.width,t||r),y=I.left+B/2>O/2+1;let p;y?p=I.left-o+B:p=I.left,p<0&&(p=10),p+o>O&&(p=O-o-10);let b=I.top+T.height;const V=window.innerHeight;T.bottom+s.height>V&&T.top-s.height>=0&&(b=I.top-s.height);const z={top:`${b}px`,left:`${p}px`,width:`${o}px`,position:"absolute"},X=JSON.stringify(z);X!==U.current&&(U.current=X,M(z))},[n,R]);if(a.useEffect(()=>{if(!e)return;const E=S=>{S.key==="Escape"&&j()};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[e,j]),a.useEffect(()=>{if(!e)return;const E=q=>{const O=q.target;g.current?.contains(O)||j()},S=requestAnimationFrame(()=>{document.addEventListener("mousedown",E)});return()=>{cancelAnimationFrame(S),document.removeEventListener("mousedown",E)}},[e,j]),a.useEffect(()=>{if(!e)return;requestAnimationFrame(()=>{requestAnimationFrame(()=>{L()})});const E=()=>L();window.addEventListener("scroll",E,!0);const S=()=>L();window.addEventListener("resize",S,!0);let q=null;return g.current&&(q=new ResizeObserver(()=>{requestAnimationFrame(()=>L())}),q.observe(g.current)),()=>{window.removeEventListener("scroll",E,!0),window.removeEventListener("resize",S,!0),q?.disconnect()}},[e,L]),!e)return null;const H=()=>a.createElement("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M14 1.41L12.59 0L7 5.59L1.41 0L0 1.41L5.59 7L0 12.59L1.41 14L7 8.41L12.59 14L14 12.59L8.41 7L14 1.41Z",fill:"currentColor"}));return $.createPortal(a.createElement("div",{className:`elementor vx-popup ${i}`.trim()},a.createElement("div",{className:"ts-popup-root elementor-element"},a.createElement("div",{ref:F,className:"ts-form elementor-element",style:C},a.createElement("div",{className:"ts-field-popup-container"},a.createElement("div",{id:l,ref:g,className:"ts-field-popup triggers-blur"},c&&a.createElement("div",{className:"ts-popup-head flexify ts-sticky-top"},a.createElement("div",{className:"ts-popup-name flexify"},k&&a.createElement("span",{dangerouslySetInnerHTML:{__html:k}}),a.createElement("span",null,u)),a.createElement("ul",{className:"flexify simplify-ul"},a.createElement("li",{className:"flexify ts-popup-close"},a.createElement("a",{href:"#",onClick:E=>{E.preventDefault(),j()},className:"ts-icon-btn","aria-label":"Close"},a.createElement(H,null))))),a.createElement("div",{className:"ts-popup-content-wrapper min-scroll"},v),x&&a.createElement("div",{className:"ts-popup-controller"},a.createElement("ul",{className:"flexify simplify-ul"},a.createElement("li",{className:"flexify ts-popup-close"},a.createElement("a",{href:"#",onClick:E=>{E.preventDefault(),j()},className:"ts-icon-btn","aria-label":"Close"},a.createElement(H,null))),h&&P&&a.createElement("li",{className:"flexify"},a.createElement("a",{href:"#",onClick:E=>{E.preventDefault(),P()},className:"ts-btn ts-btn-1"},N)),A&&a.createElement("li",{className:"flexify"},a.createElement("a",{href:"#",onClick:E=>{E.preventDefault(),A()},className:"ts-btn ts-btn-2"},w))))))))),document.body)};function J({text:e,icon:l="î —",className:n="",style:u={}}){return a.createElement("div",{className:`voxel-empty-placeholder ${n}`,style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:e?"8px":"0",background:"rgb(213 216 220 / 80%)",borderRadius:"0",color:"#666",fontSize:"13px",height:"45px",...u}},a.createElement("span",{className:"placeholder-icon",style:{fontFamily:"eicons",fontSize:"24px",opacity:.3,lineHeight:1,fontStyle:"normal"}},l),e&&a.createElement("span",{className:"placeholder-text",style:{opacity:.6}},e))}function D(e){const l=window.Voxel_Config;return l?.ajax_url?`${l.ajax_url}&action=${e}`:`${l?.site_url||window.location.origin}/?vx=1&action=${e}`}function G(){return window.Voxel_Config?.is_logged_in??!1}function _(e,l="error"){const n=window.Voxel;n?.alert?n.alert(e,l):console.error(`[Userbar] ${l}: ${e}`)}function f(e,l){return window.Voxel_Config?.l10n?.[e]??l}function Y(e,l){const n=window.Voxel;return n?.helpers?.currencyFormat?n.helpers.currencyFormat(e,l):`$${(e/100).toFixed(2)}`}function Q(e){return!e||!e.value?null:e.library==="svg"&&e.value?React.createElement("img",{src:e.value,alt:"",style:{width:"1em",height:"1em"}}):e.library==="icon"&&e.value?React.createElement("i",{className:e.value,"aria-hidden":"true"}):null}function ee({item:e,icons:l,context:n}){const[u,k]=a.useState(!1),w=a.useRef(null),N=a.useRef(null),[h,c]=a.useState(null),[x,A]=a.useState(!1),[P,j]=a.useState(!0),[v,i]=a.useState(!1),[R,F]=a.useState(1),[g,C]=a.useState(null),M=a.useRef(0),U=a.useCallback(async(s=1)=>{i(!0);try{const d=D("notifications.list"),t=await(await fetch(`${d}&pg=${s}`)).json();t.success?(c(r=>s===1?t.list:[...r||[],...t.list]),A(t.has_more)):_(t.message||f("ajaxError","An error occurred"))}catch{_(f("ajaxError","An error occurred"))}finally{j(!1),i(!1)}},[]),L=a.useCallback(()=>{n==="frontend"&&(h===null&&(c([]),N.current?.classList.add("hidden"),U(1)),k(!0))},[n,h,U]),H=a.useCallback(()=>{const s=R+1;F(s),U(s)},[R,U]),E=a.useCallback(async()=>{const s=f("confirmClear","Clear all notifications?");if(window.confirm(s))try{const d=D("notifications.clear_all"),t=await(await fetch(d)).json();t.success?c([]):_(t.message||f("ajaxError","An error occurred"))}catch{_(f("ajaxError","An error occurred"))}},[]),S=a.useCallback(()=>{C(null),requestAnimationFrame(()=>{const s=document.querySelector(".min-scroll");s&&(s.scrollTop=M.current)})},[]),q=a.useCallback(async s=>{if(s.links_to==="(details)"){const d=document.querySelector(".min-scroll");d&&(M.current=d.scrollTop),s.actions===void 0?(c(m=>m?.map(t=>t.id===s.id?{...t,seen:!0}:t)||null),O(s)):(C(s),requestAnimationFrame(()=>{const m=document.querySelector(".min-scroll");m&&(m.scrollTop=0)}))}else{c(d=>d?.map(m=>m.id===s.id?{...m,_loading:!0}:m)||null);try{const d=D("notifications.open"),t=await(await fetch(`${d}&item_id=${s.id}`)).json();t.success?(c(r=>r?.map(o=>o.id===s.id?{...o,seen:!0,_loading:!1}:o)||null),t.redirect_to&&(window.location.href=t.redirect_to)):(_(t.message||f("ajaxError","An error occurred")),c(r=>r?.map(o=>o.id===s.id?{...o,_loading:!1}:o)||null))}catch{_(f("ajaxError","An error occurred")),c(d=>d?.map(m=>m.id===s.id?{...m,_loading:!1}:m)||null)}}},[]),O=a.useCallback(async(s,d=1)=>{c(m=>m?.map(t=>t.id===s.id?{...t,_loading:!0,actions_page:d}:t)||null);try{const m=D("notifications.get_actions"),r=await(await fetch(`${m}&item_id=${s.id}&pg=${d}`)).json();if(r.success){const o={...s,actions:d===1?r.actions:[...s.actions||[],...r.actions],actions_page:d,_loading:!1,seen:!0};c(y=>y?.map(p=>p.id===s.id?o:p)||null),C(o),d===1&&requestAnimationFrame(()=>{const y=document.querySelector(".min-scroll");y&&(y.scrollTop=0)})}else _(r.message||f("ajaxError","An error occurred")),c(o=>o?.map(y=>y.id===s.id?{...y,_loading:!1,seen:!0}:y)||null)}catch{_(f("ajaxError","An error occurred")),c(m=>m?.map(t=>t.id===s.id?{...t,_loading:!1}:t)||null)}},[]),T=a.useCallback(async(s,d,m)=>{const t=m?.key||d.key;if(!t)return;const r=o=>{g&&C({...g,actions:g.actions?.map(y=>y===d?{...y,_loading:o}:y)})};r(!0);try{const o=D("notifications.run_action"),p=await(await fetch(`${o}&item_id=${s.id}&action_key=${t}&pg=${d._page||1}`)).json();if(p.success){if(p.updated_action&&g?.actions){const b=g.actions.indexOf(d);if(b!==-1){const V=[...g.actions];V[b]=p.updated_action,C({...g,actions:V})}}p.redirect_to&&(window.location.href=p.redirect_to)}else _(p.message||f("ajaxError","An error occurred"))}catch{_(f("ajaxError","An error occurred"))}finally{r(!1)}},[g]),B=s=>React.createElement("div",{key:s.id,className:`ts-notification-item ${s.seen?"":"ts-unread"} ${s._loading?"vx-pending":""}`,onClick:()=>q(s)},s.image_url&&React.createElement("div",{className:"ts-notification-image"},React.createElement("img",{src:s.image_url,alt:""})),React.createElement("div",{className:"ts-notification-body"},React.createElement("span",{className:"ts-notification-subject"},s.subject),React.createElement("span",{className:"ts-notification-time"},s.time))),I=(s,d)=>s.type==="list-item"?React.createElement("div",{key:s.key,className:`ts-action-item ${s._loading?"vx-pending":""}`,onClick:()=>s.links_to?window.location.href=s.links_to:T(d,s)},s.image_markup&&React.createElement("div",{className:"ts-action-image",dangerouslySetInnerHTML:{__html:s.image_markup}}),React.createElement("div",{className:"ts-action-body"},s.subject&&React.createElement("span",{className:"ts-action-subject"},s.subject),s.details&&React.createElement("span",{className:"ts-action-details"},s.details)),s.actions&&s.actions.length>0&&React.createElement("div",{className:"ts-action-buttons"},s.actions.map(m=>React.createElement("button",{key:m.key,className:"ts-btn ts-btn-1",onClick:t=>{t.stopPropagation(),T(d,s,m)}},m.label)))):s.type==="button"?React.createElement("button",{key:s.key,className:`ts-btn ts-btn-1 ${s._loading?"vx-pending":""}`,onClick:()=>T(d,s)},s.label):null;return React.createElement("li",{className:`ts-notifications-wrapper elementor-repeater-item-${e._id}`},React.createElement("a",{ref:w,href:"#",onClick:s=>{s.preventDefault(),L()},role:"button","aria-label":e.notificationsTitle||"Notifications"},React.createElement("div",{className:"ts-comp-icon flexify"},Q(e.icon),n==="frontend"&&React.createElement("span",{ref:N,className:"unread-indicator",style:{display:"none"}})),React.createElement("span",{className:"ts_comp_label"},e.notificationsTitle||"Notifications")),n==="frontend"&&React.createElement(W,{isOpen:u,popupId:`notifications-popup-${e._id}`,target:w.current,title:e.notificationsTitle||"Notifications",icon:e.icon?.value?`<i class="${e.icon.value}"></i>`:"",onClose:()=>{k(!1),C(null)},showFooter:!1,popupClass:"md-width"},React.createElement("div",{className:"ts-notifications-list min-scroll"},h&&h.length>0&&!g&&React.createElement("div",{className:"ts-notifications-header flexify"},React.createElement("button",{className:"ts-btn ts-btn-1",onClick:E},f("clearAll","Clear all"))),P&&React.createElement(J,null),g&&React.createElement("div",{className:"ts-notification-details"},React.createElement("button",{className:"ts-btn ts-btn-1 ts-back-btn",onClick:S},React.createElement("i",{className:"las la-arrow-left"}),f("back","Back")),React.createElement("div",{className:"ts-notification-content"},React.createElement("span",{className:"ts-notification-subject"},g.subject),React.createElement("span",{className:"ts-notification-time"},g.time)),g.actions&&React.createElement("div",{className:"ts-notification-actions"},g.actions.map(s=>I(s,g))),g._loading&&React.createElement("div",{className:"ts-loader"})),!P&&!g&&React.createElement(React.Fragment,null,h&&h.length>0?React.createElement(React.Fragment,null,h.map(B),x&&React.createElement("button",{className:`ts-btn ts-btn-1 ts-load-more ${v?"vx-pending":""}`,onClick:H,disabled:v},v?React.createElement("span",{className:"ts-loader"}):f("loadMore","Load more"))):React.createElement(J,null)))))}function te({item:e,icons:l,context:n,nonce:u}){const[k,w]=a.useState(!1),N=a.useRef(null),h=a.useRef(null),[c,x]=a.useState({list:null,hasMore:!1,loading:!0,loadingMore:!1,page:1}),A=a.useCallback(async(i=1)=>{x(R=>({...R,loadingMore:!0}));try{const R=D("inbox.list_chats"),F=new FormData;F.append("pg",i.toString()),u&&F.append("_wpnonce",u);const C=await(await fetch(R,{method:"POST",body:F})).json();C.success?x(M=>({...M,list:i===1?C.list:[...M.list||[],...C.list],hasMore:C.has_more,loading:!1,loadingMore:!1})):(_(C.message||f("ajaxError","An error occurred")),x(M=>({...M,loading:!1,loadingMore:!1})))}catch{_(f("ajaxError","An error occurred")),x(R=>({...R,loading:!1,loadingMore:!1}))}},[u]),P=a.useCallback(()=>{n==="frontend"&&(w(!0),c.list===null&&(x(i=>({...i,list:[]})),h.current?.classList.add("hidden"),A(1)))},[n,c.list,A]),j=a.useCallback(()=>{const i=c.page+1;x(R=>({...R,page:i})),A(i)},[c.page,A]),v=i=>React.createElement("a",{key:i.id,href:i.link,className:`ts-chat-item ${i.seen?"":"ts-unread"}`},React.createElement("div",{className:"ts-chat-avatar"},React.createElement("img",{src:i.target.avatar,alt:i.target.name})),React.createElement("div",{className:"ts-chat-body"},React.createElement("span",{className:"ts-chat-name"},i.target.name),React.createElement("span",{className:"ts-chat-excerpt"},i.excerpt),React.createElement("span",{className:"ts-chat-time"},i.time)));return React.createElement("li",{className:`ts-popup-messages elementor-repeater-item-${e._id}`},React.createElement("a",{ref:N,href:"#",onClick:i=>{i.preventDefault(),P()},role:"button","aria-label":e.messagesTitle||"Messages"},React.createElement("div",{className:"ts-comp-icon flexify"},Q(e.icon),n==="frontend"&&React.createElement("span",{ref:h,className:"unread-indicator",style:{display:"none"}})),React.createElement("span",{className:"ts_comp_label"},e.messagesTitle||"Messages")),n==="frontend"&&React.createElement(W,{isOpen:k,popupId:`messages-popup-${e._id}`,target:N.current,title:e.messagesTitle||"Messages",icon:e.icon?.value?`<i class="${e.icon.value}"></i>`:"",onClose:()=>w(!1),showFooter:!1,popupClass:"md-width"},React.createElement("div",{className:"ts-chats-list min-scroll"},c.loading&&React.createElement("div",{className:"ts-empty-user-tab"},React.createElement("div",{className:"ts-loader"})),!c.loading&&React.createElement(React.Fragment,null,c.list&&c.list.length>0?React.createElement(React.Fragment,null,c.list.map(v),c.hasMore&&React.createElement("button",{className:`ts-btn ts-btn-1 ts-load-more ${c.loadingMore?"vx-pending":""}`,onClick:j,disabled:c.loadingMore},c.loadingMore?React.createElement("span",{className:"ts-loader"}):f("loadMore","Load more"))):React.createElement(J,null)))))}function ae({item:e,icons:l,context:n,nonce:u,isCartEmpty:k}){const[w,N]=a.useState(!1),h=a.useRef(null),c=a.useRef(null),[x,A]=a.useState(!0),[P,j]=a.useState(!1),[v,i]=a.useState(null),[R,F]=a.useState(""),[g,C]=a.useState(!1),M=()=>!x&&v!==null&&Object.keys(v).length>0,U=()=>P?M():G()?!k:!!localStorage.getItem("voxel:guest_cart"),L=t=>t.product_mode==="regular"?t.value.stock?.quantity||0:t.product_mode==="variable"&&t.value.variations?.quantity||0,H=()=>{if(!M()||!v)return 0;let t=0;return Object.values(v).forEach(r=>{t+=r.pricing.total_amount}),t},E=a.useCallback(()=>{if(!v||Object.keys(v).length===0){localStorage.removeItem("voxel:guest_cart");return}const t={};Object.values(v).forEach(r=>{t[r.key]=r.value}),localStorage.setItem("voxel:guest_cart",JSON.stringify(t))},[v]),S=a.useCallback(async()=>{const t=G(),r=t?"products.get_cart_items":"products.get_guest_cart_items";try{const o=D(r),y=new FormData;u&&y.append("_wpnonce",u),y.append("guest_cart",localStorage.getItem("voxel:guest_cart")||"");const b=await(await fetch(o,{method:"POST",body:y})).json();A(!1),j(!0),t&&localStorage.removeItem("voxel:guest_cart"),b.success?(i(Object.keys(b.items).length?b.items:{}),F(b.checkout_link),t||setTimeout(()=>E(),0)):_(b.message||f("ajaxError","An error occurred"))}catch{A(!1),j(!0),_(f("ajaxError","An error occurred"))}},[u,E]),q=a.useCallback(()=>{if(n!=="frontend")return;const t=document.querySelector(".ts-checkout");if(t){window.Voxel?.scrollTo?.(t);return}N(!0),v===null&&(i({}),S())},[n,v,S]),O=a.useCallback(async t=>{if(G()){i(r=>r?{...r,[t.key]:{...r[t.key],_disabled:!0}}:null);try{const r=D("products.remove_cart_item"),o=new FormData;o.append("item_key",t.key),u&&o.append("_wpnonce",u);const p=await(await fetch(r,{method:"POST",body:o})).json();p.success?i(b=>{if(!b)return null;const V={...b};return delete V[t.key],V}):(i(b=>b?{...b,[t.key]:{...b[t.key],_disabled:!1}}:null),_(p.message||f("ajaxError","An error occurred")))}catch{i(r=>r?{...r,[t.key]:{...r[t.key],_disabled:!1}}:null),_(f("ajaxError","An error occurred"))}}else i(r=>{if(!r)return null;const o={...r};return delete o[t.key],o}),setTimeout(()=>E(),0)},[u,E]),T=a.useCallback(async()=>{if(G()){C(!0);try{const t=D("products.empty_cart"),r=new FormData;u&&r.append("_wpnonce",u);const y=await(await fetch(t,{method:"POST",body:r})).json();C(!1),y.success?i({}):_(y.message||f("ajaxError","An error occurred"))}catch{C(!1),_(f("ajaxError","An error occurred"))}}else i({}),localStorage.removeItem("voxel:guest_cart")},[u]),B=a.useCallback(async(t,r)=>{i(p=>p?{...p,[t.key]:{...p[t.key],_disabled:!0}}:null);const o=G(),y=o?"products.update_cart_item_quantity":"products.update_guest_cart_item_quantity";try{const p=D(y),b=new FormData;b.append("item_key",t.key),b.append("item_quantity",r.toString()),o||b.append("guest_cart",localStorage.getItem("voxel:guest_cart")||""),u&&b.append("_wpnonce",u);const z=await(await fetch(p,{method:"POST",body:b})).json();z.success?(i(X=>X?{...X,[t.key]:z.item}:null),o||setTimeout(()=>E(),0)):_(z.message||f("ajaxError","An error occurred"))}catch{_(f("ajaxError","An error occurred"))}finally{i(p=>p?{...p,[t.key]:{...p[t.key],_disabled:!1}}:null)}},[u,E]),I=a.useCallback(t=>{const r=L(t)+1;B(t,r)},[B]),s=a.useCallback(t=>{const r=L(t)-1;r<=0?O(t):B(t,r)},[B,O]),d=t=>{if(!v)return!1;let r=t.quantity.max;for(const o of Object.values(v))if(o.stock_id===t.stock_id&&(r-=L(o),r<=0))return!1;return!0};a.useEffect(()=>{if(n!=="frontend")return;const t=()=>{S(),c.current?.classList.add("ts-cart-update"),setTimeout(()=>c.current?.classList.remove("ts-cart-update"),500)};return document.addEventListener("voxel:added_cart_item",t),()=>{document.removeEventListener("voxel:added_cart_item",t)}},[n,S]);const m=t=>React.createElement("div",{key:t.key,className:`ts-cart-item ${t._disabled?"vx-pending":""}`},React.createElement("div",{className:"ts-cart-item-image"},React.createElement("a",{href:t.link},React.createElement("img",{src:t.logo,alt:t.title}))),React.createElement("div",{className:"ts-cart-item-body"},React.createElement("a",{href:t.link,className:"ts-cart-item-title"},t.title),t.subtitle&&React.createElement("span",{className:"ts-cart-item-subtitle"},t.subtitle),React.createElement("span",{className:"ts-cart-item-price"},Y(t.pricing.total_amount,t.pricing._currency))),React.createElement("div",{className:"ts-cart-item-actions"},t.quantity.enabled&&React.createElement("div",{className:"ts-quantity-control"},React.createElement("button",{className:"ts-qty-btn ts-qty-minus",onClick:()=>s(t),disabled:t._disabled},React.createElement("i",{className:"las la-minus"})),React.createElement("span",{className:"ts-qty-value"},L(t)),React.createElement("button",{className:"ts-qty-btn ts-qty-plus",onClick:()=>I(t),disabled:t._disabled||!d(t)},React.createElement("i",{className:"las la-plus"}))),React.createElement("button",{className:"ts-remove-btn",onClick:()=>O(t),disabled:t._disabled},React.createElement("i",{className:"las la-times"}))));return React.createElement("li",{className:`ts-popup-cart elementor-repeater-item-${e._id}`},React.createElement("a",{ref:h,href:"#",onClick:t=>{t.preventDefault(),q()},role:"button","aria-label":e.cartTitle||"Cart"},React.createElement("div",{ref:c,className:"ts-comp-icon flexify"},Q(e.icon),n==="frontend"&&U()&&React.createElement("span",{className:"unread-indicator"})),React.createElement("span",{className:"ts_comp_label"},e.cartTitle||"Cart")),n==="frontend"&&React.createElement(W,{isOpen:w,popupId:`cart-popup-${e._id}`,target:h.current,title:e.cartTitle||"Cart",icon:e.icon?.value?`<i class="${e.icon.value}"></i>`:"",onClose:()=>N(!1),showFooter:!1,popupClass:"lg-width ts-cart-popup"},React.createElement("div",{className:"ts-cart-content min-scroll"},x&&React.createElement(J,null),!x&&React.createElement(React.Fragment,null,M()&&v?React.createElement(React.Fragment,null,React.createElement("div",{className:"ts-cart-items"},Object.values(v).map(m)),React.createElement("div",{className:"ts-cart-footer"},React.createElement("div",{className:"ts-cart-subtotal"},React.createElement("span",null,f("subtotal","Subtotal")),React.createElement("span",{className:"ts-subtotal-amount"},Y(H()))),React.createElement("div",{className:"ts-cart-actions"},React.createElement("button",{className:`ts-btn ts-btn-1 ts-empty-cart ${g?"vx-pending":""}`,onClick:T,disabled:g},f("emptyCart","Empty cart")),R&&React.createElement("a",{href:R,className:"ts-btn ts-btn-2"},f("checkout","Checkout"))))):React.createElement(J,null)))))}function se({item:e,icons:l,context:n,hideChevron:u}){const[k,w]=a.useState(!1),N=a.useRef(null),h=a.useCallback(()=>{n==="frontend"&&w(!0)},[n]);return React.createElement("li",{className:`ts-popup-component ts-user-area-avatar elementor-repeater-item-${e._id}`},React.createElement("a",{ref:N,href:"#",onClick:c=>{c.preventDefault(),h()},role:"button","aria-label":"User menu"},React.createElement("div",{className:"ts-comp-icon flexify"},n==="editor"?React.createElement("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"#ccc",display:"flex",alignItems:"center",justifyContent:"center"}},React.createElement("i",{className:"las la-user"})):window.VoxelFSEUser?.avatarUrl?React.createElement("img",{src:window.VoxelFSEUser.avatarUrl,alt:"Avatar",style:{width:"32px",height:"32px",borderRadius:"50%"}}):React.createElement("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"#ccc",display:"flex",alignItems:"center",justifyContent:"center"}},React.createElement("i",{className:"las la-user"}))),React.createElement("span",{className:"ts_comp_label"},"User"),!u&&React.createElement("div",{className:"ts-down-icon"})),n==="frontend"&&React.createElement(W,{isOpen:k,popupId:`user-menu-popup-${e._id}`,target:N.current,title:"User",onClose:()=>w(!1),showFooter:!1},React.createElement("div",{className:"ts-term-dropdown ts-md-group ts-multilevel-dropdown"},React.createElement("p",{style:{padding:"16px",textAlign:"center",color:"#666"}},"Menu not configured"))))}function ne({item:e,icons:l,context:n}){const[u,k]=a.useState(!1),w=a.useRef(null),N=a.useCallback(()=>{n==="frontend"&&k(!0)},[n]);return React.createElement("li",{className:`ts-popup-component elementor-repeater-item-${e._id}`},React.createElement("a",{ref:w,href:"#",onClick:h=>{h.preventDefault(),N()},role:"button","aria-label":e.wpMenuTitle||"Menu"},React.createElement("div",{className:"ts-comp-icon flexify"},Q(e.icon)),React.createElement("span",{className:"ts_comp_label"},e.wpMenuTitle||"Menu")),n==="frontend"&&React.createElement(W,{isOpen:u,popupId:`wp-menu-popup-${e._id}`,target:w.current,title:e.wpMenuTitle||"Menu",icon:e.icon?.value?`<i class="${e.icon.value}"></i>`:"",onClose:()=>k(!1),showFooter:!1},React.createElement("div",{className:"ts-term-dropdown ts-md-group ts-multilevel-dropdown"},React.createElement("p",{style:{padding:"16px",textAlign:"center",color:"#666"}},"Menu not configured"))))}function re({item:e,context:l}){const n={href:e.componentUrl.url||"#"};return e.componentUrl.is_external&&(n.target="_blank"),e.componentUrl.nofollow&&(n.rel="nofollow"),React.createElement("li",{className:`elementor-repeater-item-${e._id}`},React.createElement("a",{...n},React.createElement("div",{className:"ts-comp-icon flexify"},Q(e.icon)),React.createElement("span",{className:"ts_comp_label"},e.componentTitle||"Link")))}function le(e,l,n,u,k,w){switch(e.componentType){case"notifications":return React.createElement(ee,{key:e._id,item:e,icons:l,context:n});case"messages":return React.createElement(te,{key:e._id,item:e,icons:l,context:n,nonce:k});case"cart":return React.createElement(ae,{key:e._id,item:e,icons:l,context:n,nonce:k,isCartEmpty:w});case"user_menu":return React.createElement(se,{key:e._id,item:e,icons:l,context:n,hideChevron:u});case"select_wp_menu":return React.createElement(ne,{key:e._id,item:e,icons:l,context:n});case"link":return React.createElement(re,{key:e._id,item:e,context:n});default:return null}}function oe({attributes:e,context:l,config:n}){const u=n?.items||e.items,k=n?.icons||e.icons,w=n?.settings||{itemsAlign:e.itemsAlign,verticalOrientation:e.verticalOrientation,verticalOrientationTablet:e.verticalOrientationTablet,verticalOrientationMobile:e.verticalOrientationMobile,itemContentAlign:e.itemContentAlign,hideChevron:e.hideChevron,customPopupEnable:e.customPopupEnable},N=window.VoxelFSEUserbar,h=N?.nonce,c=N?.is_cart_empty??!0,x={justifyContent:w.itemsAlign};return!u||u.length===0?React.createElement("div",{className:"ts-user-area"},React.createElement("div",{className:"voxel-fse-empty-state",style:{padding:"20px",textAlign:"center",background:"#f5f5f5",borderRadius:"4px"}},React.createElement("p",{style:{margin:0,color:"#666"}},l==="editor"?"Add components using the sidebar panel":"No user bar components configured"))):React.createElement(React.Fragment,null,l==="frontend"&&n&&React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(n)}}),React.createElement("ul",{className:"flexify simplify-ul user-area-menu",style:x},u.map(A=>le(A,k,l,w.hideChevron,h,c))))}function ce(e){const l=e.querySelector("script.vxconfig");if(l&&l.textContent)try{return JSON.parse(l.textContent)}catch(n){console.error("Failed to parse vxconfig:",n)}return null}function ie(e){return{blockId:"",items:e.items||[],icons:e.icons||{downArrow:{library:"",value:""},rightArrow:{library:"",value:""},leftArrow:{library:"",value:""},close:{library:"",value:""},trash:{library:"",value:""},inbox:{library:"",value:""},loadMore:{library:"",value:""}},itemsAlign:e.settings?.itemsAlign||"left",verticalOrientation:e.settings?.verticalOrientation||!1,verticalOrientationTablet:e.settings?.verticalOrientationTablet||!1,verticalOrientationMobile:e.settings?.verticalOrientationMobile||!1,itemContentAlign:e.settings?.itemContentAlign||"left",itemGap:0,itemMargin:{top:"",right:"",bottom:"",left:""},itemPadding:{top:"",right:"",bottom:"",left:""},itemBackground:"",itemBackgroundHover:"#fff",itemBorderRadius:0,itemContentGap:0,iconContainerSize:40,iconContainerRadius:40,iconContainerBackground:"",iconContainerBackgroundHover:"",iconSize:20,iconColor:"",iconColorHover:"",unreadIndicatorColor:"",unreadIndicatorMargin:0,unreadIndicatorSize:8,avatarSize:32,avatarRadius:50,labelTypography:{},labelColor:"",labelColorHover:"",chevronColor:"",chevronColorHover:"",hideChevron:e.settings?.hideChevron||!1,customPopupEnable:e.settings?.customPopupEnable||!1,popupBackdropColor:"",popupPointerEvents:!1,popupBoxShadow:{},popupTopMargin:0,popupMaxHeight:0}}function ue({config:e}){const l=ie(e);return React.createElement(oe,{attributes:l,context:"frontend",config:e})}function K(){document.querySelectorAll(".voxel-fse-userbar").forEach(l=>{if(l.dataset.hydrated==="true")return;const n=ce(l);if(!n){console.error("No vxconfig found for userbar block");return}l.dataset.hydrated="true";const u=l.querySelector(".voxel-fse-block-placeholder");u&&u.remove(),Z.createRoot(l).render(React.createElement(ue,{config:n}))})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",K):K(),window.addEventListener("turbo:load",K),window.addEventListener("pjax:complete",K),document.addEventListener("voxel:markup-update",K)})(ReactDOM,React,ReactDOM);
