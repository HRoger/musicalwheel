(function(se,a,re){"use strict";const X=({isOpen:e,popupId:l,target:s,title:f="",icon:v="",saveLabel:C="Save",clearLabel:N="Clear",clearButton:F=!0,showHeader:O=!0,showFooter:h=!0,onSave:i,onClear:_,onClose:b,children:P,popupClass:z="",minWidth:B})=>{const E=a.useRef(null),o=a.useRef(null),[A,y]=a.useState({}),q=a.useRef(""),x=a.useCallback(()=>{if(!o.current||!s||!E.current)return;const g=s,U=E.current,T=o.current,I=document.body.clientWidth,L=g.getBoundingClientRect(),H=g.offsetWidth,D={left:L.left+window.pageXOffset,top:L.top+window.pageYOffset},W=U.getBoundingClientRect(),Z=window.getComputedStyle(T),n=parseFloat(Z.minWidth)||0,u=B||n,d=Math.min(1140,I-40),c=Math.max(L.width,u||d),S=D.left+H/2>I/2+1;let t;S?t=D.left-c+H:t=D.left,t<0&&(t=10),t+c>I&&(t=I-c-10);let r=D.top+L.height;const p=window.innerHeight;L.bottom+W.height>p&&L.top-W.height>=0&&(r=D.top-W.height);const M={top:`${r}px`,left:`${t}px`,width:`${c}px`,position:"absolute"},k=JSON.stringify(M);k!==q.current&&(q.current=k,y(M))},[s,B]);if(a.useEffect(()=>{if(!e)return;const g=U=>{U.key==="Escape"&&b()};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[e,b]),a.useEffect(()=>{if(!e)return;const g=T=>{const I=T.target;o.current?.contains(I)||b()},U=requestAnimationFrame(()=>{document.addEventListener("mousedown",g)});return()=>{cancelAnimationFrame(U),document.removeEventListener("mousedown",g)}},[e,b]),a.useEffect(()=>{if(!e)return;requestAnimationFrame(()=>{requestAnimationFrame(()=>{x()})});const g=()=>x();window.addEventListener("scroll",g,!0);const U=()=>x();window.addEventListener("resize",U,!0);let T=null;return o.current&&(T=new ResizeObserver(()=>{requestAnimationFrame(()=>x())}),T.observe(o.current)),()=>{window.removeEventListener("scroll",g,!0),window.removeEventListener("resize",U,!0),T?.disconnect()}},[e,x]),!e)return null;const j=()=>a.createElement("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M14 1.41L12.59 0L7 5.59L1.41 0L0 1.41L5.59 7L0 12.59L1.41 14L7 8.41L12.59 14L14 12.59L8.41 7L14 1.41Z",fill:"currentColor"}));return re.createPortal(a.createElement("div",{className:`elementor vx-popup ${z}`.trim()},a.createElement("div",{className:"ts-popup-root elementor-element"},a.createElement("div",{ref:E,className:"ts-form elementor-element",style:A},a.createElement("div",{className:"ts-field-popup-container"},a.createElement("div",{id:l,ref:o,className:"ts-field-popup triggers-blur"},O&&a.createElement("div",{className:"ts-popup-head flexify ts-sticky-top"},a.createElement("div",{className:"ts-popup-name flexify"},v&&a.createElement("span",{dangerouslySetInnerHTML:{__html:v}}),a.createElement("span",null,f)),a.createElement("ul",{className:"flexify simplify-ul"},a.createElement("li",{className:"flexify ts-popup-close"},a.createElement("a",{href:"#",onClick:g=>{g.preventDefault(),b()},className:"ts-icon-btn","aria-label":"Close"},a.createElement(j,null))))),a.createElement("div",{className:"ts-popup-content-wrapper min-scroll"},P),h&&a.createElement("div",{className:"ts-popup-controller"},a.createElement("ul",{className:"flexify simplify-ul"},a.createElement("li",{className:"flexify ts-popup-close"},a.createElement("a",{href:"#",onClick:g=>{g.preventDefault(),b()},className:"ts-icon-btn","aria-label":"Close"},a.createElement(j,null))),F&&_&&a.createElement("li",{className:"flexify"},a.createElement("a",{href:"#",onClick:g=>{g.preventDefault(),_()},className:"ts-btn ts-btn-1"},N)),i&&a.createElement("li",{className:"flexify"},a.createElement("a",{href:"#",onClick:g=>{g.preventDefault(),i()},className:"ts-btn ts-btn-2"},C))))))))),document.body)};function K({text:e,icon:l="î —",className:s="",style:f={}}){return a.createElement("div",{className:`voxel-empty-placeholder ${s}`,style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:e?"8px":"0",background:"rgb(213 216 220 / 80%)",borderRadius:"0",color:"#666",fontSize:"13px",height:"45px",width:"100%",...f}},a.createElement("span",{className:"placeholder-icon",style:{fontFamily:"eicons",fontSize:"24px",opacity:.3,lineHeight:1,fontStyle:"normal"}},l),e&&a.createElement("span",{className:"placeholder-text",style:{opacity:.6}},e))}function G(){return window.VoxelFSEUserbar??null}function V(e){const l=window.Voxel_Config;return l?.ajax_url?`${l.ajax_url}&action=${e}`:`${l?.site_url||window.location.origin}/?vx=1&action=${e}`}function Q(){const e=G();return e?e.isLoggedIn:window.Voxel_Config?.is_logged_in??!1}function w(e,l="error"){const s=window.Voxel;s?.alert?s.alert(e,l):console.error(`[Userbar] ${l}: ${e}`)}function m(e,l){const s=G();if(s?.l10n){const v=s.l10n;if(v[e])return v[e]}return window.Voxel_Config?.l10n?.[e]??l}function te(e){return G()?.nonces?.[e]??""}function ae(e,l){const s=window.Voxel;return s?.helpers?.currencyFormat?s.helpers.currencyFormat(e,l):`$${(e/100).toFixed(2)}`}function Y(e){return!e||!e.value?null:e.library==="svg"&&e.value?React.createElement("img",{src:e.value,alt:"",style:{width:"1em",height:"1em"}}):e.library==="icon"&&e.value?React.createElement("i",{className:e.value,"aria-hidden":"true"}):null}function le({item:e,icons:l,context:s}){const[f,v]=a.useState(!1),C=a.useRef(null),N=a.useRef(null),O=G()?.unread?.notifications??0,[h,i]=a.useState(null),[_,b]=a.useState(!1),[P,z]=a.useState(!0),[B,E]=a.useState(!1),[o,A]=a.useState(1),[y,q]=a.useState(null),x=a.useRef(0),j=a.useCallback(async(n=1)=>{E(!0);try{const u=V("notifications.list"),c=await(await fetch(`${u}&pg=${n}`)).json();c.success?(i(S=>n===1?c.list:[...S||[],...c.list]),b(c.has_more)):w(c.message||m("ajaxError","An error occurred"))}catch{w(m("ajaxError","An error occurred"))}finally{z(!1),E(!1)}},[]),g=a.useCallback(()=>{s==="frontend"&&(h===null&&(i([]),N.current?.classList.add("hidden"),j(1)),v(!0))},[s,h,j]),U=a.useCallback(()=>{const n=o+1;A(n),j(n)},[o,j]),T=a.useCallback(async()=>{const n=m("confirmClear","Clear all notifications?");if(window.confirm(n))try{const u=V("notifications.clear_all"),c=await(await fetch(u)).json();c.success?i([]):w(c.message||m("ajaxError","An error occurred"))}catch{w(m("ajaxError","An error occurred"))}},[]),I=a.useCallback(()=>{q(null),requestAnimationFrame(()=>{const n=document.querySelector(".min-scroll");n&&(n.scrollTop=x.current)})},[]),L=a.useCallback(async n=>{if(n.links_to==="(details)"){const u=document.querySelector(".min-scroll");u&&(x.current=u.scrollTop),n.actions===void 0?(i(d=>d?.map(c=>c.id===n.id?{...c,seen:!0}:c)||null),H(n)):(q(n),requestAnimationFrame(()=>{const d=document.querySelector(".min-scroll");d&&(d.scrollTop=0)}))}else{i(u=>u?.map(d=>d.id===n.id?{...d,_loading:!0}:d)||null);try{const u=V("notifications.open"),c=await(await fetch(`${u}&item_id=${n.id}`)).json();c.success?(i(S=>S?.map(t=>t.id===n.id?{...t,seen:!0,_loading:!1}:t)||null),c.redirect_to&&(window.location.href=c.redirect_to)):(w(c.message||m("ajaxError","An error occurred")),i(S=>S?.map(t=>t.id===n.id?{...t,_loading:!1}:t)||null))}catch{w(m("ajaxError","An error occurred")),i(u=>u?.map(d=>d.id===n.id?{...d,_loading:!1}:d)||null)}}},[]),H=a.useCallback(async(n,u=1)=>{i(d=>d?.map(c=>c.id===n.id?{...c,_loading:!0,actions_page:u}:c)||null);try{const d=V("notifications.get_actions"),S=await(await fetch(`${d}&item_id=${n.id}&pg=${u}`)).json();if(S.success){const t={...n,actions:u===1?S.actions:[...n.actions||[],...S.actions],actions_page:u,_loading:!1,seen:!0};i(r=>r?.map(p=>p.id===n.id?t:p)||null),q(t),u===1&&requestAnimationFrame(()=>{const r=document.querySelector(".min-scroll");r&&(r.scrollTop=0)})}else w(S.message||m("ajaxError","An error occurred")),i(t=>t?.map(r=>r.id===n.id?{...r,_loading:!1,seen:!0}:r)||null)}catch{w(m("ajaxError","An error occurred")),i(d=>d?.map(c=>c.id===n.id?{...c,_loading:!1}:c)||null)}},[]),D=a.useCallback(async(n,u,d)=>{const c=d?.key||u.key;if(!c)return;const S=t=>{y&&q({...y,actions:y.actions?.map(r=>r===u?{...r,_loading:t}:r)})};S(!0);try{const t=V("notifications.run_action"),p=await(await fetch(`${t}&item_id=${n.id}&action_key=${c}&pg=${u._page||1}`)).json();if(p.success){if(p.updated_action&&y?.actions){const M=y.actions.indexOf(u);if(M!==-1){const k=[...y.actions];k[M]=p.updated_action,q({...y,actions:k})}}p.redirect_to&&(window.location.href=p.redirect_to)}else w(p.message||m("ajaxError","An error occurred"))}catch{w(m("ajaxError","An error occurred"))}finally{S(!1)}},[y]),W=n=>React.createElement("div",{key:n.id,className:`ts-notification-item ${n.seen?"":"ts-unread"} ${n._loading?"vx-pending":""}`,onClick:()=>L(n)},n.image_url&&React.createElement("div",{className:"ts-notification-image"},React.createElement("img",{src:n.image_url,alt:""})),React.createElement("div",{className:"ts-notification-body"},React.createElement("span",{className:"ts-notification-subject"},n.subject),React.createElement("span",{className:"ts-notification-time"},n.time))),Z=(n,u)=>n.type==="list-item"?React.createElement("div",{key:n.key,className:`ts-action-item ${n._loading?"vx-pending":""}`,onClick:()=>n.links_to?window.location.href=n.links_to:D(u,n)},n.image_markup&&React.createElement("div",{className:"ts-action-image",dangerouslySetInnerHTML:{__html:n.image_markup}}),React.createElement("div",{className:"ts-action-body"},n.subject&&React.createElement("span",{className:"ts-action-subject"},n.subject),n.details&&React.createElement("span",{className:"ts-action-details"},n.details)),n.actions&&n.actions.length>0&&React.createElement("div",{className:"ts-action-buttons"},n.actions.map(d=>React.createElement("button",{key:d.key,className:"ts-btn ts-btn-1",onClick:c=>{c.stopPropagation(),D(u,n,d)}},d.label)))):n.type==="button"?React.createElement("button",{key:n.key,className:`ts-btn ts-btn-1 ${n._loading?"vx-pending":""}`,onClick:()=>D(u,n)},n.label):null;return React.createElement("li",{className:`ts-notifications-wrapper elementor-repeater-item-${e._id}`},React.createElement("a",{ref:C,href:"#",onClick:n=>{n.preventDefault(),g()},role:"button","aria-label":e.notificationsTitle||"Notifications"},React.createElement("div",{className:"ts-comp-icon flexify"},Y(e.icon),s==="frontend"&&Q()&&React.createElement("span",{ref:N,className:"unread-indicator",style:{display:O>0?void 0:"none"}})),React.createElement("span",{className:"ts_comp_label"},e.notificationsTitle||"Notifications")),s==="frontend"&&React.createElement(X,{isOpen:f,popupId:`notifications-popup-${e._id}`,target:C.current,title:e.notificationsTitle||"Notifications",icon:e.icon?.value?`<i class="${e.icon.value}"></i>`:"",onClose:()=>{v(!1),q(null)},showFooter:!1,popupClass:"md-width"},React.createElement("div",{className:"ts-notifications-list min-scroll"},h&&h.length>0&&!y&&React.createElement("div",{className:"ts-notifications-header flexify"},React.createElement("button",{className:"ts-btn ts-btn-1",onClick:T},m("clearAll","Clear all"))),P&&React.createElement(K,null),y&&React.createElement("div",{className:"ts-notification-details"},React.createElement("button",{className:"ts-btn ts-btn-1 ts-back-btn",onClick:I},React.createElement("i",{className:"las la-arrow-left"}),m("back","Back")),React.createElement("div",{className:"ts-notification-content"},React.createElement("span",{className:"ts-notification-subject"},y.subject),React.createElement("span",{className:"ts-notification-time"},y.time)),y.actions&&React.createElement("div",{className:"ts-notification-actions"},y.actions.map(n=>Z(n,y))),y._loading&&React.createElement("div",{className:"ts-loader"})),!P&&!y&&React.createElement(React.Fragment,null,h&&h.length>0?React.createElement(React.Fragment,null,h.map(W),_&&React.createElement("button",{className:`ts-btn ts-btn-1 ts-load-more ${B?"vx-pending":""}`,onClick:U,disabled:B},B?React.createElement("span",{className:"ts-loader"}):m("loadMore","Load more"))):React.createElement(K,null)))))}function oe({item:e,icons:l,context:s,nonce:f}){const[v,C]=a.useState(!1),N=a.useRef(null),F=a.useRef(null),O=G(),h=f||te("chat"),i=O?.unread?.messages??!1,[_,b]=a.useState({list:null,hasMore:!1,loading:!0,loadingMore:!1,page:1}),P=a.useCallback(async(o=1)=>{b(A=>({...A,loadingMore:!0}));try{const A=V("inbox.list_chats"),y=new FormData;y.append("pg",o.toString()),h&&y.append("_wpnonce",h);const x=await(await fetch(A,{method:"POST",body:y})).json();x.success?b(j=>({...j,list:o===1?x.list:[...j.list||[],...x.list],hasMore:x.has_more,loading:!1,loadingMore:!1})):(w(x.message||m("ajaxError","An error occurred")),b(j=>({...j,loading:!1,loadingMore:!1})))}catch{w(m("ajaxError","An error occurred")),b(A=>({...A,loading:!1,loadingMore:!1}))}},[h]),z=a.useCallback(()=>{s==="frontend"&&(C(!0),_.list===null&&(b(o=>({...o,list:[]})),F.current?.classList.add("hidden"),P(1)))},[s,_.list,P]),B=a.useCallback(()=>{const o=_.page+1;b(A=>({...A,page:o})),P(o)},[_.page,P]),E=o=>React.createElement("a",{key:o.id,href:o.link,className:`ts-chat-item ${o.seen?"":"ts-unread"}`},React.createElement("div",{className:"ts-chat-avatar"},React.createElement("img",{src:o.target.avatar,alt:o.target.name})),React.createElement("div",{className:"ts-chat-body"},React.createElement("span",{className:"ts-chat-name"},o.target.name),React.createElement("span",{className:"ts-chat-excerpt"},o.excerpt),React.createElement("span",{className:"ts-chat-time"},o.time)));return React.createElement("li",{className:`ts-popup-messages elementor-repeater-item-${e._id}`},React.createElement("a",{ref:N,href:"#",onClick:o=>{o.preventDefault(),z()},role:"button","aria-label":e.messagesTitle||"Messages"},React.createElement("div",{className:"ts-comp-icon flexify"},Y(e.icon),s==="frontend"&&Q()&&React.createElement("span",{ref:F,className:"unread-indicator",style:{display:i?void 0:"none"}})),React.createElement("span",{className:"ts_comp_label"},e.messagesTitle||"Messages")),s==="frontend"&&React.createElement(X,{isOpen:v,popupId:`messages-popup-${e._id}`,target:N.current,title:e.messagesTitle||"Messages",icon:e.icon?.value?`<i class="${e.icon.value}"></i>`:"",onClose:()=>C(!1),showFooter:!1,popupClass:"md-width"},React.createElement("div",{className:"ts-chats-list min-scroll"},_.loading&&React.createElement("div",{className:"ts-empty-user-tab"},React.createElement("div",{className:"ts-loader"})),!_.loading&&React.createElement(React.Fragment,null,_.list&&_.list.length>0?React.createElement(React.Fragment,null,_.list.map(E),_.hasMore&&React.createElement("button",{className:`ts-btn ts-btn-1 ts-load-more ${_.loadingMore?"vx-pending":""}`,onClick:B,disabled:_.loadingMore},_.loadingMore?React.createElement("span",{className:"ts-loader"}):m("loadMore","Load more"))):React.createElement(K,null)))))}function ce({item:e,icons:l,context:s,nonce:f,isCartEmpty:v}){const[C,N]=a.useState(!1),F=a.useRef(null),O=a.useRef(null),h=G(),i=f||te("cart"),_=v??h?.isCartEmpty??!0,[b,P]=a.useState(!0),[z,B]=a.useState(!1),[E,o]=a.useState(null),[A,y]=a.useState(""),[q,x]=a.useState(!1),j=a.useRef(!1),g=()=>!b&&E!==null&&Object.keys(E).length>0,U=()=>z?g():Q()?!_:!!localStorage.getItem("voxel:guest_cart"),T=t=>t.product_mode==="regular"?t.value.stock?.quantity||0:t.product_mode==="variable"&&t.value.variations?.quantity||0,I=()=>{if(!g()||!E)return 0;let t=0;return Object.values(E).forEach(r=>{t+=r.pricing.total_amount}),t},L=a.useCallback(()=>{if(!E||Object.keys(E).length===0){localStorage.removeItem("voxel:guest_cart");return}const t={};Object.values(E).forEach(r=>{t[r.key]=r.value}),localStorage.setItem("voxel:guest_cart",JSON.stringify(t))},[E]),H=a.useCallback(async()=>{const t=Q(),r=t?"products.get_cart_items":"products.get_guest_cart_items";try{const p=V(r),M=new FormData;i&&M.append("_wpnonce",i),M.append("guest_cart",localStorage.getItem("voxel:guest_cart")||"");const R=await(await fetch(p,{method:"POST",body:M})).json();P(!1),B(!0),t&&localStorage.removeItem("voxel:guest_cart"),R.success?(o(Object.keys(R.items).length?R.items:{}),y(R.checkout_link),t||setTimeout(()=>L(),0)):w(R.message||m("ajaxError","An error occurred"))}catch{P(!1),B(!0),w(m("ajaxError","An error occurred"))}},[f,L]),D=a.useCallback(()=>{if(s!=="frontend")return;const t=document.querySelector(".ts-checkout");if(t){window.Voxel?.scrollTo?.(t);return}N(!0),E===null&&(o({}),H())},[s,E,H]),W=a.useCallback(async t=>{if(Q()){o(r=>r?{...r,[t.key]:{...r[t.key],_disabled:!0}}:null);try{const r=V("products.remove_cart_item"),p=new FormData;p.append("item_key",t.key),i&&p.append("_wpnonce",i);const k=await(await fetch(r,{method:"POST",body:p})).json();k.success?o(R=>{if(!R)return null;const $={...R};return delete $[t.key],$}):(o(R=>R?{...R,[t.key]:{...R[t.key],_disabled:!1}}:null),w(k.message||m("ajaxError","An error occurred")))}catch{o(r=>r?{...r,[t.key]:{...r[t.key],_disabled:!1}}:null),w(m("ajaxError","An error occurred"))}}else o(r=>{if(!r)return null;const p={...r};return delete p[t.key],p}),setTimeout(()=>L(),0)},[f,L]),Z=a.useCallback(async()=>{if(Q()){x(!0);try{const t=V("products.empty_cart"),r=new FormData;i&&r.append("_wpnonce",i);const M=await(await fetch(t,{method:"POST",body:r})).json();x(!1),M.success?o({}):w(M.message||m("ajaxError","An error occurred"))}catch{x(!1),w(m("ajaxError","An error occurred"))}}else o({}),localStorage.removeItem("voxel:guest_cart")},[f]),n=a.useCallback(async(t,r)=>{o(k=>k?{...k,[t.key]:{...k[t.key],_disabled:!0}}:null);const p=Q(),M=p?"products.update_cart_item_quantity":"products.update_guest_cart_item_quantity";try{const k=V(M),R=new FormData;R.append("item_key",t.key),R.append("item_quantity",r.toString()),p||R.append("guest_cart",localStorage.getItem("voxel:guest_cart")||""),i&&R.append("_wpnonce",i);const ee=await(await fetch(k,{method:"POST",body:R})).json();ee.success?(o(ne=>ne?{...ne,[t.key]:ee.item}:null),p||setTimeout(()=>L(),0)):w(ee.message||m("ajaxError","An error occurred"))}catch{w(m("ajaxError","An error occurred"))}finally{o(k=>k?{...k,[t.key]:{...k[t.key],_disabled:!1}}:null)}},[f,L]),u=a.useCallback(t=>{const r=T(t)+1;n(t,r)},[n]),d=a.useCallback(t=>{const r=T(t)-1;r<=0?W(t):n(t,r)},[n,W]),c=t=>{if(!E)return!1;let r=t.quantity.max;for(const p of Object.values(E))if(p.stock_id===t.stock_id&&(r-=T(p),r<=0))return!1;return!0};a.useEffect(()=>{if(s!=="frontend")return;j.current||(j.current=!0,Object.defineProperty(window,"VX_Cart",{configurable:!0,get:()=>({open:D,getItems:H,hasItems:g,getSubtotal:I,get loading(){return b},get loaded(){return z},get items(){return E},get checkout_link(){return A}})}));const t=()=>{H(),O.current?.classList.add("ts-cart-update"),setTimeout(()=>O.current?.classList.remove("ts-cart-update"),500)};return document.addEventListener("voxel:added_cart_item",t),()=>{document.removeEventListener("voxel:added_cart_item",t)}},[s,H,D,g,I,b,z,E,A]);const S=t=>React.createElement("div",{key:t.key,className:`ts-cart-item ${t._disabled?"vx-pending":""}`},React.createElement("div",{className:"ts-cart-item-image"},React.createElement("a",{href:t.link},React.createElement("img",{src:t.logo,alt:t.title}))),React.createElement("div",{className:"ts-cart-item-body"},React.createElement("a",{href:t.link,className:"ts-cart-item-title"},t.title),t.subtitle&&React.createElement("span",{className:"ts-cart-item-subtitle"},t.subtitle),React.createElement("span",{className:"ts-cart-item-price"},ae(t.pricing.total_amount,t.pricing._currency))),React.createElement("div",{className:"ts-cart-item-actions"},t.quantity.enabled&&React.createElement("div",{className:"ts-quantity-control"},React.createElement("button",{className:"ts-qty-btn ts-qty-minus",onClick:()=>d(t),disabled:t._disabled},React.createElement("i",{className:"las la-minus"})),React.createElement("span",{className:"ts-qty-value"},T(t)),React.createElement("button",{className:"ts-qty-btn ts-qty-plus",onClick:()=>u(t),disabled:t._disabled||!c(t)},React.createElement("i",{className:"las la-plus"}))),React.createElement("button",{className:"ts-remove-btn",onClick:()=>W(t),disabled:t._disabled},React.createElement("i",{className:"las la-times"}))));return React.createElement("li",{className:`ts-popup-cart elementor-repeater-item-${e._id}`},React.createElement("a",{ref:F,href:"#",onClick:t=>{t.preventDefault(),D()},role:"button","aria-label":e.cartTitle||"Cart"},React.createElement("div",{ref:O,className:"ts-comp-icon flexify"},Y(e.icon),s==="frontend"&&U()&&React.createElement("span",{className:"unread-indicator"})),React.createElement("span",{className:"ts_comp_label"},e.cartTitle||"Cart")),s==="frontend"&&React.createElement(X,{isOpen:C,popupId:`cart-popup-${e._id}`,target:F.current,title:e.cartTitle||"Cart",icon:e.icon?.value?`<i class="${e.icon.value}"></i>`:"",onClose:()=>N(!1),showFooter:!1,popupClass:"lg-width ts-cart-popup"},React.createElement("div",{className:"ts-cart-content min-scroll"},b&&React.createElement(K,null),!b&&React.createElement(React.Fragment,null,g()&&E?React.createElement(React.Fragment,null,React.createElement("div",{className:"ts-cart-items"},Object.values(E).map(S)),React.createElement("div",{className:"ts-cart-footer"},React.createElement("div",{className:"ts-cart-subtotal"},React.createElement("span",null,m("subtotal","Subtotal")),React.createElement("span",{className:"ts-subtotal-amount"},ae(I()))),React.createElement("div",{className:"ts-cart-actions"},React.createElement("button",{className:`ts-btn ts-btn-1 ts-empty-cart ${q?"vx-pending":""}`,onClick:Z,disabled:q},m("emptyCart","Empty cart")),A&&React.createElement("a",{href:A,className:"ts-btn ts-btn-2"},m("checkout","Checkout"))))):React.createElement(K,null)))))}function ie({item:e,icons:l,context:s,hideChevron:f}){const[v,C]=a.useState(!1),N=a.useRef(null),O=G()?.user??window.VoxelFSEUser,h=O?.displayName||"User",i=O?.avatarUrl||"",_=a.useCallback(()=>{s==="frontend"&&C(!0)},[s]);return React.createElement("li",{className:`ts-popup-component ts-user-area-avatar elementor-repeater-item-${e._id}`},React.createElement("a",{ref:N,href:"#",onClick:b=>{b.preventDefault(),_()},role:"button","aria-label":h},React.createElement("div",{className:"ts-comp-icon flexify"},s==="editor"?React.createElement("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"#ccc",display:"flex",alignItems:"center",justifyContent:"center"}},React.createElement("i",{className:"las la-user"})):i?React.createElement("img",{src:i,alt:h,style:{width:"32px",height:"32px",borderRadius:"50%"}}):React.createElement("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"#ccc",display:"flex",alignItems:"center",justifyContent:"center"}},React.createElement("i",{className:"las la-user"}))),React.createElement("span",{className:"ts_comp_label"},h),!f&&React.createElement("div",{className:"ts-down-icon"})),s==="frontend"&&React.createElement(X,{isOpen:v,popupId:`user-menu-popup-${e._id}`,target:N.current,title:h,icon:i?`<img src="${i}" alt="" style="width:24px;height:24px;border-radius:50%;">`:"",onClose:()=>C(!1),showFooter:!1},React.createElement("div",{className:"ts-term-dropdown ts-md-group ts-multilevel-dropdown"},React.createElement("p",{style:{padding:"16px",textAlign:"center",color:"#666"}},"Menu not configured"))))}function ue({item:e,icons:l,context:s}){const[f,v]=a.useState(!1),C=a.useRef(null),N=a.useCallback(()=>{s==="frontend"&&v(!0)},[s]);return React.createElement("li",{className:`ts-popup-component elementor-repeater-item-${e._id}`},React.createElement("a",{ref:C,href:"#",onClick:F=>{F.preventDefault(),N()},role:"button","aria-label":e.wpMenuTitle||"Menu"},React.createElement("div",{className:"ts-comp-icon flexify"},Y(e.icon)),React.createElement("span",{className:"ts_comp_label"},e.wpMenuTitle||"Menu")),s==="frontend"&&React.createElement(X,{isOpen:f,popupId:`wp-menu-popup-${e._id}`,target:C.current,title:e.wpMenuTitle||"Menu",icon:e.icon?.value?`<i class="${e.icon.value}"></i>`:"",onClose:()=>v(!1),showFooter:!1},React.createElement("div",{className:"ts-term-dropdown ts-md-group ts-multilevel-dropdown"},React.createElement("p",{style:{padding:"16px",textAlign:"center",color:"#666"}},"Menu not configured"))))}function de({item:e,context:l}){const s={href:e.componentUrl.url||"#"};return e.componentUrl.is_external&&(s.target="_blank"),e.componentUrl.nofollow&&(s.rel="nofollow"),React.createElement("li",{className:`elementor-repeater-item-${e._id}`},React.createElement("a",{...s},React.createElement("div",{className:"ts-comp-icon flexify"},Y(e.icon)),React.createElement("span",{className:"ts_comp_label"},e.componentTitle||"Link")))}function me(e,l,s,f,v,C){switch(e.componentType){case"notifications":return React.createElement(le,{key:e._id,item:e,icons:l,context:s});case"messages":return React.createElement(oe,{key:e._id,item:e,icons:l,context:s,nonce:v});case"cart":return React.createElement(ce,{key:e._id,item:e,icons:l,context:s,nonce:v,isCartEmpty:C});case"user_menu":return React.createElement(ie,{key:e._id,item:e,icons:l,context:s,hideChevron:f});case"select_wp_menu":return React.createElement(ue,{key:e._id,item:e,icons:l,context:s});case"link":return React.createElement(de,{key:e._id,item:e,context:s});default:return null}}function pe({attributes:e,context:l,config:s}){const f=s?.items||e.items,v=s?.icons||e.icons,C=s?.settings||{itemsAlign:e.itemsAlign,verticalOrientation:e.verticalOrientation,verticalOrientationTablet:e.verticalOrientationTablet,verticalOrientationMobile:e.verticalOrientationMobile,itemContentAlign:e.itemContentAlign,hideChevron:e.hideChevron,customPopupEnable:e.customPopupEnable},N=window.VoxelFSEUserbar,F=N?.nonce,O=N?.is_cart_empty??!0,h={justifyContent:C.itemsAlign};return!f||f.length===0?React.createElement("div",{className:"ts-user-area"},React.createElement("div",{className:"voxel-fse-empty-state",style:{padding:"20px",textAlign:"center",background:"#f5f5f5",borderRadius:"4px"}},React.createElement("p",{style:{margin:0,color:"#666"}},l==="editor"?"Add components using the sidebar panel":"No user bar components configured"))):React.createElement(React.Fragment,null,l==="frontend"&&s&&React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(s)}}),React.createElement("ul",{className:"flexify simplify-ul user-area-menu",style:h},f.map(i=>me(i,v,l,C.hideChevron,F,O))))}function fe(e){const l=e.querySelector("script.vxconfig");if(l&&l.textContent)try{return JSON.parse(l.textContent)}catch(s){console.error("Failed to parse vxconfig:",s)}return null}function ge(e){return{blockId:"",items:e.items||[],icons:e.icons||{downArrow:{library:"",value:""},rightArrow:{library:"",value:""},leftArrow:{library:"",value:""},close:{library:"",value:""},trash:{library:"",value:""},inbox:{library:"",value:""},loadMore:{library:"",value:""}},itemsAlign:e.settings?.itemsAlign||"left",verticalOrientation:e.settings?.verticalOrientation||!1,verticalOrientationTablet:e.settings?.verticalOrientationTablet||!1,verticalOrientationMobile:e.settings?.verticalOrientationMobile||!1,itemContentAlign:e.settings?.itemContentAlign||"left",itemGap:0,itemMargin:{top:"",right:"",bottom:"",left:""},itemPadding:{top:"",right:"",bottom:"",left:""},itemBackground:"",itemBackgroundHover:"#fff",itemBorderRadius:0,itemContentGap:0,iconContainerSize:40,iconContainerRadius:40,iconContainerBackground:"",iconContainerBackgroundHover:"",iconSize:20,iconColor:"",iconColorHover:"",unreadIndicatorColor:"",unreadIndicatorMargin:0,unreadIndicatorSize:8,avatarSize:32,avatarRadius:50,labelTypography:{},labelColor:"",labelColorHover:"",chevronColor:"",chevronColorHover:"",hideChevron:e.settings?.hideChevron||!1,customPopupEnable:e.settings?.customPopupEnable||!1,popupBackdropColor:"",popupPointerEvents:!1,popupBoxShadow:{},popupTopMargin:0,popupMaxHeight:0}}function Ee({config:e}){const l=ge(e);return React.createElement(pe,{attributes:l,context:"frontend",config:e})}function J(){document.querySelectorAll(".voxel-fse-userbar").forEach(l=>{if(l.dataset.hydrated==="true")return;const s=fe(l);if(!s){console.error("No vxconfig found for userbar block");return}l.dataset.hydrated="true";const f=l.querySelector(".voxel-fse-block-placeholder");f&&f.remove(),se.createRoot(l).render(React.createElement(Ee,{config:s}))})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",J):J(),window.addEventListener("turbo:load",J),window.addEventListener("pjax:complete",J),document.addEventListener("voxel:markup-update",J),window.render_notifications=()=>{J()},window.render_popup_messages=()=>{J()},window.render_voxel_cart=()=>{J()}})(ReactDOM,React,ReactDOM);
