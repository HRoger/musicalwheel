(function($,a,ee){"use strict";const G=({isOpen:e,popupId:l,target:s,title:i="",icon:w="",saveLabel:k="Save",clearLabel:C="Clear",clearButton:h=!0,showHeader:o=!0,showFooter:x=!0,onSave:M,onClear:P,onClose:L,children:b,popupClass:c="",minWidth:R})=>{const U=a.useRef(null),g=a.useRef(null),[S,F]=a.useState({}),T=a.useRef(""),I=a.useCallback(()=>{if(!g.current||!s||!U.current)return;const y=s,A=U.current,j=g.current,q=document.body.clientWidth,O=y.getBoundingClientRect(),z=y.offsetWidth,D={left:O.left+window.pageXOffset,top:O.top+window.pageYOffset},n=A.getBoundingClientRect(),m=window.getComputedStyle(j),p=parseFloat(m.minWidth)||0,u=R||p,t=Math.min(1140,q-40),r=Math.max(O.width,u||t),d=D.left+z/2>q/2+1;let E;d?E=D.left-r+z:E=D.left,E<0&&(E=10),E+r>q&&(E=q-r-10);let N=D.top+O.height;const v=window.innerHeight;O.bottom+n.height>v&&O.top-n.height>=0&&(N=D.top-n.height);const W={top:`${N}px`,left:`${E}px`,width:`${r}px`,position:"absolute"},J=JSON.stringify(W);J!==T.current&&(T.current=J,F(W))},[s,R]);if(a.useEffect(()=>{if(!e)return;const y=A=>{A.key==="Escape"&&L()};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[e,L]),a.useEffect(()=>{if(!e)return;const y=j=>{const q=j.target;g.current?.contains(q)||L()},A=requestAnimationFrame(()=>{document.addEventListener("mousedown",y)});return()=>{cancelAnimationFrame(A),document.removeEventListener("mousedown",y)}},[e,L]),a.useEffect(()=>{if(!e)return;requestAnimationFrame(()=>{requestAnimationFrame(()=>{I()})});const y=()=>I();window.addEventListener("scroll",y,!0);const A=()=>I();window.addEventListener("resize",A,!0);let j=null;return g.current&&(j=new ResizeObserver(()=>{requestAnimationFrame(()=>I())}),j.observe(g.current)),()=>{window.removeEventListener("scroll",y,!0),window.removeEventListener("resize",A,!0),j?.disconnect()}},[e,I]),!e)return null;const V=()=>a.createElement("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M14 1.41L12.59 0L7 5.59L1.41 0L0 1.41L5.59 7L0 12.59L1.41 14L7 8.41L12.59 14L14 12.59L8.41 7L14 1.41Z",fill:"currentColor"}));return ee.createPortal(a.createElement("div",{className:`elementor vx-popup ${c}`.trim()},a.createElement("div",{className:"ts-popup-root elementor-element"},a.createElement("div",{ref:U,className:"ts-form elementor-element",style:S},a.createElement("div",{className:"ts-field-popup-container"},a.createElement("div",{id:l,ref:g,className:"ts-field-popup triggers-blur"},o&&a.createElement("div",{className:"ts-popup-head flexify ts-sticky-top"},a.createElement("div",{className:"ts-popup-name flexify"},w&&a.createElement("span",{dangerouslySetInnerHTML:{__html:w}}),a.createElement("span",null,i)),a.createElement("ul",{className:"flexify simplify-ul"},a.createElement("li",{className:"flexify ts-popup-close"},a.createElement("a",{href:"#",onClick:y=>{y.preventDefault(),L()},className:"ts-icon-btn","aria-label":"Close"},a.createElement(V,null))))),a.createElement("div",{className:"ts-popup-content-wrapper min-scroll"},b),x&&a.createElement("div",{className:"ts-popup-controller"},a.createElement("ul",{className:"flexify simplify-ul"},a.createElement("li",{className:"flexify ts-popup-close"},a.createElement("a",{href:"#",onClick:y=>{y.preventDefault(),L()},className:"ts-icon-btn","aria-label":"Close"},a.createElement(V,null))),h&&P&&a.createElement("li",{className:"flexify"},a.createElement("a",{href:"#",onClick:y=>{y.preventDefault(),P()},className:"ts-btn ts-btn-1"},C)),M&&a.createElement("li",{className:"flexify"},a.createElement("a",{href:"#",onClick:y=>{y.preventDefault(),M()},className:"ts-btn ts-btn-2"},k))))))))),document.body)};function Q({text:e,icon:l="î —",className:s="",style:i={}}){return a.createElement("div",{className:`voxel-empty-placeholder ${s}`,style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:e?"8px":"0",background:"rgb(213 216 220 / 80%)",borderRadius:"0",color:"#666",fontSize:"13px",height:"45px",...i}},a.createElement("span",{className:"placeholder-icon",style:{fontFamily:"eicons",fontSize:"24px",opacity:.3,lineHeight:1,fontStyle:"normal"}},l),e&&a.createElement("span",{className:"placeholder-text",style:{opacity:.6}},e))}function B(e){const l=window.Voxel_Config;return l?.ajax_url?`${l.ajax_url}&action=${e}`:`${l?.site_url||window.location.origin}/?vx=1&action=${e}`}function X(){return window.Voxel_Config?.is_logged_in??!1}function _(e,l="error"){const s=window.Voxel;s?.alert?s.alert(e,l):console.error(`[Userbar] ${l}: ${e}`)}function f(e,l){return window.Voxel_Config?.l10n?.[e]??l}function Y(e,l){const s=window.Voxel;return s?.helpers?.currencyFormat?s.helpers.currencyFormat(e,l):`$${(e/100).toFixed(2)}`}function K(e){return!e||!e.value?null:e.library==="svg"&&e.value?React.createElement("img",{src:e.value,alt:"",style:{width:"1em",height:"1em"}}):e.library==="icon"&&e.value?React.createElement("i",{className:e.value,"aria-hidden":"true"}):null}function te({item:e,icons:l,context:s}){const[i,w]=a.useState(!1),k=a.useRef(null),C=a.useRef(null),[h,o]=a.useState(null),[x,M]=a.useState(!1),[P,L]=a.useState(!0),[b,c]=a.useState(!1),[R,U]=a.useState(1),[g,S]=a.useState(null),F=a.useRef(0),T=a.useCallback(async(n=1)=>{c(!0);try{const m=B("notifications.list"),u=await(await fetch(`${m}&pg=${n}`)).json();u.success?(o(t=>n===1?u.list:[...t||[],...u.list]),M(u.has_more)):_(u.message||f("ajaxError","An error occurred"))}catch{_(f("ajaxError","An error occurred"))}finally{L(!1),c(!1)}},[]),I=a.useCallback(()=>{s==="frontend"&&(h===null&&(o([]),C.current?.classList.add("hidden"),T(1)),w(!0))},[s,h,T]),V=a.useCallback(()=>{const n=R+1;U(n),T(n)},[R,T]),y=a.useCallback(async()=>{const n=f("confirmClear","Clear all notifications?");if(window.confirm(n))try{const m=B("notifications.clear_all"),u=await(await fetch(m)).json();u.success?o([]):_(u.message||f("ajaxError","An error occurred"))}catch{_(f("ajaxError","An error occurred"))}},[]),A=a.useCallback(()=>{S(null),requestAnimationFrame(()=>{const n=document.querySelector(".min-scroll");n&&(n.scrollTop=F.current)})},[]),j=a.useCallback(async n=>{if(n.links_to==="(details)"){const m=document.querySelector(".min-scroll");m&&(F.current=m.scrollTop),n.actions===void 0?(o(p=>p?.map(u=>u.id===n.id?{...u,seen:!0}:u)||null),q(n)):(S(n),requestAnimationFrame(()=>{const p=document.querySelector(".min-scroll");p&&(p.scrollTop=0)}))}else{o(m=>m?.map(p=>p.id===n.id?{...p,_loading:!0}:p)||null);try{const m=B("notifications.open"),u=await(await fetch(`${m}&item_id=${n.id}`)).json();u.success?(o(t=>t?.map(r=>r.id===n.id?{...r,seen:!0,_loading:!1}:r)||null),u.redirect_to&&(window.location.href=u.redirect_to)):(_(u.message||f("ajaxError","An error occurred")),o(t=>t?.map(r=>r.id===n.id?{...r,_loading:!1}:r)||null))}catch{_(f("ajaxError","An error occurred")),o(m=>m?.map(p=>p.id===n.id?{...p,_loading:!1}:p)||null)}}},[]),q=a.useCallback(async(n,m=1)=>{o(p=>p?.map(u=>u.id===n.id?{...u,_loading:!0,actions_page:m}:u)||null);try{const p=B("notifications.get_actions"),t=await(await fetch(`${p}&item_id=${n.id}&pg=${m}`)).json();if(t.success){const r={...n,actions:m===1?t.actions:[...n.actions||[],...t.actions],actions_page:m,_loading:!1,seen:!0};o(d=>d?.map(E=>E.id===n.id?r:E)||null),S(r),m===1&&requestAnimationFrame(()=>{const d=document.querySelector(".min-scroll");d&&(d.scrollTop=0)})}else _(t.message||f("ajaxError","An error occurred")),o(r=>r?.map(d=>d.id===n.id?{...d,_loading:!1,seen:!0}:d)||null)}catch{_(f("ajaxError","An error occurred")),o(p=>p?.map(u=>u.id===n.id?{...u,_loading:!1}:u)||null)}},[]),O=a.useCallback(async(n,m,p)=>{const u=p?.key||m.key;if(!u)return;const t=r=>{g&&S({...g,actions:g.actions?.map(d=>d===m?{...d,_loading:r}:d)})};t(!0);try{const r=B("notifications.run_action"),E=await(await fetch(`${r}&item_id=${n.id}&action_key=${u}&pg=${m._page||1}`)).json();if(E.success){if(E.updated_action&&g?.actions){const N=g.actions.indexOf(m);if(N!==-1){const v=[...g.actions];v[N]=E.updated_action,S({...g,actions:v})}}E.redirect_to&&(window.location.href=E.redirect_to)}else _(E.message||f("ajaxError","An error occurred"))}catch{_(f("ajaxError","An error occurred"))}finally{t(!1)}},[g]),z=n=>React.createElement("div",{key:n.id,className:`ts-notification-item ${n.seen?"":"ts-unread"} ${n._loading?"vx-pending":""}`,onClick:()=>j(n)},n.image_url&&React.createElement("div",{className:"ts-notification-image"},React.createElement("img",{src:n.image_url,alt:""})),React.createElement("div",{className:"ts-notification-body"},React.createElement("span",{className:"ts-notification-subject"},n.subject),React.createElement("span",{className:"ts-notification-time"},n.time))),D=(n,m)=>n.type==="list-item"?React.createElement("div",{key:n.key,className:`ts-action-item ${n._loading?"vx-pending":""}`,onClick:()=>n.links_to?window.location.href=n.links_to:O(m,n)},n.image_markup&&React.createElement("div",{className:"ts-action-image",dangerouslySetInnerHTML:{__html:n.image_markup}}),React.createElement("div",{className:"ts-action-body"},n.subject&&React.createElement("span",{className:"ts-action-subject"},n.subject),n.details&&React.createElement("span",{className:"ts-action-details"},n.details)),n.actions&&n.actions.length>0&&React.createElement("div",{className:"ts-action-buttons"},n.actions.map(p=>React.createElement("button",{key:p.key,className:"ts-btn ts-btn-1",onClick:u=>{u.stopPropagation(),O(m,n,p)}},p.label)))):n.type==="button"?React.createElement("button",{key:n.key,className:`ts-btn ts-btn-1 ${n._loading?"vx-pending":""}`,onClick:()=>O(m,n)},n.label):null;return React.createElement("li",{className:`ts-notifications-wrapper elementor-repeater-item-${e._id}`},React.createElement("a",{ref:k,href:"#",onClick:n=>{n.preventDefault(),I()},role:"button","aria-label":e.notificationsTitle||"Notifications"},React.createElement("div",{className:"ts-comp-icon flexify"},K(e.icon),s==="frontend"&&React.createElement("span",{ref:C,className:"unread-indicator",style:{display:"none"}})),React.createElement("span",{className:"ts_comp_label"},e.notificationsTitle||"Notifications")),s==="frontend"&&React.createElement(G,{isOpen:i,popupId:`notifications-popup-${e._id}`,target:k.current,title:e.notificationsTitle||"Notifications",icon:e.icon?.value?`<i class="${e.icon.value}"></i>`:"",onClose:()=>{w(!1),S(null)},showFooter:!1,popupClass:"md-width"},React.createElement("div",{className:"ts-notifications-list min-scroll"},h&&h.length>0&&!g&&React.createElement("div",{className:"ts-notifications-header flexify"},React.createElement("button",{className:"ts-btn ts-btn-1",onClick:y},f("clearAll","Clear all"))),P&&React.createElement(Q,null),g&&React.createElement("div",{className:"ts-notification-details"},React.createElement("button",{className:"ts-btn ts-btn-1 ts-back-btn",onClick:A},React.createElement("i",{className:"las la-arrow-left"}),f("back","Back")),React.createElement("div",{className:"ts-notification-content"},React.createElement("span",{className:"ts-notification-subject"},g.subject),React.createElement("span",{className:"ts-notification-time"},g.time)),g.actions&&React.createElement("div",{className:"ts-notification-actions"},g.actions.map(n=>D(n,g))),g._loading&&React.createElement("div",{className:"ts-loader"})),!P&&!g&&React.createElement(React.Fragment,null,h&&h.length>0?React.createElement(React.Fragment,null,h.map(z),x&&React.createElement("button",{className:`ts-btn ts-btn-1 ts-load-more ${b?"vx-pending":""}`,onClick:V,disabled:b},b?React.createElement("span",{className:"ts-loader"}):f("loadMore","Load more"))):React.createElement(Q,null)))))}function ae({item:e,icons:l,context:s,nonce:i}){const[w,k]=a.useState(!1),C=a.useRef(null),h=a.useRef(null),[o,x]=a.useState({list:null,hasMore:!1,loading:!0,loadingMore:!1,page:1}),M=a.useCallback(async(c=1)=>{x(R=>({...R,loadingMore:!0}));try{const R=B("inbox.list_chats"),U=new FormData;U.append("pg",c.toString()),i&&U.append("_wpnonce",i);const S=await(await fetch(R,{method:"POST",body:U})).json();S.success?x(F=>({...F,list:c===1?S.list:[...F.list||[],...S.list],hasMore:S.has_more,loading:!1,loadingMore:!1})):(_(S.message||f("ajaxError","An error occurred")),x(F=>({...F,loading:!1,loadingMore:!1})))}catch{_(f("ajaxError","An error occurred")),x(R=>({...R,loading:!1,loadingMore:!1}))}},[i]),P=a.useCallback(()=>{s==="frontend"&&(k(!0),o.list===null&&(x(c=>({...c,list:[]})),h.current?.classList.add("hidden"),M(1)))},[s,o.list,M]),L=a.useCallback(()=>{const c=o.page+1;x(R=>({...R,page:c})),M(c)},[o.page,M]),b=c=>React.createElement("a",{key:c.id,href:c.link,className:`ts-chat-item ${c.seen?"":"ts-unread"}`},React.createElement("div",{className:"ts-chat-avatar"},React.createElement("img",{src:c.target.avatar,alt:c.target.name})),React.createElement("div",{className:"ts-chat-body"},React.createElement("span",{className:"ts-chat-name"},c.target.name),React.createElement("span",{className:"ts-chat-excerpt"},c.excerpt),React.createElement("span",{className:"ts-chat-time"},c.time)));return React.createElement("li",{className:`ts-popup-messages elementor-repeater-item-${e._id}`},React.createElement("a",{ref:C,href:"#",onClick:c=>{c.preventDefault(),P()},role:"button","aria-label":e.messagesTitle||"Messages"},React.createElement("div",{className:"ts-comp-icon flexify"},K(e.icon),s==="frontend"&&React.createElement("span",{ref:h,className:"unread-indicator",style:{display:"none"}})),React.createElement("span",{className:"ts_comp_label"},e.messagesTitle||"Messages")),s==="frontend"&&React.createElement(G,{isOpen:w,popupId:`messages-popup-${e._id}`,target:C.current,title:e.messagesTitle||"Messages",icon:e.icon?.value?`<i class="${e.icon.value}"></i>`:"",onClose:()=>k(!1),showFooter:!1,popupClass:"md-width"},React.createElement("div",{className:"ts-chats-list min-scroll"},o.loading&&React.createElement("div",{className:"ts-empty-user-tab"},React.createElement("div",{className:"ts-loader"})),!o.loading&&React.createElement(React.Fragment,null,o.list&&o.list.length>0?React.createElement(React.Fragment,null,o.list.map(b),o.hasMore&&React.createElement("button",{className:`ts-btn ts-btn-1 ts-load-more ${o.loadingMore?"vx-pending":""}`,onClick:L,disabled:o.loadingMore},o.loadingMore?React.createElement("span",{className:"ts-loader"}):f("loadMore","Load more"))):React.createElement(Q,null)))))}function ne({item:e,icons:l,context:s,nonce:i,isCartEmpty:w}){const[k,C]=a.useState(!1),h=a.useRef(null),o=a.useRef(null),[x,M]=a.useState(!0),[P,L]=a.useState(!1),[b,c]=a.useState(null),[R,U]=a.useState(""),[g,S]=a.useState(!1),F=a.useRef(!1),T=()=>!x&&b!==null&&Object.keys(b).length>0,I=()=>P?T():X()?!w:!!localStorage.getItem("voxel:guest_cart"),V=t=>t.product_mode==="regular"?t.value.stock?.quantity||0:t.product_mode==="variable"&&t.value.variations?.quantity||0,y=()=>{if(!T()||!b)return 0;let t=0;return Object.values(b).forEach(r=>{t+=r.pricing.total_amount}),t},A=a.useCallback(()=>{if(!b||Object.keys(b).length===0){localStorage.removeItem("voxel:guest_cart");return}const t={};Object.values(b).forEach(r=>{t[r.key]=r.value}),localStorage.setItem("voxel:guest_cart",JSON.stringify(t))},[b]),j=a.useCallback(async()=>{const t=X(),r=t?"products.get_cart_items":"products.get_guest_cart_items";try{const d=B(r),E=new FormData;i&&E.append("_wpnonce",i),E.append("guest_cart",localStorage.getItem("voxel:guest_cart")||"");const v=await(await fetch(d,{method:"POST",body:E})).json();M(!1),L(!0),t&&localStorage.removeItem("voxel:guest_cart"),v.success?(c(Object.keys(v.items).length?v.items:{}),U(v.checkout_link),t||setTimeout(()=>A(),0)):_(v.message||f("ajaxError","An error occurred"))}catch{M(!1),L(!0),_(f("ajaxError","An error occurred"))}},[i,A]),q=a.useCallback(()=>{if(s!=="frontend")return;const t=document.querySelector(".ts-checkout");if(t){window.Voxel?.scrollTo?.(t);return}C(!0),b===null&&(c({}),j())},[s,b,j]),O=a.useCallback(async t=>{if(X()){c(r=>r?{...r,[t.key]:{...r[t.key],_disabled:!0}}:null);try{const r=B("products.remove_cart_item"),d=new FormData;d.append("item_key",t.key),i&&d.append("_wpnonce",i);const N=await(await fetch(r,{method:"POST",body:d})).json();N.success?c(v=>{if(!v)return null;const W={...v};return delete W[t.key],W}):(c(v=>v?{...v,[t.key]:{...v[t.key],_disabled:!1}}:null),_(N.message||f("ajaxError","An error occurred")))}catch{c(r=>r?{...r,[t.key]:{...r[t.key],_disabled:!1}}:null),_(f("ajaxError","An error occurred"))}}else c(r=>{if(!r)return null;const d={...r};return delete d[t.key],d}),setTimeout(()=>A(),0)},[i,A]),z=a.useCallback(async()=>{if(X()){S(!0);try{const t=B("products.empty_cart"),r=new FormData;i&&r.append("_wpnonce",i);const E=await(await fetch(t,{method:"POST",body:r})).json();S(!1),E.success?c({}):_(E.message||f("ajaxError","An error occurred"))}catch{S(!1),_(f("ajaxError","An error occurred"))}}else c({}),localStorage.removeItem("voxel:guest_cart")},[i]),D=a.useCallback(async(t,r)=>{c(N=>N?{...N,[t.key]:{...N[t.key],_disabled:!0}}:null);const d=X(),E=d?"products.update_cart_item_quantity":"products.update_guest_cart_item_quantity";try{const N=B(E),v=new FormData;v.append("item_key",t.key),v.append("item_quantity",r.toString()),d||v.append("guest_cart",localStorage.getItem("voxel:guest_cart")||""),i&&v.append("_wpnonce",i);const J=await(await fetch(N,{method:"POST",body:v})).json();J.success?(c(Z=>Z?{...Z,[t.key]:J.item}:null),d||setTimeout(()=>A(),0)):_(J.message||f("ajaxError","An error occurred"))}catch{_(f("ajaxError","An error occurred"))}finally{c(N=>N?{...N,[t.key]:{...N[t.key],_disabled:!1}}:null)}},[i,A]),n=a.useCallback(t=>{const r=V(t)+1;D(t,r)},[D]),m=a.useCallback(t=>{const r=V(t)-1;r<=0?O(t):D(t,r)},[D,O]),p=t=>{if(!b)return!1;let r=t.quantity.max;for(const d of Object.values(b))if(d.stock_id===t.stock_id&&(r-=V(d),r<=0))return!1;return!0};a.useEffect(()=>{if(s!=="frontend")return;F.current||(F.current=!0,Object.defineProperty(window,"VX_Cart",{configurable:!0,get:()=>({open:q,getItems:j,hasItems:T,getSubtotal:y,get loading(){return x},get loaded(){return P},get items(){return b},get checkout_link(){return R}})}));const t=()=>{j(),o.current?.classList.add("ts-cart-update"),setTimeout(()=>o.current?.classList.remove("ts-cart-update"),500)};return document.addEventListener("voxel:added_cart_item",t),()=>{document.removeEventListener("voxel:added_cart_item",t)}},[s,j,q,T,y,x,P,b,R]);const u=t=>React.createElement("div",{key:t.key,className:`ts-cart-item ${t._disabled?"vx-pending":""}`},React.createElement("div",{className:"ts-cart-item-image"},React.createElement("a",{href:t.link},React.createElement("img",{src:t.logo,alt:t.title}))),React.createElement("div",{className:"ts-cart-item-body"},React.createElement("a",{href:t.link,className:"ts-cart-item-title"},t.title),t.subtitle&&React.createElement("span",{className:"ts-cart-item-subtitle"},t.subtitle),React.createElement("span",{className:"ts-cart-item-price"},Y(t.pricing.total_amount,t.pricing._currency))),React.createElement("div",{className:"ts-cart-item-actions"},t.quantity.enabled&&React.createElement("div",{className:"ts-quantity-control"},React.createElement("button",{className:"ts-qty-btn ts-qty-minus",onClick:()=>m(t),disabled:t._disabled},React.createElement("i",{className:"las la-minus"})),React.createElement("span",{className:"ts-qty-value"},V(t)),React.createElement("button",{className:"ts-qty-btn ts-qty-plus",onClick:()=>n(t),disabled:t._disabled||!p(t)},React.createElement("i",{className:"las la-plus"}))),React.createElement("button",{className:"ts-remove-btn",onClick:()=>O(t),disabled:t._disabled},React.createElement("i",{className:"las la-times"}))));return React.createElement("li",{className:`ts-popup-cart elementor-repeater-item-${e._id}`},React.createElement("a",{ref:h,href:"#",onClick:t=>{t.preventDefault(),q()},role:"button","aria-label":e.cartTitle||"Cart"},React.createElement("div",{ref:o,className:"ts-comp-icon flexify"},K(e.icon),s==="frontend"&&I()&&React.createElement("span",{className:"unread-indicator"})),React.createElement("span",{className:"ts_comp_label"},e.cartTitle||"Cart")),s==="frontend"&&React.createElement(G,{isOpen:k,popupId:`cart-popup-${e._id}`,target:h.current,title:e.cartTitle||"Cart",icon:e.icon?.value?`<i class="${e.icon.value}"></i>`:"",onClose:()=>C(!1),showFooter:!1,popupClass:"lg-width ts-cart-popup"},React.createElement("div",{className:"ts-cart-content min-scroll"},x&&React.createElement(Q,null),!x&&React.createElement(React.Fragment,null,T()&&b?React.createElement(React.Fragment,null,React.createElement("div",{className:"ts-cart-items"},Object.values(b).map(u)),React.createElement("div",{className:"ts-cart-footer"},React.createElement("div",{className:"ts-cart-subtotal"},React.createElement("span",null,f("subtotal","Subtotal")),React.createElement("span",{className:"ts-subtotal-amount"},Y(y()))),React.createElement("div",{className:"ts-cart-actions"},React.createElement("button",{className:`ts-btn ts-btn-1 ts-empty-cart ${g?"vx-pending":""}`,onClick:z,disabled:g},f("emptyCart","Empty cart")),R&&React.createElement("a",{href:R,className:"ts-btn ts-btn-2"},f("checkout","Checkout"))))):React.createElement(Q,null)))))}function se({item:e,icons:l,context:s,hideChevron:i}){const[w,k]=a.useState(!1),C=a.useRef(null),h=a.useCallback(()=>{s==="frontend"&&k(!0)},[s]);return React.createElement("li",{className:`ts-popup-component ts-user-area-avatar elementor-repeater-item-${e._id}`},React.createElement("a",{ref:C,href:"#",onClick:o=>{o.preventDefault(),h()},role:"button","aria-label":"User menu"},React.createElement("div",{className:"ts-comp-icon flexify"},s==="editor"?React.createElement("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"#ccc",display:"flex",alignItems:"center",justifyContent:"center"}},React.createElement("i",{className:"las la-user"})):window.VoxelFSEUser?.avatarUrl?React.createElement("img",{src:window.VoxelFSEUser.avatarUrl,alt:"Avatar",style:{width:"32px",height:"32px",borderRadius:"50%"}}):React.createElement("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"#ccc",display:"flex",alignItems:"center",justifyContent:"center"}},React.createElement("i",{className:"las la-user"}))),React.createElement("span",{className:"ts_comp_label"},"User"),!i&&React.createElement("div",{className:"ts-down-icon"})),s==="frontend"&&React.createElement(G,{isOpen:w,popupId:`user-menu-popup-${e._id}`,target:C.current,title:"User",onClose:()=>k(!1),showFooter:!1},React.createElement("div",{className:"ts-term-dropdown ts-md-group ts-multilevel-dropdown"},React.createElement("p",{style:{padding:"16px",textAlign:"center",color:"#666"}},"Menu not configured"))))}function re({item:e,icons:l,context:s}){const[i,w]=a.useState(!1),k=a.useRef(null),C=a.useCallback(()=>{s==="frontend"&&w(!0)},[s]);return React.createElement("li",{className:`ts-popup-component elementor-repeater-item-${e._id}`},React.createElement("a",{ref:k,href:"#",onClick:h=>{h.preventDefault(),C()},role:"button","aria-label":e.wpMenuTitle||"Menu"},React.createElement("div",{className:"ts-comp-icon flexify"},K(e.icon)),React.createElement("span",{className:"ts_comp_label"},e.wpMenuTitle||"Menu")),s==="frontend"&&React.createElement(G,{isOpen:i,popupId:`wp-menu-popup-${e._id}`,target:k.current,title:e.wpMenuTitle||"Menu",icon:e.icon?.value?`<i class="${e.icon.value}"></i>`:"",onClose:()=>w(!1),showFooter:!1},React.createElement("div",{className:"ts-term-dropdown ts-md-group ts-multilevel-dropdown"},React.createElement("p",{style:{padding:"16px",textAlign:"center",color:"#666"}},"Menu not configured"))))}function le({item:e,context:l}){const s={href:e.componentUrl.url||"#"};return e.componentUrl.is_external&&(s.target="_blank"),e.componentUrl.nofollow&&(s.rel="nofollow"),React.createElement("li",{className:`elementor-repeater-item-${e._id}`},React.createElement("a",{...s},React.createElement("div",{className:"ts-comp-icon flexify"},K(e.icon)),React.createElement("span",{className:"ts_comp_label"},e.componentTitle||"Link")))}function oe(e,l,s,i,w,k){switch(e.componentType){case"notifications":return React.createElement(te,{key:e._id,item:e,icons:l,context:s});case"messages":return React.createElement(ae,{key:e._id,item:e,icons:l,context:s,nonce:w});case"cart":return React.createElement(ne,{key:e._id,item:e,icons:l,context:s,nonce:w,isCartEmpty:k});case"user_menu":return React.createElement(se,{key:e._id,item:e,icons:l,context:s,hideChevron:i});case"select_wp_menu":return React.createElement(re,{key:e._id,item:e,icons:l,context:s});case"link":return React.createElement(le,{key:e._id,item:e,context:s});default:return null}}function ce({attributes:e,context:l,config:s}){const i=s?.items||e.items,w=s?.icons||e.icons,k=s?.settings||{itemsAlign:e.itemsAlign,verticalOrientation:e.verticalOrientation,verticalOrientationTablet:e.verticalOrientationTablet,verticalOrientationMobile:e.verticalOrientationMobile,itemContentAlign:e.itemContentAlign,hideChevron:e.hideChevron,customPopupEnable:e.customPopupEnable},C=window.VoxelFSEUserbar,h=C?.nonce,o=C?.is_cart_empty??!0,x={justifyContent:k.itemsAlign};return!i||i.length===0?React.createElement("div",{className:"ts-user-area"},React.createElement("div",{className:"voxel-fse-empty-state",style:{padding:"20px",textAlign:"center",background:"#f5f5f5",borderRadius:"4px"}},React.createElement("p",{style:{margin:0,color:"#666"}},l==="editor"?"Add components using the sidebar panel":"No user bar components configured"))):React.createElement(React.Fragment,null,l==="frontend"&&s&&React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(s)}}),React.createElement("ul",{className:"flexify simplify-ul user-area-menu",style:x},i.map(M=>oe(M,w,l,k.hideChevron,h,o))))}function ie(e){const l=e.querySelector("script.vxconfig");if(l&&l.textContent)try{return JSON.parse(l.textContent)}catch(s){console.error("Failed to parse vxconfig:",s)}return null}function ue(e){return{blockId:"",items:e.items||[],icons:e.icons||{downArrow:{library:"",value:""},rightArrow:{library:"",value:""},leftArrow:{library:"",value:""},close:{library:"",value:""},trash:{library:"",value:""},inbox:{library:"",value:""},loadMore:{library:"",value:""}},itemsAlign:e.settings?.itemsAlign||"left",verticalOrientation:e.settings?.verticalOrientation||!1,verticalOrientationTablet:e.settings?.verticalOrientationTablet||!1,verticalOrientationMobile:e.settings?.verticalOrientationMobile||!1,itemContentAlign:e.settings?.itemContentAlign||"left",itemGap:0,itemMargin:{top:"",right:"",bottom:"",left:""},itemPadding:{top:"",right:"",bottom:"",left:""},itemBackground:"",itemBackgroundHover:"#fff",itemBorderRadius:0,itemContentGap:0,iconContainerSize:40,iconContainerRadius:40,iconContainerBackground:"",iconContainerBackgroundHover:"",iconSize:20,iconColor:"",iconColorHover:"",unreadIndicatorColor:"",unreadIndicatorMargin:0,unreadIndicatorSize:8,avatarSize:32,avatarRadius:50,labelTypography:{},labelColor:"",labelColorHover:"",chevronColor:"",chevronColorHover:"",hideChevron:e.settings?.hideChevron||!1,customPopupEnable:e.settings?.customPopupEnable||!1,popupBackdropColor:"",popupPointerEvents:!1,popupBoxShadow:{},popupTopMargin:0,popupMaxHeight:0}}function de({config:e}){const l=ue(e);return React.createElement(ce,{attributes:l,context:"frontend",config:e})}function H(){document.querySelectorAll(".voxel-fse-userbar").forEach(l=>{if(l.dataset.hydrated==="true")return;const s=ie(l);if(!s){console.error("No vxconfig found for userbar block");return}l.dataset.hydrated="true";const i=l.querySelector(".voxel-fse-block-placeholder");i&&i.remove(),$.createRoot(l).render(React.createElement(de,{config:s}))})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",H):H(),window.addEventListener("turbo:load",H),window.addEventListener("pjax:complete",H),document.addEventListener("voxel:markup-update",H),window.render_notifications=()=>{H()},window.render_popup_messages=()=>{H()},window.render_voxel_cart=()=>{H()}})(ReactDOM,React,ReactDOM);
