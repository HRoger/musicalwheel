(function(re,a,le){"use strict";const K=({isOpen:e,popupId:l,target:s,title:b="",icon:g="",saveLabel:C="Save",clearLabel:k="Clear",clearButton:R=!0,showHeader:F=!0,showFooter:T=!0,onSave:h,onClear:u,onClose:y,children:N,popupClass:P="",minWidth:W})=>{const U=a.useRef(null),E=a.useRef(null),[o,S]=a.useState({}),v=a.useRef(""),A=a.useCallback(()=>{if(!E.current||!s||!U.current)return;const d=s,j=U.current,B=E.current,q=document.body.clientWidth,I=d.getBoundingClientRect(),V=d.offsetWidth,D={left:I.left+window.pageXOffset,top:I.top+window.pageYOffset},H=j.getBoundingClientRect(),X=window.getComputedStyle(B),$=parseFloat(X.minWidth)||0,n=W||$,m=Math.min(1140,q-40),i=Math.max(I.width,n||m),c=D.left+V/2>q/2+1;let _;c?_=D.left-i+V:_=D.left,_<0&&(_=10),_+i>q&&(_=q-i-10);let t=D.top+I.height;const r=window.innerHeight;I.bottom+H.height>r&&I.top-H.height>=0&&(t=D.top-H.height);const p={top:`${t}px`,left:`${_}px`,width:`${i}px`,position:"absolute"},O=JSON.stringify(p);O!==v.current&&(v.current=O,S(p))},[s,W]);if(a.useEffect(()=>{if(!e)return;const d=j=>{j.key==="Escape"&&y()};return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[e,y]),a.useEffect(()=>{if(!e)return;const d=B=>{const q=B.target;E.current?.contains(q)||y()},j=requestAnimationFrame(()=>{document.addEventListener("mousedown",d)});return()=>{cancelAnimationFrame(j),document.removeEventListener("mousedown",d)}},[e,y]),a.useEffect(()=>{if(!e)return;requestAnimationFrame(()=>{requestAnimationFrame(()=>{A()})});const d=()=>A();window.addEventListener("scroll",d,!0);const j=()=>A();window.addEventListener("resize",j,!0);let B=null;return E.current&&(B=new ResizeObserver(()=>{requestAnimationFrame(()=>A())}),B.observe(E.current)),()=>{window.removeEventListener("scroll",d,!0),window.removeEventListener("resize",j,!0),B?.disconnect()}},[e,A]),!e)return null;const M=()=>a.createElement("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M14 1.41L12.59 0L7 5.59L1.41 0L0 1.41L5.59 7L0 12.59L1.41 14L7 8.41L12.59 14L14 12.59L8.41 7L14 1.41Z",fill:"currentColor"}));return le.createPortal(a.createElement("div",{className:`elementor vx-popup ${P}`.trim()},a.createElement("div",{className:"ts-popup-root elementor-element"},a.createElement("div",{ref:U,className:"ts-form elementor-element",style:o},a.createElement("div",{className:"ts-field-popup-container"},a.createElement("div",{id:l,ref:E,className:"ts-field-popup triggers-blur"},F&&a.createElement("div",{className:"ts-popup-head flexify ts-sticky-top"},a.createElement("div",{className:"ts-popup-name flexify"},g&&a.createElement("span",{dangerouslySetInnerHTML:{__html:g}}),a.createElement("span",null,b)),a.createElement("ul",{className:"flexify simplify-ul"},a.createElement("li",{className:"flexify ts-popup-close"},a.createElement("a",{href:"#",onClick:d=>{d.preventDefault(),y()},className:"ts-icon-btn","aria-label":"Close"},a.createElement(M,null))))),a.createElement("div",{className:"ts-popup-content-wrapper min-scroll"},N),T&&a.createElement("div",{className:"ts-popup-controller"},a.createElement("ul",{className:"flexify simplify-ul"},a.createElement("li",{className:"flexify ts-popup-close"},a.createElement("a",{href:"#",onClick:d=>{d.preventDefault(),y()},className:"ts-icon-btn","aria-label":"Close"},a.createElement(M,null))),R&&u&&a.createElement("li",{className:"flexify"},a.createElement("a",{href:"#",onClick:d=>{d.preventDefault(),u()},className:"ts-btn ts-btn-1"},k)),h&&a.createElement("li",{className:"flexify"},a.createElement("a",{href:"#",onClick:d=>{d.preventDefault(),h()},className:"ts-btn ts-btn-2"},C))))))))),document.body)};function Y({text:e,icon:l="î —",className:s="",style:b={}}){return a.createElement("div",{className:`voxel-empty-placeholder ${s}`,style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:e?"8px":"0",background:"rgb(213 216 220 / 80%)",borderRadius:"0",color:"#666",fontSize:"13px",height:"45px",width:"100%",...b}},a.createElement("span",{className:"placeholder-icon",style:{fontFamily:"eicons",fontSize:"24px",opacity:.3,lineHeight:1,fontStyle:"normal"}},l),e&&a.createElement("span",{className:"placeholder-text",style:{opacity:.6}},e))}function G(){return window.VoxelFSEUserbar??null}function z(e){const l=window.Voxel_Config;return l?.ajax_url?`${l.ajax_url}&action=${e}`:`${l?.site_url||window.location.origin}/?vx=1&action=${e}`}function Q(){const e=G();return e?e.isLoggedIn:window.Voxel_Config?.is_logged_in??!1}function w(e,l="error"){const s=window.Voxel;s?.alert?s.alert(e,l):console.error(`[Userbar] ${l}: ${e}`)}function f(e,l){const s=G();if(s?.l10n){const g=s.l10n;if(g[e])return g[e]}return window.Voxel_Config?.l10n?.[e]??l}function ae(e){return G()?.nonces?.[e]??""}function ne(e,l){const s=window.Voxel;return s?.helpers?.currencyFormat?s.helpers.currencyFormat(e,l):`$${(e/100).toFixed(2)}`}function Z(e){return!e||!e.value?null:e.library==="svg"&&e.value?React.createElement("img",{src:e.value,alt:"",style:{width:"1em",height:"1em"}}):e.library==="icon"&&e.value?React.createElement("i",{className:e.value,"aria-hidden":"true"}):null}function oe({item:e,icons:l,context:s,popupScopeClass:b}){const[g,C]=a.useState(!1),k=a.useRef(null),R=a.useRef(null),T=G()?.unread?.notifications??0,[h,u]=a.useState(null),[y,N]=a.useState(!1),[P,W]=a.useState(!0),[U,E]=a.useState(!1),[o,S]=a.useState(1),[v,A]=a.useState(null),M=a.useRef(0),d=a.useCallback(async(n=1)=>{E(!0);try{const m=z("notifications.list"),c=await(await fetch(`${m}&pg=${n}`)).json();c.success?(u(_=>n===1?c.list:[..._||[],...c.list]),N(c.has_more)):w(c.message||f("ajaxError","An error occurred"))}catch{w(f("ajaxError","An error occurred"))}finally{W(!1),E(!1)}},[]),j=a.useCallback(()=>{s==="frontend"&&(h===null&&(u([]),R.current?.classList.add("hidden"),d(1)),C(!0))},[s,h,d]),B=a.useCallback(()=>{const n=o+1;S(n),d(n)},[o,d]),q=a.useCallback(async()=>{const n=f("confirmClear","Clear all notifications?");if(window.confirm(n))try{const m=z("notifications.clear_all"),c=await(await fetch(m)).json();c.success?u([]):w(c.message||f("ajaxError","An error occurred"))}catch{w(f("ajaxError","An error occurred"))}},[]),I=a.useCallback(()=>{A(null),requestAnimationFrame(()=>{const n=document.querySelector(".min-scroll");n&&(n.scrollTop=M.current)})},[]),V=a.useCallback(async n=>{if(n.links_to==="(details)"){const m=document.querySelector(".min-scroll");m&&(M.current=m.scrollTop),n.actions===void 0?(u(i=>i?.map(c=>c.id===n.id?{...c,seen:!0}:c)||null),D(n)):(A(n),requestAnimationFrame(()=>{const i=document.querySelector(".min-scroll");i&&(i.scrollTop=0)}))}else{u(m=>m?.map(i=>i.id===n.id?{...i,_loading:!0}:i)||null);try{const m=z("notifications.open"),c=await(await fetch(`${m}&item_id=${n.id}`)).json();c.success?(u(_=>_?.map(t=>t.id===n.id?{...t,seen:!0,_loading:!1}:t)||null),c.redirect_to&&(window.location.href=c.redirect_to)):(w(c.message||f("ajaxError","An error occurred")),u(_=>_?.map(t=>t.id===n.id?{...t,_loading:!1}:t)||null))}catch{w(f("ajaxError","An error occurred")),u(m=>m?.map(i=>i.id===n.id?{...i,_loading:!1}:i)||null)}}},[]),D=a.useCallback(async(n,m=1)=>{u(i=>i?.map(c=>c.id===n.id?{...c,_loading:!0,actions_page:m}:c)||null);try{const i=z("notifications.get_actions"),_=await(await fetch(`${i}&item_id=${n.id}&pg=${m}`)).json();if(_.success){const t={...n,actions:m===1?_.actions:[...n.actions||[],..._.actions],actions_page:m,_loading:!1,seen:!0};u(r=>r?.map(p=>p.id===n.id?t:p)||null),A(t),m===1&&requestAnimationFrame(()=>{const r=document.querySelector(".min-scroll");r&&(r.scrollTop=0)})}else w(_.message||f("ajaxError","An error occurred")),u(t=>t?.map(r=>r.id===n.id?{...r,_loading:!1,seen:!0}:r)||null)}catch{w(f("ajaxError","An error occurred")),u(i=>i?.map(c=>c.id===n.id?{...c,_loading:!1}:c)||null)}},[]),H=a.useCallback(async(n,m,i)=>{const c=i?.key||m.key;if(!c)return;const _=t=>{v&&A({...v,actions:v.actions?.map(r=>r===m?{...r,_loading:t}:r)})};_(!0);try{const t=z("notifications.run_action"),p=await(await fetch(`${t}&item_id=${n.id}&action_key=${c}&pg=${m._page||1}`)).json();if(p.success){if(p.updated_action&&v?.actions){const O=v.actions.indexOf(m);if(O!==-1){const L=[...v.actions];L[O]=p.updated_action,A({...v,actions:L})}}p.redirect_to&&(window.location.href=p.redirect_to)}else w(p.message||f("ajaxError","An error occurred"))}catch{w(f("ajaxError","An error occurred"))}finally{_(!1)}},[v]),X=n=>React.createElement("div",{key:n.id,className:`ts-notification-item ${n.seen?"":"ts-unread"} ${n._loading?"vx-pending":""}`,onClick:()=>V(n)},n.image_url&&React.createElement("div",{className:"ts-notification-image"},React.createElement("img",{src:n.image_url,alt:""})),React.createElement("div",{className:"ts-notification-body"},React.createElement("span",{className:"ts-notification-subject"},n.subject),React.createElement("span",{className:"ts-notification-time"},n.time))),$=(n,m)=>n.type==="list-item"?React.createElement("div",{key:n.key,className:`ts-action-item ${n._loading?"vx-pending":""}`,onClick:()=>n.links_to?window.location.href=n.links_to:H(m,n)},n.image_markup&&React.createElement("div",{className:"ts-action-image",dangerouslySetInnerHTML:{__html:n.image_markup}}),React.createElement("div",{className:"ts-action-body"},n.subject&&React.createElement("span",{className:"ts-action-subject"},n.subject),n.details&&React.createElement("span",{className:"ts-action-details"},n.details)),n.actions&&n.actions.length>0&&React.createElement("div",{className:"ts-action-buttons"},n.actions.map(i=>React.createElement("button",{key:i.key,className:"ts-btn ts-btn-1",onClick:c=>{c.stopPropagation(),H(m,n,i)}},i.label)))):n.type==="button"?React.createElement("button",{key:n.key,className:`ts-btn ts-btn-1 ${n._loading?"vx-pending":""}`,onClick:()=>H(m,n)},n.label):null;return React.createElement("li",{className:`ts-notifications-wrapper elementor-repeater-item-${e._id}`},React.createElement("a",{ref:k,href:"#",onClick:n=>{n.preventDefault(),j()},role:"button","aria-label":e.notificationsTitle||"Notifications"},React.createElement("div",{className:"ts-comp-icon flexify"},Z(e.icon),s==="frontend"&&Q()&&React.createElement("span",{ref:R,className:"unread-indicator",style:{display:T>0?void 0:"none"}})),React.createElement("span",{className:"ts_comp_label"},e.notificationsTitle||"Notifications")),s==="frontend"&&React.createElement(K,{isOpen:g,popupId:`notifications-popup-${e._id}`,target:k.current,title:e.notificationsTitle||"Notifications",icon:e.icon?.value?`<i class="${e.icon.value}"></i>`:"",onClose:()=>{C(!1),A(null)},showFooter:!1,popupClass:`md-width ${b||""}`.trim()},React.createElement("div",{className:"ts-notifications-list min-scroll"},h&&h.length>0&&!v&&React.createElement("div",{className:"ts-notifications-header flexify"},React.createElement("button",{className:"ts-btn ts-btn-1",onClick:q},f("clearAll","Clear all"))),P&&React.createElement(Y,null),v&&React.createElement("div",{className:"ts-notification-details"},React.createElement("button",{className:"ts-btn ts-btn-1 ts-back-btn",onClick:I},React.createElement("i",{className:"las la-arrow-left"}),f("back","Back")),React.createElement("div",{className:"ts-notification-content"},React.createElement("span",{className:"ts-notification-subject"},v.subject),React.createElement("span",{className:"ts-notification-time"},v.time)),v.actions&&React.createElement("div",{className:"ts-notification-actions"},v.actions.map(n=>$(n,v))),v._loading&&React.createElement("div",{className:"ts-loader"})),!P&&!v&&React.createElement(React.Fragment,null,h&&h.length>0?React.createElement(React.Fragment,null,h.map(X),y&&React.createElement("button",{className:`ts-btn ts-btn-1 ts-load-more ${U?"vx-pending":""}`,onClick:B,disabled:U},U?React.createElement("span",{className:"ts-loader"}):f("loadMore","Load more"))):React.createElement(Y,null)))))}function ce({item:e,icons:l,context:s,popupScopeClass:b,nonce:g}){const[C,k]=a.useState(!1),R=a.useRef(null),F=a.useRef(null),T=G(),h=g||ae("chat"),u=T?.unread?.messages??!1,[y,N]=a.useState({list:null,hasMore:!1,loading:!0,loadingMore:!1,page:1}),P=a.useCallback(async(o=1)=>{N(S=>({...S,loadingMore:!0}));try{const S=z("inbox.list_chats"),v=new FormData;v.append("pg",o.toString()),h&&v.append("_wpnonce",h);const M=await(await fetch(S,{method:"POST",body:v})).json();M.success?N(d=>({...d,list:o===1?M.list:[...d.list||[],...M.list],hasMore:M.has_more,loading:!1,loadingMore:!1})):(w(M.message||f("ajaxError","An error occurred")),N(d=>({...d,loading:!1,loadingMore:!1})))}catch{w(f("ajaxError","An error occurred")),N(S=>({...S,loading:!1,loadingMore:!1}))}},[h]),W=a.useCallback(()=>{s==="frontend"&&(k(!0),y.list===null&&(N(o=>({...o,list:[]})),F.current?.classList.add("hidden"),P(1)))},[s,y.list,P]),U=a.useCallback(()=>{const o=y.page+1;N(S=>({...S,page:o})),P(o)},[y.page,P]),E=o=>React.createElement("a",{key:o.id,href:o.link,className:`ts-chat-item ${o.seen?"":"ts-unread"}`},React.createElement("div",{className:"ts-chat-avatar"},React.createElement("img",{src:o.target.avatar,alt:o.target.name})),React.createElement("div",{className:"ts-chat-body"},React.createElement("span",{className:"ts-chat-name"},o.target.name),React.createElement("span",{className:"ts-chat-excerpt"},o.excerpt),React.createElement("span",{className:"ts-chat-time"},o.time)));return React.createElement("li",{className:`ts-popup-messages elementor-repeater-item-${e._id}`},React.createElement("a",{ref:R,href:"#",onClick:o=>{o.preventDefault(),W()},role:"button","aria-label":e.messagesTitle||"Messages"},React.createElement("div",{className:"ts-comp-icon flexify"},Z(e.icon),s==="frontend"&&Q()&&React.createElement("span",{ref:F,className:"unread-indicator",style:{display:u?void 0:"none"}})),React.createElement("span",{className:"ts_comp_label"},e.messagesTitle||"Messages")),s==="frontend"&&React.createElement(K,{isOpen:C,popupId:`messages-popup-${e._id}`,target:R.current,title:e.messagesTitle||"Messages",icon:e.icon?.value?`<i class="${e.icon.value}"></i>`:"",onClose:()=>k(!1),showFooter:!1,popupClass:`md-width ${b||""}`.trim()},React.createElement("div",{className:"ts-chats-list min-scroll"},y.loading&&React.createElement("div",{className:"ts-empty-user-tab"},React.createElement("div",{className:"ts-loader"})),!y.loading&&React.createElement(React.Fragment,null,y.list&&y.list.length>0?React.createElement(React.Fragment,null,y.list.map(E),y.hasMore&&React.createElement("button",{className:`ts-btn ts-btn-1 ts-load-more ${y.loadingMore?"vx-pending":""}`,onClick:U,disabled:y.loadingMore},y.loadingMore?React.createElement("span",{className:"ts-loader"}):f("loadMore","Load more"))):React.createElement(Y,null)))))}function ie({item:e,icons:l,context:s,popupScopeClass:b,nonce:g,isCartEmpty:C}){const[k,R]=a.useState(!1),F=a.useRef(null),T=a.useRef(null),h=G(),u=g||ae("cart"),y=C??h?.isCartEmpty??!0,[N,P]=a.useState(!0),[W,U]=a.useState(!1),[E,o]=a.useState(null),[S,v]=a.useState(""),[A,M]=a.useState(!1),d=a.useRef(!1),j=()=>!N&&E!==null&&Object.keys(E).length>0,B=()=>W?j():Q()?!y:!!localStorage.getItem("voxel:guest_cart"),q=t=>t.product_mode==="regular"?t.value.stock?.quantity||0:t.product_mode==="variable"&&t.value.variations?.quantity||0,I=()=>{if(!j()||!E)return 0;let t=0;return Object.values(E).forEach(r=>{t+=r.pricing.total_amount}),t},V=a.useCallback(()=>{if(!E||Object.keys(E).length===0){localStorage.removeItem("voxel:guest_cart");return}const t={};Object.values(E).forEach(r=>{t[r.key]=r.value}),localStorage.setItem("voxel:guest_cart",JSON.stringify(t))},[E]),D=a.useCallback(async()=>{const t=Q(),r=t?"products.get_cart_items":"products.get_guest_cart_items";try{const p=z(r),O=new FormData;u&&O.append("_wpnonce",u),O.append("guest_cart",localStorage.getItem("voxel:guest_cart")||"");const x=await(await fetch(p,{method:"POST",body:O})).json();P(!1),U(!0),t&&localStorage.removeItem("voxel:guest_cart"),x.success?(o(Object.keys(x.items).length?x.items:{}),v(x.checkout_link),t||setTimeout(()=>V(),0)):w(x.message||f("ajaxError","An error occurred"))}catch{P(!1),U(!0),w(f("ajaxError","An error occurred"))}},[g,V]),H=a.useCallback(()=>{if(s!=="frontend")return;const t=document.querySelector(".ts-checkout");if(t){window.Voxel?.scrollTo?.(t);return}R(!0),E===null&&(o({}),D())},[s,E,D]),X=a.useCallback(async t=>{if(Q()){o(r=>r?{...r,[t.key]:{...r[t.key],_disabled:!0}}:null);try{const r=z("products.remove_cart_item"),p=new FormData;p.append("item_key",t.key),u&&p.append("_wpnonce",u);const L=await(await fetch(r,{method:"POST",body:p})).json();L.success?o(x=>{if(!x)return null;const ee={...x};return delete ee[t.key],ee}):(o(x=>x?{...x,[t.key]:{...x[t.key],_disabled:!1}}:null),w(L.message||f("ajaxError","An error occurred")))}catch{o(r=>r?{...r,[t.key]:{...r[t.key],_disabled:!1}}:null),w(f("ajaxError","An error occurred"))}}else o(r=>{if(!r)return null;const p={...r};return delete p[t.key],p}),setTimeout(()=>V(),0)},[g,V]),$=a.useCallback(async()=>{if(Q()){M(!0);try{const t=z("products.empty_cart"),r=new FormData;u&&r.append("_wpnonce",u);const O=await(await fetch(t,{method:"POST",body:r})).json();M(!1),O.success?o({}):w(O.message||f("ajaxError","An error occurred"))}catch{M(!1),w(f("ajaxError","An error occurred"))}}else o({}),localStorage.removeItem("voxel:guest_cart")},[g]),n=a.useCallback(async(t,r)=>{o(L=>L?{...L,[t.key]:{...L[t.key],_disabled:!0}}:null);const p=Q(),O=p?"products.update_cart_item_quantity":"products.update_guest_cart_item_quantity";try{const L=z(O),x=new FormData;x.append("item_key",t.key),x.append("item_quantity",r.toString()),p||x.append("guest_cart",localStorage.getItem("voxel:guest_cart")||""),u&&x.append("_wpnonce",u);const te=await(await fetch(L,{method:"POST",body:x})).json();te.success?(o(se=>se?{...se,[t.key]:te.item}:null),p||setTimeout(()=>V(),0)):w(te.message||f("ajaxError","An error occurred"))}catch{w(f("ajaxError","An error occurred"))}finally{o(L=>L?{...L,[t.key]:{...L[t.key],_disabled:!1}}:null)}},[g,V]),m=a.useCallback(t=>{const r=q(t)+1;n(t,r)},[n]),i=a.useCallback(t=>{const r=q(t)-1;r<=0?X(t):n(t,r)},[n,X]),c=t=>{if(!E)return!1;let r=t.quantity.max;for(const p of Object.values(E))if(p.stock_id===t.stock_id&&(r-=q(p),r<=0))return!1;return!0};a.useEffect(()=>{if(s!=="frontend")return;d.current||(d.current=!0,Object.defineProperty(window,"VX_Cart",{configurable:!0,get:()=>({open:H,getItems:D,hasItems:j,getSubtotal:I,get loading(){return N},get loaded(){return W},get items(){return E},get checkout_link(){return S}})}));const t=()=>{D(),T.current?.classList.add("ts-cart-update"),setTimeout(()=>T.current?.classList.remove("ts-cart-update"),500)};return document.addEventListener("voxel:added_cart_item",t),()=>{document.removeEventListener("voxel:added_cart_item",t)}},[s,D,H,j,I,N,W,E,S]);const _=t=>React.createElement("div",{key:t.key,className:`ts-cart-item ${t._disabled?"vx-pending":""}`},React.createElement("div",{className:"ts-cart-item-image"},React.createElement("a",{href:t.link},React.createElement("img",{src:t.logo,alt:t.title}))),React.createElement("div",{className:"ts-cart-item-body"},React.createElement("a",{href:t.link,className:"ts-cart-item-title"},t.title),t.subtitle&&React.createElement("span",{className:"ts-cart-item-subtitle"},t.subtitle),React.createElement("span",{className:"ts-cart-item-price"},ne(t.pricing.total_amount,t.pricing._currency))),React.createElement("div",{className:"ts-cart-item-actions"},t.quantity.enabled&&React.createElement("div",{className:"ts-quantity-control"},React.createElement("button",{className:"ts-qty-btn ts-qty-minus",onClick:()=>i(t),disabled:t._disabled},React.createElement("i",{className:"las la-minus"})),React.createElement("span",{className:"ts-qty-value"},q(t)),React.createElement("button",{className:"ts-qty-btn ts-qty-plus",onClick:()=>m(t),disabled:t._disabled||!c(t)},React.createElement("i",{className:"las la-plus"}))),React.createElement("button",{className:"ts-remove-btn",onClick:()=>X(t),disabled:t._disabled},React.createElement("i",{className:"las la-times"}))));return React.createElement("li",{className:`ts-popup-cart elementor-repeater-item-${e._id}`},React.createElement("a",{ref:F,href:"#",onClick:t=>{t.preventDefault(),H()},role:"button","aria-label":e.cartTitle||"Cart"},React.createElement("div",{ref:T,className:"ts-comp-icon flexify"},Z(e.icon),s==="frontend"&&B()&&React.createElement("span",{className:"unread-indicator"})),React.createElement("span",{className:"ts_comp_label"},e.cartTitle||"Cart")),s==="frontend"&&React.createElement(K,{isOpen:k,popupId:`cart-popup-${e._id}`,target:F.current,title:e.cartTitle||"Cart",icon:e.icon?.value?`<i class="${e.icon.value}"></i>`:"",onClose:()=>R(!1),showFooter:!1,popupClass:`lg-width ts-cart-popup ${b||""}`.trim()},React.createElement("div",{className:"ts-cart-content min-scroll"},N&&React.createElement(Y,null),!N&&React.createElement(React.Fragment,null,j()&&E?React.createElement(React.Fragment,null,React.createElement("div",{className:"ts-cart-items"},Object.values(E).map(_)),React.createElement("div",{className:"ts-cart-footer"},React.createElement("div",{className:"ts-cart-subtotal"},React.createElement("span",null,f("subtotal","Subtotal")),React.createElement("span",{className:"ts-subtotal-amount"},ne(I()))),React.createElement("div",{className:"ts-cart-actions"},React.createElement("button",{className:`ts-btn ts-btn-1 ts-empty-cart ${A?"vx-pending":""}`,onClick:$,disabled:A},f("emptyCart","Empty cart")),S&&React.createElement("a",{href:S,className:"ts-btn ts-btn-2"},f("checkout","Checkout"))))):React.createElement(Y,null)))))}function ue({item:e,icons:l,context:s,popupScopeClass:b,hideChevron:g}){const[C,k]=a.useState(!1),R=a.useRef(null),T=G()?.user??window.VoxelFSEUser,h=T?.displayName||"User",u=T?.avatarUrl||"",y=a.useCallback(()=>{s==="frontend"&&k(!0)},[s]);return React.createElement("li",{className:`ts-popup-component ts-user-area-avatar elementor-repeater-item-${e._id}`},React.createElement("a",{ref:R,href:"#",onClick:N=>{N.preventDefault(),y()},role:"button","aria-label":h},React.createElement("div",{className:"ts-comp-icon flexify"},s==="editor"?React.createElement("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"#ccc",display:"flex",alignItems:"center",justifyContent:"center"}},React.createElement("i",{className:"las la-user"})):u?React.createElement("img",{src:u,alt:h,style:{width:"32px",height:"32px",borderRadius:"50%"}}):React.createElement("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"#ccc",display:"flex",alignItems:"center",justifyContent:"center"}},React.createElement("i",{className:"las la-user"}))),React.createElement("span",{className:"ts_comp_label"},h),!g&&React.createElement("div",{className:"ts-down-icon"})),s==="frontend"&&React.createElement(K,{isOpen:C,popupId:`user-menu-popup-${e._id}`,target:R.current,title:h,icon:u?`<img src="${u}" alt="" style="width:24px;height:24px;border-radius:50%;">`:"",onClose:()=>k(!1),showFooter:!1,popupClass:b||""},React.createElement("div",{className:"ts-term-dropdown ts-md-group ts-multilevel-dropdown"},React.createElement("p",{style:{padding:"16px",textAlign:"center",color:"#666"}},"Menu not configured"))))}function de({item:e,icons:l,context:s,popupScopeClass:b}){const[g,C]=a.useState(!1),k=a.useRef(null),R=a.useCallback(()=>{s==="frontend"&&C(!0)},[s]);return React.createElement("li",{className:`ts-popup-component elementor-repeater-item-${e._id}`},React.createElement("a",{ref:k,href:"#",onClick:F=>{F.preventDefault(),R()},role:"button","aria-label":e.wpMenuTitle||"Menu"},React.createElement("div",{className:"ts-comp-icon flexify"},Z(e.icon)),React.createElement("span",{className:"ts_comp_label"},e.wpMenuTitle||"Menu")),s==="frontend"&&React.createElement(K,{isOpen:g,popupId:`wp-menu-popup-${e._id}`,target:k.current,title:e.wpMenuTitle||"Menu",icon:e.icon?.value?`<i class="${e.icon.value}"></i>`:"",onClose:()=>C(!1),showFooter:!1,popupClass:b||""},React.createElement("div",{className:"ts-term-dropdown ts-md-group ts-multilevel-dropdown"},React.createElement("p",{style:{padding:"16px",textAlign:"center",color:"#666"}},"Menu not configured"))))}function me({item:e,context:l}){const s={href:e.componentUrl.url||"#"};return e.componentUrl.is_external&&(s.target="_blank"),e.componentUrl.nofollow&&(s.rel="nofollow"),React.createElement("li",{className:`elementor-repeater-item-${e._id}`},React.createElement("a",{...s},React.createElement("div",{className:"ts-comp-icon flexify"},Z(e.icon)),React.createElement("span",{className:"ts_comp_label"},e.componentTitle||"Link")))}function pe(e,l,s,b,g,C,k){switch(e.componentType){case"notifications":return React.createElement(oe,{key:e._id,item:e,icons:l,context:s,popupScopeClass:g});case"messages":return React.createElement(ce,{key:e._id,item:e,icons:l,context:s,popupScopeClass:g,nonce:C});case"cart":return React.createElement(ie,{key:e._id,item:e,icons:l,context:s,popupScopeClass:g,nonce:C,isCartEmpty:k});case"user_menu":return React.createElement(ue,{key:e._id,item:e,icons:l,context:s,hideChevron:b,popupScopeClass:g});case"select_wp_menu":return React.createElement(de,{key:e._id,item:e,icons:l,context:s,popupScopeClass:g});case"link":return React.createElement(me,{key:e._id,item:e,context:s});default:return null}}function fe({attributes:e,context:l,config:s}){const b=s?.items||e.items,g=s?.icons||e.icons,C=s?.settings||{itemsAlign:e.itemsAlign,verticalOrientation:e.verticalOrientation,verticalOrientationTablet:e.verticalOrientationTablet,verticalOrientationMobile:e.verticalOrientationMobile,itemContentAlign:e.itemContentAlign,hideChevron:e.hideChevron,customPopupEnable:e.customPopupEnable},k=window.VoxelFSEUserbar,R=k?.nonce,F=k?.is_cart_empty??!0,T=`voxel-popup-userbar-${e.blockId||"default"}`,h={justifyContent:C.itemsAlign};return!b||b.length===0?React.createElement("div",{className:"ts-user-area"},React.createElement("div",{className:"voxel-fse-empty-state",style:{padding:"20px",textAlign:"center",background:"#f5f5f5",borderRadius:"4px"}},React.createElement("p",{style:{margin:0,color:"#666"}},l==="editor"?"Add components using the sidebar panel":"No user bar components configured"))):React.createElement(React.Fragment,null,l==="frontend"&&s&&React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(s)}}),React.createElement("ul",{className:"flexify simplify-ul user-area-menu",style:h},b.map(u=>pe(u,g,l,C.hideChevron,T,R,F))))}function ge(e){const l=e.querySelector("script.vxconfig");if(l&&l.textContent)try{return JSON.parse(l.textContent)}catch(s){console.error("Failed to parse vxconfig:",s)}return null}function Ee(e){return{blockId:"",items:e.items||[],icons:e.icons||{downArrow:{library:"",value:""},rightArrow:{library:"",value:""},leftArrow:{library:"",value:""},close:{library:"",value:""},trash:{library:"",value:""},inbox:{library:"",value:""},loadMore:{library:"",value:""}},itemsAlign:e.settings?.itemsAlign||"left",verticalOrientation:e.settings?.verticalOrientation||!1,verticalOrientationTablet:e.settings?.verticalOrientationTablet||!1,verticalOrientationMobile:e.settings?.verticalOrientationMobile||!1,itemContentAlign:e.settings?.itemContentAlign||"left",itemGap:0,itemMargin:{top:"",right:"",bottom:"",left:""},itemPadding:{top:"",right:"",bottom:"",left:""},itemBackground:"",itemBackgroundHover:"#fff",itemBorderRadius:0,itemContentGap:0,iconContainerSize:40,iconContainerRadius:40,iconContainerBackground:"",iconContainerBackgroundHover:"",iconSize:20,iconColor:"",iconColorHover:"",unreadIndicatorColor:"",unreadIndicatorMargin:0,unreadIndicatorSize:8,avatarSize:32,avatarRadius:50,labelTypography:{},labelColor:"",labelColorHover:"",chevronColor:"",chevronColorHover:"",hideChevron:e.settings?.hideChevron||!1,customPopupEnable:e.settings?.customPopupEnable||!1,popupBackdropColor:"",popupPointerEvents:!1,popupBoxShadow:{},popupTopMargin:0,popupMaxHeight:0}}function ye({config:e}){const l=Ee(e);return React.createElement(fe,{attributes:l,context:"frontend",config:e})}function J(){document.querySelectorAll(".voxel-fse-userbar").forEach(l=>{if(l.dataset.hydrated==="true")return;const s=ge(l);if(!s){console.error("No vxconfig found for userbar block");return}l.dataset.hydrated="true";const b=l.querySelector(".voxel-fse-block-placeholder");b&&b.remove(),re.createRoot(l).render(React.createElement(ye,{config:s}))})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",J):J(),window.addEventListener("turbo:load",J),window.addEventListener("pjax:complete",J),document.addEventListener("voxel:markup-update",J),window.render_notifications=()=>{J()},window.render_popup_messages=()=>{J()},window.render_voxel_cart=()=>{J()}})(ReactDOM,React,ReactDOM);
