var VoxelFSETimeline=(function(ot,Ws,o,ar){"use strict";function ir(){if(typeof window<"u"&&window.wpApiSettings?.root)return window.wpApiSettings.root.replace(/\/wp-json\/?$/,"")+"?vx=1";if(typeof document<"u"){const e=document.querySelector('link[rel="https://api.w.org/"]');if(e){const t=e.getAttribute("href");if(t)return t.replace(/\/wp-json\/?$/,"")+"?vx=1"}}return typeof window<"u"?window.location.origin+"?vx=1":"/?vx=1"}function Us(){if(typeof window<"u"&&window.wpApiSettings?.root)return window.wpApiSettings.root;if(typeof document<"u"){const e=document.querySelector('link[rel="https://api.w.org/"]');if(e){const t=e.getAttribute("href");if(t)return t}}if(typeof window<"u"&&window.location?.origin){const e=window.location.pathname.split("/").filter(Boolean),t=["wp-admin","wp-content","wp-includes","wp-json"];return e.length>0&&!t.includes(e[0])?window.location.origin+"/"+e[0]+"/wp-json/":window.location.origin+"/wp-json/"}return"/wp-json/"}class ve extends Error{constructor(t,n,r,s){super(t),this.name="VoxelApiError",this.code=n,this.status=r,this.data=s}}function Vs(){return window.voxelFseConfig?.restUrl?window.voxelFseConfig.restUrl:window.wpApiSettings?.root?window.wpApiSettings.root:"/wp-json/"}function Zs(){return window.voxelFseConfig?.nonce?window.voxelFseConfig.nonce:window.wpApiSettings?.nonce?window.wpApiSettings.nonce:""}function or(e,t){const n=Vs(),r=new URL(e,n);return t&&Object.entries(t).forEach(([s,a])=>{a!=null&&r.searchParams.append(s,String(a))}),r.toString()}async function lr(e,t={}){const{method:n="GET",body:r,headers:s={},signal:a}=t,i=Zs(),l={...s};i&&(l["X-WP-Nonce"]=i);const d={method:n,headers:l,credentials:"same-origin",signal:a};r&&n!=="GET"&&(r instanceof FormData?d.body=r:(l["Content-Type"]="application/json",d.body=JSON.stringify(r)));const f=or(e);try{const h=await fetch(f,d),m=await h.json();if(!h.ok)throw new ve(m.message||`HTTP ${h.status}`,m.code||"http_error",h.status,m);if(m.success===!1)throw new ve(m.message||"Request failed",m.code||"api_error",h.status,m);return m.data}catch(h){throw h instanceof ve?h:h instanceof TypeError&&h.message.includes("fetch")?new ve("Network error. Please check your connection.","network_error",0):h instanceof DOMException&&h.name==="AbortError"?new ve("Request was cancelled","abort_error",0):new ve(h instanceof Error?h.message:"Unknown error","unknown_error",0,h)}}async function cr(e,t,n){const r=t?or(e,t):e;return lr(r,{...n,method:"GET"})}async function Bs(e,t,n){return lr(e,{...n,method:"POST",body:t})}async function fn(e,t={},n={}){const r=Object.entries(t).filter(([i,l])=>l!=null&&l!=="").map(([i,l])=>`${encodeURIComponent(i)}=${encodeURIComponent(String(l))}`),a=`${ir().replace("?vx=1","").replace(/\/$/,"")}/?vx=1&action=${e}${r.length?"&"+r.join("&"):""}`;console.log("[voxelAjax] Calling:",a);try{const i=await fetch(a,{method:"GET",credentials:"same-origin",signal:n.signal});if(!i.ok)throw new ve(`Voxel AJAX failed: HTTP ${i.status}`,"http_error",i.status);const l=await i.json();if(console.log("[voxelAjax] Response:",l),l.success===!1)throw new ve(l.message||"Voxel AJAX request failed",l.code||"voxel_error",i.status,l);return l}catch(i){throw i instanceof ve?i:i instanceof DOMException&&i.name==="AbortError"?new ve("Request was cancelled","abort_error",0):i instanceof TypeError?new ve("Network error. Please check your connection.","network_error",0):new ve(i instanceof Error?i.message:"Unknown error","unknown_error",0,i)}}async function xe(e,t={},n={}){const s=`${ir().replace("?vx=1","").replace(/\/$/,"")}/?vx=1&action=${e}`,a=new FormData;Object.entries(t).forEach(([i,l])=>{l!=null&&l!==""&&a.append(i,String(l))}),console.log("[voxelAjaxPost] Calling:",s,"with params:",t);try{const i=await fetch(s,{method:"POST",credentials:"same-origin",body:a,signal:n.signal});if(!i.ok)throw new ve(`Voxel AJAX POST failed: HTTP ${i.status}`,"http_error",i.status);const l=await i.json();if(console.log("[voxelAjaxPost] Response:",l),l.success===!1)throw new ve(l.message||"Voxel AJAX POST request failed",l.code||"voxel_error",i.status,l);return l}catch(i){throw i instanceof ve?i:i instanceof DOMException&&i.name==="AbortError"?new ve("Request was cancelled","abort_error",0):i instanceof TypeError?new ve("Network error. Please check your connection.","network_error",0):new ve(i instanceof Error?i.message:"Unknown error","unknown_error",0,i)}}const jt="voxel-fse/v1/timeline";async function zs(){return cr(`${jt}/config`)}async function Gs(e,t){const n={mode:e};return t&&(n.post_id=t),cr(`${jt}/post-context`,n)}async function qs(e,t){const n={feed:e.feed,post_id:e.post_id??null,content:e.content,files:e.files??[],rating:e.rating??{}};return e.link_preview&&(n.link_preview=e.link_preview),(await xe("timeline/v2/status.publish",{data:JSON.stringify(n),_wpnonce:t})).status}async function Js(e,t){const n={status_id:e.status_id,content:e.content,files:e.files??[],rating:e.rating??{}};return(await xe("timeline/v2/status.edit",{data:JSON.stringify(n),_wpnonce:t})).status}async function Xs(e,t){return{deleted:(await xe("timeline/v2/status.delete",{status_id:e,_wpnonce:t})).success!==!1}}async function Qs(e,t){return xe("timeline/v2/status.like",{status_id:e,_wpnonce:t})}async function Ks(e,t){return xe("timeline/v2/status.repost",{status_id:e,_wpnonce:t})}async function $s(e,t){const n={status_id:e.quote_of,content:e.content,files:e.files??[]};return(await xe("timeline/v2/status.quote",{data:JSON.stringify(n),_wpnonce:t})).status}async function ea(e){return Bs(`${jt}/status/${e}/remove-link-preview`)}async function ta(e,t){return xe("timeline/v2/status.mark_approved",{status_id:e,_wpnonce:t})}async function na(e,t){return xe("timeline/v2/status.mark_pending",{status_id:e,_wpnonce:t})}async function ra(e){return fn("timeline/v2/get_feed",{mode:e.mode,order_type:e.order,order_time:e.time,order_time_custom:e.time_custom,search:e.search,filter_by:e.filter,page:e.page,post_id:e.post_id,user_id:e.author_id,status_id:e.status_id})}async function sa(e,t){const n={status_id:e.status_id,parent_id:e.parent_id??null,content:e.content,files:e.files??[]};return(await xe("timeline/v2/comment.publish",{data:JSON.stringify(n),_wpnonce:t})).comment}async function aa(e,t){return{deleted:(await xe("timeline/v2/comment.delete",{comment_id:e,_wpnonce:t})).success!==!1}}async function ia(e,t){return xe("timeline/v2/comment.like",{comment_id:e,_wpnonce:t})}async function oa(e,t){return(await xe("timeline/v2/comment.mark_approved",{comment_id:e,_wpnonce:t})).comment}async function la(e,t){return(await xe("timeline/v2/comment.mark_pending",{comment_id:e,_wpnonce:t})).comment}async function ca(e){return fn("timeline/v2/comments/get_feed",{status_id:e.status_id,parent_id:e.parent_id,reply_id:e.reply_id,page:e.page,mode:e.mode})}async function ua(e,t){return new Promise((n,r)=>{const s=new FormData;s.append("file",e);const a=new XMLHttpRequest;t&&a.upload.addEventListener("progress",d=>{if(d.lengthComputable){const f=Math.round(d.loaded/d.total*100);t(f)}}),a.addEventListener("load",()=>{if(a.status>=200&&a.status<300)try{const d=JSON.parse(a.responseText);d.success?n(d.data):r(new Error(d.message||"Upload failed"))}catch{r(new Error("Invalid response from server"))}else r(new Error(`Upload failed with status ${a.status}`))}),a.addEventListener("error",()=>{r(new Error("Network error during upload"))}),a.addEventListener("abort",()=>{r(new Error("Upload cancelled"))});const i=window.wpApiSettings?.nonce||window.voxelFseConfig?.nonce||"",l=Us();a.open("POST",`${l}${jt}/upload`),a.setRequestHeader("X-WP-Nonce",i),a.send(s)})}async function da(e,t,n){try{return(await fn("timeline.get_link_preview",{url:e,_wpnonce:t},{signal:n})).preview??null}catch{return null}}const fa={config:null,postContext:null,attributes:{},context:"frontend",isLoading:!0,error:null,refetch:async()=>{}},ur=o.createContext(fa);let It=null,lt=null;const mn=new Map;function ma({attributes:e,postId:t,context:n="frontend",children:r}){const[s,a]=o.useState(It),[i,l]=o.useState(null),[d,f]=o.useState(!0),[h,m]=o.useState(null),w=`${e.mode}:${t??"none"}`,D=o.useCallback(async()=>{f(!0),m(null);try{let g=It;if(g||(lt?g=await lt:(lt=zs(),g=await lt,It=g,lt=null)),a(g),n==="editor")l({visible:!0,reason:null,composer:{feed:e.mode==="post_reviews"?"post_reviews":"user_timeline",can_post:!0,post_as:"current_user",placeholder:"What's on your mind?"},reviews:null,current_post:null,current_author:null,filtering_options:{all:"All"},show_usernames:!0});else{let k=mn.get(w);if(!k){const v=await Gs(e.mode,t);k={visible:v.visible,reason:v.reason,composer:v.composer,reviews:v.reviews,current_post:v.current_post,current_author:v.current_author,filtering_options:v.filtering_options,show_usernames:v.show_usernames},mn.set(w,k)}l(k)}}catch(g){m(g instanceof Error?g.message:"Failed to load configuration")}finally{f(!1)}},[e.mode,t,w,n]),R=o.useCallback(async()=>{It=null,lt=null,mn.delete(w),await D()},[D,w]);o.useEffect(()=>{D()},[D]);const C={config:s,postContext:i,attributes:e,context:n,isLoading:d,error:h,refetch:R};return React.createElement(ur.Provider,{value:C},r)}function Ye(){const e=o.useContext(ur);if(!e)throw new Error("useTimelineContext must be used within a TimelineProvider");return e}function Ue(){const{config:e,isLoading:t,error:n,refetch:r}=Ye();return{config:e,isLoading:t,error:n,refetch:r}}function dr(){const{attributes:e}=Ye();return e}function ct(){const{config:e}=Ye();return e?.current_user??null}function ha(){const{config:e}=Ye();return e?.permissions??{can_post:!1,can_upload:!1,can_moderate:!1,is_logged_in:!1}}function pa(){const{postContext:e,context:t}=Ye();return t==="editor"?{visible:!0,reason:null}:e?{visible:e.visible,reason:e.reason}:{visible:!0,reason:null}}function ga(){const{postContext:e,context:t}=Ye();return t==="editor"?{feed:"user_timeline",can_post:!0,post_as:"current_user",placeholder:"What's on your mind?"}:e?.composer??null}function va(){const{postContext:e}=Ye();return e?.filtering_options??{all:"All"}}function ut(){const{config:e}=Ye();return e?.strings?e.strings:{compose_placeholder:"What's on your mind?",compose_submit:"Post",compose_submitting:"Posting...",like:"Like",unlike:"Unlike",comment:"Comment",comments:"Comments",reply:"Reply",replies:"Replies",repost:"Repost",unrepost:"Unrepost",quote:"Quote",edit:"Edit",delete:"Delete",share:"Share",loading:"Loading...",load_more:"Load more",no_posts:"No posts available",no_comments:"No comments yet",error_generic:"Something went wrong",error_network:"Network error. Please try again.",just_now:"Just now",minutes_ago:"%d minutes ago",hours_ago:"%d hours ago",days_ago:"%d days ago",edited:"Edited",pending_approval:"Pending approval",approve:"Approve",mark_pending:"Mark as pending",delete_confirm:"Are you sure you want to delete this post?",delete_comment_confirm:"Are you sure you want to delete this comment?",content_too_short:"Content is too short",content_too_long:"Content is too long",file_too_large:"File is too large",file_type_not_allowed:"File type not allowed",search_placeholder:"Search posts...",search_no_results:"No results found"}}const _a={mode:"user_feed",order:"latest",time:"all_time"};function ya(e="user_feed",t={},n={}){const[r,s]=o.useState({..._a,...t,mode:e}),[a,i]=o.useState({statuses:[],isLoading:!0,isLoadingMore:!1,hasMore:!0,error:null,page:1}),l=o.useRef(!0),d=o.useRef(null),f=o.useRef(e),[h,m]=o.useState(!1),w=o.useRef(null),D=3e4,R=o.useCallback(y=>{const L={mode:e,order:r.order,time:r.time,time_custom:r.timeCustom,search:r.search,filter:r.filter,post_id:r.postId,author_id:r.authorId,page:y};return console.log("[useStatusFeed] Building feed params:",L),L},[e,r.order,r.time,r.timeCustom,r.search,r.filter,r.postId,r.authorId]),C=o.useCallback(async(y,L=!1)=>{d.current&&d.current.abort(),d.current=new AbortController,i(L?B=>({...B,isLoadingMore:!0,error:null}):B=>({...B,isLoading:!0,error:null,statuses:[],page:1}));try{const B=R(y),J=await ra(B);if(!l.current)return;const te=Array.isArray(J)?J:Array.isArray(J?.data)?J.data:[],ne=Array.isArray(J)?!1:J?.has_more??!1;i(W=>({...W,statuses:L?[...W.statuses,...te]:te,hasMore:ne,page:y,isLoading:!1,isLoadingMore:!1}))}catch(B){if(!l.current||B instanceof Error&&B.name==="AbortError")return;i(J=>({...J,isLoading:!1,isLoadingMore:!1,error:B instanceof Error?B.message:"Failed to load feed"}))}},[R]),g=o.useCallback(async()=>{a.isLoadingMore||!a.hasMore||await C(a.page+1,!0)},[a.isLoadingMore,a.hasMore,a.page,C]),k=o.useCallback(async()=>{await C(1,!1)},[C]),v=o.useCallback(y=>{s(L=>({...L,...y,mode:e}))},[e]),S=o.useCallback(y=>{i(L=>({...L,statuses:[y,...L.statuses]}))},[]),_=o.useCallback(y=>{i(L=>({...L,statuses:L.statuses.map(B=>B.id===y.id?y:B)}))},[]),E=o.useCallback(y=>{i(L=>({...L,statuses:L.statuses.filter(B=>B.id!==y)}))},[]);o.useEffect(()=>{f.current!==e&&(console.log("[useStatusFeed] Mode changed:",{from:f.current,to:e,willRefetch:!0}),f.current=e,s(y=>({...y,mode:e})),C(1,!1))},[e,C]),o.useEffect(()=>{C(1,!1)},[]),o.useEffect(()=>{f.current===e&&C(1,!1)},[r.order,r.time,r.timeCustom,r.search,r.filter]);const O=o.useCallback((y=D)=>{w.current||(m(!0),console.log(`[useStatusFeed] Starting polling every ${y}ms`),w.current=setInterval(()=>{!a.isLoading&&!a.isLoadingMore&&(console.log("[useStatusFeed] Polling refresh"),C(1,!1))},y))},[C,a.isLoading,a.isLoadingMore]),b=o.useCallback(()=>{w.current&&(clearInterval(w.current),w.current=null,m(!1),console.log("[useStatusFeed] Stopped polling"))},[]);return o.useEffect(()=>(n.enabled&&n.intervalMs&&O(n.intervalMs),()=>b()),[n.enabled,n.intervalMs,O,b]),o.useEffect(()=>(l.current=!0,()=>{l.current=!1,d.current&&d.current.abort(),w.current&&clearInterval(w.current)}),[]),{statuses:a.statuses,isLoading:a.isLoading,isLoadingMore:a.isLoadingMore,hasMore:a.hasMore,error:a.error,loadMore:g,refresh:k,setFilters:v,addStatus:S,updateStatus:_,removeStatus:E,startPolling:O,stopPolling:b,isPolling:h,filters:{...r,mode:e}}}function wa(e,t,n){const{config:r}=Ue(),s=ct(),[a,i]=o.useState({isLiking:!1,isReposting:!1,isDeleting:!1,isApproving:!1,isMarkingPending:!1,isRemovingPreview:!1}),[l,d]=o.useState({}),f=o.useRef({}),h=o.useCallback(()=>{d({}),f.current={}},[]);o.useEffect(()=>{const k=E=>{const{action:O}=E.detail,b=l.current_user?.has_liked??e.current_user.has_liked,y=l.likes?.count??e.likes.count,L=l.likes?.last3??e.likes.last3??[];if(O==="like"&&b||O==="unlike"&&!b)return;const B=O==="like",J=Math.max(0,y+(B?1:-1));let te=[...L];B&&s?(te.unshift({id:s.id,type:"user",display_name:s.display_name,link:s.link??"",avatar_url:s.avatar_url}),te=te.slice(0,3)):!B&&s&&(te=te.filter(ne=>!(ne.type==="user"&&ne.id===s.id))),d(ne=>({...ne,likes:{...e.likes,count:J,last3:te},current_user:{...ne.current_user??e.current_user,has_liked:B}}))},v=E=>{const{action:O}=E.detail,b=O==="repost";d(y=>({...y,current_user:{...y.current_user??e.current_user,has_reposted:b}}))},S=`voxel/tl/status/${e.id}/like`,_=`voxel/tl/status/${e.id}/repost`;return document.addEventListener(S,k),document.addEventListener(_,v),()=>{document.removeEventListener(S,k),document.removeEventListener(_,v)}},[e.id,e.current_user,e.likes,l,s]);const m=o.useCallback(async()=>{if(a.isLiking)return{success:!1,message:"Action in progress"};const k=r?.nonces?.status_like;if(!k)return{success:!1,message:"Configuration not loaded"};const v=l.current_user?.has_liked??e.current_user.has_liked;l.likes?.count??e.likes.count,l.likes?.last3??e.likes.last3,f.current={likes:l.likes??{...e.likes},current_user:l.current_user??{...e.current_user}};const S=v?"unlike":"like";document.dispatchEvent(new CustomEvent(`voxel/tl/status/${e.id}/like`,{detail:{action:S}})),i(_=>({..._,isLiking:!0}));try{return await Qs(e.id,k)}catch(_){const E=S==="unlike"?"like":"unlike";return document.dispatchEvent(new CustomEvent(`voxel/tl/status/${e.id}/like`,{detail:{action:E}})),{success:!1,message:_ instanceof Error?_.message:"Failed to like status"}}finally{i(_=>({..._,isLiking:!1}))}},[e,l,a.isLiking,r?.nonces?.status_like]),w=o.useCallback(async()=>{if(a.isReposting)return{success:!1,message:"Action in progress",action:"repost"};const k=r?.nonces?.status_repost;if(!k)return{success:!1,message:"Configuration not loaded",action:"repost"};const v=l.current_user?.has_reposted??e.current_user.has_reposted;f.current={current_user:l.current_user??{...e.current_user}};const S=v?"unrepost":"repost";document.dispatchEvent(new CustomEvent(`voxel/tl/status/${e.id}/repost`,{detail:{action:S}})),i(_=>({..._,isReposting:!0}));try{return await Ks(e.id,k)}catch(_){const E=S==="unrepost"?"repost":"unrepost";return document.dispatchEvent(new CustomEvent(`voxel/tl/status/${e.id}/repost`,{detail:{action:E}})),{success:!1,message:_ instanceof Error?_.message:"Failed to repost",action:"repost"}}finally{i(_=>({..._,isReposting:!1}))}},[e,l,a.isReposting,r?.nonces?.status_repost]),D=o.useCallback(async()=>{if(a.isDeleting)return!1;const k=r?.nonces?.status_delete??r?.nonces?.status_edit??"";if(!k)return console.error("[handleDelete] No nonce available for delete"),!1;i(v=>({...v,isDeleting:!0}));try{const v=await Xs(e.id,k);return v.deleted&&n&&n(e.id),v.deleted}catch(v){return console.error("[handleDelete] Error:",v),!1}finally{i(v=>({...v,isDeleting:!1}))}},[e.id,a.isDeleting,n,r?.nonces?.status_delete,r?.nonces?.status_edit]),R=o.useCallback(async()=>{if(a.isApproving)return null;const k=r?.nonces?.status_edit??r?.nonces?.status_moderate??"";if(!k)return console.error("[handleApprove] No nonce available for moderation"),null;i(v=>({...v,isApproving:!0}));try{const v=await ta(e.id,k);if(v.success&&t){const S={...e,is_pending:!1,badges:v.badges||[]};return t(S),S}return null}catch(v){return console.error("[handleApprove] Error:",v),null}finally{i(v=>({...v,isApproving:!1}))}},[e,a.isApproving,r?.nonces?.status_edit,r?.nonces?.status_moderate,t]),C=o.useCallback(async()=>{if(a.isMarkingPending)return null;const k=r?.nonces?.status_edit??r?.nonces?.status_moderate??"";if(!k)return console.error("[handleMarkPending] No nonce available for moderation"),null;i(v=>({...v,isMarkingPending:!0}));try{const v=await na(e.id,k);if(v.success&&t){const S={...e,is_pending:!0,badges:v.badges||[]};return t(S),S}return null}catch(v){return console.error("[handleMarkPending] Error:",v),null}finally{i(v=>({...v,isMarkingPending:!1}))}},[e,a.isMarkingPending,r?.nonces?.status_edit,r?.nonces?.status_moderate,t]),g=o.useCallback(async()=>{if(a.isRemovingPreview)return!1;f.current={link_preview:e.link_preview},d(k=>({...k,link_preview:null})),i(k=>({...k,isRemovingPreview:!0}));try{return(await ea(e.id)).removed}catch{return d(v=>({...v,link_preview:f.current.link_preview})),!1}finally{i(k=>({...k,isRemovingPreview:!1}))}},[e.id,e.link_preview,a.isRemovingPreview]);return{actionState:a,optimisticStatus:l,handleLike:m,handleRepost:w,handleDelete:D,handleApprove:R,handleMarkPending:C,handleRemoveLinkPreview:g,resetOptimisticState:h}}function Ca(e,t,n=!0){const[r,s]=o.useState({comments:[],isLoading:n,isLoadingMore:!1,hasMore:!0,error:null,page:1}),a=o.useRef(!0),i=o.useRef(null),l=o.useRef(!1),d=o.useCallback(C=>({status_id:e,parent_id:t,page:C}),[e,t]),f=o.useCallback(async(C,g=!1)=>{i.current&&i.current.abort(),i.current=new AbortController,s(g?k=>({...k,isLoadingMore:!0,error:null}):k=>({...k,isLoading:!0,error:null,comments:[],page:1}));try{const k=d(C);console.log("[useCommentFeed] Fetching comments:",k);const v=await ca(k);if(!a.current)return;const S=Array.isArray(v)?v:Array.isArray(v?.data)?v.data:[],_=Array.isArray(v)?!1:v?.has_more??!1;console.log("[useCommentFeed] Got comments:",{count:S.length,hasMore:_}),s(E=>({...E,comments:g?[...E.comments,...S]:S,hasMore:_,page:C,isLoading:!1,isLoadingMore:!1}))}catch(k){if(!a.current||k instanceof Error&&k.name==="AbortError")return;console.error("[useCommentFeed] Error fetching comments:",k),s(v=>({...v,isLoading:!1,isLoadingMore:!1,error:k instanceof Error?k.message:"Failed to load comments"}))}},[d]),h=o.useCallback(async()=>{r.isLoadingMore||!r.hasMore||await f(r.page+1,!0)},[r.isLoadingMore,r.hasMore,r.page,f]),m=o.useCallback(async()=>{await f(1,!1)},[f]),w=o.useCallback(C=>{s(g=>({...g,comments:[...g.comments,C]}))},[]),D=o.useCallback(C=>{s(g=>({...g,comments:g.comments.map(k=>k.id===C.id?C:k)}))},[]),R=o.useCallback(C=>{s(g=>({...g,comments:g.comments.filter(k=>k.id!==C)}))},[]);return o.useEffect(()=>{n&&!l.current&&(l.current=!0,f(1,!1))},[n,f]),o.useEffect(()=>{l.current&&f(1,!1)},[e,t]),o.useEffect(()=>(a.current=!0,()=>{a.current=!1,i.current&&i.current.abort()}),[]),{comments:r.comments,isLoading:r.isLoading,isLoadingMore:r.isLoadingMore,hasMore:r.hasMore,error:r.error,loadMore:h,refresh:m,addComment:w,updateComment:D,removeComment:R}}function ka(e,t,n){const{config:r}=Ue(),s=ct(),[a,i]=o.useState({isLiking:!1,isDeleting:!1,isApproving:!1}),[l,d]=o.useState({}),f=o.useRef({}),h=o.useCallback(()=>{d({}),f.current={}},[]),m=o.useCallback(async()=>{if(a.isLiking)return{success:!1,message:"Action in progress"};const C=r?.nonces?.comment_like;if(!C)return{success:!1,message:"Configuration not loaded"};const g=l.current_user?.has_liked??e.current_user.has_liked,k=l.likes?.count??e.likes.count,v=l.likes?.last3??e.likes.last3??[];f.current={likes:l.likes??{...e.likes},current_user:l.current_user??{...e.current_user}};const S=!g,_=Math.max(0,k+(S?1:-1));let E=[...v];S&&s?(E.unshift({id:s.id,type:"user",display_name:s.display_name,link:s.link??"",avatar_url:s.avatar_url}),E=E.slice(0,3)):!S&&s&&(E=E.filter(y=>!(y.type==="user"&&y.id===s.id)));const O={...e.likes,count:_,last3:E},b={...e.current_user,has_liked:S};d(y=>({...y,likes:O,current_user:b})),i(y=>({...y,isLiking:!0}));try{return await ia(e.id,C)}catch(y){return d(L=>({...L,likes:f.current.likes,current_user:f.current.current_user})),{success:!1,message:y instanceof Error?y.message:"Failed to like comment"}}finally{i(y=>({...y,isLiking:!1}))}},[e,l,a.isLiking,r?.nonces?.comment_like,s]),w=o.useCallback(async()=>{if(a.isDeleting)return!1;const C=r?.nonces?.comment_delete;if(!C)return console.error("[useCommentActions] No comment_delete nonce available"),!1;i(g=>({...g,isDeleting:!0}));try{const g=await aa(e.id,C);return g.deleted&&n&&n(e.id),g.deleted}catch(g){return console.error("[useCommentActions] Delete failed:",g),!1}finally{i(g=>({...g,isDeleting:!1}))}},[e.id,a.isDeleting,r?.nonces?.comment_delete,n]),D=o.useCallback(async()=>{if(a.isApproving)return null;const C=r?.nonces?.comment_edit;if(!C)return console.error("[useCommentActions] No comment_edit nonce available"),null;i(g=>({...g,isApproving:!0}));try{const g=await oa(e.id,C);return t&&t(g),g}catch(g){return console.error("[useCommentActions] Approve failed:",g),null}finally{i(g=>({...g,isApproving:!1}))}},[e.id,a.isApproving,r?.nonces?.comment_edit,t]),R=o.useCallback(async()=>{if(a.isApproving)return null;const C=r?.nonces?.comment_edit;if(!C)return console.error("[useCommentActions] No comment_edit nonce available"),null;i(g=>({...g,isApproving:!0}));try{const g=await la(e.id,C);return t&&t(g),g}catch(g){return console.error("[useCommentActions] Mark pending failed:",g),null}finally{i(g=>({...g,isApproving:!1}))}},[e.id,a.isApproving,r?.nonces?.comment_edit,t]);return{actionState:a,optimisticComment:l,handleLike:m,handleDelete:w,handleApprove:D,handleMarkPending:R,resetOptimisticState:h}}const Ea={maxFiles:5,maxFileSize:2*1024*1024,allowedTypes:["image/jpeg","image/png","image/gif","image/webp"],allowedExtensions:["jpg","jpeg","png","gif","webp"]};function xa(){return`upload-${Date.now()}-${Math.random().toString(36).slice(2,9)}`}function ba(e){return e.split(".").pop()?.toLowerCase()||""}function fr(e={}){const t={...Ea,...e},[n,r]=o.useState([]),[s,a]=o.useState([]),i=o.useRef(new Map),l=o.useCallback(C=>{if(C.size>t.maxFileSize)return{valid:!1,error:`File is too large. Maximum size is ${(t.maxFileSize/1048576).toFixed(1)}MB.`};if(!t.allowedTypes.includes(C.type))return{valid:!1,error:`File type "${C.type}" is not allowed.`};const g=ba(C.name);return t.allowedExtensions.includes(g)?{valid:!0}:{valid:!1,error:`File extension ".${g}" is not allowed.`}},[t]),d=o.useCallback(C=>{const g=Array.from(C),k=n.length+s.length,v=t.maxFiles-k;if(v<=0){console.warn(`Maximum ${t.maxFiles} files allowed.`);return}const _=g.slice(0,v).map(E=>{const O=l(E);return{id:xa(),file:E,progress:0,status:O.valid?"pending":"error",error:O.error}});r(E=>[...E,..._])},[n.length,s.length,t.maxFiles,l]),f=o.useCallback(C=>{const g=i.current.get(C);g&&(g.abort(),i.current.delete(C)),r(k=>k.filter(v=>v.id!==C)),a(k=>k.filter(v=>v.id!==parseInt(C)))},[]),h=o.useCallback(()=>{i.current.forEach(C=>C.abort()),i.current.clear(),r([]),a([])},[]),m=o.useCallback(async C=>{if(C.status==="completed"||C.status==="error")return null;r(g=>g.map(k=>k.id===C.id?{...k,status:"uploading",progress:0}:k));try{const g=await ua(C.file,v=>{r(S=>S.map(_=>_.id===C.id?{..._,progress:v}:_))});return r(v=>v.map(S=>S.id===C.id?{...S,status:"completed",progress:100,result:g}:S)),{id:g.id,url:g.url,alt:g.name,type:g.mime_type.startsWith("image/")?"image":"file",mime_type:g.mime_type,thumbnail_url:g.url}}catch(g){return r(k=>k.map(v=>v.id===C.id?{...v,status:"error",error:g instanceof Error?g.message:"Upload failed"}:v)),null}},[]),w=o.useCallback(async()=>{const C=n.filter(v=>v.status==="pending"),k=(await Promise.all(C.map(v=>m(v)))).filter(v=>v!==null);return a(v=>[...v,...k]),k},[n,m]),D=o.useCallback(async C=>{const g=n.find(v=>v.id===C);if(!g||g.status!=="error")return;r(v=>v.map(S=>S.id===C?{...S,status:"pending",error:void 0}:S));const k=await m({...g,status:"pending"});k&&a(v=>[...v,k])},[n,m]),R=n.some(C=>C.status==="uploading");return{uploads:n,isUploading:R,completedFiles:s,addFiles:d,removeFile:f,clearAll:h,uploadAll:w,retryUpload:D,validateFile:l}}const be={mention:/@\[([^\]]+)\]\((?:user|post):(\d+)\)|@(\w+)/g,hashtag:/#(\w+)/g,url:/https?:\/\/[^\s<>"{}|\\^`[\]]+/gi,inlineCode:/`([^`]+)`/g,codeBlock:/```([\s\S]*?)```/g,bold:/\*\*([^*]+)\*\*/g,italic:/\*([^*]+)\*/g,strikethrough:/~~([^~]+)~~/g};function mr(e){if(!e)return[];const t=[];let n=e;const r=[...e.matchAll(be.codeBlock)];for(const s of r){const a=n.indexOf(s[0]);a>0&&t.push(...hr(n.slice(0,a))),t.push({type:"code",content:s[1].trim(),raw:s[0]}),n=n.slice(a+s[0].length)}return n&&t.push(...hr(n)),t}function hr(e){const t=[];let n=0;const r=[];for(const a of e.matchAll(be.mention)){const i=a[1]!==void 0;r.push({type:"mention",index:a.index,length:a[0].length,content:i?a[1]:a[3],raw:a[0],metadata:i?{userId:parseInt(a[2])}:void 0})}for(const a of e.matchAll(be.hashtag))r.push({type:"hashtag",index:a.index,length:a[0].length,content:a[1],raw:a[0],metadata:{hashtag:a[1]}});for(const a of e.matchAll(be.url))r.push({type:"link",index:a.index,length:a[0].length,content:a[0],raw:a[0],metadata:{url:a[0]}});for(const a of e.matchAll(be.inlineCode))r.push({type:"code",index:a.index,length:a[0].length,content:a[1],raw:a[0]});for(const a of e.matchAll(be.bold))r.push({type:"bold",index:a.index,length:a[0].length,content:a[1],raw:a[0]});for(const a of e.matchAll(be.italic)){const i=e[a.index-1],l=e[a.index+a[0].length];i!=="*"&&l!=="*"&&r.push({type:"italic",index:a.index,length:a[0].length,content:a[1],raw:a[0]})}for(const a of e.matchAll(be.strikethrough))r.push({type:"strikethrough",index:a.index,length:a[0].length,content:a[1],raw:a[0]});r.sort((a,i)=>a.index-i.index);const s=[];for(const a of r)s.some(l=>a.index<l.index+l.length&&a.index+a.length>l.index)||s.push(a);for(const a of s){if(a.index>n){const i=e.slice(n,a.index);i&&t.push({type:"text",content:i,raw:i})}t.push({type:a.type,content:a.content,raw:a.raw,metadata:a.metadata}),n=a.index+a.length}if(n<e.length){const a=e.slice(n);a&&t.push({type:"text",content:a,raw:a})}return t}function Sa(e){return e.replace(be.codeBlock,"$1").replace(be.inlineCode,"$1").replace(be.bold,"$1").replace(be.italic,"$1").replace(be.strikethrough,"$1").replace(/@\[([^\]]+)\]\([^)]+\)/g,"@$1").replace(/#(\w+)/g,"#$1")}function Ma(e,t,n=!0){if(e.length<=t)return{text:e,isTruncated:!1};let r=e.slice(0,t);if(n){const s=r.lastIndexOf(" ");s>t*.5&&(r=r.slice(0,s))}return{text:r.trim()+"...",isTruncated:!0}}function pr(e){return Sa(e).length}const tt={minute:60,hour:3600,day:3600*24,week:3600*24*7};function Da(e,t){const n=new Date(e),s=Math.floor((new Date().getTime()-n.getTime())/1e3),i={...{just_now:"Just now",minutes_ago:"%d minutes ago",hours_ago:"%d hours ago",days_ago:"%d days ago"},...t};if(s<tt.minute)return i.just_now;if(s<tt.hour){const l=Math.floor(s/tt.minute);return i.minutes_ago.replace("%d",String(l))}if(s<tt.day){const l=Math.floor(s/tt.hour);return i.hours_ago.replace("%d",String(l))}if(s<tt.week){const l=Math.floor(s/tt.day);return i.days_ago.replace("%d",String(l))}return Ra(e)}function Ra(e,t={year:"numeric",month:"short",day:"numeric"}){return new Date(e).toLocaleDateString(void 0,t)}function Na(e,t){return e.length<=t?e:e.slice(0,t-3).trim()+"..."}const La=({isOpen:e,popupId:t,title:n,icon:r,saveLabel:s="Save",clearLabel:a="Clear",showSave:i=!0,showClear:l=!0,showClearMobile:d=!1,showClose:f=!0,onSave:h,onClear:m,onClose:w,children:D,wrapperClass:R="",controllerClass:C=""})=>{const g=o.useRef(null);o.useEffect(()=>{if(!e)return;const S=_=>{_.key==="Escape"&&w()};return document.addEventListener("keydown",S),()=>{document.removeEventListener("keydown",S)}},[e,w]);const k=S=>{S.target===S.currentTarget&&w()},v=S=>{S.stopPropagation()};return e?o.createElement("div",{className:"elementor vx-popup"},o.createElement("div",{className:"ts-popup-root elementor-element","data-popup-id":t},o.createElement("div",{onClick:k},o.createElement("div",{className:`ts-field-popup-container ${R}`},o.createElement("div",{ref:g,className:"ts-field-popup triggers-blur",onClick:v},n&&o.createElement("div",{className:"ts-popup-head flexify ts-sticky-top"},o.createElement("div",{className:"ts-popup-name flexify"},r&&o.createElement("span",{dangerouslySetInnerHTML:{__html:r}}),o.createElement("span",null,n)),o.createElement("ul",{className:"flexify simplify-ul"},f&&o.createElement("li",{className:"flexify ts-popup-close"},o.createElement("a",{href:"#",className:"ts-icon-btn",role:"button","aria-label":"Close popup",onClick:S=>{S.preventDefault(),w()},onMouseDown:S=>{S.preventDefault(),w()}},o.createElement("svg",{fill:"currentColor",width:"52",height:"52",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M1.46967 1.46967C1.76256 1.17678 2.23744 1.17678 2.53033 1.46967L12 10.9393L21.4697 1.46967C21.7626 1.17678 22.2374 1.17678 22.5303 1.46967C22.8232 1.76256 22.8232 2.23744 22.5303 2.53033L13.0607 12L22.5303 21.4697C22.8232 21.7626 22.8232 22.2374 22.5303 22.5303C22.2374 22.8232 21.7626 22.8232 21.4697 22.5303L12 13.0607L2.53033 22.5303C2.23744 22.8232 1.76256 22.8232 1.46967 22.5303C1.17678 22.2374 1.17678 21.7626 1.46967 21.4697L10.9393 12L1.46967 2.53033C1.17678 2.23744 1.17678 1.76256 1.46967 1.46967Z"})))))),o.createElement("div",{className:"ts-popup-content-wrapper min-scroll"},D),(i||l)&&o.createElement("div",{className:`ts-popup-controller ${C}`},o.createElement("ul",{className:"flexify simplify-ul"},o.createElement("li",{className:"flexify ts-popup-close"},o.createElement("a",{href:"#",className:"ts-icon-btn",role:"button",onClick:S=>{S.preventDefault(),w()},onMouseDown:S=>{S.preventDefault(),w()}},o.createElement("svg",{fill:"currentColor",width:"52",height:"52",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M1.46967 1.46967C1.76256 1.17678 2.23744 1.17678 2.53033 1.46967L12 10.9393L21.4697 1.46967C21.7626 1.17678 22.2374 1.17678 22.5303 1.46967C22.8232 1.76256 22.8232 2.23744 22.5303 2.53033L13.0607 12L22.5303 21.4697C22.8232 21.7626 22.8232 22.2374 22.5303 22.5303C22.2374 22.8232 21.7626 22.8232 21.4697 22.5303L12 13.0607L2.53033 22.5303C2.23744 22.8232 1.76256 22.8232 1.46967 22.5303C1.17678 22.2374 1.17678 21.7626 1.46967 21.4697L10.9393 12L1.46967 2.53033C1.17678 2.23744 1.17678 1.76256 1.46967 1.46967Z"})))),l&&m&&o.createElement("li",{className:"flexify hide-d",onClick:m},d&&o.createElement("a",{href:"#",className:"ts-icon-btn","aria-label":"Clear"},o.createElement("svg",{fill:"currentColor",width:"52",height:"52",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M12 2.25C6.61522 2.25 2.25 6.61522 2.25 12C2.25 17.3848 6.61522 21.75 12 21.75C17.3848 21.75 21.75 17.3848 21.75 12C21.75 6.61522 17.3848 2.25 12 2.25ZM8.25 10.5C7.83579 10.5 7.5 10.8358 7.5 11.25C7.5 11.6642 7.83579 12 8.25 12H15.75C16.1642 12 16.5 11.6642 16.5 11.25C16.5 10.8358 16.1642 10.5 15.75 10.5H8.25Z"})))),l&&m&&o.createElement("li",{className:"flexify hide-m",onClick:m},o.createElement("a",{href:"#",className:"ts-btn ts-btn-1"},a)),i&&o.createElement("li",{className:"flexify"},o.createElement("a",{href:"#",className:"ts-btn ts-btn-2",onClick:S=>{S.preventDefault(),h()}},s,o.createElement("div",{className:"ts-loader-wrapper"},o.createElement("span",{className:"ts-loader"}))))))))))):null};function Ta(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){var s=!1;try{s=this instanceof r}catch{}return s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var Ht={exports:{}};var gr;function A(){return gr.apply(null,arguments)}function Oa(e){gr=e}function Le(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function nt(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function re(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function hn(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(re(e,t))return!1;return!0}function Ee(e){return e===void 0}function Ve(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function Ct(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function vr(e,t){var n=[],r,s=e.length;for(r=0;r<s;++r)n.push(t(e[r],r));return n}function Ke(e,t){for(var n in t)re(t,n)&&(e[n]=t[n]);return re(t,"toString")&&(e.toString=t.toString),re(t,"valueOf")&&(e.valueOf=t.valueOf),e}function Pe(e,t,n,r){return Zr(e,t,n,r,!0).utc()}function Fa(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function X(e){return e._pf==null&&(e._pf=Fa()),e._pf}var pn;Array.prototype.some?pn=Array.prototype.some:pn=function(e){var t=Object(this),n=t.length>>>0,r;for(r=0;r<n;r++)if(r in t&&e.call(this,t[r],r,t))return!0;return!1};function gn(e){var t=null,n=!1,r=e._d&&!isNaN(e._d.getTime());if(r&&(t=X(e),n=pn.call(t.parsedDateParts,function(s){return s!=null}),r=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n),e._strict&&(r=r&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=r;else return r;return e._isValid}function Wt(e){var t=Pe(NaN);return e!=null?Ke(X(t),e):X(t).userInvalidated=!0,t}var _r=A.momentProperties=[],vn=!1;function _n(e,t){var n,r,s,a=_r.length;if(Ee(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),Ee(t._i)||(e._i=t._i),Ee(t._f)||(e._f=t._f),Ee(t._l)||(e._l=t._l),Ee(t._strict)||(e._strict=t._strict),Ee(t._tzm)||(e._tzm=t._tzm),Ee(t._isUTC)||(e._isUTC=t._isUTC),Ee(t._offset)||(e._offset=t._offset),Ee(t._pf)||(e._pf=X(t)),Ee(t._locale)||(e._locale=t._locale),a>0)for(n=0;n<a;n++)r=_r[n],s=t[r],Ee(s)||(e[r]=s);return e}function kt(e){_n(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),vn===!1&&(vn=!0,A.updateOffset(this),vn=!1)}function Te(e){return e instanceof kt||e!=null&&e._isAMomentObject!=null}function yr(e){A.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function Me(e,t){var n=!0;return Ke(function(){if(A.deprecationHandler!=null&&A.deprecationHandler(null,e),n){var r=[],s,a,i,l=arguments.length;for(a=0;a<l;a++){if(s="",typeof arguments[a]=="object"){s+=`
[`+a+"] ";for(i in arguments[0])re(arguments[0],i)&&(s+=i+": "+arguments[0][i]+", ");s=s.slice(0,-2)}else s=arguments[a];r.push(s)}yr(e+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+new Error().stack),n=!1}return t.apply(this,arguments)},t)}var wr={};function Cr(e,t){A.deprecationHandler!=null&&A.deprecationHandler(e,t),wr[e]||(yr(t),wr[e]=!0)}A.suppressDeprecationWarnings=!1,A.deprecationHandler=null;function je(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function Aa(e){var t,n;for(n in e)re(e,n)&&(t=e[n],je(t)?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function yn(e,t){var n=Ke({},e),r;for(r in t)re(t,r)&&(nt(e[r])&&nt(t[r])?(n[r]={},Ke(n[r],e[r]),Ke(n[r],t[r])):t[r]!=null?n[r]=t[r]:delete n[r]);for(r in e)re(e,r)&&!re(t,r)&&nt(e[r])&&(n[r]=Ke({},n[r]));return n}function wn(e){e!=null&&this.set(e)}var Cn;Object.keys?Cn=Object.keys:Cn=function(e){var t,n=[];for(t in e)re(e,t)&&n.push(t);return n};var Ya={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Pa(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return je(r)?r.call(t,n):r}function Ie(e,t,n){var r=""+Math.abs(e),s=t-r.length,a=e>=0;return(a?n?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+r}var kn=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ut=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,En={},dt={};function V(e,t,n,r){var s=r;typeof r=="string"&&(s=function(){return this[r]()}),e&&(dt[e]=s),t&&(dt[t[0]]=function(){return Ie(s.apply(this,arguments),t[1],t[2])}),n&&(dt[n]=function(){return this.localeData().ordinal(s.apply(this,arguments),e)})}function ja(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function Ia(e){var t=e.match(kn),n,r;for(n=0,r=t.length;n<r;n++)dt[t[n]]?t[n]=dt[t[n]]:t[n]=ja(t[n]);return function(s){var a="",i;for(i=0;i<r;i++)a+=je(t[i])?t[i].call(s,e):t[i];return a}}function Vt(e,t){return e.isValid()?(t=kr(t,e.localeData()),En[t]=En[t]||Ia(t),En[t](e)):e.localeData().invalidDate()}function kr(e,t){var n=5;function r(s){return t.longDateFormat(s)||s}for(Ut.lastIndex=0;n>=0&&Ut.test(e);)e=e.replace(Ut,r),Ut.lastIndex=0,n-=1;return e}var Ha={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Wa(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(kn).map(function(r){return r==="MMMM"||r==="MM"||r==="DD"||r==="dddd"?r.slice(1):r}).join(""),this._longDateFormat[e])}var Ua="Invalid date";function Va(){return this._invalidDate}var Za="%d",Ba=/\d{1,2}/;function za(e){return this._ordinal.replace("%d",e)}var Ga={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function qa(e,t,n,r){var s=this._relativeTime[n];return je(s)?s(e,t,n,r):s.replace(/%d/i,e)}function Ja(e,t){var n=this._relativeTime[e>0?"future":"past"];return je(n)?n(t):n.replace(/%s/i,t)}var Er={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function De(e){return typeof e=="string"?Er[e]||Er[e.toLowerCase()]:void 0}function xn(e){var t={},n,r;for(r in e)re(e,r)&&(n=De(r),n&&(t[n]=e[r]));return t}var Xa={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function Qa(e){var t=[],n;for(n in e)re(e,n)&&t.push({unit:n,priority:Xa[n]});return t.sort(function(r,s){return r.priority-s.priority}),t}var xr=/\d/,Se=/\d\d/,br=/\d{3}/,bn=/\d{4}/,Zt=/[+-]?\d{6}/,oe=/\d\d?/,Sr=/\d\d\d\d?/,Mr=/\d\d\d\d\d\d?/,Bt=/\d{1,3}/,Sn=/\d{1,4}/,zt=/[+-]?\d{1,6}/,ft=/\d+/,Gt=/[+-]?\d+/,Ka=/Z|[+-]\d\d:?\d\d/gi,qt=/Z|[+-]\d\d(?::?\d\d)?/gi,$a=/[+-]?\d+(\.\d{1,3})?/,Et=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,mt=/^[1-9]\d?/,Mn=/^([1-9]\d|\d)/,Jt;Jt={};function P(e,t,n){Jt[e]=je(t)?t:function(r,s){return r&&n?n:t}}function ei(e,t){return re(Jt,e)?Jt[e](t._strict,t._locale):new RegExp(ti(e))}function ti(e){return Ze(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,n,r,s,a){return n||r||s||a}))}function Ze(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Re(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function K(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(n=Re(t)),n}var Dn={};function ae(e,t){var n,r=t,s;for(typeof e=="string"&&(e=[e]),Ve(t)&&(r=function(a,i){i[t]=K(a)}),s=e.length,n=0;n<s;n++)Dn[e[n]]=r}function xt(e,t){ae(e,function(n,r,s,a){s._w=s._w||{},t(n,s._w,s,a)})}function ni(e,t,n){t!=null&&re(Dn,e)&&Dn[e](t,n._a,n,e)}function Xt(e){return e%4===0&&e%100!==0||e%400===0}var we=0,Be=1,He=2,pe=3,Oe=4,ze=5,rt=6,ri=7,si=8;V("Y",0,0,function(){var e=this.year();return e<=9999?Ie(e,4):"+"+e}),V(0,["YY",2],0,function(){return this.year()%100}),V(0,["YYYY",4],0,"year"),V(0,["YYYYY",5],0,"year"),V(0,["YYYYYY",6,!0],0,"year"),P("Y",Gt),P("YY",oe,Se),P("YYYY",Sn,bn),P("YYYYY",zt,Zt),P("YYYYYY",zt,Zt),ae(["YYYYY","YYYYYY"],we),ae("YYYY",function(e,t){t[we]=e.length===2?A.parseTwoDigitYear(e):K(e)}),ae("YY",function(e,t){t[we]=A.parseTwoDigitYear(e)}),ae("Y",function(e,t){t[we]=parseInt(e,10)});function bt(e){return Xt(e)?366:365}A.parseTwoDigitYear=function(e){return K(e)+(K(e)>68?1900:2e3)};var Dr=ht("FullYear",!0);function ai(){return Xt(this.year())}function ht(e,t){return function(n){return n!=null?(Rr(this,e,n),A.updateOffset(this,t),this):St(this,e)}}function St(e,t){if(!e.isValid())return NaN;var n=e._d,r=e._isUTC;switch(t){case"Milliseconds":return r?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return r?n.getUTCSeconds():n.getSeconds();case"Minutes":return r?n.getUTCMinutes():n.getMinutes();case"Hours":return r?n.getUTCHours():n.getHours();case"Date":return r?n.getUTCDate():n.getDate();case"Day":return r?n.getUTCDay():n.getDay();case"Month":return r?n.getUTCMonth():n.getMonth();case"FullYear":return r?n.getUTCFullYear():n.getFullYear();default:return NaN}}function Rr(e,t,n){var r,s,a,i,l;if(!(!e.isValid()||isNaN(n))){switch(r=e._d,s=e._isUTC,t){case"Milliseconds":return void(s?r.setUTCMilliseconds(n):r.setMilliseconds(n));case"Seconds":return void(s?r.setUTCSeconds(n):r.setSeconds(n));case"Minutes":return void(s?r.setUTCMinutes(n):r.setMinutes(n));case"Hours":return void(s?r.setUTCHours(n):r.setHours(n));case"Date":return void(s?r.setUTCDate(n):r.setDate(n));case"FullYear":break;default:return}a=n,i=e.month(),l=e.date(),l=l===29&&i===1&&!Xt(a)?28:l,s?r.setUTCFullYear(a,i,l):r.setFullYear(a,i,l)}}function ii(e){return e=De(e),je(this[e])?this[e]():this}function oi(e,t){if(typeof e=="object"){e=xn(e);var n=Qa(e),r,s=n.length;for(r=0;r<s;r++)this[n[r].unit](e[n[r].unit])}else if(e=De(e),je(this[e]))return this[e](t);return this}function li(e,t){return(e%t+t)%t}var me;Array.prototype.indexOf?me=Array.prototype.indexOf:me=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function Rn(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=li(t,12);return e+=(t-n)/12,n===1?Xt(e)?29:28:31-n%7%2}V("M",["MM",2],"Mo",function(){return this.month()+1}),V("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),V("MMMM",0,0,function(e){return this.localeData().months(this,e)}),P("M",oe,mt),P("MM",oe,Se),P("MMM",function(e,t){return t.monthsShortRegex(e)}),P("MMMM",function(e,t){return t.monthsRegex(e)}),ae(["M","MM"],function(e,t){t[Be]=K(e)-1}),ae(["MMM","MMMM"],function(e,t,n,r){var s=n._locale.monthsParse(e,r,n._strict);s!=null?t[Be]=s:X(n).invalidMonth=e});var ci="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Nr="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Lr=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ui=Et,di=Et;function fi(e,t){return e?Le(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Lr).test(t)?"format":"standalone"][e.month()]:Le(this._months)?this._months:this._months.standalone}function mi(e,t){return e?Le(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Lr.test(t)?"format":"standalone"][e.month()]:Le(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function hi(e,t,n){var r,s,a,i=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)a=Pe([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(a,"").toLocaleLowerCase();return n?t==="MMM"?(s=me.call(this._shortMonthsParse,i),s!==-1?s:null):(s=me.call(this._longMonthsParse,i),s!==-1?s:null):t==="MMM"?(s=me.call(this._shortMonthsParse,i),s!==-1?s:(s=me.call(this._longMonthsParse,i),s!==-1?s:null)):(s=me.call(this._longMonthsParse,i),s!==-1?s:(s=me.call(this._shortMonthsParse,i),s!==-1?s:null))}function pi(e,t,n){var r,s,a;if(this._monthsParseExact)return hi.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(s=Pe([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),!n&&!this._monthsParse[r]&&(a="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[r]=new RegExp(a.replace(".",""),"i")),n&&t==="MMMM"&&this._longMonthsParse[r].test(e))return r;if(n&&t==="MMM"&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function Tr(e,t){if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=K(t);else if(t=e.localeData().monthsParse(t),!Ve(t))return e}var n=t,r=e.date();return r=r<29?r:Math.min(r,Rn(e.year(),n)),e._isUTC?e._d.setUTCMonth(n,r):e._d.setMonth(n,r),e}function Or(e){return e!=null?(Tr(this,e),A.updateOffset(this,!0),this):St(this,"Month")}function gi(){return Rn(this.year(),this.month())}function vi(e){return this._monthsParseExact?(re(this,"_monthsRegex")||Fr.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(re(this,"_monthsShortRegex")||(this._monthsShortRegex=ui),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function _i(e){return this._monthsParseExact?(re(this,"_monthsRegex")||Fr.call(this),e?this._monthsStrictRegex:this._monthsRegex):(re(this,"_monthsRegex")||(this._monthsRegex=di),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function Fr(){function e(d,f){return f.length-d.length}var t=[],n=[],r=[],s,a,i,l;for(s=0;s<12;s++)a=Pe([2e3,s]),i=Ze(this.monthsShort(a,"")),l=Ze(this.months(a,"")),t.push(i),n.push(l),r.push(l),r.push(i);t.sort(e),n.sort(e),r.sort(e),this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function yi(e,t,n,r,s,a,i){var l;return e<100&&e>=0?(l=new Date(e+400,t,n,r,s,a,i),isFinite(l.getFullYear())&&l.setFullYear(e)):l=new Date(e,t,n,r,s,a,i),l}function Mt(e){var t,n;return e<100&&e>=0?(n=Array.prototype.slice.call(arguments),n[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Qt(e,t,n){var r=7+t-n,s=(7+Mt(e,0,r).getUTCDay()-t)%7;return-s+r-1}function Ar(e,t,n,r,s){var a=(7+n-r)%7,i=Qt(e,r,s),l=1+7*(t-1)+a+i,d,f;return l<=0?(d=e-1,f=bt(d)+l):l>bt(e)?(d=e+1,f=l-bt(e)):(d=e,f=l),{year:d,dayOfYear:f}}function Dt(e,t,n){var r=Qt(e.year(),t,n),s=Math.floor((e.dayOfYear()-r-1)/7)+1,a,i;return s<1?(i=e.year()-1,a=s+Ge(i,t,n)):s>Ge(e.year(),t,n)?(a=s-Ge(e.year(),t,n),i=e.year()+1):(i=e.year(),a=s),{week:a,year:i}}function Ge(e,t,n){var r=Qt(e,t,n),s=Qt(e+1,t,n);return(bt(e)-r+s)/7}V("w",["ww",2],"wo","week"),V("W",["WW",2],"Wo","isoWeek"),P("w",oe,mt),P("ww",oe,Se),P("W",oe,mt),P("WW",oe,Se),xt(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=K(e)});function wi(e){return Dt(e,this._week.dow,this._week.doy).week}var Ci={dow:0,doy:6};function ki(){return this._week.dow}function Ei(){return this._week.doy}function xi(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function bi(e){var t=Dt(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}V("d",0,"do","day"),V("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),V("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),V("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),V("e",0,0,"weekday"),V("E",0,0,"isoWeekday"),P("d",oe),P("e",oe),P("E",oe),P("dd",function(e,t){return t.weekdaysMinRegex(e)}),P("ddd",function(e,t){return t.weekdaysShortRegex(e)}),P("dddd",function(e,t){return t.weekdaysRegex(e)}),xt(["dd","ddd","dddd"],function(e,t,n,r){var s=n._locale.weekdaysParse(e,r,n._strict);s!=null?t.d=s:X(n).invalidWeekday=e}),xt(["d","e","E"],function(e,t,n,r){t[r]=K(e)});function Si(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function Mi(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Nn(e,t){return e.slice(t,7).concat(e.slice(0,t))}var Di="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Yr="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ri="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ni=Et,Li=Et,Ti=Et;function Oi(e,t){var n=Le(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?Nn(n,this._week.dow):e?n[e.day()]:n}function Fi(e){return e===!0?Nn(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Ai(e){return e===!0?Nn(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Yi(e,t,n){var r,s,a,i=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)a=Pe([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(a,"").toLocaleLowerCase();return n?t==="dddd"?(s=me.call(this._weekdaysParse,i),s!==-1?s:null):t==="ddd"?(s=me.call(this._shortWeekdaysParse,i),s!==-1?s:null):(s=me.call(this._minWeekdaysParse,i),s!==-1?s:null):t==="dddd"?(s=me.call(this._weekdaysParse,i),s!==-1||(s=me.call(this._shortWeekdaysParse,i),s!==-1)?s:(s=me.call(this._minWeekdaysParse,i),s!==-1?s:null)):t==="ddd"?(s=me.call(this._shortWeekdaysParse,i),s!==-1||(s=me.call(this._weekdaysParse,i),s!==-1)?s:(s=me.call(this._minWeekdaysParse,i),s!==-1?s:null)):(s=me.call(this._minWeekdaysParse,i),s!==-1||(s=me.call(this._weekdaysParse,i),s!==-1)?s:(s=me.call(this._shortWeekdaysParse,i),s!==-1?s:null))}function Pi(e,t,n){var r,s,a;if(this._weekdaysParseExact)return Yi.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(s=Pe([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(s,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(s,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(s,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(a="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[r]=new RegExp(a.replace(".",""),"i")),n&&t==="dddd"&&this._fullWeekdaysParse[r].test(e))return r;if(n&&t==="ddd"&&this._shortWeekdaysParse[r].test(e))return r;if(n&&t==="dd"&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function ji(e){if(!this.isValid())return e!=null?this:NaN;var t=St(this,"Day");return e!=null?(e=Si(e,this.localeData()),this.add(e-t,"d")):t}function Ii(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function Hi(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=Mi(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function Wi(e){return this._weekdaysParseExact?(re(this,"_weekdaysRegex")||Ln.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(re(this,"_weekdaysRegex")||(this._weekdaysRegex=Ni),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Ui(e){return this._weekdaysParseExact?(re(this,"_weekdaysRegex")||Ln.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(re(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Li),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Vi(e){return this._weekdaysParseExact?(re(this,"_weekdaysRegex")||Ln.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(re(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ti),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Ln(){function e(h,m){return m.length-h.length}var t=[],n=[],r=[],s=[],a,i,l,d,f;for(a=0;a<7;a++)i=Pe([2e3,1]).day(a),l=Ze(this.weekdaysMin(i,"")),d=Ze(this.weekdaysShort(i,"")),f=Ze(this.weekdays(i,"")),t.push(l),n.push(d),r.push(f),s.push(l),s.push(d),s.push(f);t.sort(e),n.sort(e),r.sort(e),s.sort(e),this._weekdaysRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Tn(){return this.hours()%12||12}function Zi(){return this.hours()||24}V("H",["HH",2],0,"hour"),V("h",["hh",2],0,Tn),V("k",["kk",2],0,Zi),V("hmm",0,0,function(){return""+Tn.apply(this)+Ie(this.minutes(),2)}),V("hmmss",0,0,function(){return""+Tn.apply(this)+Ie(this.minutes(),2)+Ie(this.seconds(),2)}),V("Hmm",0,0,function(){return""+this.hours()+Ie(this.minutes(),2)}),V("Hmmss",0,0,function(){return""+this.hours()+Ie(this.minutes(),2)+Ie(this.seconds(),2)});function Pr(e,t){V(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}Pr("a",!0),Pr("A",!1);function jr(e,t){return t._meridiemParse}P("a",jr),P("A",jr),P("H",oe,Mn),P("h",oe,mt),P("k",oe,mt),P("HH",oe,Se),P("hh",oe,Se),P("kk",oe,Se),P("hmm",Sr),P("hmmss",Mr),P("Hmm",Sr),P("Hmmss",Mr),ae(["H","HH"],pe),ae(["k","kk"],function(e,t,n){var r=K(e);t[pe]=r===24?0:r}),ae(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),ae(["h","hh"],function(e,t,n){t[pe]=K(e),X(n).bigHour=!0}),ae("hmm",function(e,t,n){var r=e.length-2;t[pe]=K(e.substr(0,r)),t[Oe]=K(e.substr(r)),X(n).bigHour=!0}),ae("hmmss",function(e,t,n){var r=e.length-4,s=e.length-2;t[pe]=K(e.substr(0,r)),t[Oe]=K(e.substr(r,2)),t[ze]=K(e.substr(s)),X(n).bigHour=!0}),ae("Hmm",function(e,t,n){var r=e.length-2;t[pe]=K(e.substr(0,r)),t[Oe]=K(e.substr(r))}),ae("Hmmss",function(e,t,n){var r=e.length-4,s=e.length-2;t[pe]=K(e.substr(0,r)),t[Oe]=K(e.substr(r,2)),t[ze]=K(e.substr(s))});function Bi(e){return(e+"").toLowerCase().charAt(0)==="p"}var zi=/[ap]\.?m?\.?/i,Gi=ht("Hours",!0);function qi(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var Ir={calendar:Ya,longDateFormat:Ha,invalidDate:Ua,ordinal:Za,dayOfMonthOrdinalParse:Ba,relativeTime:Ga,months:ci,monthsShort:Nr,week:Ci,weekdays:Di,weekdaysMin:Ri,weekdaysShort:Yr,meridiemParse:zi},de={},Rt={},Nt;function Ji(e,t){var n,r=Math.min(e.length,t.length);for(n=0;n<r;n+=1)if(e[n]!==t[n])return n;return r}function Hr(e){return e&&e.toLowerCase().replace("_","-")}function Xi(e){for(var t=0,n,r,s,a;t<e.length;){for(a=Hr(e[t]).split("-"),n=a.length,r=Hr(e[t+1]),r=r?r.split("-"):null;n>0;){if(s=Kt(a.slice(0,n).join("-")),s)return s;if(r&&r.length>=n&&Ji(a,r)>=n-1)break;n--}t++}return Nt}function Qi(e){return!!(e&&e.match("^[^/\\\\]*$"))}function Kt(e){var t=null,n;if(de[e]===void 0&&typeof module<"u"&&module&&module.exports&&Qi(e))try{t=Nt._abbr,n=require,n("./locale/"+e),$e(t)}catch{de[e]=null}return de[e]}function $e(e,t){var n;return e&&(Ee(t)?n=qe(e):n=On(e,t),n?Nt=n:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Nt._abbr}function On(e,t){if(t!==null){var n,r=Ir;if(t.abbr=e,de[e]!=null)Cr("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=de[e]._config;else if(t.parentLocale!=null)if(de[t.parentLocale]!=null)r=de[t.parentLocale]._config;else if(n=Kt(t.parentLocale),n!=null)r=n._config;else return Rt[t.parentLocale]||(Rt[t.parentLocale]=[]),Rt[t.parentLocale].push({name:e,config:t}),null;return de[e]=new wn(yn(r,t)),Rt[e]&&Rt[e].forEach(function(s){On(s.name,s.config)}),$e(e),de[e]}else return delete de[e],null}function Ki(e,t){if(t!=null){var n,r,s=Ir;de[e]!=null&&de[e].parentLocale!=null?de[e].set(yn(de[e]._config,t)):(r=Kt(e),r!=null&&(s=r._config),t=yn(s,t),r==null&&(t.abbr=e),n=new wn(t),n.parentLocale=de[e],de[e]=n),$e(e)}else de[e]!=null&&(de[e].parentLocale!=null?(de[e]=de[e].parentLocale,e===$e()&&$e(e)):de[e]!=null&&delete de[e]);return de[e]}function qe(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Nt;if(!Le(e)){if(t=Kt(e),t)return t;e=[e]}return Xi(e)}function $i(){return Cn(de)}function Fn(e){var t,n=e._a;return n&&X(e).overflow===-2&&(t=n[Be]<0||n[Be]>11?Be:n[He]<1||n[He]>Rn(n[we],n[Be])?He:n[pe]<0||n[pe]>24||n[pe]===24&&(n[Oe]!==0||n[ze]!==0||n[rt]!==0)?pe:n[Oe]<0||n[Oe]>59?Oe:n[ze]<0||n[ze]>59?ze:n[rt]<0||n[rt]>999?rt:-1,X(e)._overflowDayOfYear&&(t<we||t>He)&&(t=He),X(e)._overflowWeeks&&t===-1&&(t=ri),X(e)._overflowWeekday&&t===-1&&(t=si),X(e).overflow=t),e}var eo=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,to=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,no=/Z|[+-]\d\d(?::?\d\d)?/,$t=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],An=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],ro=/^\/?Date\((-?\d+)/i,so=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,ao={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Wr(e){var t,n,r=e._i,s=eo.exec(r)||to.exec(r),a,i,l,d,f=$t.length,h=An.length;if(s){for(X(e).iso=!0,t=0,n=f;t<n;t++)if($t[t][1].exec(s[1])){i=$t[t][0],a=$t[t][2]!==!1;break}if(i==null){e._isValid=!1;return}if(s[3]){for(t=0,n=h;t<n;t++)if(An[t][1].exec(s[3])){l=(s[2]||" ")+An[t][0];break}if(l==null){e._isValid=!1;return}}if(!a&&l!=null){e._isValid=!1;return}if(s[4])if(no.exec(s[4]))d="Z";else{e._isValid=!1;return}e._f=i+(l||"")+(d||""),Pn(e)}else e._isValid=!1}function io(e,t,n,r,s,a){var i=[oo(e),Nr.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(s,10)];return a&&i.push(parseInt(a,10)),i}function oo(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function lo(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function co(e,t,n){if(e){var r=Yr.indexOf(e),s=new Date(t[0],t[1],t[2]).getDay();if(r!==s)return X(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function uo(e,t,n){if(e)return ao[e];if(t)return 0;var r=parseInt(n,10),s=r%100,a=(r-s)/100;return a*60+s}function Ur(e){var t=so.exec(lo(e._i)),n;if(t){if(n=io(t[4],t[3],t[2],t[5],t[6],t[7]),!co(t[1],n,e))return;e._a=n,e._tzm=uo(t[8],t[9],t[10]),e._d=Mt.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),X(e).rfc2822=!0}else e._isValid=!1}function fo(e){var t=ro.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(Wr(e),e._isValid===!1)delete e._isValid;else return;if(Ur(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:A.createFromInputFallback(e)}A.createFromInputFallback=Me("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function pt(e,t,n){return e??t??n}function mo(e){var t=new Date(A.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Yn(e){var t,n,r=[],s,a,i;if(!e._d){for(s=mo(e),e._w&&e._a[He]==null&&e._a[Be]==null&&ho(e),e._dayOfYear!=null&&(i=pt(e._a[we],s[we]),(e._dayOfYear>bt(i)||e._dayOfYear===0)&&(X(e)._overflowDayOfYear=!0),n=Mt(i,0,e._dayOfYear),e._a[Be]=n.getUTCMonth(),e._a[He]=n.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=r[t]=s[t];for(;t<7;t++)e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[pe]===24&&e._a[Oe]===0&&e._a[ze]===0&&e._a[rt]===0&&(e._nextDay=!0,e._a[pe]=0),e._d=(e._useUTC?Mt:yi).apply(null,r),a=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[pe]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==a&&(X(e).weekdayMismatch=!0)}}function ho(e){var t,n,r,s,a,i,l,d,f;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(a=1,i=4,n=pt(t.GG,e._a[we],Dt(le(),1,4).year),r=pt(t.W,1),s=pt(t.E,1),(s<1||s>7)&&(d=!0)):(a=e._locale._week.dow,i=e._locale._week.doy,f=Dt(le(),a,i),n=pt(t.gg,e._a[we],f.year),r=pt(t.w,f.week),t.d!=null?(s=t.d,(s<0||s>6)&&(d=!0)):t.e!=null?(s=t.e+a,(t.e<0||t.e>6)&&(d=!0)):s=a),r<1||r>Ge(n,a,i)?X(e)._overflowWeeks=!0:d!=null?X(e)._overflowWeekday=!0:(l=Ar(n,r,s,a,i),e._a[we]=l.year,e._dayOfYear=l.dayOfYear)}A.ISO_8601=function(){},A.RFC_2822=function(){};function Pn(e){if(e._f===A.ISO_8601){Wr(e);return}if(e._f===A.RFC_2822){Ur(e);return}e._a=[],X(e).empty=!0;var t=""+e._i,n,r,s,a,i,l=t.length,d=0,f,h;for(s=kr(e._f,e._locale).match(kn)||[],h=s.length,n=0;n<h;n++)a=s[n],r=(t.match(ei(a,e))||[])[0],r&&(i=t.substr(0,t.indexOf(r)),i.length>0&&X(e).unusedInput.push(i),t=t.slice(t.indexOf(r)+r.length),d+=r.length),dt[a]?(r?X(e).empty=!1:X(e).unusedTokens.push(a),ni(a,r,e)):e._strict&&!r&&X(e).unusedTokens.push(a);X(e).charsLeftOver=l-d,t.length>0&&X(e).unusedInput.push(t),e._a[pe]<=12&&X(e).bigHour===!0&&e._a[pe]>0&&(X(e).bigHour=void 0),X(e).parsedDateParts=e._a.slice(0),X(e).meridiem=e._meridiem,e._a[pe]=po(e._locale,e._a[pe],e._meridiem),f=X(e).era,f!==null&&(e._a[we]=e._locale.erasConvertYear(f,e._a[we])),Yn(e),Fn(e)}function po(e,t,n){var r;return n==null?t:e.meridiemHour!=null?e.meridiemHour(t,n):(e.isPM!=null&&(r=e.isPM(n),r&&t<12&&(t+=12),!r&&t===12&&(t=0)),t)}function go(e){var t,n,r,s,a,i,l=!1,d=e._f.length;if(d===0){X(e).invalidFormat=!0,e._d=new Date(NaN);return}for(s=0;s<d;s++)a=0,i=!1,t=_n({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[s],Pn(t),gn(t)&&(i=!0),a+=X(t).charsLeftOver,a+=X(t).unusedTokens.length*10,X(t).score=a,l?a<r&&(r=a,n=t):(r==null||a<r||i)&&(r=a,n=t,i&&(l=!0));Ke(e,n||t)}function vo(e){if(!e._d){var t=xn(e._i),n=t.day===void 0?t.date:t.day;e._a=vr([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],function(r){return r&&parseInt(r,10)}),Yn(e)}}function _o(e){var t=new kt(Fn(Vr(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Vr(e){var t=e._i,n=e._f;return e._locale=e._locale||qe(e._l),t===null||n===void 0&&t===""?Wt({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),Te(t)?new kt(Fn(t)):(Ct(t)?e._d=t:Le(n)?go(e):n?Pn(e):yo(e),gn(e)||(e._d=null),e))}function yo(e){var t=e._i;Ee(t)?e._d=new Date(A.now()):Ct(t)?e._d=new Date(t.valueOf()):typeof t=="string"?fo(e):Le(t)?(e._a=vr(t.slice(0),function(n){return parseInt(n,10)}),Yn(e)):nt(t)?vo(e):Ve(t)?e._d=new Date(t):A.createFromInputFallback(e)}function Zr(e,t,n,r,s){var a={};return(t===!0||t===!1)&&(r=t,t=void 0),(n===!0||n===!1)&&(r=n,n=void 0),(nt(e)&&hn(e)||Le(e)&&e.length===0)&&(e=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=s,a._l=n,a._i=e,a._f=t,a._strict=r,_o(a)}function le(e,t,n,r){return Zr(e,t,n,r,!1)}var wo=Me("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=le.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:Wt()}),Co=Me("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=le.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:Wt()});function Br(e,t){var n,r;if(t.length===1&&Le(t[0])&&(t=t[0]),!t.length)return le();for(n=t[0],r=1;r<t.length;++r)(!t[r].isValid()||t[r][e](n))&&(n=t[r]);return n}function ko(){var e=[].slice.call(arguments,0);return Br("isBefore",e)}function Eo(){var e=[].slice.call(arguments,0);return Br("isAfter",e)}var xo=function(){return Date.now?Date.now():+new Date},Lt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function bo(e){var t,n=!1,r,s=Lt.length;for(t in e)if(re(e,t)&&!(me.call(Lt,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(r=0;r<s;++r)if(e[Lt[r]]){if(n)return!1;parseFloat(e[Lt[r]])!==K(e[Lt[r]])&&(n=!0)}return!0}function So(){return this._isValid}function Mo(){return Fe(NaN)}function en(e){var t=xn(e),n=t.year||0,r=t.quarter||0,s=t.month||0,a=t.week||t.isoWeek||0,i=t.day||0,l=t.hour||0,d=t.minute||0,f=t.second||0,h=t.millisecond||0;this._isValid=bo(t),this._milliseconds=+h+f*1e3+d*6e4+l*1e3*60*60,this._days=+i+a*7,this._months=+s+r*3+n*12,this._data={},this._locale=qe(),this._bubble()}function tn(e){return e instanceof en}function jn(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function Do(e,t,n){var r=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),a=0,i;for(i=0;i<r;i++)K(e[i])!==K(t[i])&&a++;return a+s}function zr(e,t){V(e,0,0,function(){var n=this.utcOffset(),r="+";return n<0&&(n=-n,r="-"),r+Ie(~~(n/60),2)+t+Ie(~~n%60,2)})}zr("Z",":"),zr("ZZ",""),P("Z",qt),P("ZZ",qt),ae(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=In(qt,e)});var Ro=/([\+\-]|\d\d)/gi;function In(e,t){var n=(t||"").match(e),r,s,a;return n===null?null:(r=n[n.length-1]||[],s=(r+"").match(Ro)||["-",0,0],a=+(s[1]*60)+K(s[2]),a===0?0:s[0]==="+"?a:-a)}function Hn(e,t){var n,r;return t._isUTC?(n=t.clone(),r=(Te(e)||Ct(e)?e.valueOf():le(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),A.updateOffset(n,!1),n):le(e).local()}function Wn(e){return-Math.round(e._d.getTimezoneOffset())}A.updateOffset=function(){};function No(e,t,n){var r=this._offset||0,s;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=In(qt,e),e===null)return this}else Math.abs(e)<16&&!n&&(e=e*60);return!this._isUTC&&t&&(s=Wn(this)),this._offset=e,this._isUTC=!0,s!=null&&this.add(s,"m"),r!==e&&(!t||this._changeInProgress?Xr(this,Fe(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,A.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?r:Wn(this)}function Lo(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function To(e){return this.utcOffset(0,e)}function Oo(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Wn(this),"m")),this}function Fo(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=In(Ka,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Ao(e){return this.isValid()?(e=e?le(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function Yo(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Po(){if(!Ee(this._isDSTShifted))return this._isDSTShifted;var e={},t;return _n(e,this),e=Vr(e),e._a?(t=e._isUTC?Pe(e._a):le(e._a),this._isDSTShifted=this.isValid()&&Do(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function jo(){return this.isValid()?!this._isUTC:!1}function Io(){return this.isValid()?this._isUTC:!1}function Gr(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Ho=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Wo=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Fe(e,t){var n=e,r=null,s,a,i;return tn(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:Ve(e)||!isNaN(+e)?(n={},t?n[t]=+e:n.milliseconds=+e):(r=Ho.exec(e))?(s=r[1]==="-"?-1:1,n={y:0,d:K(r[He])*s,h:K(r[pe])*s,m:K(r[Oe])*s,s:K(r[ze])*s,ms:K(jn(r[rt]*1e3))*s}):(r=Wo.exec(e))?(s=r[1]==="-"?-1:1,n={y:st(r[2],s),M:st(r[3],s),w:st(r[4],s),d:st(r[5],s),h:st(r[6],s),m:st(r[7],s),s:st(r[8],s)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(i=Uo(le(n.from),le(n.to)),n={},n.ms=i.milliseconds,n.M=i.months),a=new en(n),tn(e)&&re(e,"_locale")&&(a._locale=e._locale),tn(e)&&re(e,"_isValid")&&(a._isValid=e._isValid),a}Fe.fn=en.prototype,Fe.invalid=Mo;function st(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function qr(e,t){var n={};return n.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Uo(e,t){var n;return e.isValid()&&t.isValid()?(t=Hn(t,e),e.isBefore(t)?n=qr(e,t):(n=qr(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Jr(e,t){return function(n,r){var s,a;return r!==null&&!isNaN(+r)&&(Cr(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),a=n,n=r,r=a),s=Fe(n,r),Xr(this,s,e),this}}function Xr(e,t,n,r){var s=t._milliseconds,a=jn(t._days),i=jn(t._months);e.isValid()&&(r=r??!0,i&&Tr(e,St(e,"Month")+i*n),a&&Rr(e,"Date",St(e,"Date")+a*n),s&&e._d.setTime(e._d.valueOf()+s*n),r&&A.updateOffset(e,a||i))}var Vo=Jr(1,"add"),Zo=Jr(-1,"subtract");function Qr(e){return typeof e=="string"||e instanceof String}function Bo(e){return Te(e)||Ct(e)||Qr(e)||Ve(e)||Go(e)||zo(e)||e===null||e===void 0}function zo(e){var t=nt(e)&&!hn(e),n=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],s,a,i=r.length;for(s=0;s<i;s+=1)a=r[s],n=n||re(e,a);return t&&n}function Go(e){var t=Le(e),n=!1;return t&&(n=e.filter(function(r){return!Ve(r)&&Qr(e)}).length===0),t&&n}function qo(e){var t=nt(e)&&!hn(e),n=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],s,a;for(s=0;s<r.length;s+=1)a=r[s],n=n||re(e,a);return t&&n}function Jo(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Xo(e,t){arguments.length===1&&(arguments[0]?Bo(arguments[0])?(e=arguments[0],t=void 0):qo(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||le(),r=Hn(n,this).startOf("day"),s=A.calendarFormat(this,r)||"sameElse",a=t&&(je(t[s])?t[s].call(this,n):t[s]);return this.format(a||this.localeData().calendar(s,this,le(n)))}function Qo(){return new kt(this)}function Ko(e,t){var n=Te(e)?e:le(e);return this.isValid()&&n.isValid()?(t=De(t)||"millisecond",t==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf()):!1}function $o(e,t){var n=Te(e)?e:le(e);return this.isValid()&&n.isValid()?(t=De(t)||"millisecond",t==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf()):!1}function el(e,t,n,r){var s=Te(e)?e:le(e),a=Te(t)?t:le(t);return this.isValid()&&s.isValid()&&a.isValid()?(r=r||"()",(r[0]==="("?this.isAfter(s,n):!this.isBefore(s,n))&&(r[1]===")"?this.isBefore(a,n):!this.isAfter(a,n))):!1}function tl(e,t){var n=Te(e)?e:le(e),r;return this.isValid()&&n.isValid()?(t=De(t)||"millisecond",t==="millisecond"?this.valueOf()===n.valueOf():(r=n.valueOf(),this.clone().startOf(t).valueOf()<=r&&r<=this.clone().endOf(t).valueOf())):!1}function nl(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function rl(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function sl(e,t,n){var r,s,a;if(!this.isValid())return NaN;if(r=Hn(e,this),!r.isValid())return NaN;switch(s=(r.utcOffset()-this.utcOffset())*6e4,t=De(t),t){case"year":a=nn(this,r)/12;break;case"month":a=nn(this,r);break;case"quarter":a=nn(this,r)/3;break;case"second":a=(this-r)/1e3;break;case"minute":a=(this-r)/6e4;break;case"hour":a=(this-r)/36e5;break;case"day":a=(this-r-s)/864e5;break;case"week":a=(this-r-s)/6048e5;break;default:a=this-r}return n?a:Re(a)}function nn(e,t){if(e.date()<t.date())return-nn(t,e);var n=(t.year()-e.year())*12+(t.month()-e.month()),r=e.clone().add(n,"months"),s,a;return t-r<0?(s=e.clone().add(n-1,"months"),a=(t-r)/(r-s)):(s=e.clone().add(n+1,"months"),a=(t-r)/(s-r)),-(n+a)||0}A.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",A.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function al(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function il(e){if(!this.isValid())return null;var t=e!==!0,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?Vt(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):je(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Vt(n,"Z")):Vt(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function ol(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",n,r,s,a;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),n="["+e+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",s="-MM-DD[T]HH:mm:ss.SSS",a=t+'[")]',this.format(n+r+s+a)}function ll(e){e||(e=this.isUtc()?A.defaultFormatUtc:A.defaultFormat);var t=Vt(this,e);return this.localeData().postformat(t)}function cl(e,t){return this.isValid()&&(Te(e)&&e.isValid()||le(e).isValid())?Fe({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ul(e){return this.from(le(),e)}function dl(e,t){return this.isValid()&&(Te(e)&&e.isValid()||le(e).isValid())?Fe({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function fl(e){return this.to(le(),e)}function Kr(e){var t;return e===void 0?this._locale._abbr:(t=qe(e),t!=null&&(this._locale=t),this)}var $r=Me("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function es(){return this._locale}var rn=1e3,gt=60*rn,sn=60*gt,ts=(365*400+97)*24*sn;function vt(e,t){return(e%t+t)%t}function ns(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-ts:new Date(e,t,n).valueOf()}function rs(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-ts:Date.UTC(e,t,n)}function ml(e){var t,n;if(e=De(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?rs:ns,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=vt(t+(this._isUTC?0:this.utcOffset()*gt),sn);break;case"minute":t=this._d.valueOf(),t-=vt(t,gt);break;case"second":t=this._d.valueOf(),t-=vt(t,rn);break}return this._d.setTime(t),A.updateOffset(this,!0),this}function hl(e){var t,n;if(e=De(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?rs:ns,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=sn-vt(t+(this._isUTC?0:this.utcOffset()*gt),sn)-1;break;case"minute":t=this._d.valueOf(),t+=gt-vt(t,gt)-1;break;case"second":t=this._d.valueOf(),t+=rn-vt(t,rn)-1;break}return this._d.setTime(t),A.updateOffset(this,!0),this}function pl(){return this._d.valueOf()-(this._offset||0)*6e4}function gl(){return Math.floor(this.valueOf()/1e3)}function vl(){return new Date(this.valueOf())}function _l(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function yl(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function wl(){return this.isValid()?this.toISOString():null}function Cl(){return gn(this)}function kl(){return Ke({},X(this))}function El(){return X(this).overflow}function xl(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}V("N",0,0,"eraAbbr"),V("NN",0,0,"eraAbbr"),V("NNN",0,0,"eraAbbr"),V("NNNN",0,0,"eraName"),V("NNNNN",0,0,"eraNarrow"),V("y",["y",1],"yo","eraYear"),V("y",["yy",2],0,"eraYear"),V("y",["yyy",3],0,"eraYear"),V("y",["yyyy",4],0,"eraYear"),P("N",Un),P("NN",Un),P("NNN",Un),P("NNNN",Al),P("NNNNN",Yl),ae(["N","NN","NNN","NNNN","NNNNN"],function(e,t,n,r){var s=n._locale.erasParse(e,r,n._strict);s?X(n).era=s:X(n).invalidEra=e}),P("y",ft),P("yy",ft),P("yyy",ft),P("yyyy",ft),P("yo",Pl),ae(["y","yy","yyy","yyyy"],we),ae(["yo"],function(e,t,n,r){var s;n._locale._eraYearOrdinalRegex&&(s=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[we]=n._locale.eraYearOrdinalParse(e,s):t[we]=parseInt(e,10)});function bl(e,t){var n,r,s,a=this._eras||qe("en")._eras;for(n=0,r=a.length;n<r;++n)switch(typeof a[n].since==="string"&&(s=A(a[n].since).startOf("day"),a[n].since=s.valueOf()),typeof a[n].until){case"undefined":a[n].until=1/0;break;case"string":s=A(a[n].until).startOf("day").valueOf(),a[n].until=s.valueOf();break}return a}function Sl(e,t,n){var r,s,a=this.eras(),i,l,d;for(e=e.toUpperCase(),r=0,s=a.length;r<s;++r)if(i=a[r].name.toUpperCase(),l=a[r].abbr.toUpperCase(),d=a[r].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(l===e)return a[r];break;case"NNNN":if(i===e)return a[r];break;case"NNNNN":if(d===e)return a[r];break}else if([i,l,d].indexOf(e)>=0)return a[r]}function Ml(e,t){var n=e.since<=e.until?1:-1;return t===void 0?A(e.since).year():A(e.since).year()+(t-e.offset)*n}function Dl(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until||r[e].until<=n&&n<=r[e].since)return r[e].name;return""}function Rl(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until||r[e].until<=n&&n<=r[e].since)return r[e].narrow;return""}function Nl(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until||r[e].until<=n&&n<=r[e].since)return r[e].abbr;return""}function Ll(){var e,t,n,r,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(n=s[e].since<=s[e].until?1:-1,r=this.clone().startOf("day").valueOf(),s[e].since<=r&&r<=s[e].until||s[e].until<=r&&r<=s[e].since)return(this.year()-A(s[e].since).year())*n+s[e].offset;return this.year()}function Tl(e){return re(this,"_erasNameRegex")||Vn.call(this),e?this._erasNameRegex:this._erasRegex}function Ol(e){return re(this,"_erasAbbrRegex")||Vn.call(this),e?this._erasAbbrRegex:this._erasRegex}function Fl(e){return re(this,"_erasNarrowRegex")||Vn.call(this),e?this._erasNarrowRegex:this._erasRegex}function Un(e,t){return t.erasAbbrRegex(e)}function Al(e,t){return t.erasNameRegex(e)}function Yl(e,t){return t.erasNarrowRegex(e)}function Pl(e,t){return t._eraYearOrdinalRegex||ft}function Vn(){var e=[],t=[],n=[],r=[],s,a,i,l,d,f=this.eras();for(s=0,a=f.length;s<a;++s)i=Ze(f[s].name),l=Ze(f[s].abbr),d=Ze(f[s].narrow),t.push(i),e.push(l),n.push(d),r.push(i),r.push(l),r.push(d);this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}V(0,["gg",2],0,function(){return this.weekYear()%100}),V(0,["GG",2],0,function(){return this.isoWeekYear()%100});function an(e,t){V(0,[e,e.length],0,t)}an("gggg","weekYear"),an("ggggg","weekYear"),an("GGGG","isoWeekYear"),an("GGGGG","isoWeekYear"),P("G",Gt),P("g",Gt),P("GG",oe,Se),P("gg",oe,Se),P("GGGG",Sn,bn),P("gggg",Sn,bn),P("GGGGG",zt,Zt),P("ggggg",zt,Zt),xt(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=K(e)}),xt(["gg","GG"],function(e,t,n,r){t[r]=A.parseTwoDigitYear(e)});function jl(e){return ss.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Il(e){return ss.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Hl(){return Ge(this.year(),1,4)}function Wl(){return Ge(this.isoWeekYear(),1,4)}function Ul(){var e=this.localeData()._week;return Ge(this.year(),e.dow,e.doy)}function Vl(){var e=this.localeData()._week;return Ge(this.weekYear(),e.dow,e.doy)}function ss(e,t,n,r,s){var a;return e==null?Dt(this,r,s).year:(a=Ge(e,r,s),t>a&&(t=a),Zl.call(this,e,t,n,r,s))}function Zl(e,t,n,r,s){var a=Ar(e,t,n,r,s),i=Mt(a.year,0,a.dayOfYear);return this.year(i.getUTCFullYear()),this.month(i.getUTCMonth()),this.date(i.getUTCDate()),this}V("Q",0,"Qo","quarter"),P("Q",xr),ae("Q",function(e,t){t[Be]=(K(e)-1)*3});function Bl(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}V("D",["DD",2],"Do","date"),P("D",oe,mt),P("DD",oe,Se),P("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),ae(["D","DD"],He),ae("Do",function(e,t){t[He]=K(e.match(oe)[0])});var as=ht("Date",!0);V("DDD",["DDDD",3],"DDDo","dayOfYear"),P("DDD",Bt),P("DDDD",br),ae(["DDD","DDDD"],function(e,t,n){n._dayOfYear=K(e)});function zl(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}V("m",["mm",2],0,"minute"),P("m",oe,Mn),P("mm",oe,Se),ae(["m","mm"],Oe);var Gl=ht("Minutes",!1);V("s",["ss",2],0,"second"),P("s",oe,Mn),P("ss",oe,Se),ae(["s","ss"],ze);var ql=ht("Seconds",!1);V("S",0,0,function(){return~~(this.millisecond()/100)}),V(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),V(0,["SSS",3],0,"millisecond"),V(0,["SSSS",4],0,function(){return this.millisecond()*10}),V(0,["SSSSS",5],0,function(){return this.millisecond()*100}),V(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),V(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),V(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),V(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),P("S",Bt,xr),P("SS",Bt,Se),P("SSS",Bt,br);var et,is;for(et="SSSS";et.length<=9;et+="S")P(et,ft);function Jl(e,t){t[rt]=K(("0."+e)*1e3)}for(et="S";et.length<=9;et+="S")ae(et,Jl);is=ht("Milliseconds",!1),V("z",0,0,"zoneAbbr"),V("zz",0,0,"zoneName");function Xl(){return this._isUTC?"UTC":""}function Ql(){return this._isUTC?"Coordinated Universal Time":""}var M=kt.prototype;M.add=Vo,M.calendar=Xo,M.clone=Qo,M.diff=sl,M.endOf=hl,M.format=ll,M.from=cl,M.fromNow=ul,M.to=dl,M.toNow=fl,M.get=ii,M.invalidAt=El,M.isAfter=Ko,M.isBefore=$o,M.isBetween=el,M.isSame=tl,M.isSameOrAfter=nl,M.isSameOrBefore=rl,M.isValid=Cl,M.lang=$r,M.locale=Kr,M.localeData=es,M.max=Co,M.min=wo,M.parsingFlags=kl,M.set=oi,M.startOf=ml,M.subtract=Zo,M.toArray=_l,M.toObject=yl,M.toDate=vl,M.toISOString=il,M.inspect=ol,typeof Symbol<"u"&&Symbol.for!=null&&(M[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),M.toJSON=wl,M.toString=al,M.unix=gl,M.valueOf=pl,M.creationData=xl,M.eraName=Dl,M.eraNarrow=Rl,M.eraAbbr=Nl,M.eraYear=Ll,M.year=Dr,M.isLeapYear=ai,M.weekYear=jl,M.isoWeekYear=Il,M.quarter=M.quarters=Bl,M.month=Or,M.daysInMonth=gi,M.week=M.weeks=xi,M.isoWeek=M.isoWeeks=bi,M.weeksInYear=Ul,M.weeksInWeekYear=Vl,M.isoWeeksInYear=Hl,M.isoWeeksInISOWeekYear=Wl,M.date=as,M.day=M.days=ji,M.weekday=Ii,M.isoWeekday=Hi,M.dayOfYear=zl,M.hour=M.hours=Gi,M.minute=M.minutes=Gl,M.second=M.seconds=ql,M.millisecond=M.milliseconds=is,M.utcOffset=No,M.utc=To,M.local=Oo,M.parseZone=Fo,M.hasAlignedHourOffset=Ao,M.isDST=Yo,M.isLocal=jo,M.isUtcOffset=Io,M.isUtc=Gr,M.isUTC=Gr,M.zoneAbbr=Xl,M.zoneName=Ql,M.dates=Me("dates accessor is deprecated. Use date instead.",as),M.months=Me("months accessor is deprecated. Use month instead",Or),M.years=Me("years accessor is deprecated. Use year instead",Dr),M.zone=Me("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Lo),M.isDSTShifted=Me("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Po);function Kl(e){return le(e*1e3)}function $l(){return le.apply(null,arguments).parseZone()}function os(e){return e}var se=wn.prototype;se.calendar=Pa,se.longDateFormat=Wa,se.invalidDate=Va,se.ordinal=za,se.preparse=os,se.postformat=os,se.relativeTime=qa,se.pastFuture=Ja,se.set=Aa,se.eras=bl,se.erasParse=Sl,se.erasConvertYear=Ml,se.erasAbbrRegex=Ol,se.erasNameRegex=Tl,se.erasNarrowRegex=Fl,se.months=fi,se.monthsShort=mi,se.monthsParse=pi,se.monthsRegex=_i,se.monthsShortRegex=vi,se.week=wi,se.firstDayOfYear=Ei,se.firstDayOfWeek=ki,se.weekdays=Oi,se.weekdaysMin=Ai,se.weekdaysShort=Fi,se.weekdaysParse=Pi,se.weekdaysRegex=Wi,se.weekdaysShortRegex=Ui,se.weekdaysMinRegex=Vi,se.isPM=Bi,se.meridiem=qi;function on(e,t,n,r){var s=qe(),a=Pe().set(r,t);return s[n](a,e)}function ls(e,t,n){if(Ve(e)&&(t=e,e=void 0),e=e||"",t!=null)return on(e,t,n,"month");var r,s=[];for(r=0;r<12;r++)s[r]=on(e,r,n,"month");return s}function Zn(e,t,n,r){typeof e=="boolean"?(Ve(t)&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,Ve(t)&&(n=t,t=void 0),t=t||"");var s=qe(),a=e?s._week.dow:0,i,l=[];if(n!=null)return on(t,(n+a)%7,r,"day");for(i=0;i<7;i++)l[i]=on(t,(i+a)%7,r,"day");return l}function ec(e,t){return ls(e,t,"months")}function tc(e,t){return ls(e,t,"monthsShort")}function nc(e,t,n){return Zn(e,t,n,"weekdays")}function rc(e,t,n){return Zn(e,t,n,"weekdaysShort")}function sc(e,t,n){return Zn(e,t,n,"weekdaysMin")}$e("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=K(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}}),A.lang=Me("moment.lang is deprecated. Use moment.locale instead.",$e),A.langData=Me("moment.langData is deprecated. Use moment.localeData instead.",qe);var Je=Math.abs;function ac(){var e=this._data;return this._milliseconds=Je(this._milliseconds),this._days=Je(this._days),this._months=Je(this._months),e.milliseconds=Je(e.milliseconds),e.seconds=Je(e.seconds),e.minutes=Je(e.minutes),e.hours=Je(e.hours),e.months=Je(e.months),e.years=Je(e.years),this}function cs(e,t,n,r){var s=Fe(t,n);return e._milliseconds+=r*s._milliseconds,e._days+=r*s._days,e._months+=r*s._months,e._bubble()}function ic(e,t){return cs(this,e,t,1)}function oc(e,t){return cs(this,e,t,-1)}function us(e){return e<0?Math.floor(e):Math.ceil(e)}function lc(){var e=this._milliseconds,t=this._days,n=this._months,r=this._data,s,a,i,l,d;return e>=0&&t>=0&&n>=0||e<=0&&t<=0&&n<=0||(e+=us(Bn(n)+t)*864e5,t=0,n=0),r.milliseconds=e%1e3,s=Re(e/1e3),r.seconds=s%60,a=Re(s/60),r.minutes=a%60,i=Re(a/60),r.hours=i%24,t+=Re(i/24),d=Re(ds(t)),n+=d,t-=us(Bn(d)),l=Re(n/12),n%=12,r.days=t,r.months=n,r.years=l,this}function ds(e){return e*4800/146097}function Bn(e){return e*146097/4800}function cc(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if(e=De(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+r/864e5,n=this._months+ds(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Bn(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return t*24+r/36e5;case"minute":return t*1440+r/6e4;case"second":return t*86400+r/1e3;case"millisecond":return Math.floor(t*864e5)+r;default:throw new Error("Unknown unit "+e)}}function Xe(e){return function(){return this.as(e)}}var fs=Xe("ms"),uc=Xe("s"),dc=Xe("m"),fc=Xe("h"),mc=Xe("d"),hc=Xe("w"),pc=Xe("M"),gc=Xe("Q"),vc=Xe("y"),_c=fs;function yc(){return Fe(this)}function wc(e){return e=De(e),this.isValid()?this[e+"s"]():NaN}function at(e){return function(){return this.isValid()?this._data[e]:NaN}}var Cc=at("milliseconds"),kc=at("seconds"),Ec=at("minutes"),xc=at("hours"),bc=at("days"),Sc=at("months"),Mc=at("years");function Dc(){return Re(this.days()/7)}var Qe=Math.round,_t={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Rc(e,t,n,r,s){return s.relativeTime(t||1,!!n,e,r)}function Nc(e,t,n,r){var s=Fe(e).abs(),a=Qe(s.as("s")),i=Qe(s.as("m")),l=Qe(s.as("h")),d=Qe(s.as("d")),f=Qe(s.as("M")),h=Qe(s.as("w")),m=Qe(s.as("y")),w=a<=n.ss&&["s",a]||a<n.s&&["ss",a]||i<=1&&["m"]||i<n.m&&["mm",i]||l<=1&&["h"]||l<n.h&&["hh",l]||d<=1&&["d"]||d<n.d&&["dd",d];return n.w!=null&&(w=w||h<=1&&["w"]||h<n.w&&["ww",h]),w=w||f<=1&&["M"]||f<n.M&&["MM",f]||m<=1&&["y"]||["yy",m],w[2]=t,w[3]=+e>0,w[4]=r,Rc.apply(null,w)}function Lc(e){return e===void 0?Qe:typeof e=="function"?(Qe=e,!0):!1}function Tc(e,t){return _t[e]===void 0?!1:t===void 0?_t[e]:(_t[e]=t,e==="s"&&(_t.ss=t-1),!0)}function Oc(e,t){if(!this.isValid())return this.localeData().invalidDate();var n=!1,r=_t,s,a;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(n=e),typeof t=="object"&&(r=Object.assign({},_t,t),t.s!=null&&t.ss==null&&(r.ss=t.s-1)),s=this.localeData(),a=Nc(this,!n,r,s),n&&(a=s.pastFuture(+this,a)),s.postformat(a)}var zn=Math.abs;function yt(e){return(e>0)-(e<0)||+e}function ln(){if(!this.isValid())return this.localeData().invalidDate();var e=zn(this._milliseconds)/1e3,t=zn(this._days),n=zn(this._months),r,s,a,i,l=this.asSeconds(),d,f,h,m;return l?(r=Re(e/60),s=Re(r/60),e%=60,r%=60,a=Re(n/12),n%=12,i=e?e.toFixed(3).replace(/\.?0+$/,""):"",d=l<0?"-":"",f=yt(this._months)!==yt(l)?"-":"",h=yt(this._days)!==yt(l)?"-":"",m=yt(this._milliseconds)!==yt(l)?"-":"",d+"P"+(a?f+a+"Y":"")+(n?f+n+"M":"")+(t?h+t+"D":"")+(s||r||e?"T":"")+(s?m+s+"H":"")+(r?m+r+"M":"")+(e?m+i+"S":"")):"P0D"}var ee=en.prototype;ee.isValid=So,ee.abs=ac,ee.add=ic,ee.subtract=oc,ee.as=cc,ee.asMilliseconds=fs,ee.asSeconds=uc,ee.asMinutes=dc,ee.asHours=fc,ee.asDays=mc,ee.asWeeks=hc,ee.asMonths=pc,ee.asQuarters=gc,ee.asYears=vc,ee.valueOf=_c,ee._bubble=lc,ee.clone=yc,ee.get=wc,ee.milliseconds=Cc,ee.seconds=kc,ee.minutes=Ec,ee.hours=xc,ee.days=bc,ee.weeks=Dc,ee.months=Sc,ee.years=Mc,ee.humanize=Oc,ee.toISOString=ln,ee.toString=ln,ee.toJSON=ln,ee.locale=Kr,ee.localeData=es,ee.toIsoString=Me("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ln),ee.lang=$r,V("X",0,0,"unix"),V("x",0,0,"valueOf"),P("x",Gt),P("X",$a),ae("X",function(e,t,n){n._d=new Date(parseFloat(e)*1e3)}),ae("x",function(e,t,n){n._d=new Date(K(e))});A.version="2.30.1",Oa(le),A.fn=M,A.min=ko,A.max=Eo,A.now=xo,A.utc=Pe,A.unix=Kl,A.months=ec,A.isDate=Ct,A.locale=$e,A.invalid=Wt,A.duration=Fe,A.isMoment=Te,A.weekdays=nc,A.parseZone=$l,A.localeData=qe,A.isDuration=tn,A.monthsShort=tc,A.weekdaysMin=sc,A.defineLocale=On,A.updateLocale=Ki,A.locales=$i,A.weekdaysShort=rc,A.normalizeUnits=De,A.relativeTimeRounding=Lc,A.relativeTimeThreshold=Tc,A.calendarFormat=Jo,A.prototype=M,A.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const Fc=Ta(Object.freeze(Object.defineProperty({__proto__:null,default:A},Symbol.toStringTag,{value:"Module"})));var Ac=Ht.exports,ms;function Yc(){return ms||(ms=1,(function(e,t){(function(n,r){var s;{try{s=Fc}catch{}e.exports=r(s)}})(Ac,function(n){var r=typeof n=="function",s=!!window.addEventListener,a=window.document,i=window.setTimeout,l=function(u,c,x,p){s?u.addEventListener(c,x,!!p):u.attachEvent("on"+c,x)},d=function(u,c,x,p){s?u.removeEventListener(c,x,!!p):u.detachEvent("on"+c,x)},f=function(u){return u.trim?u.trim():u.replace(/^\s+|\s+$/g,"")},h=function(u,c){return(" "+u.className+" ").indexOf(" "+c+" ")!==-1},m=function(u,c){h(u,c)||(u.className=u.className===""?c:u.className+" "+c)},w=function(u,c){u.className=f((" "+u.className+" ").replace(" "+c+" "," "))},D=function(u){return/Array/.test(Object.prototype.toString.call(u))},R=function(u){return/Date/.test(Object.prototype.toString.call(u))&&!isNaN(u.getTime())},C=function(u){var c=u.getDay();return c===0||c===6},g=function(u){return u%4===0&&u%100!==0||u%400===0},k=function(u,c){return[31,g(u)?29:28,31,30,31,30,31,31,30,31,30,31][c]},v=function(u){R(u)&&u.setHours(0,0,0,0)},S=function(u,c){return u.getTime()===c.getTime()},_=function(u,c,x){var p,T;for(p in c)T=u[p]!==void 0,T&&typeof c[p]=="object"&&c[p]!==null&&c[p].nodeName===void 0?R(c[p])?x&&(u[p]=new Date(c[p].getTime())):D(c[p])?x&&(u[p]=c[p].slice(0)):u[p]=_({},c[p],x):(x||!T)&&(u[p]=c[p]);return u},E=function(u,c,x){var p;a.createEvent?(p=a.createEvent("HTMLEvents"),p.initEvent(c,!0,!1),p=_(p,x),u.dispatchEvent(p)):a.createEventObject&&(p=a.createEventObject(),p=_(p,x),u.fireEvent("on"+c,p))},O=function(u){return u.month<0&&(u.year-=Math.ceil(Math.abs(u.month)/12),u.month+=12),u.month>11&&(u.year+=Math.floor(Math.abs(u.month)/12),u.month-=12),u},b={field:null,bound:void 0,ariaLabel:"Use the arrow keys to pick a date",position:"bottom left",reposition:!0,format:"YYYY-MM-DD",toString:null,parse:null,defaultDate:null,setDefaultDate:!1,firstDay:0,firstWeekOfYearMinDays:4,formatStrict:!1,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,pickWholeWeek:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,enableSelectionDaysInNextAndPreviousMonths:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,blurFieldOnSelect:!0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},theme:null,events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null,keyboardInput:!0},y=function(u,c,x){for(c+=u.firstDay;c>=7;)c-=7;return x?u.i18n.weekdaysShort[c]:u.i18n.weekdays[c]},L=function(u){var c=[],x="false";if(u.isEmpty)if(u.showDaysInNextAndPreviousMonths)c.push("is-outside-current-month"),u.enableSelectionDaysInNextAndPreviousMonths||c.push("is-selection-disabled");else return'<td class="is-empty"></td>';return u.isDisabled&&c.push("is-disabled"),u.isToday&&c.push("is-today"),u.isSelected&&(c.push("is-selected"),x="true"),u.hasEvent&&c.push("has-event"),u.isInRange&&c.push("is-inrange"),u.isStartRange&&c.push("is-startrange"),u.isEndRange&&c.push("is-endrange"),'<td data-day="'+u.day+'" class="'+c.join(" ")+'" aria-selected="'+x+'"><button class="pika-button pika-day" type="button" data-pika-year="'+u.year+'" data-pika-month="'+u.month+'" data-pika-day="'+u.day+'">'+u.day+"</button></td>"},B=function(u,c){u.setHours(0,0,0,0);var x=u.getDate(),p=u.getDay(),T=c,H=T-1,N=7,Y=function(_e){return(_e+N-1)%N};u.setDate(x+H-Y(p));var G=new Date(u.getFullYear(),0,T),q=1440*60*1e3,ce=(u.getTime()-G.getTime())/q,fe=1+Math.round((ce-H+Y(G.getDay()))/N);return fe},J=function(u,c,x,p){var T=new Date(x,c,u),H=r?n(T).isoWeek():B(T,p);return'<td class="pika-week">'+H+"</td>"},te=function(u,c,x,p){return'<tr class="pika-row'+(x?" pick-whole-week":"")+(p?" is-selected":"")+'">'+(c?u.reverse():u).join("")+"</tr>"},ne=function(u){return"<tbody>"+u.join("")+"</tbody>"},W=function(u){var c,x=[];for(u.showWeekNumber&&x.push("<th></th>"),c=0;c<7;c++)x.push('<th scope="col"><abbr title="'+y(u,c)+'">'+y(u,c,!0)+"</abbr></th>");return"<thead><tr>"+(u.isRTL?x.reverse():x).join("")+"</tr></thead>"},I=function(u,c,x,p,T,H){var N,Y,G,q=u._o,ce=x===q.minYear,fe=x===q.maxYear,_e='<div id="'+H+'" class="pika-title" role="heading" aria-live="assertive">',j,z,ie=!0,F=!0;for(G=[],N=0;N<12;N++)G.push('<option value="'+(x===T?N-c:12+N-c)+'"'+(N===p?' selected="selected"':"")+(ce&&N<q.minMonth||fe&&N>q.maxMonth?' disabled="disabled"':"")+">"+q.i18n.months[N]+"</option>");for(j='<div class="pika-label">'+q.i18n.months[p]+'<select class="pika-select pika-select-month" tabindex="-1">'+G.join("")+"</select></div>",D(q.yearRange)?(N=q.yearRange[0],Y=q.yearRange[1]+1):(N=x-q.yearRange,Y=1+x+q.yearRange),G=[];N<Y&&N<=q.maxYear;N++)N>=q.minYear&&G.push('<option value="'+N+'"'+(N===x?' selected="selected"':"")+">"+N+"</option>");return z='<div class="pika-label">'+x+q.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+G.join("")+"</select></div>",q.showMonthAfterYear?_e+=z+j:_e+=j+z,ce&&(p===0||q.minMonth>=p)&&(ie=!1),fe&&(p===11||q.maxMonth<=p)&&(F=!1),c===0&&(_e+='<button class="pika-prev'+(ie?"":" is-disabled")+'" type="button">'+q.i18n.previousMonth+"</button>"),c===u._o.numberOfMonths-1&&(_e+='<button class="pika-next'+(F?"":" is-disabled")+'" type="button">'+q.i18n.nextMonth+"</button>"),_e+="</div>"},$=function(u,c,x){return'<table cellpadding="0" cellspacing="0" class="pika-table" role="grid" aria-labelledby="'+x+'">'+W(u)+ne(c)+"</table>"},U=function(u){var c=this,x=c.config(u);c._onMouseDown=function(T){if(c._v){T=T||window.event;var H=T.target||T.srcElement;if(H)if(h(H,"is-disabled")||(h(H,"pika-button")&&!h(H,"is-empty")&&!h(H.parentNode,"is-disabled")?(c.setDate(new Date(H.getAttribute("data-pika-year"),H.getAttribute("data-pika-month"),H.getAttribute("data-pika-day"))),x.bound&&i(function(){c.hide(),x.blurFieldOnSelect&&x.field&&x.field.blur()},100)):h(H,"pika-prev")?c.prevMonth():h(H,"pika-next")&&c.nextMonth()),h(H,"pika-select"))c._c=!0;else if(T.preventDefault)T.preventDefault();else return T.returnValue=!1,!1}},c._onChange=function(T){T=T||window.event;var H=T.target||T.srcElement;H&&(h(H,"pika-select-month")?c.gotoMonth(H.value):h(H,"pika-select-year")&&c.gotoYear(H.value))},c._onKeyChange=function(T){if(T=T||window.event,c.isVisible())switch(T.keyCode){case 13:case 27:x.field&&x.field.blur();break;case 37:c.adjustDate("subtract",1);break;case 38:c.adjustDate("subtract",7);break;case 39:c.adjustDate("add",1);break;case 40:c.adjustDate("add",7);break;case 8:case 46:c.setDate(null);break}},c._parseFieldValue=function(){if(x.parse)return x.parse(x.field.value,x.format);if(r){var T=n(x.field.value,x.format,x.formatStrict);return T&&T.isValid()?T.toDate():null}else return new Date(Date.parse(x.field.value))},c._onInputChange=function(T){var H;T.firedBy!==c&&(H=c._parseFieldValue(),R(H)&&c.setDate(H),c._v||c.show())},c._onInputFocus=function(){c.show()},c._onInputClick=function(){c.show()},c._onInputBlur=function(){var T=a.activeElement;do if(h(T,"pika-single"))return;while(T=T.parentNode);c._c||(c._b=i(function(){c.hide()},50)),c._c=!1},c._onClick=function(T){T=T||window.event;var H=T.target||T.srcElement,N=H;if(H){!s&&h(H,"pika-select")&&(H.onchange||(H.setAttribute("onchange","return;"),l(H,"change",c._onChange)));do if(h(N,"pika-single")||N===x.trigger)return;while(N=N.parentNode);c._v&&H!==x.trigger&&N!==x.trigger&&c.hide()}},c.el=a.createElement("div"),c.el.className="pika-single"+(x.isRTL?" is-rtl":"")+(x.theme?" "+x.theme:""),l(c.el,"mousedown",c._onMouseDown,!0),l(c.el,"touchend",c._onMouseDown,!0),l(c.el,"change",c._onChange),x.keyboardInput&&l(a,"keydown",c._onKeyChange),x.field&&(x.container?x.container.appendChild(c.el):x.bound?a.body.appendChild(c.el):x.field.parentNode.insertBefore(c.el,x.field.nextSibling),l(x.field,"change",c._onInputChange),x.defaultDate||(x.defaultDate=c._parseFieldValue(),x.setDefaultDate=!0));var p=x.defaultDate;R(p)?x.setDefaultDate?c.setDate(p,!0):c.gotoDate(p):c.gotoDate(new Date),x.bound?(this.hide(),c.el.className+=" is-bound",l(x.trigger,"click",c._onInputClick),l(x.trigger,"focus",c._onInputFocus),l(x.trigger,"blur",c._onInputBlur)):this.show()};return U.prototype={config:function(u){this._o||(this._o=_({},b,!0));var c=_(this._o,u,!0);c.isRTL=!!c.isRTL,c.field=c.field&&c.field.nodeName?c.field:null,c.theme=typeof c.theme=="string"&&c.theme?c.theme:null,c.bound=!!(c.bound!==void 0?c.field&&c.bound:c.field),c.trigger=c.trigger&&c.trigger.nodeName?c.trigger:c.field,c.disableWeekends=!!c.disableWeekends,c.disableDayFn=typeof c.disableDayFn=="function"?c.disableDayFn:null;var x=parseInt(c.numberOfMonths,10)||1;if(c.numberOfMonths=x>4?4:x,R(c.minDate)||(c.minDate=!1),R(c.maxDate)||(c.maxDate=!1),c.minDate&&c.maxDate&&c.maxDate<c.minDate&&(c.maxDate=c.minDate=!1),c.minDate&&this.setMinDate(c.minDate),c.maxDate&&this.setMaxDate(c.maxDate),D(c.yearRange)){var p=new Date().getFullYear()-10;c.yearRange[0]=parseInt(c.yearRange[0],10)||p,c.yearRange[1]=parseInt(c.yearRange[1],10)||p}else c.yearRange=Math.abs(parseInt(c.yearRange,10))||b.yearRange,c.yearRange>100&&(c.yearRange=100);return c},toString:function(u){return u=u||this._o.format,R(this._d)?this._o.toString?this._o.toString(this._d,u):r?n(this._d).format(u):this._d.toDateString():""},getMoment:function(){return r?n(this._d):null},setMoment:function(u,c){r&&n.isMoment(u)&&this.setDate(u.toDate(),c)},getDate:function(){return R(this._d)?new Date(this._d.getTime()):null},setDate:function(u,c){if(!u)return this._d=null,this._o.field&&(this._o.field.value="",E(this._o.field,"change",{firedBy:this})),this.draw();if(typeof u=="string"&&(u=new Date(Date.parse(u))),!!R(u)){var x=this._o.minDate,p=this._o.maxDate;R(x)&&u<x?u=x:R(p)&&u>p&&(u=p),this._d=new Date(u.getTime()),v(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString(),E(this._o.field,"change",{firedBy:this})),!c&&typeof this._o.onSelect=="function"&&this._o.onSelect.call(this,this.getDate())}},clear:function(){this.setDate(null)},gotoDate:function(u){var c=!0;if(R(u)){if(this.calendars){var x=new Date(this.calendars[0].year,this.calendars[0].month,1),p=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),T=u.getTime();p.setMonth(p.getMonth()+1),p.setDate(p.getDate()-1),c=T<x.getTime()||p.getTime()<T}c&&(this.calendars=[{month:u.getMonth(),year:u.getFullYear()}],this._o.mainCalendar==="right"&&(this.calendars[0].month+=1-this._o.numberOfMonths)),this.adjustCalendars()}},adjustDate:function(u,c){var x=this.getDate()||new Date,p=parseInt(c)*24*60*60*1e3,T;u==="add"?T=new Date(x.valueOf()+p):u==="subtract"&&(T=new Date(x.valueOf()-p)),this.setDate(T)},adjustCalendars:function(){this.calendars[0]=O(this.calendars[0]);for(var u=1;u<this._o.numberOfMonths;u++)this.calendars[u]=O({month:this.calendars[0].month+u,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(u){isNaN(u)||(this.calendars[0].month=parseInt(u,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(u){isNaN(u)||(this.calendars[0].year=parseInt(u,10),this.adjustCalendars())},setMinDate:function(u){u instanceof Date?(v(u),this._o.minDate=u,this._o.minYear=u.getFullYear(),this._o.minMonth=u.getMonth()):(this._o.minDate=b.minDate,this._o.minYear=b.minYear,this._o.minMonth=b.minMonth,this._o.startRange=b.startRange),this.draw()},setMaxDate:function(u){u instanceof Date?(v(u),this._o.maxDate=u,this._o.maxYear=u.getFullYear(),this._o.maxMonth=u.getMonth()):(this._o.maxDate=b.maxDate,this._o.maxYear=b.maxYear,this._o.maxMonth=b.maxMonth,this._o.endRange=b.endRange),this.draw()},setStartRange:function(u){this._o.startRange=u},setEndRange:function(u){this._o.endRange=u},draw:function(u){if(!(!this._v&&!u)){var c=this._o,x=c.minYear,p=c.maxYear,T=c.minMonth,H=c.maxMonth,N="",Y;this._y<=x&&(this._y=x,!isNaN(T)&&this._m<T&&(this._m=T)),this._y>=p&&(this._y=p,!isNaN(H)&&this._m>H&&(this._m=H));for(var G=0;G<c.numberOfMonths;G++)Y="pika-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2),N+='<div class="pika-lendar">'+I(this,G,this.calendars[G].year,this.calendars[G].month,this.calendars[0].year,Y)+this.render(this.calendars[G].year,this.calendars[G].month,Y)+"</div>";this.el.innerHTML=N,c.bound&&c.field.type!=="hidden"&&i(function(){c.trigger.focus()},1),typeof this._o.onDraw=="function"&&this._o.onDraw(this),c.bound&&c.field.setAttribute("aria-label",c.ariaLabel)}},adjustPosition:function(){var u,c,x,p,T,H,N,Y,G,q,ce,fe;if(!this._o.container){if(this.el.style.position="absolute",u=this._o.trigger,c=u,x=this.el.offsetWidth,p=this.el.offsetHeight,T=window.innerWidth||a.documentElement.clientWidth,H=window.innerHeight||a.documentElement.clientHeight,N=window.pageYOffset||a.body.scrollTop||a.documentElement.scrollTop,ce=!0,fe=!0,typeof u.getBoundingClientRect=="function")q=u.getBoundingClientRect(),Y=q.left+window.pageXOffset,G=q.bottom+window.pageYOffset;else for(Y=c.offsetLeft,G=c.offsetTop+c.offsetHeight;c=c.offsetParent;)Y+=c.offsetLeft,G+=c.offsetTop;(this._o.reposition&&Y+x>T||this._o.position.indexOf("right")>-1&&Y-x+u.offsetWidth>0)&&(Y=Y-x+u.offsetWidth,ce=!1),(this._o.reposition&&G+p>H+N||this._o.position.indexOf("top")>-1&&G-p-u.offsetHeight>0)&&(G=G-p-u.offsetHeight,fe=!1),this.el.style.left=Y+"px",this.el.style.top=G+"px",m(this.el,ce?"left-aligned":"right-aligned"),m(this.el,fe?"bottom-aligned":"top-aligned"),w(this.el,ce?"right-aligned":"left-aligned"),w(this.el,fe?"top-aligned":"bottom-aligned")}},render:function(u,c,x){var p=this._o,T=new Date,H=k(u,c),N=new Date(u,c,1).getDay(),Y=[],G=[];v(T),p.firstDay>0&&(N-=p.firstDay,N<0&&(N+=7));for(var q=c===0?11:c-1,ce=c===11?0:c+1,fe=c===0?u-1:u,_e=c===11?u+1:u,j=k(fe,q),z=H+N,ie=z;ie>7;)ie-=7;z+=7-ie;for(var F=!1,Ce=0,Ne=0;Ce<z;Ce++){var ue=new Date(u,c,1+(Ce-N)),We=R(this._d)?S(ue,this._d):!1,$n=S(ue,T),er=p.events.indexOf(ue.toDateString())!==-1,dn=Ce<N||Ce>=H+N,it=1+(Ce-N),Yt=c,wt=u,Pt=p.startRange&&S(p.startRange,ue),tr=p.endRange&&S(p.endRange,ue),nr=p.startRange&&p.endRange&&p.startRange<ue&&ue<p.endRange,rr=p.minDate&&ue<p.minDate||p.maxDate&&ue>p.maxDate||p.disableWeekends&&C(ue)||p.disableDayFn&&p.disableDayFn(ue);dn&&(Ce<N?(it=j+it,Yt=q,wt=fe):(it=it-H,Yt=ce,wt=_e));var Z={day:it,month:Yt,year:wt,hasEvent:er,isSelected:We,isToday:$n,isDisabled:rr,isEmpty:dn,isStartRange:Pt,isEndRange:tr,isInRange:nr,showDaysInNextAndPreviousMonths:p.showDaysInNextAndPreviousMonths,enableSelectionDaysInNextAndPreviousMonths:p.enableSelectionDaysInNextAndPreviousMonths};p.pickWholeWeek&&We&&(F=!0),G.push(L(Z)),++Ne===7&&(p.showWeekNumber&&G.unshift(J(Ce-N,c,u,p.firstWeekOfYearMinDays)),Y.push(te(G,p.isRTL,p.pickWholeWeek,F)),G=[],Ne=0,F=!1)}return $(p,Y,x)},isVisible:function(){return this._v},show:function(){this.isVisible()||(this._v=!0,this.draw(),w(this.el,"is-hidden"),this._o.bound&&(l(a,"click",this._onClick),this.adjustPosition()),typeof this._o.onOpen=="function"&&this._o.onOpen.call(this))},hide:function(){var u=this._v;u!==!1&&(this._o.bound&&d(a,"click",this._onClick),this._o.container||(this.el.style.position="static",this.el.style.left="auto",this.el.style.top="auto"),m(this.el,"is-hidden"),this._v=!1,u!==void 0&&typeof this._o.onClose=="function"&&this._o.onClose.call(this))},destroy:function(){var u=this._o;this.hide(),d(this.el,"mousedown",this._onMouseDown,!0),d(this.el,"touchend",this._onMouseDown,!0),d(this.el,"change",this._onChange),u.keyboardInput&&d(a,"keydown",this._onKeyChange),u.field&&(d(u.field,"change",this._onInputChange),u.bound&&(d(u.trigger,"click",this._onInputClick),d(u.trigger,"focus",this._onInputFocus),d(u.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},U})})(Ht)),Ht.exports}Yc();const hs={smileys:[{emoji:"",name:"grinning face happy smile"},{emoji:"",name:"grinning face big eyes happy"},{emoji:"",name:"grinning face smiling eyes happy"},{emoji:"",name:"beaming face grin happy"},{emoji:"",name:"grinning face sweat nervous"},{emoji:"",name:"face tears joy laughing lol"},{emoji:"",name:"rolling floor laughing rofl lol"},{emoji:"",name:"smiling face blush happy"},{emoji:"",name:"smiling face halo angel innocent"},{emoji:"",name:"slightly smiling face"},{emoji:"",name:"upside down face silly"},{emoji:"",name:"winking face wink"},{emoji:"",name:"relieved face peaceful"},{emoji:"",name:"heart eyes love smitten"},{emoji:"",name:"smiling face hearts love"},{emoji:"",name:"face blowing kiss love"},{emoji:"",name:"face savoring food yummy delicious"},{emoji:"",name:"face tongue out playful"},{emoji:"",name:"winking face tongue playful crazy"},{emoji:"",name:"zany face crazy wild silly"},{emoji:"",name:"face sunglasses cool"},{emoji:"",name:"star struck excited amazing"},{emoji:"",name:"partying face celebration party"},{emoji:"",name:"smirking face smirk"},{emoji:"",name:"unamused face annoyed"},{emoji:"",name:"pensive face sad thoughtful"},{emoji:"",name:"crying face sad tear"},{emoji:"",name:"loudly crying face sob"},{emoji:"",name:"face screaming fear shocked"},{emoji:"",name:"pouting face angry mad"},{emoji:"",name:"thinking face hmm wonder"},{emoji:"",name:"hugging face hug"},{emoji:"",name:"shushing face quiet secret"},{emoji:"",name:"face hand over mouth giggle oops"},{emoji:"",name:"zipper mouth face quiet secret"},{emoji:"",name:"yawning face tired sleepy bored"},{emoji:"",name:"sleeping face zzz sleep tired"}],people:[{emoji:"",name:"waving hand wave hello hi bye"},{emoji:"",name:"raised back hand stop"},{emoji:"",name:"raised hand high five stop"},{emoji:"",name:"hand fingers splayed"},{emoji:"",name:"ok hand okay perfect"},{emoji:"",name:"pinched fingers italian"},{emoji:"",name:"victory hand peace"},{emoji:"",name:"crossed fingers luck hope"},{emoji:"",name:"love you gesture hand"},{emoji:"",name:"sign horns rock metal"},{emoji:"",name:"thumbs up good like yes approve"},{emoji:"",name:"thumbs down bad dislike no"},{emoji:"",name:"raised fist power"},{emoji:"",name:"oncoming fist punch bump"},{emoji:"",name:"handshake deal agree"},{emoji:"",name:"clapping hands applause bravo"},{emoji:"",name:"raising hands celebration hooray"},{emoji:"",name:"flexed biceps strong muscle"},{emoji:"",name:"folded hands pray please thanks"}],animals:[{emoji:"",name:"cat face kitty meow"},{emoji:"",name:"dog face puppy woof"},{emoji:"",name:"mouse face rat"},{emoji:"",name:"rabbit face bunny"},{emoji:"",name:"fox face"},{emoji:"",name:"bear face teddy"},{emoji:"",name:"panda face"},{emoji:"",name:"koala face"},{emoji:"",name:"tiger face"},{emoji:"",name:"lion face"},{emoji:"",name:"cow face moo"},{emoji:"",name:"pig face oink"},{emoji:"",name:"frog face ribbit"},{emoji:"",name:"monkey face"},{emoji:"",name:"chicken face hen"},{emoji:"",name:"unicorn face magic"},{emoji:"",name:"honeybee bee buzz"},{emoji:"",name:"butterfly insect"}],food:[{emoji:"",name:"red apple fruit"},{emoji:"",name:"pizza slice"},{emoji:"",name:"hamburger burger"},{emoji:"",name:"french fries"},{emoji:"",name:"hot dog"},{emoji:"",name:"popcorn movie snack"},{emoji:"",name:"doughnut donut"},{emoji:"",name:"cookie biscuit"},{emoji:"",name:"birthday cake celebration"},{emoji:"",name:"shortcake cake slice"},{emoji:"",name:"hot beverage coffee tea"},{emoji:"",name:"beer mug drink"},{emoji:"",name:"wine glass drink"},{emoji:"",name:"cocktail glass martini drink"}],travel:[{emoji:"",name:"airplane plane flight travel"},{emoji:"",name:"automobile car vehicle"},{emoji:"",name:"taxi cab car"},{emoji:"",name:"bus vehicle"},{emoji:"",name:"rocket space launch"},{emoji:"",name:"house home building"},{emoji:"",name:"office building"},{emoji:"",name:"globe earth world planet"},{emoji:"",name:"statue liberty new york"},{emoji:"",name:"tokyo tower"},{emoji:"",name:"castle palace"},{emoji:"",name:"beach umbrella vacation"},{emoji:"",name:"mountain nature"}],activities:[{emoji:"",name:"soccer ball football sport"},{emoji:"",name:"basketball sport"},{emoji:"",name:"american football sport"},{emoji:"",name:"baseball sport"},{emoji:"",name:"tennis sport"},{emoji:"",name:"video game controller gaming"},{emoji:"",name:"bullseye target dart"},{emoji:"",name:"guitar music instrument rock"},{emoji:"",name:"microphone singing karaoke"},{emoji:"",name:"clapper board movie film"},{emoji:"",name:"artist palette painting art"},{emoji:"",name:"performing arts theater drama"}],objects:[{emoji:"",name:"light bulb idea"},{emoji:"",name:"mobile phone smartphone"},{emoji:"",name:"laptop computer"},{emoji:"",name:"camera photo"},{emoji:"",name:"books reading study"},{emoji:"",name:"memo note write"},{emoji:"",name:"pencil write draw"},{emoji:"",name:"key unlock"},{emoji:"",name:"money bag cash"},{emoji:"",name:"gem stone diamond jewel"},{emoji:"",name:"wrapped gift present"},{emoji:"",name:"bell notification alert"}],symbols:[{emoji:"",name:"red heart love"},{emoji:"",name:"orange heart love"},{emoji:"",name:"yellow heart love"},{emoji:"",name:"green heart love"},{emoji:"",name:"blue heart love"},{emoji:"",name:"purple heart love"},{emoji:"",name:"black heart love dark"},{emoji:"",name:"broken heart sad"},{emoji:"",name:"sparkles stars magic"},{emoji:"",name:"star"},{emoji:"",name:"glowing star shine"},{emoji:"",name:"hundred points perfect score"},{emoji:"",name:"check mark yes done complete"},{emoji:"",name:"cross mark no wrong"},{emoji:"",name:"warning sign alert caution"},{emoji:"",name:"fire hot flame lit"},{emoji:"",name:"collision boom explosion"},{emoji:"",name:"party popper celebration confetti"}],flags:[{emoji:"",name:"white flag surrender"},{emoji:"",name:"black flag"},{emoji:"",name:"triangular flag red flag"}]},Pc={smileys:"Smileys & Emotion",people:"People & Body",animals:"Animals & Nature",food:"Food & Drink",travel:"Travel & Places",activities:"Activities",objects:"Objects",symbols:"Symbols",flags:"Flags"},ps="vxfeed_emoji_recents",jc=20,Gn=()=>{try{const e=localStorage.getItem(ps);return e?JSON.parse(e):[]}catch{return[]}},Ic=e=>{try{const t=Gn().filter(n=>n!==e);t.unshift(e),localStorage.setItem(ps,JSON.stringify(t.slice(0,jc)))}catch{}},Hc=()=>React.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M12.5 11H11.71L11.43 10.73C12.41 9.59 13 8.11 13 6.5C13 2.91 10.09 0 6.5 0C2.91 0 0 2.91 0 6.5C0 10.09 2.91 13 6.5 13C8.11 13 9.59 12.41 10.73 11.43L11 11.71V12.5L16 17.49L17.49 16L12.5 11ZM6.5 11C4.01 11 2 8.99 2 6.5C2 4.01 4.01 2 6.5 2C8.99 2 11 4.01 11 6.5C11 8.99 8.99 11 6.5 11Z",fill:"currentColor"}));function qn({isOpen:e,onClose:t,onSelect:n,target:r}){const[s,a]=o.useState(""),[i,l]=o.useState([]),d=o.useRef(null);o.useEffect(()=>{l(Gn())},[]),o.useEffect(()=>{e&&d.current&&setTimeout(()=>{d.current?.focus()},100)},[e]),o.useEffect(()=>{e||a("")},[e]);const f=o.useMemo(()=>{if(!s.trim())return[];const m=s.toLowerCase();return Object.values(hs).flat().filter(D=>D.name.toLowerCase().includes(m))},[s]),h=o.useCallback(m=>{Ic(m),l(Gn()),n(m)},[n]);return e?React.createElement(La,{isOpen:e,popupId:"emoji-picker-popup",target:r,onClose:t,showHeader:!1,showFooter:!1,popupClass:"ts-emoji-popup"},React.createElement("div",{className:"ts-sticky-top uib b-bottom"},React.createElement("div",{className:"ts-input-icon flexify"},React.createElement(Hc,null),React.createElement("input",{ref:d,type:"text",value:s,onChange:m=>a(m.target.value),placeholder:"Search emojis",className:"autofocus"}))),React.createElement("div",{className:"ts-emoji-list"},s.trim()?React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,f.length>0?"Search results":"No emojis found"),React.createElement("ul",{className:"flexify simplify-ul"},f.map((m,w)=>React.createElement("li",{key:`search-${w}`},React.createElement("span",{onClick:()=>h(m.emoji)},m.emoji))))):React.createElement(React.Fragment,null,i.length>0&&React.createElement("div",{className:"ts-form-group"},React.createElement("label",null,"Recently used"),React.createElement("ul",{className:"flexify simplify-ul"},i.map((m,w)=>React.createElement("li",{key:`recent-${w}`},React.createElement("span",{onClick:()=>h(m)},m))))),Object.entries(hs).map(([m,w])=>React.createElement("div",{key:m,className:"ts-form-group"},React.createElement("label",{className:"hidden"},Pc[m]||m),React.createElement("ul",{className:"flexify simplify-ul"},w.map((D,R)=>React.createElement("li",{key:`${m}-${R}`},React.createElement("span",{onClick:()=>h(D.emoji)},D.emoji))))))))):null}function Wc({config:e,value:t,onChange:n,className:r=""}){const[s,a]=o.useState(t);o.useEffect(()=>{a(t)},[t]);const i=o.useCallback((m,w)=>{a(D=>{const R={...D};return D[m]===w?delete R[m]:R[m]=w,n(R),R})},[n]),l=o.useCallback((m,w)=>s[m]===w,[s]),d=o.useCallback((m,w)=>{const D=s[m];return typeof D=="number"&&D>=w},[s]),f=o.useCallback(m=>{const w=s[m];if(typeof w!="number")return null;const D=w+2;return D>=0&&D<e.rating_levels.length?e.rating_levels[D]:null},[s,e.rating_levels]),h=e.categories||[];return React.createElement("div",{className:`rev-score-input ${r}`},h.map(m=>{const w=f(m.key);return React.createElement("div",{key:m.key,className:"rev-category",style:w?{"--ts-accent-1":w.color}:void 0},React.createElement("div",{className:"rev-category-label"},React.createElement("span",null,m.label),w&&React.createElement("span",{className:"rev-active-label"},w.label)),e.input_mode==="stars"?React.createElement("ul",{className:"rev-star-input flexify simplify-ul"},e.rating_levels.map((D,R)=>{const C=R-2,g=d(m.key,C),k=l(m.key,C);return React.createElement("li",{key:D.score,className:`${g?"active":""} ${k?"selected":""}`,onClick:()=>i(m.key,C)},React.createElement("span",{dangerouslySetInnerHTML:{__html:g?e.active_icon??e.default_icon??"":e.default_icon??""}}))})):React.createElement("ul",{className:"rev-num-input flexify simplify-ul"},e.rating_levels.map((D,R)=>{const C=R-2,g=l(m.key,C);return React.createElement("li",{key:D.score,className:g?"active":"",onClick:()=>i(m.key,C),style:g?{"--ts-accent-1":D.color}:void 0},React.createElement("span",null,D.label))})))}))}const Uc=({isOpen:e,popupId:t,target:n,title:r="",icon:s="",saveLabel:a="Save",clearLabel:i="Clear",clearButton:l=!0,showHeader:d=!0,showFooter:f=!0,onSave:h,onClear:m,onClose:w,children:D,popupClass:R="",minWidth:C})=>{const g=o.useRef(null),k=o.useRef(null),[v,S]=o.useState({}),_=o.useRef(""),E=o.useCallback(()=>{if(!k.current||!n||!g.current)return;const b=n,y=g.current,L=k.current,B=document.body.clientWidth,J=b.getBoundingClientRect(),te=b.offsetWidth,ne={left:J.left+window.pageXOffset,top:J.top+window.pageYOffset},W=y.getBoundingClientRect(),I=window.getComputedStyle(L),$=parseFloat(I.minWidth)||0,U=C||$,u=Math.min(1140,B-40),c=Math.max(J.width,U||u),x=ne.left+te/2>B/2+1;let p;x?p=ne.left-c+te:p=ne.left,p<0&&(p=10),p+c>B&&(p=B-c-10);let T=ne.top+J.height;const H=window.innerHeight;J.bottom+W.height>H&&J.top-W.height>=0&&(T=ne.top-W.height);const N={top:`${T}px`,left:`${p}px`,width:`${c}px`,position:"absolute"},Y=JSON.stringify(N);Y!==_.current&&(_.current=Y,S(N))},[n,C]);if(o.useEffect(()=>{if(!e)return;const b=y=>{y.key==="Escape"&&w()};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[e,w]),o.useEffect(()=>{if(!e)return;const b=L=>{const B=L.target;k.current?.contains(B)||w()},y=requestAnimationFrame(()=>{document.addEventListener("mousedown",b)});return()=>{cancelAnimationFrame(y),document.removeEventListener("mousedown",b)}},[e,w]),o.useEffect(()=>{if(!e)return;requestAnimationFrame(()=>{requestAnimationFrame(()=>{E()})});const b=()=>E();window.addEventListener("scroll",b,!0);const y=()=>E();window.addEventListener("resize",y,!0);let L=null;return k.current&&(L=new ResizeObserver(()=>{requestAnimationFrame(()=>E())}),L.observe(k.current)),()=>{window.removeEventListener("scroll",b,!0),window.removeEventListener("resize",y,!0),L?.disconnect()}},[e,E]),!e)return null;const O=()=>o.createElement("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M14 1.41L12.59 0L7 5.59L1.41 0L0 1.41L5.59 7L0 12.59L1.41 14L7 8.41L12.59 14L14 12.59L8.41 7L14 1.41Z",fill:"currentColor"}));return ar.createPortal(o.createElement("div",{className:`elementor vx-popup ${R}`.trim()},o.createElement("div",{className:"ts-popup-root elementor-element"},o.createElement("div",{ref:g,className:"ts-form elementor-element",style:v},o.createElement("div",{className:"ts-field-popup-container"},o.createElement("div",{id:t,ref:k,className:"ts-field-popup triggers-blur"},d&&o.createElement("div",{className:"ts-popup-head flexify ts-sticky-top"},o.createElement("div",{className:"ts-popup-name flexify"},s&&o.createElement("span",{dangerouslySetInnerHTML:{__html:s}}),o.createElement("span",null,r)),o.createElement("ul",{className:"flexify simplify-ul"},o.createElement("li",{className:"flexify ts-popup-close"},o.createElement("a",{href:"#",onClick:b=>{b.preventDefault(),w()},className:"ts-icon-btn","aria-label":"Close"},o.createElement(O,null))))),o.createElement("div",{className:"ts-popup-content-wrapper min-scroll"},D),f&&o.createElement("div",{className:"ts-popup-controller"},o.createElement("ul",{className:"flexify simplify-ul"},o.createElement("li",{className:"flexify ts-popup-close"},o.createElement("a",{href:"#",onClick:b=>{b.preventDefault(),w()},className:"ts-icon-btn","aria-label":"Close"},o.createElement(O,null))),l&&m&&o.createElement("li",{className:"flexify"},o.createElement("a",{href:"#",onClick:b=>{b.preventDefault(),m()},className:"ts-btn ts-btn-1"},i)),h&&o.createElement("li",{className:"flexify"},o.createElement("a",{href:"#",onClick:b=>{b.preventDefault(),h()},className:"ts-btn ts-btn-2"},a))))))))),document.body)};function gs(){return window.voxelFseCreatePost?.ajaxUrl?window.voxelFseCreatePost.ajaxUrl:window.Voxel_Config?.ajax_url?window.Voxel_Config.ajax_url:window.wpApiSettings?.root?`${window.wpApiSettings.root.replace(/\/wp-json\/?$/,"")}/?vx=1`:`${window.location.origin}/?vx=1`}typeof window<"u"&&typeof window._vx_file_upload_cache>"u"&&(window._vx_file_upload_cache=[]);function Vc({onBlur:e,onSave:t,multiple:n=!1,saveLabel:r="Save",children:s,minWidth:a=450,target:i}){const[l,d]=o.useState(!1),f=o.useRef(null),h=o.useRef(null),[m,w]=o.useState([]),[D,R]=o.useState(!0),[C,g]=o.useState(!1),[k,v]=o.useState(0),[S,_]=o.useState({}),[E,O]=o.useState(""),[b,y]=o.useState([]),[L,B]=o.useState(!1),[J,te]=o.useState(!1),[ne,W]=o.useState(0),[I,$]=o.useState(!1),U=async(j=0)=>{j>0?$(!0):R(!0);try{const ie=gs(),F=new URLSearchParams({action:"list_media",offset:j.toString()}),Ce=`${ie}&${F.toString()}`,Ne=await fetch(Ce,{method:"GET",credentials:"same-origin"});if(!Ne.ok)throw new Error(`HTTP error! status: ${Ne.status}`);const ue=await Ne.json();ue.success&&(w(We=>j>0?[...We,...ue.data]:ue.data),g(ue.has_more),v(j+ue.data.length))}catch(ie){console.error("[MediaPopup] Error loading files:",ie)}finally{R(!1),$(!1)}},u=async(j=!1)=>{if(!E.trim()){y([]);return}try{const z=j?ne:0;B(!j),$(j);const ie=gs(),F=new URLSearchParams({action:"list_media",search:E,offset:z.toString()}),Ce=`${ie}&${F.toString()}`,Ne=await fetch(Ce,{method:"GET",credentials:"same-origin"});if(!Ne.ok)throw new Error(`HTTP error! status: ${Ne.status}`);const ue=await Ne.json();ue.success?(y(We=>j?[...We,...ue.data]:ue.data),te(ue.has_more),W(z+ue.data.length)):y([])}catch{y([])}finally{B(!1),$(!1)}},c=j=>{_(n?z=>{const ie={...z};return ie[j.id]?delete ie[j.id]:ie[j.id]=j,ie}:{[j.id]:j})},x=()=>{const j=Object.values(S).map(z=>"_id"in z&&z._id?{source:"new_upload",_id:z._id,file:z.item,name:z.name,type:z.type,preview:z.preview}:{source:"existing",id:z.id,name:z.name,type:z.type,preview:z.preview});t&&t(j),d(!1),_({})},p=()=>{d(!1),_({}),e&&e()},T=()=>{_({})},H=j=>j.type.startsWith("image/")&&j.preview?{backgroundImage:`url(${j.preview})`}:{},N=j=>j.type.startsWith("image/"),Y=()=>(Array.isArray(window._vx_file_upload_cache)||(window._vx_file_upload_cache=[]),[...window._vx_file_upload_cache]),G=j=>{_(z=>{const ie={...z};if(ie[j._id])delete ie[j._id];else{if(!n)return{[j._id]:j};ie[j._id]=j}return ie})};o.useEffect(()=>{if(!E.trim()){y([]),W(0);return}const j=setTimeout(()=>{u(!1)},300);return()=>clearTimeout(j)},[E]),o.useEffect(()=>{l&&h.current&&setTimeout(()=>{h.current?.focus()},100)},[l]),o.useEffect(()=>{U(0)},[]);const q=E.trim()?b:m,ce=E.trim()?J:C,fe=E.trim()?L:D,_e=j=>{j.preventDefault(),d(!0)};return React.createElement(React.Fragment,null,React.createElement("span",{ref:f,onMouseDown:_e,style:{cursor:"pointer"}},s||React.createElement("a",{href:"#",onClick:j=>j.preventDefault(),className:"ts-btn ts-btn-4 form-btn"},React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M5.5 3.25C4.25736 3.25 3.25 4.25736 3.25 5.5V18.5C3.25 19.7426 4.25736 20.75 5.5 20.75H18.5C19.7426 20.75 20.75 19.7426 20.75 18.5V5.5C20.75 4.25736 19.7426 3.25 18.5 3.25H5.5ZM6.20103 13.6808C7.10463 12.4977 8.88749 12.5025 9.78466 13.6905L11.0002 15.3001C11.3508 15.7643 12.0734 15.6701 12.2931 15.1315L14.2708 10.2852C14.9381 8.65008 17.1428 8.3859 18.1774 9.81704L18.9656 10.9072C19.1505 11.1629 19.25 11.4705 19.25 11.786V13.8608V18.5C19.25 18.9142 18.9142 19.25 18.5 19.25H5.5C5.08579 19.25 4.75 18.9142 4.75 18.5V18.0031V16.088C4.75 15.7589 4.85819 15.439 5.05792 15.1775L6.20103 13.6808ZM7.01953 8.55957C7.01953 7.66211 7.74707 6.93457 8.64453 6.93457H8.65453C9.55199 6.93457 10.2795 7.66211 10.2795 8.55957C10.2795 9.45703 9.55199 10.1846 8.65453 10.1846H8.64453C7.74707 10.1846 7.01953 9.45703 7.01953 8.55957Z",fill:"#343C54"})),React.createElement("span",null,"Media library"))),l&&React.createElement(Uc,{isOpen:l,popupId:"media-library-popup",target:i||f.current,onClose:p,onSave:x,onClear:T,saveLabel:r,popupClass:"ts-media-library prmr-popup",showHeader:!1,minWidth:a},React.createElement("div",{className:"ts-sticky-top uib b-bottom"},React.createElement("div",{className:"ts-input-icon flexify"},React.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M12.5 11H11.71L11.43 10.73C12.41 9.59 13 8.11 13 6.5C13 2.91 10.09 0 6.5 0C2.91 0 0 2.91 0 6.5C0 10.09 2.91 13 6.5 13C8.11 13 9.59 12.41 10.73 11.43L11 11.71V12.5L16 17.49L17.49 16L12.5 11ZM6.5 11C4.01 11 2 8.99 2 6.5C2 4.01 4.01 2 6.5 2C8.99 2 11 4.01 11 6.5C11 8.99 8.99 11 6.5 11Z",fill:"currentColor"})),React.createElement("input",{ref:h,type:"text",className:"autofocus",placeholder:"Search files",value:E,onChange:j=>O(j.target.value)}))),React.createElement("div",{className:`ts-form-group min-scroll ts-list-container ${fe?"vx-disabled":""}`},q.length>0||Y().length>0?React.createElement(React.Fragment,null,React.createElement("div",{className:"ts-file-list"},Y().map(j=>React.createElement("div",{key:j._id,className:`ts-file ${S[j._id]?"selected":""} ${N(j)?"ts-file-img":""}`,style:H(j),onClick:()=>G(j)},React.createElement("div",{className:"ts-file-info"},React.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M9 0L0 5V13L9 18L18 13V5L9 0ZM16 12L9 16L2 12V6L9 2L16 6V12Z",fill:"currentColor"})),React.createElement("code",null,j.name)),React.createElement("div",{className:"ts-remove-file"},React.createElement("svg",{width:"20",height:"20",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M12.4239 3.25C12.2079 3.25 11.9908 3.33022 11.8251 3.49073L7.30978 7.88732C6.97375 8.21414 6.97375 8.74449 7.30978 9.07131C7.64581 9.39812 8.19149 9.39812 8.52752 9.07131L11.6739 6.00692L11.6739 15.9C11.6739 16.3556 12.0525 16.725 12.5197 16.725C12.9869 16.725 13.3655 16.3556 13.3655 15.9L13.3655 6.00692L16.5119 9.07131C16.8479 9.39812 17.3936 9.39812 17.7296 9.07131C18.0657 8.74449 18.0657 8.21414 17.7296 7.88732L13.2143 3.49073C13.0486 3.33022 12.8316 3.25 12.6156 3.25L12.4239 3.25Z",fill:"currentColor"}),React.createElement("path",{d:"M5.17188 16C5.17188 15.5858 4.84402 15.25 4.43948 15.25C4.03495 15.25 3.70709 15.5858 3.70709 16V16.0549C3.70703 16.8531 3.70698 17.5055 3.76469 18.0316C3.82466 18.5774 3.95363 19.0607 4.24635 19.4857C4.54794 19.9226 4.94971 20.2516 5.44348 20.4865C5.91891 20.7134 6.47396 20.8128 7.08817 20.857C7.68568 20.9 8.42494 20.9 9.33715 20.9H15.7023C16.6145 20.9 17.3538 20.9 17.9513 20.857C18.5655 20.8128 19.1206 20.7134 19.596 20.4865C20.0898 20.2516 20.4915 19.9226 20.7931 19.4857C21.0858 19.0607 21.2148 18.5774 21.2748 18.0316C21.3325 17.5055 21.3325 16.8531 21.3324 16.0549V16C21.3324 15.5858 21.0046 15.25 20.6 15.25C20.1955 15.25 19.8676 15.5858 19.8676 16C19.8676 16.8631 19.8666 17.4573 19.818 17.9105C19.7703 18.355 19.6812 18.5956 19.5524 18.7816C19.4153 18.9782 19.2355 19.1296 19.0087 19.2351C18.7906 19.3355 18.4991 19.4049 17.9944 19.4431C17.4776 19.4821 16.8019 19.4833 15.7397 19.4833H9.29978C8.23757 19.4833 7.56186 19.4821 7.04512 19.4431C6.54041 19.4049 6.24886 19.3355 6.03081 19.2351C5.80404 19.1296 5.62416 18.9782 5.48711 18.7816C5.35829 18.5956 5.26921 18.355 5.22145 17.9105C5.17292 17.4573 5.17188 16.8631 5.17188 16Z",fill:"currentColor"}))),React.createElement("div",{className:"ts-remove-file ts-select-file"},React.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M19.5455 6.4965C19.9848 6.93584 19.9848 7.64815 19.5455 8.08749L10.1286 17.5043C9.6893 17.9437 8.97699 17.9437 8.53765 17.5043L4.45451 13.4212C4.01517 12.9819 4.01516 12.2695 4.4545 11.8302C4.89384 11.3909 5.60616 11.3909 6.0455 11.8302L9.33315 15.1179L17.9545 6.4965C18.3938 6.05716 19.1062 6.05716 19.5455 6.4965Z",fill:"#343C54"}))))),q.map(j=>React.createElement("div",{key:j.id,className:`ts-file ${S[j.id]?"selected":""} ${N(j)?"ts-file-img":""}`,style:H(j),onClick:()=>c(j)},React.createElement("div",{className:"ts-file-info"},React.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M9 0L0 5V13L9 18L18 13V5L9 0ZM16 12L9 16L2 12V6L9 2L16 6V12Z",fill:"currentColor"})),React.createElement("code",null,j.name)),React.createElement("div",{className:"ts-remove-file ts-select-file"},React.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M19.5455 6.4965C19.9848 6.93584 19.9848 7.64815 19.5455 8.08749L10.1286 17.5043C9.6893 17.9437 8.97699 17.9437 8.53765 17.5043L4.45451 13.4212C4.01517 12.9819 4.01516 12.2695 4.4545 11.8302C4.89384 11.3909 5.60616 11.3909 6.0455 11.8302L9.33315 15.1179L17.9545 6.4965C18.3938 6.05716 19.1062 6.05716 19.5455 6.4965Z",fill:"#343C54"})))))),ce&&React.createElement("div",null,React.createElement("a",{href:"#",onClick:j=>{j.preventDefault(),j.stopPropagation(),E.trim()?u(!0):U(k)},className:`ts-btn ts-btn-4 ${I?"vx-pending":""}`},React.createElement("svg",{width:"18",height:"18",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M21.6009 10.4593C22.001 10.3521 22.2384 9.94088 22.1312 9.54078C21.59 7.52089 20.3974 5.73603 18.7384 4.46302C17.0793 3.19001 15.0466 2.5 12.9555 2.5C10.8644 2.5 8.83164 3.19001 7.17262 4.46302C6.12405 5.26762 5.26179 6.2767 4.63257 7.42036L2.86504 6.92617C2.76093 6.89707 2.65423 6.89133 2.55153 6.9068C2.46222 6.91962 2.37374 6.94889 2.29039 6.99582C1.92945 7.19903 1.80158 7.65636 2.00479 8.0173L3.73942 11.0983C3.83701 11.2717 3.99946 11.3991 4.19104 11.4527C4.30333 11.4841 4.42023 11.4886 4.53266 11.4673C4.61373 11.4524 4.69254 11.4242 4.7657 11.383L7.84641 9.64831C8.11073 9.49948 8.25936 9.20608 8.22302 8.90493C8.18668 8.60378 7.9725 8.35417 7.68037 8.27249L6.1241 7.83737C6.6343 6.99996 7.29751 6.2579 8.08577 5.65305C9.48282 4.58106 11.1946 4 12.9555 4C14.7164 4 16.4282 4.58106 17.8252 5.65305C19.2223 6.72504 20.2266 8.22807 20.6823 9.92901C20.7895 10.3291 21.2008 10.5665 21.6009 10.4593Z",fill:"#343C54"}),React.createElement("path",{d:"M4.30739 13.5387C3.90729 13.6459 3.66985 14.0572 3.77706 14.4573C4.31829 16.4771 5.51089 18.262 7.16991 19.535C8.82892 20.808 10.8616 21.498 12.9528 21.498C15.0439 21.498 17.0766 20.808 18.7356 19.535C19.7859 18.7291 20.6493 17.7181 21.2787 16.5722L23.0083 17.0557C23.1218 17.0961 23.2447 17.1091 23.3661 17.0917C23.5554 17.0658 23.7319 16.968 23.8546 16.8116C24.0419 16.573 24.0669 16.245 23.9181 15.9807L22.1835 12.8996C22.0859 12.7263 21.9234 12.5988 21.7319 12.5453C21.64 12.5196 21.5451 12.5119 21.4521 12.5216C21.3493 12.5317 21.2488 12.5629 21.1571 12.6146L18.0764 14.3493C17.7155 14.5525 17.5876 15.0099 17.7909 15.3708C17.9016 15.5675 18.0879 15.695 18.2929 15.7373L19.7875 16.1552C19.2768 16.9949 18.6125 17.7388 17.8225 18.345C16.4255 19.417 14.7137 19.998 12.9528 19.998C11.1918 19.998 9.4801 19.417 8.08305 18.345C6.686 17.273 5.68171 15.77 5.22595 14.069C5.11874 13.6689 4.70749 13.4315 4.30739 13.5387Z",fill:"#343C54"})),"Load more"))):React.createElement("div",{className:"ts-empty-user-tab"},React.createElement("p",null,fe?"Loading files...":"No files found")))))}const Zc=()=>React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 25 24",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},React.createElement("path",{d:"M8.25016 10.5C7.5598 10.5 7.00016 11.0596 7.00016 11.75C7.00016 12.4404 7.5598 13 8.25016 13H8.26016C8.95051 13 9.51016 12.4404 9.51016 11.75C9.51016 11.0596 8.95051 10.5 8.26016 10.5H8.25016Z",fill:"currentColor"}),React.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.75016 5.5C7.75016 4.25736 8.75751 3.25 10.0002 3.25H19.0002C20.2428 3.25 21.2502 4.25736 21.2502 5.5V14.5C21.2502 15.7426 20.2428 16.75 19.0002 16.75H17.2502V18.5C17.2502 19.7426 16.2428 20.75 15.0002 20.75H6.00016C4.75751 20.75 3.75016 19.7426 3.75016 18.5V17.6916C3.74995 17.6814 3.74995 17.6712 3.75016 17.6611V9.5C3.75016 8.25736 4.75751 7.25 6.00016 7.25H7.75016V5.5ZM15.7502 9.5V15.9558L13.4851 13.8525C12.789 13.206 11.7619 13.0665 10.9186 13.5037L5.25016 16.4421L5.25016 9.5C5.25016 9.08579 5.58594 8.75 6.00016 8.75H15.0002C15.4144 8.75 15.7502 9.08579 15.7502 9.5ZM5.25016 18.5V18.1317L11.6089 14.8354C11.89 14.6896 12.2324 14.7362 12.4644 14.9516L15.7502 18.0028V18.5C15.7502 18.9142 15.4144 19.25 15.0002 19.25H6.00016C5.58594 19.25 5.25016 18.9142 5.25016 18.5ZM9.25016 7.25H15.0002C16.2428 7.25 17.2502 8.25736 17.2502 9.5V15.25H19.0002C19.4144 15.25 19.7502 14.9142 19.7502 14.5V5.5C19.7502 5.08579 19.4144 4.75 19.0002 4.75H10.0002C9.58594 4.75 9.25016 5.08579 9.25016 5.5V7.25Z",fill:"currentColor"})),Bc=()=>React.createElement("svg",{viewBox:"0 0 25 24",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},React.createElement("path",{d:"M6.80747 9.56843C6.80747 6.46718 9.32153 3.95312 12.4228 3.95312C15.524 3.95312 18.0381 6.46718 18.0381 9.56843V9.87773H18.098C20.9007 9.87773 23.1727 12.1498 23.1727 14.9524C23.1727 17.7551 20.9007 20.0272 18.098 20.0272H14.2524C14.5162 19.6585 14.6715 19.2069 14.6715 18.719V18.5272H18.098C20.0723 18.5272 21.6727 16.9267 21.6727 14.9524C21.6727 12.9782 20.0723 11.3777 18.098 11.3777H17.2881C16.8739 11.3777 16.5381 11.0419 16.5381 10.6277V9.56843C16.5381 7.29561 14.6956 5.45312 12.4228 5.45312C10.15 5.45312 8.30747 7.29561 8.30747 9.56843L8.30747 10.6277C8.30747 11.0419 7.97169 11.3777 7.55747 11.3777H6.74659C4.77233 11.3777 3.17188 12.9782 3.17188 14.9524C3.17188 16.9267 4.77233 18.5272 6.74659 18.5272H10.1715V18.719C10.1715 19.2069 10.3268 19.6585 10.5906 20.0272H6.74659C3.94391 20.0272 1.67188 17.7551 1.67188 14.9524C1.67188 12.1498 3.9439 9.87773 6.74659 9.87773H6.80747V9.56843Z",fill:"currentColor"}),React.createElement("path",{d:"M12.4246 11.0874C12.2107 11.0874 12.0178 11.1768 11.8812 11.3204L9.24138 13.9585C8.94839 14.2513 8.94824 14.7262 9.24104 15.0192C9.53384 15.3122 10.0087 15.3123 10.3017 15.0195L11.6746 13.6475V18.718C11.6746 19.1322 12.0104 19.468 12.4246 19.468C12.8388 19.468 13.1746 19.1322 13.1746 18.718V13.6499L14.5452 15.0196C14.8382 15.3124 15.3131 15.3122 15.6059 15.0192C15.8987 14.7262 15.8985 14.2513 15.6055 13.9585L12.9916 11.3465C12.8541 11.1878 12.6511 11.0874 12.4246 11.0874Z",fill:"currentColor"})),zc=()=>React.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},React.createElement("path",{d:"M12 2C6.49 2 2 6.49 2 12C2 17.51 6.49 22 12 22C17.51 22 22 17.51 22 12C22 6.49 17.51 2 12 2ZM12 20.5C7.31 20.5 3.5 16.69 3.5 12C3.5 7.31 7.31 3.5 12 3.5C16.69 3.5 20.5 7.31 20.5 12C20.5 16.69 16.69 20.5 12 20.5Z",fill:"currentColor"}),React.createElement("path",{d:"M17.6 13.19C17.37 13.04 17.07 13.02 16.83 13.15C16.81 13.16 14.56 14.35 12 14.35C9.44 14.35 7.19 13.16 7.17 13.15C6.93 13.02 6.63 13.03 6.4 13.19C6.17 13.34 6.04 13.61 6.07 13.89C6.3 16.26 8.46 18.78 12 18.78C15.54 18.78 17.69 16.26 17.93 13.89C17.96 13.61 17.83 13.35 17.6 13.19ZM12 17.27C10.07 17.27 8.7 16.31 8.02 15.13C9.04 15.48 10.45 15.85 12 15.85C13.55 15.85 14.96 15.49 15.98 15.13C15.3 16.31 13.93 17.27 12 17.27Z",fill:"currentColor"}),React.createElement("path",{d:"M7.33 10.14C7.36 10.22 7.4 10.29 7.44 10.36C7.49 10.43 7.54 10.49 7.6 10.55C7.65 10.61 7.72 10.66 7.79 10.7C7.85 10.75 7.93 10.79 8 10.82C8.08 10.85 8.16 10.87 8.24 10.89C8.32 10.91 8.4 10.92 8.48 10.92C8.56 10.92 8.64 10.92 8.72 10.89C8.8 10.86 8.88 10.85 8.96 10.82C9.03 10.79 9.11 10.75 9.17 10.7C9.24 10.66 9.31 10.61 9.36 10.55C9.6 10.32 9.73 9.99 9.73 9.67C9.73 9.35 9.6 9.01 9.36 8.78C9.31 8.72 9.24 8.67 9.17 8.63C9.11 8.58 9.03 8.54 8.96 8.51C8.88 8.48 8.8 8.46 8.72 8.44C8.56 8.41 8.4 8.41 8.24 8.44C8.16 8.46 8.08 8.48 8 8.51C7.93 8.54 7.85 8.58 7.79 8.63C7.72 8.67 7.65 8.72 7.6 8.78C7.36 9.01 7.23 9.33 7.23 9.67C7.23 9.75 7.23 9.83 7.26 9.91C7.27 9.99 7.29 10.07 7.33 10.14Z",fill:"currentColor"}),React.createElement("path",{d:"M12.99 11.02C13.38 11.16 13.8 10.95 13.94 10.56C13.97 10.48 14.25 9.76 14.97 9.76C15.69 9.76 15.97 10.48 16 10.55C16.1 10.86 16.4 11.06 16.71 11.06C16.79 11.06 16.87 11.05 16.95 11.02C17.34 10.89 17.55 10.46 17.42 10.07C17.19 9.4 16.42 8.25 14.97 8.25C13.52 8.25 12.75 9.39 12.52 10.07C12.39 10.46 12.6 10.88 12.99 11.01V11.02Z",fill:"currentColor"})),vs=()=>React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},React.createElement("path",{d:"M10 9.75C10.4142 9.75 10.75 10.0858 10.75 10.5V16.5C10.75 16.9142 10.4142 17.25 10 17.25C9.58579 17.25 9.25 16.9142 9.25 16.5V10.5C9.25 10.0858 9.58579 9.75 10 9.75Z",fill:"currentColor"}),React.createElement("path",{d:"M14.75 10.5C14.75 10.0858 14.4142 9.75 14 9.75C13.5858 9.75 13.25 10.0858 13.25 10.5V16.5C13.25 16.9142 13.5858 17.25 14 17.25C14.4142 17.25 14.75 16.9142 14.75 16.5V10.5Z",fill:"currentColor"}),React.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99951 4.25C7.99951 3.00736 9.00687 2 10.2495 2H13.7495C14.9922 2 15.9995 3.00736 15.9995 4.25V5H19.999C20.4132 5 20.749 5.33579 20.749 5.75C20.749 6.16421 20.4132 6.5 19.999 6.5H19.5V19.75C19.5 20.9926 18.4926 22 17.25 22H6.75C5.50736 22 4.5 20.9926 4.5 19.75V6.5H4C3.58579 6.5 3.25 6.16421 3.25 5.75C3.25 5.33579 3.58579 5 4 5H7.99951V4.25ZM18 6.5H6V19.75C6 20.1642 6.33579 20.5 6.75 20.5H17.25C17.6642 20.5 18 20.1642 18 19.75V6.5ZM9.49951 5H14.4995V4.25C14.4995 3.83579 14.1637 3.5 13.7495 3.5H10.2495C9.8353 3.5 9.49951 3.83579 9.49951 4.25V5Z",fill:"currentColor"})),_s=()=>React.createElement("svg",{viewBox:"0 0 25 24",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},React.createElement("path",{d:"M6.80747 9.56843C6.80747 6.46718 9.32153 3.95312 12.4228 3.95312C15.524 3.95312 18.0381 6.46718 18.0381 9.56843V9.87773H18.098C20.9007 9.87773 23.1727 12.1498 23.1727 14.9524C23.1727 17.7551 20.9007 20.0272 18.098 20.0272H14.2524C14.5162 19.6585 14.6715 19.2069 14.6715 18.719V18.5272H18.098C20.0723 18.5272 21.6727 16.9267 21.6727 14.9524C21.6727 12.9782 20.0723 11.3777 18.098 11.3777H17.2881C16.8739 11.3777 16.5381 11.0419 16.5381 10.6277V9.56843C16.5381 7.29561 14.6956 5.45312 12.4228 5.45312C10.15 5.45312 8.30747 7.29561 8.30747 9.56843L8.30747 10.6277C8.30747 11.0419 7.97169 11.3777 7.55747 11.3777H6.74659C4.77233 11.3777 3.17188 12.9782 3.17188 14.9524C3.17188 16.9267 4.77233 18.5272 6.74659 18.5272H10.1715V18.719C10.1715 19.2069 10.3268 19.6585 10.5906 20.0272H6.74659C3.94391 20.0272 1.67188 17.7551 1.67188 14.9524C1.67188 12.1498 3.9439 9.87773 6.74659 9.87773H6.80747V9.56843Z",fill:"currentColor"}),React.createElement("path",{d:"M12.4246 11.0874C12.2107 11.0874 12.0178 11.1768 11.8812 11.3204L9.24138 13.9585C8.94839 14.2513 8.94824 14.7262 9.24104 15.0192C9.53384 15.3122 10.0087 15.3123 10.3017 15.0195L11.6746 13.6475V18.718C11.6746 19.1322 12.0104 19.468 12.4246 19.468C12.8388 19.468 13.1746 19.1322 13.1746 18.718V13.6499L14.5452 15.0196C14.8382 15.3124 15.3131 15.3122 15.6059 15.0192C15.8987 14.7262 15.8985 14.2513 15.6055 13.9585L12.9916 11.3465C12.8541 11.1878 12.6511 11.0874 12.4246 11.0874Z",fill:"currentColor"}));function ys({feed:e="user_timeline",postId:t,placeholder:n,onStatusCreated:r,className:s="",status:a,onCancel:i,onUpdate:l}){const{config:d}=Ye(),f=ha(),h=ut(),m=!!a,w=m?a?.current_user.can_edit:!0,D=m?!0:f.can_post,[R,C]=o.useState(m),[g,k]=o.useState(a?.content??""),[v,S]=o.useState(!1),[_,E]=o.useState(null),[O,b]=o.useState(a?.files??[]),[y,L]=o.useState(a?.review?.rating??{}),[B,J]=o.useState(!1),[te,ne]=o.useState(!1),[W,I]=o.useState({url:null,loading:!1,data:null}),$=o.useRef(null),{uploads:U,completedFiles:u,isUploading:c,addFiles:x,removeFile:p,clearAll:T,uploadAll:H}=fr({maxFiles:d?.upload_config.max_files??5,maxFileSize:d?.upload_config.max_file_size??2*1024*1024,allowedTypes:d?.upload_config.allowed_types??["image/jpeg","image/png","image/gif","image/webp"]});o.useEffect(()=>{m&&a&&(k(a.content),b(a.files??[]),L(a.review?.rating??{}),C(!0))},[m,a]);const N=o.useMemo(()=>/(https?:\/\/[^\s]+)/g,[]);o.useEffect(()=>{if(m)return;const Z=setTimeout(()=>{const Q=g.match(N);if(Q&&Q[0]!==W.url){const ge=Q[0];I(Ae=>({...Ae,url:ge,loading:!0})),$.current?.abort();const ye=new AbortController;$.current=ye;const ke=d?.nonces?.status_publish??"";da(ge,ke,ye.signal).then(Ae=>{ye.signal.aborted||I({url:ge,loading:!1,data:Ae})}).catch(()=>{ye.signal.aborted||I({url:ge,loading:!1,data:null})})}else!Q&&W.url&&I({url:null,loading:!1,data:null})},500);return()=>{clearTimeout(Z)}},[g,N,W.url,m,d?.nonces?.status_publish]),o.useEffect(()=>()=>{$.current?.abort()},[]);const Y=o.useRef(null),G=o.useRef(null),q=o.useRef(null),ce=pr(g),fe=d?.character_limits.status_max??5e3,_e=ce>fe,j=m?a?.current_user.can_edit:f.can_post,z=g.trim().length>0||O.length>0||u.length>0,ie=j&&z&&!_e&&!v&&!c,F=o.useCallback(()=>{C(!0)},[]),Ce=o.useCallback(Z=>{k(Z.target.value),E(null);const Q=Z.target;Q.style.height="auto",Q.style.height=`${Q.scrollHeight}px`},[]),Ne=o.useCallback(Z=>{const Q=Z.target.files;Q&&Q.length>0&&x(Q),Z.target.value=""},[x]),ue=o.useCallback(Z=>{if(Z.preventDefault(),m&&i){i();return}k(""),T(),b([]),C(!1),E(null),Y.current&&(Y.current.style.height="auto",Y.current.blur())},[m,i,T]),We=o.useCallback(async Z=>{if(Z?.preventDefault(),!!ie){S(!0),E(null);try{let Q=[];U.some(ke=>ke.status==="pending")?Q=(await H()).map(Ae=>Ae.id):Q=u.map(ke=>ke.id);const ye=[...O.map(ke=>ke.id),...Q];if(m&&a){const ke=d?.nonces?.status_edit??"",Ae={status_id:a.id,content:g.trim(),files:ye,rating:y},sr=await Js(Ae,ke);l?.(sr)}else{const ke=d?.nonces?.status_publish??"";if(!ke)throw new Error("Configuration not loaded");const Ae={feed:e,content:g.trim(),files:ye,rating:Object.keys(y).length>0?y:void 0};t&&(Ae.post_id=t),W.data&&W.url&&(Ae.link_preview=W.url);const sr=await qs(Ae,ke);k(""),T(),b([]),L({}),I({url:null,loading:!1,data:null}),C(!1),Y.current&&(Y.current.style.height="auto"),r?.(sr)}}catch(Q){E(Q instanceof Error?Q.message:h.error_generic)}finally{S(!1)}}},[ie,g,e,t,U,u,O,H,T,m,a,d?.nonces?.status_edit,d?.nonces?.status_publish,r,l,h.error_generic,W,y]),$n=o.useCallback(Z=>{(Z.metaKey||Z.ctrlKey)&&Z.key==="Enter"&&(Z.preventDefault(),We())},[We]),er=o.useCallback(Z=>{Z.preventDefault(),G.current?.click()},[]),dn=o.useCallback(Z=>{const Q=Y.current;if(!Q)return;const ge=Q.selectionStart,ye=Q.selectionEnd,ke=g.substring(0,ge)+Z+g.substring(ye);k(ke),requestAnimationFrame(()=>{Q.focus(),Q.setSelectionRange(ge+Z.length,ge+Z.length)})},[g]),it=o.useCallback(Z=>{Z.preventDefault(),J(Q=>!Q)},[]),Yt=o.useCallback(Z=>{b(Q=>Q.filter(ge=>ge.id!==Z))},[]),wt=o.useMemo(()=>{const Z=e==="post_reviews",Q=m&&a?.feed==="post_reviews"&&a?.review;if(!Z&&!Q)return null;const ge=d?.review_config;if(!ge)return null;let ye;return Q&&a?.review?.post_type?ye=a.review.post_type:ye=d?.current_post?.post_type,!ye||!ge[ye]?null:ge[ye]},[e,m,a,d?.review_config,d?.current_post]);if(m&&!w||!m&&!D)return null;const Pt=d?.current_user,tr=Pt?.avatar_url??"",nr=Pt?.display_name??"",rr=n??h.compose_placeholder??"What's on your mind?";return React.createElement("div",{style:{minHeight:"61px"}},React.createElement("div",{ref:q,className:`vxf-create-post flexify ${R?"vxf-expanded":""} ${s}`},Pt&&React.createElement("div",{className:"vxf-avatar flexify"},React.createElement("img",{src:tr,alt:nr})),React.createElement("div",{className:"vxf-create-post__content"},React.createElement("div",{className:"vxf-content__highlighter"}),React.createElement("textarea",{ref:Y,className:"vxf-content__textarea",value:g,onChange:Ce,onFocus:F,onKeyDown:$n,placeholder:rr,maxLength:fe,disabled:v})),R&&React.createElement("div",{className:"vxf-footer-wrapper"},wt&&React.createElement("div",{className:"vxf-review-score-section"},React.createElement(Wc,{config:wt,value:y,onChange:L})),(U.length>0||u.length>0||O.length>0)&&React.createElement("div",{className:"ts-form-group ts-file-upload vxf-create-section"},React.createElement("div",{className:"ts-file-list"},O.map(Z=>{const Q=Z.url?.match(/\.(jpg|jpeg|png|gif|webp)$/i);return React.createElement("div",{key:`existing-${Z.id}`,className:`ts-file ${Q?"ts-file-img":""}`,style:Q?{backgroundImage:`url(${Z.preview||Z.url})`}:{}},React.createElement("div",{className:"ts-file-info"},React.createElement(_s,null),React.createElement("code",null,Z.alt||"File")),React.createElement("a",{href:"#",className:"ts-remove-file flexify",onClick:ge=>{ge.preventDefault(),Yt(Z.id)}},React.createElement(vs,null)))}),U.map(Z=>{const Q=Z.file.type.startsWith("image/"),ge=Q?URL.createObjectURL(Z.file):"";return React.createElement("div",{key:Z.id,className:`ts-file ${Q?"ts-file-img":""}`,style:Q?{backgroundImage:`url(${ge})`}:{}},React.createElement("div",{className:"ts-file-info"},React.createElement(_s,null),React.createElement("code",null,Z.file.name)),React.createElement("a",{href:"#",className:"ts-remove-file flexify",onClick:ye=>{ye.preventDefault(),p(Z.id)}},React.createElement(vs,null)),Z.status==="uploading"&&React.createElement("div",{className:"vxf-file-progress",style:{width:`${Z.progress}%`}}))}))),React.createElement("div",{className:"vxf-footer flexify"},React.createElement("div",{className:"vxf-actions flexify"},f.can_upload&&d?.features.file_upload&&React.createElement(React.Fragment,null,React.createElement(Vc,{multiple:!0,saveLabel:"Insert",target:q.current,onSave:Z=>{console.log("[StatusComposer] Media selected:",Z)}},React.createElement("a",{href:"#",onClick:Z=>Z.preventDefault(),className:"vxf-icon vxf-media-target"},React.createElement(Zc,null))),React.createElement("a",{href:"#",onClick:er,className:"vxf-icon"},React.createElement(Bc,null))),React.createElement("a",{href:"#",className:"vxf-icon vxf-emoji-picker",onClick:it},React.createElement(zc,null)),React.createElement(qn,{isOpen:B,onClose:()=>J(!1),onSelect:dn,target:q.current})),React.createElement("div",{className:"vxf-buttons flexify"},React.createElement("a",{href:"#",onClick:ue,className:"ts-btn ts-btn-1"},h.cancel??"Cancel"),React.createElement("a",{href:"#",onClick:We,className:`ts-btn ts-btn-2 ${v?"vx-pending":""}`},v?React.createElement("div",{className:"ts-loader-wrapper"},React.createElement("span",{className:"ts-loader"})):m?h.update??"Update":h.compose_submit??"Publish")))),f.can_upload&&d?.features.file_upload&&React.createElement("input",{ref:G,type:"file",accept:d.upload_config.allowed_types.join(","),multiple:!0,onChange:Ne,style:{display:"none"},"aria-hidden":"true"})),_&&React.createElement("div",{className:"vxf-create-post__error ts-form-error"},_))}function ws(e,t,n,r,s){const a=`${e.type}-${t}`;switch(e.type){case"text":return React.createElement(o.Fragment,{key:a},e.content.split(`
`).map((h,m,w)=>React.createElement(o.Fragment,{key:m},h,m<w.length-1&&React.createElement("br",null))));case"mention":const i=e.metadata?.userId?`${n}?user_id=${e.metadata.userId}`:`${n}?username=${encodeURIComponent(e.content)}`;return React.createElement("a",{key:a,href:i,className:"vxf-mention","data-user-id":e.metadata?.userId},"@",e.content);case"hashtag":const l=`${r}?search=${encodeURIComponent("#"+e.content)}`;return React.createElement("a",{key:a,href:l,className:"vxf-hashtag"},"#",e.content);case"link":const d=e.content.replace(/^https?:\/\//,"").replace(/\/$/,""),f=d.length>40?d.slice(0,37)+"...":d;return React.createElement("a",{key:a,href:e.metadata?.url||e.content,className:"vxf-link",target:s,rel:s==="_blank"?"noopener noreferrer":void 0},f);case"code":return e.content.includes(`
`)?React.createElement("pre",{key:a,className:"vxf-code-block"},React.createElement("code",null,e.content)):React.createElement("code",{key:a,className:"vxf-code-inline"},e.content);case"bold":return React.createElement("strong",{key:a,className:"vxf-bold"},e.content);case"italic":return React.createElement("em",{key:a,className:"vxf-italic"},e.content);case"strikethrough":return React.createElement("del",{key:a,className:"vxf-strikethrough"},e.content);default:return React.createElement(o.Fragment,{key:a},e.content)}}function Cs({content:e,maxLength:t,onToggleExpand:n,isExpanded:r=!0,mentionBaseUrl:s="/members/",hashtagBaseUrl:a="/search/",className:i="",linkTarget:l="_blank"}){const{displayContent:d,isTruncated:f}=o.useMemo(()=>{if(!t||r||e.length<=t)return{displayContent:e,isTruncated:!1};const m=Ma(e,t,!0);return{displayContent:m.text,isTruncated:m.isTruncated}},[e,t,r]),h=o.useMemo(()=>mr(d),[d]);return React.createElement("div",{className:`vxf-content ${i}`},h.map((m,w)=>ws(m,w,s,a,l)),f&&!r&&n&&React.createElement("button",{type:"button",className:"vxf-content-toggle vxf-content-toggle--more",onClick:n},"Read more"),r&&t&&e.length>t&&n&&React.createElement("button",{type:"button",className:"vxf-content-toggle vxf-content-toggle--less",onClick:n},"Show less"))}function Gc({content:e,className:t=""}){const n=o.useMemo(()=>mr(e),[e]);return React.createElement("span",{className:t},n.map((r,s)=>ws(r,s,"/members/","/search/","_blank")))}function ks({files:e,galleryIcon:t,statusId:n,className:r=""}){const s=e.filter(i=>i.type==="image"||i.mime_type?.startsWith("image/"));if(s.length===0)return null;const a=n&&s.length>1?`vxtl_${n}`:null;return React.createElement("ul",{className:`vxf-gallery simplify-ul ${r}`},s.map((i,l)=>React.createElement("li",{key:i.id||l},React.createElement("a",{href:i.url,"data-elementor-open-lightbox":"yes","data-elementor-lightbox-slideshow":a},React.createElement("img",{src:i.preview??i.thumbnail_url??i.url,alt:i.alt||"",loading:"lazy"})))))}function qc({preview:e,externalIcon:t,className:n=""}){const{config:r}=Ue();return e.type==="youtube"&&e.embed_url&&e.video_id?React.createElement("div",{className:`vxf-youtube-embed ${n}`},React.createElement("iframe",{src:`${e.embed_url}?rel=0&modestbranding=1&showinfo=0&controls=1&disablekb=1&iv_load_policy=3&fs=1&autoplay=0&mute=0&loop=0&playlist=${e.video_id}`,frameBorder:0,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,loading:"lazy",className:"vxf-youtube-iframe"})):React.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer nofollow",className:`vxf-link flexify ${n}`},e.image&&React.createElement("img",{src:e.image,alt:"",loading:"lazy"}),React.createElement("div",{className:"vxf-link-details flexify"},React.createElement("b",null,e.title),React.createElement("span",{className:"vxf-icon vxf-link-source"},e.domain,React.createElement("span",{dangerouslySetInnerHTML:{__html:r?.icons?.["external-link"]??""}}))))}function Es({status:e,truncateAt:t=140,className:n=""}){const r=e.publisher,s=r.avatar_url??"",a=r.display_name??"",i=r.link??"#",l=o.useMemo(()=>Da(e.created_at),[e.created_at]),d=o.useMemo(()=>e.content?Na(e.content,t):"",[e.content,t]);return e.private?React.createElement("div",{className:`vxf-quoted vxf-quoted--unavailable ${n}`},React.createElement("div",{className:"vxf-quoted--body"},React.createElement("p",{className:"vxf-quoted-unavailable"},"This content is no longer available"))):React.createElement("div",{className:`vxf-quoted ${n}`},React.createElement("div",{className:"vxf-quoted--head"},React.createElement("a",{href:i,className:"vxf-quoted-avatar"},s?React.createElement("img",{src:s,alt:a}):React.createElement("span",{className:"vxf-avatar-initials"},a.charAt(0).toUpperCase())),React.createElement("div",{className:"vxf-quoted-publisher"},React.createElement("a",{href:i,className:"vxf-quoted-name"},a),React.createElement("span",{className:"vxf-quoted-timestamp"},l))),React.createElement("div",{className:"vxf-quoted--body"},e.content&&React.createElement("div",{className:"vxf-quoted-content"},React.createElement(Gc,{content:d})),e.files&&e.files.length>0&&e.files[0].type==="image"&&React.createElement("div",{className:"vxf-quoted-image"},React.createElement("img",{src:e.files[0].thumbnail_url||e.files[0].url,alt:"",loading:"lazy"}),e.files.length>1&&React.createElement("span",{className:"vxf-quoted-image-more"},"+",e.files.length-1))))}function Tt({target:e,onBlur:t,children:n,className:r=""}){const s=o.useRef(null),a=o.useRef(null),[i,l]=o.useState({}),d=o.useCallback(()=>{if(!s.current||!a.current||!e)return;const f=document.body.clientWidth,h=e.getBoundingClientRect(),m=a.current,w=e.offsetWidth,D={left:h.left+window.scrollX,top:h.top+window.scrollY},R=m.getBoundingClientRect(),C=window.getComputedStyle(m),g=parseFloat(C.minWidth)||180,k=Math.max(h.width,g),v=D.left+w/2,S=f/2;let _;v>S+1?_=D.left-k+w:_=D.left,_<10&&(_=10),_+k>f-10&&(_=f-k-10);let E=D.top+h.height;const O=window.innerHeight,b=R.height,y=h.bottom+b>O,L=h.top-b>=0;y&&L&&(E=D.top-b),l({position:"absolute",top:`${E}px`,left:`${_}px`,width:`${k}px`})},[e]);return o.useEffect(()=>{const f=m=>{const w=m.target;a.current?.contains(w)||e?.contains(w)||t()},h=requestAnimationFrame(()=>{document.addEventListener("mousedown",f)});return()=>{cancelAnimationFrame(h),document.removeEventListener("mousedown",f)}},[e,t]),o.useEffect(()=>{const f=h=>{h.key==="Escape"&&t()};return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[t]),o.useLayoutEffect(()=>{d()},[d]),o.useEffect(()=>{const f=()=>d(),h=()=>d();window.addEventListener("scroll",f,!0),window.addEventListener("resize",h,!0);let m=null;return a.current&&(m=new ResizeObserver(()=>d()),m.observe(a.current)),()=>{window.removeEventListener("scroll",f,!0),window.removeEventListener("resize",h,!0),m?.disconnect()}},[d]),e?ar.createPortal(React.createElement("div",{className:`elementor vx-popup xs-width ${r}`},React.createElement("div",{className:"ts-popup-root elementor-element"},React.createElement("div",{ref:s,className:"ts-form elementor-element",style:i},React.createElement("div",{className:"ts-field-popup-container"},React.createElement("div",{className:"ts-field-popup triggers-blur",ref:a},React.createElement("div",{className:"ts-popup-content-wrapper min-scroll"},React.createElement("div",{className:"ts-term-dropdown ts-md-group"},React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list min-scroll"},n)))))))),document.body):null}const Jc=()=>React.createElement("div",{className:"ray-holder"},[...Array(8)].map((e,t)=>React.createElement("div",{key:t,className:"ray"})));function Xc({comment:e,status:t,depth:n,maxDepth:r=2,onCommentUpdate:s,onCommentDelete:a,onShowReplies:i,onReplyClick:l,showRepliesButton:d=!0}){const{config:f}=Ue(),h=ut(),m=ct(),w=o.useRef(null),[D,R]=o.useState(!1),[C,g]=o.useState(!1),{actionState:k,optimisticComment:v,handleLike:S,handleDelete:_,handleApprove:E,handleMarkPending:O}=ka(e,s,a),b=o.useMemo(()=>({...e,...v,likes:{...e.likes,...v.likes},current_user:{...e.current_user,...v.current_user}}),[e,v]),y=f?.strings??{},L=e.publisher,B=L.avatar_url??"",J=L.display_name??"",te=L.username??"",ne=L.link??"#",W=e.created_at,I=b.current_user?.has_liked??!1,$=e.replies?.count>0,U=n<r,u=o.useCallback(p=>{p.preventDefault(),S()},[S]),c=o.useCallback(async()=>{const p=window.Voxel_Config?.l10n?.confirmAction??h.delete_comment_confirm??"Are you sure?";confirm(p)&&(R(!1),await _())},[_,h.delete_comment_confirm]),x=["vxf-post","vxf-comment",k.isDeleting?"vx-pending":""].filter(Boolean).join(" ");return React.createElement("div",{className:x},React.createElement("div",{className:"vxf-head flexify"},React.createElement("a",{href:ne,className:"vxf-avatar flexify"},React.createElement("img",{src:B,alt:J})),React.createElement("div",{className:"vxf-user flexify"},React.createElement("a",{href:ne},J,L.is_verified&&React.createElement("div",{className:"vxf-icon vxf-verified",dangerouslySetInnerHTML:{__html:f?.icons?.verified??""}})),React.createElement("span",null,te&&React.createElement("a",{href:ne},"@",te),React.createElement("a",{href:e.link??"#",title:e.edited_at?y.editedOn?.replace("@date",e.edited_at):void 0},W),e.badges?.map(p=>React.createElement("span",{key:p.key,"data-badge":p.key,className:"vxf-badge"},p.label)))),(b.current_user?.can_edit||b.current_user?.can_delete||b.current_user?.can_moderate)&&React.createElement(React.Fragment,null,React.createElement("a",{href:"#",className:"vxf-icon vxf-more",ref:w,onClick:p=>p.preventDefault(),onMouseDown:()=>R(p=>!p),dangerouslySetInnerHTML:{__html:f?.icons?.more??""}}),D&&React.createElement(Tt,{target:w.current,onBlur:()=>R(!1)},b.current_user?.can_moderate&&e.is_pending&&React.createElement("li",null,React.createElement("a",{href:"#",className:"flexify",onClick:async p=>{p.preventDefault(),await E(),R(!1)}},React.createElement("span",null,y.approve??"Approve"))),b.current_user?.can_moderate&&!e.is_pending&&React.createElement("li",null,React.createElement("a",{href:"#",className:"flexify",onClick:async p=>{p.preventDefault(),await O(),R(!1)}},React.createElement("span",null,y.mark_pending??"Mark as pending"))),b.current_user?.can_delete&&React.createElement("li",null,React.createElement("a",{href:"#",className:"flexify",onClick:p=>{p.preventDefault(),c()}},React.createElement("span",null,y.delete??"Delete")))))),React.createElement("div",{className:"vxf-body"},e.content&&React.createElement("div",{className:"vxf-body-text"},React.createElement(Cs,{content:e.content,maxLength:280,isExpanded:C,onToggleExpand:()=>g(!C)})),e.files&&e.files.length>0&&React.createElement(ks,{files:e.files,statusId:e.id})),React.createElement("div",{className:"vxf-footer flexify"},React.createElement("div",{className:"vxf-actions flexify"},React.createElement("a",{href:"#",onClick:u,className:`vxf-icon ${I?"vxf-liked":""} ${k.isLiking?"vx-inert":""} ${e.is_pending&&!I?"vx-pending":""}`},React.createElement("span",{dangerouslySetInnerHTML:{__html:I?f?.icons?.liked??"":f?.icons?.like??""}}),React.createElement(Jc,null)),m&&U&&React.createElement("a",{href:"#",onClick:p=>{p.preventDefault(),l?.()},className:`vxf-icon ${e.is_pending?"vx-pending":""}`,dangerouslySetInnerHTML:{__html:f?.icons?.reply??""}}),$&&d&&React.createElement("a",{href:"#",onClick:p=>{p.preventDefault(),i?.()},className:"vxf-icon vxf-has-replies",dangerouslySetInnerHTML:{__html:f?.icons?.comment??""}})),(b.likes?.count>0||e.replies?.count>0)&&React.createElement("div",{className:"vxf-details flexify"},b.likes?.last3?.length>0&&React.createElement("div",{className:"vxf-recent-likes flexify"},b.likes.last3.map((p,T)=>React.createElement("img",{key:T,src:p.avatar_url,alt:p.display_name,title:p.display_name}))),React.createElement("span",null,b.likes?.count>0&&React.createElement("span",null,b.likes.count===1?y.oneLike??"1 like":y.countLikes?.replace("@count",String(b.likes.count))??`${b.likes.count} likes`),e.replies?.count>0&&React.createElement("a",{href:"#",onClick:p=>{p.preventDefault(),i?.()}},e.replies.count===1?y.oneReply??"1 reply":y.countReplies?.replace("@count",String(e.replies.count))??`${e.replies.count} replies`)))))}const Qc=()=>React.createElement("svg",{viewBox:"0 0 25 24",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},React.createElement("path",{d:"M6.80747 9.56843C6.80747 6.46718 9.32153 3.95312 12.4228 3.95312C15.524 3.95312 18.0381 6.46718 18.0381 9.56843V9.87773H18.098C20.9007 9.87773 23.1727 12.1498 23.1727 14.9524C23.1727 17.7551 20.9007 20.0272 18.098 20.0272H14.2524C14.5162 19.6585 14.6715 19.2069 14.6715 18.719V18.5272H18.098C20.0723 18.5272 21.6727 16.9267 21.6727 14.9524C21.6727 12.9782 20.0723 11.3777 18.098 11.3777H17.2881C16.8739 11.3777 16.5381 11.0419 16.5381 10.6277V9.56843C16.5381 7.29561 14.6956 5.45312 12.4228 5.45312C10.15 5.45312 8.30747 7.29561 8.30747 9.56843L8.30747 10.6277C8.30747 11.0419 7.97169 11.3777 7.55747 11.3777H6.74659C4.77233 11.3777 3.17188 12.9782 3.17188 14.9524C3.17188 16.9267 4.77233 18.5272 6.74659 18.5272H10.1715V18.719C10.1715 19.2069 10.3268 19.6585 10.5906 20.0272H6.74659C3.94391 20.0272 1.67188 17.7551 1.67188 14.9524C1.67188 12.1498 3.9439 9.87773 6.74659 9.87773H6.80747V9.56843Z",fill:"currentColor"}),React.createElement("path",{d:"M12.4246 11.0874C12.2107 11.0874 12.0178 11.1768 11.8812 11.3204L9.24138 13.9585C8.94839 14.2513 8.94824 14.7262 9.24104 15.0192C9.53384 15.3122 10.0087 15.3123 10.3017 15.0195L11.6746 13.6475V18.718C11.6746 19.1322 12.0104 19.468 12.4246 19.468C12.8388 19.468 13.1746 19.1322 13.1746 18.718V13.6499L14.5452 15.0196C14.8382 15.3124 15.3131 15.3122 15.6059 15.0192C15.8987 14.7262 15.8985 14.2513 15.6055 13.9585L12.9916 11.3465C12.8541 11.1878 12.6511 11.0874 12.4246 11.0874Z",fill:"currentColor"})),Kc=()=>React.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},React.createElement("path",{d:"M12 2C6.49 2 2 6.49 2 12C2 17.51 6.49 22 12 22C17.51 22 22 17.51 22 12C22 6.49 17.51 2 12 2ZM12 20.5C7.31 20.5 3.5 16.69 3.5 12C3.5 7.31 7.31 3.5 12 3.5C16.69 3.5 20.5 7.31 20.5 12C20.5 16.69 16.69 20.5 12 20.5Z",fill:"currentColor"}),React.createElement("path",{d:"M17.6 13.19C17.37 13.04 17.07 13.02 16.83 13.15C16.81 13.16 14.56 14.35 12 14.35C9.44 14.35 7.19 13.16 7.17 13.15C6.93 13.02 6.63 13.03 6.4 13.19C6.17 13.34 6.04 13.61 6.07 13.89C6.3 16.26 8.46 18.78 12 18.78C15.54 18.78 17.69 16.26 17.93 13.89C17.96 13.61 17.83 13.35 17.6 13.19ZM12 17.27C10.07 17.27 8.7 16.31 8.02 15.13C9.04 15.48 10.45 15.85 12 15.85C13.55 15.85 14.96 15.49 15.98 15.13C15.3 16.31 13.93 17.27 12 17.27Z",fill:"currentColor"}),React.createElement("path",{d:"M7.33 10.14C7.36 10.22 7.4 10.29 7.44 10.36C7.49 10.43 7.54 10.49 7.6 10.55C7.65 10.61 7.72 10.66 7.79 10.7C7.85 10.75 7.93 10.79 8 10.82C8.08 10.85 8.16 10.87 8.24 10.89C8.32 10.91 8.4 10.92 8.48 10.92C8.56 10.92 8.64 10.92 8.72 10.89C8.8 10.86 8.88 10.85 8.96 10.82C9.03 10.79 9.11 10.75 9.17 10.7C9.24 10.66 9.31 10.61 9.36 10.55C9.6 10.32 9.73 9.99 9.73 9.67C9.73 9.35 9.6 9.01 9.36 8.78C9.31 8.72 9.24 8.67 9.17 8.63C9.11 8.58 9.03 8.54 8.96 8.51C8.88 8.48 8.8 8.46 8.72 8.44C8.56 8.41 8.4 8.41 8.24 8.44C8.16 8.46 8.08 8.48 8 8.51C7.93 8.54 7.85 8.58 7.79 8.63C7.72 8.67 7.65 8.72 7.6 8.78C7.36 9.01 7.23 9.33 7.23 9.67C7.23 9.75 7.23 9.83 7.26 9.91C7.27 9.99 7.29 10.07 7.33 10.14Z",fill:"currentColor"}),React.createElement("path",{d:"M12.99 11.02C13.38 11.16 13.8 10.95 13.94 10.56C13.97 10.48 14.25 9.76 14.97 9.76C15.69 9.76 15.97 10.48 16 10.55C16.1 10.86 16.4 11.06 16.71 11.06C16.79 11.06 16.87 11.05 16.95 11.02C17.34 10.89 17.55 10.46 17.42 10.07C17.19 9.4 16.42 8.25 14.97 8.25C13.52 8.25 12.75 9.39 12.52 10.07C12.39 10.46 12.6 10.88 12.99 11.01V11.02Z",fill:"currentColor"}));function xs({statusId:e,parentId:t,onCommentPublished:n,onCancel:r,placeholder:s,autoFocus:a=!1}){const i=ct(),{config:l}=Ue(),d=ut(),[f,h]=o.useState(""),[m,w]=o.useState(a),[D,R]=o.useState(!1),[C,g]=o.useState(null),[k,v]=o.useState(!1),S=o.useRef(null),_=o.useRef(null),E=l?.strings??{},O=o.useCallback(W=>{h(W.target.value),g(null);const I=W.target;I.style.height="auto",I.style.height=`${I.scrollHeight}px`},[]),b=o.useCallback(()=>{w(!0)},[]),y=o.useCallback(()=>{h(""),w(!1),g(null),S.current&&(S.current.style.height="auto"),r&&r()},[r]),L=o.useCallback(W=>{(W.metaKey||W.ctrlKey)&&W.key==="Enter"&&f.trim()&&(W.preventDefault(),B()),W.key==="Escape"&&r&&(W.preventDefault(),y())},[f,r]),B=o.useCallback(async()=>{const W=f.trim();if(!W){g(d.content_too_short??"Please enter some content");return}const I=l?.nonces?.comment_publish;if(!I){g("Configuration not loaded");return}R(!0),g(null);try{const $={status_id:e,parent_id:t,content:W};console.log("[CommentComposer] Publishing comment:",$);const U=await sa($,I);console.log("[CommentComposer] Comment published:",U),h(""),w(!1),S.current&&(S.current.style.height="auto"),n&&n(U)}catch($){console.error("[CommentComposer] Failed to publish:",$),g($ instanceof Error?$.message:"Failed to publish comment")}finally{R(!1)}},[f,e,t,l?.nonces?.comment_publish,d,n]),J=o.useCallback(W=>{const I=S.current;if(!I)return;const $=I.selectionStart,U=I.selectionEnd,u=f.substring(0,$)+W+f.substring(U);h(u),requestAnimationFrame(()=>{I.focus(),I.setSelectionRange($+W.length,$+W.length)})},[f]),te=o.useCallback(W=>{W.preventDefault(),v(I=>!I)},[]);if(!i)return null;const ne=["vxf-create-post","vxf-create-comment","flexify",m?"vxf-expanded":""].filter(Boolean).join(" ");return React.createElement("div",{ref:_,className:ne},React.createElement("div",{className:"vxf-avatar flexify"},React.createElement("img",{src:i.avatar_url,alt:i.display_name})),React.createElement("div",{className:"vxf-create-post__content"},React.createElement("div",{className:"vxf-content__highlighter"},f),React.createElement("textarea",{ref:S,className:"vxf-content__textarea",placeholder:s??E.post_reply??"Post a reply",value:f,onChange:O,onFocus:b,onKeyDown:L,disabled:D,autoFocus:a})),m&&React.createElement("div",{className:"vxf-footer-wrapper"},C&&React.createElement("div",{className:"vxf-error",style:{color:"var(--ts-shade-5)",padding:"0 10px 10px",fontSize:"13px"}},C),React.createElement("div",{className:"vxf-footer flexify"},React.createElement("div",{className:"vxf-actions flexify"},l?.features?.file_upload&&React.createElement(React.Fragment,null,React.createElement("a",{href:"#",className:"vxf-icon",onClick:W=>{W.preventDefault(),console.log("[CommentComposer] Upload clicked - not yet implemented")}},React.createElement(Qc,null))),React.createElement("a",{href:"#",className:"vxf-icon vxf-emoji-picker",onClick:te},React.createElement(Kc,null)),React.createElement(qn,{isOpen:k,onClose:()=>v(!1),onSelect:J,target:_.current})),React.createElement("div",{className:"vxf-buttons flexify"},React.createElement("a",{href:"#",className:"ts-btn ts-btn-1",onClick:W=>{W.preventDefault(),y()}},E.cancel??"Cancel"),React.createElement("a",{href:"#",className:`ts-btn ts-btn-2 ${D?"vx-pending":""}`,onClick:W=>{W.preventDefault(),B()}},D?React.createElement("span",{className:"ts-loader"}):E.reply??"Reply")))))}function bs({status:e,parentComment:t=null,depth:n=0,maxDepth:r=2,focusComposer:s=!1}){const{config:a}=Ue(),i=ct(),[l,d]=o.useState(null),[f,h]=o.useState(new Set),{comments:m,isLoading:w,isLoadingMore:D,hasMore:R,error:C,loadMore:g,addComment:k,updateComment:v,removeComment:S}=Ca(e.id,t?.id??void 0),_=a?.strings??{},E=n>0,O=n<r,b=!!i,y=o.useCallback(I=>{k(I),d(null)},[k]),L=o.useCallback(I=>{v(I)},[v]),B=o.useCallback(I=>{S(I)},[S]),J=o.useCallback(I=>{I.preventDefault(),g()},[g]),te=o.useCallback(I=>{d($=>$===I?null:I)},[]),ne=o.useCallback(I=>{h($=>{const U=new Set($);return U.has(I)?U.delete(I):U.add(I),U})},[]),W=["vxf-comment-level","vxf-subgrid",E?"vxf-second-level":""].filter(Boolean).join(" ");return React.createElement("div",{className:W},!E&&b&&!e.is_pending&&React.createElement(xs,{statusId:e.id,onCommentPublished:y,autoFocus:s}),m.map(I=>React.createElement("div",{key:I.id,className:"vxf-comment-wrapper"},React.createElement(Xc,{comment:I,status:e,depth:n,maxDepth:r,onCommentUpdate:L,onCommentDelete:B,onReplyClick:()=>te(I.id),onShowReplies:()=>ne(I.id),showRepliesButton:O&&I.replies?.count>0&&!f.has(I.id)}),l===I.id&&O&&React.createElement(xs,{statusId:e.id,parentId:I.id,onCommentPublished:y,onCancel:()=>d(null),autoFocus:!0}),O&&f.has(I.id)&&I.replies?.count>0&&React.createElement(bs,{status:e,parentComment:I,depth:n+1,maxDepth:r}))),R&&!w&&m.length>0&&React.createElement("a",{href:"#",className:`ts-btn ts-btn-4 ${D?"vx-pending":""}`,onClick:J},D?React.createElement("span",{className:"ts-loader"}):_.load_more_replies??"Load more replies"),w&&React.createElement("div",{className:"ts-no-posts"},React.createElement("span",{className:"ts-loader"})),C&&React.createElement("div",{className:"ts-no-posts"},React.createElement("p",null,C)))}const $c=()=>React.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},React.createElement("path",{d:"M12 2C6.49 2 2 6.49 2 12C2 17.51 6.49 22 12 22C17.51 22 22 17.51 22 12C22 6.49 17.51 2 12 2ZM12 20.5C7.31 20.5 3.5 16.69 3.5 12C3.5 7.31 7.31 3.5 12 3.5C16.69 3.5 20.5 7.31 20.5 12C20.5 16.69 16.69 20.5 12 20.5Z",fill:"currentColor"}),React.createElement("path",{d:"M17.6 13.19C17.37 13.04 17.07 13.02 16.83 13.15C16.81 13.16 14.56 14.35 12 14.35C9.44 14.35 7.19 13.16 7.17 13.15C6.93 13.02 6.63 13.03 6.4 13.19C6.17 13.34 6.04 13.61 6.07 13.89C6.3 16.26 8.46 18.78 12 18.78C15.54 18.78 17.69 16.26 17.93 13.89C17.96 13.61 17.83 13.35 17.6 13.19ZM12 17.27C10.07 17.27 8.7 16.31 8.02 15.13C9.04 15.48 10.45 15.85 12 15.85C13.55 15.85 14.96 15.49 15.98 15.13C15.3 16.31 13.93 17.27 12 17.27Z",fill:"currentColor"}),React.createElement("path",{d:"M7.33 10.14C7.36 10.22 7.4 10.29 7.44 10.36C7.49 10.43 7.54 10.49 7.6 10.55C7.65 10.61 7.72 10.66 7.79 10.7C7.85 10.75 7.93 10.79 8 10.82C8.08 10.85 8.16 10.87 8.24 10.89C8.32 10.91 8.4 10.92 8.48 10.92C8.56 10.92 8.64 10.92 8.72 10.89C8.8 10.86 8.88 10.85 8.96 10.82C9.03 10.79 9.11 10.75 9.17 10.7C9.24 10.66 9.31 10.61 9.36 10.55C9.6 10.32 9.73 9.99 9.73 9.67C9.73 9.35 9.6 9.01 9.36 8.78C9.31 8.72 9.24 8.67 9.17 8.63C9.11 8.58 9.03 8.54 8.96 8.51C8.88 8.48 8.8 8.46 8.72 8.44C8.56 8.41 8.4 8.41 8.24 8.44C8.16 8.46 8.08 8.48 8 8.51C7.93 8.54 7.85 8.58 7.79 8.63C7.72 8.67 7.65 8.72 7.6 8.78C7.36 9.01 7.23 9.33 7.23 9.67C7.23 9.75 7.23 9.83 7.26 9.91C7.27 9.99 7.29 10.07 7.33 10.14Z",fill:"currentColor"}),React.createElement("path",{d:"M12.99 11.02C13.38 11.16 13.8 10.95 13.94 10.56C13.97 10.48 14.25 9.76 14.97 9.76C15.69 9.76 15.97 10.48 16 10.55C16.1 10.86 16.4 11.06 16.71 11.06C16.79 11.06 16.87 11.05 16.95 11.02C17.34 10.89 17.55 10.46 17.42 10.07C17.19 9.4 16.42 8.25 14.97 8.25C13.52 8.25 12.75 9.39 12.52 10.07C12.39 10.46 12.6 10.88 12.99 11.01V11.02Z",fill:"currentColor"})),eu=()=>React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 25 24",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},React.createElement("path",{d:"M8.25016 10.5C7.5598 10.5 7.00016 11.0596 7.00016 11.75C7.00016 12.4404 7.5598 13 8.25016 13H8.26016C8.95051 13 9.51016 12.4404 9.51016 11.75C9.51016 11.0596 8.95051 10.5 8.26016 10.5H8.25016Z",fill:"currentColor"}),React.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.75016 5.5C7.75016 4.25736 8.75751 3.25 10.0002 3.25H19.0002C20.2428 3.25 21.2502 4.25736 21.2502 5.5V14.5C21.2502 15.7426 20.2428 16.75 19.0002 16.75H17.2502V18.5C17.2502 19.7426 16.2428 20.75 15.0002 20.75H6.00016C4.75751 20.75 3.75016 19.7426 3.75016 18.5V17.6916C3.74995 17.6814 3.74995 17.6712 3.75016 17.6611V9.5C3.75016 8.25736 4.75751 7.25 6.00016 7.25H7.75016V5.5ZM15.7502 9.5V15.9558L13.4851 13.8525C12.789 13.206 11.7619 13.0665 10.9186 13.5037L5.25016 16.4421L5.25016 9.5C5.25016 9.08579 5.58594 8.75 6.00016 8.75H15.0002C15.4144 8.75 15.7502 9.08579 15.7502 9.5ZM5.25016 18.5V18.1317L11.6089 14.8354C11.89 14.6896 12.2324 14.7362 12.4644 14.9516L15.7502 18.0028V18.5C15.7502 18.9142 15.4144 19.25 15.0002 19.25H6.00016C5.58594 19.25 5.25016 18.9142 5.25016 18.5ZM9.25016 7.25H15.0002C16.2428 7.25 17.2502 8.25736 17.2502 9.5V15.25H19.0002C19.4144 15.25 19.7502 14.9142 19.7502 14.5V5.5C19.7502 5.08579 19.4144 4.75 19.0002 4.75H10.0002C9.58594 4.75 9.25016 5.08579 9.25016 5.5V7.25Z",fill:"currentColor"})),tu=()=>React.createElement("svg",{viewBox:"0 0 25 24",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},React.createElement("path",{d:"M6.80747 9.56843C6.80747 6.46718 9.32153 3.95312 12.4228 3.95312C15.524 3.95312 18.0381 6.46718 18.0381 9.56843V9.87773H18.098C20.9007 9.87773 23.1727 12.1498 23.1727 14.9524C23.1727 17.7551 20.9007 20.0272 18.098 20.0272H14.2524C14.5162 19.6585 14.6715 19.2069 14.6715 18.719V18.5272H18.098C20.0723 18.5272 21.6727 16.9267 21.6727 14.9524C21.6727 12.9782 20.0723 11.3777 18.098 11.3777H17.2881C16.8739 11.3777 16.5381 11.0419 16.5381 10.6277V9.56843C16.5381 7.29561 14.6956 5.45312 12.4228 5.45312C10.15 5.45312 8.30747 7.29561 8.30747 9.56843L8.30747 10.6277C8.30747 11.0419 7.97169 11.3777 7.55747 11.3777H6.74659C4.77233 11.3777 3.17188 12.9782 3.17188 14.9524C3.17188 16.9267 4.77233 18.5272 6.74659 18.5272H10.1715V18.719C10.1715 19.2069 10.3268 19.6585 10.5906 20.0272H6.74659C3.94391 20.0272 1.67188 17.7551 1.67188 14.9524C1.67188 12.1498 3.9439 9.87773 6.74659 9.87773H6.80747V9.56843Z",fill:"currentColor"}),React.createElement("path",{d:"M12.4246 11.0874C12.2107 11.0874 12.0178 11.1768 11.8812 11.3204L9.24138 13.9585C8.94839 14.2513 8.94824 14.7262 9.24104 15.0192C9.53384 15.3122 10.0087 15.3123 10.3017 15.0195L11.6746 13.6475V18.718C11.6746 19.1322 12.0104 19.468 12.4246 19.468C12.8388 19.468 13.1746 19.1322 13.1746 18.718V13.6499L14.5452 15.0196C14.8382 15.3124 15.3131 15.3122 15.6059 15.0192C15.8987 14.7262 15.8985 14.2513 15.6055 13.9585L12.9916 11.3465C12.8541 11.1878 12.6511 11.0874 12.4246 11.0874Z",fill:"currentColor"}));function nu({quoteOf:e,onQuotePublished:t,onCancel:n,className:r=""}){const{config:s}=Ye(),a=ut(),[i,l]=o.useState(""),[d,f]=o.useState(!1),[h,m]=o.useState(null),[w,D]=o.useState(!1),{uploads:R,completedFiles:C,isUploading:g,addFiles:k,removeFile:v,clearAll:S,uploadAll:_}=fr({maxFiles:s?.upload_config.max_files??5,maxFileSize:s?.upload_config.max_file_size??2*1024*1024,allowedTypes:s?.upload_config.allowed_types??["image/jpeg","image/png","image/gif","image/webp"]}),E=o.useRef(null),O=o.useRef(null),b=o.useRef(null),y=pr(i),L=s?.character_limits.status_max??5e3,J=!(y>L)&&!d&&!g;o.useEffect(()=>{E.current?.focus()},[]);const te=o.useCallback(N=>{l(N.target.value),m(null);const Y=N.target;Y.style.height="auto",Y.style.height=`${Y.scrollHeight}px`},[]),ne=o.useCallback(N=>{const Y=N.target.files;Y&&Y.length>0&&k(Y),N.target.value=""},[k]),W=o.useCallback(()=>{l(""),S(),m(null),E.current&&(E.current.style.height="auto")},[S]),I=o.useCallback(N=>{N.preventDefault(),W(),n()},[W,n]),$=o.useCallback(async N=>{if(N?.preventDefault(),!!J){f(!0),m(null);try{let Y=[];R.some(ce=>ce.status==="pending")?Y=(await _()).map(fe=>fe.id):Y=C.map(ce=>ce.id);const G=s?.nonces?.status_quote??s?.nonces?.status_publish??"";if(!G)throw new Error("Configuration not loaded");const q=await $s({quote_of:e.id,content:i.trim(),files:Y},G);W(),t(q)}catch(Y){m(Y instanceof Error?Y.message:a.error_generic)}finally{f(!1)}}},[J,i,e.id,R,C,_,s?.nonces?.status_quote,s?.nonces?.status_publish,W,t,a.error_generic]),U=o.useCallback(N=>{N.preventDefault(),b.current?.click()},[]),u=o.useCallback(N=>{const Y=E.current;if(!Y)return;const G=Y.selectionStart,q=Y.selectionEnd,ce=i.substring(0,G)+N+i.substring(q);l(ce),requestAnimationFrame(()=>{Y.focus(),Y.setSelectionRange(G+N.length,G+N.length)})},[i]),c=o.useCallback(N=>{N.preventDefault(),D(Y=>!Y)},[]),x=s?.current_user,p=x?.avatar_url??"",T=x?.display_name??"",H=s?.strings.compose_placeholder??"Add a comment...";return React.createElement("div",{ref:O,className:`vxf-create-post vxf-quote-composer flexify vxf-expanded ${r}`},x&&React.createElement("div",{className:"vxf-avatar flexify"},React.createElement("img",{src:p,alt:T})),React.createElement("div",{className:"vxf-create-post__content"},React.createElement("div",{className:"vxf-content__highlighter"}),React.createElement("textarea",{ref:E,className:"vxf-content__textarea",value:i,onChange:te,placeholder:H,maxLength:L,disabled:d})),React.createElement("div",{className:"vxf-footer-wrapper"},React.createElement("div",{className:"vxf-quote-preview"},React.createElement(Es,{status:e,truncateAt:140})),(R.length>0||C.length>0)&&React.createElement("div",{className:"ts-form-group ts-file-upload vxf-create-section"},React.createElement("div",{className:"ts-file-list"},R.map(N=>{const Y=N.file.type.startsWith("image/"),G=Y?URL.createObjectURL(N.file):"";return React.createElement("div",{key:N.id,className:`ts-file ${Y?"ts-file-img":""}`,style:Y?{backgroundImage:`url(${G})`}:{}},React.createElement("div",{className:"ts-file-info"},React.createElement("code",null,N.file.name)),React.createElement("a",{href:"#",className:"ts-remove-file flexify",onClick:q=>{q.preventDefault(),v(N.id)}},""),N.status==="uploading"&&React.createElement("div",{className:"vxf-file-progress",style:{width:`${N.progress}%`}}))}))),React.createElement("div",{className:"vxf-footer flexify"},React.createElement("div",{className:"vxf-actions flexify"},s?.features.file_upload&&React.createElement(React.Fragment,null,React.createElement("a",{href:"#",onClick:U,className:"vxf-icon"},React.createElement(eu,null)),React.createElement("a",{href:"#",onClick:U,className:"vxf-icon"},React.createElement(tu,null))),React.createElement("a",{href:"#",className:"vxf-icon vxf-emoji-picker",onClick:c},React.createElement($c,null)),React.createElement(qn,{isOpen:w,onClose:()=>D(!1),onSelect:u,target:O.current})),React.createElement("div",{className:"vxf-buttons flexify"},React.createElement("a",{href:"#",onClick:I,className:"ts-btn ts-btn-1"},a.cancel??"Cancel"),React.createElement("a",{href:"#",onClick:$,className:`ts-btn ts-btn-2 ${d?"vx-pending":""}`},d?React.createElement("div",{className:"ts-loader-wrapper"},React.createElement("span",{className:"ts-loader"})):a.compose_submit??"Quote")))),s?.features.file_upload&&React.createElement("input",{ref:b,type:"file",accept:s.upload_config.allowed_types.join(","),multiple:!0,onChange:ne,style:{display:"none"},"aria-hidden":"true"}),h&&React.createElement("div",{className:"vxf-create-post__error ts-form-error"},h))}const Ss=()=>React.createElement("div",{className:"ray-holder"},[...Array(8)].map((e,t)=>React.createElement("div",{key:t,className:"ray"})));function Ms({status:e,onStatusUpdate:t,onStatusDelete:n,onQuote:r,repostedBy:s,isQuoted:a=!1,className:i=""}){const l=dr(),d=ut(),f=ct(),{config:h}=Ue(),m=o.useRef(null),w=o.useRef(null),[D,R]=o.useState(!1),[C,g]=o.useState(!1),[k,v]=o.useState(!1),[S,_]=o.useState(!1),[E,O]=o.useState(!1),[b,y]=o.useState("view"),[L,B]=o.useState(!1),{actionState:J,optimisticStatus:te,handleLike:ne,handleRepost:W,handleDelete:I,handleApprove:$,handleMarkPending:U}=wa(e,t,n),u=o.useMemo(()=>({...e,...te,likes:{...e.likes,...te.likes},current_user:{...e.current_user,...te.current_user}}),[e,te]),c=o.useCallback(F=>{F.preventDefault(),ne()},[ne]),x=o.useCallback(F=>{F.preventDefault(),W(),g(!1)},[W]),p=o.useCallback(async()=>{const F=window.Voxel_Config?.l10n?.confirmAction??d.delete_confirm??"Are you sure?";confirm(F)&&(R(!1),await I())},[I,d.delete_confirm]),T=o.useCallback(async()=>{try{const F=e.link??window.location.href;await navigator.clipboard.writeText(F),typeof window<"u"&&window.Voxel?.alert&&window.Voxel.alert(d.copied??"Copied to clipboard")}catch(F){console.error("Failed to copy link:",F)}R(!1)},[e.link,d.copied]),H=o.useCallback(()=>{const F=navigator;F.share&&F.share({url:e.link??window.location.href}),R(!1)},[e.link]),N=e.created_at,Y=e.publisher,G=Y.avatar_url??"",q=Y.display_name??"",ce=Y.username??"",fe=Y.link??"#",_e=u.current_user?.has_liked??!1,j=u.current_user?.has_reposted??!1,z=h?.strings??{},ie=["vxf-post",J.isDeleting?"vx-pending":"",i].filter(Boolean).join(" ");return e.repost_of?React.createElement(Ms,{status:e.repost_of,onStatusUpdate:F=>{t?.({...e,repost_of:F})},repostedBy:e,onStatusDelete:n}):React.createElement("div",{className:"vxf-subgrid"},React.createElement("div",{className:ie},e.annotation&&React.createElement("div",{className:"vxf-highlight flexify"},React.createElement("div",{className:"vxf-icon",dangerouslySetInnerHTML:{__html:e.annotation.icon??""}}),React.createElement("span",null,e.annotation.text)),!e.annotation&&s&&React.createElement("div",{className:"vxf-highlight flexify"},s.annotation?React.createElement(React.Fragment,null,React.createElement("div",{className:"vxf-icon",dangerouslySetInnerHTML:{__html:s.annotation.icon??""}}),React.createElement("span",null,s.annotation.text)):React.createElement(React.Fragment,null,React.createElement("div",{className:"vxf-icon",dangerouslySetInnerHTML:{__html:h?.icons?.repost??""}}),React.createElement("span",null,React.createElement("a",{href:s.publisher.link},s.publisher.display_name)," ",z.reposted??"reposted"))),React.createElement("div",{className:"vxf-head flexify"},React.createElement("a",{href:fe,className:"vxf-avatar flexify"},React.createElement("img",{src:G,alt:q})),React.createElement("div",{className:"vxf-user flexify"},React.createElement("a",{href:fe},q,Y.is_verified&&React.createElement("div",{className:"vxf-icon vxf-verified",dangerouslySetInnerHTML:{__html:h?.icons?.verified??""}})),React.createElement("span",null,ce&&React.createElement("a",{href:fe},"@",ce),e.post?.link&&e.post?.title&&React.createElement("a",{href:e.post.link},e.post.title),React.createElement("a",{href:e.link??"#",title:e.edited_at?z.editedOn?.replace("@date",e.edited_at):void 0},N),e.badges?.map(F=>React.createElement("span",{key:F.key,"data-badge":F.key,className:"vxf-badge"},F.label)))),React.createElement("a",{href:"#",className:"vxf-icon vxf-more",ref:m,onClick:F=>F.preventDefault(),onMouseDown:()=>R(F=>!F),dangerouslySetInnerHTML:{__html:h?.icons?.more??""}}),D&&React.createElement(Tt,{target:m.current,onBlur:()=>R(!1)},React.createElement("li",null,React.createElement("a",{href:"#",className:"flexify",onClick:F=>{F.preventDefault(),T(),R(!1)}},React.createElement("span",null,z.copy_link??"Copy link"))),navigator.share&&React.createElement("li",null,React.createElement("a",{href:"#",className:"flexify",onClick:F=>{F.preventDefault(),H(),R(!1)}},React.createElement("span",null,z.share_via??"Share via"))),u.current_user?.can_edit&&e.link_preview&&React.createElement("li",null,React.createElement("a",{href:"#",className:"flexify",onClick:F=>{F.preventDefault(),R(!1)}},React.createElement("span",null,z.remove_link_preview??"Remove link preview"))),u.current_user?.can_edit&&h?.features?.posts_editable&&React.createElement("li",null,React.createElement("a",{href:"#",className:"flexify",onClick:F=>{F.preventDefault(),y("edit"),R(!1)}},React.createElement("span",null,z.edit??"Edit"))),u.current_user?.can_moderate&&e.is_pending&&React.createElement("li",null,React.createElement("a",{href:"#",className:"flexify",onClick:async F=>{F.preventDefault(),await $(),R(!1)}},React.createElement("span",null,z.approve??"Approve"))),u.current_user?.can_moderate&&!e.is_pending&&React.createElement("li",null,React.createElement("a",{href:"#",className:"flexify",onClick:async F=>{F.preventDefault(),await U(),R(!1)}},React.createElement("span",null,z.mark_pending??"Mark as pending"))),u.current_user?.can_delete&&React.createElement("li",null,React.createElement("a",{href:"#",className:"flexify",onClick:F=>{F.preventDefault(),p()}},React.createElement("span",null,z.delete??"Delete"))))),React.createElement("div",{className:"vxf-body"},b==="edit"&&React.createElement(ys,{status:e,onCancel:()=>y("view"),onUpdate:F=>{t?.(F),y("view")},className:"vxf-edit-mode"}),b==="view"&&e.review&&React.createElement("div",{className:"rev-score",style:{"--ts-accent-1":e.review.level?.color}},e.review.config?.input_mode==="stars"?React.createElement("ul",{className:"rev-star-score flexify simplify-ul"},[-2,-1,0,1,2].map(F=>React.createElement("li",{key:F,className:e.review.score>=F-.5?"active":""},React.createElement("span",{dangerouslySetInnerHTML:{__html:e.review.score>=F-.5?e.review.config?.active_icon??e.review.config?.default_icon??"":e.review.config?.default_icon??""}})))):React.createElement("div",{className:"rev-num-score flexify"},e.review.formatted_score),React.createElement("span",null,e.review.level?.label)),b==="view"&&e.content&&e.link_preview?.type!=="youtube"&&React.createElement(React.Fragment,null,React.createElement("div",{className:"vxf-body-text"},React.createElement(Cs,{content:e.content,maxLength:280,isExpanded:L,onToggleExpand:()=>B(!L)}))),b==="view"&&e.link_preview?.type==="youtube"&&React.createElement("div",{className:"vxf-body-text"}),b==="view"&&e.private&&React.createElement("div",{className:"vxf-body-text",style:{opacity:.5}},z.restricted_visibility??"This post has restricted visibility."),b==="view"&&e.files&&e.files.length>0&&React.createElement(ks,{files:e.files,galleryIcon:l.galleryIcon,statusId:e.id}),b==="view"&&e.link_preview&&React.createElement(qc,{preview:e.link_preview,externalIcon:l.externalIcon}),b==="view"&&e.quote_of&&React.createElement(Es,{status:e.quote_of,truncateAt:140})),!a&&React.createElement("div",{className:"vxf-footer flexify"},React.createElement("div",{className:"vxf-actions flexify"},React.createElement("a",{href:"#",onClick:c,className:`vxf-icon ${_e?"vxf-liked":""} ${J.isLiking?"vx-inert":""} ${e.is_pending&&!_e?"vx-pending":""}`},React.createElement("span",{dangerouslySetInnerHTML:{__html:_e?h?.icons?.liked??"":h?.icons?.like??""}}),React.createElement(Ss,null)),h?.features?.reposts&&React.createElement("a",{href:"#",className:`vxf-icon ${j?"vxf-reposted":""} ${J.isReposting?"vx-inert":""} ${e.is_pending?"vx-pending":""}`,ref:w,onClick:F=>F.preventDefault(),onMouseDown:()=>g(F=>!F)},React.createElement("span",{dangerouslySetInnerHTML:{__html:h?.icons?.repost??""}}),React.createElement(Ss,null)),React.createElement("a",{href:"#",onClick:F=>{F.preventDefault(),f&&(S?(_(!1),O(!1)):(_(!0),O(!0)))},className:`vxf-icon ${e.is_pending?"vx-pending":""}`,dangerouslySetInnerHTML:{__html:h?.icons?.reply??""}}),e.replies?.count>0&&React.createElement("a",{href:"#",onClick:F=>{F.preventDefault(),_(!S),O(!1)},className:"vxf-icon vxf-has-replies",dangerouslySetInnerHTML:{__html:h?.icons?.comment??""}})),(u.likes?.count>0||u.replies?.count>0)&&React.createElement("div",{className:"vxf-details flexify"},u.likes?.last3?.length>0&&React.createElement("div",{className:"vxf-recent-likes flexify"},u.likes.last3.map((F,Ce)=>React.createElement("img",{key:Ce,src:F.avatar_url,alt:F.display_name,title:F.display_name}))),React.createElement("span",null,u.likes?.count>0&&React.createElement("span",null,u.likes.count===1?z.oneLike??"1 like":z.countLikes?.replace("@count",String(u.likes.count))??`${u.likes.count} likes`),u.replies?.count>0&&React.createElement("a",{href:"#",onClick:F=>{F.preventDefault(),_(!S)}},u.replies.count===1?z.oneReply??"1 reply":z.countReplies?.replace("@count",String(u.replies.count))??`${u.replies.count} replies`))),C&&React.createElement(Tt,{target:w.current,onBlur:()=>g(!1)},React.createElement("li",null,React.createElement("a",{href:"#",className:"flexify",onClick:x},React.createElement("span",null,j?z.unrepost??"Unrepost":z.repost??"Repost"))),React.createElement("li",null,React.createElement("a",{href:"#",className:"flexify",onClick:F=>{if(F.preventDefault(),g(!1),!window.Voxel_Config?.is_logged_in){window.Voxel?.authRequired?.();return}v(!0)}},React.createElement("span",null,z.quote??"Quote")))))),k&&React.createElement(nu,{quoteOf:e,onQuotePublished:F=>{v(!1),r?.(F)},onCancel:()=>v(!1)}),S&&React.createElement(bs,{status:e,depth:0,maxDepth:h?.features?.comment_depth??2,focusComposer:E}))}const ru=()=>React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0 0 0)"},React.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.25 2.75C6.14154 2.75 2 6.89029 2 11.998C2 17.1056 6.14154 21.2459 11.25 21.2459C13.5335 21.2459 15.6238 20.4187 17.2373 19.0475L20.7182 22.5287C21.011 22.8216 21.4859 22.8217 21.7788 22.5288C22.0717 22.2359 22.0718 21.761 21.7789 21.4681L18.2983 17.9872C19.6714 16.3736 20.5 14.2826 20.5 11.998C20.5 6.89029 16.3585 2.75 11.25 2.75ZM3.5 11.998C3.5 7.71905 6.96962 4.25 11.25 4.25C15.5304 4.25 19 7.71905 19 11.998C19 16.2769 15.5304 19.7459 11.25 19.7459C6.96962 19.7459 3.5 16.2769 3.5 11.998Z",fill:"#343C54"}));function su({filters:e,onFiltersChange:t,orderingOptions:n=[],showSearch:r=!0,showFilterTabs:s=!0,className:a=""}){const i=Array.isArray(n)?n:[],[l,d]=o.useState(e.search??""),f=o.useRef(null),[h,m]=o.useState(!1),[w,D]=o.useState(!1),R=o.useRef(null),C=o.useRef(null),g=i.find(y=>y.order===e.order&&y.time===e.time)??i[0],k=e.filter??"all",v=va(),S=o.useCallback(y=>{const L=y.target.value;d(L),f.current&&clearTimeout(f.current),f.current=window.setTimeout(()=>{t({search:L||void 0})},300)},[t]),_=o.useCallback((y,L)=>{y.preventDefault(),t({filter:L==="all"?void 0:L}),m(!1)},[t]),E=o.useCallback((y,L)=>{y.preventDefault(),t({order:L.order,time:L.time,timeCustom:L.time==="custom"?L.timeCustom:void 0}),D(!1)},[t]),O=o.useCallback(y=>{y.preventDefault(),m(L=>!L),D(!1)},[]),b=o.useCallback(y=>{y.preventDefault(),D(L=>!L),m(!1)},[]);return o.useEffect(()=>()=>{f.current&&clearTimeout(f.current)},[]),React.createElement("div",{className:`vxf-filters ${a}`},r&&React.createElement("div",{className:"ts-form"},React.createElement("div",{className:"ts-input-icon flexify"},React.createElement(ru,null),React.createElement("input",{type:"text",value:l,onChange:S,placeholder:"Search",className:"autofocus",maxLength:128}))),s&&Object.keys(v).length>=2&&React.createElement(React.Fragment,null,React.createElement("a",{href:"#",ref:R,onClick:y=>y.preventDefault(),onMouseDown:O},v[k]||"All",React.createElement("div",{className:"ts-down-icon"})),h&&React.createElement(Tt,{target:R.current,onBlur:()=>m(!1)},Object.entries(v).map(([y,L])=>React.createElement("li",{key:y},React.createElement("a",{href:"#",className:"flexify",onClick:B=>_(B,y)},React.createElement("span",null,L)))))),i.length>0&&g&&React.createElement(React.Fragment,null,React.createElement("a",{href:"#",ref:C,onClick:y=>y.preventDefault(),onMouseDown:b},g.label,React.createElement("div",{className:"ts-down-icon"})),w&&React.createElement(Tt,{target:C.current,onBlur:()=>D(!1)},i.map(y=>React.createElement("li",{key:y._id},React.createElement("a",{href:"#",className:"flexify",onClick:L=>E(L,y)},React.createElement("span",null,y.label)))))))}const au=()=>React.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})),iu=()=>React.createElement("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.5 3.75C6.21979 3.75 2.75 7.21979 2.75 11.5C2.75 15.7802 6.21979 19.25 10.5 19.25C12.4067 19.25 14.1566 18.5645 15.5146 17.4227L19.2197 21.1278C19.5126 21.4207 19.9875 21.4207 20.2804 21.1278C20.5733 20.8349 20.5733 20.36 20.2804 20.0671L16.5753 16.362C17.717 15.0041 18.4025 13.2542 18.4025 11.3475C18.4025 7.06729 14.9327 3.5975 10.6525 3.5975L10.5 3.75ZM4.25 11.5C4.25 8.04822 7.04822 5.25 10.5 5.25C13.9518 5.25 16.75 8.04822 16.75 11.5C16.75 14.9518 13.9518 17.75 10.5 17.75C7.04822 17.75 4.25 14.9518 4.25 11.5Z",fill:"currentColor"})),ou=o.forwardRef(function({mode:t,postId:n,authorId:r,showFilters:s=!0,showSearch:a=!0,emptyMessage:i,className:l=""},d){const f=dr(),h=ut(),{config:m}=Ue(),w=t??f.mode??"user_feed";console.log("[StatusFeed] Render with mode:",{propMode:t,attributeMode:f.mode,finalMode:w,currentPost:m?.current_post,postIdProp:n,authorIdProp:r});const D={};if(["post_timeline","post_wall","post_reviews"].includes(w)){const U=n??m?.current_post?.id;U?(D.postId=U,console.log(`[StatusFeed] Mode "${w}" requires post_id, using:`,U)):console.warn(`[StatusFeed] Mode "${w}" requires post_id but none available!`)}else n&&(D.postId=n);if(w==="author_timeline"){const U=r??m?.current_post?.author_id;U?(D.authorId=U,console.log('[StatusFeed] Mode "author_timeline" requires author_id, using:',U)):console.warn('[StatusFeed] Mode "author_timeline" requires author_id but none available!')}else r&&(D.authorId=r);if(f.orderingOptions?.length>0){const U=f.orderingOptions[0];D.order=U.order,D.time=U.time,U.time==="custom"&&(D.timeCustom=U.timeCustom)}const{statuses:g,isLoading:k,isLoadingMore:v,hasMore:S,loadMore:_,refresh:E,setFilters:O,addStatus:b,updateStatus:y,removeStatus:L,filters:B}=ya(w,D);o.useImperativeHandle(d,()=>({addStatus:b,refresh:E}),[b,E]);const J=o.useRef(null);o.useEffect(()=>{if(!J.current||!S||v)return;const U=new IntersectionObserver(u=>{u[0].isIntersecting&&S&&!v&&_()},{rootMargin:"200px",threshold:0});return U.observe(J.current),()=>{U.disconnect()}},[S,v,_]);const te=o.useCallback(U=>{O(U)},[O]),ne=o.useCallback(U=>{y(U)},[y]),W=o.useCallback(U=>{L(U)},[L]),I=i??m?.strings?.no_activity??f.noStatusText??h.no_posts,$=()=>k?React.createElement("div",{className:"ts-no-posts"},React.createElement("span",{className:"ts-loader"})):React.createElement("div",{className:"ts-no-posts"},React.createElement(iu,null),React.createElement("p",null,I));return React.createElement(React.Fragment,null,s&&React.createElement(su,{filters:B,onFiltersChange:te,orderingOptions:f.orderingOptions,showSearch:a&&f.searchEnabled}),g.length>0?React.createElement(React.Fragment,null,g.map(U=>React.createElement(Ms,{key:U.id,status:U,onStatusUpdate:ne,onStatusDelete:W})),S&&React.createElement("a",{ref:J,href:"#",onClick:U=>{U.preventDefault(),_()},className:`ts-load-more ts-btn ts-btn-1 ${v?"vx-pending":""}`},React.createElement(au,null),h.load_more??"Load more")):$())});function lu({reason:e}){const n=e?{login_required:"Please log in to view this content.",followers_only:"Only followers can view this content.",customers_only:"Only customers can view this content.",private:"This content is private.",no_post_context:"Post not found.",no_author_context:"Author not found."}[e]??"Content not available.":"Content not available.";return React.createElement("div",{className:"ts-no-posts"},React.createElement("p",null,n))}function cu({attributes:e,context:t,className:n=""}){const{config:r}=Ue(),{visible:s,reason:a}=pa(),i=ga(),l=o.useRef(null),d=e?.orderingOptions,f=o.useMemo(()=>(Array.isArray(d)?d:[]).map(C=>({_id:C._id??"default",order:C.order??"latest",time:C.time??"all_time",timeCustom:C.timeCustom??7,label:C.label??"Latest"})),[d]),h=R=>{l.current?.addStatus(R)};if(!s)return React.createElement("div",{className:`vxfeed ${n}`},React.createElement(lu,{reason:a}));const w=t==="editor"?!0:i?.can_post??!1,D=i?.placeholder;return React.createElement(React.Fragment,null,r&&React.createElement(React.Fragment,null,React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify({timeline:{mode:e.mode},current_user:r.current_user,current_post:r.current_post??null,settings:{character_limits:r.character_limits,upload_config:r.upload_config,features:r.features,statuses_per_page:r.statuses_per_page,comments_per_page:r.comments_per_page},l10n:r.strings,reviews:r.review_config,nonce:r.nonces.status_publish,composer:{post_types:r.post_types,default_order:r.default_order}})}}),React.createElement("script",{type:"text/json",className:"vxconfig__icons",dangerouslySetInnerHTML:{__html:JSON.stringify(r.icons||{})}})),React.createElement("div",{className:`vxfeed ${n}`},w&&React.createElement(ys,{feed:i?.feed,placeholder:D,onStatusCreated:h}),React.createElement(ou,{ref:l,mode:e.mode,showFilters:f.length>1||e.searchEnabled,showSearch:e.searchEnabled,emptyMessage:e.noStatusText})))}function uu({attributes:e,context:t,postId:n,className:r=""}){return React.createElement(ma,{attributes:e,postId:n,context:t},React.createElement(cu,{attributes:e,context:t,className:r}))}var Jn,Ds,Ot,Rs;Jn={"(":9,"!":8,"*":7,"/":7,"%":7,"+":6,"-":6,"<":5,"<=":5,">":5,">=":5,"==":4,"!=":4,"&&":3,"||":2,"?":1,"?:":1},Ds=["(","?"],Ot={")":["("],":":["?","?:"]},Rs=/<=|>=|==|!=|&&|\|\||\?:|\(|!|\*|\/|%|\+|-|<|>|\?|\)|:/;function du(e){for(var t=[],n=[],r,s,a,i;r=e.match(Rs);){for(s=r[0],a=e.substr(0,r.index).trim(),a&&t.push(a);i=n.pop();){if(Ot[s]){if(Ot[s][0]===i){s=Ot[s][1]||s;break}}else if(Ds.indexOf(i)>=0||Jn[i]<Jn[s]){n.push(i);break}t.push(i)}Ot[s]||n.push(s),e=e.substr(r.index+s.length)}return e=e.trim(),e&&t.push(e),t.concat(n.reverse())}var fu={"!":function(e){return!e},"*":function(e,t){return e*t},"/":function(e,t){return e/t},"%":function(e,t){return e%t},"+":function(e,t){return e+t},"-":function(e,t){return e-t},"<":function(e,t){return e<t},"<=":function(e,t){return e<=t},">":function(e,t){return e>t},">=":function(e,t){return e>=t},"==":function(e,t){return e===t},"!=":function(e,t){return e!==t},"&&":function(e,t){return e&&t},"||":function(e,t){return e||t},"?:":function(e,t,n){if(e)throw t;return n}};function mu(e,t){var n=[],r,s,a,i,l,d;for(r=0;r<e.length;r++){if(l=e[r],i=fu[l],i){for(s=i.length,a=Array(s);s--;)a[s]=n.pop();try{d=i.apply(null,a)}catch(f){return f}}else t.hasOwnProperty(l)?d=t[l]:d=+l;n.push(d)}return n[0]}function hu(e){var t=du(e);return function(n){return mu(t,n)}}function pu(e){var t=hu(e);return function(n){return+t({n})}}var Ns={contextDelimiter:"",onMissingKey:null};function gu(e){var t,n,r;for(t=e.split(";"),n=0;n<t.length;n++)if(r=t[n].trim(),r.indexOf("plural=")===0)return r.substr(7)}function Xn(e,t){var n;this.data=e,this.pluralForms={},this.options={};for(n in Ns)this.options[n]=t!==void 0&&n in t?t[n]:Ns[n]}Xn.prototype.getPluralForm=function(e,t){var n=this.pluralForms[e],r,s,a;return n||(r=this.data[e][""],a=r["Plural-Forms"]||r["plural-forms"]||r.plural_forms,typeof a!="function"&&(s=gu(r["Plural-Forms"]||r["plural-forms"]||r.plural_forms),a=pu(s)),n=this.pluralForms[e]=a),n(t)},Xn.prototype.dcnpgettext=function(e,t,n,r,s){var a,i,l;return s===void 0?a=0:a=this.getPluralForm(e,s),i=n,t&&(i=t+this.options.contextDelimiter+n),l=this.data[e][i],l&&l[a]?l[a]:(this.options.onMissingKey&&this.options.onMissingKey(n,e),a===0?n:r)};var Ls={"":{plural_forms(e){return e===1?0:1}}},vu=/^i18n\.(n?gettext|has_translation)(_|$)/,_u=(e,t,n)=>{const r=new Xn({}),s=new Set,a=()=>{s.forEach(_=>_())},i=_=>(s.add(_),()=>s.delete(_)),l=(_="default")=>r.data[_],d=(_,E="default")=>{r.data[E]={...r.data[E],..._},r.data[E][""]={...Ls[""],...r.data[E]?.[""]},delete r.pluralForms[E]},f=(_,E)=>{d(_,E),a()},h=(_,E="default")=>{r.data[E]={...r.data[E],..._,"":{...Ls[""],...r.data[E]?.[""],..._?.[""]}},delete r.pluralForms[E],a()},m=(_,E)=>{r.data={},r.pluralForms={},f(_,E)},w=(_="default",E,O,b,y)=>(r.data[_]||d(void 0,_),r.dcnpgettext(_,E,O,b,y)),D=_=>_||"default",R=(_,E)=>{let O=w(E,void 0,_);return n?(O=n.applyFilters("i18n.gettext",O,_,E),n.applyFilters("i18n.gettext_"+D(E),O,_,E)):O},C=(_,E,O)=>{let b=w(O,E,_);return n?(b=n.applyFilters("i18n.gettext_with_context",b,_,E,O),n.applyFilters("i18n.gettext_with_context_"+D(O),b,_,E,O)):b},g=(_,E,O,b)=>{let y=w(b,void 0,_,E,O);return n?(y=n.applyFilters("i18n.ngettext",y,_,E,O,b),n.applyFilters("i18n.ngettext_"+D(b),y,_,E,O,b)):y},k=(_,E,O,b,y)=>{let L=w(y,b,_,E,O);return n?(L=n.applyFilters("i18n.ngettext_with_context",L,_,E,O,b,y),n.applyFilters("i18n.ngettext_with_context_"+D(y),L,_,E,O,b,y)):L},v=()=>C("ltr","text direction")==="rtl",S=(_,E,O)=>{const b=E?E+""+_:_;let y=!!r.data?.[O??"default"]?.[b];return n&&(y=n.applyFilters("i18n.has_translation",y,_,E,O),y=n.applyFilters("i18n.has_translation_"+D(O),y,_,E,O)),y};if(n){const _=E=>{vu.test(E)&&a()};n.addAction("hookAdded","core/i18n",_),n.addAction("hookRemoved","core/i18n",_)}return{getLocaleData:l,setLocaleData:f,addLocaleData:h,resetLocaleData:m,subscribe:i,__:R,_x:C,_n:g,_nx:k,isRTL:v,hasTranslation:S}};function yu(e){return typeof e!="string"||e===""?(console.error("The namespace must be a non-empty string."),!1):/^[a-zA-Z][a-zA-Z0-9_.\-\/]*$/.test(e)?!0:(console.error("The namespace can only contain numbers, letters, dashes, periods, underscores and slashes."),!1)}var Ts=yu;function wu(e){return typeof e!="string"||e===""?(console.error("The hook name must be a non-empty string."),!1):/^__/.test(e)?(console.error("The hook name cannot begin with `__`."),!1):/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(e)?!0:(console.error("The hook name can only contain numbers, letters, dashes, periods and underscores."),!1)}var Qn=wu;function Cu(e,t){return function(r,s,a,i=10){const l=e[t];if(!Qn(r)||!Ts(s))return;if(typeof a!="function"){console.error("The hook callback must be a function.");return}if(typeof i!="number"){console.error("If specified, the hook priority must be a number.");return}const d={callback:a,priority:i,namespace:s};if(l[r]){const f=l[r].handlers;let h;for(h=f.length;h>0&&!(i>=f[h-1].priority);h--);h===f.length?f[h]=d:f.splice(h,0,d),l.__current.forEach(m=>{m.name===r&&m.currentIndex>=h&&m.currentIndex++})}else l[r]={handlers:[d],runs:0};r!=="hookAdded"&&e.doAction("hookAdded",r,s,a,i)}}var Os=Cu;function ku(e,t,n=!1){return function(s,a){const i=e[t];if(!Qn(s)||!n&&!Ts(a))return;if(!i[s])return 0;let l=0;if(n)l=i[s].handlers.length,i[s]={runs:i[s].runs,handlers:[]};else{const d=i[s].handlers;for(let f=d.length-1;f>=0;f--)d[f].namespace===a&&(d.splice(f,1),l++,i.__current.forEach(h=>{h.name===s&&h.currentIndex>=f&&h.currentIndex--}))}return s!=="hookRemoved"&&e.doAction("hookRemoved",s,a),l}}var cn=ku;function Eu(e,t){return function(r,s){const a=e[t];return typeof s<"u"?r in a&&a[r].handlers.some(i=>i.namespace===s):r in a}}var Fs=Eu;function xu(e,t,n,r){return function(a,...i){const l=e[t];l[a]||(l[a]={handlers:[],runs:0}),l[a].runs++;const d=l[a].handlers;if(!d||!d.length)return n?i[0]:void 0;const f={name:a,currentIndex:0};async function h(){try{l.__current.add(f);let w=n?i[0]:void 0;for(;f.currentIndex<d.length;)w=await d[f.currentIndex].callback.apply(null,i),n&&(i[0]=w),f.currentIndex++;return n?w:void 0}finally{l.__current.delete(f)}}function m(){try{l.__current.add(f);let w=n?i[0]:void 0;for(;f.currentIndex<d.length;)w=d[f.currentIndex].callback.apply(null,i),n&&(i[0]=w),f.currentIndex++;return n?w:void 0}finally{l.__current.delete(f)}}return(r?h:m)()}}var un=xu;function bu(e,t){return function(){const r=e[t];return Array.from(r.__current).at(-1)?.name??null}}var As=bu;function Su(e,t){return function(r){const s=e[t];return typeof r>"u"?s.__current.size>0:Array.from(s.__current).some(a=>a.name===r)}}var Ys=Su;function Mu(e,t){return function(r){const s=e[t];if(Qn(r))return s[r]&&s[r].runs?s[r].runs:0}}var Ps=Mu,Du=class{actions;filters;addAction;addFilter;removeAction;removeFilter;hasAction;hasFilter;removeAllActions;removeAllFilters;doAction;doActionAsync;applyFilters;applyFiltersAsync;currentAction;currentFilter;doingAction;doingFilter;didAction;didFilter;constructor(){this.actions=Object.create(null),this.actions.__current=new Set,this.filters=Object.create(null),this.filters.__current=new Set,this.addAction=Os(this,"actions"),this.addFilter=Os(this,"filters"),this.removeAction=cn(this,"actions"),this.removeFilter=cn(this,"filters"),this.hasAction=Fs(this,"actions"),this.hasFilter=Fs(this,"filters"),this.removeAllActions=cn(this,"actions",!0),this.removeAllFilters=cn(this,"filters",!0),this.doAction=un(this,"actions",!1,!1),this.doActionAsync=un(this,"actions",!1,!0),this.applyFilters=un(this,"filters",!0,!1),this.applyFiltersAsync=un(this,"filters",!0,!0),this.currentAction=As(this,"actions"),this.currentFilter=As(this,"filters"),this.doingAction=Ys(this,"actions"),this.doingFilter=Ys(this,"filters"),this.didAction=Ps(this,"actions"),this.didFilter=Ps(this,"filters")}};function Ru(){return new Du}var Nu=Ru,js=Nu(),{addAction:Pu,addFilter:ju,removeAction:Iu,removeFilter:Hu,hasAction:Wu,hasFilter:Uu,removeAllActions:Vu,removeAllFilters:Zu,doAction:Bu,doActionAsync:zu,applyFilters:Gu,applyFiltersAsync:qu,currentAction:Ju,currentFilter:Xu,doingAction:Qu,doingFilter:Ku,didAction:$u,didFilter:ed,actions:td,filters:nd}=js,he=_u(void 0,void 0,js);he.getLocaleData.bind(he),he.setLocaleData.bind(he),he.resetLocaleData.bind(he),he.subscribe.bind(he),he.__.bind(he),he._x.bind(he),he._n.bind(he),he._nx.bind(he),he.isRTL.bind(he),he.hasTranslation.bind(he);const Is={noStatusText:"No posts available",searchEnabled:!0};console.log("[Timeline Frontend] Script loaded!",{time:new Date().toISOString(),readyState:document.readyState});function Lu(){const e=window.Voxel_Config;if(e?.post?.id)return e.post.id;const t=document.querySelector('script.vxconfig[type="text/json"]');if(t?.textContent)try{const n=JSON.parse(t.textContent);if(n?.post?.id)return n.post.id}catch{}}function Tu(e){const t=e.timeline??e.Timeline??{},n=e.block_settings??e.blockSettings??{},r=e.icons??{},s=n.ordering_options??n.orderingOptions??[],a=Array.isArray(s)?s.map(i=>({_id:i._id??i.id??"default",label:i.label??"Latest",order:i.order??"latest",time:i.time??"all_time",time_custom:i.time_custom??i.timeCustom??7})):[];return{timeline:{mode:t.mode??"user_feed"},block_settings:{no_status_text:n.no_status_text??n.noStatusText??"No posts available",search_enabled:n.search_enabled??n.searchEnabled??!0,search_value:n.search_value??n.searchValue??"",ordering_options:a},icons:{verified:r.verified,repost:r.repost,more:r.more,like:r.like,liked:r.liked,comment:r.comment,reply:r.reply,gallery:r.gallery,upload:r.upload,emoji:r.emoji,search:r.search,trash:r.trash,external:r.external??r.externalLink,loadMore:r.loadMore??r.load_more,noPosts:r.noPosts??r.no_posts}}}const Ft=new Map;function Ou(e,t){if(!e?.textContent)return t;try{return JSON.parse(e.textContent)}catch(n){return console.error("[Timeline] Failed to parse JSON:",n),t}}function Fu(e){const t=e?.block_settings?.ordering_options??[],n=Array.isArray(t)?t.map(i=>({_id:i._id??"default",order:i.order??"latest",time:i.time??"all_time",timeCustom:i.time_custom??7,label:i.label??"Latest"})):[],r=e?.icons||{},s=e?.timeline?.mode??"user_feed",a=e?.block_settings??{};return{mode:s,orderingOptions:n,noStatusText:a.no_status_text||Is.noStatusText,searchEnabled:a.search_enabled??Is.searchEnabled,searchValue:a.search_value||"",verifiedIcon:r.verified?{svg:r.verified}:null,repostIcon:r.repost?{svg:r.repost}:null,moreIcon:r.more?{svg:r.more}:null,likeIcon:r.like?{svg:r.like}:null,likedIcon:r.liked?{svg:r.liked}:null,commentIcon:r.comment?{svg:r.comment}:null,replyIcon:r.reply?{svg:r.reply}:null,galleryIcon:r.gallery?{svg:r.gallery}:null,uploadIcon:r.upload?{svg:r.upload}:null,emojiIcon:r.emoji?{svg:r.emoji}:null,searchIcon:r.search?{svg:r.search}:null,trashIcon:r.trash?{svg:r.trash}:null,externalIcon:r.external?{svg:r.external}:null,loadMoreIcon:r.loadMore?{svg:r.loadMore}:null,noPostsIcon:r.noPosts?{svg:r.noPosts}:null}}function Hs(e){if(e.hasAttribute("data-timeline-initialized"))return;e.setAttribute("data-timeline-initialized","true");const t=e.querySelector("script.vxconfig-block"),n=Ou(t,{}),r=Tu(n),s=Fu(r),a=Lu();e.querySelector(".voxel-fse-timeline-placeholder")?.remove(),t?.remove(),e.querySelector("script.vxconfig-icons")?.remove();const d=Ws.createRoot(e);Ft.set(e,d),d.render(React.createElement(uu,{attributes:s,postId:a,context:"frontend",className:"voxel-fse-timeline-mounted"})),console.log("[Timeline] React component mounted:",e)}function At(){const e=document.querySelectorAll(".voxel-fse-timeline-frontend:not([data-timeline-initialized])");e.length!==0&&(console.log(`[Timeline] Found ${e.length} timeline block(s) to initialize`),e.forEach(t=>{Hs(t)}))}function Au(e){const t=Ft.get(e);t&&(t.unmount(),Ft.delete(e),e.removeAttribute("data-timeline-initialized"))}function Kn(){Ft.forEach((e,t)=>{e.unmount(),t.removeAttribute("data-timeline-initialized")}),Ft.clear()}return document.readyState==="loading"?document.addEventListener("DOMContentLoaded",At):At(),window.addEventListener("turbo:before-render",Kn),window.addEventListener("turbo:load",At),window.addEventListener("pjax:start",Kn),window.addEventListener("pjax:complete",At),ot.cleanupAllTimelineBlocks=Kn,ot.cleanupTimelineBlock=Au,ot.initTimelineBlock=Hs,ot.initTimelineBlocks=At,Object.defineProperty(ot,Symbol.toStringTag,{value:"Module"}),ot})({},ReactDOM,React,ReactDOM);
