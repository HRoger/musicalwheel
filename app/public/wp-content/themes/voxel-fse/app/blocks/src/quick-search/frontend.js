(function(se,g,oe){"use strict";var q,z,H,J;q={"(":9,"!":8,"*":7,"/":7,"%":7,"+":6,"-":6,"<":5,"<=":5,">":5,">=":5,"==":4,"!=":4,"&&":3,"||":2,"?":1,"?:":1},z=["(","?"],H={")":["("],":":["?","?:"]},J=/<=|>=|==|!=|&&|\|\||\?:|\(|!|\*|\/|%|\+|-|<|>|\?|\)|:/;function le(e){for(var n=[],t=[],r,s,l,o;r=e.match(J);){for(s=r[0],l=e.substr(0,r.index).trim(),l&&n.push(l);o=t.pop();){if(H[s]){if(H[s][0]===o){s=H[s][1]||s;break}}else if(z.indexOf(o)>=0||q[o]<q[s]){t.push(o);break}n.push(o)}H[s]||t.push(s),e=e.substr(r.index+s.length)}return e=e.trim(),e&&n.push(e),n.concat(t.reverse())}var ae={"!":function(e){return!e},"*":function(e,n){return e*n},"/":function(e,n){return e/n},"%":function(e,n){return e%n},"+":function(e,n){return e+n},"-":function(e,n){return e-n},"<":function(e,n){return e<n},"<=":function(e,n){return e<=n},">":function(e,n){return e>n},">=":function(e,n){return e>=n},"==":function(e,n){return e===n},"!=":function(e,n){return e!==n},"&&":function(e,n){return e&&n},"||":function(e,n){return e||n},"?:":function(e,n,t){if(e)throw n;return t}};function ie(e,n){var t=[],r,s,l,o,d,u;for(r=0;r<e.length;r++){if(d=e[r],o=ae[d],o){for(s=o.length,l=Array(s);s--;)l[s]=t.pop();try{u=o.apply(null,l)}catch(p){return p}}else n.hasOwnProperty(d)?u=n[d]:u=+d;t.push(u)}return t[0]}function ce(e){var n=le(e);return function(t){return ie(n,t)}}function ue(e){var n=ce(e);return function(t){return+n({n:t})}}var W={contextDelimiter:"",onMissingKey:null};function de(e){var n,t,r;for(n=e.split(";"),t=0;t<n.length;t++)if(r=n[t].trim(),r.indexOf("plural=")===0)return r.substr(7)}function K(e,n){var t;this.data=e,this.pluralForms={},this.options={};for(t in W)this.options[t]=n!==void 0&&t in n?n[t]:W[t]}K.prototype.getPluralForm=function(e,n){var t=this.pluralForms[e],r,s,l;return t||(r=this.data[e][""],l=r["Plural-Forms"]||r["plural-forms"]||r.plural_forms,typeof l!="function"&&(s=de(r["Plural-Forms"]||r["plural-forms"]||r.plural_forms),l=ue(s)),t=this.pluralForms[e]=l),t(n)},K.prototype.dcnpgettext=function(e,n,t,r,s){var l,o,d;return s===void 0?l=0:l=this.getPluralForm(e,s),o=t,n&&(o=n+this.options.contextDelimiter+t),d=this.data[e][o],d&&d[l]?d[l]:(this.options.onMissingKey&&this.options.onMissingKey(t,e),l===0?t:r)};var V={"":{plural_forms(e){return e===1?0:1}}},fe=/^i18n\.(n?gettext|has_translation)(_|$)/,pe=(e,n,t)=>{const r=new K({}),s=new Set,l=()=>{s.forEach(a=>a())},o=a=>(s.add(a),()=>s.delete(a)),d=(a="default")=>r.data[a],u=(a,i="default")=>{r.data[i]={...r.data[i],...a},r.data[i][""]={...V[""],...r.data[i]?.[""]},delete r.pluralForms[i]},p=(a,i)=>{u(a,i),l()},v=(a,i="default")=>{r.data[i]={...r.data[i],...a,"":{...V[""],...r.data[i]?.[""],...a?.[""]}},delete r.pluralForms[i],l()},R=(a,i)=>{r.data={},r.pluralForms={},p(a,i)},w=(a="default",i,y,b,E)=>(r.data[a]||u(void 0,a),r.dcnpgettext(a,i,y,b,E)),T=a=>a||"default",A=(a,i)=>{let y=w(i,void 0,a);return t?(y=t.applyFilters("i18n.gettext",y,a,i),t.applyFilters("i18n.gettext_"+T(i),y,a,i)):y},C=(a,i,y)=>{let b=w(y,i,a);return t?(b=t.applyFilters("i18n.gettext_with_context",b,a,i,y),t.applyFilters("i18n.gettext_with_context_"+T(y),b,a,i,y)):b},D=(a,i,y,b)=>{let E=w(b,void 0,a,i,y);return t?(E=t.applyFilters("i18n.ngettext",E,a,i,y,b),t.applyFilters("i18n.ngettext_"+T(b),E,a,i,y,b)):E},Q=(a,i,y,b,E)=>{let I=w(E,b,a,i,y);return t?(I=t.applyFilters("i18n.ngettext_with_context",I,a,i,y,b,E),t.applyFilters("i18n.ngettext_with_context_"+T(E),I,a,i,y,b,E)):I},f=()=>C("ltr","text direction")==="rtl",O=(a,i,y)=>{const b=i?i+""+a:a;let E=!!r.data?.[y??"default"]?.[b];return t&&(E=t.applyFilters("i18n.has_translation",E,a,i,y),E=t.applyFilters("i18n.has_translation_"+T(y),E,a,i,y)),E};if(t){const a=i=>{fe.test(i)&&l()};t.addAction("hookAdded","core/i18n",a),t.addAction("hookRemoved","core/i18n",a)}return{getLocaleData:d,setLocaleData:p,addLocaleData:v,resetLocaleData:R,subscribe:o,__:A,_x:C,_n:D,_nx:Q,isRTL:f,hasTranslation:O}};function he(e){return typeof e!="string"||e===""?(console.error("The namespace must be a non-empty string."),!1):/^[a-zA-Z][a-zA-Z0-9_.\-\/]*$/.test(e)?!0:(console.error("The namespace can only contain numbers, letters, dashes, periods, underscores and slashes."),!1)}var Z=he;function me(e){return typeof e!="string"||e===""?(console.error("The hook name must be a non-empty string."),!1):/^__/.test(e)?(console.error("The hook name cannot begin with `__`."),!1):/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(e)?!0:(console.error("The hook name can only contain numbers, letters, dashes, periods and underscores."),!1)}var $=me;function ye(e,n){return function(r,s,l,o=10){const d=e[n];if(!$(r)||!Z(s))return;if(typeof l!="function"){console.error("The hook callback must be a function.");return}if(typeof o!="number"){console.error("If specified, the hook priority must be a number.");return}const u={callback:l,priority:o,namespace:s};if(d[r]){const p=d[r].handlers;let v;for(v=p.length;v>0&&!(o>=p[v-1].priority);v--);v===p.length?p[v]=u:p.splice(v,0,u),d.__current.forEach(R=>{R.name===r&&R.currentIndex>=v&&R.currentIndex++})}else d[r]={handlers:[u],runs:0};r!=="hookAdded"&&e.doAction("hookAdded",r,s,l,o)}}var G=ye;function ge(e,n,t=!1){return function(s,l){const o=e[n];if(!$(s)||!t&&!Z(l))return;if(!o[s])return 0;let d=0;if(t)d=o[s].handlers.length,o[s]={runs:o[s].runs,handlers:[]};else{const u=o[s].handlers;for(let p=u.length-1;p>=0;p--)u[p].namespace===l&&(u.splice(p,1),d++,o.__current.forEach(v=>{v.name===s&&v.currentIndex>=p&&v.currentIndex--}))}return s!=="hookRemoved"&&e.doAction("hookRemoved",s,l),d}}var N=ge;function ve(e,n){return function(r,s){const l=e[n];return typeof s<"u"?r in l&&l[r].handlers.some(o=>o.namespace===s):r in l}}var X=ve;function be(e,n,t,r){return function(l,...o){const d=e[n];d[l]||(d[l]={handlers:[],runs:0}),d[l].runs++;const u=d[l].handlers;if(!u||!u.length)return t?o[0]:void 0;const p={name:l,currentIndex:0};async function v(){try{d.__current.add(p);let w=t?o[0]:void 0;for(;p.currentIndex<u.length;)w=await u[p.currentIndex].callback.apply(null,o),t&&(o[0]=w),p.currentIndex++;return t?w:void 0}finally{d.__current.delete(p)}}function R(){try{d.__current.add(p);let w=t?o[0]:void 0;for(;p.currentIndex<u.length;)w=u[p.currentIndex].callback.apply(null,o),t&&(o[0]=w),p.currentIndex++;return t?w:void 0}finally{d.__current.delete(p)}}return(r?v:R)()}}var j=be;function ke(e,n){return function(){const r=e[n];return Array.from(r.__current).at(-1)?.name??null}}var Y=ke;function Re(e,n){return function(r){const s=e[n];return typeof r>"u"?s.__current.size>0:Array.from(s.__current).some(l=>l.name===r)}}var ee=Re;function we(e,n){return function(r){const s=e[n];if($(r))return s[r]&&s[r].runs?s[r].runs:0}}var te=we,Ee=class{actions;filters;addAction;addFilter;removeAction;removeFilter;hasAction;hasFilter;removeAllActions;removeAllFilters;doAction;doActionAsync;applyFilters;applyFiltersAsync;currentAction;currentFilter;doingAction;doingFilter;didAction;didFilter;constructor(){this.actions=Object.create(null),this.actions.__current=new Set,this.filters=Object.create(null),this.filters.__current=new Set,this.addAction=G(this,"actions"),this.addFilter=G(this,"filters"),this.removeAction=N(this,"actions"),this.removeFilter=N(this,"filters"),this.hasAction=X(this,"actions"),this.hasFilter=X(this,"filters"),this.removeAllActions=N(this,"actions",!0),this.removeAllFilters=N(this,"filters",!0),this.doAction=j(this,"actions",!1,!1),this.doActionAsync=j(this,"actions",!1,!0),this.applyFilters=j(this,"filters",!0,!1),this.applyFiltersAsync=j(this,"filters",!0,!0),this.currentAction=Y(this,"actions"),this.currentFilter=Y(this,"filters"),this.doingAction=ee(this,"actions"),this.doingFilter=ee(this,"filters"),this.didAction=te(this,"actions"),this.didFilter=te(this,"filters")}};function _e(){return new Ee}var Se=_e,ne=Se(),{addAction:Qe,addFilter:ze,removeAction:Je,removeFilter:We,hasAction:Ve,hasFilter:Ze,removeAllActions:Ge,removeAllFilters:Xe,doAction:Ye,doActionAsync:et,applyFilters:tt,applyFiltersAsync:nt,currentAction:rt,currentFilter:st,doingAction:ot,doingFilter:lt,didAction:at,didFilter:it,actions:ct,filters:ut}=ne,k=pe(void 0,void 0,ne);k.getLocaleData.bind(k),k.setLocaleData.bind(k),k.resetLocaleData.bind(k),k.subscribe.bind(k);var M=k.__.bind(k);k._x.bind(k),k._n.bind(k),k._nx.bind(k),k.isRTL.bind(k),k.hasTranslation.bind(k);function xe(e,n){let t=null;return(...r)=>{t&&clearTimeout(t),t=setTimeout(()=>e(...r),n)}}function Te(){return typeof navigator<"u"&&(navigator.platform||"").includes("Mac")?"macOS":"other"}const F=()=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",width:"24",height:"24"},React.createElement("circle",{cx:"11",cy:"11",r:"8"}),React.createElement("path",{d:"m21 21-4.35-4.35"})),Ae=()=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",width:"24",height:"24"},React.createElement("path",{d:"M18 6 6 18"}),React.createElement("path",{d:"m6 6 12 12"})),re=()=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",width:"24",height:"24"},React.createElement("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),React.createElement("polyline",{points:"14 2 14 8 20 8"})),Ce=()=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",width:"24",height:"24"},React.createElement("circle",{cx:"12",cy:"12",r:"10"}),React.createElement("path",{d:"m15 9-6 6"}),React.createElement("path",{d:"m9 9 6 6"}));function x(e,n){return!e||!e.value||e.library===""?React.createElement(n,null):e.library==="svg"?React.createElement("img",{src:e.value,alt:""}):e.library==="icon"?React.createElement("i",{className:e.value}):React.createElement(n,null)}function Le({attributes:e,postTypes:n,context:t,vxConfig:r}){const[s,l]=g.useState(!1),[o,d]=g.useState(""),[u,p]=g.useState(n[0]||null),[v,R]=g.useState([]),[w,T]=g.useState(!1),[A,C]=g.useState([]),D=g.useRef(null),Q=g.useRef(null),f=r||{postTypes:{},displayMode:e.displayMode||"single",keywords:{minlength:2},singleMode:{submitTo:e.singleSubmitTo||null,filterKey:e.singleSubmitKey||"keywords"},icons:{search:e.searchIcon,close:e.closeIcon,result:e.resultIcon,clearSearches:e.clearSearchesIcon},buttonLabel:e.buttonLabel||"Quick search",hideCptTabs:e.hideCptTabs||!1};g.useEffect(()=>{if(t==="frontend")try{const h=localStorage.getItem("voxel:recent_searches");if(h){const m=JSON.parse(h);Array.isArray(m)&&C(m)}}catch{}},[t]),g.useEffect(()=>{n.length>0&&!u&&p(n[0])},[n,u]),g.useEffect(()=>{if(t!=="frontend")return;const h=m=>{(m.ctrlKey||m.metaKey)&&m.keyCode===75&&(m.preventDefault(),l(_=>!_)),m.keyCode===27&&l(!1)};return document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)},[t]),g.useEffect(()=>{s&&D.current&&setTimeout(()=>D.current?.focus(),100)},[s]);const O=g.useCallback(async()=>{if(o.trim().length<f.keywords.minlength){R([]);return}if(t==="editor"){R([{type:"post",key:"post:1",link:"#",title:`Search result for "${o}"`,logo:null,icon:null}]);return}T(!0);try{const h={};if(f.displayMode==="tabbed"&&u){const L=e.postTypeSettings?.[u.key]||{};h[u.key]={filter_key:L.filter||"keywords",taxonomies:L.taxonomies||[]}}else n.forEach(L=>{const U=e.postTypeSettings?.[L.key]||{};h[L.key]={filter_key:U.filter||"keywords",taxonomies:U.taxonomies||[]}});const S=`${window.Voxel_Config?.site_url||window.location.origin}/?vx=1`,c=await(await fetch(`${S}&action=quick_search&search=${encodeURIComponent(o.trim())}&post_types=${encodeURIComponent(JSON.stringify(h))}`)).json();c.success?R(c.data||[]):R([])}catch{R([])}finally{T(!1)}},[o,f,u,n,e.postTypeSettings,t]),a=g.useMemo(()=>xe(()=>O(),250),[O]);g.useEffect(()=>{a()},[o,a]);const i=g.useCallback(h=>{if(t!=="frontend")return;const m=A.filter(S=>S.key!==h.key);m.unshift(h);const _=m.slice(0,8);C(_),localStorage.setItem("voxel:recent_searches",JSON.stringify(_))},[t,A]),y=g.useCallback(()=>{if(t!=="frontend"||!o.trim())return;const h=`keywords:${o.trim()}`;let m="";if(f.displayMode==="tabbed"&&u){const S=new URL(u.archive||window.location.origin),B=e.postTypeSettings?.[u.key]||{};S.searchParams.set(B.filter||"keywords",o.trim()),m=S.toString()}else if(f.singleMode.submitTo){const S=new URL(f.singleMode.submitTo);S.searchParams.set(f.singleMode.filterKey,o.trim()),m=S.toString()}const _={type:"keywords",key:h,title:o.trim(),logo:null,link:m};i(_)},[t,o,f,u,e.postTypeSettings,i]),b=g.useCallback(()=>{if(t!=="frontend")return;let h;if(f.displayMode==="tabbed"&&u){h=new URL(u.archive||window.location.origin);const m=e.postTypeSettings?.[u.key]||{};h.searchParams.set(m.filter||"keywords",o.trim())}else if(f.singleMode.submitTo)h=new URL(f.singleMode.submitTo),h.searchParams.set(f.singleMode.filterKey,o.trim());else return;window.location.href=h.toString()},[t,f,u,e.postTypeSettings,o]),E=g.useCallback(()=>{t==="frontend"&&(C([]),localStorage.setItem("voxel:recent_searches",JSON.stringify([])))},[t]),I=g.useCallback(h=>{i(h)},[i]),Be=g.useCallback(h=>{const m=A.filter(_=>_.key!==h.key);m.unshift(h),C(m),localStorage.setItem("voxel:recent_searches",JSON.stringify(m))},[A]),Ue=Te()==="macOS"?"⌘+K":"CTRL+K",qe=()=>{const h={postTypes:Object.fromEntries(n.map(m=>{const _=e.postTypeSettings?.[m.key]||{};return[m.key,{key:m.key,label:_.label||m.label,filter:_.filter||"keywords",taxonomies:_.taxonomies||[],archive:m.archive||"",results:{query:"",items:[]}}]})),displayMode:e.displayMode||"single",keywords:{minlength:2},singleMode:{submitTo:e.singleSubmitTo||null,filterKey:e.singleSubmitKey||"keywords"},icons:{search:e.searchIcon||{library:"",value:""},close:e.closeIcon||{library:"",value:""},result:e.resultIcon||{library:"",value:""},clearSearches:e.clearSearchesIcon||{library:"",value:""}},buttonLabel:e.buttonLabel||"Quick search",hideCptTabs:e.hideCptTabs||!1};return React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(h)}})},Ke=()=>{const h=f.displayMode==="tabbed"&&!f.hideCptTabs&&n.length>1,m=o.trim().length<f.keywords.minlength&&A.length>0,_=o.trim().length<f.keywords.minlength&&A.length===0,S=o.trim().length>=f.keywords.minlength,B=S&&v.length===0&&!w;return React.createElement("form",{onSubmit:c=>{c.preventDefault(),y(),b()}},React.createElement("div",{className:"ts-sticky-top qs-top uib b-bottom"},React.createElement("a",{href:"#",className:"ts-icon-btn hide-d",role:"button",onClick:c=>{c.preventDefault(),l(!1)}},x(f.icons.close,Ae)),React.createElement("div",{className:"ts-input-icon flexify"},x(f.icons.search,F),React.createElement("input",{ref:D,type:"text",value:o,onChange:c=>d(c.target.value),onKeyDown:c=>{c.key==="Enter"&&(c.preventDefault(),y(),b())},placeholder:f.buttonLabel,className:"autofocus",maxLength:100}))),h&&React.createElement("div",{className:"ts-form-group cpt-tabs"},React.createElement("ul",{className:"ts-generic-tabs flexify simplify-ul quick-cpt-select"},n.map(c=>{const L=e.postTypeSettings?.[c.key]||{};return React.createElement("li",{key:c.key,className:u?.key===c.key?"ts-tab-active":""},React.createElement("a",{href:"#",onClick:U=>{U.preventDefault(),p(c),R([]),O()}},L.label||c.label))}))),React.createElement("div",{className:`ts-term-dropdown ts-md-group ts-multilevel-dropdown ${w?"vx-pending":""}`},_&&React.createElement("div",{className:"ts-empty-user-tab"},x(f.icons.search,F),React.createElement("p",null,M("No recent searches.","voxel-fse"))),m&&React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list quick-search-list"},A.map(c=>React.createElement("li",{key:c.key},React.createElement("a",{rel:"nofollow",href:c.link,onClick:()=>Be(c),className:"flexify"},c.logo&&React.createElement("div",{className:"ts-term-image"},React.createElement("span",{dangerouslySetInnerHTML:{__html:c.logo}})),!c.logo&&c.icon&&React.createElement("div",{className:"ts-term-icon"},React.createElement("span",{dangerouslySetInnerHTML:{__html:c.icon}})),!c.logo&&!c.icon&&React.createElement("div",{className:"ts-term-icon"},React.createElement("span",null,x(f.icons.result,re))),React.createElement("span",null,c.title)))),React.createElement("li",null,React.createElement("a",{href:"#",className:"flexify",onClick:c=>{c.preventDefault(),E()}},React.createElement("div",{className:"ts-term-icon"},React.createElement("span",null,x(f.icons.clearSearches,Ce))),React.createElement("span",null,M("Clear searches","voxel-fse"))))),B&&React.createElement("div",{className:"ts-empty-user-tab"},x(f.icons.search,F),React.createElement("p",null,M("No results found","voxel-fse"))),w&&S&&v.length===0&&React.createElement("div",{className:"ts-empty-user-tab"},x(f.icons.search,F),React.createElement("p",null,M("Searching","voxel-fse"))),S&&v.length>0&&React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list quick-search-list"},v.map(c=>React.createElement("li",{key:c.key},React.createElement("a",{rel:"nofollow",href:c.link,onClick:()=>I(c),className:"flexify"},c.logo&&React.createElement("div",{className:"ts-term-image"},React.createElement("span",{dangerouslySetInnerHTML:{__html:c.logo}})),!c.logo&&c.icon&&React.createElement("div",{className:"ts-term-icon"},React.createElement("span",{dangerouslySetInnerHTML:{__html:c.icon}})),!c.logo&&!c.icon&&React.createElement("div",{className:"ts-term-icon"},React.createElement("span",null,x(f.icons.result,re))),React.createElement("span",null,c.title)))),React.createElement("li",{className:"view-all"},React.createElement("a",{href:"#",onClick:c=>{c.preventDefault(),y(),b()},className:"flexify"},React.createElement("div",{className:"ts-term-icon"},React.createElement("span",null,x(f.icons.search,F))),React.createElement("span",null,M("Search for","voxel-fse")," ",React.createElement("strong",null,o)))))))},$e=()=>{if(!s)return null;const h=React.createElement("div",{ref:Q,className:"ts-quicksearch-popup lg-width lg-height ts-popup-content"},Ke());return t==="editor"?React.createElement("div",{className:"ts-popup-container ts-form-group quick-search-keyword"},h):oe.createPortal(React.createElement("div",{className:"ts-popup-overlay"},React.createElement("div",{className:"ts-popup-backdrop",onClick:()=>l(!1)}),h),document.body)};return React.createElement(React.Fragment,null,qe(),React.createElement("div",{style:{display:"none"},className:"ts-form-group quick-search-keyword"}),React.createElement("div",{className:"ts-form-group quick-search-keyword"},React.createElement("button",{type:"button",className:"ts-filter ts-popup-target",onClick:()=>l(!0),"aria-label":f.buttonLabel},x(f.icons.search,F),React.createElement("div",{className:"ts-filter-text"},f.buttonLabel),!e.suffixHide&&React.createElement("span",{className:"ts-shortcut"},Ue))),$e())}function Fe(){if(typeof window<"u"&&window.wpApiSettings?.root)return window.wpApiSettings.root.replace(/\/wp-json\/?$/,"")+"?vx=1";if(typeof document<"u"){const e=document.querySelector('link[rel="https://api.w.org/"]');if(e){const n=e.getAttribute("href");if(n)return n.replace(/\/wp-json\/?$/,"")+"?vx=1"}}return typeof window<"u"?window.location.origin+"?vx=1":"/?vx=1"}function Ie(){const e=Fe();try{return new URL(e).pathname.replace(/\/$/,"")}catch{return""}}function He(){if(typeof window<"u"&&window.wpApiSettings?.root)return window.wpApiSettings.root;if(typeof document<"u"){const n=document.querySelector('link[rel="https://api.w.org/"]');if(n){const t=n.getAttribute("href");if(t)return t}}const e=Ie();return typeof window<"u"?window.location.origin+e+"/wp-json/":"/wp-json/"}function Me(){return He()}function Pe(e){const n=e.querySelector("script.vxconfig");if(n&&n.textContent)try{return JSON.parse(n.textContent)}catch(t){console.error("Failed to parse vxconfig:",t)}return null}function De(e){const n={},t=e.postTypes??e.post_types??{};return Array.isArray(t)?t.forEach(r=>{const s=r.key??r.slug??r.id;n[s]={key:s,label:r.label??r.name??s,filter:r.filter??r.filter_key??"keywords",taxonomies:r.taxonomies??[],archive:r.archive??r.archive_url??"",results:r.results??{query:"",items:[]}}}):typeof t=="object"&&Object.entries(t).forEach(([r,s])=>{n[r]={key:s.key??r,label:s.label??s.name??r,filter:s.filter??s.filter_key??"keywords",taxonomies:s.taxonomies??[],archive:s.archive??s.archive_url??"",results:s.results??{query:"",items:[]}}}),{postTypes:n,displayMode:e.displayMode??e.display_mode??"single",keywords:{minlength:e.keywords?.minlength??e.keywords?.min_length??2},singleMode:{submitTo:e.singleMode?.submitTo??e.single_mode?.submit_to??null,filterKey:e.singleMode?.filterKey??e.single_mode?.filter_key??"keywords"},icons:{search:e.icons?.search??{library:"",value:""},close:e.icons?.close??{library:"",value:""},result:e.icons?.result??{library:"",value:""},clearSearches:e.icons?.clearSearches??e.icons?.clear_searches??{library:"",value:""}},buttonLabel:e.buttonLabel??e.button_label??"Quick search",hideCptTabs:e.hideCptTabs??e.hide_cpt_tabs??!1}}async function Oe(e){if(!e||e.length===0)return[];const t=`${Me()}voxel-fse/v1/quick-search/post-types?post_types=${encodeURIComponent(e.join(","))}`;try{const r=await fetch(t);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return(await r.json()).postTypes||[]}catch(r){return console.error("Failed to fetch post types:",r),[]}}function Ne(e){const n=Object.keys(e.postTypes||{}),t={};return Object.entries(e.postTypes||{}).forEach(([r,s])=>{t[r]={label:s.label||r,filter:s.filter||"keywords",taxonomies:s.taxonomies||[]}}),{blockId:"",postTypes:n,postTypeSettings:t,buttonLabel:e.buttonLabel||"Quick search",displayMode:e.displayMode||"single",hideCptTabs:e.hideCptTabs||!1,singleSubmitTo:e.singleMode?.submitTo||"",singleSubmitKey:e.singleMode?.filterKey||"keywords",searchIcon:e.icons?.search||{library:"",value:""},closeIcon:e.icons?.close||{library:"",value:""},resultIcon:e.icons?.result||{library:"",value:""},clearSearchesIcon:e.icons?.clearSearches||{library:"",value:""},buttonPadding:{},buttonPadding_tablet:{},buttonPadding_mobile:{},buttonHeight:50,buttonHeight_tablet:0,buttonHeight_mobile:0,buttonBackground:"",buttonTextColor:"",buttonBorderRadius:5,buttonIconColor:"",buttonIconSize:24,buttonIconSpacing:10,buttonBackgroundHover:"",buttonTextColorHover:"",buttonBorderColorHover:"",buttonIconColorHover:"",buttonBackgroundFilled:"",buttonTextColorFilled:"",buttonIconColorFilled:"",buttonBorderColorFilled:"",buttonBorderWidthFilled:0,suffixHide:!1,suffixPadding:{top:2,right:8,bottom:2,left:8},suffixTextColor:"",suffixBackground:"",suffixBorderRadius:50,suffixMargin:0,tabsJustify:"center",tabsPadding:{},tabsMargin:{top:10,right:0,bottom:10,left:0},tabsTextColor:"",tabsActiveTextColor:"",tabsBackground:"",tabsActiveBackground:"",tabsBorderRadius:0,tabsActiveBorderColor:"",popupCustomEnable:!1,popupBackdropBackground:"",popupPointerEvents:!1,popupCenterPosition:!1,popupMinWidth:538,popupMaxWidth:0,popupMaxHeight:0,popupTopBottomMargin:0,hideDesktop:!1,hideTablet:!1,hideMobile:!1,customClasses:""}}function je({vxConfig:e,attributes:n}){const[t,r]=g.useState([]),[s,l]=g.useState(!0);return g.useEffect(()=>{let o=!1;async function d(){l(!0);try{const u=Object.keys(e.postTypes||{}),p=await Oe(u);if(!o){const v=p.map(R=>{const w=e.postTypes?.[R.key];return{...R,label:w?.label||R.label,filter:w?.filter||R.filter||"keywords",taxonomies:w?.taxonomies||R.taxonomies||[]}});r(v)}}catch(u){console.error("Failed to load post types:",u)}finally{o||l(!1)}}return d(),()=>{o=!0}},[e]),s?React.createElement("div",{className:"ts-form-group quick-search-keyword voxel-fse-loading"},React.createElement("button",{type:"button",className:"ts-filter ts-popup-target",disabled:!0},React.createElement("span",{className:"ts-loader"}))):React.createElement(Le,{attributes:n,postTypes:t,context:"frontend",vxConfig:e})}function P(){document.querySelectorAll(".quick-search.voxel-fse-quick-search").forEach(n=>{if(n.dataset.hydrated==="true")return;const t=Pe(n);if(!t){console.error("Quick Search: No vxconfig found");return}const r=De(t),s=Ne(r);n.dataset.hydrated="true",n.innerHTML="",se.createRoot(n).render(React.createElement(je,{vxConfig:r,attributes:s}))})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",P):P(),window.addEventListener("turbo:load",P),window.addEventListener("pjax:complete",P),typeof jQuery<"u"&&jQuery(document).on("voxel:markup-update",P)})(ReactDOM,React,ReactDOM);
