(function(oe,g,le){"use strict";var U,V,I,z;U={"(":9,"!":8,"*":7,"/":7,"%":7,"+":6,"-":6,"<":5,"<=":5,">":5,">=":5,"==":4,"!=":4,"&&":3,"||":2,"?":1,"?:":1},V=["(","?"],I={")":["("],":":["?","?:"]},z=/<=|>=|==|!=|&&|\|\||\?:|\(|!|\*|\/|%|\+|-|<|>|\?|\)|:/;function ae(e){for(var t=[],n=[],r,s,l,o;r=e.match(z);){for(s=r[0],l=e.substr(0,r.index).trim(),l&&t.push(l);o=n.pop();){if(I[s]){if(I[s][0]===o){s=I[s][1]||s;break}}else if(V.indexOf(o)>=0||U[o]<U[s]){n.push(o);break}t.push(o)}I[s]||n.push(s),e=e.substr(r.index+s.length)}return e=e.trim(),e&&t.push(e),t.concat(n.reverse())}var ie={"!":function(e){return!e},"*":function(e,t){return e*t},"/":function(e,t){return e/t},"%":function(e,t){return e%t},"+":function(e,t){return e+t},"-":function(e,t){return e-t},"<":function(e,t){return e<t},"<=":function(e,t){return e<=t},">":function(e,t){return e>t},">=":function(e,t){return e>=t},"==":function(e,t){return e===t},"!=":function(e,t){return e!==t},"&&":function(e,t){return e&&t},"||":function(e,t){return e||t},"?:":function(e,t,n){if(e)throw t;return n}};function ce(e,t){var n=[],r,s,l,o,f,u;for(r=0;r<e.length;r++){if(f=e[r],o=ie[f],o){for(s=o.length,l=Array(s);s--;)l[s]=n.pop();try{u=o.apply(null,l)}catch(m){return m}}else t.hasOwnProperty(f)?u=t[f]:u=+f;n.push(u)}return n[0]}function ue(e){var t=ae(e);return function(n){return ce(t,n)}}function de(e){var t=ue(e);return function(n){return+t({n})}}var J={contextDelimiter:"",onMissingKey:null};function fe(e){var t,n,r;for(t=e.split(";"),n=0;n<t.length;n++)if(r=t[n].trim(),r.indexOf("plural=")===0)return r.substr(7)}function Z(e,t){var n;this.data=e,this.pluralForms={},this.options={};for(n in J)this.options[n]=t!==void 0&&n in t?t[n]:J[n]}Z.prototype.getPluralForm=function(e,t){var n=this.pluralForms[e],r,s,l;return n||(r=this.data[e][""],l=r["Plural-Forms"]||r["plural-forms"]||r.plural_forms,typeof l!="function"&&(s=fe(r["Plural-Forms"]||r["plural-forms"]||r.plural_forms),l=de(s)),n=this.pluralForms[e]=l),n(t)},Z.prototype.dcnpgettext=function(e,t,n,r,s){var l,o,f;return s===void 0?l=0:l=this.getPluralForm(e,s),o=n,t&&(o=t+this.options.contextDelimiter+n),f=this.data[e][o],f&&f[l]?f[l]:(this.options.onMissingKey&&this.options.onMissingKey(n,e),l===0?n:r)};var W={"":{plural_forms(e){return e===1?0:1}}},pe=/^i18n\.(n?gettext|has_translation)(_|$)/,he=(e,t,n)=>{const r=new Z({}),s=new Set,l=()=>{s.forEach(a=>a())},o=a=>(s.add(a),()=>s.delete(a)),f=(a="default")=>r.data[a],u=(a,i="default")=>{r.data[i]={...r.data[i],...a},r.data[i][""]={...W[""],...r.data[i]?.[""]},delete r.pluralForms[i]},m=(a,i)=>{u(a,i),l()},v=(a,i="default")=>{r.data[i]={...r.data[i],...a,"":{...W[""],...r.data[i]?.[""],...a?.[""]}},delete r.pluralForms[i],l()},k=(a,i)=>{r.data={},r.pluralForms={},m(a,i)},C=(a="default",i,y,b,R)=>(r.data[a]||u(void 0,a),r.dcnpgettext(a,i,y,b,R)),x=a=>a||"default",A=(a,i)=>{let y=C(i,void 0,a);return n?(y=n.applyFilters("i18n.gettext",y,a,i),n.applyFilters("i18n.gettext_"+x(i),y,a,i)):y},L=(a,i,y)=>{let b=C(y,i,a);return n?(b=n.applyFilters("i18n.gettext_with_context",b,a,i,y),n.applyFilters("i18n.gettext_with_context_"+x(y),b,a,i,y)):b},N=(a,i,y,b)=>{let R=C(b,void 0,a,i,y);return n?(R=n.applyFilters("i18n.ngettext",R,a,i,y,b),n.applyFilters("i18n.ngettext_"+x(b),R,a,i,y,b)):R},Q=(a,i,y,b,R)=>{let H=C(R,b,a,i,y);return n?(H=n.applyFilters("i18n.ngettext_with_context",H,a,i,y,b,R),n.applyFilters("i18n.ngettext_with_context_"+x(R),H,a,i,y,b,R)):H},F=()=>L("ltr","text direction")==="rtl",p=(a,i,y)=>{const b=i?i+""+a:a;let R=!!r.data?.[y??"default"]?.[b];return n&&(R=n.applyFilters("i18n.has_translation",R,a,i,y),R=n.applyFilters("i18n.has_translation_"+x(y),R,a,i,y)),R};if(n){const a=i=>{pe.test(i)&&l()};n.addAction("hookAdded","core/i18n",a),n.addAction("hookRemoved","core/i18n",a)}return{getLocaleData:f,setLocaleData:m,addLocaleData:v,resetLocaleData:k,subscribe:o,__:A,_x:L,_n:N,_nx:Q,isRTL:F,hasTranslation:p}};function me(e){return typeof e!="string"||e===""?(console.error("The namespace must be a non-empty string."),!1):/^[a-zA-Z][a-zA-Z0-9_.\-\/]*$/.test(e)?!0:(console.error("The namespace can only contain numbers, letters, dashes, periods, underscores and slashes."),!1)}var X=me;function ye(e){return typeof e!="string"||e===""?(console.error("The hook name must be a non-empty string."),!1):/^__/.test(e)?(console.error("The hook name cannot begin with `__`."),!1):/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(e)?!0:(console.error("The hook name can only contain numbers, letters, dashes, periods and underscores."),!1)}var $=ye;function ge(e,t){return function(r,s,l,o=10){const f=e[t];if(!$(r)||!X(s))return;if(typeof l!="function"){console.error("The hook callback must be a function.");return}if(typeof o!="number"){console.error("If specified, the hook priority must be a number.");return}const u={callback:l,priority:o,namespace:s};if(f[r]){const m=f[r].handlers;let v;for(v=m.length;v>0&&!(o>=m[v-1].priority);v--);v===m.length?m[v]=u:m.splice(v,0,u),f.__current.forEach(k=>{k.name===r&&k.currentIndex>=v&&k.currentIndex++})}else f[r]={handlers:[u],runs:0};r!=="hookAdded"&&e.doAction("hookAdded",r,s,l,o)}}var G=ge;function ve(e,t,n=!1){return function(s,l){const o=e[t];if(!$(s)||!n&&!X(l))return;if(!o[s])return 0;let f=0;if(n)f=o[s].handlers.length,o[s]={runs:o[s].runs,handlers:[]};else{const u=o[s].handlers;for(let m=u.length-1;m>=0;m--)u[m].namespace===l&&(u.splice(m,1),f++,o.__current.forEach(v=>{v.name===s&&v.currentIndex>=m&&v.currentIndex--}))}return s!=="hookRemoved"&&e.doAction("hookRemoved",s,l),f}}var j=ve;function be(e,t){return function(r,s){const l=e[t];return typeof s<"u"?r in l&&l[r].handlers.some(o=>o.namespace===s):r in l}}var Y=be;function Re(e,t,n,r){return function(l,...o){const f=e[t];f[l]||(f[l]={handlers:[],runs:0}),f[l].runs++;const u=f[l].handlers;if(!u||!u.length)return n?o[0]:void 0;const m={name:l,currentIndex:0};async function v(){try{f.__current.add(m);let C=n?o[0]:void 0;for(;m.currentIndex<u.length;)C=await u[m.currentIndex].callback.apply(null,o),n&&(o[0]=C),m.currentIndex++;return n?C:void 0}finally{f.__current.delete(m)}}function k(){try{f.__current.add(m);let C=n?o[0]:void 0;for(;m.currentIndex<u.length;)C=u[m.currentIndex].callback.apply(null,o),n&&(o[0]=C),m.currentIndex++;return n?C:void 0}finally{f.__current.delete(m)}}return(r?v:k)()}}var q=Re;function we(e,t){return function(){const r=e[t];return Array.from(r.__current).at(-1)?.name??null}}var ee=we;function ke(e,t){return function(r){const s=e[t];return typeof r>"u"?s.__current.size>0:Array.from(s.__current).some(l=>l.name===r)}}var te=ke;function Ce(e,t){return function(r){const s=e[t];if($(r))return s[r]&&s[r].runs?s[r].runs:0}}var ne=Ce,Ee=class{actions;filters;addAction;addFilter;removeAction;removeFilter;hasAction;hasFilter;removeAllActions;removeAllFilters;doAction;doActionAsync;applyFilters;applyFiltersAsync;currentAction;currentFilter;doingAction;doingFilter;didAction;didFilter;constructor(){this.actions=Object.create(null),this.actions.__current=new Set,this.filters=Object.create(null),this.filters.__current=new Set,this.addAction=G(this,"actions"),this.addFilter=G(this,"filters"),this.removeAction=j(this,"actions"),this.removeFilter=j(this,"filters"),this.hasAction=Y(this,"actions"),this.hasFilter=Y(this,"filters"),this.removeAllActions=j(this,"actions",!0),this.removeAllFilters=j(this,"filters",!0),this.doAction=q(this,"actions",!1,!1),this.doActionAsync=q(this,"actions",!1,!0),this.applyFilters=q(this,"filters",!0,!1),this.applyFiltersAsync=q(this,"filters",!0,!0),this.currentAction=ee(this,"actions"),this.currentFilter=ee(this,"filters"),this.doingAction=te(this,"actions"),this.doingFilter=te(this,"filters"),this.didAction=ne(this,"actions"),this.didFilter=ne(this,"filters")}};function _e(){return new Ee}var Se=_e,re=Se(),{addAction:Qe,addFilter:Ve,removeAction:ze,removeFilter:Je,hasAction:We,hasFilter:Xe,removeAllActions:Ge,removeAllFilters:Ye,doAction:et,doActionAsync:tt,applyFilters:nt,applyFiltersAsync:rt,currentAction:st,currentFilter:ot,doingAction:lt,doingFilter:at,didAction:it,didFilter:ct,actions:ut,filters:dt}=re,w=he(void 0,void 0,re);w.getLocaleData.bind(w),w.setLocaleData.bind(w),w.resetLocaleData.bind(w),w.subscribe.bind(w);var P=w.__.bind(w);w._x.bind(w),w._n.bind(w),w._nx.bind(w),w.isRTL.bind(w),w.hasTranslation.bind(w);function xe(e,t){let n=null;return(...r)=>{n&&clearTimeout(n),n=setTimeout(()=>e(...r),t)}}function Te(){return typeof navigator<"u"&&(navigator.platform||"").includes("Mac")?"macOS":"other"}const M=()=>React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.25 2.75C6.14154 2.75 2 6.89029 2 11.998C2 17.1056 6.14154 21.2459 11.25 21.2459C13.5335 21.2459 15.6238 20.4187 17.2373 19.0475L20.7182 22.5287C21.011 22.8216 21.4859 22.8217 21.7788 22.5288C22.0717 22.2359 22.0718 21.761 21.7789 21.4681L18.2983 17.9872C19.6714 16.3736 20.5 14.2826 20.5 11.998C20.5 6.89029 16.3585 2.75 11.25 2.75ZM3.5 11.998C3.5 7.71905 6.96962 4.25 11.25 4.25C15.5304 4.25 19 7.71905 19 11.998C19 16.2769 15.5304 19.7459 11.25 19.7459C6.96962 19.7459 3.5 16.2769 3.5 11.998Z",fill:"currentColor"})),Ae=()=>React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M5.9545 5.95548C6.39384 5.51614 7.10616 5.51614 7.5455 5.95548L11.999 10.409L16.4524 5.95561C16.8918 5.51627 17.6041 5.51627 18.0434 5.95561C18.4827 6.39495 18.4827 7.10726 18.0434 7.5466L13.59 12L18.0434 16.4534C18.4827 16.8927 18.4827 17.605 18.0434 18.0444C17.6041 18.4837 16.8918 18.4837 16.4524 18.0444L11.999 13.591L7.5455 18.0445C7.10616 18.4839 6.39384 18.4839 5.9545 18.0445C5.51517 17.6052 5.51516 16.8929 5.9545 16.4535L10.408 12L5.9545 7.54647C5.51516 7.10713 5.51517 6.39482 5.9545 5.95548Z",fill:"currentColor"})),se=()=>React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M10.7477 2.46516C10.6701 2.52471 10.5961 2.58957 10.5262 2.65951L5.15851 8.03055C5.08902 8.10008 5.02455 8.1737 4.96533 8.25084H10.0004C10.4148 8.25084 10.7507 7.91473 10.7504 7.5003L10.7477 2.46516Z",fill:"currentColor"}),React.createElement("path",{d:"M4.5 9.75084V19.75C4.5 20.9926 5.50736 22 6.75 22H17.25C18.4926 22 19.5 20.9926 19.5 19.75V4.25C19.5 3.00736 18.4926 2 17.25 2H12.2474L12.2504 7.49924C12.2512 8.74244 11.2436 9.75084 10.0004 9.75084H4.5ZM9 13.75H15C15.4142 13.75 15.75 14.0858 15.75 14.5C15.75 14.9142 15.4142 15.25 15 15.25H9C8.58579 15.25 8.25 14.9142 8.25 14.5C8.25 14.0858 8.58579 13.75 9 13.75ZM9 16.75H12C12.4142 16.75 12.75 17.0858 12.75 17.5C12.75 17.9142 12.4142 18.25 12 18.25H9C8.58579 18.25 8.25 17.9142 8.25 17.5C8.25 17.0858 8.58579 16.75 9 16.75Z",fill:"currentColor"})),Le=()=>React.createElement("svg",{width:"80",height:"80",viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M2 12.3906C2 6.86778 6.47715 2.39062 12 2.39062C17.5228 2.39062 22 6.86778 22 12.3906C22 17.9135 17.5228 22.3906 12 22.3906C6.47715 22.3906 2 17.9135 2 12.3906ZM8.78362 10.2354L10.9388 12.3906L8.78362 14.5458C8.49073 14.8387 8.49073 15.3136 8.78362 15.6065C9.07652 15.8994 9.55139 15.8994 9.84428 15.6065L11.9995 13.4513L14.1546 15.6064C14.4475 15.8993 14.9224 15.8993 15.2153 15.6064C15.5082 15.3135 15.5082 14.8387 15.2153 14.5458L13.0602 12.3906L15.2153 10.2355C15.5082 9.94258 15.5082 9.46771 15.2153 9.17482C14.9224 8.88192 14.4475 8.88192 14.1546 9.17482L11.9995 11.33L9.84428 9.17475C9.55139 8.88186 9.07652 8.88186 8.78362 9.17475C8.49073 9.46764 8.49073 9.94251 8.78362 10.2354Z",fill:"currentColor"}));function S(e,t){return!e||!e.value||e.library===""?React.createElement(t,null):e.library==="svg"?React.createElement("img",{src:e.value,alt:""}):e.library==="icon"?React.createElement("i",{className:e.value}):React.createElement(t,null)}function Me({attributes:e,postTypes:t,context:n,vxConfig:r}){const[s,l]=g.useState(!1),[o,f]=g.useState(""),[u,m]=g.useState(t[0]||null),[v,k]=g.useState([]),[C,x]=g.useState(!1),[A,L]=g.useState([]),N=g.useRef(null),Q=g.useRef(null),F=g.useRef(""),p=r||{postTypes:{},displayMode:e.displayMode||"single",keywords:{minlength:2},singleMode:{submitTo:e.singleSubmitTo||null,filterKey:e.singleSubmitKey||"keywords"},icons:{search:e.searchIcon,close:e.closeIcon,result:e.resultIcon,clearSearches:e.clearSearchesIcon},buttonLabel:e.buttonLabel||"Quick search",hideCptTabs:e.hideCptTabs||!1};g.useEffect(()=>{if(n==="frontend")try{const h=localStorage.getItem("voxel:recent_searches");if(h){const d=JSON.parse(h);Array.isArray(d)&&L(d)}}catch{}},[n]),g.useEffect(()=>{t.length>0&&!u&&m(t[0])},[t,u]),g.useEffect(()=>{if(n!=="frontend")return;const h=d=>{(d.ctrlKey||d.metaKey)&&d.keyCode===75&&(d.preventDefault(),l(E=>!E)),d.keyCode===27&&l(!1)};return document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)},[n]),g.useEffect(()=>{s&&N.current&&setTimeout(()=>N.current?.focus(),100)},[s]);const a=g.useCallback(async()=>{const h=o.trim();if(h.length<p.keywords.minlength){k([]),F.current="";return}if(h!==F.current){if(n==="editor"){F.current=h,k([{type:"post",key:"post:1",link:"#",title:`Search result for "${o}"`,logo:null,icon:null}]);return}F.current=h,x(!0);try{const d={};if(p.displayMode==="tabbed"&&u){const T=e.postTypeSettings?.[u.key]||{};d[u.key]={filter_key:T.filter||"keywords",taxonomies:T.taxonomies||[]}}else t.forEach(T=>{const K=e.postTypeSettings?.[T.key]||{};d[T.key]={filter_key:K.filter||"keywords",taxonomies:K.taxonomies||[]}});const O=`${window.Voxel_Config?.site_url||window.location.origin}/?vx=1`,B=await(await fetch(`${O}&action=quick_search&search=${encodeURIComponent(o.trim())}&post_types=${encodeURIComponent(JSON.stringify(d))}`)).json();if(B.success)k(B.data||[]);else{const T=window.Voxel,K=window.Voxel_Config,$e=B.message||K?.l10n?.ajaxError||"An error occurred";T?.alert&&T.alert($e,"error"),k([])}}catch{const d=window.Voxel,_=window.Voxel_Config?.l10n?.ajaxError||"An error occurred";d?.alert&&d.alert(_,"error"),k([])}finally{x(!1)}}},[o,p,u,t,e.postTypeSettings,n]),i=g.useMemo(()=>xe(()=>a(),250),[a]);g.useEffect(()=>{i()},[o,i]);const y=g.useCallback(h=>{if(n!=="frontend")return;const d=A.filter(_=>_.key!==h.key);d.unshift(h);const E=d.slice(0,8);L(E),localStorage.setItem("voxel:recent_searches",JSON.stringify(E))},[n,A]),b=g.useCallback(()=>{if(n!=="frontend"||!o.trim())return;const h=`keywords:${o.trim()}`;let d="";if(p.displayMode==="tabbed"&&u){const _=new URL(u.archive||window.location.origin),O=e.postTypeSettings?.[u.key]||{};_.searchParams.set(O.filter||"keywords",o.trim()),d=_.toString()}else if(p.singleMode.submitTo){const _=new URL(p.singleMode.submitTo);_.searchParams.set(p.singleMode.filterKey,o.trim()),d=_.toString()}const E={type:"keywords",key:h,title:o.trim(),logo:null,icon:null,link:d};y(E)},[n,o,p,u,e.postTypeSettings,y]),R=g.useCallback(()=>{if(n!=="frontend")return;let h;if(p.displayMode==="tabbed"&&u){h=new URL(u.archive||window.location.origin);const d=e.postTypeSettings?.[u.key]||{};h.searchParams.set(d.filter||"keywords",o.trim())}else if(p.singleMode.submitTo)h=new URL(p.singleMode.submitTo),h.searchParams.set(p.singleMode.filterKey,o.trim());else return;window.location.href=h.toString()},[n,p,u,e.postTypeSettings,o]),H=g.useCallback(()=>{n==="frontend"&&(L([]),localStorage.setItem("voxel:recent_searches",JSON.stringify([])))},[n]),Be=g.useCallback(h=>{y(h)},[y]),je=g.useCallback(h=>{const d=A.filter(E=>E.key!==h.key);d.unshift(h),L(d),localStorage.setItem("voxel:recent_searches",JSON.stringify(d))},[A]),qe=Te()==="macOS"?"⌘+K":"CTRL+K",Ke=()=>{const h={postTypes:Object.fromEntries(t.map(d=>{const E=e.postTypeSettings?.[d.key]||{};return[d.key,{key:d.key,label:E.label||d.label,filter:E.filter||"keywords",taxonomies:E.taxonomies||[],archive:d.archive||"",results:{query:"",items:[]}}]})),displayMode:e.displayMode||"single",keywords:{minlength:2},singleMode:{submitTo:e.singleSubmitTo||null,filterKey:e.singleSubmitKey||"keywords"},icons:{search:e.searchIcon||{library:"",value:""},close:e.closeIcon||{library:"",value:""},result:e.resultIcon||{library:"",value:""},clearSearches:e.clearSearchesIcon||{library:"",value:""}},buttonLabel:e.buttonLabel||"Quick search",hideCptTabs:e.hideCptTabs||!1};return React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(h)}})},Ue=()=>{const h=p.displayMode==="tabbed"&&!p.hideCptTabs&&t.length>1,d=o.trim().length<p.keywords.minlength&&A.length>0,E=o.trim().length<p.keywords.minlength&&A.length===0,_=o.trim().length>=p.keywords.minlength,O=_&&v.length===0&&!C;return React.createElement("form",{onSubmit:c=>{c.preventDefault(),b(),R()}},React.createElement("div",{className:"ts-sticky-top qs-top uib b-bottom"},React.createElement("a",{href:"#",className:"ts-icon-btn hide-d",role:"button",onClick:c=>{c.preventDefault(),l(!1)}},S(p.icons.close,Ae)),React.createElement("div",{className:"ts-input-icon flexify"},S(p.icons.search,M),React.createElement("input",{ref:N,type:"text",value:o,onChange:c=>f(c.target.value),onKeyDown:c=>{c.key==="Enter"&&(c.preventDefault(),b(),R())},placeholder:p.buttonLabel,className:"autofocus",maxLength:100}))),h&&React.createElement("div",{className:"ts-form-group cpt-tabs"},React.createElement("ul",{className:"ts-generic-tabs flexify simplify-ul quick-cpt-select"},t.map(c=>{const B=e.postTypeSettings?.[c.key]||{};return React.createElement("li",{key:c.key,className:u?.key===c.key?"ts-tab-active":""},React.createElement("a",{href:"#",onClick:T=>{T.preventDefault(),m(c),k([]),a()}},B.label||c.label))}))),React.createElement("div",{className:`ts-term-dropdown ts-md-group ts-multilevel-dropdown ${C?"vx-pending":""}`},E&&React.createElement("div",{className:"ts-empty-user-tab"},S(p.icons.search,M),React.createElement("p",null,P("No recent searches.","voxel-fse"))),d&&React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list quick-search-list"},A.map(c=>React.createElement("li",{key:c.key},React.createElement("a",{rel:"nofollow",href:c.link,onClick:()=>je(c),className:"flexify"},c.logo&&React.createElement("div",{className:"ts-term-image"},React.createElement("span",{dangerouslySetInnerHTML:{__html:c.logo}})),!c.logo&&c.icon&&React.createElement("div",{className:"ts-term-icon"},React.createElement("span",{dangerouslySetInnerHTML:{__html:c.icon}})),!c.logo&&!c.icon&&React.createElement("div",{className:"ts-term-icon"},React.createElement("span",null,S(p.icons.result,se))),React.createElement("span",null,c.title)))),React.createElement("li",null,React.createElement("a",{href:"#",className:"flexify",onClick:c=>{c.preventDefault(),H()}},React.createElement("div",{className:"ts-term-icon"},React.createElement("span",null,S(p.icons.clearSearches,Le))),React.createElement("span",null,P("Clear searches","voxel-fse"))))),O&&React.createElement("div",{className:"ts-empty-user-tab"},S(p.icons.search,M),React.createElement("p",null,P("No results found","voxel-fse"))),C&&_&&v.length===0&&React.createElement("div",{className:"ts-empty-user-tab"},S(p.icons.search,M),React.createElement("p",null,P("Searching","voxel-fse"))),_&&v.length>0&&React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list quick-search-list"},v.map(c=>React.createElement("li",{key:c.key},React.createElement("a",{rel:"nofollow",href:c.link,onClick:()=>Be(c),className:"flexify"},c.logo&&React.createElement("div",{className:"ts-term-image"},React.createElement("span",{dangerouslySetInnerHTML:{__html:c.logo}})),!c.logo&&c.icon&&React.createElement("div",{className:"ts-term-icon"},React.createElement("span",{dangerouslySetInnerHTML:{__html:c.icon}})),!c.logo&&!c.icon&&React.createElement("div",{className:"ts-term-icon"},React.createElement("span",null,S(p.icons.result,se))),React.createElement("span",null,c.title)))),React.createElement("li",{className:"view-all"},React.createElement("a",{href:"#",onClick:c=>{c.preventDefault(),b(),R()},className:"flexify"},React.createElement("div",{className:"ts-term-icon"},React.createElement("span",null,S(p.icons.search,M))),React.createElement("span",null,P("Search for","voxel-fse")," ",React.createElement("strong",null,o)))))))},Ze=()=>{if(!s)return null;const h=React.createElement("div",{className:"ts-form ts-quicksearch-popup lg-width lg-height"},React.createElement("div",{className:"ts-field-popup-container"},React.createElement("div",{ref:Q,className:"ts-field-popup"},React.createElement("div",{className:"ts-popup-content-wrapper min-scroll"},Ue()))));return n==="editor"?React.createElement("div",{className:"ts-popup-root",style:{position:"relative",top:"auto",left:"auto",width:"100%",height:"auto",zIndex:1,pointerEvents:"all"}},React.createElement("div",null,h)):le.createPortal(React.createElement("div",{className:"ts-popup-root"},React.createElement("div",{onClick:()=>l(!1)}),h),document.body)};return React.createElement(React.Fragment,null,Ke(),React.createElement("div",{style:{display:"none"},className:"ts-form-group quick-search-keyword"}),React.createElement("div",{className:"ts-form-group quick-search-keyword"},React.createElement("button",{type:"button",className:"ts-filter ts-popup-target",onClick:()=>l(!0),"aria-label":p.buttonLabel},S(p.icons.search,M),React.createElement("div",{className:"ts-filter-text"},p.buttonLabel),!e.suffixHide&&React.createElement("span",{className:"ts-shortcut"},qe))),Ze())}function Fe(){if(typeof window<"u"&&window.wpApiSettings?.root)return window.wpApiSettings.root;if(typeof document<"u"){const e=document.querySelector('link[rel="https://api.w.org/"]');if(e){const t=e.getAttribute("href");if(t)return t}}if(typeof window<"u"&&window.location?.origin){const e=window.location.pathname.split("/").filter(Boolean),t=["wp-admin","wp-content","wp-includes","wp-json"];return e.length>0&&!t.includes(e[0])?window.location.origin+"/"+e[0]+"/wp-json/":window.location.origin+"/wp-json/"}return"/wp-json/"}function He(){return Fe()}function Ie(e){const t=e.querySelector("script.vxconfig");if(t&&t.textContent)try{return JSON.parse(t.textContent)}catch(n){console.error("Failed to parse vxconfig:",n)}return null}function Pe(e){const t={},n=e.postTypes??e.post_types??{};return Array.isArray(n)?n.forEach(r=>{const s=r.key??r.slug??r.id;t[s]={key:s,label:r.label??r.name??s,filter:r.filter??r.filter_key??"keywords",taxonomies:r.taxonomies??[],archive:r.archive??r.archive_url??"",results:r.results??{query:"",items:[]}}}):typeof n=="object"&&Object.entries(n).forEach(([r,s])=>{t[r]={key:s.key??r,label:s.label??s.name??r,filter:s.filter??s.filter_key??"keywords",taxonomies:s.taxonomies??[],archive:s.archive??s.archive_url??"",results:s.results??{query:"",items:[]}}}),{postTypes:t,displayMode:e.displayMode??e.display_mode??"single",keywords:{minlength:e.keywords?.minlength??e.keywords?.min_length??2},singleMode:{submitTo:e.singleMode?.submitTo??e.single_mode?.submit_to??null,filterKey:e.singleMode?.filterKey??e.single_mode?.filter_key??"keywords"},icons:{search:e.icons?.search??{library:"",value:""},close:e.icons?.close??{library:"",value:""},result:e.icons?.result??{library:"",value:""},clearSearches:e.icons?.clearSearches??e.icons?.clear_searches??{library:"",value:""}},buttonLabel:e.buttonLabel??e.button_label??"Quick search",hideCptTabs:e.hideCptTabs??e.hide_cpt_tabs??!1}}async function De(e){if(!e||e.length===0)return[];const n=`${He()}voxel-fse/v1/quick-search/post-types?post_types=${encodeURIComponent(e.join(","))}`;try{const r={},s=window.wpApiSettings?.nonce;s&&(r["X-WP-Nonce"]=s);const l=await fetch(n,{credentials:"same-origin",headers:r});if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);return(await l.json()).postTypes||[]}catch(r){return console.error("Failed to fetch post types:",r),[]}}function Ne(e){const t=Object.keys(e.postTypes||{}),n={};return Object.entries(e.postTypes||{}).forEach(([r,s])=>{n[r]={label:s.label||r,filter:s.filter||"keywords",taxonomies:s.taxonomies||[]}}),{blockId:"",postTypes:t,postTypeSettings:n,buttonLabel:e.buttonLabel||"Quick search",displayMode:e.displayMode||"single",hideCptTabs:e.hideCptTabs||!1,singleSubmitTo:e.singleMode?.submitTo||"",singleSubmitKey:e.singleMode?.filterKey||"keywords",searchIcon:e.icons?.search||{library:"",value:""},closeIcon:e.icons?.close||{library:"",value:""},resultIcon:e.icons?.result||{library:"",value:""},clearSearchesIcon:e.icons?.clearSearches||{library:"",value:""},buttonPadding:{},buttonPadding_tablet:{},buttonPadding_mobile:{},buttonHeight:50,buttonHeight_tablet:0,buttonHeight_mobile:0,buttonBackground:"",buttonTextColor:"",buttonBorderRadius:5,buttonIconColor:"",buttonIconSize:24,buttonIconSpacing:10,buttonBackgroundHover:"",buttonTextColorHover:"",buttonBorderColorHover:"",buttonIconColorHover:"",buttonBackgroundFilled:"",buttonTextColorFilled:"",buttonIconColorFilled:"",buttonBorderColorFilled:"",buttonBorderWidthFilled:0,suffixHide:!1,suffixPadding:{top:2,right:8,bottom:2,left:8},suffixTextColor:"",suffixBackground:"",suffixBorderRadius:50,suffixMargin:0,tabsJustify:"center",tabsPadding:{},tabsMargin:{top:10,right:0,bottom:10,left:0},tabsTextColor:"",tabsActiveTextColor:"",tabsBackground:"",tabsActiveBackground:"",tabsBorderRadius:0,tabsActiveBorderColor:"",popupCustomEnable:!1,popupBackdropBackground:"",popupPointerEvents:!1,popupCenterPosition:!1,popupMinWidth:538,popupMaxWidth:0,popupMaxHeight:0,popupTopBottomMargin:0,hideDesktop:!1,hideTablet:!1,hideMobile:!1,customClasses:""}}function Oe({vxConfig:e,attributes:t}){const[n,r]=g.useState([]),[s,l]=g.useState(!0);return g.useEffect(()=>{let o=!1;async function f(){l(!0);try{const u=Object.keys(e.postTypes||{}),m=await De(u);if(!o){const v=m.map(k=>{const C=e.postTypes?.[k.key];return{...k,label:C?.label||k.label,filter:C?.filter||k.filter||"keywords",taxonomies:C?.taxonomies||k.taxonomies||[]}});r(v)}}catch(u){console.error("Failed to load post types:",u)}finally{o||l(!1)}}return f(),()=>{o=!0}},[e]),s?React.createElement("div",{className:"ts-form-group"},React.createElement("div",{className:"ts-no-posts"},React.createElement("span",{className:"ts-loader","aria-label":"Loading..."}))):React.createElement(Me,{attributes:t,postTypes:n,context:"frontend",vxConfig:e})}function D(){document.querySelectorAll(".quick-search.voxel-fse-quick-search").forEach(t=>{if(t.dataset.hydrated==="true")return;const n=Ie(t);if(!n){console.error("Quick Search: No vxconfig found");return}const r=Pe(n),s=Ne(r);t.dataset.hydrated="true",t.innerHTML="",oe.createRoot(t).render(React.createElement(Oe,{vxConfig:r,attributes:s}))})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",D):D(),window.addEventListener("turbo:load",D),window.addEventListener("pjax:complete",D),typeof jQuery<"u"&&jQuery(document).on("voxel:markup-update",D)})(ReactDOM,React,ReactDOM);
