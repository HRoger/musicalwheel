(function(se,g,le){"use strict";var U,z,H,J;U={"(":9,"!":8,"*":7,"/":7,"%":7,"+":6,"-":6,"<":5,"<=":5,">":5,">=":5,"==":4,"!=":4,"&&":3,"||":2,"?":1,"?:":1},z=["(","?"],H={")":["("],":":["?","?:"]},J=/<=|>=|==|!=|&&|\|\||\?:|\(|!|\*|\/|%|\+|-|<|>|\?|\)|:/;function ae(e){for(var t=[],n=[],r,o,l,s;r=e.match(J);){for(o=r[0],l=e.substr(0,r.index).trim(),l&&t.push(l);s=n.pop();){if(H[o]){if(H[o][0]===s){o=H[o][1]||o;break}}else if(z.indexOf(s)>=0||U[s]<U[o]){n.push(s);break}t.push(s)}H[o]||n.push(o),e=e.substr(r.index+o.length)}return e=e.trim(),e&&t.push(e),t.concat(n.reverse())}var ie={"!":function(e){return!e},"*":function(e,t){return e*t},"/":function(e,t){return e/t},"%":function(e,t){return e%t},"+":function(e,t){return e+t},"-":function(e,t){return e-t},"<":function(e,t){return e<t},"<=":function(e,t){return e<=t},">":function(e,t){return e>t},">=":function(e,t){return e>=t},"==":function(e,t){return e===t},"!=":function(e,t){return e!==t},"&&":function(e,t){return e&&t},"||":function(e,t){return e||t},"?:":function(e,t,n){if(e)throw t;return n}};function ce(e,t){var n=[],r,o,l,s,f,u;for(r=0;r<e.length;r++){if(f=e[r],s=ie[f],s){for(o=s.length,l=Array(o);o--;)l[o]=n.pop();try{u=s.apply(null,l)}catch(m){return m}}else t.hasOwnProperty(f)?u=t[f]:u=+f;n.push(u)}return n[0]}function ue(e){var t=ae(e);return function(n){return ce(t,n)}}function de(e){var t=ue(e);return function(n){return+t({n})}}var W={contextDelimiter:"",onMissingKey:null};function fe(e){var t,n,r;for(t=e.split(";"),n=0;n<t.length;n++)if(r=t[n].trim(),r.indexOf("plural=")===0)return r.substr(7)}function $(e,t){var n;this.data=e,this.pluralForms={},this.options={};for(n in W)this.options[n]=t!==void 0&&n in t?t[n]:W[n]}$.prototype.getPluralForm=function(e,t){var n=this.pluralForms[e],r,o,l;return n||(r=this.data[e][""],l=r["Plural-Forms"]||r["plural-forms"]||r.plural_forms,typeof l!="function"&&(o=fe(r["Plural-Forms"]||r["plural-forms"]||r.plural_forms),l=de(o)),n=this.pluralForms[e]=l),n(t)},$.prototype.dcnpgettext=function(e,t,n,r,o){var l,s,f;return o===void 0?l=0:l=this.getPluralForm(e,o),s=n,t&&(s=t+this.options.contextDelimiter+n),f=this.data[e][s],f&&f[l]?f[l]:(this.options.onMissingKey&&this.options.onMissingKey(n,e),l===0?n:r)};var Z={"":{plural_forms(e){return e===1?0:1}}},pe=/^i18n\.(n?gettext|has_translation)(_|$)/,he=(e,t,n)=>{const r=new $({}),o=new Set,l=()=>{o.forEach(a=>a())},s=a=>(o.add(a),()=>o.delete(a)),f=(a="default")=>r.data[a],u=(a,i="default")=>{r.data[i]={...r.data[i],...a},r.data[i][""]={...Z[""],...r.data[i]?.[""]},delete r.pluralForms[i]},m=(a,i)=>{u(a,i),l()},v=(a,i="default")=>{r.data[i]={...r.data[i],...a,"":{...Z[""],...r.data[i]?.[""],...a?.[""]}},delete r.pluralForms[i],l()},w=(a,i)=>{r.data={},r.pluralForms={},m(a,i)},E=(a="default",i,y,b,k)=>(r.data[a]||u(void 0,a),r.dcnpgettext(a,i,y,b,k)),T=a=>a||"default",A=(a,i)=>{let y=E(i,void 0,a);return n?(y=n.applyFilters("i18n.gettext",y,a,i),n.applyFilters("i18n.gettext_"+T(i),y,a,i)):y},L=(a,i,y)=>{let b=E(y,i,a);return n?(b=n.applyFilters("i18n.gettext_with_context",b,a,i,y),n.applyFilters("i18n.gettext_with_context_"+T(y),b,a,i,y)):b},O=(a,i,y,b)=>{let k=E(b,void 0,a,i,y);return n?(k=n.applyFilters("i18n.ngettext",k,a,i,y,b),n.applyFilters("i18n.ngettext_"+T(b),k,a,i,y,b)):k},V=(a,i,y,b,k)=>{let M=E(k,b,a,i,y);return n?(M=n.applyFilters("i18n.ngettext_with_context",M,a,i,y,b,k),n.applyFilters("i18n.ngettext_with_context_"+T(k),M,a,i,y,b,k)):M},I=()=>L("ltr","text direction")==="rtl",p=(a,i,y)=>{const b=i?i+""+a:a;let k=!!r.data?.[y??"default"]?.[b];return n&&(k=n.applyFilters("i18n.has_translation",k,a,i,y),k=n.applyFilters("i18n.has_translation_"+T(y),k,a,i,y)),k};if(n){const a=i=>{pe.test(i)&&l()};n.addAction("hookAdded","core/i18n",a),n.addAction("hookRemoved","core/i18n",a)}return{getLocaleData:f,setLocaleData:m,addLocaleData:v,resetLocaleData:w,subscribe:s,__:A,_x:L,_n:O,_nx:V,isRTL:I,hasTranslation:p}};function me(e){return typeof e!="string"||e===""?(console.error("The namespace must be a non-empty string."),!1):/^[a-zA-Z][a-zA-Z0-9_.\-\/]*$/.test(e)?!0:(console.error("The namespace can only contain numbers, letters, dashes, periods, underscores and slashes."),!1)}var G=me;function ye(e){return typeof e!="string"||e===""?(console.error("The hook name must be a non-empty string."),!1):/^__/.test(e)?(console.error("The hook name cannot begin with `__`."),!1):/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(e)?!0:(console.error("The hook name can only contain numbers, letters, dashes, periods and underscores."),!1)}var Q=ye;function ge(e,t){return function(r,o,l,s=10){const f=e[t];if(!Q(r)||!G(o))return;if(typeof l!="function"){console.error("The hook callback must be a function.");return}if(typeof s!="number"){console.error("If specified, the hook priority must be a number.");return}const u={callback:l,priority:s,namespace:o};if(f[r]){const m=f[r].handlers;let v;for(v=m.length;v>0&&!(s>=m[v-1].priority);v--);v===m.length?m[v]=u:m.splice(v,0,u),f.__current.forEach(w=>{w.name===r&&w.currentIndex>=v&&w.currentIndex++})}else f[r]={handlers:[u],runs:0};r!=="hookAdded"&&e.doAction("hookAdded",r,o,l,s)}}var X=ge;function ve(e,t,n=!1){return function(o,l){const s=e[t];if(!Q(o)||!n&&!G(l))return;if(!s[o])return 0;let f=0;if(n)f=s[o].handlers.length,s[o]={runs:s[o].runs,handlers:[]};else{const u=s[o].handlers;for(let m=u.length-1;m>=0;m--)u[m].namespace===l&&(u.splice(m,1),f++,s.__current.forEach(v=>{v.name===o&&v.currentIndex>=m&&v.currentIndex--}))}return o!=="hookRemoved"&&e.doAction("hookRemoved",o,l),f}}var B=ve;function be(e,t){return function(r,o){const l=e[t];return typeof o<"u"?r in l&&l[r].handlers.some(s=>s.namespace===o):r in l}}var Y=be;function ke(e,t,n,r){return function(l,...s){const f=e[t];f[l]||(f[l]={handlers:[],runs:0}),f[l].runs++;const u=f[l].handlers;if(!u||!u.length)return n?s[0]:void 0;const m={name:l,currentIndex:0};async function v(){try{f.__current.add(m);let E=n?s[0]:void 0;for(;m.currentIndex<u.length;)E=await u[m.currentIndex].callback.apply(null,s),n&&(s[0]=E),m.currentIndex++;return n?E:void 0}finally{f.__current.delete(m)}}function w(){try{f.__current.add(m);let E=n?s[0]:void 0;for(;m.currentIndex<u.length;)E=u[m.currentIndex].callback.apply(null,s),n&&(s[0]=E),m.currentIndex++;return n?E:void 0}finally{f.__current.delete(m)}}return(r?v:w)()}}var q=ke;function Re(e,t){return function(){const r=e[t];return Array.from(r.__current).at(-1)?.name??null}}var ee=Re;function we(e,t){return function(r){const o=e[t];return typeof r>"u"?o.__current.size>0:Array.from(o.__current).some(l=>l.name===r)}}var te=we;function Ee(e,t){return function(r){const o=e[t];if(Q(r))return o[r]&&o[r].runs?o[r].runs:0}}var ne=Ee,_e=class{actions;filters;addAction;addFilter;removeAction;removeFilter;hasAction;hasFilter;removeAllActions;removeAllFilters;doAction;doActionAsync;applyFilters;applyFiltersAsync;currentAction;currentFilter;doingAction;doingFilter;didAction;didFilter;constructor(){this.actions=Object.create(null),this.actions.__current=new Set,this.filters=Object.create(null),this.filters.__current=new Set,this.addAction=X(this,"actions"),this.addFilter=X(this,"filters"),this.removeAction=B(this,"actions"),this.removeFilter=B(this,"filters"),this.hasAction=Y(this,"actions"),this.hasFilter=Y(this,"filters"),this.removeAllActions=B(this,"actions",!0),this.removeAllFilters=B(this,"filters",!0),this.doAction=q(this,"actions",!1,!1),this.doActionAsync=q(this,"actions",!1,!0),this.applyFilters=q(this,"filters",!0,!1),this.applyFiltersAsync=q(this,"filters",!0,!0),this.currentAction=ee(this,"actions"),this.currentFilter=ee(this,"filters"),this.doingAction=te(this,"actions"),this.doingFilter=te(this,"filters"),this.didAction=ne(this,"actions"),this.didFilter=ne(this,"filters")}};function Se(){return new _e}var xe=Se,re=xe(),{addAction:Ve,addFilter:ze,removeAction:Je,removeFilter:We,hasAction:Ze,hasFilter:Ge,removeAllActions:Xe,removeAllFilters:Ye,doAction:et,doActionAsync:tt,applyFilters:nt,applyFiltersAsync:rt,currentAction:ot,currentFilter:st,doingAction:lt,doingFilter:at,didAction:it,didFilter:ct,actions:ut,filters:dt}=re,R=he(void 0,void 0,re);R.getLocaleData.bind(R),R.setLocaleData.bind(R),R.resetLocaleData.bind(R),R.subscribe.bind(R);var P=R.__.bind(R);R._x.bind(R),R._n.bind(R),R._nx.bind(R),R.isRTL.bind(R),R.hasTranslation.bind(R);function Te(e,t){let n=null;return(...r)=>{n&&clearTimeout(n),n=setTimeout(()=>e(...r),t)}}function Ce(){return typeof navigator<"u"&&(navigator.platform||"").includes("Mac")?"macOS":"other"}const F=()=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",width:"24",height:"24"},React.createElement("circle",{cx:"11",cy:"11",r:"8"}),React.createElement("path",{d:"m21 21-4.35-4.35"})),Ae=()=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",width:"24",height:"24"},React.createElement("path",{d:"M18 6 6 18"}),React.createElement("path",{d:"m6 6 12 12"})),oe=()=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",width:"24",height:"24"},React.createElement("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),React.createElement("polyline",{points:"14 2 14 8 20 8"})),Le=()=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",width:"24",height:"24"},React.createElement("circle",{cx:"12",cy:"12",r:"10"}),React.createElement("path",{d:"m15 9-6 6"}),React.createElement("path",{d:"m9 9 6 6"}));function x(e,t){return!e||!e.value||e.library===""?React.createElement(t,null):e.library==="svg"?React.createElement("img",{src:e.value,alt:""}):e.library==="icon"?React.createElement("i",{className:e.value}):React.createElement(t,null)}function Fe({attributes:e,postTypes:t,context:n,vxConfig:r}){const[o,l]=g.useState(!1),[s,f]=g.useState(""),[u,m]=g.useState(t[0]||null),[v,w]=g.useState([]),[E,T]=g.useState(!1),[A,L]=g.useState([]),O=g.useRef(null),V=g.useRef(null),I=g.useRef(""),p=r||{postTypes:{},displayMode:e.displayMode||"single",keywords:{minlength:2},singleMode:{submitTo:e.singleSubmitTo||null,filterKey:e.singleSubmitKey||"keywords"},icons:{search:e.searchIcon,close:e.closeIcon,result:e.resultIcon,clearSearches:e.clearSearchesIcon},buttonLabel:e.buttonLabel||"Quick search",hideCptTabs:e.hideCptTabs||!1};g.useEffect(()=>{if(n==="frontend")try{const h=localStorage.getItem("voxel:recent_searches");if(h){const d=JSON.parse(h);Array.isArray(d)&&L(d)}}catch{}},[n]),g.useEffect(()=>{t.length>0&&!u&&m(t[0])},[t,u]),g.useEffect(()=>{if(n!=="frontend")return;const h=d=>{(d.ctrlKey||d.metaKey)&&d.keyCode===75&&(d.preventDefault(),l(_=>!_)),d.keyCode===27&&l(!1)};return document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)},[n]),g.useEffect(()=>{o&&O.current&&setTimeout(()=>O.current?.focus(),100)},[o]);const a=g.useCallback(async()=>{const h=s.trim();if(h.length<p.keywords.minlength){w([]),I.current="";return}if(h!==I.current){if(n==="editor"){I.current=h,w([{type:"post",key:"post:1",link:"#",title:`Search result for "${s}"`,logo:null,icon:null}]);return}I.current=h,T(!0);try{const d={};if(p.displayMode==="tabbed"&&u){const C=e.postTypeSettings?.[u.key]||{};d[u.key]={filter_key:C.filter||"keywords",taxonomies:C.taxonomies||[]}}else t.forEach(C=>{const K=e.postTypeSettings?.[C.key]||{};d[C.key]={filter_key:K.filter||"keywords",taxonomies:K.taxonomies||[]}});const N=`${window.Voxel_Config?.site_url||window.location.origin}/?vx=1`,j=await(await fetch(`${N}&action=quick_search&search=${encodeURIComponent(s.trim())}&post_types=${encodeURIComponent(JSON.stringify(d))}`)).json();if(j.success)w(j.data||[]);else{const C=window.Voxel,K=window.Voxel_Config,Qe=j.message||K?.l10n?.ajaxError||"An error occurred";C?.alert&&C.alert(Qe,"error"),w([])}}catch{const d=window.Voxel,S=window.Voxel_Config?.l10n?.ajaxError||"An error occurred";d?.alert&&d.alert(S,"error"),w([])}finally{T(!1)}}},[s,p,u,t,e.postTypeSettings,n]),i=g.useMemo(()=>Te(()=>a(),250),[a]);g.useEffect(()=>{i()},[s,i]);const y=g.useCallback(h=>{if(n!=="frontend")return;const d=A.filter(S=>S.key!==h.key);d.unshift(h);const _=d.slice(0,8);L(_),localStorage.setItem("voxel:recent_searches",JSON.stringify(_))},[n,A]),b=g.useCallback(()=>{if(n!=="frontend"||!s.trim())return;const h=`keywords:${s.trim()}`;let d="";if(p.displayMode==="tabbed"&&u){const S=new URL(u.archive||window.location.origin),N=e.postTypeSettings?.[u.key]||{};S.searchParams.set(N.filter||"keywords",s.trim()),d=S.toString()}else if(p.singleMode.submitTo){const S=new URL(p.singleMode.submitTo);S.searchParams.set(p.singleMode.filterKey,s.trim()),d=S.toString()}const _={type:"keywords",key:h,title:s.trim(),logo:null,link:d};y(_)},[n,s,p,u,e.postTypeSettings,y]),k=g.useCallback(()=>{if(n!=="frontend")return;let h;if(p.displayMode==="tabbed"&&u){h=new URL(u.archive||window.location.origin);const d=e.postTypeSettings?.[u.key]||{};h.searchParams.set(d.filter||"keywords",s.trim())}else if(p.singleMode.submitTo)h=new URL(p.singleMode.submitTo),h.searchParams.set(p.singleMode.filterKey,s.trim());else return;window.location.href=h.toString()},[n,p,u,e.postTypeSettings,s]),M=g.useCallback(()=>{n==="frontend"&&(L([]),localStorage.setItem("voxel:recent_searches",JSON.stringify([])))},[n]),je=g.useCallback(h=>{y(h)},[y]),Be=g.useCallback(h=>{const d=A.filter(_=>_.key!==h.key);d.unshift(h),L(d),localStorage.setItem("voxel:recent_searches",JSON.stringify(d))},[A]),qe=Ce()==="macOS"?"⌘+K":"CTRL+K",Ke=()=>{const h={postTypes:Object.fromEntries(t.map(d=>{const _=e.postTypeSettings?.[d.key]||{};return[d.key,{key:d.key,label:_.label||d.label,filter:_.filter||"keywords",taxonomies:_.taxonomies||[],archive:d.archive||"",results:{query:"",items:[]}}]})),displayMode:e.displayMode||"single",keywords:{minlength:2},singleMode:{submitTo:e.singleSubmitTo||null,filterKey:e.singleSubmitKey||"keywords"},icons:{search:e.searchIcon||{library:"",value:""},close:e.closeIcon||{library:"",value:""},result:e.resultIcon||{library:"",value:""},clearSearches:e.clearSearchesIcon||{library:"",value:""}},buttonLabel:e.buttonLabel||"Quick search",hideCptTabs:e.hideCptTabs||!1};return React.createElement("script",{type:"text/json",className:"vxconfig",dangerouslySetInnerHTML:{__html:JSON.stringify(h)}})},Ue=()=>{const h=p.displayMode==="tabbed"&&!p.hideCptTabs&&t.length>1,d=s.trim().length<p.keywords.minlength&&A.length>0,_=s.trim().length<p.keywords.minlength&&A.length===0,S=s.trim().length>=p.keywords.minlength,N=S&&v.length===0&&!E;return React.createElement("form",{onSubmit:c=>{c.preventDefault(),b(),k()}},React.createElement("div",{className:"ts-sticky-top qs-top uib b-bottom"},React.createElement("a",{href:"#",className:"ts-icon-btn hide-d",role:"button",onClick:c=>{c.preventDefault(),l(!1)}},x(p.icons.close,Ae)),React.createElement("div",{className:"ts-input-icon flexify"},x(p.icons.search,F),React.createElement("input",{ref:O,type:"text",value:s,onChange:c=>f(c.target.value),onKeyDown:c=>{c.key==="Enter"&&(c.preventDefault(),b(),k())},placeholder:p.buttonLabel,className:"autofocus",maxLength:100}))),h&&React.createElement("div",{className:"ts-form-group cpt-tabs"},React.createElement("ul",{className:"ts-generic-tabs flexify simplify-ul quick-cpt-select"},t.map(c=>{const j=e.postTypeSettings?.[c.key]||{};return React.createElement("li",{key:c.key,className:u?.key===c.key?"ts-tab-active":""},React.createElement("a",{href:"#",onClick:C=>{C.preventDefault(),m(c),w([]),a()}},j.label||c.label))}))),React.createElement("div",{className:`ts-term-dropdown ts-md-group ts-multilevel-dropdown ${E?"vx-pending":""}`},_&&React.createElement("div",{className:"ts-empty-user-tab"},x(p.icons.search,F),React.createElement("p",null,P("No recent searches.","voxel-fse"))),d&&React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list quick-search-list"},A.map(c=>React.createElement("li",{key:c.key},React.createElement("a",{rel:"nofollow",href:c.link,onClick:()=>Be(c),className:"flexify"},c.logo&&React.createElement("div",{className:"ts-term-image"},React.createElement("span",{dangerouslySetInnerHTML:{__html:c.logo}})),!c.logo&&c.icon&&React.createElement("div",{className:"ts-term-icon"},React.createElement("span",{dangerouslySetInnerHTML:{__html:c.icon}})),!c.logo&&!c.icon&&React.createElement("div",{className:"ts-term-icon"},React.createElement("span",null,x(p.icons.result,oe))),React.createElement("span",null,c.title)))),React.createElement("li",null,React.createElement("a",{href:"#",className:"flexify",onClick:c=>{c.preventDefault(),M()}},React.createElement("div",{className:"ts-term-icon"},React.createElement("span",null,x(p.icons.clearSearches,Le))),React.createElement("span",null,P("Clear searches","voxel-fse"))))),N&&React.createElement("div",{className:"ts-empty-user-tab"},x(p.icons.search,F),React.createElement("p",null,P("No results found","voxel-fse"))),E&&S&&v.length===0&&React.createElement("div",{className:"ts-empty-user-tab"},x(p.icons.search,F),React.createElement("p",null,P("Searching","voxel-fse"))),S&&v.length>0&&React.createElement("ul",{className:"simplify-ul ts-term-dropdown-list quick-search-list"},v.map(c=>React.createElement("li",{key:c.key},React.createElement("a",{rel:"nofollow",href:c.link,onClick:()=>je(c),className:"flexify"},c.logo&&React.createElement("div",{className:"ts-term-image"},React.createElement("span",{dangerouslySetInnerHTML:{__html:c.logo}})),!c.logo&&c.icon&&React.createElement("div",{className:"ts-term-icon"},React.createElement("span",{dangerouslySetInnerHTML:{__html:c.icon}})),!c.logo&&!c.icon&&React.createElement("div",{className:"ts-term-icon"},React.createElement("span",null,x(p.icons.result,oe))),React.createElement("span",null,c.title)))),React.createElement("li",{className:"view-all"},React.createElement("a",{href:"#",onClick:c=>{c.preventDefault(),b(),k()},className:"flexify"},React.createElement("div",{className:"ts-term-icon"},React.createElement("span",null,x(p.icons.search,F))),React.createElement("span",null,P("Search for","voxel-fse")," ",React.createElement("strong",null,s)))))))},$e=()=>{if(!o)return null;const h=React.createElement("div",{ref:V,className:"ts-quicksearch-popup lg-width lg-height ts-popup-content"},Ue());return n==="editor"?React.createElement("div",{className:"ts-popup-container ts-form-group quick-search-keyword"},h):le.createPortal(React.createElement("div",{className:"ts-popup-overlay"},React.createElement("div",{className:"ts-popup-backdrop",onClick:()=>l(!1)}),h),document.body)};return React.createElement(React.Fragment,null,Ke(),React.createElement("div",{style:{display:"none"},className:"ts-form-group quick-search-keyword"}),React.createElement("div",{className:"ts-form-group quick-search-keyword"},React.createElement("button",{type:"button",className:"ts-filter ts-popup-target",onClick:()=>l(!0),"aria-label":p.buttonLabel},x(p.icons.search,F),React.createElement("div",{className:"ts-filter-text"},p.buttonLabel),!e.suffixHide&&React.createElement("span",{className:"ts-shortcut"},qe))),$e())}function Ie(){if(typeof window<"u"&&window.wpApiSettings?.root)return window.wpApiSettings.root;if(typeof document<"u"){const e=document.querySelector('link[rel="https://api.w.org/"]');if(e){const t=e.getAttribute("href");if(t)return t}}if(typeof window<"u"&&window.location?.origin){const e=window.location.pathname.split("/").filter(Boolean),t=["wp-admin","wp-content","wp-includes","wp-json"];return e.length>0&&!t.includes(e[0])?window.location.origin+"/"+e[0]+"/wp-json/":window.location.origin+"/wp-json/"}return"/wp-json/"}function Me(){return Ie()}function He(e){const t=e.querySelector("script.vxconfig");if(t&&t.textContent)try{return JSON.parse(t.textContent)}catch(n){console.error("Failed to parse vxconfig:",n)}return null}function Pe(e){const t={},n=e.postTypes??e.post_types??{};return Array.isArray(n)?n.forEach(r=>{const o=r.key??r.slug??r.id;t[o]={key:o,label:r.label??r.name??o,filter:r.filter??r.filter_key??"keywords",taxonomies:r.taxonomies??[],archive:r.archive??r.archive_url??"",results:r.results??{query:"",items:[]}}}):typeof n=="object"&&Object.entries(n).forEach(([r,o])=>{t[r]={key:o.key??r,label:o.label??o.name??r,filter:o.filter??o.filter_key??"keywords",taxonomies:o.taxonomies??[],archive:o.archive??o.archive_url??"",results:o.results??{query:"",items:[]}}}),{postTypes:t,displayMode:e.displayMode??e.display_mode??"single",keywords:{minlength:e.keywords?.minlength??e.keywords?.min_length??2},singleMode:{submitTo:e.singleMode?.submitTo??e.single_mode?.submit_to??null,filterKey:e.singleMode?.filterKey??e.single_mode?.filter_key??"keywords"},icons:{search:e.icons?.search??{library:"",value:""},close:e.icons?.close??{library:"",value:""},result:e.icons?.result??{library:"",value:""},clearSearches:e.icons?.clearSearches??e.icons?.clear_searches??{library:"",value:""}},buttonLabel:e.buttonLabel??e.button_label??"Quick search",hideCptTabs:e.hideCptTabs??e.hide_cpt_tabs??!1}}async function De(e){if(!e||e.length===0)return[];const n=`${Me()}voxel-fse/v1/quick-search/post-types?post_types=${encodeURIComponent(e.join(","))}`;try{const r=await fetch(n);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return(await r.json()).postTypes||[]}catch(r){return console.error("Failed to fetch post types:",r),[]}}function Oe(e){const t=Object.keys(e.postTypes||{}),n={};return Object.entries(e.postTypes||{}).forEach(([r,o])=>{n[r]={label:o.label||r,filter:o.filter||"keywords",taxonomies:o.taxonomies||[]}}),{blockId:"",postTypes:t,postTypeSettings:n,buttonLabel:e.buttonLabel||"Quick search",displayMode:e.displayMode||"single",hideCptTabs:e.hideCptTabs||!1,singleSubmitTo:e.singleMode?.submitTo||"",singleSubmitKey:e.singleMode?.filterKey||"keywords",searchIcon:e.icons?.search||{library:"",value:""},closeIcon:e.icons?.close||{library:"",value:""},resultIcon:e.icons?.result||{library:"",value:""},clearSearchesIcon:e.icons?.clearSearches||{library:"",value:""},buttonPadding:{},buttonPadding_tablet:{},buttonPadding_mobile:{},buttonHeight:50,buttonHeight_tablet:0,buttonHeight_mobile:0,buttonBackground:"",buttonTextColor:"",buttonBorderRadius:5,buttonIconColor:"",buttonIconSize:24,buttonIconSpacing:10,buttonBackgroundHover:"",buttonTextColorHover:"",buttonBorderColorHover:"",buttonIconColorHover:"",buttonBackgroundFilled:"",buttonTextColorFilled:"",buttonIconColorFilled:"",buttonBorderColorFilled:"",buttonBorderWidthFilled:0,suffixHide:!1,suffixPadding:{top:2,right:8,bottom:2,left:8},suffixTextColor:"",suffixBackground:"",suffixBorderRadius:50,suffixMargin:0,tabsJustify:"center",tabsPadding:{},tabsMargin:{top:10,right:0,bottom:10,left:0},tabsTextColor:"",tabsActiveTextColor:"",tabsBackground:"",tabsActiveBackground:"",tabsBorderRadius:0,tabsActiveBorderColor:"",popupCustomEnable:!1,popupBackdropBackground:"",popupPointerEvents:!1,popupCenterPosition:!1,popupMinWidth:538,popupMaxWidth:0,popupMaxHeight:0,popupTopBottomMargin:0,hideDesktop:!1,hideTablet:!1,hideMobile:!1,customClasses:""}}function Ne({vxConfig:e,attributes:t}){const[n,r]=g.useState([]),[o,l]=g.useState(!0);return g.useEffect(()=>{let s=!1;async function f(){l(!0);try{const u=Object.keys(e.postTypes||{}),m=await De(u);if(!s){const v=m.map(w=>{const E=e.postTypes?.[w.key];return{...w,label:E?.label||w.label,filter:E?.filter||w.filter||"keywords",taxonomies:E?.taxonomies||w.taxonomies||[]}});r(v)}}catch(u){console.error("Failed to load post types:",u)}finally{s||l(!1)}}return f(),()=>{s=!0}},[e]),o?React.createElement("div",{className:"ts-form-group quick-search-keyword voxel-fse-loading"},React.createElement("button",{type:"button",className:"ts-filter ts-popup-target",disabled:!0},React.createElement("span",{className:"ts-loader"}))):React.createElement(Fe,{attributes:t,postTypes:n,context:"frontend",vxConfig:e})}function D(){document.querySelectorAll(".quick-search.voxel-fse-quick-search").forEach(t=>{if(t.dataset.hydrated==="true")return;const n=He(t);if(!n){console.error("Quick Search: No vxconfig found");return}const r=Pe(n),o=Oe(r);t.dataset.hydrated="true",t.innerHTML="",se.createRoot(t).render(React.createElement(Ne,{vxConfig:r,attributes:o}))})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",D):D(),window.addEventListener("turbo:load",D),window.addEventListener("pjax:complete",D),typeof jQuery<"u"&&jQuery(document).on("voxel:markup-update",D)})(ReactDOM,React,ReactDOM);
